;/*FB_PKG_DELIM*/

__d("WAWebFetchAdsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7296808930434725"}),null);
__d("WAWebFetchAdsQuery.graphql",["WAWebFetchAdsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"options"},c={defaultValue:null,kind:"LocalArgument",name:"page_id"},d=[{kind:"Variable",name:"options",variableName:"options"},{kind:"Variable",name:"page_id",variableName:"page_id"}],e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={kind:"InlineFragment",selections:[e],type:"Node",abstractKey:"__isNode"},g=[{kind:"Literal",name:"supported",value:"304s3R"}],h={alias:null,args:null,kind:"ScalarField",name:"formatted_for_lwi",storageKey:null},i={alias:null,args:[{kind:"Literal",name:"height",value:64},{kind:"Literal",name:"width",value:64}],kind:"ScalarField",name:"thumbnail_image_url",storageKey:"thumbnail_image_url(height:64,width:64)"},j=[{kind:"Literal",name:"metrics",value:["REACH","RESULTS"]}],k={alias:null,args:null,kind:"ScalarField",name:"reach",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"results",storageKey:null},m={alias:null,args:null,concreteType:"AdInsightsNode",kind:"LinkedField",name:"node",plural:!1,selections:[k,l],storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"boosting_status",storageKey:null},o={alias:null,args:null,concreteType:"AdsCreativeSpecification",kind:"LinkedField",name:"creative",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null}],storageKey:null},p={alias:null,args:null,concreteType:"AdsLWIAdGroupSpec",kind:"LinkedField",name:"adgroup_spec",plural:!0,selections:[o],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};o=[e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"boosting_info",plural:!1,selections:[q,{alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"spent",plural:!1,selections:[h],storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"AdCampaignGroup",kind:"LinkedField",name:"campaign_group",plural:!1,selections:[e,{alias:null,args:j,concreteType:"AdInsightsConnection",kind:"LinkedField",name:"ad_insights",plural:!1,selections:[{alias:null,args:null,concreteType:"AdInsightsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[m],storageKey:null}],storageKey:'ad_insights(metrics:["REACH","RESULTS"])'}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"spec",plural:!1,selections:[q,n,{alias:null,args:null,concreteType:"AdsLWIAdGroupSpec",kind:"LinkedField",name:"adgroup_spec",plural:!0,selections:[o,e],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"WAWebFetchAdsQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"CTWAAPI",kind:"LinkedField",name:"ctwa",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:d,concreteType:"CTWAAPIAllPageAdsConnection",kind:"LinkedField",name:"all_page_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"CTWAAPIAllPageAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[f,{kind:"RequiredField",field:{alias:null,args:g,concreteType:null,kind:"LinkedField",name:"wrapper_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CTWABoostedComponentWrapper",kind:"LinkedField",name:"boosted_component",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.id"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"boosting_info",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"spent",plural:!1,selections:[{kind:"RequiredField",field:h,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.boosting_info.spent.formatted_for_lwi"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.boosting_info.spent"},{kind:"RequiredField",field:i,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.boosting_info.thumbnail_image_url"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.boosting_info"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"AdCampaignGroup",kind:"LinkedField",name:"campaign_group",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.campaign_group.id"},{alias:null,args:j,concreteType:"AdInsightsConnection",kind:"LinkedField",name:"ad_insights",plural:!1,selections:[{alias:null,args:null,concreteType:"AdInsightsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:m,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.campaign_group.ad_insights.edges.node"}],storageKey:null}],storageKey:'ad_insights(metrics:["REACH","RESULTS"])'}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.campaign_group"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"spec",plural:!1,selections:[{kind:"RequiredField",field:n,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.spec.boosting_status"},{kind:"RequiredField",field:p,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.spec.adgroup_spec"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.boosted_component.spec"}],storageKey:null}],type:"CTWAAdsManagementBoostedComponent",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"BoostedComponentAsyncWrapper",kind:"LinkedField",name:"async_request",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.id"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"boosting_info",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"spent",plural:!1,selections:[{kind:"RequiredField",field:h,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.boosting_info.spent.formatted_for_lwi"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.boosting_info.spent"},{kind:"RequiredField",field:i,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.boosting_info.thumbnail_image_url"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.boosting_info"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"AdCampaignGroup",kind:"LinkedField",name:"campaign_group",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.campaign_group.id"},{alias:null,args:j,concreteType:"AdInsightsConnection",kind:"LinkedField",name:"ad_insights",plural:!1,selections:[{alias:null,args:null,concreteType:"AdInsightsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"AdInsightsNode",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:k,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.campaign_group.ad_insights.edges.node.reach"},l],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.campaign_group.ad_insights.edges.node"}],storageKey:null}],storageKey:'ad_insights(metrics:["REACH","RESULTS"])'}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.campaign_group"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"spec",plural:!1,selections:[{kind:"RequiredField",field:n,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.spec.boosting_status"},{kind:"RequiredField",field:p,action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.spec.adgroup_spec"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer.async_request.spec"}],storageKey:null}],type:"LWIAdsManagementBoostedComponentAsyncRequest",abstractKey:null}],storageKey:'wrapper_renderer(supported:"304s3R")'},action:"THROW",path:"ctwa.all_page_ads.edges.node.wrapper_renderer"}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads.edges.node"}],storageKey:null}],storageKey:null},action:"THROW",path:"ctwa.all_page_ads"}],storageKey:null},action:"THROW",path:"ctwa"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"WAWebFetchAdsQuery",selections:[{alias:null,args:null,concreteType:"CTWAAPI",kind:"LinkedField",name:"ctwa",plural:!1,selections:[{alias:null,args:d,concreteType:"CTWAAPIAllPageAdsConnection",kind:"LinkedField",name:"all_page_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"CTWAAPIAllPageAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[q,f,{alias:null,args:g,concreteType:null,kind:"LinkedField",name:"wrapper_renderer",plural:!1,selections:[q,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CTWABoostedComponentWrapper",kind:"LinkedField",name:"boosted_component",plural:!1,selections:o,storageKey:null}],type:"CTWAAdsManagementBoostedComponent",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"BoostedComponentAsyncWrapper",kind:"LinkedField",name:"async_request",plural:!1,selections:o,storageKey:null}],type:"LWIAdsManagementBoostedComponentAsyncRequest",abstractKey:null}],storageKey:'wrapper_renderer(supported:"304s3R")'}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("WAWebFetchAdsQuery_facebookRelayOperation"),metadata:{},name:"WAWebFetchAdsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchAboutStatusJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"user_id"}],b=[{kind:"Literal",name:"updates",value:["STATUS"]},{items:[{fields:[{kind:"Variable",name:"user_id",variableName:"user_id"}],kind:"ObjectValue",name:"users.0"}],kind:"ListValue",name:"users"}],c={alias:null,args:null,kind:"ScalarField",name:"jid",storageKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"dhash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],type:"XWA2UserStatusUpdate",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchAboutStatusJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2UserUpdate",kind:"LinkedField",name:"xwa2_users_updates_since",plural:!0,selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"updates",plural:!0,selections:[d],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchAboutStatusJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2UserUpdate",kind:"LinkedField",name:"xwa2_users_updates_since",plural:!0,selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"updates",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d],storageKey:null}],storageKey:null}]},params:{id:"6556393721124826",metadata:{},name:"WAWebMexFetchAboutStatusJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchTextStatusListJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"XWA2TextStatus",kind:"LinkedField",name:"xwa2_text_status_list",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"jid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_update_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ephemeral_duration_sec",storageKey:null},{alias:null,args:null,concreteType:"XWA2TextStatusEmoji",kind:"LinkedField",name:"emoji",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchTextStatusListJobQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchTextStatusListJobQuery",selections:b},params:{id:"6657242354369052",metadata:{},name:"WAWebMexFetchTextStatusListJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexCreateNewsletterAdminInviteJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"},{defaultValue:null,kind:"LocalArgument",name:"user_id"}],b=[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"},{kind:"Variable",name:"user_id",variableName:"user_id"}],c={alias:null,args:null,kind:"ScalarField",name:"invite_expiration_time",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexCreateNewsletterAdminInviteJobMutation",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdminInviteCreateResponse",kind:"LinkedField",name:"xwa2_newsletter_admin_invite_create",plural:!1,selections:[c],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexCreateNewsletterAdminInviteJobMutation",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdminInviteCreateResponse",kind:"LinkedField",name:"xwa2_newsletter_admin_invite_create",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"6826078034173770",metadata:{},name:"WAWebMexCreateNewsletterAdminInviteJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebMexCreateNewsletterJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},d=[b,{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"update_time",storageKey:null}],e=[b,c,{alias:null,args:null,kind:"ScalarField",name:"direct_path",storageKey:null}];b=[{alias:null,args:[{kind:"Variable",name:"newsletter_input",variableName:"input"}],concreteType:"XWA2Newsletter",kind:"LinkedField",name:"xwa2_newsletter_create",plural:!1,selections:[b,{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[c],storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterName",kind:"LinkedField",name:"name",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterDescription",kind:"LinkedField",name:"description",plural:!1,selections:d,storageKey:null},{alias:null,args:[{kind:"Literal",name:"type",value:"IMAGE"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:e,storageKey:'picture(type:"IMAGE")'},{alias:"preview",args:[{kind:"Literal",name:"type",value:"PREVIEW"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:e,storageKey:'picture(type:"PREVIEW")'},{alias:null,args:null,kind:"ScalarField",name:"invite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscribers_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterViewerMetadata",kind:"LinkedField",name:"viewer_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexCreateNewsletterJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexCreateNewsletterJobMutation",selections:b},params:{id:"6996806640408138",metadata:{},name:"WAWebMexCreateNewsletterJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchAllNewslettersMetadataJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},c=[a,{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"update_time",storageKey:null}],d=[a,b,{alias:null,args:null,kind:"ScalarField",name:"direct_path",storageKey:null}];a=[{alias:null,args:null,concreteType:"XWA2Newsletter",kind:"LinkedField",name:"xwa2_newsletter_subscribed",plural:!0,selections:[a,{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[b],storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterName",kind:"LinkedField",name:"name",plural:!1,selections:c,storageKey:null},{alias:null,args:[{kind:"Literal",name:"type",value:"IMAGE"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:d,storageKey:'picture(type:"IMAGE")'},{alias:"preview",args:[{kind:"Literal",name:"type",value:"PREVIEW"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:d,storageKey:'picture(type:"PREVIEW")'},{alias:null,args:null,concreteType:"XWA2NewsletterDescription",kind:"LinkedField",name:"description",plural:!1,selections:c,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"invite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterReactionCodesSetting",kind:"LinkedField",name:"reaction_codes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterViewerMetadata",kind:"LinkedField",name:"viewer_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"WAWebMexFetchAllNewslettersMetadataJobQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"WAWebMexFetchAllNewslettersMetadataJobQuery",selections:a},params:{id:"6388546374527196",metadata:{},name:"WAWebMexFetchAllNewslettersMetadataJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchGeoSuspendedCountriesJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"}],b=[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"}],c={alias:null,args:null,concreteType:"XWA2NewsletterAdminThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterGeoState",kind:"LinkedField",name:"geo_states",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchGeoSuspendedCountriesJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchGeoSuspendedCountriesJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7240683889293155",metadata:{},name:"WAWebMexFetchGeoSuspendedCountriesJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchNewsletterAdminCountJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"}],b=[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"}],c={alias:null,args:null,kind:"ScalarField",name:"admin_count",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchNewsletterAdminCountJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchNewsletterAdminCountJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7130823597031706",metadata:{},name:"WAWebMexFetchNewsletterAdminCountJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchNewsletterDehydratedJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"XWA2Newsletter",kind:"LinkedField",name:"xwa2_newsletter",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"subscribers_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterReactionCodesSetting",kind:"LinkedField",name:"reaction_codes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchNewsletterDehydratedJobQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchNewsletterDehydratedJobQuery",selections:b},params:{id:"7272540469429201",metadata:{},name:"WAWebMexFetchNewsletterDehydratedJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchNewsletterIntegrityUpdateJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"}],b=[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"}],c={alias:null,args:null,concreteType:"XWA2NewsletterAdminThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterGeoState",kind:"LinkedField",name:"geo_states",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},d={alias:null,args:null,concreteType:"XWA2NewsletterMessageConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterMessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterMessage",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"server_id",storageKey:null},{alias:null,args:null,concreteType:"XWA2MessageDeliveryUpdate",kind:"LinkedField",name:"message_delivery_update",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2MessageDeliveryUpdateIssue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchNewsletterIntegrityUpdateJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c,d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchNewsletterIntegrityUpdateJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c,d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"24710381495227355",metadata:{},name:"WAWebMexFetchNewsletterIntegrityUpdateJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchNewsletterJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"fetch_creation_time"},b={defaultValue:null,kind:"LocalArgument",name:"fetch_full_image"},c={defaultValue:null,kind:"LocalArgument",name:"fetch_viewer_metadata"},d={defaultValue:null,kind:"LocalArgument",name:"input"},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},g=[e,{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"update_time",storageKey:null}],h=[e,f,{alias:null,args:null,kind:"ScalarField",name:"direct_path",storageKey:null}];e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"XWA2Newsletter",kind:"LinkedField",name:"xwa2_newsletter",plural:!1,selections:[e,{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[f],storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{condition:"fetch_creation_time",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null}]},{alias:null,args:null,concreteType:"XWA2NewsletterName",kind:"LinkedField",name:"name",plural:!1,selections:g,storageKey:null},{condition:"fetch_full_image",kind:"Condition",passingValue:!0,selections:[{alias:null,args:[{kind:"Literal",name:"type",value:"IMAGE"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:h,storageKey:'picture(type:"IMAGE")'}]},{alias:"preview",args:[{kind:"Literal",name:"type",value:"PREVIEW"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:h,storageKey:'picture(type:"PREVIEW")'},{alias:null,args:null,concreteType:"XWA2NewsletterDescription",kind:"LinkedField",name:"description",plural:!1,selections:g,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"invite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscribers_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterReactionCodesSetting",kind:"LinkedField",name:"reaction_codes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{condition:"fetch_viewer_metadata",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterViewerMetadata",kind:"LinkedField",name:"viewer_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null}],storageKey:null}]}],storageKey:null}];return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"WAWebMexFetchNewsletterJobQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,c,b,a],kind:"Operation",name:"WAWebMexFetchNewsletterJobQuery",selections:e},params:{id:"6620195908089573",metadata:{},name:"WAWebMexFetchNewsletterJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchNewsletterMessageDeliveryUpdatesJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"jid"}],b=[{kind:"Variable",name:"newsletter_id",variableName:"jid"}],c={alias:null,args:null,concreteType:"XWA2NewsletterMessageConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterMessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterMessage",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"server_id",storageKey:null},{alias:null,args:null,concreteType:"XWA2MessageDeliveryUpdate",kind:"LinkedField",name:"message_delivery_update",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2MessageDeliveryUpdateIssue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchNewsletterMessageDeliveryUpdatesJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchNewsletterMessageDeliveryUpdatesJobQuery",selections:[{alias:null,args:b,concreteType:"XWA2NewsletterAdmin",kind:"LinkedField",name:"xwa2_newsletter_admin",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7059637480793961",metadata:{},name:"WAWebMexFetchNewsletterMessageDeliveryUpdatesJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexMuteNewsletterJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"}],b=[{alias:null,args:[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"}],concreteType:"XWA2NewsletterMutationResponse",kind:"LinkedField",name:"xwa2_newsletter_mute_v2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexMuteNewsletterJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexMuteNewsletterJobMutation",selections:b},params:{id:"25151904754424642",metadata:{},name:"WAWebMexMuteNewsletterJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebMexUnmuteNewsletterJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"}],b=[{alias:null,args:[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"}],concreteType:"XWA2NewsletterMutationResponse",kind:"LinkedField",name:"xwa2_newsletter_unmute_v2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexUnmuteNewsletterJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexUnmuteNewsletterJobMutation",selections:b},params:{id:"7337137176362961",metadata:{},name:"WAWebMexUnmuteNewsletterJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebMexUpdateNewsletterJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"newsletter_id"},{defaultValue:null,kind:"LocalArgument",name:"updates"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},d=[b,{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"update_time",storageKey:null}],e=[b,c,{alias:null,args:null,kind:"ScalarField",name:"direct_path",storageKey:null}];b=[{alias:null,args:[{kind:"Variable",name:"newsletter_id",variableName:"newsletter_id"},{kind:"Variable",name:"updates",variableName:"updates"}],concreteType:"XWA2Newsletter",kind:"LinkedField",name:"xwa2_newsletter_update",plural:!1,selections:[b,{alias:null,args:null,concreteType:"XWA2NewsletterState",kind:"LinkedField",name:"state",plural:!1,selections:[c],storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadMetadata",kind:"LinkedField",name:"thread_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterName",kind:"LinkedField",name:"name",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterDescription",kind:"LinkedField",name:"description",plural:!1,selections:d,storageKey:null},{alias:null,args:[{kind:"Literal",name:"type",value:"IMAGE"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:e,storageKey:'picture(type:"IMAGE")'},{alias:"preview",args:[{kind:"Literal",name:"type",value:"PREVIEW"}],concreteType:"XWA2Picture",kind:"LinkedField",name:"picture",plural:!1,selections:e,storageKey:'picture(type:"PREVIEW")'},{alias:null,args:null,kind:"ScalarField",name:"invite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},{alias:null,args:null,concreteType:"XWA2NewsletterThreadSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2NewsletterReactionCodesSetting",kind:"LinkedField",name:"reaction_codes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexUpdateNewsletterJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexUpdateNewsletterJobMutation",selections:b},params:{id:"7150902998257522",metadata:{},name:"WAWebMexUpdateNewsletterJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebMexGetUsernameJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"XWA2UsernameGetResponse",kind:"LinkedField",name:"xwa2_username_get",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"WAWebMexGetUsernameJobQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"WAWebMexGetUsernameJobQuery",selections:a},params:{id:"7181020378641339",metadata:{},name:"WAWebMexGetUsernameJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAPttComposerScaleWaveform",["invariant"],(function(a,b,c,d,e,f,g,h){function a(a,b){if(b===a.length)return a;if(b===0)return[];if(a.length===0)return new Array(b).fill(0);return b>a.length?i(a,b):j(a,b)}function i(a,b){b>a.length||h(0,75746,b,a.length);var c;if(a.length===1)c=0;else{var d=(b-a.length)/(a.length-1);c=1/(1+d)}d=[];b>=1&&d.push(a[0]);for(var e=1;e<b-1;e++){var f=e*c,g=Math.floor(f),i=f-g;d.push(k(a[g],a[Math.ceil(f)],i))}b>=2&&d.push(a[a.length-1]);return d}function j(a,b){b<a.length||h(0,75747,b,a.length);var c=[];b=b/a.length;var d=0,e=0,f=0;for(var a=a,g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;d+=j;f+=1;e+=b;e>=1&&(c.push(d/f),f=0,d=0,e-=1)}f>0&&c.push(d/f);return c}function k(a,b,c){return a+(b-a)*c}g["default"]=a}),98);
__d("WAWebAddonSendMsgData",["WALogger","WANullthrows","WAWebAck","WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonInfraError","WAWebAddonPluginProcessor","WAWebAddonProcessMsgs","WAWebAddonProcessMsgsUtils","WAWebAddonRetryRequestUtils","WAWebAddonSelectUtils","WAWebHandleMsgError","WAWebSendMsgJob","WAWebSendMsgTypes","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAddonMsgData: failure, msg: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAddonMsgData: failure, parent msg "," for addon "," is not found"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[addon-infra]: sent "," addon, id: ",""]);j=function(){return a};return a}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebAddonPluginProcessor").getAddonProcessor(a.type).convert.toDualDecryptedMsgData;if(c!=null){b=b.get(d("WAWebAddonProcessMsgsUtils").getAddonParentMsgKey(a).toString());if(b==null)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.MissingParentMsg);return c(a,b)}return a});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield k(a,b));b=d("WAWebAddonSelectUtils").getTableModeByMsgType(a.type);yield d("WAWebAddonDBTable").addonInternalDBTable.updateAck(b,a,c("WANullthrows")(a.ack));yield d("WAWebAddonPluginProcessor").getAddonProcessor(a.type).updateCollection({add:[a],remove:[]})});return n.apply(this,arguments)}var o=function(a){a=a.id;var b=a.remote;return a.fromMe&&d("WAWebUserPrefsMeUser").isMePrimary(b)?d("WAWebAck").ACK.READ:d("WAWebAck").ACK.SENT};function a(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;try{var e=(yield d("WAWebAddonProcessMsgsUtils").queryAddonParentMsgs([a],d("WAWebAddonConstants").AddonProcessMode.Send)),f=e[0];e=e[1];c=f;yield d("WAWebAddonProcessMsgs").processOutgoingMsg(e[0],f,b);yield d("WAWebAddonRetryRequestUtils").storeSelfMessageTypeRow(a);e=(yield d("WAWebSendMsgJob").encryptAndSendMsg({type:d("WAWebSendMsgTypes").SendMessageRecordType.Addon,data:a},b));b=e.count;var g=e.t;e=e.error;if(e!=null)throw new(d("WAWebHandleMsgError").MessageSentAckError)(e);yield m(babelHelpers["extends"]({},a,{ack:o(a)}),f);d("WALogger").DEV(j(),a.type,a.id.id);return{t:parseInt(g,10),count:b}}catch(b){if(c==null){d("WALogger").ERROR(i(),d("WAWebAddonProcessMsgsUtils").getAddonParentMsgKey(a),a.id.toString()).tags("messaging","addons").sendLogs("sendAddonMsgData: undefined parent");throw b}yield m(babelHelpers["extends"]({},a,{ack:d("WAWebAck").ACK.FAILED}),c);d("WALogger").WARN(h(),a.id.toString()).tags("messaging","addons").devConsole(a.type);throw b}});return p.apply(this,arguments)}g.sendAddonMsgData=a}),98);
__d("WAWebMexGetUsernameJob",["WALogger","WAWebMexClient","WAWebMexGetUsernameJobQuery.graphql","WAWebMexRelayEnvironmentV2","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][USERNAME] Get username query returned no username via mex"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][USERNAME] Successfully fetched latest username via mex"]);j=function(){return a};return a}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=h!==void 0?h:h=b("WAWebMexGetUsernameJobQuery.graphql");try{a=(yield d("WAWebMexClient").fetchQuery(a,{}));d("WALogger").DEV(j()).tags("GQL","MEX").devConsole({response:a});a=(a=a.xwa2_username_get)==null?void 0:a.username;return{username:a}}catch(a){d("WALogger").WARN(i()).tags("GQL","MEX");if(a instanceof d("WAWebMexRelayEnvironmentV2").MexIqError)return{username:null,error:{code:a.code,text:"MexIqError:"+a.message}};if(a instanceof d("WAWebMexRelayEnvironmentV2").MexFatalExtensionError)return{username:null,error:{code:a.error.extensions.error_code,text:"MexFatalExtensionError:"+a.error.message}};throw a}});return k.apply(this,arguments)}g.mexGetUsernameQueryJob=a}),98);
__d("WAWebGetUsernameQueryJob",["WAJobOrchestratorTypes","WAWebBackendErrors","WAWebMexGetUsernameJob","WAWebOrchestratorNonPersistedJob","WAWebSetUsernameJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getUsernameQueryJob",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebMexGetUsernameJob").mexGetUsernameQueryJob()),b=a.username;a=a.error;if(b!=null){var c=d("WAWebUserPrefsMeUser").assertGetMeUser();yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:c,username:b}])}else if(a!=null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.code,a.text);return b}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getUsernameJob=a}),98);
__d("WAWebJestE2ELogUtils",["gkx"],(function(a,b,c,d,e,f,g){function a(a){c("gkx")("26256")}g.maybeLogToJestE2eJSConsole=a}),98);
__d("WAWebWamEnumMdBootstrapHistoryPayloadType",[],(function(a,b,c,d,e,f){a=Object.freeze({INITIAL:1,RECENT_HISTORY:2,FULL_HISTORY:3,PUSHNAME:4,STATUS_V3:5,NON_BLOCKING_DATA:6,ON_DEMAND:7});f.MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE=a}),66);
__d("WAWebWamEnumMdBootstrapPayloadType",[],(function(a,b,c,d,e,f){a=Object.freeze({CRITICAL:1,NON_CRITICAL:2});f.MD_BOOTSTRAP_PAYLOAD_TYPE=a}),66);
__d("WAWebWamEnumMdBootstrapSource",[],(function(a,b,c,d,e,f){a=Object.freeze({APP_STATE:1,HISTORY:2});f.MD_BOOTSTRAP_SOURCE=a}),66);
__d("WAWebWamEnumMdBootstrapStepResult",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,FAILURE:2});f.MD_BOOTSTRAP_STEP_RESULT=a}),66);
__d("WAWebMdBootstrapDataAppliedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCollection","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapSource","WAWebWamEnumMdBootstrapStepResult"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdBootstrapDataApplied:[2298,{collection:[5,d("WAWebWamEnumCollection").COLLECTION],historySyncChunkOrder:[14,a.TYPES.INTEGER],historySyncStageProgress:[11,a.TYPES.INTEGER],mdBootstrapContactsCount:[8,a.TYPES.INTEGER],mdBootstrapHistoryPayloadType:[10,d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE],mdBootstrapPayloadType:[3,d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE],mdBootstrapSource:[2,d("WAWebWamEnumMdBootstrapSource").MD_BOOTSTRAP_SOURCE],mdBootstrapStepDuration:[6,a.TYPES.INTEGER],mdBootstrapStepResult:[12,d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT],mdRegAttemptId:[9,a.TYPES.STRING],mdSessionId:[1,a.TYPES.STRING],mdTimestamp:[4,a.TYPES.INTEGER],sentViaMms:[13,a.TYPES.BOOLEAN],usedSnapshot:[7,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{MdBootstrapDataApplied:[]});g.MdBootstrapDataAppliedWamEvent=b}),98);
__d("WAWebSyncdMdSession",["WABinary","WACryptoSha256","WANullthrows","WAWebCryptoCurve25519","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebSignalCommonUtils").createSignalAddress(d("WAWebUserPrefsMeUser").getMeUser()).toString();a=c("WANullthrows")(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().loadIdentityKey(a));a=d("WAWebCryptoCurve25519").toCurveKeyPubKey(d("WAWebSignalCommonUtils").strToBuffer(a));var b=c("WANullthrows")(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().getIdentityKeyPair());b=d("WAWebCryptoCurve25519").toCurveKeyPubKey(b.pubKey);return i(a,b)});return h.apply(this,arguments)}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.byteLength!==32)throw c("err")("genSessionId: primary identity public key is "+a.byteLength+" bytes, should be 32!");if(b.byteLength!==32)throw c("err")("genSessionId: companion identity public key is "+a.byteLength+" bytes, should be 32!");var e=new(d("WABinary").Binary)();e.writeBuffer(a);e.write("_".charCodeAt(0));e.writeBuffer(b);a=e.readByteArray();b=(yield d("WACryptoSha256").sha256Base64(a));return b});return j.apply(this,arguments)}g.genCurrentSessionId=a;g.genSessionId=i}),98);
__d("WAWebSyncdMdSyncFieldstatMeta",["Promise","WAStorageEstimator","WAWebSyncdMdSession","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=-2,j=-1;a=function(){function a(){this._storageEstimation={mdStorageQuotaBytes:-2,mdStorageQuotaUsedBytes:-2},this._mdSessionId=null}var c=a.prototype;c.getStorageEstimation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this._storageEstimation.mdStorageQuotaBytes!==i)return(h||(h=b("Promise"))).resolve(this._storageEstimation);var a=(yield d("WAStorageEstimator").estimateStorage());this._storageEstimation={mdStorageQuotaBytes:a.success?a.value.quota:j,mdStorageQuotaUsedBytes:a.success?a.value.usage:j};return this._storageEstimation});function c(){return a.apply(this,arguments)}return c}();c.getMdSessionId=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this._mdSessionId!=null)return this._mdSessionId;this._mdSessionId=(yield d("WAWebSyncdMdSession").genCurrentSessionId());return this._mdSessionId});function c(){return a.apply(this,arguments)}return c}();return a}();c=new a();g.STORAGE_QUOTA_UNAVAILABLE=j;g.MdSyncFieldStatsMeta=c}),98);
__d("WAWebSyncBootstrap",["$InternalEnum","Promise","WAJobOrchestratorTypes","WALogger","WAPromiseDelays","WASyncd","WASyncdConst","WATimeUtils","WAWebABProps","WAWebAccountSyncJob","WAWebApiHistorySyncNotification","WAWebBootstrapNewsletter","WAWebBrokerGlobalAppState","WAWebCmd","WAWebDbEncryptionKey","WAWebGetUsernameQueryJob","WAWebHandleAccountSyncNotification","WAWebHandleHistorySyncChunk","WAWebHandleWorkerCompatibleRecentSyncChunk","WAWebHistorySyncNotificationUtils","WAWebJestE2ELogUtils","WAWebJobOrchestrator","WAWebLogoutReasonConstants","WAWebMdBootstrapDataAppliedWamEvent","WAWebMiscBrowserUtils","WAWebNonAddressBookContactsJob","WAWebOrchestratorNonPersistedJob","WAWebProtobufsHistorySync.pb","WAWebQueryAndUpdateGroupMetadataJob","WAWebSchemaHistorySyncNotification","WAWebSocketLogoutJob","WAWebSyncContactJob","WAWebSyncDeviceAdvDeviceListJob","WAWebSyncdDb","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsAppStateSync","WAWebUserPrefsHistorySync","WAWebUsernameGatingUtils","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapSource","WAWebWamEnumWebcScenarioType","WAWebWamUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] finish full sync, after clearing: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] clearing bucket queue for type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] finish full sync, before clearing: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] finish recent sync, after clearing: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] clearing bucket queue for type ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] finish recent sync, before clearing: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] error while running job: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] job is scheduled, source: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] Skip job scheduling as recent sync is complete when starting backend"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] Skip job scheduling as initial chat sync is incomplete"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] init next run"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] skip scheduling the next run as recent notification with order "," fails too many times"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] skip scheduling the next run as no recent notifications with correct chunk order"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] next unprocessed recent notification has chunk order: ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] skip scheduling the next run as first recent notification doesn't have chunk order"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] skip scheduling the next run as no recent notifications"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] recent sync is incompleted, check remaining recent sync notifications"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] skip scheduling the next run as no on demand notifications"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] recent sync finishes, check remaining full sync notifications"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] skip scheduling the next run as no on demand notifications"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] recent sync finishes, check remaining on demand sync notifications"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] finish main flow"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] _progressiveHistorySyncRun failed with ",", stack: ",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] job starts"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] processLoop picked up chunk"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] Skip processLoop, until main is loaded"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] initial sync is in progress, use default loop interval"]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] _progressiveHistorySyncRun failed with ",", stack: ",""]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] No remaining iterations but still have unprocessed "," history sync notifications in table with loop interval ",""]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] processLoop picked up the next chunk with order ",""]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Skip processLoop, until main is loaded"]);M=function(){return a};return a}function N(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Skip processLoop, until initial sync is complete"]);N=function(){return a};return a}function O(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] continueProgressiveHistorySyncProcessing"]);O=function(){return a};return a}function P(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to sync default disappearing mode ",""]);P=function(){return a};return a}function Q(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to sync privacy settings ",""]);Q=function(){return a};return a}function R(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap] syncing my device list"]);R=function(){return a};return a}function S(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] ",""]);S=function(){return a};return a}function T(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] need to sync critical data: true"]);T=function(){return a};return a}function U(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] all critical data synced within timeout period"]);U=function(){return a};return a}function V(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] history sync critical data timeout exceeded, logging out"]);V=function(){return a};return a}function W(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap] syncd critical data timeout exceeded, logging out"]);W=function(){return a};return a}function X(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] setting critical data syncd timeout (",")"]);X=function(){return a};return a}function Y(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] username creation and 1on1 chat disabled, skipping get username query"]);Y=function(){return a};return a}function aa(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] initial chat history synced."]);aa=function(){return a};return a}function ba(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sync device failed"]);ba=function(){return a};return a}function ca(){var a=babelHelpers.taggedTemplateLiteralLoose(["sync "," contacts for device info during the initial sync"]);ca=function(){return a};return a}function da(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncMostRecentDevices has no contact to sync during bootstrap"]);da=function(){return a};return a}function ea(){var a=babelHelpers.taggedTemplateLiteralLoose(["initial contact sync completes"]);ea=function(){return a};return a}function fa(){var a=babelHelpers.taggedTemplateLiteralLoose(["start contact sync for "," chunks of contacts during the initial sync"]);fa=function(){return a};return a}function ga(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] critical sync done"]);ga=function(){return a};return a}function ha(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap][history sync] completed sync for ",""]);ha=function(){return a};return a}var ia=40,ja=20,ka=60*3,la=2e4,Z=b("$InternalEnum").Mirrored(["NotStarted","InProcess","Completed"]),ma={initialChatHistory:!1,readReceipts:!1,syncdCritical:!1},na={initialChatHistoryTotalMsg:-1,initialChatHistoryTotalChats:-1},oa=20,pa=5;a=function(){function a(){this._criticalState={},this._debugOnlyState=na,this._progressiveHistorySyncRemainingIteration=25,this._progressiveHistorySyncInFlight=!1,this._allCriticalDataSynced=!1,this._syncDCriticalDataTimeout=null,this._isHistorySyncLoopRunning=!1,this.initState()}var e=a.prototype;e.initState=function(){this._criticalState=babelHelpers["extends"]({},ma),this._debugOnlyState=babelHelpers["extends"]({},na),this._syncDCriticalDataState=Z.NotStarted,this._syncDNonCriticalDataState=Z.NotStarted,this._syncDGroupMetadataQueryDataState=Z.NotStarted};e._isCriticalSyncDoneThisSession=function(){for(var a in this._criticalState)if(!this._criticalState[a])return!1;return!0};e._setSynced=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(ha(),a),this._criticalState[a]=!0,this._isCriticalSyncDoneThisSession()&&(d("WALogger").LOG(ga()),yield d("WAWebUserPrefsAppStateSync").setAllCriticalDataSynced(),d("WAWebCmd").Cmd.criticalSyncDone(),c("WAWebBrokerGlobalAppState").initOrUpdateTracking(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.INITIAL_PAIRING),this.syncNonCriticalData())});function a(b){return a.apply(this,arguments)}return a}();e._syncContactsInChunks=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(fa(),a?b.length+1:0).tags("contact-sync");a!=null&&(yield d("WAWebSyncContactJob").syncContactListJob(Array.from(a),!1));for(a=0;a<b.length;a++){var c=Array.from(b[a]);yield d("WAPromiseDelays").delayMs(ja*1e3);yield d("WAWebSyncContactJob").syncContactListJob(c)}d("WALogger").LOG(ea()).tags("contact-sync")});function a(b,c){return a.apply(this,arguments)}return a}();e._syncDeviceList=function(a){if(a==null){d("WALogger").LOG(da()).tags("contact-sync");return(h||(h=b("Promise"))).resolve()}d("WALogger").LOG(ca(),a.size).tags("contact-sync");a=Array.from(a);return d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob(a,null,null)["catch"](function(a){d("WALogger").ERROR(ba()).verbose().sendLogs("Sync device failed: "+a)})};e.setReadReceiptsSynced=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this._setSynced("readReceipts")});function c(){return a.apply(this,arguments)}return c}();e.setInitialChatHistorySynced=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this._setSynced("initialChatHistory"),d("WALogger").LOG(aa()),void $.continueProgressiveHistorySyncProcessingV2(d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.InitialSyncComplete)});function c(){return a.apply(this,arguments)}return c}();e.setSyncDCriticalSynced=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this._syncDCriticalDataState=Z.Completed;if(this._criticalState.syncdCritical)return;yield this._setSynced("syncdCritical")});function c(){return a.apply(this,arguments)}return c}();e.syncNonCriticalData=function(){var a=this,b=[];this._syncDGroupMetadataQueryDataState=Z.InProcess;d("WAWebQueryAndUpdateGroupMetadataJob").queryAndUpdateAllGroupMetadata(!0).then(function(){b=d("WAWebNonAddressBookContactsJob").getAllContactsFromChatCollectionIntoChunks(),a._syncDeviceList(b[0]),d("WAWebNonAddressBookContactsJob").getAndUpdateNonAddressBookContacts()}).then(function(){self.setTimeout(function(){this._syncContactsInChunks(b[0],b.slice(1,b.length))}.bind(a),ia*1e3)})["finally"](function(){a._syncDGroupMetadataQueryDataState=Z.Completed});d("WAWebHandleAccountSyncNotification").getAndUpdateStatus();d("WAWebAccountSyncJob").getAndUpdateProfilePicture();d("WAWebAccountSyncJob").updateBlocklist();void d("WAWebBootstrapNewsletter").bootstrapNewsletterBackend();d("WAWebUsernameGatingUtils").usernameCreationEnabled()||d("WAWebUsernameGatingUtils").username1on1ChatCreationEnabled()?void d("WAWebGetUsernameQueryJob").getUsernameJob():d("WALogger").LOG(Y());this._syncDNonCriticalDataState=Z.InProcess;d("WASyncd").markCollectionsForSync([d("WASyncdConst").CollectionName.Regular,d("WASyncdConst").CollectionName.RegularLow,d("WASyncdConst").CollectionName.RegularHigh]).then(function(){a._syncDNonCriticalDataState=Z.Completed})};e.markInitialHistorySyncCountDebugStats=function(a,b){this._debugOnlyState={initialChatHistoryTotalMsg:a,initialChatHistoryTotalChats:b}};e.isSyncDCriticalDataSyncInProcess=function(){return this._syncDCriticalDataState===Z.InProcess};e.isSyncDBootstrapInProcess=function(){return this._syncDCriticalDataState===Z.InProcess||this._syncDNonCriticalDataState===Z.InProcess};e.isSyncDBootstrapGroupMetadataQueryInProcess=function(){return this._syncDGroupMetadataQueryDataState===Z.InProcess};e._initCriticalDataTimeoutIfNeeded=function(){var a=this;this._syncDCriticalDataTimeout==null&&(d("WALogger").LOG(X(),ka),this._syncDCriticalDataTimeout=self.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){(yield a._isSyncDCriticalDataComplete())||(d("WALogger").LOG(W()),d("WAWebWamUtils").forceFlushAllWamAndQplBuffers(),d("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("syncd critical data timeout exceeded, logging out"),yield d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.SyncdTimeout));var b=(yield d("WAWebUserPrefsHistorySync").getInitialHistorySyncComplete());b!==!0&&(d("WALogger").LOG(V()),d("WAWebWamUtils").forceFlushAllWamAndQplBuffers(),d("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("history sync critical data timeout exceeded, logging out"),yield d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.HistorySyncTimeout));d("WALogger").LOG(U())}),ka*1e3))};e._isSyncDCriticalDataComplete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSyncdDb").getSyncActionsRows(["action"],[d("WASyncdConst").Actions.SettingPushName]));return a.length>0&&a.find(function(a){return a.actionState===d("WASyncdConst").SyncActionState.Success})!=null});function a(){return a.apply(this,arguments)}return a}();e.setSyncDCriticalDataSyncCompleted=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this._syncDCriticalDataTimeout!=null&&(yield new(d("WAWebMdBootstrapDataAppliedWamEvent").MdBootstrapDataAppliedWamEvent)({mdBootstrapPayloadType:d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL,mdBootstrapSource:d("WAWebWamEnumMdBootstrapSource").MD_BOOTSTRAP_SOURCE.APP_STATE,mdSessionId:yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId(),mdTimestamp:d("WATimeUtils").unixTimeMs()}).commitAndWaitForFlush(!0))});function c(){return a.apply(this,arguments)}return c}();e.getCriticalSyncDebugSummary=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(yield this.isCriticalDataSynced())return"-------\nAll critical data synced\n-------\n\n";var a=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatus());return"-------\n Initial history sync complete: "+(a?"true":this._criticalState.initialChatHistory.toString())+"\n Initial msgs: "+this._debugOnlyState.initialChatHistoryTotalMsg+", initial chats: "+this._debugOnlyState.initialChatHistoryTotalChats+"\n Receipt sync complete: "+this._criticalState.readReceipts.toString()+" \n "+("Critical collection sync complete: "+this._criticalState.syncdCritical.toString()+" \n-------\n")});function c(){return a.apply(this,arguments)}return c}();e.isCriticalDataSynced=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this._allCriticalDataSynced=this._allCriticalDataSynced||(yield d("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced());return this._allCriticalDataSynced});function c(){return a.apply(this,arguments)}return c}();e.syncCriticalData=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;c("WAWebBrokerGlobalAppState").initOrUpdateTracking(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.INITIAL_PAIRING);d("WALogger").LOG(T());var e=(yield this.getCriticalSyncDebugSummary());d("WALogger").LOG(S(),e);d("WALogger").LOG(R()).tags("history-sync");e=d("WAWebSyncDeviceAdvDeviceListJob").syncMyDeviceListJob();var f=new(h||(h=b("Promise")))(function(b,c){d("WAWebAccountSyncJob").updatePrivacySettings().then(function(){return a.setReadReceiptsSynced()}).then(b)["catch"](c)})["catch"](function(a){d("WALogger").ERROR(Q(),a.stack).verbose().devConsole(a).sendLogs("failed to update privacy settings from privacy request to server"),d("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("failed to sync privacy settings, logging out"),void d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.AccountSyncError)});this._initCriticalDataTimeoutIfNeeded();this._syncDCriticalDataState=Z.InProcess;e=e.then(function(){return d("WASyncd").markCollectionsForSync([d("WASyncdConst").CollectionName.CriticalBlock,d("WASyncdConst").CollectionName.CriticalUnblockLow])}).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){a._criticalState.syncdCritical||(yield a._isSyncDCriticalDataComplete())&&(yield a.setSyncDCriticalSynced(),yield a.setSyncDCriticalDataSyncCompleted())}));var g=(yield d("WAWebUserPrefsHistorySync").getInitialHistorySyncComplete());g===!0&&(yield this.setInitialChatHistorySynced());g=d("WAWebAccountSyncJob").updateDefaultDisappearingMode()["catch"](function(a){d("WALogger").ERROR(P(),a.stack).verbose().devConsole(a).sendLogs("failed initial sync of default disappearing mode")});yield h.all([f,e,g])});function e(){return a.apply(this,arguments)}return e}();e.continueProgressiveHistorySyncProcessing=function(){d("WALogger").LOG(O());var a=c("WAWebMiscBrowserUtils").info().name!=="Safari";this._initNextProgressiveHistorySyncRunLoop(a)};e._progressiveHistorySyncRun=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!this._allCriticalDataSynced&&this._criticalState.initialChatHistory!==!0){d("WALogger").LOG(N());this._progressiveHistorySyncRemainingIteration++;return}if(!d("WAWebCmd").Cmd.isMainStreamReadyMd){d("WALogger").LOG(M()).tags("history-sync");this._progressiveHistorySyncRemainingIteration++;return}var a=(yield d("WAWebApiHistorySyncNotification").fetchNextHistorySyncChunkForProcessing());if(!a)return;d("WALogger").LOG(L(),a.chunkOrder);this._progressiveHistorySyncRemainingIteration++;a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT?yield d("WAWebHandleWorkerCompatibleRecentSyncChunk").handleWorkerCompatibleRecentSyncChunk(a):yield d("WAWebHandleHistorySyncChunk").handleHistorySyncChunk(a)});function a(){return a.apply(this,arguments)}return a}();e._initNextProgressiveHistorySyncRunLoop=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);this._isHistorySyncLoopRunning=!0;a&&this._progressiveHistorySyncRemainingIteration++;var c=d("WAWebABProps").getABPropConfigValue("history_sync_loop_interval_ms");this._progressiveHistorySyncRemainingIteration===0&&void d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().equals(["processed"],0,{shouldDecrypt:!1}).then(function(a){a=a.filter(function(a){return!d("WAWebApiHistorySyncNotification").inFlightChunk.has(a.msgKey)&&!a.reuploadPending});a.length>0&&d("WALogger").WARN(K(),a.length,c)});if(!this._progressiveHistorySyncInFlight&&this._progressiveHistorySyncRemainingIteration>0){this._progressiveHistorySyncRemainingIteration--;this._progressiveHistorySyncInFlight=!0;try{yield d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey(),yield this._progressiveHistorySyncRun()}catch(a){d("WALogger").ERROR(J(),a==null?void 0:a.message,a==null?void 0:a.stack)}this._progressiveHistorySyncInFlight=!1;var e=!this._allCriticalDataSynced&&this._criticalState.initialChatHistory!==!0;e&&d("WALogger").LOG(I());yield new(h||(h=b("Promise")))(function(a){return self.setTimeout(a,e?la:c)});this._initNextProgressiveHistorySyncRunLoop()}this._isHistorySyncLoopRunning=!1});function a(b){return a.apply(this,arguments)}return a}();e.increaseProgressiveHistorySyncRemainingIteration=function(){this._progressiveHistorySyncRemainingIteration+=pa};e._progressiveHistorySyncRunV2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebCmd").Cmd.isMainStreamReadyMd){d("WALogger").LOG(H()).tags("history-sync");return}var a=(yield d("WAWebApiHistorySyncNotification").fetchNextHistorySyncChunkForProcessing());if(!a)return;d("WALogger").LOG(G());if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&a.chunkOrder!=null){var b=a.msgKey;d("WAWebApiHistorySyncNotification").recentSyncChunkHandlingTriedCount[b]!=null?d("WAWebApiHistorySyncNotification").recentSyncChunkHandlingTriedCount[b]++:d("WAWebApiHistorySyncNotification").recentSyncChunkHandlingTriedCount[b]=1}a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT?yield d("WAWebHandleWorkerCompatibleRecentSyncChunk").handleWorkerCompatibleRecentSyncChunk(a):yield d("WAWebHandleHistorySyncChunk").handleHistorySyncChunk(a)});function c(){return a.apply(this,arguments)}return c}();e._initNextProgressiveHistorySyncRunLoopV2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(F());try{yield d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey(),yield this._progressiveHistorySyncRunV2()}catch(a){d("WALogger").ERROR(E(),a==null?void 0:a.message,a==null?void 0:a.stack)}d("WALogger").LOG(D());var a=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatus());if((a==null?void 0:a.recentCompleted)===!0){if(!c("gkx")("26255")){d("WALogger").LOG(C());a=(yield d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().equals(["processed","syncType"],[0,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND],{shouldDecrypt:!1}));a.length>0?void this.continueProgressiveHistorySyncProcessingV2(d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.LastProcessedNotification):d("WALogger").LOG(B())}else{d("WALogger").LOG(A());a=(yield d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().equals(["processed","syncType"],[0,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.FULL],{shouldDecrypt:!1}));a.length>0?void this.continueProgressiveHistorySyncProcessingV2(d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.LastProcessedNotification):d("WALogger").LOG(z())}return}d("WALogger").LOG(y());a=(yield d("WAWebHistorySyncNotificationUtils").getUnprocessedRecentSyncNotifications());if(a.length===0){d("WALogger").LOG(x());return}var b=a[0].chunkOrder;if(b==null){d("WALogger").LOG(w());return}d("WALogger").LOG(v(),b);var e=(yield d("WAWebUserPrefsHistorySync").getLastHistoryRecentSyncedChunk());if(e!=null&&e.chunkOrder+1!==b&&b!==1){d("WALogger").LOG(u());return}if(d("WAWebApiHistorySyncNotification").recentSyncChunkHandlingTriedCount[a[0].msgKey]>oa){d("WALogger").LOG(t(),b);return}d("WALogger").LOG(s());void this.continueProgressiveHistorySyncProcessingV2(d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.LastProcessedNotification)});function e(){return a.apply(this,arguments)}return e}();e.continueProgressiveHistorySyncProcessingV2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this;if(!this._allCriticalDataSynced&&this._criticalState.initialChatHistory!==!0){d("WALogger").LOG(r());return(h||(h=b("Promise"))).resolve()}if(a===d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.BackendStart&&!c("gkx")("26255")){var f=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatus());if((f==null?void 0:f.recentCompleted)===!0){d("WALogger").LOG(q());return(h||(h=b("Promise"))).resolve()}}return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("continueProgressiveHistorySyncProcessingV2",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("WALogger").LOG(p(),a);return e._initNextProgressiveHistorySyncRunLoopV2()});return function(a){return c.apply(this,arguments)}}(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HISTORY_SYNC,maxTimeoutMs:1e3*120}).waitUntilCompleted()["catch"](function(a){d("WALogger").ERROR(o(),a)})});function e(b){return a.apply(this,arguments)}return e}();e.getIsHistorySyncRunning=function(){var a=d("WAWebJobOrchestrator").getInstance();a=a.getSnapshot(d("WAJobOrchestratorTypes").JOB_PRIORITY.HISTORY_SYNC);return a!=null&&a.continueProgressiveHistorySyncProcessingV2!=null?a.continueProgressiveHistorySyncProcessingV2>0:!1};return a}();var $=new a();(e=d("WAWebCmd")).Cmd.on("on_initial_chat_synced",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield $.setInitialChatHistorySynced()}));e.Cmd.on("logout",function(){$.initState()});e.Cmd.on("on_recent_chat_history_synced",function(){if(!c("gkx")("26255")){var a,b=d("WAWebJobOrchestrator").getInstance();d("WALogger").DEV(n(),JSON.stringify(b.getSnapshot((a=d("WAJobOrchestratorTypes")).JOB_PRIORITY.HISTORY_SYNC)));d("WALogger").LOG(m(),a.JOB_PRIORITY.HISTORY_SYNC);b.clearQueueByPriority(a.JOB_PRIORITY.HISTORY_SYNC);d("WALogger").DEV(l(),JSON.stringify(b.getSnapshot(a.JOB_PRIORITY.HISTORY_SYNC)))}});e.Cmd.on("on_full_chat_history_synced",function(){var a,b=d("WAWebJobOrchestrator").getInstance();d("WALogger").DEV(k(),JSON.stringify(b.getSnapshot((a=d("WAJobOrchestratorTypes")).JOB_PRIORITY.HISTORY_SYNC)));d("WALogger").LOG(j(),a.JOB_PRIORITY.HISTORY_SYNC);b.clearQueueByPriority(a.JOB_PRIORITY.HISTORY_SYNC);d("WALogger").DEV(i(),JSON.stringify(b.getSnapshot(a.JOB_PRIORITY.HISTORY_SYNC)))});f=$;g["default"]=f}),98);
__d("WAWebBizCreateOrderJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebCommsWapMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("createOrderResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("order");var b=a.attrString("id"),c=a.attrString("token");a=a.maybeChild("price");var d={},e=a==null?void 0:a.maybeChild("subtotal");e&&(d.subtotal=e.contentString());e=a==null?void 0:a.maybeChild("total");e&&(d.total=e.contentString());e=a==null?void 0:a.maybeChild("currency");e&&(d.currency=e.contentString());e=a==null?void 0:a.maybeChild("price_status");e&&(d.price_status=e.contentString());return{id:b,token:c,price:d}});function i(a){var b=a.priceAmount1000!=null?d("WAWap").wap("price",null,a.priceAmount1000.toString()):void 0,c=a.currency?d("WAWap").wap("currency",null,a.currency):void 0;return d("WAWap").wap("product",null,d("WAWap").wap("id",null,a.id),d("WAWap").wap("name",null,a.name),b,c,d("WAWap").wap("quantity",null,a.quantity.toString()))}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=null);a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CreateOrder),xmlns:"fb:thrift_iq",id:d("WAWap").generateId(),type:"set"},d("WAWap").wap("order",{op:d("WAWap").CUSTOM_STRING("create"),biz_jid:d("WAWebCommsWapMd").USER_JID(a)},b.map(function(a){return i(a)}).concat(e?d("WAWap").wap("direct_connection_encrypted_info",null,e):[])));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!b.success){if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode)}else return b.result});return j.apply(this,arguments)}g.createOrderResponse=h;g.createOrderMD=a}),98);
__d("WAWebBizLogQplEvents",["WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CART_VIEW,a)}function b(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PROFILE_CATS_VIEW,a)}function c(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PROFILE_SAVE,a)}function e(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_VIEW,a)}function f(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,a)}function h(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_ORDER_CREATE,a)}function i(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_ORDER_VIEW,a)}g.qplPointCartView=a;g.qplPointProfileCatsView=b;g.qplPointProfileSave=c;g.qplPointProductView=e;g.qplPointPLMDetailsView=f;g.qplPointOrderCreate=h;g.qplPointOrderView=i}),98);
__d("WAWebBizQueryOrderJob",["Promise","WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebBizGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new(c("WADeprecatedWapParser"))("queryOrderResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("order");var b=a.hasAttr("creation_ts")?a.attrTime("creation_ts"):null,c=a.maybeChild("price"),d=c==null?void 0:c.maybeChild("subtotal");d=d?parseInt(d.contentString(),10):null;var e=c==null?void 0:c.maybeChild("currency");e=e?e.contentString():null;var f=c==null?void 0:c.maybeChild("tax");f=f?parseInt(f.contentString(),10):null;c=c==null?void 0:c.maybeChild("total");c=c?parseInt(c.contentString(),10):null;var g=[];a.forEachChildWithTag("product",function(a){var b=a.child("id");b=b.contentString();var c=a.child("name");c=c.contentString();var d=a.maybeChild("price");d=d?parseInt(d.contentString(),10):null;var e=a.maybeChild("quantity");e=e?parseInt(e.contentString(),10):null;var f=a.maybeChild("currency");f=f?f.contentString():null;var h=null,i=null;a=a.maybeChild("image");if(a!=null){var j=a.maybeChild("url");i=j&&j.hasContent()?j.contentString():null;j=a.maybeChild("id");h=j&&j.hasContent()?j.contentString():null}g.push({id:b,price:d,thumbnailId:h,thumbnailUrl:i,currency:f,name:c,quantity:e})});return{currency:e,createdAt:b,products:g,subtotal:d,total:c,tax:f}});function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j){j===void 0&&(j=null);if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E451)());a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").QueryOrder),xmlns:"fb:thrift_iq",id:d("WAWap").generateId(),type:"get"},d("WAWap").wap("order",{op:d("WAWap").CUSTOM_STRING("get"),id:d("WAWap").CUSTOM_STRING(a)},d("WAWap").wap("image_dimensions",null,d("WAWap").wap("width",null,e.toString()),d("WAWap").wap("height",null,f.toString())),d("WAWap").wap("token",null,g),j?d("WAWap").wap("direct_connection_encrypted_info",null,j):null));e=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,i));if(!e.success){if(e.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e.errorCode)}else return e.result});return j.apply(this,arguments)}g.queryOrderResponse=i;g.queryOrder=a}),98);
__d("WAWebBizOrderBridge",["Promise","WAWebBackendErrors","WAWebBizCreateOrderJob","WAWebBizGatingUtils","WAWebBizLogQplEvents","WAWebBizQueryOrderJob","WAWebBusinessDirectConnectionBridge"],(function(a,b,c,d,e,f,g){var h;function a(a,c,e,f,g){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E451)());d("WAWebBizLogQplEvents").qplPointOrderView("datasource_start");a=d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(a){return d("WAWebBizQueryOrderJob").queryOrder(c,e,f,g,a)});return a.then(function(a){d("WAWebBizLogQplEvents").qplPointOrderView("datasource_end");return a})}function c(a,c){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E451)());d("WAWebBizLogQplEvents").qplPointOrderCreate("datasource_start");var e=d("WAWebBusinessDirectConnectionBridge").attemptWithOrderDirectConnectionRetry(a,function(b){return d("WAWebBizCreateOrderJob").createOrderMD(a,c,b)});return e.then(function(a){d("WAWebBizLogQplEvents").qplPointOrderCreate("datasource_end");return a})}g.queryOrder=a;g.createOrder=c}),98);
__d("WAWebCommonParsersCustomErrors",["WADeprecatedWapParser"],(function(a,b,c,d,e,f,g){a=new(c("WADeprecatedWapParser"))("parseErrorFields",function(a){var b=[];a.forEachChildWithTag("field",function(a){var c=a.hasAttr("detail")?a.maybeAttrString("detail"):null;b.push({name:a.attrString("name"),reason:a.attrString("reason"),detail:c})});return b});g.parseErrorFields=a}),98);
__d("WAWebBizCatalogAddProductJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebCommonParsersCustomErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("addProductResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("product_catalog_add");a=a.child("product");return d("WAWebBizCatalogParseProduct").parseProductNode(a)});function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},d("WAWap").wap("product_catalog_add",{v:"1"},d("WAWebBizCatalogParseProduct").productModelToNode(a),d("WAWap").wap("width",null,b.toString()),d("WAWap").wap("height",null,c.toString())));b=(yield d("WADeprecatedSendIq").deprecatedSendIqErrorParser(a,h,d("WAWebCommonParsersCustomErrors").parseErrorFields));if(!b.success){if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();if(b.customError!=null)throw new(d("WAWebBackendErrors").CatalogEditServerError)(b.errorCode,b.customError);else throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode)}else return b.result});return i.apply(this,arguments)}g.addProductResponse=h;g.addProductMD=a}),98);
__d("WAWebBizCatalogAppealProductJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebBizGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("appealProductResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("response");a=a.child("success");return a.contentString()==="true"});function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();b=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"fb:thrift_iq"},d("WAWap").wap("request",{type:"appeal_product"},d("WAWap").wap("reason",null,b),d("WAWap").wap("id",null,a)));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));if(!a.success){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode)}else return a.result});return i.apply(this,arguments)}g.appealProductMD=a}),98);
__d("WAWebBizCatalogDeleteProductsJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebBizGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("productDeleteResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("product_catalog_delete");a=a.attrInt("deleted_count");return{deletedCount:a}});function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},d("WAWap").wap("product_catalog_delete",{v:"1"},a.map(function(a){return d("WAWap").wap("product",null,d("WAWap").wap("id",null,a))})));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!a.success){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode)}else return a.result});return i.apply(this,arguments)}g.deleteProductsMD=a}),98);
__d("WAWebBizCatalogEditProductJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebCommonParsersCustomErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("editProductResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("product_catalog_edit");a=a.child("product");return d("WAWebBizCatalogParseProduct").parseProductNode(a)});function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},d("WAWap").wap("product_catalog_edit",{v:"1"},d("WAWebBizCatalogParseProduct").productModelToNode(a),d("WAWap").wap("width",null,b.toString()),d("WAWap").wap("height",null,c.toString())));b=(yield d("WADeprecatedSendIq").deprecatedSendIqErrorParser(a,h,d("WAWebCommonParsersCustomErrors").parseErrorFields));if(!b.success){if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();if(b.customError)throw new(d("WAWebBackendErrors").CatalogEditServerError)(b.errorCode,b.customError);else throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode)}else return b.result});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizCatalogProductVisibilitySetJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebBizGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("visibilitySetResponse",function(a){a.assertTag("iq"),a.assertFromServer()});function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").SetCatalogVisibility),id:d("WAWap").generateId()},d("WAWap").wap("product_visibility_update",{v:"1"},a.map(function(a){return d("WAWap").wap("product",{is_hidden:a.isHidden?"true":"false"},d("WAWap").wap("id",null,a.productId))})));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!a.success){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode)}else return a.result});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizCreateProductCatalogJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebBizGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("productCatalogCreateResponse",function(a){a.assertTag("iq"),a.assertFromServer(),a.child("product_catalog_create")});function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();var a=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},d("WAWap").wap("product_catalog_create",{version:"1"}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!a.success){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode)}else return a.result});return i.apply(this,arguments)}g.productCatalogCreateResponse=h;g.createProductCatalog=a}),98);
__d("WAWebQueryCatalogQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_product_catalog",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogGetResponseSuccessProductCatalog",kind:"LinkedField",name:"product_catalog",plural:!1,selections:[{alias:null,args:null,concreteType:"XWACatalogProduct",kind:"LinkedField",name:"products",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},c,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogPaging",kind:"LinkedField",name:"paging",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"after",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQueryCatalogQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQueryCatalogQuery",selections:c},params:{id:"WAWebQueryCatalogQuery",metadata:{},name:"WAWebQueryCatalogQuery",operationKind:"query",text:null}}}();a.hash="66429da6768590d7b59a5cb5971ac827";e.exports=a}),null);
__d("WAWebQueryCatalog",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebBackendErrors","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebBizParseProductGraphql","WAWebCatalogEventLogger","WAWebCommsWapMd","WAWebGraphQLServerError","WAWebMaybeThrowCatalogErrors","WAWebQueryCatalogQuery.graphql","WAWebRelayClient","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["GraphQL: Failed fetching xwa_product_catalog_get_product_catalog query. Falling back to IQ."]);i=function(){return a};return a}var j=new(c("WADeprecatedWapParser"))("catalogResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("product_catalog");var b=[];a.forEachChildWithTag("product",function(a){var c=a.maybeChild("id");if(!c)return;b.push(d("WAWebBizCatalogParseProduct").parseProductNode(a))});a=a.child("paging");var c=a.child("before");c=c.hasContent()?c.contentString():"";a=a.child("after");a=a.hasContent()?a.contentString():"";return{data:b,paging:{cursors:{after:a,before:c}}}});function k(a){return a?"true":"false"}var l=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.catalogWid,c=a.afterCursor,e=a.limit,f=a.width,g=a.height,h=a.checkmarkCollectionId,i=a.allowShopSource;a=a.directConnectionEncryptedInfo;a=a===void 0?null:a;if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();c=c?d("WAWap").wap("after",null,c):void 0;h=h?d("WAWap").wap("belongs_to",null,d("WAWap").wap("collection_id",null,h)):void 0;b=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:d("WAWap").generateId()},d("WAWap").wap("product_catalog",{jid:d("WAWebCommsWapMd").DEVICE_JID(b),allow_shop_source:k(i)},d("WAWap").wap("limit",null,e.toString()),d("WAWap").wap("width",null,f.toString()),d("WAWap").wap("height",null,g.toString()),c,h,a?d("WAWap").wap("direct_connection_encrypted_info",null,a):null));i=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,j));if(!i.success){if(i.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(i.errorCode)}else return i.result});return function(b){return a.apply(this,arguments)}}(),m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();try{var e=a.catalogWid,f=a.afterCursor,g=a.limit,j=a.width,k=a.height,m=a.checkmarkCollectionId,n=a.allowShopSource,o=a.directConnectionEncryptedInfo;e=(yield d("WAWebRelayClient").fetchQuery(h!==void 0?h:h=b("WAWebQueryCatalogQuery.graphql"),{request:{product_catalog:{jid:e.toString(),allow_shop_source:n?"ALLOWSHOPSOURCE_TRUE":"ALLOWSHOPSOURCE_FALSE",width:String(j),height:String(k),direct_connection_encrypted_info:o,limit:String(g),after:f,catalog_session_id:m}}},{eventLogger:d("WAWebCatalogEventLogger").createCatalogEventLogger(d("WAWebCatalogEventLogger").GRAPHQL_CATALOG_ENDPOINT.GET_CATALOG)}));j=(e==null?void 0:(n=e.xwa_product_catalog_get_product_catalog)==null?void 0:n.product_catalog)||{};k=j.paging;o=j.products;return{data:o.map(d("WAWebBizParseProductGraphql").parseProductGraphQL),paging:{cursors:{before:(g=k==null?void 0:k.before)!=null?g:"",after:(f=k==null?void 0:k.after)!=null?f:""}}}}catch(b){b instanceof d("WAWebGraphQLServerError").GraphQLServerError&&c("WAWebMaybeThrowCatalogErrors")(b);d("WALogger").WARN(i());return l(a)}});return function(b){return a.apply(this,arguments)}}();a=function(a){return(d("WAWebBizGatingUtils").graphQLForCatalogM1Enabled()&&!d("WAWebUserPrefsMeUser").getMaybeMeUser().equals(a.catalogWid)?m:l)(a)};e=a;g["default"]=e}),98);
__d("WAWebQueryCatalogHasCategoriesQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],b=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetCategoriesResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_categories",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogGetCategoriesResponseSuccessCategoryWithSubCategories",kind:"LinkedField",name:"categories",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQueryCatalogHasCategoriesQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQueryCatalogHasCategoriesQuery",selections:b},params:{id:"WAWebQueryCatalogHasCategoriesQuery",metadata:{},name:"WAWebQueryCatalogHasCategoriesQuery",operationKind:"query",text:null}}}();a.hash="05cf640c4ace8fe9368dfe9c9768bcd9";e.exports=a}),null);
__d("WAWebQueryCatalogHasCategories",["errorCode","WALogger","WAWebCatalogEventLogger","WAWebGraphQLServerError","WAWebMaybeThrowCatalogErrors","WAWebQueryCatalogHasCategoriesQuery.graphql","WAWebRelayClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["GraphQL: Failed fetching xwa_product_catalog_get_categories query."]);j=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.catalogWid,f=a.directConnectionEncryptedInfo,g=a.imageDimensions;g=g===void 0?{width:100,height:100}:g;a=a.sessionId;try{e=(yield d("WAWebRelayClient").fetchQuery(i!==void 0?i:i=b("WAWebQueryCatalogHasCategoriesQuery.graphql"),{request:{categories:{biz_jid:e.toString(),direct_connection_encrypted_info:f,image_dimensions:g,catalog_session_id:a}}},{eventLogger:d("WAWebCatalogEventLogger").createCatalogEventLogger(d("WAWebCatalogEventLogger").GRAPHQL_CATALOG_ENDPOINT.GET_CATEGORIES)}));return Boolean(e==null?void 0:(f=e.xwa_product_catalog_get_categories)==null?void 0:f.categories.length)}catch(b){if(b instanceof d("WAWebGraphQLServerError").GraphQLServerError){g=b.source.errors||[];a=g[0];if((a==null?void 0:a.code)===2498052)return!1;c("WAWebMaybeThrowCatalogErrors")(b)}d("WALogger").WARN(j());return!1}});return function(b){return a.apply(this,arguments)}}();g.queryCatalogHasCategories=a}),98);
__d("WAWebQueryCatalogProductQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetProductResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_product",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogGetProductResponseSuccessProductCatalog",kind:"LinkedField",name:"product_catalog",plural:!1,selections:[{alias:null,args:null,concreteType:"XWACatalogProduct",kind:"LinkedField",name:"product",plural:!1,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},c,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQueryCatalogProductQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQueryCatalogProductQuery",selections:c},params:{id:"WAWebQueryCatalogProductQuery",metadata:{},name:"WAWebQueryCatalogProductQuery",operationKind:"query",text:null}}}();a.hash="1cfd9c20421504c7dcc5c2a615b9ea63";e.exports=a}),null);
__d("WAWebQueryCatalogProduct",["errorCode","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","WAWebBackendErrors","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebBizParseProductGraphql","WAWebCatalogEventLogger","WAWebCommsWapMd","WAWebGraphQLServerError","WAWebMaybeThrowCatalogErrors","WAWebQueryCatalogProductQuery.graphql","WAWebRelayClient","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["GraphQL: Failed fetching xwa_product_catalog_get_product query. Falling back to IQ."]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("productResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("product_catalog");a=a.child("product");return d("WAWebBizCatalogParseProduct").parseProductNode(a)}),l=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){f===void 0&&(f=!1);g===void 0&&(g=null);if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:d("WAWap").generateId()},d("WAWap").wap("product",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)},d("WAWap").wap("product_id",null,b),d("WAWap").wap("width",null,c.toString()),d("WAWap").wap("height",null,e.toString()),f?d("WAWap").wap("fetch_compliance_info",null,f.toString()):void 0,g?d("WAWap").wap("direct_connection_encrypted_info",null,g):null));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,k));if(!b.success)if(b.errorCode===404)return{error:"NOT_FOUND"};else if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();else throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode);else return{data:b.result}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}(),m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];var g=e[0],h=e[1],k=e[2],m=e[3],n=e[4],o=n===void 0?!1:n,p=e[5],q=p===void 0?null:p;try{var r,s,t=(yield d("WAWebRelayClient").fetchQuery(i!==void 0?i:i=b("WAWebQueryCatalogProductQuery.graphql"),{request:{product:{jid:g.toString(),product_id:h,width:String(k),height:String(m),fetch_compliance_info:String(o),direct_connection_encrypted_info:q}}},{eventLogger:d("WAWebCatalogEventLogger").createCatalogEventLogger(d("WAWebCatalogEventLogger").GRAPHQL_CATALOG_ENDPOINT.GET_PRODUCT)})),u=c("WANullthrows")(t==null?void 0:(r=t.xwa_product_catalog_get_product)==null?void 0:(s=r.product_catalog)==null?void 0:s.product);return{data:d("WAWebBizParseProductGraphql").parseProductGraphQL(u)}}catch(a){if(a instanceof d("WAWebGraphQLServerError").GraphQLServerError){var v,w=((v=a.source)==null?void 0:v.errors)||[],x=w[0];if((x==null?void 0:x.code)===2498052)return{error:"NOT_FOUND"};c("WAWebMaybeThrowCatalogErrors")(a)}d("WALogger").WARN(j());return l.apply(void 0,e)}});return function(){return a.apply(this,arguments)}}();a=function(){var a;return(d("WAWebBizGatingUtils").graphQLForCatalogM1Enabled()&&!((a=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:a.equals(arguments.length<=0?void 0:arguments[0]))?m:l).apply(void 0,arguments)};e=a;g["default"]=e}),98);
__d("WAWebReportProductJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebBizGatingUtils","WAWebCommsWapMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("reportProductResponse",function(a){a.assertTag("iq");a.assertAttr("type","result");return});function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fb:thrift_iq",type:"set",id:d("WAWap").generateId()},d("WAWap").wap("request",{type:"report_product",biz_jid:d("WAWebCommsWapMd").USER_JID(a)},c?d("WAWap").wap("reason",null,c):void 0,d("WAWap").wap("id",null,b)));c=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!c.success){if(c.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(c.errorCode)}});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizProductCatalogBridge",["Promise","WALogger","WAWeb-moment","WAWebBackendErrors","WAWebBizCatalogAddProductJob","WAWebBizCatalogAppealProductJob","WAWebBizCatalogDeleteProductsJob","WAWebBizCatalogEditProductJob","WAWebBizCatalogProductVisibilitySetJob","WAWebBizCreateProductCatalogJob","WAWebBizGatingUtils","WAWebBizLogQplEvents","WAWebBusinessDirectConnectionBridge","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebProductTypes.flow","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebQueryCatalog","WAWebQueryCatalogHasCategories","WAWebQueryCatalogProduct","WAWebReportProductJob","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Edit product failed, error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Add product failed, error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Query catalog failed, error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Query catalog failed, error: 451"]);l=function(){return a};return a}function a(a,b,e,f,g,h){h===!0&&d("WAWebBizLogQplEvents").qplPointProductView("datasource_start");var i=d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(d){return c("WAWebQueryCatalogProduct")(a,b,e,f,g,d)});i.then(function(){return h===!0&&d("WAWebBizLogQplEvents").qplPointProductView("datasource_end")});return d("WAWebBackendErrors").attachErrorLogger(i,"Query product failed")}function e(a,e,f,g,i,j,m){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E451)());var n=d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(b){return c("WAWebQueryCatalog")({catalogWid:a,afterCursor:e,limit:f,width:g,height:i,checkmarkCollectionId:j,allowShopSource:m,directConnectionEncryptedInfo:b})});return n["catch"](function(a){if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===404)throw a;if(a.errorCode===451){d("WALogger").ERROR(l()).verbose().sendLogs("Query catalog failed, commerce-features-disabled");throw new(d("WAWebBackendErrors").E451)()}d("WALogger").ERROR(k(),a).verbose().devConsole(a).sendLogs("Query catalog failed");throw a})}function f(a,c,e,f,g){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E451)());g&&d("WAWebBizLogQplEvents").qplPointPLMDetailsView("datasource_start");var i=d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(b){return d("WAWebPersistedJobManager").getJobManager().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.queryProductList(a,c,b,e,f))});i.then(function(){return g&&d("WAWebBizLogQplEvents").qplPointPLMDetailsView("datasource_end")})["catch"](function(a){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)()});return i}function m(a){return d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(b){return d("WAWebQueryCatalogHasCategories").queryCatalogHasCategories({catalogWid:a,directConnectionEncryptedInfo:b})})}function n(a,b,e){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,"datasource_start");a=c("WAWebReportProductJob")(a,b,e);a.then(function(){return d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,"datasource_end")});return d("WAWebBackendErrors").attachErrorLogger(a,"Report product failed")}function o(a,b){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,"datasource_start");a=d("WAWebBizCatalogAppealProductJob").appealProductMD(a,b);a.then(function(){return d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,"datasource_end")});return d("WAWebBackendErrors").attachErrorLogger(a,"Appeal product failed")}function p(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,"datasource_start");var a=d("WAWebBizCreateProductCatalogJob").createProductCatalog();a.then(function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,"datasource_end")});return d("WAWebBackendErrors").attachErrorLogger(a,"Create catalog failed")}function q(a,b,c){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"datasource_start");a=d("WAWebBizCatalogAddProductJob").addProductMD(a,b,c);a.then(function(){return d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"datasource_end")});return a.then(v)["catch"](function(a){if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===406||a instanceof d("WAWebBackendErrors").CatalogEditServerError&&a.statusCode===406)throw a;d("WALogger").ERROR(j(),a).verbose().devConsole(a).sendLogs("Add product failed");throw a})}function r(a,b,e){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"datasource_start");a=c("WAWebBizCatalogEditProductJob")(a,b,e);a.then(function(a){return d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"datasource_end")});return a.then(v)["catch"](function(a){if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===406||a instanceof d("WAWebBackendErrors").CatalogEditServerError&&a.statusCode===406)throw a;d("WALogger").ERROR(i(),a).verbose().devConsole(a).sendLogs("Edit product failed");throw a})}function s(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,"datasource_start");a=d("WAWebBizCatalogDeleteProductsJob").deleteProductsMD(a);a=a.then(function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,"datasource_end");return a});return d("WAWebBackendErrors").attachErrorLogger(a,"Delete product failed")}function t(a){return a==null?null:parseInt(a,10)}function u(a){return a?c("WAWeb-moment").utc(a,c("WAWeb-moment").ISO_8601).valueOf():null}function v(a,b){var c;c=((c=a.capability_to_review_status[0])==null?void 0:c.value)||"APPROVED";b={catalogWid:b,id:a.id,isHidden:a.is_hidden||!1,url:a.url||"",name:a.name,description:a.description||"",availability:(b=d("WAWebProductTypes.flow").ProductAvailability.cast(a.availability))!=null?b:d("WAWebProductTypes.flow").ProductAvailability.UNKNOWN,maxAvailable:a.max_available,additionalImageCdnUrl:a.additional_image_cdn_urls.map(function(a){return a[1].value}),additionalImageHashes:a.image_hashes_for_whatsapp.slice(1),imageCdnUrl:a.image_cdn_urls[1].value,imageHash:a.image_hashes_for_whatsapp[0],reviewStatus:c,currency:a.currency,priceAmount1000:t(a.price),salePriceAmount1000:t(a.sale_price),salePriceStartDate:u(a.sale_start_date),salePriceEndDate:u(a.sale_end_date),retailerId:a.retailer_id||"",productMsgMediaData:null,imageCount:a.additional_image_cdn_urls.length+1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1,canAppeal:a.whatsapp_product_can_appeal,checkmark:a.checkmark};a.compliance_info&&(b.complianceInfo=y(a.compliance_info));return b}function w(a){var b;a.businessOwnerJid&&(b=d("WAWebWidFactory").createWid(a.businessOwnerJid));return{catalogWid:b,id:a.productId||"",url:a.url,name:a.title,description:a.description,imageCdnUrl:a.mediaData.renderableUrl,reviewStatus:"",currency:a.currencyCode,priceAmount1000:a.priceAmount1000,salePriceAmount1000:a.salePriceAmount1000,retailerId:a.retailerId,productMsgMediaData:a.mediaData,imageCount:a.productImageCount!=null&&a.productImageCount!==0?a.productImageCount:1,fetchedFromServer:!1,t:a.t,isHidden:!1}}function x(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,"datasource_start");a=c("WAWebBizCatalogProductVisibilitySetJob")(a);a.then(function(){return d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,"datasource_end")});return d("WAWebBackendErrors").attachErrorLogger(a,"Product visibility change failed")}function y(a){var b={countryCodeOrigin:a.country_code_origin};a.importer_name&&(b.importerName=a.importer_name);a.importer_address&&(b.importerAddress=z(a.importer_address));return b}function z(a){var b={street1:a.street1,city:a.city,countryCode:a.country_code};a.street2&&(b.street2=a.street2);a.postal_code&&(b.postalCode=a.postal_code);a.region&&(b.region=a.region);a.country_code&&(b.countryCode=a.country_code);return b}g.queryProduct=a;g.queryCatalog=e;g.queryProductList=f;g.queryCatalogHasCategories=m;g.reportProduct=n;g.appealProduct=o;g.createCatalog=p;g.addProduct=q;g.editProduct=r;g.deleteProducts=s;g.parseDateValue=u;g.mapProductResponseToModel=v;g.mapMsgToProductModel=w;g.productVisibilitySet=x}),98);
__d("WAWebDirectConnectionX509",["JSResourceForInteraction","Promise","WALogger","asyncToGeneratorRuntime","filterNulls","pvutils-1.0.17"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] no trusted root certificates could be found for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] certificate chain parsing from Get Public Key IQ failed with ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] base64 decoding failed with ",""]);k=function(){return a};return a}function a(a){return a}function e(a){return a}var l="-----BEGIN CERTIFICATE-----",m="-----END CERTIFICATE-----",n="(?:"+l+")((?:.|\n)*?)(?:"+m+")",o="2.5.4.3";function p(){return c("JSResourceForInteraction")("pkijs").__setRef("WAWebDirectConnectionX509").load()}function q(){return c("JSResourceForInteraction")("asn1js-2.1.1").__setRef("WAWebDirectConnectionX509").load()}function r(a){var b="";try{b=atob(a)}catch(a){d("WALogger").WARN(k(),a.toString())}return t(b)}function s(a){return btoa(u(a))}function t(a){var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer}function u(a){return String.fromCharCode.apply(String,Array.from(new Uint8Array(a)))}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield p());c=c.CertificateChainValidationEngine;return new c({trustedCerts:b,certs:a})});return w.apply(this,arguments)}function x(a,b){return a.flat().reduce(function(a,c){return a.every(function(a){return!d("pvutils-1.0.17").isEqualBuffer(a.tbs,c.tbs)})&&b.includes(c)?[].concat(a,[c]):a},[])}function f(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("JSResourceForInteraction")("WAWebDirectConnectionCaBundle").__setRef("WAWebDirectConnectionX509").load());a=a.CA_BUNDLE;return z(a)});return y.apply(this,arguments)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield p()),e=b.Certificate;b=(yield q());var f=b.fromBER;return c("filterNulls")(Array.from(a.matchAll(new RegExp(n,"gm"))).map(function(a){a[0];a=a[1];a=f(r(a));a=a.result;var b;try{b=a.error?null:new e({schema:a})}catch(a){d("WALogger").WARN(j(),a.toString())}return b}))});return A.apply(this,arguments)}function B(a,b){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(yield v(a,b)).verify()});return C.apply(this,arguments)}function D(a,b){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield v(a,c));c=x(yield (h||(h=b("Promise"))).all(a.map(function(a){return e.findIssuer(a,e)})),c);if(c.length===0){d("WALogger").WARN(i(),F(a[0]));return null}return c});return E.apply(this,arguments)}function F(a){return(a=a.issuer.typesAndValues.find(function(a){a=a.type;return a===o}))==null?void 0:a.value.valueBlock.value}function G(a){return a.map(function(a){a=s(a.toSchema(!0).toBER(!1)).split(/(.{0,64})/g).filter(function(a){return a!==""}).join("\n");return l+"\n"+a+"\n"+m}).join("\n")}function H(){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield p());a=a.getEngine;return a()});return I.apply(this,arguments)}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield p());b=b.getRandomValues;return b(a)});return K.apply(this,arguments)}function L(a,b){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]}}));var c=(yield H());c=(yield c.subtle.encrypt({name:"RSA-OAEP"},a,b));return s(c)});return M.apply(this,arguments)}g.stringToCertificateString=a;g.certificateStringToString=e;g.base64ToArrayBuffer=r;g.arrayBufferToBase64=s;g.stringToArrayBuffer=t;g.arrayBufferToString=u;g.fetchFromCABundle=f;g.extractCertificates=z;g.validateCertificates=B;g.genRootIssuers=D;g.getCommonName=F;g.encodeToString=G;g.getEngine=H;g.getRandomValues=J;g.encryptWithPublicKey=L}),98);
__d("WAWebDirectConnectionCypher",["$InternalEnum","WAArrayBufferUtils","WALogger","WAWebDirectConnectionX509","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] cypher creation failed with ",""]);h=function(){return a};return a}var i=b("$InternalEnum").Mirrored(["PhoneNumberAndPostcode","Postcode"]);function a(a){return a}function c(a){return a}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAWebDirectConnectionX509").getEngine());e=e.subtle;return e.encrypt({name:"AES-GCM",iv:new Uint8Array(d("WAWebDirectConnectionX509").base64ToArrayBuffer(b)),tagLength:128},a,d("WAWebDirectConnectionX509").stringToArrayBuffer(c))});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAWebDirectConnectionX509").getEngine());e=e.subtle;a=(yield e.importKey("raw",a,{name:"AES-GCM"},!1,["decrypt"]));return e.decrypt({name:"AES-GCM",iv:new Uint8Array(d("WAWebDirectConnectionX509").base64ToArrayBuffer(c)),tagLength:128},a,d("WAWebDirectConnectionX509").base64ToArrayBuffer(b))});return m.apply(this,arguments)}function e(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return d("WAArrayBufferUtils").arrayBufferToString(yield l(a,b,c))});return n.apply(this,arguments)}function f(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebDirectConnectionX509").arrayBufferToBase64(yield d("WAWebDirectConnectionX509").getRandomValues(new Uint8Array(16)));try{var e=(yield d("WAWebDirectConnectionX509").getEngine());e=e.subtle;var f=(yield e.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]));b=d("WAWebDirectConnectionX509").arrayBufferToBase64(yield j(f,c,JSON.stringify(b)));e=(yield e.exportKey("raw",f));f=(yield d("WAWebDirectConnectionX509").encryptWithPublicKey(a,e));return{cypher:"AesKey="+f+";IV="+c+";Data="+b,exportedAesKey:e,iv:c}}catch(a){d("WALogger").WARN(h(),a.toString());return null}});return o.apply(this,arguments)}g.CypherType=i;g.stringToCypherString=a;g.cypherStringToString=c;g.decryptDataWithSymmetricKey=l;g.decryptDataWithSymmetricKeyToString=e;g.genCypher=f}),98);
__d("WAWebBusinessDirectConnectionBridge",["Promise","WALogger","WAWebABProps","WAWebBusinessDirectConnectionCollection","WAWebBusinessDirectUtils","WAWebDirectConnectionCypher","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Received 421 from Direct Connection request. Renewing certificate and retrying."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Received 421 from Direct Connection request. Renewing certificate and retrying."]);j=function(){return a};return a}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(!(yield d("WAWebBusinessDirectUtils").isCypherNeeded(a)))return e();var f=function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b===void 0&&(b=!1);b=(yield c("WAWebBusinessDirectConnectionCollection").getCypher(a,{forceRenew:b})).cypher;return e(b)});return function(a){return d.apply(this,arguments)}}();try{return yield f()}catch(a){if(d("WAWebBusinessDirectUtils").errorIsDirectConnectionCypherError421(a)){d("WALogger").LOG(j());return f(!0)}return(h||(h=b("Promise"))).reject(a)}});return l.apply(this,arguments)}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(!d("WAWebABProps").getABPropConfigValue("share_phone_number_on_cart_send_to_direct_connection_biz_enabled"))return k(a,e);if(!(yield d("WAWebBusinessDirectUtils").isCypherNeeded(a)))return e();var f=function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b;b=(b=(yield c("WAWebBusinessDirectConnectionCollection").genNewCypher(a,d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode,{forceRenew:!0})))==null?void 0:b.cypher;return e(b)});return function(){return f.apply(this,arguments)}}(),g=function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield c("WAWebBusinessDirectConnectionCollection").getCypher(a));return b.cypherType===d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode?e(b.cypher):f()});return function(){return g.apply(this,arguments)}}();try{return yield g()}catch(a){if(d("WAWebBusinessDirectUtils").errorIsDirectConnectionCypherError421(a)){d("WALogger").LOG(i());return f()}return(h||(h=b("Promise"))).reject(a)}});return m.apply(this,arguments)}g.attemptWithDirectConnectionRetry=k;g.attemptWithOrderDirectConnectionRetry=a}),98);
__d("WAWebEditLabelAssociationBridge",["Promise","WALogger","WAServerSync.pb","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebBizGatingUtils","WAWebContactModel","WAWebMsgModel","WAWebSchemaLabelAssociation","WAWebSyncd","WAWebSyncdUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkRemove from label association table failed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkCreateOrReplace into label association table failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["contact model is invalid for editLabelAssociation"]);k=function(){return a};return a}function a(a,b){var e=b.some(function(a){return a instanceof c("WAWebContactModel")});e&&d("WALogger").ERROR(k()).sendLogs("contact model is invalid for editLabelAssociation");e=l(a,b.map(function(a){return a instanceof d("WAWebMsgModel").Msg?{labelAssociationType:d("WAWebSchemaLabelAssociation").LabelAssociationType.Message,modelId:a.id.toString(),mutationIndexSegments:d("WAWebSyncdUtils").constructMsgKeySegments(a)}:{labelAssociationType:d("WAWebSchemaLabelAssociation").LabelAssociationType.Jid,modelId:a.id.toString(),mutationIndexSegments:[a.id.toString({legacy:!0})]}}));return e}function l(a,e){return!d("WAWebBizGatingUtils").canEditLabelAssociation()?(h||(h=b("Promise"))).reject(c("err")("editLabelAssociation is not supported")):d("WAWebSyncd").lockForSync(["label-association"],o(a,e),function(){return m(a,e)})}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=[],g=[];a.forEach(function(a){var b=a.id,c=a.type;e.map(function(a){var d=a.modelId;a=a.labelAssociationType;c==="add"?f.push({labelId:b,associationId:d,type:a}):g.push([b,d,a])})});a=d("WAWebSchemaLabelAssociation").getLabelAssociationTable();yield (h||(h=b("Promise"))).all([a.bulkCreateOrReplace(f)["catch"](function(a){d("WALogger").ERROR(j()).verbose().devConsole(a).sendLogs("bulkCreateOrReplace into label association table failed when saving label associations");throw c("err")("bulkCreateOrReplace into label association table failed")}),a.bulkRemove(g)["catch"](function(a){d("WALogger").ERROR(i()).verbose().devConsole(a).sendLogs("bulkRemove from label association table failed while saving label associations");throw c("err")("bulkRemove form label association table failed")})])});return n.apply(this,arguments)}function o(a,b){var c=d("WATimeUtils").unixTimeMs(),e=[];a.forEach(function(a){var f=a.id,g=a.type;b.forEach(function(a){var b=a.labelAssociationType;a=a.mutationIndexSegments;var h={labelAssociationAction:{labeled:g==="add"}};b=b===d("WAWebSchemaLabelAssociation").LabelAssociationType.Message?d("WASyncdConst").Actions.LabelMessage:d("WASyncdConst").Actions.LabelJid;e.push(d("WASyncdActionUtils").buildPendingMutation({timestamp:c,collection:d("WASyncdConst").CollectionName.Regular,operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,indexArgs:[f].concat(a),version:d("WASyncdConst").LABEL_ASSOCIATION_SYNC_VERSION,value:h,action:b}))})});return e}g.editLabelAssociation=a;g.editLocalLabelAssociationMD=m;g.createLabelAssociationMutations=o}),98);
__d("WAWebFtsClientMessageIdResolver",["WAWebDBMessageSerialization","WAWebSchemaMessage"],(function(a,b,c,d,e,f,g){function a(a){var b=a.map(function(a){return+a.id}),c=new Map(a.map(function(a){return[+a.id,a]}));return d("WAWebSchemaMessage").getMessageTable().anyOf(["rowId"],b).then(function(a){var b=[];a.forEach(function(a){a=d("WAWebDBMessageSerialization").messageFromDbRow(a);var e=c.get(a.rowId);e!=null&&e.id===String(a.rowId)&&e.timestamp===a.t&&e.chatId===a.id.remote.toString()&&(b.push(a),c["delete"](a.rowId))});a=Array.from(c.keys(),function(a){return String(a)});b.sort(function(a,b){return b.t-a.t});return{resolved:b,unresolved:a}})}g.resolveMsgIds=a}),98);
__d("WAWebFtsGenRequestId",[],(function(a,b,c,d,e,f){var g=0;function a(){return g++}f["default"]=a}),66);
__d("WAWebBrokerMainConnect",["WAWebBrokerConnectionManager","WAWebBrokerProtocolHandshake","WAWebInvocationDispatcher","WAWebInvocationHandler"],(function(a,b,c,d,e,f,g){function a(a){var b=new MessageChannel(),e=b.port1;b=b.port2;c("WAWebInvocationHandler").respondTo(e);c("WAWebBrokerConnectionManager").init();c("WAWebInvocationDispatcher").setConnectionManager(c("WAWebBrokerConnectionManager"));c("WAWebBrokerConnectionManager").connectVia(e);a.postMessage(d("WAWebBrokerProtocolHandshake").buildHandshakePayload(b),[b])}g["default"]=a}),98);
__d("WAWebFtsWorkerAdapter",["WANullthrows","WAWebBrokerMainConnect","WAWebFtsWorkerResource","WorkerBundleResource"],(function(a,b,c,d,e,f,g){var h=null,i=function(){function a(){this.worker=null}var b=a.prototype;b.initialize=function(a,b){this.worker=d("WorkerBundleResource").createDedicatedWebWorker(c("WAWebFtsWorkerResource")),c("WANullthrows")(this.worker).onmessage=function(b){a(b.data.message)},c("WANullthrows")(this.worker).onerror=b,c("WAWebBrokerMainConnect")(this)};b.postMessage=function(a,b){a={type:"message",message:a};c("WANullthrows")(this.worker).postMessage(a,b)};b.terminate=function(){c("WANullthrows")(this.worker).terminate()};return a}();function a(a,b){h||(h=new i(),h.initialize(a,b));return h}g.getFtsWorker=a}),98);
__d("WAWebFtsClient",["Promise","WALogger","WANullthrows","WAWebFtsClientMessageIdResolver","WAWebFtsGenRequestId","WAWebFtsWorkerAdapter","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["FTS:client: worker completed job "," with error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["FTS:client: worker error: ",""]);j=function(){return a};return a}a=function(){function a(){this.$2=new Map()}var e=a.prototype;e.initialize=function(){var a=this;if(!this.$1){var b=function(b){a.$3(b)},c=function(b){return a.$4(b)};b=d("WAWebFtsWorkerAdapter").getFtsWorker(b,c);this.$1=b}};e.$4=function(a){d("WALogger").WARN(j(),a)};e.$3=function(a){var b=a.reqId,e=this.$2.get(b);e&&(a.error?(d("WALogger").WARN(i(),e.command.operation),e.reject(c("err")("FTS worker error"))):e.resolve(a.result),this.$5(b))};e.startIndexer=function(){return this.$6({operation:"start-indexer"})};e.indexFull=function(a){return this.$6({operation:"run"})};e.index=function(){return this.$6({operation:"consume"})};e.purge=function(a){return this.$6({operation:"purge",ids:a})};e.purgeRange=function(a){return this.$6(babelHelpers["extends"]({operation:"purge-range"},a))};e.reInit=function(){return this.$6({operation:"re-init"})};e.clearInitializationPromises=function(){return this.$6({operation:"clear-init"})};e.search=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.$6({operation:"find",query:a,queryOptions:b}));return this.$7(a)});function c(b,c){return a.apply(this,arguments)}return c}();e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(Array.isArray(a)||typeof a==="boolean")return{canceled:!1,eof:!0,status:404,messages:[]};var b=(yield d("WAWebFtsClientMessageIdResolver").resolveMsgIds(a.messages)),c=b.resolved;b=b.unresolved;var e=a.eof;a=a.status;b.length>0&&this.purge(b);return{canceled:!1,eof:e,status:a,messages:c}});function c(b){return a.apply(this,arguments)}return c}();e.$6=function(a){var d=this;this.initialize();var e=c("WAWebFtsGenRequestId")();return new(h||(h=b("Promise")))(function(b,c){var f={command:a,reqId:e};d.$2.set(e,{resolve:b,reject:c,command:a});d.$8(f)})["finally"](function(){d.$5(e)})};e.$5=function(a){this.$2["delete"](a)};e.$8=function(a){c("WANullthrows")(this.$1).postMessage(a)};return a}();e=new a();g.ftsClient=e}),98);
__d("WAWebChatClearBridge",["WALogger","WANullthrows","WASyncAction.pb","WATimeUtils","WAWebApiActiveMessageRanges","WAWebClearChatSync","WAWebDBQueryAndRemoveMessageHistory","WAWebFtsClient","WAWebMessageRangeUtils","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebUpdateLastAddOnPreviewChatAction","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendClearMD: Expected to receive boundaries for chat while clearing"]);h=function(){return a};return a}function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=null);if(e)return d("WAWebDBQueryAndRemoveMessageHistory").queryAndRemoveMessagesInMessageRange(a.id,e,{skipStarred:b,skipRecentSystemMessages:!1});e=(yield d("WAWebDBQueryAndRemoveMessageHistory").getBoundsForChat(a.id));b=(yield d("WAWebDBQueryAndRemoveMessageHistory").queryAndRemoveMessageHistory(a.id));e==null&&d("WALogger").WARN(h());d("WAWebFtsClient").ftsClient.purgeRange(babelHelpers["extends"]({chatId:a.id.toString()},c("WANullthrows")(e)))["catch"](function(){});return b});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e=d("WATimeUtils").unixTimeMs();var g=(yield c("WAWebClearChatSync").getClearChatMutation(e,a.id,!f)),h;yield d("WAWebMessageRangeUtils").lockForMessageRangeSync(["message"],[g],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.id.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("clearChat",{deleteStarred:!f}),g.binarySyncAction);var b=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,g.binarySyncAction);b=(b=b.clearChatAction)==null?void 0:b.messageRange;h=(yield i(a,f,b))}));return{result:h}});return l.apply(this,arguments)}function a(a,c,e){return k(a,c,e).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(b.result!=null&&b.result.length>0){var c=b.result;d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview(c);yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.id.toString(),c))}return b});return function(a){return c.apply(this,arguments)}}())}g.clearStorage=i;g.sendClear=a}),98);
__d("WAWebDBFavoriteDatabaseApi",["WAWebSchemaFavorite","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaFavorite").getFavoriteTable().bulkCreateOrReplace(a)});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaFavorite").getFavoriteTable().bulkRemove(a)});return i.apply(this,arguments)}g.addOrEditFavorites=a;g.removeFavorites=c}),98);
__d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils",["WALogger","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebBackendApi","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebSchemaMessage","WAWebUserPrefsHistorySync","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] delete chat "," from initial sync boundary"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] cannot delete chat "," from initial sync boundary."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] re-enable history sync on demand."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] disable history sync on demand for ","ms."]);k=function(){return a};return a}var l=new Map(),m={disableRequestSending:!1,failureCount:0};function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebDBMessageUtils").beginningOfChat(a);a=d("WAWebDBMessageUtils").endOfChat(a);b=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],b,a,{limit:1,reverse:!1,shouldDecrypt:!1}));return b.length===0?null:b[0]});return o.apply(this,arguments)}function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield n(a));return a!=null?d("WAWebDBMessageSerialization").messageFromDbRow(a):null});return p.apply(this,arguments)}function e(a){d("WAWebBackendApi").frontendFireAndForget("successHistorySyncOd",{chatId:a}),q()}function f(a){d("WAWebBackendApi").frontendFireAndForget("errorHistorySyncOd",{chatId:a});a=d("WATimeUtils").unixTime();var b=m.firstFailureRequestTimeStampSec;b==null&&(m.firstFailureRequestTimeStampSec=a);m.failureCount+=1;var c=d("WAWebABProps").getABPropConfigValue("history_sync_on_demand_failure_limit"),e=d("WAWebABProps").getABPropConfigValue("history_sync_on_demand_cooldown_sec");if(m.failureCount>=c&&b!=null&&a-b<e){m.disableRequestSending=!0;c=1e3*e;d("WALogger").LOG(k(),c);new(d("WAShiftTimer").ShiftTimer)(function(){m.disableRequestSending&&(d("WALogger").LOG(j()),q())}).onOrAfter(c)}}function q(){m.disableRequestSending=!1,m.failureCount=0,m.firstFailureRequestTimeStampSec=void 0}function r(a){var b=d("WAWebUserPrefsHistorySync").getHistoryInitialSyncBoundary();if(b==null||Object.keys(b).length===0||(b==null?void 0:b[a.toJid()])==null){d("WALogger").LOG(i(),c("gkx")("26258")?"":a.toJid());return}d("WALogger").LOG(h(),c("gkx")("26258")?"":a.toJid());delete b[a.toJid()];void d("WAWebUserPrefsHistorySync").setHistoryInitialSyncBoundary(b)}g.inFlightHistorySyncOnDemandRequests=l;g.historySyncOnDemandRequestsFailureRecord=m;g.getOldestMsgRowInChat=n;g.getOldestMsgInChatFromDB=a;g.handleHistorySyncOnDemandSuccess=e;g.handleHistorySyncOnDemandFailure=f;g.clearHistorySyncOnDemandRequestsFailureRecord=q;g.deleteChatFromInitialSyncBoundary=r}),98);
__d("WAWebChatDeleteBridge",["Promise","WALogger","WASyncAction.pb","WATimeUtils","WAWebABProps","WAWebApiActiveMessageRanges","WAWebApiOrphanTcToken","WAWebBizChatAssignmentAction","WAWebBizGatingUtils","WAWebDBFavoriteDatabaseApi","WAWebDBQueryAndRemoveLocalLabelAssociation","WAWebDBQueryAndRemoveMessageHistory","WAWebDeleteChatSync","WAWebEditLabelAssociationBridge","WAWebFtsClient","WAWebMessageRangeUtils","WAWebModelStorageUtils","WAWebNonMessageDataRequestHistorySyncOnDemandUtils","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebPinChatSync","WAWebSchemaChat","WAWebSchemaGroupMetadata","WAWebSchemaLabelAssociation","WAWebUpdateLastAddOnPreviewChatAction","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendConversationDelete: chat boundaries was null"]);i=function(){return a};return a}function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["chat","label-association","message","chat-assignment","orphan-tc-token","favorite"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d("WAWebDBQueryAndRemoveMessageHistory").getBoundsForChat(a)),e=(yield d("WAWebSchemaChat").getChatTable().get(a.toString()));e=(yield (h||(h=b("Promise"))).all([d("WAWebSchemaChat").getChatTable().remove(a.toString()),d("WAWebDBQueryAndRemoveMessageHistory").queryAndRemoveMessageHistory(a),j(a),d("WAWebBizChatAssignmentAction").removeChatAssignmentsForChat(a),l(a,e==null?void 0:e.tcToken,e==null?void 0:e.tcTokenTimestamp),d("WAWebDBFavoriteDatabaseApi").removeFavorites([a.toString()])]));e[0];var f=e[1];e[2];return{chatBoundaries:c,deletedMsgIds:f}})).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.chatBoundaries;b=b.deletedMsgIds;!c?d("WALogger").WARN(i()):(d("WAWebFtsClient").ftsClient.purgeRange(babelHelpers["extends"]({chatId:a.toString()},c)),d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview(b),yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.toString(),b)))});return function(a){return c.apply(this,arguments)}}())}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBizGatingUtils").canEditLabelAssociation())return;a=(yield n(a));var b=a.labelsToUpdate;a=a.modelRecords;yield d("WAWebEditLabelAssociationBridge").editLocalLabelAssociationMD(b,a)});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){return d("WAWebABProps").getABPropConfigValue("enable_spam_report_iq_with_privacy_token")&&c!=null&&e!=null?d("WAWebApiOrphanTcToken").createOrUpdateOrphanTcToken(a.toString(),{tcToken:c,tcTokenTimestamp:e}):(h||(h=b("Promise"))).resolve()});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebDBQueryAndRemoveLocalLabelAssociation").queryLocalLabelAssociation([{associationId:a.toString(),type:d("WAWebSchemaLabelAssociation").LabelAssociationType.Jid}]));return{labelsToUpdate:b.map(function(a){a=a.labelId;return{id:a,type:"remove"}}),modelRecords:[{labelAssociationType:d("WAWebSchemaLabelAssociation").LabelAssociationType.Jid,modelId:a.toString(),mutationIndexSegments:[a.toString({legacy:!0})]}]}});return o.apply(this,arguments)}function p(a,b,c,d,e){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){f===void 0&&(f=!1);var k=d("WATimeUtils").unixTimeMs();k=(yield (h||(h=b("Promise"))).all([c("WAWebDeleteChatSync").getDeleteChatMutation(k,a,!f),c("WAWebPinChatSync").getPinMutation(k,!1,a),r(a)]));var m=k[0],n=k[1];k=k[2];k=[].concat(k,[n]);e&&k.push(m);var o;yield d("WAWebMessageRangeUtils").lockForMessageRangeSync(["message","chat","label-association","group-metadata","orphan-tc-token"],k,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){e&&(yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("deleteChat",{deleteMedia:!f}),m.binarySyncAction));var c=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,m.binarySyncAction);c=(c=c.deleteChatAction)==null?void 0:c.messageRange;c&&(o=(yield d("WAWebDBQueryAndRemoveMessageHistory").queryAndRemoveMessagesInMessageRange(a,c,{forceDeleteAllMessages:!0})),yield (h||(h=b("Promise"))).all([d("WAWebSchemaChat").getChatTable().remove(a.toString()),d("WAWebSchemaGroupMetadata").getGroupMetadataTable().remove(a.toString()),j(a),l(a,g,i)]))}));return{status:200,result:o}});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBizGatingUtils").canEditLabelAssociation())return[];a=(yield n(a));var b=a.labelsToUpdate;a=a.modelRecords;return d("WAWebEditLabelAssociationBridge").createLabelAssociationMutations(b,a)});return s.apply(this,arguments)}function e(a,c,e){return p(a,!0,!1,c,e).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(b.result!=null&&b.result.length>0){var c=b.result;d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview(c);d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").deleteChatFromInitialSyncBoundary(a);yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.toString(),c));return b}return b});return function(a){return c.apply(this,arguments)}}())}g.deleteFromStorage=a;g.sendConversationDelete=e}),98);
__d("WAWebChatFindBridge",["WAWebApiHydrateWidsUtil","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaChat").getChatTable().get(a,!1));return a?d("WAWebApiHydrateWidsUtil").hydrateWids(a):null});return h.apply(this,arguments)}g.findLocal=a}),98);
__d("WAWebChatGetExistingBridge",["WAWebChatCollection","WAWebChatFindBridge","WAWebNewsletterCollection","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebChatCollection").ChatCollection.get(a);if(b&&!b.stale)return b;b=a.isNewsletter();if(b){var e=c("WAWebNewsletterCollection").get(a);if(e!=null&&!e.stale)return c("WAWebNewsletterCollection").get(a)}e=(yield d("WAWebChatFindBridge").findLocal(a.toString()));return e?b?c("WAWebNewsletterCollection").gadd(e):d("WAWebChatCollection").ChatCollection.gadd(e):null});return h.apply(this,arguments)}g.getExisting=a}),98);
__d("WAWebChatMuteBridge",["WAWebMuteChatSync","WAWebSyncd"],(function(a,b,c,d,e,f,g){function a(a,b,e,f){e=c("WAWebMuteChatSync").generateMuteMutation(a,b,f);e=d("WAWebSyncd").lockForSync(["chat"],[e],function(c){c=c[0];return c.merge(a.toString(),{muteExpiration:b,isAutoMuted:f})}).then(function(){return{status:200}});return e}g.sendConversationMute=a}),98);
__d("WAWebWamEnumActionConducted",[],(function(a,b,c,d,e,f){a=Object.freeze({MUTE:1,UNMUTE:2,EXPIRE:3});f.ACTION_CONDUCTED=a}),66);
__d("WAWebWamEnumChatMuteNotificationChoice",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_NOTIFICATIONS_WHEN_MUTED:1,YES_NOTIFICATIONS_WHEN_MUTED:2});f.CHAT_MUTE_NOTIFICATION_CHOICE=a}),66);
__d("WAWebWamEnumMuteChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({ONE_ON_ONE:1,GROUP:2,CHANNEL:3,INTEROP:4});f.MUTE_CHAT_TYPE=a}),66);
__d("WAWebWamEnumMuteEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_LIST_SCREEN:1,CONTACT_INFO:2,CONVERSATION_SCREEN:3});f.MUTE_ENTRY_POINT=a}),66);
__d("WAWebWamEnumWaOfficialAccountName",[],(function(a,b,c,d,e,f){a=Object.freeze({WHATSAPP_CHATPSA:1});f.WA_OFFICIAL_ACCOUNT_NAME=a}),66);
__d("WAWebChatMuteWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumActionConducted","WAWebWamEnumChatMuteNotificationChoice","WAWebWamEnumMuteChatType","WAWebWamEnumMuteEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({ChatMute:[2280,{actionConducted:[3,d("WAWebWamEnumActionConducted").ACTION_CONDUCTED],chatMuteNotificationChoice:[5,d("WAWebWamEnumChatMuteNotificationChoice").CHAT_MUTE_NOTIFICATION_CHOICE],muteChatType:[4,d("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE],muteDuration:[1,d("WAWebWamCodegenUtils").TYPES.TIMER],muteEntryPoint:[6,d("WAWebWamEnumMuteEntryPoint").MUTE_ENTRY_POINT],muteGroupSize:[2,d("WAWebWamCodegenUtils").TYPES.INTEGER],waOfficialAccountName:[7,d("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME]},[1,1,1],"regular"]},{ChatMute:[]});g.ChatMuteWamEvent=a}),98);
__d("WAWebWamEnumPsaMessageActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({SAVE:1,FORWARD:2,REACT:3,LINK_CLICK:4,MEDIA_PLAY:5,DELETE:6});f.PSA_MESSAGE_ACTION_TYPE=a}),66);
__d("WAWebChatPsaActionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPsaMessageActionType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({ChatPsaAction:[3572,{messageMediaType:[1,d("WAWebWamEnumMediaType").MEDIA_TYPE],psaCampaignId:[4,d("WAWebWamCodegenUtils").TYPES.STRING],psaMessageActionType:[2,d("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE],psaMsgId:[5,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{ChatPsaAction:[]});g.ChatPsaActionWamEvent=a}),98);
__d("WAWebWamEnumReadEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_LIST:1,CHAT:2});f.READ_ENTRY_POINT=a}),66);
__d("WAWebChatPsaReadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumReadEntryPoint"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({ChatPsaRead:[3574,{messageMediaType:[1,d("WAWebWamEnumMediaType").MEDIA_TYPE],psaCampaignId:[4,d("WAWebWamCodegenUtils").TYPES.STRING],psaMsgId:[5,d("WAWebWamCodegenUtils").TYPES.STRING],readEntryPoint:[3,d("WAWebWamEnumReadEntryPoint").READ_ENTRY_POINT]},[1,1,1],"regular"]},{ChatPsaRead:[]});g.ChatPsaReadWamEvent=a}),98);
__d("WAWebWamEnumPsaBlockReason",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,MESSAGES_ARENT_HELPFUL:1,TOO_MANY_MESSAGES:2,IT_LOOKS_SUSPICIOUS:3});f.PSA_BLOCK_REASON=a}),66);
__d("WAWebWamEnumPsaMessageRemoveAction",[],(function(a,b,c,d,e,f){a=Object.freeze({BLOCK:1,UNBLOCK:2,ARCHIVE:3,UNARCHIVE:4,CLEAR:5,DELETE_ALL:6});f.PSA_MESSAGE_REMOVE_ACTION=a}),66);
__d("WAWebWamEnumPsaMessageRemoveEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({BLOCK_FROM_CONTACT_INFO:1,BLOCK_FROM_CHAT:2,UNBLOCK_FROM_CONTACT_INFO:3,UNBLOCK_FROM_CHAT:4,UNBLOCK_FROM_PRIVACY_SETTINGS:5,ARCHIVE_FROM_CHAT_LIST:6,ARCHIVE_FROM_DELETE_OPTION:7,UNARCHIVE_FROM_ARCHIVED_CHAT_LIST:8,CLEAR_FROM_CONTACT_INFO:9,CLEAR_FROM_CHAT_LIST:10,DELETE_ALL_FROM_CHAT_LIST:11,DELETE_ALL_FROM_CONTACT_INFO:12,DELETE_ALL_FROM_CONVERSATION:13,CLEAR_FROM_CONVERSATION:14,BLOCK_FROM_CONSENT_MODAL:15});f.PSA_MESSAGE_REMOVE_ENTRY_POINT=a}),66);
__d("WAWebChatPsaRemoveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPsaBlockReason","WAWebWamEnumPsaMessageRemoveAction","WAWebWamEnumPsaMessageRemoveEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChatPsaRemove:[3582,{lastReceivedMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],lastReceivedMessageTs:[4,a.TYPES.TIMER],lastReceivedMsgId:[8,a.TYPES.STRING],psaBlockReason:[10,d("WAWebWamEnumPsaBlockReason").PSA_BLOCK_REASON],psaCampaignId:[9,a.TYPES.STRING],psaMessageRemoveAction:[5,d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION],psaMessageRemoveEntryPoint:[6,d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT],waOfficialAccountName:[7,d("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME]},[1,1,1],"regular"]},{ChatPsaRemove:[]});g.ChatPsaRemoveWamEvent=b}),98);
__d("WAWebWamChatPSALogger",["WAWebChatMuteWamEvent","WAWebChatPsaActionWamEvent","WAWebChatPsaReadWamEvent","WAWebChatPsaRemoveWamEvent","WAWebWamEnumActionConducted","WAWebWamEnumChatMuteNotificationChoice","WAWebWamEnumMuteChatType","WAWebWamEnumPsaMessageActionType","WAWebWamEnumPsaMessageRemoveAction","WAWebWamEnumPsaMessageRemoveEntryPoint","WAWebWamEnumReadEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(a,b,c,d,e,f,g){function a(a){if(a.campaignId!=null){new(d("WAWebChatPsaReadWamEvent").ChatPsaReadWamEvent)({messageMediaType:a.getWamMediaType(),psaMsgId:a.id.id.toString(),psaCampaignId:(a=a.campaignId)==null?void 0:a.toString(),readEntryPoint:d("WAWebWamEnumReadEntryPoint").READ_ENTRY_POINT.CHAT}).commit()}}function b(a,b){new(d("WAWebChatMuteWamEvent").ChatMuteWamEvent)({actionConducted:d("WAWebWamEnumActionConducted").ACTION_CONDUCTED.MUTE,chatMuteNotificationChoice:d("WAWebWamEnumChatMuteNotificationChoice").CHAT_MUTE_NOTIFICATION_CHOICE.NO_NOTIFICATIONS_WHEN_MUTED,muteChatType:d("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE.ONE_ON_ONE,muteDuration:b,muteEntryPoint:a,waOfficialAccountName:d("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function c(a){new(d("WAWebChatMuteWamEvent").ChatMuteWamEvent)({actionConducted:d("WAWebWamEnumActionConducted").ACTION_CONDUCTED.UNMUTE,muteChatType:d("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE.ONE_ON_ONE,muteEntryPoint:a,waOfficialAccountName:d("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function e(a){var b;new(d("WAWebChatPsaActionWamEvent").ChatPsaActionWamEvent)({messageMediaType:a.getWamMediaType(),psaCampaignId:(b=a.campaignId)==null?void 0:b.toString(),psaMessageActionType:d("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.SAVE,psaMsgId:a.id.id.toString()}).commit()}function f(a){var b;new(d("WAWebChatPsaActionWamEvent").ChatPsaActionWamEvent)({messageMediaType:a.getWamMediaType(),psaCampaignId:(b=a.campaignId)==null?void 0:b.toString(),psaMessageActionType:d("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.DELETE,psaMsgId:a.id.id.toString()}).commit()}function h(a){var b;new(d("WAWebChatPsaActionWamEvent").ChatPsaActionWamEvent)({messageMediaType:a.getWamMediaType(),psaCampaignId:(b=a.campaignId)==null?void 0:b.toString(),psaMessageActionType:d("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.FORWARD,psaMsgId:a.id.id.toString()}).commit()}function i(a,b,c){new(d("WAWebChatPsaActionWamEvent").ChatPsaActionWamEvent)({messageMediaType:a,psaCampaignId:b==null?void 0:b.toString(),psaMessageActionType:d("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.MEDIA_PLAY,psaMsgId:c.toString()}).commit()}function j(a,b,c){a?new(d("WAWebChatPsaRemoveWamEvent").ChatPsaRemoveWamEvent)({lastReceivedMediaType:a.getWamMediaType(),lastReceivedMessageTs:a.t,lastReceivedMsgId:a.id.id.toString(),psaMessageRemoveAction:k(b),psaMessageRemoveEntryPoint:l(c),waOfficialAccountName:d("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit():new(d("WAWebChatPsaRemoveWamEvent").ChatPsaRemoveWamEvent)({psaMessageRemoveAction:k(b),psaMessageRemoveEntryPoint:l(c),waOfficialAccountName:d("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function k(a){switch(a){case 1:return d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.BLOCK;case 2:return d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.UNBLOCK;case 3:return d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.ARCHIVE;case 4:return d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.UNARCHIVE;case 5:return d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.CLEAR;case 6:return d("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.DELETE_ALL}}function l(a){switch(a){case 1:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.BLOCK_FROM_CONTACT_INFO;case 2:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.BLOCK_FROM_CHAT;case 3:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_CONTACT_INFO;case 4:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_CHAT;case 5:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_PRIVACY_SETTINGS;case 6:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.ARCHIVE_FROM_CHAT_LIST;case 7:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.ARCHIVE_FROM_DELETE_OPTION;case 8:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNARCHIVE_FROM_ARCHIVED_CHAT_LIST;case 9:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CONTACT_INFO;case 10:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CHAT_LIST;case 11:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CHAT_LIST;case 12:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONTACT_INFO;case 13:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONVERSATION;case 14:return d("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CONVERSATION}}g.logChatPSARead=a;g.logChatPSAMute=b;g.logChatPSAUnmute=c;g.logChatPSAStar=e;g.logChatPSADelete=f;g.logChatPSAForward=h;g.logChatPSAMediaPlay=i;g.logChatPSARemove=j}),98);
__d("WAWebSendReadReceiptJob",["Promise","WAJids","WALogger","WANullthrows","WATimeUtils","WAWebAck","WAWebApiChat","WAWebDBMsgUtils","WAWebHandlePlaceholderWam","WAWebModelStorageUtils","WAWebMsgKey","WAWebMsgType","WAWebPrivacySettings","WAWebSchemaMessage","WAWebSendReceiptJobCommon","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamChatPSALogger","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: marked edits as read"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: sent bot read-self receipts"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: sent read receipts"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: start"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["markStatusRead: message is not a status."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["markChatRead: chatId: ",", lastKey: ",", pendings: "," "]);n=function(){return a};return a}var o=d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID);function p(a,b){if(a.isNewsletter())return d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF;if(a.isStatusV3()&&b!=null&&b.isPSA()||c("WAWebWid").isPSA(a))return d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF;return a.isGroup()?d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ:d("WAWebUserPrefsGeneral").getUserPrivacySettings().readReceipts===d("WAWebPrivacySettings").ALL_NONE.none?d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ}function a(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=Date.now().toString(),g=String(a.id),i=(yield d("WAWebApiChat").queryPendingReadReceiptMsgRows(g));d("WALogger").DEV(n(),g,e,i.length);i.sort(function(a,b){a=a.rowId||0;b=b.rowId||0;return a-b});e=e?String(e):null;var j=i.length-1;if(e){for(j;j>=0;j--)if(i[j].id===e)break;j<0&&(j=i.length-1)}e=null;var k=[];for(j;j>=0;j--){var l=i[j],m=a.msgs.get(l.id);m&&c("WAWebWid").isPSA(a.id)&&d("WAWebWamChatPSALogger").logChatPSARead(m);l.rowId!=null&&(e==null||l.rowId>e)&&(e=l.rowId);m=c("WAWebMsgKey").fromString(l.id);if(l.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT){void d("WAWebHandlePlaceholderWam").viewPlaceholderWam([l]);continue}var o=l.broadcastId||l.from;l=l.author||l.from;k.push({id:m.id,sender:d("WAWebWidFactory").createWidFromWidLike(l),chat:d("WAWebWidFactory").createWidFromWidLike(o)})}m=t(k);var q=m[0];l=m[1];yield (h||(h=b("Promise"))).all([].concat(Array.from(q.keys()).map(function(b){var c=q.get(b);if(!c)return;var e;!a.trusted?e=d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:e=p(a.id);return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:b,type:e,t:f,groupedReceipt:c})}),Array.from(l.keys()).map(function(a){var b=q.get(a);if(!b)return;return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:f,groupedReceipt:b})})));return d("WAWebApiChat").markMessageAndChatAsRead(e,g,!1)});return q.apply(this,arguments)}function e(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.remote.user!=="status"){d("WALogger").WARN(m());return}if(a.fromMe)return;yield d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:o,type:p(o,c("WANullthrows")(a.participant)),t:String(b),groupedReceipt:new Map([[c("WANullthrows")(a.participant),[a.id]]])});var e={ack:d("WAWebAck").ACK.READ};a.participant&&a.participant.isPSA()&&(e.statusPSAReadTimestamp=b);yield d("WAWebSchemaMessage").getMessageTable().merge(a.toString(),e)});return r.apply(this,arguments)}function f(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=String(d("WATimeUtils").unixTime());a=t(a.filter(function(a){return!d("WAWebUserPrefsMeUser").isSerializedWidMe(a.sender)}).map(function(a){return{chat:a.msgKey.remote,sender:d("WAWebWidFactory").createWidFromWidLike(a.sender),id:a.msgKey.id}}));var e=a[0];yield (h||(h=b("Promise"))).all(Array.from(e.keys()).map(function(a){var b=e.get(a);if(!b)return;return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:c,groupedReceipt:b})}))});return s.apply(this,arguments)}function t(a){var b=new Map(),c=new Map();a.forEach(function(a){var d,e,f=a.chat,g=a.sender;a=a.id;var h=!f.isBot()&&g.isBot();h=h?c:b;d=(d=h.get(f))!=null?d:new Map();e=(e=d.get(g))!=null?e:[];e.push(a);d.set(g,e);h.set(f,d)});return[b,c]}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=String(a),g=(yield w(f));if(!g.length)return;d("WALogger").DEV(l()).devConsole({chatIdString:f,pendingMsgRows:g});var h=[];g.forEach(function(b){var e=c("WAWebMsgKey").fromString(b.latestEditMsgKey);b=b.author||b.from;h.push({id:e.id,sender:d("WAWebWidFactory").createWidFromWidLike(b),chat:d("WAWebWidFactory").createWidFromWidLike(a)})});g=t(h);var m=g[0];g=g[1];m=m.get(a);g=g.get(a);var n=Date.now().toString();if(m){!e.trusted?e=d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:e=p(a);yield d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:e,t:n,groupedReceipt:m});d("WALogger").DEV(k()).devConsole({groupedReceiptsBySender:m})}g&&(yield d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:n,groupedReceipt:g}),d("WALogger").DEV(j()).devConsole({botInvokeResponseGroupedReceiptsBySender:g}));return d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=new Set(h.map(function(a){return a.id})),e=(yield w(f)).filter(function(a){return b.has(c("WAWebMsgKey").fromString(a.latestEditMsgKey).id)});e=e.map(function(a){return{id:a.id,pendingReadReceipt:null}});e.length>0&&(yield a.bulkCreateOrMerge(e),d("WALogger").DEV(i()).devConsole({msgUpdates:e}))});return function(b){return a.apply(this,arguments)}}())});return v.apply(this,arguments)}function w(a){return d("WAWebSchemaMessage").getMessageTable().equals(["from","pendingReadReceipt"],[a,d("WAWebDBMsgUtils").PendingReadReceiptType.MessageEdit],{shouldDecrypt:!1})}g.getReadReceiptType=p;g.markChatRead=a;g.markStatusRead=e;g.sendAddOnReadReceipts=f;g.markEditedMsgsRead=u}),98);
__d("WAWebChatSeenBridge",["WALogger","WATimeUtils","WAWebApiActiveMessageRanges","WAWebApiChat","WAWebMarkChatAsReadSync","WAWebMessageRangeUtils","WAWebMiscErrors","WAWebSchemaChat","WAWebSendReadReceiptJob","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["update chat table failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["update chat table failed"]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("WATimeUtils").unixTimeMs();if(e===-1){var g=(yield c("WAWebMarkChatAsReadSync").getMarkChatAsReadMutation(f,!0,a.id));e=a.id.toString();d("WAWebMessageRangeUtils").lockForMessageRangeSync([],[g],function(){return d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.id.toString(),"markChatAsRead",g.binarySyncAction)});yield d("WAWebApiChat").updateChatForMarkAsReadSync(e)}else yield d("WAWebSendReadReceiptJob").markChatRead(a,b)});return j.apply(this,arguments)}function e(a,b){b=d("WATimeUtils").unixTimeMs();return c("WAWebMarkChatAsReadSync").getMarkChatAsReadMutation(b,!1,a).then(function(b){return d("WAWebMessageRangeUtils").lockForMessageRangeSync([],[b],function(){return d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.toString(),"markChatAsRead",b.binarySyncAction)})})}function f(a,b){return d("WAWebSchemaChat").getChatTable().merge(a.toString(),{unreadCount:b,unreadDividerOffset:0})["catch"](function(a){if(a instanceof d("WAWebMiscErrors").DbOnLogoutAbort)throw a;d("WALogger").ERROR(i()).verbose().devConsole(a).sendLogs("update chat table failed when mark conversation seen");throw c("err")("update chat table failed")})}function k(a){return d("WAWebSchemaChat").getChatTable().merge(a.toString(),{unreadCount:-1,unreadDividerOffset:0})["catch"](function(a){if(a instanceof d("WAWebMiscErrors").DbOnLogoutAbort)throw a;d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("update chat table failed when mark conversation as unseen");throw c("err")("update chat table failed")})}g.sendConversationSeen=a;g.sendConversationUnseen=e;g.markConversationSeen=f;g.markConversationUnseen=k}),98);
__d("WAWebChatSendStarMsgsBridge",["WALogger","WASyncdWamAppState","WAWebMessageStore","WAWebStarMessageSync","WAWebSyncd","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["unstar messages failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["star messages failed"]);i=function(){return a};return a}function a(a,b,c){return j(b,c)}function b(a,b){return j(a,!1)}function j(a,b){b||d("WASyncdWamAppState").addUnsetActionCount(a.length);var e=c("WAWebStarMessageSync").getStarMessageMutations(a,b);return d("WAWebSyncd").lockForSync(["message"],e,function(){return b?d("WAWebMessageStore").starMessages(a.map(function(a){return a.id.toString()}))["catch"](function(a){d("WALogger").ERROR(i()).verbose().devConsole(a).sendLogs("star messages failed");throw c("err")("star messages failed")}):d("WAWebMessageStore").unstarMessages(a.map(function(a){return a.id.toString()}))["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("unstar messages failed");throw c("err")("unstar messages failed")})})}g.sendStarMsgs=a;g.sendUnstarAll=b}),98);
__d("WAWebDBBulkPersistProfilePic",["WABatcher","WALogger","WAWebSchemaProfilePicThumb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistProfilePicChanges persisted "," records"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistProfilePicChanges processing "," records"]);i=function(){return a};return a}var j=d("WABatcher").batch({delayMs:3e3},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield k(a);return[]});return function(b){return a.apply(this,arguments)}}());function a(a){return j(a)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i(),a.length);a=Array.from(a.reduce(function(a,b){a.set(b.id,b);return a},new Map()).values());yield d("WAWebSchemaProfilePicThumb").getProfilePicThumbTable().bulkCreateOrMerge(a);d("WALogger").DEV(h(),a.length)});return l.apply(this,arguments)}g.persistProfilePicBatched=a;g.bulkPersistProfilePicChanges=k}),98);
__d("WASmaxInGroupsGetGroupProfilePictureClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorForbiddenMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorNotAllowedMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:b.value});var c=d("WASmaxInGroupsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:c.value});var e=d("WASmaxInGroupsIQErrorNotAllowedMixin").parseIQErrorNotAllowedMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAllowed",value:e.value});var f=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:f.value});var g=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:g.value});var h=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return h.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorItemNotFound","IQErrorForbidden","IQErrorNotAllowed","IQErrorBadRequest","IQErrorRateOverlimit","IQErrorFallbackClient"],[b,c,e,f,g,h])}g.parseGetGroupProfilePictureClientErrors=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesResponseClientError",["WAResultOrError","WASmaxInGroupsGetGroupProfilePictureClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsGetGroupProfilePictureClientErrors").parseGetGroupProfilePictureClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorGetGroupProfilePictureClientErrors:b.value}))}g.parseGetGroupProfilePicturesResponseClientError=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetGroupProfilePicturesResponseServerError=a}),98);
__d("WASmaxInGroupsBadLinkedGroupProfilePictureErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"status","405");return!b.success?b:d("WAResultOrError").makeResult({status:b.value})}g.parseBadLinkedGroupProfilePictureErrorMixin=a}),98);
__d("WASmaxInGroupsBadServerProfilePictureErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"status","500");return!b.success?b:d("WAResultOrError").makeResult({status:b.value})}g.parseBadServerProfilePictureErrorMixin=a}),98);
__d("WASmaxInGroupsPictureDidNotChangeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"status","304");return!b.success?b:d("WAResultOrError").makeResult({status:b.value})}g.parsePictureDidNotChangeMixin=a}),98);
__d("WASmaxInGroupsPictureNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"status","204");return!b.success?b:d("WAResultOrError").makeResult({status:b.value})}g.parsePictureNotFoundMixin=a}),98);
__d("WASmaxInGroupsPictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup",["WAResultOrError","WASmaxInGroupsBadLinkedGroupProfilePictureErrorMixin","WASmaxInGroupsBadServerProfilePictureErrorMixin","WASmaxInGroupsPictureDidNotChangeMixin","WASmaxInGroupsPictureNotFoundMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsPictureDidNotChangeMixin").parsePictureDidNotChangeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"PictureDidNotChange",value:b.value});var c=d("WASmaxInGroupsPictureNotFoundMixin").parsePictureNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"PictureNotFound",value:c.value});var e=d("WASmaxInGroupsBadServerProfilePictureErrorMixin").parseBadServerProfilePictureErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"BadServerProfilePictureError",value:e.value});var f=d("WASmaxInGroupsBadLinkedGroupProfilePictureErrorMixin").parseBadLinkedGroupProfilePictureErrorMixin(a);return f.success?d("WAResultOrError").makeResult({name:"BadLinkedGroupProfilePictureError",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["PictureDidNotChange","PictureNotFound","BadServerProfilePictureError","BadLinkedGroupProfilePictureError"],[b,c,e,f])}g.parsePictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesPartialProfilePictureResponseMixin",["WAResultOrError","WASmaxInGroupsPictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxInGroupsPictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup").parsePictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup(a);return d("WAResultOrError").makeResult({pictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup:b.success?b.value:null})}g.parseGetGroupProfilePicturesPartialProfilePictureResponseMixin=a}),98);
__d("WASmaxInGroupsProfilePictureIdMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");return!b.success?b:d("WAResultOrError").makeResult({id:b.value})}g.parseProfilePictureIdMixin=a}),98);
__d("WASmaxInGroupsProfilePictureTypeMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInGroupsEnums").ENUM_IMAGE_PREVIEW);return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseProfilePictureTypeMixin=a}),98);
__d("WASmaxInGroupsProfilePictureBlobResponseMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,void 0);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseProfilePictureBlobResponseMixin=a}),98);
__d("WASmaxInGroupsProfilePictureUrlResponseMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"url");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"direct_path");return!a.success?a:d("WAResultOrError").makeResult({url:b.value,directPath:a.value})}g.parseProfilePictureUrlResponseMixin=a}),98);
__d("WASmaxInGroupsProfilePictureUrlOrBlobResponseMixinGroup",["WAResultOrError","WASmaxInGroupsProfilePictureBlobResponseMixin","WASmaxInGroupsProfilePictureUrlResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsProfilePictureUrlResponseMixin").parseProfilePictureUrlResponseMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ProfilePictureUrlResponse",value:b.value});var c=d("WASmaxInGroupsProfilePictureBlobResponseMixin").parseProfilePictureBlobResponseMixin(a);return c.success?d("WAResultOrError").makeResult({name:"ProfilePictureBlobResponse",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ProfilePictureUrlResponse","ProfilePictureBlobResponse"],[b,c])}g.parseProfilePictureUrlOrBlobResponseMixinGroup=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesSuccessProfilePictureResponseMixin",["WAResultOrError","WASmaxInGroupsProfilePictureIdMixin","WASmaxInGroupsProfilePictureTypeMixin","WASmaxInGroupsProfilePictureUrlOrBlobResponseMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxInGroupsProfilePictureIdMixin").parseProfilePictureIdMixin(a);if(!b.success)return b;var c=d("WASmaxInGroupsProfilePictureTypeMixin").parseProfilePictureTypeMixin(a);if(!c.success)return c;a=d("WASmaxInGroupsProfilePictureUrlOrBlobResponseMixinGroup").parseProfilePictureUrlOrBlobResponseMixinGroup(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{profilePictureUrlOrBlobResponseMixinGroup:a.success?a.value:null}))}g.parseGetGroupProfilePicturesSuccessProfilePictureResponseMixin=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup",["WAResultOrError","WASmaxInGroupsGetGroupProfilePicturesPartialProfilePictureResponseMixin","WASmaxInGroupsGetGroupProfilePicturesSuccessProfilePictureResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGetGroupProfilePicturesSuccessProfilePictureResponseMixin").parseGetGroupProfilePicturesSuccessProfilePictureResponseMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GetGroupProfilePicturesSuccessProfilePictureResponse",value:b.value});var c=d("WASmaxInGroupsGetGroupProfilePicturesPartialProfilePictureResponseMixin").parseGetGroupProfilePicturesPartialProfilePictureResponseMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GetGroupProfilePicturesPartialProfilePictureResponse",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["SuccessProfilePictureResponse","PartialProfilePictureResponse"],[b,c])}g.parseGetGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup=a}),98);
__d("WASmaxInGroupsSubGroupMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrGroupJid(a,"sub_group_jid");return!a.success?a:d("WAResultOrError").makeResult({subGroupJid:a.value})}g.parseSubGroupMixin=a}),98);
__d("WASmaxInGroupsParentOrSubGroupMixinGroup",["WAResultOrError","WASmaxInGroupsParentGroupMixin","WASmaxInGroupsSubGroupMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParentGroupMixin").parseParentGroupMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParentGroup",value:b.value});var c=d("WASmaxInGroupsSubGroupMixin").parseSubGroupMixin(a);return c.success?d("WAResultOrError").makeResult({name:"SubGroup",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParentGroup","SubGroup"],[b,c])}g.parseParentOrSubGroupMixinGroup=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesProfilePicturesResponseMixin",["WAResultOrError","WASmaxInGroupsGetGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup","WASmaxInGroupsParentOrSubGroupMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxInGroupsParentOrSubGroupMixinGroup").parseParentOrSubGroupMixinGroup(a);if(!b.success)return b;a=d("WASmaxInGroupsGetGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup").parseGetGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({parentOrSubGroupMixinGroup:b.value,getGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup:a.value})}function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"pictures");if(!a.success)return a;a=d("WASmaxParseUtils").mapChildrenWithTag(a.value,"picture",1,1e3,h);return!a.success?a:d("WAResultOrError").makeResult({picturesPicture:a.value})}g.parseGetGroupProfilePicturesProfilePicturesResponsePicturesPicture=h;g.parseGetGroupProfilePicturesProfilePicturesResponseMixin=a}),98);
__d("WASmaxInGroupsGetGroupProfilePicturesResponseSuccessGroupPictures",["WAResultOrError","WASmaxInGroupsGetGroupProfilePicturesProfilePicturesResponseMixin","WASmaxInGroupsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!c.success)return c;b=d("WASmaxInGroupsGetGroupProfilePicturesProfilePicturesResponseMixin").parseGetGroupProfilePicturesProfilePicturesResponseMixin(a);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},c.value,b.value))}g.parseGetGroupProfilePicturesResponseSuccessGroupPictures=a}),98);
__d("WASmaxOutGroupsBaseGetGroupOrServerMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutGroupsBaseGetGroupMixin","WASmaxOutGroupsBaseGetServerMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.baseGetGroup)return d("WASmaxOutGroupsBaseGetGroupMixin").mergeBaseGetGroupMixin(a,b.baseGetGroup);if(b.isBaseGetServer)return d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeBaseGetGroupOrServerMixinGroup=a}),98);
__d("WASmaxOutGroupsParentOrSubGroupMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutGroupsParentGroupMixin","WASmaxOutGroupsSubGroupMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.parentGroup)return d("WASmaxOutGroupsParentGroupMixin").mergeParentGroupMixin(a,b.parentGroup);if(b.subGroup)return d("WASmaxOutGroupsSubGroupMixin").mergeSubGroupMixin(a,b.subGroup);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeParentOrSubGroupMixinGroup=a}),98);
__d("WASmaxOutGroupsProfilePictureIdMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.pictureId;a=d("WASmaxJsx").smax("picture",{id:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeProfilePictureIdMixin=a}),98);
__d("WASmaxOutGroupsProfilePictureQueryMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.pictureQuery;a=d("WASmaxJsx").smax("picture",{query:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeProfilePictureQueryMixin=a}),98);
__d("WASmaxOutGroupsProfilePictureTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.pictureType;a=d("WASmaxJsx").smax("picture",{type:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeProfilePictureTypeMixin=a}),98);
__d("WASmaxOutGroupsSubGroupHintMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyLinkedGroupsMembershipHint;a=d("WASmaxJsx").smax("smax$any",{linked_groups_membership_hint:d("WAWap").GROUP_JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSubGroupHintMixin=a}),98);
__d("WASmaxOutGroupsGetGroupProfilePicturesProfilePicturesRequestMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutGroupsParentOrSubGroupMixinGroup","WASmaxOutGroupsProfilePictureIdMixin","WASmaxOutGroupsProfilePictureQueryMixin","WASmaxOutGroupsProfilePictureTypeMixin","WASmaxOutGroupsSubGroupHintMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.profilePictureIdMixinArgs,c=a.profilePictureTypeMixinArgs,e=a.profilePictureQueryMixinArgs;a=a.parentOrSubGroupMixinGroupArgs;b=d("WASmaxOutGroupsParentOrSubGroupMixinGroup").mergeParentOrSubGroupMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsProfilePictureQueryMixin").mergeProfilePictureQueryMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsProfilePictureTypeMixin").mergeProfilePictureTypeMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsProfilePictureIdMixin").mergeProfilePictureIdMixin,d("WASmaxJsx").smax("picture",null),b),c),e),a);return b}function i(a){var b=a.pictureArgs;a=a.subGroupHintMixinArgs;b=d("WASmaxJsx").smax("smax$any",null,d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsSubGroupHintMixin").mergeSubGroupHintMixin,d("WASmaxJsx").smax("pictures",null,d("WASmaxChildren").REPEATED_CHILD(h,b,1,1e3)),a));return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeGetGroupProfilePicturesProfilePicturesRequestPicturesPicture=h;g.mergeGetGroupProfilePicturesProfilePicturesRequestMixin=a}),98);
__d("WASmaxOutGroupsGetGroupProfilePicturesRequest",["WASmaxJsx","WASmaxOutGroupsBaseGetGroupOrServerMixinGroup","WASmaxOutGroupsGetGroupProfilePicturesProfilePicturesRequestMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=a.baseGetGroupOrServerMixinGroupArgs;a=d("WASmaxOutGroupsBaseGetGroupOrServerMixinGroup").mergeBaseGetGroupOrServerMixinGroup(d("WASmaxOutGroupsGetGroupProfilePicturesProfilePicturesRequestMixin").mergeGetGroupProfilePicturesProfilePicturesRequestMixin(d("WASmaxJsx").smax("iq",null),a),b);return a}g.makeGetGroupProfilePicturesRequest=a}),98);
__d("WASmaxGroupsGetGroupProfilePicturesRPC",["WAComms","WASmaxInGroupsGetGroupProfilePicturesResponseClientError","WASmaxInGroupsGetGroupProfilePicturesResponseServerError","WASmaxInGroupsGetGroupProfilePicturesResponseSuccessGroupPictures","WASmaxOutGroupsGetGroupProfilePicturesRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsGetGroupProfilePicturesRequest").makeGetGroupProfilePicturesRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsGetGroupProfilePicturesResponseSuccessGroupPictures").parseGetGroupProfilePicturesResponseSuccessGroupPictures(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetGroupProfilePicturesResponseSuccessGroupPictures",value:g.value});case 7:h=d("WASmaxInGroupsGetGroupProfilePicturesResponseClientError").parseGetGroupProfilePicturesResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetGroupProfilePicturesResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsGetGroupProfilePicturesResponseServerError").parseGetGroupProfilePicturesResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetGroupProfilePicturesResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetGroupProfilePictures",{SuccessGroupPictures:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetGroupProfilePicturesRPC=a}),98);
__d("WAWebGroupGetProfilePicsJob",["WALogger","WASmaxGroupsGetGroupProfilePicturesRPC","WAWebBackendErrors","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getGroupProfilePics failed: ",":",""]);h=function(){return a};return a}var i=Object.freeze({IMAGE:"image",PREVIEW:"preview"}),j=Object.freeze({BLOB:"blob",URL:"url"});function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=c.subgroupHintId,f=c.type;f=f===void 0?i.PREVIEW:f;c=c.query;c=c===void 0?j.URL:c;var g={profilePictureTypeMixinArgs:{pictureType:f},profilePictureQueryMixinArgs:{pictureQuery:c}};f=a.map(function(a){var b=a.groupId,c=a.photoId;a=a.isParentGroup;a=a===void 0?!1:a;a=a?{parentGroup:{anyParentGroupJid:d("WAWebWidToJid").widToGroupJid(b)}}:{subGroup:{anySubGroupJid:d("WAWebWidToJid").widToGroupJid(b)}};return babelHelpers["extends"]({parentOrSubGroupMixinGroupArgs:a,profilePictureIdMixinArgs:c!=null?{pictureId:c}:void 0},g)});c=(yield d("WASmaxGroupsGetGroupProfilePicturesRPC").sendGetGroupProfilePicturesRPC({pictureArgs:f,subGroupHintMixinArgs:e?{anyLinkedGroupsMembershipHint:d("WAWebWidToJid").widToGroupJid(e)}:void 0,baseGetGroupOrServerMixinGroupArgs:{baseGetGroup:{iqTo:d("WAWebWidToJid").widToGroupJid(b)}}}));switch(c.name){case"GetGroupProfilePicturesResponseSuccessGroupPictures":a=c.value.picturesPicture.map(function(a){var b;a.parentOrSubGroupMixinGroup.name==="SubGroup"?b=d("WAWebWidFactory").createWid(a.parentOrSubGroupMixinGroup.value.subGroupJid):b=d("WAWebWidFactory").createWid(a.parentOrSubGroupMixinGroup.value.parentGroupJid);switch(a.getGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup.name){case"GetGroupProfilePicturesSuccessProfilePictureResponse":var c,e=a.getGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup.value;return{id:b,tag:e.id,eurl:(c=e.profilePictureUrlOrBlobResponseMixinGroup)==null?void 0:c.value.url,directPath:(c=e.profilePictureUrlOrBlobResponseMixinGroup)==null?void 0:c.value.directPath,type:e.type,updatePicture:!0};case"GetGroupProfilePicturesPartialProfilePictureResponse":c=!1;((e=a.getGroupProfilePicturesSuccessOrGetGroupProfilePicturesPartialProfilePictureResponseMixinGroup.value.pictureDidNotChangeOrPictureNotFoundOrBadServerProfilePictureErrorOrBadLinkedGroupProfilePictureErrorMixinGroup)==null?void 0:e.name)==="PictureNotFound"&&(c=!0);return{id:b,tag:null,eurl:null,directPath:null,type:null,updatePicture:c}}});return a;case"GetGroupProfilePicturesResponseClientError":f=c.value.errorGetGroupProfilePictureClientErrors.value.code;e=c.value.errorGetGroupProfilePictureClientErrors.value.text;return l(f,e);case"GetGroupProfilePicturesResponseServerError":b=c.value.errorServerErrors.value.code;a=c.value.errorServerErrors.value.text;return l(b,a)}});return k.apply(this,arguments)}function l(a,b){d("WALogger").ERROR(h(),a,b).tags("non-sad").sendLogs("pictures-error",.001);return Promise.reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),b))}g.ProfilePicsTypeEnum=i;g.ProfilePicsQueryEnum=j;g.getProfilePics=a}),98);
__d("WAWebFetchCommunityProfilePicAction",["Promise","WAWebGroupGetProfilePicsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f={id:a};e={groupId:a,photoId:e!=null?String(e):null,isParentGroup:a.equals(c)};a=(yield (h||(h=b("Promise"))).all([d("WAWebGroupGetProfilePicsJob").getProfilePics([e],c,{type:d("WAWebGroupGetProfilePicsJob").ProfilePicsTypeEnum.IMAGE}),d("WAWebGroupGetProfilePicsJob").getProfilePics([e],c,{type:d("WAWebGroupGetProfilePicsJob").ProfilePicsTypeEnum.PREVIEW})]));e=a[0];c=a[1];return!c[0]||!c[0].updatePicture||!e[0]||!e[0].updatePicture?f:babelHelpers["extends"]({},f,{eurl:(a=e[0].eurl)!=null?a:void 0,fullDirectPath:(f=e[0].directPath)!=null?f:void 0,previewEurl:(a=c[0].eurl)!=null?a:void 0,previewDirectPath:(f=c[0].directPath)!=null?f:void 0,tag:(a=e[0].tag)!=null?a:void 0,timestamp:Date.now(),eurlStale:!1,stale:!1})});return i.apply(this,arguments)}g.fetchCommunityProfilePic=a}),98);
__d("WASmaxInProfilePictureIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","item-not-found");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",404);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorNotAuthorizedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-authorized");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",401);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAuthorizedMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInProfilePictureIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInProfilePictureProfilePictureGetErrors",["WAResultOrError","WASmaxInProfilePictureIQErrorBadRequestMixin","WASmaxInProfilePictureIQErrorFeatureNotImplementedMixin","WASmaxInProfilePictureIQErrorInternalServerErrorMixin","WASmaxInProfilePictureIQErrorItemNotFoundMixin","WASmaxInProfilePictureIQErrorNotAuthorizedMixin","WASmaxInProfilePictureIQErrorRateOverlimitMixin","WASmaxInProfilePictureIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInProfilePictureIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInProfilePictureIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:c.value});var e=d("WASmaxInProfilePictureIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:e.value});var f=d("WASmaxInProfilePictureIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:f.value});var g=d("WASmaxInProfilePictureIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:g.value});var h=d("WASmaxInProfilePictureIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:h.value});var i=d("WASmaxInProfilePictureIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return i.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:i.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorNotAuthorized","IQErrorItemNotFound","IQErrorRateOverlimit","IQErrorInternalServerError","IQErrorFeatureNotImplemented","IQErrorServiceUnavailable"],[b,c,e,f,g,h,i])}g.parseProfilePictureGetErrors=a}),98);
__d("WASmaxInProfilePictureGetResponseError",["WAResultOrError","WASmaxInProfilePictureIQErrorResponseMixin","WASmaxInProfilePictureProfilePictureGetErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInProfilePictureIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInProfilePictureProfilePictureGetErrors").parseProfilePictureGetErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorProfilePictureGetErrors:b.value}))}g.parseGetResponseError=a}),98);
__d("WASmaxInProfilePictureIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInProfilePictureGetResponseSuccessNoData",["WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseGetResponseSuccessNoData=a}),98);
__d("WASmaxInProfilePictureEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={image:"image",preview:"preview"};b={lid:"lid",pn:"pn"};e={validators:[(c=d("WAJids")).validateDomainJid,c.validateGroupJid,c.validateUserJid],typeName:"DomainJid|GroupJid|UserJid"};f={validators:[c.validateGroupJid,c.validateUserJid],typeName:"GroupJid|UserJid"};g.ENUM_IMAGE_PREVIEW=a;g.ENUM_LID_PN=b;g.DOMAINJID_GROUPJID_USERJID=e;g.GROUPJID_USERJID=f}),98);
__d("WASmaxInProfilePictureGetResponseSuccessPictureBlob",["WAResultOrError","WASmaxInProfilePictureEnums","WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"picture");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(c.value,"id");if(!e.success)return e;var f=d("WASmaxParseUtils").attrStringEnum(c.value,"type",d("WASmaxInProfilePictureEnums").ENUM_IMAGE_PREVIEW);if(!f.success)return f;c=d("WASmaxParseUtils").contentBytesRange(c.value,1,void 0);if(!c.success)return c;a=d("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({pictureId:e.value,pictureType:f.value,pictureElementValue:c.value},a.value))}g.parseGetResponseSuccessPictureBlob=a}),98);
__d("WASmaxInProfilePictureGetResponseSuccessPictureURL",["WAResultOrError","WASmaxInProfilePictureEnums","WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"picture");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(c.value,"id");if(!e.success)return e;var f=d("WASmaxParseUtils").attrStringEnum(c.value,"type",d("WASmaxInProfilePictureEnums").ENUM_IMAGE_PREVIEW);if(!f.success)return f;var g=d("WASmaxParseUtils").attrString(c.value,"url");if(!g.success)return g;var h=d("WASmaxParseUtils").attrString(c.value,"direct_path");if(!h.success)return h;c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"hash");if(!c.success)return c;a=d("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({pictureId:e.value,pictureType:f.value,pictureUrl:g.value,pictureDirectPath:h.value,pictureHash:c.value},a.value))}g.parseGetResponseSuccessPictureURL=a}),98);
__d("WASmaxOutProfilePictureAddRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.addRequestCode,c=a.addRequestAdmin;a=a.addRequestExpiration;b=d("WASmaxJsx").smax("picture",null,d("WASmaxJsx").smax("add_request",{code:d("WAWap").CUSTOM_STRING(b),admin:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,c),expiration:d("WAWap").INT(a)}));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAddRequestMixin=a}),98);
__d("WASmaxOutProfilePictureBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutProfilePictureBaseGetIQMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutProfilePictureBaseIQGetRequestMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutProfilePictureBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"w:profile:picture"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseGetIQMixin=a}),98);
__d("WASmaxOutProfilePictureServerDomainIQMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeServerDomainIQMixin=a}),98);
__d("WASmaxOutProfilePictureGetIQMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutProfilePictureServerDomainIQMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqTarget;a=d("WASmaxOutProfilePictureServerDomainIQMixin").mergeServerDomainIQMixin(d("WASmaxJsx").smax("iq",{target:d("WAWap").JID(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGetIQMixin=a}),98);
__d("WASmaxOutProfilePictureGetRequest",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutProfilePictureAddRequestMixin","WASmaxOutProfilePictureBaseGetIQMixin","WASmaxOutProfilePictureGetIQMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c,e=a.pictureType,f=a.pictureId,g=a.pictureQuery,h=a.pictureInvite,i=a.picturePersonaId,j=a.addRequestMixinArgs;e=d("WASmaxOutProfilePictureGetIQMixin").mergeGetIQMixin(d("WASmaxOutProfilePictureBaseGetIQMixin").mergeBaseGetIQMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxMixins").optionalMerge(d("WASmaxOutProfilePictureAddRequestMixin").mergeAddRequestMixin,d("WASmaxJsx").smax("picture",{type:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,e),id:b.OPTIONAL(c.CUSTOM_STRING,f),query:b.OPTIONAL(c.CUSTOM_STRING,g),invite:b.OPTIONAL(c.CUSTOM_STRING,h),persona_id:b.OPTIONAL(c.CUSTOM_STRING,i)}),j))),a);return e}g.makeGetRequest=a}),98);
__d("WASmaxProfilePictureGetRPC",["WAComms","WASmaxInProfilePictureGetResponseError","WASmaxInProfilePictureGetResponseSuccessNoData","WASmaxInProfilePictureGetResponseSuccessPictureBlob","WASmaxInProfilePictureGetResponseSuccessPictureURL","WASmaxOutProfilePictureGetRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d("WASmaxOutProfilePictureGetRequest").makeGetRequest(a);k.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=k.sent;g=d("WASmaxInProfilePictureGetResponseSuccessPictureURL").parseGetResponseSuccessPictureURL(f,e);if(!g.success){k.next=7;break}return k.abrupt("return",{name:"GetResponseSuccessPictureURL",value:g.value});case 7:h=d("WASmaxInProfilePictureGetResponseSuccessPictureBlob").parseGetResponseSuccessPictureBlob(f,e);if(!h.success){k.next=10;break}return k.abrupt("return",{name:"GetResponseSuccessPictureBlob",value:h.value});case 10:i=d("WASmaxInProfilePictureGetResponseSuccessNoData").parseGetResponseSuccessNoData(f,e);if(!i.success){k.next=13;break}return k.abrupt("return",{name:"GetResponseSuccessNoData",value:i.value});case 13:j=d("WASmaxInProfilePictureGetResponseError").parseGetResponseError(f,e);if(!j.success){k.next=16;break}return k.abrupt("return",{name:"GetResponseError",value:j.value});case 16:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Get",{SuccessPictureURL:g,SuccessPictureBlob:h,SuccessNoData:i,Error:j}));case 17:case"end":return k.stop()}},null,this)}g.sendGetRPC=a}),98);
__d("WAWebGetProfilePicJob",["Promise","WALogger","WASmaxProfilePictureGetRPC","WAWebBackendErrors","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getProfilePic failed: ",":",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getProfilePic: "," ",", ",", ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getProfilePic failed with an invalid WID: ",""]);k=function(){return a};return a}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(a.isStatusV3()||a.isBroadcast()){d("WALogger").ERROR(k(),a.toString()).verbose();return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(401,"getProfilePic failed with an invalid WID: "+a.toString()))}var e=c.preview;e=e===void 0?!0:e;var f=c.invite;c=c.photoId;e=(yield d("WASmaxProfilePictureGetRPC").sendGetRPC({iqTarget:d("WAWebWidToJid").widToChatJid(a),pictureType:e?"preview":"image",pictureId:c!=null?String(c):void 0,pictureQuery:"url",pictureInvite:f}));switch(e.name){case"GetResponseSuccessPictureURL":c=e.value;f=c.pictureId;var g=c.pictureType,l=c.pictureUrl,m=c.pictureDirectPath;c=c.pictureHash;d("WALogger").DEV(j(),a.toString(),f,g,l);return{tag:f,type:g,eurl:l,directPath:m,filehash:c};case"GetResponseError":a=e.value.errorProfilePictureGetErrors.value;d("WALogger").DEV(i(),a.code,a.text);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a.code),a.text));case"GetResponseSuccessNoData":case"GetResponseSuccessPictureBlob":return(h||(h=b("Promise"))).reject(e.value.type)}});return l.apply(this,arguments)}g.getProfilePic=a}),98);
__d("WAWebSendProfilePictureJob",["Promise","WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebCommsWapMd","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new(c("WADeprecatedWapParser"))("photoResponseParser",function(a){a.assertAttr("type","result");if(a.hasChild("picture")){a=a.child("picture");return{id:a.attrInt("id")}}return{id:null}});function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=(yield d("WADeprecatedSendIq").deprecatedSendIq(d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,target:c("WAWebWid").isGroup(a)?d("WAWebCommsWapMd").CHAT_JID(a):d("WAWap").DROP_ATTR,type:"set",xmlns:"w:profile:picture",id:d("WAWap").generateId()},e?d("WAWap").wap("picture",{type:"image"},e):null),i));return!a.success?(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)):{id:a.result.id}});return j.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebContactProfilePicThumbBridge",["Promise","WABase64","WAFilteredCatch","WALogger","WAWebABProps","WAWebBackendErrors","WAWebChangeProfilePicThumb","WAWebDBBulkPersistProfilePic","WAWebEventsWaitForOfflineDeliveryEnd","WAWebFetchCommunityProfilePicAction","WAWebFetchNewsletterProfilePicAction","WAWebGetProfilePicJob","WAWebMiscGatingUtils","WAWebProfilePicConstants","WAWebSendProfilePictureJob","WAWebURLUtils","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["persistProfilePicToDB failed with error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["persistProfilePicToDB failed with error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["profilePicFind failed with serverCode: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["persistProfilePicToDB failed with error ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumb:resyncPictures error - ",", ",""]);m=function(){return a};return a}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c("WAWebSendProfilePictureJob")(a,null).then(function(){return{status:200}});b=(yield b);d("WAWebChangeProfilePicThumb").changeProfilePicThumb(a,d("WAWebProfilePicConstants").ProfilePicCommand.Remove);return b});return n.apply(this,arguments)}function e(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e=c("WAWebURLUtils").parseDataURL(f).data;f=d("WABase64").decodeB64(e);e=c("WAWebSendProfilePictureJob")(a,f).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebGetProfilePicJob").getProfilePic(a,{preview:!1}));return{tag:b.tag,eurl:b.eurl,fullDirectPath:b.directPath,filehash:b.filehash,status:200}}));f=(yield e);d("WAWebChangeProfilePicThumb").changeProfilePicThumb(a,d("WAWebProfilePicConstants").ProfilePicCommand.Set);return f});return o.apply(this,arguments)}function p(a,b){return{id:a.toString(),eurl:(a=b==null?void 0:b.eurl)!=null?a:null,previewEurl:(a=b==null?void 0:b.previewEurl)!=null?a:null,tag:(a=b==null?void 0:b.tag)!=null?a:null,previewDirectPath:(a=b==null?void 0:b.previewDirectPath)!=null?a:null,fullDirectPath:(a=b==null?void 0:b.fullDirectPath)!=null?a:null,filehash:(a=b==null?void 0:b.filehash)!=null?a:null,timestamp:Date.now()}}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=p(a,b);yield d("WAWebDBBulkPersistProfilePic").persistProfilePicBatched(a)});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(h||(h=b("Promise"))).all([d("WAWebGetProfilePicJob").getProfilePic(a,babelHelpers["extends"]({},c,{preview:!1})),d("WAWebGetProfilePicJob").getProfilePic(a,babelHelpers["extends"]({},c,{preview:!0}))]).then(function(a){var b=a[0];a=a[1];var c={eurl:b.eurl,tag:b.tag,previewEurl:a.eurl,previewDirectPath:a.directPath,fullDirectPath:b.directPath};a=(a=a.filehash)!=null?a:b.filehash;a!=null&&(c.filehash=a);return c});try{var e=(yield c);q(a,e)["catch"](function(a){d("WALogger").WARN(l(),a.message).devConsole(a)});w(a,e.eurl)}catch(b){w(a),yield u(a,b)}return c});return t.apply(this,arguments)}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError){b=b.status;b===500||b===501||b===503?d("WALogger").WARN(k(),b):b===404?yield q(a):b===401&&!a.isGroup()&&(yield q(a))}});return v.apply(this,arguments)}function w(a,b){if(d("WAWebMiscGatingUtils").screenLockFeatureSupported()&&a.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser())){d("WAWebUserPrefsMultiDevice").setCachedProfilePicEURL((a=b)!=null?a:"")}}function f(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=(yield s(a.id));return{id:a.id,eurl:b.eurl,tag:b.tag,previewEurl:b.previewEurl,previewDirectPath:b.previewDirectPath,fullDirectPath:b.fullDirectPath,filehash:b.filehash,stale:!1,eurlStale:!1,timestamp:Date.now()}}catch(b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError)switch(b.status){case 401:case 404:return{tag:"",id:a.id,stale:!1,eurlStale:!1,timestamp:Date.now()};default:d("WALogger").WARN(m(),b.status,b.message);return{id:a.id,stale:!1,eurlStale:!1,timestamp:Date.now()}}throw b}});return function(b){return a.apply(this,arguments)}}()))}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){try{d("WAWebABProps").getABPropConfigValue("web_delay_pp_until_offline_complete_enabled")&&(yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd());if(a.isNewsletter()){var e=(yield d("WAWebFetchNewsletterProfilePicAction").fetchNewsletterProfilePic(d("WAWebWidFactory").toNewsletterWid(a)));q(a,e)["catch"](function(a){d("WALogger").WARN(j(),a.message).devConsole(a)});return e}if(c!=null){e=(yield d("WAWebFetchCommunityProfilePicAction").fetchCommunityProfilePic(a,c));q(a,e)["catch"](function(a){d("WALogger").WARN(i(),a.message).devConsole(a)});return e}c=(yield s(a));e=babelHelpers["extends"]({},c,{id:a,timestamp:Date.now(),eurlStale:!1,stale:!1});return e}catch(c){return d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(c){var d={id:a};switch(c.status){case 401:case 404:d.tag="";d.timestamp=Date.now();d.eurlStale=!1;d.stale=!1;break;case 423:d.stale=!0;break;case 429:d.stale=!0;break;default:d.eurlStale=!1;break}return(h||(h=b("Promise"))).resolve(d)})(c)}});return y.apply(this,arguments)}g.requestDeletePicture=a;g.sendSetPicture=e;g.mapProfilePictureToProfilePicThumbRowType=p;g.persistProfilePicToDB=q;g.profilePicFind=s;g.profilePicResync=f;g.requestProfilePicFromServer=x}),98);
__d("WAWebMexFetchAboutStatusJob",["Promise","WALogger","WAWebMexClient","WAWebMexFetchAboutStatusJobQuery.graphql","WAWebMexRelayEnvironmentV2","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][about_status] empty return list"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][about_status] this method should only take user wid, instead it received: ",""]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("WAWebWid").isWid(a)||!a.isUser()){d("WALogger").ERROR(k(),a).tags("mex","about_status").devConsole({wid:a}).sendLogs("mex-about-status-wrong-wid");return(i||(i=b("Promise"))).resolve({id:a})}var e=h!==void 0?h:h=b("WAWebMexFetchAboutStatusJobQuery.graphql"),f={user_id:a.user};try{e=(yield d("WAWebMexClient").fetchQuery(e,f));f=(f=e.xwa2_users_updates_since)==null?void 0:f[0];f==null&&d("WALogger").ERROR(j()).tags("mex","about_status").devConsole({response:e}).sendLogs("mex-about-status-empty-return-list");e=f==null?void 0:(e=f.updates)==null?void 0:(f=e[0])==null?void 0:f.text;return{id:a,status:e}}catch(b){if(b instanceof d("WAWebMexRelayEnvironmentV2").MexIqError)return{id:a,isIQError:!0,error:{errorCode:b.code,errorText:b.message}};if(b instanceof d("WAWebMexRelayEnvironmentV2").MexFatalExtensionError)return{id:a,isIQError:!1,error:{errorCode:b.error.extensions.error_code,errorText:b.error.message}};throw b}});return l.apply(this,arguments)}g.mexGetAbout=a}),98);
__d("WAWebGetAboutQueryJob",["Promise","WALogger","WAWebMexFetchAboutStatusJob","WAWebUsync","WAWebUsyncUser","WAWebWid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getAbout: failed "," : ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getAbout: this method should only take user wid, instead it received: ",""]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isLid()){var b,c=(yield d("WAWebMexFetchAboutStatusJob").mexGetAbout(a));return((b=c.error)==null?void 0:b.errorCode)===401?{id:a,status:""}:c}return l(a)});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("WAWebWid").isWid(a)||!a.isUser()){d("WALogger").WARN(j(),a);return(h||(h=b("Promise"))).resolve({id:a})}var e=new(d("WAWebUsync").USyncQuery)().withContext("interactive").withMode("query").withStatusProtocol().withUser(new(d("WAWebUsyncUser").USyncUser)().withId(a));e=(yield e.execute());if(e.error.all||e.error.status){var f=e.error.all||e.error.status;d("WALogger").WARN(i(),f.errorCode,f.errorText);return{id:a,error:f}}f=e.list;return!f.length?(h||(h=b("Promise"))).reject(c("err")("no status data returned for user")):{id:a,status:f[0].status}});return m.apply(this,arguments)}g.getAbout=a}),98);
__d("WAWebContactStatusBridge",["WALogger","WAWebAck","WAWebApiStatusV3","WAWebGetAboutQueryJob","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebSendReadReceiptJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getStatus: failed "," : ",""]);h=function(){return a};return a}function a(a){return d("WAWebGetAboutQueryJob").getAbout(a).then(function(a){if(a.error){d("WALogger").WARN(h(),a.error.errorCode,a.error.errorText);return{id:a.id,stale:!0,status:""}}return{id:a.id,status:a.status}})}function c(a){return d("WAWebPersistedJobManager").getJobManager().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.setAbout(a))}function e(){return d("WAWebApiStatusV3").getAllStatuses()}function f(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.id;try{yield d("WAWebSendReadReceiptJob").markStatusRead(c,b);a.ack=d("WAWebAck").ACK.READ;return!0}catch(a){return!1}});return i.apply(this,arguments)}g.getStatus=a;g.setMyStatus=c;g.queryStatusAll=e;g.sendReadStatus=f}),98);
__d("WAWebRequestMediaReuploadBridge",["WAWebProtobufsMmsRetry.pb","WAWebRequestMediaReuploadManager"],(function(a,b,c,d,e,f,g){function h(a){if(a!=null)switch(a){case d("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.SUCCESS:return 200;case d("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.NOT_FOUND:case d("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.DECRYPTION_ERROR:return 404;case d("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.GENERAL_ERROR:return 500}return 500}function a(a){return d("WAWebRequestMediaReuploadManager").RequestMediaReuploadManager.requestMediaReupload(a).then(function(a){var b=a.result;a=a.directPath;return{status:h(b),directPath:a,isMD:!0}})}g["default"]=a}),98);
__d("WAWebDBUpdateMessageTable",["WALogger","WAWebSchemaMessage"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMessageTable: failed to update in storage"]);h=function(){return a};return a}function a(a,b){return d("WAWebSchemaMessage").getMessageTable().merge(a.toString(),b)["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("updateMessageTable failed");throw a})}g.updateMessageTable=a}),98);
__d("WAWebMsgReactionsBridge",["Promise","WALogger","WAWebAck","WAWebDBGetReactions","WAWebDBUpdateMessageTable","WAWebMsgCollection","WAWebMsgKey","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getReactions: failed with error: "," message: ",""]);i=function(){return a};return a}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=d("WAWebMsgCollection").MsgCollection.get(a);if(a&&a.hasReaction!==c){c={hasReaction:c};yield d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,c);a.set(c)}return(h||(h=b("Promise"))).resolve()});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;try{b=(yield d("WAWebDBGetReactions").getReactions(a.id.toString()))}catch(a){d("WALogger").ERROR(i(),a.name,a.message).verbose().devConsole(a).sendLogs("getReactions failed");throw a}var e=b.reactions.map(function(a){var b=a.senders.map(function(a){return babelHelpers["extends"]({},a,{id:c("WAWebMsgKey").fromString(a.msgKey),isSendFailure:d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid)&&a.ack===d("WAWebAck").ACK.CLOCK})});return babelHelpers["extends"]({},a,{hasReactionByMe:a.hasReactionByMe,id:a.aggregateEmoji,senders:b})}),f=e.length>0;yield j(a.id.toString(),f);return babelHelpers["extends"]({},b,{id:a.id,reactions:e})});return l.apply(this,arguments)}g.updateHasReactionInParent=j;g.sendQueryReactions=a}),98);
__d("WAWebWamEnumMessageBizType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_BIZ_MSG:0,API_MARKETING:1,API_UTILITY:2,OTHER_API_BIZ_MSG:3,SMB_BIZ_MSG:4});f.MESSAGE_BIZ_TYPE=a}),66);
__d("WAWebForwardSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumMediaType","WAWebWamEnumMessageBizType","WAWebWamEnumMessageType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ForwardSend:[1728,{disappearingChatInitiator:[21,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],e2eCiphertextType:[12,d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[11,a.TYPES.INTEGER],ephemeralityDuration:[18,a.TYPES.INTEGER],ephemeralityInitiator:[24,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[25,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],fastForwardEnabled:[5,a.TYPES.BOOLEAN],isForwardedForward:[22,a.TYPES.BOOLEAN],isFrequentlyForwarded:[14,a.TYPES.BOOLEAN],mediaCaptionPresent:[10,a.TYPES.BOOLEAN],messageBizType:[26,d("WAWebWamEnumMessageBizType").MESSAGE_BIZ_TYPE],messageForwardAgeT:[4,a.TYPES.TIMER],messageIsFanout:[6,a.TYPES.BOOLEAN],messageIsFastForward:[3,a.TYPES.BOOLEAN],messageIsInternational:[9,a.TYPES.BOOLEAN],messageMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendT:[13,a.TYPES.TIMER],messageType:[1,d("WAWebWamEnumMessageType").MESSAGE_TYPE],receiverDefaultDisappearingDuration:[20,a.TYPES.INTEGER],resendCount:[8,a.TYPES.INTEGER],retryCount:[7,a.TYPES.INTEGER],senderDefaultDisappearingDuration:[19,a.TYPES.INTEGER],typeOfGroup:[23,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM],wouldBeFrequentlyForwardedAt3:[16,a.TYPES.BOOLEAN],wouldBeFrequentlyForwardedAt4:[17,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{ForwardSend:[]});g.ForwardSendWamEvent=b}),98);
__d("WAWebMsgUtilsBridge",["WATimeUtils","WAWebABProps","WAWebBackendApi","WAWebChatThreadLogging","WAWebChatThreadLoggingUtils","WAWebContactCollection","WAWebEphemeralityResolver","WAWebForwardSendWamEvent","WAWebMiscGatingUtils","WAWebMsgGetters","WAWebMsgType","WAWebWamGroupMetadataMetricUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=Boolean(a.caption);d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&a.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&(b=a.isCaptionByUser);b={messageType:a.getWamMessageType(),messageMediaType:a.getWamMediaType(),mediaCaptionPresent:b,fastForwardEnabled:!0,messageIsFanout:!0,isFrequentlyForwarded:Boolean(d("WAWebMsgGetters").getIsFrequentlyForwarded(a)),isForwardedForward:Boolean(d("WAWebMsgGetters").getNumTimesForwarded(a)>1)};a.ephemeralDuration!=null&&(b.ephemeralityDuration=a.ephemeralDuration);if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){var c=d("WAWebMsgGetters").getWamDisappearingModeTrigger(a);c!=null&&(b.ephemeralityTriggerAction=c);c=d("WAWebMsgGetters").getWamDisappearingModeInitiatedByMe(a);c!=null&&(b.ephemeralityInitiator=c)}if(!d("WAWebMsgGetters").getIsGroupMsg(a)){c=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(d("WAWebContactCollection").ContactCollection.getMeContact());c!=null&&(b.senderDefaultDisappearingDuration=c);c=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(d("WAWebContactCollection").ContactCollection.get(a.to));c!=null&&(b.receiverDefaultDisappearingDuration=c)}c=a.getWamDisappearingModeInitiator();c!=null&&(b.disappearingChatInitiator=c);c=(yield d("WAWebWamGroupMetadataMetricUtils").getGroupTypeFromChatWid(a.to));c!=null&&(b.typeOfGroup=c);return new(d("WAWebForwardSendWamEvent").ForwardSendWamEvent)(b)});return h.apply(this,arguments)}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;return((b=a.quotedMsg)==null?void 0:b.type)!==d("WAWebMsgType").MSG_TYPE.PRODUCT||!d("WAWebMsgGetters").getIsSentByMe(a)?!1:d("WAWebBackendApi").frontendSendAndReceive("isMessageSentToBusiness",{msgKey:a.id})});return j.apply(this,arguments)}function c(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebChatThreadLoggingUtils").shouldIncrementMsgSendAndReceive(a))return;d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"msgSend",chatId:a.id.remote,ts:d("WATimeUtils").unixTime(),isViewOnce:Boolean(a.isViewOnce),isReaction:d("WAWebMsgGetters").getIsReaction(a),isForwarded:d("WAWebMsgGetters").getIsForwarded(a),isCommerceMessage:d("WAWebChatThreadLoggingUtils").isCommerceMessage(a),isPdpInquiry:yield i(a),isReply:d("WAWebMsgGetters").getIsReply(a),isEdit:d("WAWebMsgGetters").getIsEditProtocolMsg(a),isBot:d("WAWebMsgGetters").getIsBotQuery(a)}])});return k.apply(this,arguments)}function e(a){a.markMessageSendT(),a.commit()}g.createMessageForwardMetric=a;g.logMessageSendForChatThreadLogging=c;g.logMessageMetric=e}),98);
__d("WAWebSendMsgRecordBridge",["WALogger","WAWebAck","WAWebAddOnsUpdateSendStatesAction","WAWebDBUpdateMessageTable","WAWebHandleMsgError","WAWebMsgUtilsBridge","WAWebSendMsgJob","WAWebSendMsgTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendMsgRecord: MD send failure, msg: ",""]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;a.isForwarded&&(c=d("WAWebMsgUtilsBridge").createMessageForwardMetric(a));try{b=(yield d("WAWebSendMsgJob").encryptAndSendMsg({type:d("WAWebSendMsgTypes").SendMessageRecordType.Message,data:a},b));c&&c.then(d("WAWebMsgUtilsBridge").logMessageMetric);if(b.error!=null)throw new(d("WAWebHandleMsgError").MessageSentAckError)(b.error);return{t:parseInt(b.t,10),count:b.count}}catch(c){d("WALogger").WARN(h(),a.id.toString()).tags("messaging").devConsole(a.type);b={isSendFailure:!0};c instanceof d("WAWebHandleMsgError").MessageSentAckError&&(b=babelHelpers["extends"]({},b,{ack:d("WAWebAck").ACK.FAILED}));d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,b);a.set(b);d("WAWebAddOnsUpdateSendStatesAction").updateAddOnSendStatesForMsgAction(a,b);throw c}});return i.apply(this,arguments)}g.sendMsgRecord=a}),98);
__d("WAWebDBMessageFindLocal",["Promise","WAFilteredCatch","WALogger","WAWebDBGetStarredMessagesForChat","WAWebDBMessageSerialization","WAWebDBMessageStoreUtils","WAWebDBMessageUtils","WAWebFtsClient","WAWebMsgKey","WAWebSchemaMessage","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Anchor message "," does not exist in message table"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Anchor message "," does not exist in message table"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Anchor message "," does not exist in message table"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Message query type "," not implemented."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["msgFindQuery: ",", ",""]);m=function(){return a};return a}var n=20,o=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NoAnchorMessageError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,e){d("WALogger").DEV(m(),e,a);if(e.label!=null)return(h||(h=b("Promise"))).resolve([]);if(a==="before")return s(e,e.count)["catch"](d("WAFilteredCatch").filteredCatch(o,function(){return{status:404}}));else if(a==="after")return u(e,e.count)["catch"](d("WAFilteredCatch").filteredCatch(o,function(){return{status:404}}));else if(a==="star"){var f=e.id==null?void 0:new(c("WAWebMsgKey"))(e);return e.chat!=null?d("WAWebDBGetStarredMessagesForChat").getStarredMessagesForChat(e.chat,e.count,f):r(e.count,f)}else if(a==="search"){f={};e.remote&&(f.remote=e.remote.toString());e.count&&e.page>=0&&(f.limit=e.count,f.page=e.page);return d("WAWebFtsClient").ftsClient.search(e.searchTerm,f)}else if(a==="media"){var g=e.remote,i=e.id==null?void 0:new(c("WAWebMsgKey"))(e);if(e.media==="document")return q(g,e.count,e.direction,"isDocMsg",i).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})});else if(e.media==="url")return q(g,e.count,e.direction,"hasLink",i).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})});return(h||(h=b("Promise"))).all(["isMediaMsg","isDocMsg","hasLink","isCarouselMsg"].map(function(a){return q(g,e.count,e.direction,a,i).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})})})).then(function(a){var b=a[0],c=a[1],d=a[2];a=a[3];a=[b,d,c,a].flat();return{docCount:c.length,linkCount:d.length,mediaCount:b.length,messages:a}})}d("WALogger").WARN(l(),a);return(h||(h=b("Promise"))).reject(c("err")("Message query type "+a+" not implemented."))}function e(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaMessage").getMessageTable().equals(["vcardWAids"],a.toString()).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})})});return p.apply(this,arguments)}function q(a,c,e,f,g){var i=g==null?(h||(h=b("Promise"))).resolve(void 0):d("WAWebSchemaMessage").getMessageTable().equals(["id"],g.toString());return i.then(function(b){if(g&&b!=null&&b.length===0){d("WALogger").WARN(k(),g&&g.toString());throw new o()}b=b==null?void 0:b[0];var h,i,j=!1;e==="before"?(h=d("WAWebDBMessageUtils").beginningOfChat(a),i=b==null?d("WAWebDBMessageUtils").endOfChat(a):d("WAWebDBMessageUtils").craftInternalId(a.toString(),d("WAWebDBMessageUtils").getInChatMsgId(b.internalId||"")),j=!0):(h=b==null?d("WAWebDBMessageUtils").beginningOfChat(a):d("WAWebDBMessageUtils").craftInternalId(a.toString(),d("WAWebDBMessageUtils").getInChatMsgId(b.internalId||"")),i=d("WAWebDBMessageUtils").endOfChat(a));return d("WAWebSchemaMessage").getMessageTable().between(["internalId",f],[h,0],[i,Infinity],{lowerInclusive:!1,upperInclusive:!1,limit:c,reverse:j})})}function r(a,c){return(h||(h=b("Promise"))).resolve().then(function(){if(c!=null)return d("WAWebSchemaMessage").getMessageTable().get(c.toString())}).then(function(b){b=b==null?Infinity:b.isStarred;var c=0;return d("WAWebSchemaMessage").getMessageTable().between(["isStarred"],c,b,{lowerInclusive:!1,upperInclusive:!1,reverse:!0,limit:a}).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})})})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e===void 0&&(e=n);if(!a.remote)return(h||(h=b("Promise"))).resolve([]);var f=a.remote.toString(),g=void 0;if(a instanceof c("WAWebMsgKey")){var j=(yield d("WAWebSchemaMessage").getMessageTable().equals(["id"],a.toString()));if(j.length===0){d("WALogger").WARN(i(),a.toString());throw new o()}g=j[0]}j=d("WAWebDBMessageUtils").beginningOfChat(a.remote);var k=d("WAWebDBMessageUtils").endOfChat(a.remote);if(g){g=d("WAWebDBMessageUtils").getInChatMsgId(g.internalId||"");var l=Math.max(0,g-e);k=d("WAWebDBMessageUtils").craftInternalId(f,g);j=d("WAWebDBMessageUtils").craftInternalId(f,l)}g={lowerInclusive:!0,upperInclusive:!1};j=d("WAWebDBMessageUtils").beginningOfChat(a.remote);f=(yield d("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(j,k,babelHelpers["extends"]({},g,{reverse:!0}),e));return f.reverse().map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})});return t.apply(this,arguments)}function u(a,e){e===void 0&&(e=n);if(a instanceof c("WAWebMsgKey")){var f=a.remote.toString();return d("WAWebSchemaMessage").getMessageTable().equals(["id"],a.toString()).then(function(b){if(b.length===0){d("WALogger").WARN(j(),a.toString());throw new o()}b=b[0];b=d("WAWebDBMessageUtils").getInChatMsgId(b.internalId||"");var c=b+e;b=d("WAWebDBMessageUtils").craftInternalId(f,b);c=d("WAWebDBMessageUtils").craftInternalId(f,c);var g={lowerInclusive:!1,upperInclusive:!0};c=d("WAWebDBMessageUtils").endOfChat(a.remote);return d("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(b,c,g,e).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})})})}return(h||(h=b("Promise"))).resolve([])}g.msgFindQuery=a;g.queryVcard=e;g.queryMessageType=q}),98);
__d("WAWebDBMessageRange",["Promise","WALogger","WALongInt","WANullthrows","WATimeUtils","WAWebDBMessageStoreUtils","WAWebDBMessageUtils","WAWebE2EProtoUtils","WAWebModelStorageUtils","WAWebMsgKey","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: error reporting logMaybeMillisecondTimestamp for ",": ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: large timestamp: "," returned a large timestamp: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: additionalMessages length: ",""]);k=function(){return a};return a}var l=1e3;function a(a){return d("WAWebSchemaMessage").getMessageTable().between(["messageRangeIndex"],d("WAWebDBMessageStoreUtils").beginningOfMessageRange(a,d("WAWebDBMessageUtils").MessagePropertyType.IncomingChatMessage),d("WAWebDBMessageStoreUtils").endOfMessageRange(a,d("WAWebDBMessageUtils").MessagePropertyType.IncomingChatMessage),{lowerInclusive:!0,reverse:!0,limit:1,shouldDecrypt:!1}).then(function(a){return d("WAWebDBMessageStoreUtils").extractC2STimestampFromMessageRangeIndex((a=a[0])==null?void 0:a.messageRangeIndex)})}function e(a){return d("WAWebSchemaMessage").getMessageTable().between(["messageRangeIndex"],d("WAWebDBMessageStoreUtils").beginningOfMessageRange(a,d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage),d("WAWebDBMessageStoreUtils").endOfMessageRange(a,d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage),{lowerInclusive:!0,reverse:!0,limit:1,shouldDecrypt:!1}).then(function(a){return d("WAWebDBMessageStoreUtils").extractC2STimestampFromMessageRangeIndex((a=a[0])==null?void 0:a.messageRangeIndex)})}function f(a){return d("WAWebSchemaMessage").getMessageTable().between(["messageRangeIndex"],d("WAWebDBMessageStoreUtils").beginningOfMessageRange(a,d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage),d("WAWebDBMessageStoreUtils").endOfMessageRange(a,d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage),{lowerInclusive:!0,reverse:!1,limit:1,shouldDecrypt:!1}).then(function(a){return d("WAWebDBMessageStoreUtils").extractC2STimestampFromMessageRangeIndex((a=a[0])==null?void 0:a.messageRangeIndex)})}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g,i,j=d("WAWebSchemaMessage").getMessageTable().between(["messageRangeIndex"],(g=d("WAWebDBMessageStoreUtils")).beginningOfMessageRange(a,(i=d("WAWebDBMessageUtils")).MessagePropertyType.Outgoing,e),g.endOfMessageRange(a,i.MessagePropertyType.Outgoing),{reverse:!0,shouldDecrypt:!1});e=d("WAWebSchemaMessage").getMessageTable().anyOf(["messageRangeIndex"],[g.beginningOfMessageRange(a,i.MessagePropertyType.IncomingChatMessage,e),g.beginningOfMessageRange(a,i.MessagePropertyType.Outgoing,e),g.beginningOfMessageRange(a,i.MessagePropertyType.Outgoing)],{reverse:!0,shouldDecrypt:!1});g=(yield (h||(h=b("Promise"))).all([j,e]).then(function(a){var b=a[0];a=a[1];var e=function(a){return a.ack!==-1&&!a.isSendFailure},g=function(a){return!((f==null?void 0:f.excludeStarred)&&a.isStarred)};b=b.concat(a).filter(e).filter(g);a=function(a){var b=c("WAWebMsgKey").fromString(a.id);a=(a=d("WAWebDBMessageStoreUtils").extractC2STimestampFromMessageRangeIndex(a.messageRangeIndex))!=null?a:void 0;b={key:d("WAWebE2EProtoUtils").msgKeyToProtobuf(b),timestamp:a};return b};return b.map(a)}));a=o(g,(f==null?void 0:f.limit)||l);i=a.messages;j=a.newLastMessageTimestamp;return{messages:i,newLastMessageTimestamp:j}});return n.apply(this,arguments)}function o(a,b){var e=[],f=[];a.forEach(function(a){a.timestamp!=null?e.push(a):f.push(a)});if(e.length<b)return{messages:a};a=e.sort(p).slice(0,b);b=a[a.length-1];w(b.timestamp,"smallestTimestampMessage");return{messages:a.concat(f),newLastMessageTimestamp:d("WALongInt").numberOrThrowIfTooLarge(c("WANullthrows")(b.timestamp))}}function p(a,b){a=[a,b].map(function(a){return d("WALongInt").numberOrThrowIfTooLarge(c("WANullthrows")(a.timestamp))});b=a[0];a=a[1];return a-b}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield d("WAWebSchemaMessage").getMessageTable().between(["messageRangeIndex"],d("WAWebDBMessageStoreUtils").beginningOfMessageRange(a,c),d("WAWebDBMessageStoreUtils").beginningOfMessageRange(a,c,d("WALongInt").numberOrThrowIfTooLarge(b)),{lowerInclusive:!0,upperInclusive:!0,shouldDecrypt:!1}));if((e==null?void 0:e.forceDeleteAllMessages)===!0)return a.map(function(a){return a.id});c===d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage&&(e==null?void 0:e.skipRecentSystemMessages)!==!1&&(a=a.filter(function(a){return!(d("WAWebDBMessageStoreUtils").isSecuritySensitiveMessage(a)&&a.t>d("WATimeUtils").unixTime()-d("WATimeUtils").DAY_SECONDS)}));(e==null?void 0:e.skipStarred)!==!1&&(a=a.filter(function(a){return a.isStarred===void 0}));c===d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage&&(a=a.filter(function(a){return!d("WAWebDBMessageStoreUtils").isInitialEncryptionMessage(a)}));if(c===d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage){var f;for(b=a.length-1;b>=0;b--)if(d("WAWebDBMessageStoreUtils").isBizBotDisclosureMessage(a[b])){f=a[b].id;break}f!=null&&(a=a.filter(function(a){return a.id!==f}))}return a.map(function(a){return a.id})});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.map(function(a){return d("WAWebE2EProtoUtils").protobufToMsgKey(c("WANullthrows")(a.key)).toString()});a=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a));var e=[];a.forEach(function(a){a!=null&&((b==null?void 0:b.skipStarred)!==!1&&a.isStarred!=null||e.push(a.id))});return e});return t.apply(this,arguments)}function u(a,c,e){var f=c.lastMessageTimestamp,g=c.lastSystemMessageTimestamp,i=c.messages;return d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var j;c=c[0];var k=[],l=[];f!=null&&(l.push(q(a,f,d("WAWebDBMessageUtils").MessagePropertyType.IncomingChatMessage,e)),l.push(q(a,f,d("WAWebDBMessageUtils").MessagePropertyType.Outgoing,e)));j=(j=g)!=null?j:f;j!=null&&l.push(q(a,j,d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage,e));l.push(s(i,e));j=(yield (h||(h=b("Promise"))).all(l));k=(l=k).concat.apply(l,j);var m=e==null?void 0:e.skipMessages;m&&(k=k.filter(function(a){return!m.has(a)}));yield c.bulkRemove(k);return k});return function(a){return c.apply(this,arguments)}}())}function v(a){var b=a.messages,c={messages:b,lastMessageTimestamp:a.lastMessageTimestamp};d("WALogger").LOG(k(),b.length);if(b.length>l){b=o(b,l);var e=b.messages;b=b.newLastMessageTimestamp;b!=null&&(c.lastMessageTimestamp=b,w(c.lastMessageTimestamp,"resultantRange"));c.messages=e}d("WALongInt").numberOrThrowIfTooLarge((b=a.lastSystemMessageTimestamp)!=null?b:0)>d("WALongInt").numberOrThrowIfTooLarge((e=c.lastMessageTimestamp)!=null?e:0)&&(c.lastSystemMessageTimestamp=a.lastSystemMessageTimestamp);return c}function w(a,b){try{var c;d("WALongInt").numberOrThrowIfTooLarge((c=a)!=null?c:0)/d("WATimeUtils").unixTime()>10&&d("WALogger").ERROR(j(),b,a).sendLogs("syncd: "+b+" returned a large timestamp")}catch(b){d("WALogger").ERROR(i(),a,b)}}var x={limitAdditionalMessages:o};g.getLastMessageTimestamp=a;g.getLastSystemMessageTimestamp=e;g.getFirstSystemMessageTimestamp=f;g.getAdditionalMessages=m;g.timestampComparison=p;g.deleteMessagesInMessageRange=u;g.fixMessageRange=v;g.logMaybeMillisecondTimestamp=w;g._test=x}),98);
__d("WAWebDBMessageStoreUtils",["WALogger","WAWebABProps","WAWebAck","WAWebApiMessageInfoStore","WAWebBotGating","WAWebDBAddOnProviders","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebFutureproofReparseMsgsAction","WAWebMiscGatingUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateMsgAck: storing ack updates ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryChatVisibleMessageHelper: starting process "," futureproofedMessages"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryChatVisibleMessageHelper: took ",", visit ",", visiable ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryChatVisibleMessageHelper: visibleMsgsCount exceeds the threshold"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] getKeyMsgsFromChatHistory: ","ms, chatId: ",", isActiveChat: ",", count: ",", chatUnread: ",", unreadMsgCounter: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] getKeyMsgsFromChatHistory: Exceeded limit "," to find a non futureproof reaction message"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgMayNeedAckUpdate: skip update for history group message ",""]);n=function(){return a};return a}var o=10,p=1e9;function q(a){a=a.toString(16);return(a.length-1).toString(16)+a}function a(a){if(a){a=a.split("_")[2];return a?d("WAWebDBMessageUtils").undoOrderPreservingHex(a):null}return null}function e(a,b,c){c=c!=null?q(c):"";return a.toString()+"_"+b+"_"+c}function f(a,b){return a.toString()+"_"+b+"_g"}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],a,b,c));b=a.filter(function(a){return w(a)});yield x(b);return b});return s.apply(this,arguments)}function t(a,b,c,d,e){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f===void 0&&(f=[]);c.limit;c=babelHelpers.objectWithoutPropertiesLoose(c,["limit"]);var g=d("WAWebABProps").getABPropConfigValue("web_init_chat_max_unread_message_count"),h=[],l=0,m=0,n=function(a){m++;if(e!=null&&l===e)return!0;if(!w(a,f))return!1;l++;l>g&&d("WALogger").WARN(k());return!1},o=self.performance.now();a=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],a,b,c,n));d("WALogger").DEV(j(),self.performance.now()-o,m,l);b=a.filter(function(a){if(v(a)){var b=d("WAWebDBMessageSerialization").messageFromDbRow(a),c=d("WAWebDBAddOnProviders").getAddOnProviderForFutureproofMsg(b);a.futureproofReparsed!==!0&&(d("WAWebMiscGatingUtils").futureproofReparsingNonAddOnsEnabled()&&!c||(c==null?void 0:c.canRenderInUi(b))&&!f.includes(a.id.toString()))&&h.push(a)}return!w(a,f)?!1:!0});h.length&&(d("WALogger").DEV(i(),h.length),d("WAWebFutureproofReparseMsgsAction").processFutureproof(h));yield x(b);return b});return u.apply(this,arguments)}function v(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN}function w(a,b){b===void 0&&(b=[]);var c=d("WAWebDBMessageSerialization").messageFromDbRow(a),e=C(a),f=d("WAWebDBAddOnProviders").getAddOnProviderForFutureproofMsg(c);if(e)return!1;if(v(a)&&a.futureproofReparsed===!0)return!1;if(f&&f.canRenderInUi(c)&&!b.includes(a.id.toString()))return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.DEBUG)return!1;return!d("WAWebBotGating").isBizBot1pEnabled()&&a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="biz_bot_1p_disclosure"?!1:!0}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=z(a);if(a.length===0)return;var b=(yield d("WAWebApiMessageInfoStore").getHighestMsgAcks(a.map(function(a){return c("WAWebMsgKey").from(a.id)}))),e=[];a.forEach(function(a){var c=a.ack,f=a.id,g=b.get(f);if(g==null)return;g>c&&(e.push({id:f,ack:g}),a.ack=g);e.length>0&&(d("WALogger").LOG(h(),JSON.stringify(e)).tags("message-store"),void d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(e))})});return y.apply(this,arguments)}function z(a){return a.filter(function(a){if(!d("WAWebMsgGetters").getIsUnreadType(a))return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT||a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN||a.ack<=d("WAWebAck").ACK.CLOCK)return!1;var b=c("WAWebMsgKey").fromString(a.id);if(!b.fromMe)return!1;if(b.remote.isGroup()&&(a.rowId!=null&&a.rowId<p||a.count==null)){d("WALogger").LOG(n(),a.id).tags("message-store");return!1}if(d("WAWebMsgGetters").getIsAckPlayable(a)){if(a.ack===d("WAWebAck").ACK.PLAYED)return!1}else if(a.ack===d("WAWebAck").ACK.READ)return!1;return!0})}function A(a,b){var c,e=self.performance.now(),f=d("WAWebABProps").getABPropConfigValue("web_init_chat_max_unread_message_count"),g,h=a.unreadCount,i=(c=a.unreadDividerOffset)!=null?c:0,j=void 0,k=void 0,n=void 0,p=0,q=[],r=0;c=function(c){p++;if(c.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL)return!1;var e=d("WAWebDBMessageSerialization").messageFromDbRow(c),l=C(c);if(l)return!1;if(v(c)){var s=d("WAWebDBAddOnProviders").getAddOnProviderForFutureproofMsg(e);if(c.futureproofReparsed===!0)return!1;if(d("WAWebMiscGatingUtils").futureproofReparsingNonAddOnsEnabled()&&!l&&!b)q.push(c);else if(s==null?void 0:s.canRenderInUi(e)){if(f!==0&&r>=f){n||(n=c.id);k||(d("WALogger").WARN(m(),f),k=c);return!0}b||q.push(c);r++;return!1}}n||(n=c.id);k||(k=c);!j&&!l&&c.botPluginReferenceIndex==null&&![d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION,d("WAWebMsgType").MSG_TYPE.PROTOCOL,d("WAWebMsgType").MSG_TYPE.DEBUG].includes(c.type)&&(j=c);if(!b&&(j!=null||p>o))return!0;if(h===0&&i>0)if(c.type===d("WAWebMsgType").MSG_TYPE.REVOKED){i-=1;if(i===0){g=c.id.toString();return!0}}else return!0;if((h===0&&i===0||f!==0&&a.unreadCount>=f)&&j)return!0;if(h>0&&d("WAWebMsgGetters").getIsUnreadType(c)){h-=1;if(h===0){g=c.id.toString();if(i===0)return!0}}return!1};return d("WAWebSchemaMessage").getMessageTable().between(["internalId"],a.id+"_/",a.id+"_g",{reverse:!0},c).then(function(){d("WALogger").DEV(l(),self.performance.now()-e,a.id,b,p,a.unreadCount,h);q.length&&d("WAWebFutureproofReparseMsgsAction").processFutureproof(q);return{anchor:g,previewMsg:j||k,lastReceivedKey:n}})}function B(a){return a.some(function(a){return a.type!==d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE})}function C(a){var b;return[(b=d("WAWebMsgType")).MSG_TYPE.REACTION,b.MSG_TYPE.REACTION_ENC,b.MSG_TYPE.KEEP_IN_CHAT,b.MSG_TYPE.POLL_UPDATE,b.MSG_TYPE.PIN_MESSAGE].includes(a.type)}function D(a){var b=new Map([[d("WAWebMsgType").MSG_TYPE.GP2,["remove","add","ephemeral","invite","leave"]],[d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION,["encrypt","encrypt_now","e2e_identity_unavailable","identity","device","chat_psa"]],[d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,["change_number","masked_thread_created","cag_masked_thread_created","verified_initial_unknown","verified_initial_low","verified_initial_high","verified_transition_any_to_none","verified_transition_any_to_high","verified_transition_high_to_low","verified_transition_high_to_unknown","verified_transition_unknown_to_low","verified_transition_low_to_unknown","verified_transition_none_to_low","verified_transition_none_to_unknown","payment_transaction_status_update_failed","payment_transaction_status_update_refunded","payment_transaction_status_update_refund_failed","payment_transaction_status_receiver_pending_setup","payment_transaction_status_receiver_success_after_hiccup","payment_transaction_request_cancelled","payment_action_account_setup_reminder","payment_action_send_payment_reminder","payment_action_send_payment_invitation","payment_action_request_declined","payment_action_request_expired","biz_bot_1p_disclosure","biz_bot_3p_disclosure","bot_init"]]]);return((b=b.get(a.type))==null?void 0:b.includes(a.subtype))||!1}function E(a,b){return d("WAWebSchemaMessage").getMessageTable().between(["internalId"],a+"_/",a+"_g",{reverse:!0},b)}function F(a){return a.type===d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION&&a.subtype==="encrypt"||a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="biz_privacy_mode_init_fb"||a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="biz_me_account_type_is_hosted"||a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="biz_me_account_type_is_hosted_transition"||a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="biz_account_type_is_hosted"||a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="biz_account_type_changed_to_hosted"}function G(a){return a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&(a.subtype==="biz_bot_1p_disclosure"||a.subtype==="biz_bot_3p_disclosure")}g.extractC2STimestampFromMessageRangeIndex=a;g.beginningOfMessageRange=e;g.endOfMessageRange=f;g.queryChatMessageHelper=r;g.queryChatVisibleMessageHelper=t;g.isFutureproof=v;g.shouldRenderInUI=w;g.getKeyMsgsFromChatHistory=A;g.shouldCreateChatWithMsgs=B;g.isSecuritySensitiveMessage=D;g.getMessagesBefore=E;g.isInitialEncryptionMessage=F;g.isBizBotDisclosureMessage=G}),98);
__d("WAWebGroupUnreadMessageType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NEW_MESSAGE","PERSISTANCE_LOAD","HISTORYC_SYNC_CHUNK"]);f.UnreadMessageType=a}),66);
__d("WAWebUnreadMentionModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="unreadMention";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebDBProcessInitialHistorySyncMessage",["WALogger","WAPromiseReduce","WATimeUtils","WAWeb-dexie","WAWebApiChat","WAWebApiGroupInviteV4Store","WAWebChatCollection","WAWebDBEncryptMultipleMsgs","WAWebDBReportingTokenUtils","WAWebDBStoreMessage","WAWebDbEncryptionKey","WAWebFtsClient","WAWebGroupUnreadMessageType","WAWebLinkify","WAWebMessagingGatingUtils","WAWebMsgGetters","WAWebMsgType","WAWebSchemaFtsIndexingQueue","WAWebSchemaMessage","WAWebSchemaReportingToken","WAWebUnreadMentionModel","WAWebWidFactory","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] additional information: messages length: ",", ids: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Error storing MD initial sync messages with error "," after retry"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Retrying initial sync bulk add on error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Error storing MD initial sync messages with error "," with optimization"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeInitialSyncMessages failed with error: ",", message: ",", stack: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeInitialSyncMessages failed for msg: "," from ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] start storing initial sync messages."]);n=function(){return a};return a}var o=1e9;function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey();var e=0;c("lodash").forOwn(a,function(a){a=a.msgs;return e+=a.length});var f=new Map(),g=new Map();d("WALogger").LOG(n());var p=(yield d("WAPromiseReduce").promiseReduce(Object.keys(a),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){var e=b.nextRowId,g=o-a[c].msgs.length,h=(yield q(a[c].chatInfo.unreadCount||0,a[c].msgs)),i=h.pendingUnreadIds;h=h.unreadMentions;h.length&&f.set(c,h);h=[];for(var j=0;j<a[c].msgs.length;j++){var k=a[c].msgs[j];try{var n=(yield d("WAWebDBEncryptMultipleMsgs").processAndEncryptSingleMsgRow(k));e++;g++;k.isMdHistoryMsg=!0;n=d("WAWebDBStoreMessage").addMsgMetadataToMsgRow({msg:n[0],chatId:d("WAWebWidFactory").createWid(c).toString(),hasLink:d("WAWebLinkify").hasHttpLink(k),rowId:e,inChatMsgId:g,pendingReadReceipt:i.has(String(k.id))});h.push(n)}catch(a){if(a instanceof d("WAWebDBEncryptMultipleMsgs").DroppingMsgRowDueToLogout)throw a;d("WALogger").WARN(m(),(n=k.id)==null?void 0:n.id,(n=k.id)==null?void 0:n.remote).tags("message-store-optimized");d("WALogger").ERROR(l(),a.name,a.message,a.stack).tags("message-store-optimized").devConsole(a)}}return{nextRowId:e,messages:b.messages.concat(h)}});return function(a,b){return c.apply(this,arguments)}}(),{nextRowId:o-e,messages:[]}));p.messages.forEach(function(a){a.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE&&d("WAWebApiGroupInviteV4Store").persistGroupInviteV4Msg(a.id.toString(),{id:a.id.toString(),from:a.from.toString(),to:a.to.toString(),groupId:a.inviteGrp,expiration:parseInt(a.inviteCodeExp,10),expired:d("WATimeUtils").unixTime()>=parseInt(a.inviteCodeExp,10)})});if(d("WAWebMessagingGatingUtils").isReportingTagSyncingEnabled()){var r=p.messages.map(function(a){return d("WAWebDBReportingTokenUtils").msgToReportingTokenRow(a)}).filter(Boolean);void d("WAWebSchemaReportingToken").getReportingTokenTable().bulkCreateOrMerge(r)}f.size&&(f.forEach(function(a,b){var e,f=d("WAWebChatCollection").ChatCollection.get(d("WAWebWidFactory").createWid(b));a=a.map(function(a){var b=a.id;a=a.timestamp;return new(c("WAWebUnreadMentionModel"))({id:b,timestamp:a})});f=f==null?void 0:(f=f.groupMetadata)==null?void 0:f.unreadMentionMetadata;e=(e=f==null?void 0:f.pendingUnreadMentionCount)!=null?e:0;(f==null?void 0:f.pendingUnreadMentionCount)&&(f.pendingUnreadMentionCount=Math.max(e-a.length,0),g.set(b,f.pendingUnreadMentionCount));f==null?void 0:f.addUnreadMentions(a,d("WAWebGroupUnreadMessageType").UnreadMessageType.HISTORYC_SYNC_CHUNK)}),void d("WAWebApiChat").addUnreadMentionChat(f,g));return d("WAWebSchemaMessage").getMessageTable().bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(p.messages)["catch"](function(a){d("WALogger").WARN(k(),a);if(a instanceof c("WAWeb-dexie").BulkError||a instanceof c("WAWeb-dexie").ConstraintError){d("WALogger").LOG(j()).tags("history-sync-initial-sync-optimized");return d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(p.messages)}throw a}).then(function(){c("WAWeb-dexie").ignoreTransaction(function(){d("WAWebSchemaFtsIndexingQueue").getFtsIndexingQueueTable().bulkCreateOrReplace(p.messages.map(function(a){return{id:String(a.rowId)}})).then(function(){d("WAWebFtsClient").ftsClient.index()["catch"](function(){})})})})["catch"](function(a){d("WALogger").WARN(i(),a).devConsole(a);var b=p.messages.map(function(a){return a.id.toString()});d("WALogger").DEV(h(),b.length,b).devConsole(a)})});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a;var c=new Set(),e=[];for(var f=b.length-1;f>=0;f--){if(a<=0)break;var g=b[f],h=(yield d("WAWebDBStoreMessage").isPendingUnreadReceipt(g.id,g));if(h){a--;c.add(String(g.id));if(d("WAWebMsgGetters").getIsImportantMessage(g)){h={id:String(g.id),timestamp:g.t};e.push(h)}}}return{pendingUnreadIds:c,unreadMentions:e}});return r.apply(this,arguments)}g.storeInitialSyncMessages=a}),98);
__d("WAWebDBQueryAndRemoveMessageHistory",["WAWebDBMessageRange","WAWebDBMessageUtils","WAWebFtsClient","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebDBMessageUtils").beginningOfChat(a);a=d("WAWebDBMessageUtils").endOfChat(a);var c=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],b,a,{lowerInclusive:!1,upperInclusive:!1,limit:1}));if(c.length===0)return null;c=c[0].rowId;b=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],b,a,{lowerInclusive:!1,upperInclusive:!1,limit:1,reverse:!0}));if(b.length===0)return null;a=b[0].rowId;b=b[0].t;return c==null||a==null?null:{startRowId:c,endRowId:a,tsOfLastMessage:b}});return h.apply(this,arguments)}function c(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("WAWebDBMessageRange").deleteMessagesInMessageRange(a,b,c));d("WAWebFtsClient").ftsClient.purge(a)["catch"](function(){});return a});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebDBMessageUtils").beginningOfChat(a);a=d("WAWebDBMessageUtils").endOfChat(a);b=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],b,a,{lowerInclusive:!1,upperInclusive:!1,returnKeyType:"primary_key"}));yield d("WAWebSchemaMessage").getMessageTable().bulkRemove(b);return b});return j.apply(this,arguments)}g.getBoundsForChat=a;g.queryAndRemoveMessagesInMessageRange=c;g.queryAndRemoveMessageHistory=e}),98);
__d("WAWebMessageStore",["WAWebDBMessageDelete","WAWebDBMessageFindLocal","WAWebDBMsgUtils","WAWebDBProcessMessage"],(function(a,b,c,d,e,f){b=(a=importNamespace("WAWebDBProcessMessage")).DuplicateMessageError;c=a.storeMessages;d=a.starMessages;e=a.unstarMessages;var g=a.updateMessage;a=a.updateExistingMessages;var h=importNamespace("WAWebDBMessageFindLocal").msgFindQuery,i=importNamespace("WAWebDBMessageFindLocal").queryVcard,j=importNamespace("WAWebDBMsgUtils").getMsgByMsgKey,k=importNamespace("WAWebDBMsgUtils").getMsgsByMsgKey,l=importNamespace("WAWebDBMsgUtils").getMsgByMsgKeyMat,m=importNamespace("WAWebDBMessageDelete").removeMessagesFromHistory;f.DuplicateMessageError=b;f.storeMessages=c;f.starMessages=d;f.unstarMessages=e;f.updateMessage=g;f.updateExistingMessages=a;f.msgFindQuery=h;f.queryVcard=i;f.getMsgByMsgKey=j;f.getMsgsByMsgKey=k;f.getMsgByMsgKeyMat=l;f.removeMessagesFromHistory=m}),66);
__d("WAWebMexResponse",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.data=a,b!=null&&(this.errors=b)}var b=a.prototype;b.getError=function(a){var b=this;if(this.errors!=null)return this.errors.find(function(c){c=c.path;var d=b.data;if(d==null||typeof d!=="object")return!1;for(var e=0;e<c.length;e++){var f=c[e];d=d[f];if(d===a)return!0}})};return a}();f.MexResponse=a}),66);
__d("WAWebMexRelayClient",["WALogger","WAWebGraphQLServerError","WAWebMexExtensionError","WAWebMexRelayEnvironment","WAWebMexResponse","WAWebRelayClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX] RelayClient Error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX] RelayClient Error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX] RelayClient IQ Error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX] Response contains MexExtensionError"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX] RelayClient Result:"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX] RelayClient Query:"]);m=function(){return a};return a}function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){c===void 0&&(c=!0);e=e===void 0?{}:e;var f=e.eventLogger;e=babelHelpers.objectWithoutPropertiesLoose(e,["eventLogger"]);d("WALogger").DEV(m()).tags("GQL","MEX").devConsole({query:a,variables:b});var g=(yield d("WAWebMexRelayEnvironment").requireRelayRuntime());g=g.fetchQuery;try{g=(yield g(yield d("WAWebMexRelayEnvironment").getEnvironment(c),a,b,e).toPromise());f==null?void 0:f.success();c={};c.result=g;c.query=a;c.variables=b;d("WALogger").DEV(l()).tags("GQL","MEX").devConsole(c);return new(d("WAWebMexResponse").MexResponse)(g)}catch(b){e=b;if(e instanceof d("WAWebMexExtensionError").MexExtensionError){d("WALogger").DEV(k()).devConsole(e);return new(d("WAWebMexResponse").MexResponse)(e.data,e==null?void 0:e.errors)}if(e instanceof d("WAWebGraphQLServerError").GraphQLServerError){a=e.source.errors.find(function(a){return a.isIQError});a?(d("WALogger").ERROR(j()).tags("GQL","MEX").devConsole(e,e.source.errors),f==null?void 0:f.failure(e.source.errors)):d("WALogger").DEV(i()).tags("GQL","MEX").devConsole(e,e.source.errors)}else d("WALogger").DEV(h()).tags("GQL","MEX").devConsole(e);throw e}});return n.apply(this,arguments)}g.graphql=d("WAWebRelayClient").graphql;g.deprecatedFetchQuery=a}),98);
__d("WAWebMexFetchTextStatusListJob",["Promise","WALogger","WAWebGraphQLServerError","WAWebMexFetchTextStatusListJobQuery.graphql","WAWebMexRelayClient","WAWebTextStatusParseUtils","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][TEXT-STATUS] status fetch not allowed for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][TEXT-STATUS] text status error for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][TEXT-STATUS] fetched text status for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][TEXT-STATUS] this method should only take user wid, instead it received: ",""]);m=function(){return a};return a}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(!c("WAWebWid").isWid(a)||!a.isUser()){d("WALogger").LOG(m(),a);return(i||(i=b("Promise"))).resolve({id:a})}var f=h!==void 0?h:h=b("WAWebMexFetchTextStatusListJobQuery.graphql");e=d("WAWebTextStatusParseUtils").createTextStatusObjectForGetRequest({id:a,textStatusLastUpdateTime:e});e={input:[{jid:e.jid,last_update_time:e.last_update_time}]};try{f=(yield d("WAWebMexRelayClient").deprecatedFetchQuery(f,e));e=f.data.xwa2_text_status_list;var g=f.getError(e);if(g!=null)throw new(d("WAWebGraphQLServerError").GraphQLServerError)({errors:[{code:g.extensions.error_code,message:g.message,isIQError:!1}]});else{g=e[0];e=g==null?void 0:g.text;d("WALogger").LOG(l(),g.jid).tags("GQL","MEX").devConsole(e,f);e=d("WAWebTextStatusParseUtils").parseTextStatusServerResponse(g);return{id:e.id,text:e.textStatusString,emoji:e.textStatusEmoji,lastUpdateTime:e.textStatusLastUpdateTime,ephemeralDurationSeconds:e.textStatusEphemeralDuration}}}catch(b){if(b instanceof d("WAWebGraphQLServerError").GraphQLServerError){f=b.source.errors[0];f.code!==401?d("WALogger").ERROR(k(),a).tags("GQL","MEX").devConsole({e:b,gqlError:f}):d("WALogger").LOG(j(),a).tags("GQL","MEX").devConsole({gqlError:f});e={errorCode:f.code,errorText:(g=f.message)!=null?g:"Unknown MEX error"};return{id:a,error:e,isIQError:f.isIQError}}throw b}});return n.apply(this,arguments)}g.mexGetTextStatusList=a}),98);
__d("WAWebGetTextStatusQueryJob",["WALogger","WAWebMexExperiment","WAWebMexFetchTextStatusListJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getTextStatus:",""]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=new(d("WAWebMexExperiment").GraphQlPerfTracker)("text-status");c.start();c.toUseGraphQL();var e=200,f=200;b=(yield d("WAWebMexFetchTextStatusListJob").mexGetTextStatusList(a,b));var g=b.error;g!=null&&(b.isIQError===!0?(e=g.errorCode,f=-1):(e=200,f=g.errorCode));c.stop();c.logEvent({envelopeResponseStatus:e,payloadResponseStatus:f});d("WALogger").LOG(h(),a.toString()).devConsole(b);return b});return i.apply(this,arguments)}g.getTextStatus=a}),98);
__d("WAWebContactTextStatusBridge",["WALogger","WAWebGetTextStatusQueryJob","WAWebPersistedJobDefinitions","WAWebPersistedJobManager"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getTextStatus: failed "," : ",""]);h=function(){return a};return a}function a(a,b){return d("WAWebGetTextStatusQueryJob").getTextStatus(a,b).then(function(a){if(a.error){d("WALogger").WARN(h(),a.error.errorCode,a.error.errorText);return{id:a.id,error:a.error,text:""}}return{id:a.id,text:a.text,emoji:a.emoji,lastUpdateTime:a.lastUpdateTime,ephemeralDurationSeconds:a.ephemeralDurationSeconds,error:a.error}})}function b(a,b,c,e){return d("WAWebPersistedJobManager").getJobManager().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.setTextStatus(a,b,c,e))}g.getTextStatus=a;g.setTextStatus=b}),98);
__d("WAWebGetDisappearingModeJob",["Promise","WALogger","WAWebUsync","WAWebUsyncUser","WAWebWid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingMode: failed "," : ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingMode: this method should only take user wid, instead it received: ",""]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("WAWebWid").isWid(a)||!a.isUser()){d("WALogger").WARN(j(),a);return(h||(h=b("Promise"))).resolve({id:a})}var e=new(d("WAWebUsync").USyncQuery)().withContext("interactive").withMode("query").withDisappearingModeProtocol().withUser(new(d("WAWebUsyncUser").USyncUser)().withId(a));e=(yield e.execute());if(e.error.all||e.error.status){var f=e.error.all||e.error.status;d("WALogger").WARN(i(),f.errorCode,f.errorText);return{id:a,error:f}}f=e.list;(f.length===0||f[0].disappearing_mode==null)&&(h||(h=b("Promise"))).reject(c("err")("no disappearing_mode data returned for user"));e=f[0].disappearing_mode;f=e.duration;e=e.t;return{id:a,disappearingModeDuration:f,disappearingModeSettingTimestamp:e}});return k.apply(this,arguments)}g.getDisappearingMode=a}),98);
__d("WAWebPDFNTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({PDFN_ACCEPTED:"5"});b=Object.freeze({ACCEPTED:"ACCEPTED"});f.NOTICE_STAGES=a;f.NOTICE_STATUS=b}),66);
__d("WAWebTextStatusGatingUtils",["WAWebABProps","WAWebPrimaryFeatures"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebABProps").getABPropConfigValue("evolve_about_m1_receiver_enabled")}function a(){return h()&&d("WAWebABProps").getABPropConfigValue("evolve_about_m1_receiver_for_new_surfaces_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("web_evolve_about_send_enabled")&&d("WAWebPrimaryFeatures").primaryFeatureEnabled("text_status_creation_support")}g.receiveTextStatusEnabled=h;g.receiveTextStatusForNewSurfacesEnabled=a;g.sendTextStatusEnabled=b}),98);
__d("WAWebDBUpdateContactTable",["WAWebJidUtils","WAWebSchemaContact"],(function(a,b,c,d,e,f,g){function a(a,b){a=a.isLid()?d("WAWebJidUtils").toLidUserJid(a.user):d("WAWebJidUtils").toPhoneUserJid(a.user);return d("WAWebSchemaContact").getContactTable().merge(a,b)}g.updateContactTable=a}),98);
__d("WAWebUpdateDisappearingModeForContact",["WALogger","WAWebApiContact","WAWebBackendApi","WAWebDBUpdateContactTable","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDisappearingMode: Contact="," updated, new duration="," t=","."]);h=function(){return a};return a}function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=d("WAWebWidFactory").createUserWid(a.user,a.server);var e=(yield d("WAWebApiContact").getContactRecord(a)),f;if(a.isLid()){var g=d("WAWebApiContact").getPhoneNumber(a);g!=null&&(f=g)}if(e){g=e.disappearingModeSettingTimestamp;if(g==null&&c!==0||g!=null&&g<c){e={disappearingModeDuration:b,disappearingModeSettingTimestamp:c};yield d("WAWebDBUpdateContactTable").updateContactTable(a,e);d("WAWebBackendApi").frontendFireAndForget("updateDisappearingMode",babelHelpers["extends"]({},e,{contactId:a}));f&&(yield d("WAWebDBUpdateContactTable").updateContactTable(f,e),d("WAWebBackendApi").frontendFireAndForget("updateDisappearingMode",babelHelpers["extends"]({},e,{contactId:f})));d("WALogger").LOG(h(),a.toLogString(),b,c).tags("DM","DDM")}}});return i.apply(this,arguments)}g.updateDisappearingModeForContact=a}),98);
__d("WAWebTextStatusUtils",["WATimeUtils","WAWebTextStatusGatingUtils","fbs"],(function(a,b,c,d,e,f,g){var h=-1;f=5;var i=0,j=null,k=null,l=null,m=-1;function n(a,b,c,e,f){f=f===m||e!=null&&d("WATimeUtils").unixTime()<e;e=Boolean(a)||Boolean(b);a=c!==i;return a&&f&&e}function a(a,b,c,e,f){if(!d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled())return!1;if(c===h)return!1;return!n(a,b,c,e,f)?!1:!0}var o="",p=" ";function b(a){return a.status===void 0}function e(a){var b=c("fbs")._("__JHASH___HFqOsV3qQe__JHASH__").toString();return a.status!==o&&a.status!==void 0&&a.status!==p&&a.status!==b}g.TEXT_STATUS_NOT_FETCHED=h;g.SUGGESTIONS_MAX_COUNT=f;g.CLEAR_TEXT_STATUS_LAST_UPDATE_TIME_VAL=i;g.CLEAR_TEXT_STATUS_STRING_VAL=j;g.CLEAR_TEXT_STATUS_EMOJI_VAL=k;g.CLEAR_TEXT_STATUS_EPHEMERAL_DURATION_VAL=l;g.TEXT_STATUS_DURATION_INFINITE=m;g.hasTextStatusSet=n;g.shouldDisplayTextStatus=a;g.EMPTY_ABOUT=o;g.EMPTY_MIGRATED_ABOUT=p;g.isLegacyAboutNotFetched=b;g.hasCustomAboutSet=e}),226);
__d("WAWebUpdateTextStatusForContact",["WAWebApiContact","WAWebBackendApi","WAWebDBUpdateContactTable","WAWebTextStatusUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c,d,e){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){a=d("WAWebWidFactory").createUserWid(a.user,a.server);var g=(yield d("WAWebApiContact").getContactRecord(a)),h;if(a.isLid()){var i=d("WAWebApiContact").getPhoneNumber(a);i!=null&&(h=i)}if(g){i=g.textStatusLastUpdateTime;if(f==null||i!=null&&f!==d("WAWebTextStatusUtils").CLEAR_TEXT_STATUS_LAST_UPDATE_TIME_VAL&&f<i)return;var j;e!=null&&e>0&&f!==d("WAWebTextStatusUtils").CLEAR_TEXT_STATUS_LAST_UPDATE_TIME_VAL&&(j=Number(f)+Number(e));g={textStatusString:b,textStatusEmoji:c,textStatusEphemeralDuration:e,textStatusLastUpdateTime:f,textStatusExpiryTs:j};yield d("WAWebDBUpdateContactTable").updateContactTable(a,g);d("WAWebBackendApi").frontendFireAndForget("updateTextStatus",babelHelpers["extends"]({},g,{contactId:a}));h&&(yield d("WAWebDBUpdateContactTable").updateContactTable(h,g),d("WAWebBackendApi").frontendFireAndForget("updateTextStatus",babelHelpers["extends"]({},g,{contactId:h})))}});return h.apply(this,arguments)}g.updateTextStatusForContact=a}),98);
__d("WAWebHandleAccountSyncNotification",["Promise","WADeprecatedWapParser","WAJids","WALogger","WAWap","WAWebAccountSyncJob","WAWebAdvHandlerApi","WAWebApiPendingDeviceSync","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebBotGating","WAWebCmd","WAWebCommsWapMd","WAWebContactTextStatusBridge","WAWebGetAboutQueryJob","WAWebGetDisappearingModeJob","WAWebJidToWid","WAWebOfflineDeviceCache","WAWebOfflineHandler","WAWebPDFNTypes","WAWebProtobufsHistorySync.pb","WAWebRuntimeEnvironmentUtils","WAWebSetUsernameJob","WAWebSignalCommonUtils","WAWebSignalStoreApi","WAWebTextStatusGatingUtils","WAWebTextStatusParseUtils","WAWebUpdateDisappearingModeForContact","WAWebUpdateTextStatusForContact","WAWebUserDisclosureCollection","WAWebUserPrefsBot","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Trigger waitlist state update from account sync notification"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Receieved account sync notification for Ai Available"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["wid-is-not-self"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["getStatus failed for ",": failed "," : ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["getStatus failed for ",": failed "," : ",""]);o=function(){return a};return a}var p=function(a){var b=a.maybeChild("key-index-list");b=b==null?null:{ts:b.attrTime("ts"),signedKeyIndexBytes:b.hasContent()?b.contentBytes():null,expectedTs:b.hasAttr("expected_ts")?b.attrTime("expected_ts"):void 0};var c=a.mapChildrenWithTag("device",function(b){var c=b.attrDeviceJid("jid");if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&((c==null?void 0:c.endsWith("@hosted"))||(c==null?void 0:c.endsWith("@hosted.lid")))){c=(c=d("WAWebWidFactory").createHostedDeviceWid(c))==null?void 0:c.device;if(c==null)throw a.createParseError("invalid hosted device jid");if(c!==d("WAWebBizCoexUtils").HOSTED_DEVICE_ID)throw a.createParseError("invalid hosted device jid");return{id:c,keyIndex:b.hasAttr("key-index")?b.attrInt("key-index"):null,isHosted:!0}}return{id:(c=d("WAWebWidFactory").createWid(b.attrDeviceJid("jid")).device)!=null?c:d("WAJids").DEFAULT_DEVICE_ID,keyIndex:b.hasAttr("key-index")?b.attrInt("key-index"):null}});d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()||(c=c.filter(function(a){return a.id===d("WAWebBizCoexUtils").HOSTED_DEVICE_ID?!1:!0}));return c.length===0?null:{deviceList:c,keyIndex:b}},q=new(c("WADeprecatedWapParser"))("incomingAccountSyncNotification",function(a){a.assertTag("notification");var b={stanzaId:a.attrString("id"),ts:a.attrTime("t"),from:d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("from"))};if(a.hasChild("status")){var c=a.child("status");c=c.hasAttr("action")?c.attrString("action"):void 0;return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.STATUS,action:c},b)}else if(a.hasChild("text_status")){c=a.child("text_status");var e=c.hasAttr("action")?c.attrString("action"):void 0,f=c.hasAttr("text")?c.attrString("text"):void 0,g=c.hasChild("emoji")?c.child("emoji"):void 0;g=(g==null?void 0:g.hasAttr("content"))?g==null?void 0:g.attrString("content"):void 0;var h=c.hasAttr("ephemeral_duration_sec")?c.attrInt("ephemeral_duration_sec"):void 0;c=c.hasAttr("last_update_time")?c.attrString("last_update_time"):void 0;return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.TEXT_STATUS,action:e,text:f,emoji:g,ephemeralDurationSeconds:h,lastUpdateTime:c},b)}else if(a.hasChild("username")){e=[];if(d("WAWebUsernameGatingUtils").usernameSupported){f=a.child("username");g=(f==null?void 0:f.hasAttr("username"))?f.attrString("username"):void 0;e.push({userId:d("WAWebUserPrefsMeUser").getMeUser(),username:g})}return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.USERNAME,usernames:e},b)}else if(a.hasChild("privacy"))return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.PRIVACY},b);else if(a.hasChild("devices"))return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.DEVICES,devices:p(a.child("devices"))},b);else if(a.hasChild("blocklist")){h=a.child("blocklist");var i=[];d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&h.forEachChildWithTag("item",function(a){var b=a.maybeAttrString("username");a=d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid"));b!=null&&i.push({userId:a,username:b})});return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.BLOCKLIST,usernames:i},b)}else if(a.hasChild("picture"))return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.PICTURE},b);else if(a.hasChild("tos")){c=a.child("tos");var j=[];c.forEachChildWithTag("notice",function(a){var b=a.maybeAttrString("state")!=="false";a=a.attrString("id");j.push({id:a,state:b})});return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.TOS,notices:j},b)}else if(a.hasChild("disappearing_mode")){f=a.child("disappearing_mode");var k,l,m;f.hasAttr("action")?k=f.attrString("action"):(l=f.attrInt("duration"),m=f.attrInt("t"));return babelHelpers["extends"]({},b,{type:d("WAWebAccountSyncJob").AccountSyncType.DISAPPEARING_MODE,action:k,disappearingModeDuration:l,disappearingModeSettingTimestamp:m})}else if(a.hasChild("notice")){g=a.child("notice");return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.NOTICE,noticeId:g.attrString("id"),noticeStage:g.maybeAttrString("stage"),noticeVersion:g.maybeAttrString("version")},b)}else if(a.hasChild("user")){e=a.child("user");h=e.maybeAttrString("state")==="AI available";return babelHelpers["extends"]({type:d("WAWebAccountSyncJob").AccountSyncType.USER,isAiAvailable:h},b)}throw a.createParseError("notification type not supported")});function r(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMeUser").assertGetMe(),c=(yield d("WAWebGetAboutQueryJob").getAbout(a));if(c.error){d("WALogger").WARN(o(),a,c.error.errorCode,c.error.errorText);return(h||(h=b("Promise"))).reject(c.error.errorText)}c.status!==""&&(yield d("WAWebBackendApi").frontendSendAndReceive("setMyStatus",{status:c.status}))});return s.apply(this,arguments)}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMeUser").assertGetMe(),c=(yield d("WAWebContactTextStatusBridge").getTextStatus(a));if(c.error){d("WALogger").WARN(n(),a,c.error.errorCode,c.error.errorText);return(h||(h=b("Promise"))).reject(c.error.errorText)}a=c.id;var e=c.text,f=c.emoji,g=c.ephemeralDurationSeconds;c=c.lastUpdateTime;e=d("WAWebTextStatusParseUtils").parseTextStatusServerResponse({text:e,emoji:f!=null?{content:f}:null,ephemeral_duration_sec:g,last_update_time:c==null?void 0:c.toString(),jid:a.toJid()});return d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(e.id,e.textStatusString,e.textStatusEmoji,e.textStatusEphemeralDuration,e.textStatusLastUpdateTime)});return u.apply(this,arguments)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.wid;a=a.devices;var c=d("WAWebUserPrefsMeUser").getMaybeMeLidUser(),e={wid:b,devices:a};if(c==null)return[e];var f=d("WAWebUserPrefsMeUser").getMeUser();if(!b.isSameAccount(f)){d("WALogger").ERROR(m()).sendLogs("wid-is-not-self");return[e]}b=(yield d("WAWebSignalStoreApi").waSignalStore.bulkGetIdentity([d("WAWebSignalCommonUtils").createSignalAddress(f).toString(),d("WAWebSignalCommonUtils").createSignalAddress(c).toString()]));f=b[0];b=b[1];b==null&&f!=null&&(yield d("WAWebSignalStoreApi").waSignalStore.putIdentity(d("WAWebSignalCommonUtils").createSignalAddress(c).toString(),f));return[e,{wid:c,devices:a}]});return w.apply(this,arguments)}function a(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=q.parse(a);if(c.error){d("WALogger").DEV(l(),a.toString());d("WALogger").ERROR(k(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}a=c.success;c=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),to:d("WAWebCommsWapMd").JID(a.from),"class":"notification",type:"account_sync"});switch(a.type){case d("WAWebAccountSyncJob").AccountSyncType.STATUS:yield r();break;case d("WAWebAccountSyncJob").AccountSyncType.USERNAME:d("WAWebUsernameGatingUtils").usernameSupported()&&a.usernames!=null&&(yield d("WAWebSetUsernameJob").setUsernamesJob(a.usernames));break;case d("WAWebAccountSyncJob").AccountSyncType.TEXT_STATUS:if(!d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled())break;if(a.action==="modify")yield t();else{var e=a.text,f=a.emoji,g=a.ephemeralDurationSeconds,m=a.lastUpdateTime,n=d("WAWebWidFactory").toUserWid(a.from);yield d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(n,e,f,g,m!=null?Number(m):void 0)}break;case d("WAWebAccountSyncJob").AccountSyncType.DEVICES:if(!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()){d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(a.from.toString(),c);return"NO_ACK"}else if(d("WAWebOfflineHandler").OfflineMessageHandler.isResumeOnSocketDisconnectInProgress()){yield d("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync([a.from.toString()]);return c}n=a.devices;if(n){e=(yield v({wid:d("WAWebWidFactory").toUserWid(a.from),devices:n}));yield d("WAWebAdvHandlerApi").handleADVDeviceSyncResult(e)}else yield d("WAWebAccountSyncJob").getDevices("notification");break;case d("WAWebAccountSyncJob").AccountSyncType.PICTURE:yield d("WAWebAccountSyncJob").getAndUpdateProfilePicture();break;case d("WAWebAccountSyncJob").AccountSyncType.PRIVACY:d("WAWebCmd").Cmd.onAccountSyncForPrivacy(yield d("WAWebAccountSyncJob").updatePrivacySettings());break;case d("WAWebAccountSyncJob").AccountSyncType.BLOCKLIST:d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&a.usernames!=null&&(yield d("WAWebSetUsernameJob").setUsernamesJob(a.usernames));d("WAWebAccountSyncJob").updateBlocklist();break;case d("WAWebAccountSyncJob").AccountSyncType.TOS:a.notices&&d("WAWebAccountSyncJob").updateTosState(a.notices);break;case d("WAWebAccountSyncJob").AccountSyncType.DISAPPEARING_MODE:f=a.action;g=a.from;m=a.disappearingModeDuration;n=a.disappearingModeSettingTimestamp;if(f==="modify"){e=(yield d("WAWebGetDisappearingModeJob").getDisappearingMode(g));e.error==null&&e.disappearingModeDuration!=null&&e.disappearingModeSettingTimestamp!=null&&(m=e.disappearingModeDuration,n=e.disappearingModeSettingTimestamp)}m!=null&&n!=null&&(yield d("WAWebUpdateDisappearingModeForContact").updateDisappearingModeForContact(g,m,n));break;case d("WAWebAccountSyncJob").AccountSyncType.NOTICE:f=a.noticeId;e=a.noticeStage;g=a.noticeVersion;f!=null&&f!==""&&e!=null&&g!=null&&(yield d("WAWebUserDisclosureCollection").UserDisclosureCollection.updateNoticeStage(f,e===d("WAWebPDFNTypes").NOTICE_STAGES.PDFN_ACCEPTED,g));break;case d("WAWebAccountSyncJob").AccountSyncType.USER:a.isAiAvailable===!0&&(d("WALogger").LOG(j()),yield d("WAWebUserPrefsBot").setBotWaitlistState(d("WAWebProtobufsHistorySync.pb").HistorySync$BotAIWaitListState.AI_AVAILABLE),!d("WAWebRuntimeEnvironmentUtils").isWorker()&&d("WAWebBotGating").isBotEnabled()&&(d("WALogger").LOG(i()),d("WAWebCmd").Cmd.botWaitlistStateUpdated()));break}return c});return x.apply(this,arguments)}g.getAndUpdateStatus=r;g.updateMyTextStatusFromServer=t;g.getDeviceSyncInputs=v;g.handleAccountSyncNotification=a}),98);
__d("WAWebDBProcessRecentAndFullHistorySyncMessage",["WALogger","WATimeUtils","WAWebApiChat","WAWebApiGroupInviteV4Store","WAWebApiOrphanRevoke","WAWebBackendApi","WAWebDBEncryptMultipleMsgs","WAWebDBStoreEncryptedMsgs","WAWebMsgGetters","WAWebMsgType","WAWebRuntimeEnvironmentUtils","WAWebSchemaChat","WAWebSyncGatingUtils","WAWebUserPrefsHistorySync","WAWebUserPrefsTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Error storing MD recent or full sync messages"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] recent or full sync or on demand starts storing encrypted messages, ## isHistory: ",", msgCount: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] recent or full or on demand sync starts encrypting messages, ## isHistory: ",", msgCount: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["applyOrphanRevokes failed with error ",""]);k=function(){return a};return a}function a(a,b,c,d,e,f){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,l){e===void 0&&(e=!1);f===void 0&&(f=!1);var n=a;try{n=(yield d("WAWebApiOrphanRevoke").applyOrphanRevokes(a))}catch(a){d("WALogger").ERROR(k(),a).tags("history-sync")}var p=new Map();n.forEach(function(a){a.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE&&d("WAWebApiGroupInviteV4Store").persistGroupInviteV4Msg(a.id.toString(),{id:a.id.toString(),from:a.from.toString(),to:a.to.toString(),groupId:a.inviteGrp,expiration:parseInt(a.inviteCodeExp,10),expired:d("WATimeUtils").unixTime()>=parseInt(a.inviteCodeExp,10)});var b=a.id.remote.toString();if(d("WAWebMsgGetters").getIsImportantMessage(a))if(p.has(b)){var c;(c=p.get(b))==null?void 0:c.push(a)}else p.set(b,[a])});var q=d("WAWebSyncGatingUtils").isRecentSyncWorkerComaptibleHandlingEnabled()||d("WAWebSyncGatingUtils").isRecentSyncChunkDataHandlingInWorkerEnabled();a=q&&d("WAWebRuntimeEnvironmentUtils").isWorker()?yield m(p):yield d("WAWebBackendApi").frontendSendAndReceive("processAndGetUnreadMentionsInfo",{filteredMsgs:n});var r=a.unreadMentionsToAdd,s=a.pendingUnreadMentionsMap;d("WALogger").DEV(j(),f,n.length);a=(yield d("WAWebDBEncryptMultipleMsgs").encryptMultipleDBMsgs(n,e));void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(g,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.ENCRYPTED,l);d("WALogger").DEV(i(),f,a.length);return d("WAWebDBStoreEncryptedMsgs").storeEncryptedDBMessages(a,c,f).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(r.size>0){var a=q&&d("WAWebRuntimeEnvironmentUtils").isWorker()?yield o(r,s):yield d("WAWebBackendApi").frontendSendAndReceive("getChatIdsNeedToBeDeletedFromUnreadMentionInfo",{unreadMentionsToAdd:r,pendingUnreadMentionsMap:s});a.forEach(function(a){r["delete"](a)});r.size>0&&void d("WAWebApiChat").addUnreadMentionChat(r,s)}}))["catch"](function(a){d("WALogger").WARN(h()).devConsole(a)})});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map(),c=new Map(),e=Array.from(a.keys()),f=(yield d("WAWebSchemaChat").getChatTable().bulkGet(e)).reduce(function(a,b){b&&b.id&&a.set(b.id,b);return a},new Map());a.forEach(function(a,d){var e=f.get(d);a.forEach(function(a){var f=0;if(!c.has(d)){var g;f=(g=e==null?void 0:e.unreadMentionCount)!=null?g:0;c.set(d,f)}else{f=(g=c.get(d))!=null?g:0}if(f>0){c.set(d,f-1);g={id:a.id.toString(),timestamp:a.t};if(b.has(d)){(f=b.get(d))==null?void 0:f.push(g)}else b.set(d,[g])}})});return{unreadMentionsToAdd:b,pendingUnreadMentionsMap:c}});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=Array.from(a.keys()),e=(yield d("WAWebSchemaChat").getChatTable().bulkGet(c)).reduce(function(a,b){b&&b.id&&a.set(b.id,b);return a},new Map()),f=[];a.forEach(function(a,c){var g,h=e.get(c);g=(g=b.get(c))!=null?g:0;if((h==null?void 0:h.unreadMentionCount)===0){f.push(c);return}(h==null?void 0:h.unreadMentionCount)!=null&&(h==null?void 0:h.unreadMentionCount)>0&&d("WAWebBackendApi").frontendFireAndForget("updateUnreadMentionMetadataByAdding",{chatId:c,newUnreadMentions:a,pendingUnreadMentionCount:g})});return f});return p.apply(this,arguments)}g.storeRecentAndFullHistSyncMessages=a}),98);
__d("WAWebHandleHistorySyncMsg",["Promise","WAFilteredCatch","WALogger","WASyncdOrphan","WAWebAddonProcessMsgs","WAWebBackendErrors","WAWebCheckUpdateOrphanReactions","WAWebDBCRUDOperationsPinInChat","WAWebDBProcessRecentAndFullHistorySyncMessage","WAWebHandleMsgProcessUtils","WAWebPinMsgGatingUtils","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Error: ",", message: ",", stack: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] starts handling recent/full/on-demand sync progressive history messages"]);j=function(){return a};return a}function a(a,b,c,d,e,f,g,h,i){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,k,l,m,n){d("WALogger").LOG(j());yield (h||(h=b("Promise"))).resolve();return d("WAWebDBProcessRecentAndFullHistorySyncMessage").storeRecentAndFullHistSyncMessages(a,c,!0,!0,m,n).then(function(){var b=c.map(function(a){return a}),e=a.map(function(a){return a.id.toString()});d("WAWebCheckUpdateOrphanReactions").checkUpdateForOrphanReactions(e);return d("WASyncdOrphan").checkOrphanMutations(e,b)}).then(function(){return d("WAWebHandleMsgProcessUtils").storeReactionMsgBulk(e)}).then(function(){return(h||(h=b("Promise"))).all(f).then(function(a){var b;b=(b=Array.prototype).concat.apply(b,a);return d("WAWebHandleMsgProcessUtils").storePollVotesBulk(b)})}).then(function(){if(d("WAWebPinMsgGatingUtils").isPinnedMessagesM1ReceiverEnabled())return d("WAWebDBCRUDOperationsPinInChat").storePinInChatMsgBulk(g)}).then(function(){return(h||(h=b("Promise"))).all(k).then(function(a){var b;return d("WAWebAddonProcessMsgs").processHistoryMsgs((b=[]).concat.apply(b,a))})}).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a of l){if(!a||!a.id||!a.id.remote)return;var b=a.id.remote;if(b.isNewsletter())return;yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("processLastMsgs",{chatId:b,msgObjs:[a],meta:{add:"last",isHistory:!0},processMessagesOrigin:"historyMsgHandlerAction",chatMsgsCollection:null})}}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").LogoutDrop,function(){}))["catch"](function(a){d("WALogger").ERROR(i(),a.name,a.message,a.stack).devConsole(a).sendLogs("handleProgressiveHistorySyncMsgs: error storing/processing multiple messages")})});return k.apply(this,arguments)}g.handleProgressiveHistorySyncMsgs=a}),98);
__d("WAWebHistorySyncProgress",["Promise","WALogger","WAWebBackendApi","WAWebCmd","WAWebProtobufsHistorySync.pb","WAWebUserPrefsHistorySync","WAWebUserPrefsTypes","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] computeProgress: compute progress when the first history sync chunk is downloaded"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] computeProgress: compute progress when the last processed history sync chunk is completed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateProgressModel: error computing progress"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] sync complete, clearing paused timer "]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] initial sync complete, starting paused timer"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] ","s have passed without chunk uploads from phone, setting paused state..."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] setting history sync paused timeout to ","s"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] clearing history sync paused timeout"]);p=function(){return a};return a}var q=2*60,r=3,s=null;function t(){d("WALogger").DEV(p()),s!=null&&self.clearTimeout(s)}function u(){t(),d("WALogger").DEV(o(),q),s=self.setTimeout(function(){d("WALogger").DEV(n(),q),z(!0)},q*1e3)}var v=0;function a(a){v=a?0:v+1,v===0&&u(),z(v>=3)}function e(){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield (h||(h=b("Promise"))).all([x(),d("WAWebUserPrefsHistorySync").getHistorySyncStatus()])),e=a[0];a=a[1];a=c("gkx")("26254")?(a==null?void 0:a.recentCompleted)!==!0:(a==null?void 0:a.fullCompleted)!==!0;d("WAWebBackendApi").frontendFireAndForget("setHistorySyncProgress",{incomplete:a});e!=null&&d("WAWebBackendApi").frontendFireAndForget("setHistorySyncProgress",{progress:e})}catch(a){d("WALogger").ERROR(k())}});return w.apply(this,arguments)}function x(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("gkx")("26255"))return;var a=(yield d("WAWebUserPrefsHistorySync").getChunkCountForEndOfRecentHistorySync());if(a===0){a=(yield d("WAWebUserPrefsHistorySync").getEstimatedChunkCountForEndOfRecentHistorySync());if(a===0)return}var b=(yield d("WAWebUserPrefsHistorySync").getLastHistorySyncedChunk());if(b!=null){b=b.split("_").map(function(a){return parseInt(a,10)});var e=b[0];b=b[1];if(e===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT){e=Math.floor(b/a*100);d("WALogger").LOG(j());return Math.min(100,e)}}return A(a)});return y.apply(this,arguments)}function z(a){d("WAWebBackendApi").frontendFireAndForget("setHistorySyncPaused",{paused:a})}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=(yield d("WAWebUserPrefsHistorySync").getRecentSyncSingleChunkStatus()))==null?void 0:b[1];if(b==null||[d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.RECEIVED,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.NOTIFICATION_STORED,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADING].includes(b))return null;d("WALogger").LOG(i());b=Math.floor(1/a/r*100);return Math.min(100,b)});return B.apply(this,arguments)}d("WAWebCmd").Cmd.on("on_critical_sync_done",function(){d("WALogger").DEV(m()),u()});d("WAWebCmd").Cmd.on(c("gkx")("26254")?"on_recent_chat_history_synced":"on_full_chat_history_synced",function(){d("WALogger").DEV(l()),t(),z(!1),d("WAWebBackendApi").frontendFireAndForget("setHistorySyncProgress",{progress:100,incomplete:!1})});g.handleChunkProgress=a;g.updateHistorySyncProgressModel=e}),98);
__d("WAWebHistorySyncWorkerCompatibleNotificationUtils",["WALogger","WAWebBackendApi","WAWebChatConstants","WAWebProtobufsHistorySync.pb","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] update chat "," end of history transfer type to ",""]);h=function(){return a};return a}function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=!1);b=j(b);var e={id:a,endOfHistoryTransferType:b};d("WALogger").DEV(h(),a.toString(),b);c&&(e.t=0);yield d("WAWebBackendApi").frontendSendAndReceive("chatCollectionAdd",{things:[e],options:{merge:!0}});yield d("WAWebSchemaChat").getChatTable().merge(a.toString(),{endOfHistoryTransferType:b})});return i.apply(this,arguments)}function j(a){switch(a){case d("WAWebProtobufsHistorySync.pb").Conversation$EndOfHistoryTransferType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:return d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY;case d("WAWebProtobufsHistorySync.pb").Conversation$EndOfHistoryTransferType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:return d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY;case d("WAWebProtobufsHistorySync.pb").Conversation$EndOfHistoryTransferType.COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY:return d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY}}g.updateEndOfHistorySync=a}),98);
__d("WARaceSignal",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d,e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=new AbortController();if(a.some(function(a){return a.aborted}))e.abort();else{d=function(){for(var c=0;c<a.length;c++){var b=a[c];b.removeEventListener("abort",f)}d=null};f=function(){d==null?void 0:d(),e.abort()};for(g=0;g<a.length;g++)h=a[g],h.addEventListener("abort",f)}i.prev=2;i.next=5;return b("regeneratorRuntime").awrap(c(e.signal));case 5:return i.abrupt("return",i.sent);case 6:i.prev=6;d==null?void 0:d();return i.finish(6);case 9:case"end":return i.stop()}},null,this,[[2,,6,9]])}f["default"]=a}),66);
__d("WAWebMediaHost",["WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){var h=new Set(d("WAWebMmsMediaTypes").MEDIA_TYPE_VALUES),i=Object.freeze({PRIMARY:"primary",FALLBACK:"fallback"});a=function(){function a(b){this.hostname=b.hostname;this.ips=b.ips||[];this.type=b.type;this["class"]=b["class"];var c=j(b.rules),d=c.downloadBuckets,e=c.supportedDownloadTypes;c=c.supportedUploadTypes;this.downloadBuckets=d;this.$1=e;this.$2=c;this.fallback=b.fallback!=null?new a(babelHelpers["extends"]({},b,b.fallback,{type:"fallback",fallback:void 0})):null}var b=a.prototype;b.equals=function(a){return this.hostname===(a==null?void 0:a.hostname)};b.isFallback=function(){return this.type===i.FALLBACK};b.supportsDownloadMediaType=function(a){return this.$1.has(k(a))};b.supportsUploadMediaType=function(a){return this.$2.has(l(a))};b.setSelectedBucket=function(a){this.selectedBucket=a};return a}();function j(a){a=a||[];var b,c,d;for(var e=0;e<a.length;e++){var f=a[e];if(f.download){var g;b=(g=b)!=null?g:new Set();for(var g=f.download,i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;b.add(k)}}if(f.upload){c=(k=c)!=null?k:new Set();for(j=f.upload,i=Array.isArray(j),g=0,j=i?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(g>=j.length)break;k=j[g++]}else{g=j.next();if(g.done)break;k=g.value}k=k;c.add(k)}}f.downloadBuckets&&(d=f.downloadBuckets.map(function(a){return parseInt(a,10)}))}return{supportedDownloadTypes:(k=b)!=null?k:h,supportedUploadTypes:(g=c)!=null?g:h,downloadBuckets:d}}function k(a){return a==="ptv"?d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO:a}function l(a){switch(a){case"ptv":return d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO;case"product-catalog-image":return d("WAWebMmsMediaTypes").MEDIA_TYPES.PRODUCT;default:return a}}g.HOST_TYPE=i;g.MediaHost=a}),98);
__d("WAWebMediaHostsErrors",["WACustomError"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("NoMediaHostsError"));g.NoMediaHostsError=a}),98);
__d("WABase64Modulo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=atob(a);var c=0;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>4;e=e&15;c=((c<<4)+f)%b;c=((c<<4)+e)%b}return c}f["default"]=a}),66);
__d("WAWebMediaHostsRouteSelection",["WABase64Modulo","WAWebABProps"],(function(a,b,c,d,e,f,g){var h={DOWNLOAD:"DOWNLOAD",UPLOAD:"UPLOAD"};function a(a){var b=a.encFilehash,e=a.hosts,f=a.operation,g=a.type;a=a.maxBuckets;if(!e.length)return{selectedHost:null,fallbackHost:null};var j;if(f===h.DOWNLOAD){var k=d("WAWebABProps").getABPropConfigValue("mms_vcache_aggregation_enabled"),l;b==null?l=0:k&&a!=null&&(l=c("WABase64Modulo")(b,a)+100);k=i(e);b=l==null?null:k.get(l);a=k.get(0);(b==null?void 0:b.supportsDownloadMediaType(g))?j=b:(a==null?void 0:a.supportsDownloadMediaType(g))&&(j=a);(k=j)==null?void 0:k.setSelectedBucket(l)}b=e.find(function(a){return a.isFallback()});j=(a=j)!=null?a:e.find(function(a){return f===h.UPLOAD?a.supportsUploadMediaType(g):a.supportsDownloadMediaType(g)});return{selectedHost:(k=j)!=null?k:null,fallbackHost:(a=b)!=null?a:null}}function i(a){var b=new Map();a.forEach(function(a){var c;(c=a.downloadBuckets)==null?void 0:c.forEach(function(c){b.set(c,a)})});return b}g.OPERATIONS=h;g.routeSelection=a}),98);
__d("WABackoffDelay",["Promise","WAErr","WAPromiseDelays","WARetryableError","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i={retries:Infinity};function a(a,e){var f,g,j,k,l,m,n,o,p,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:f=babelHelpers["extends"]({},i,a),g=f.delay,j=f.signal,k=f.retries;l=0;m=Date.now();n=null;o=function(a){return(h||(h=b("Promise"))).reject(new(c("WARetryableError"))(a))};s.prev=5;m=Date.now();s.next=9;return b("regeneratorRuntime").awrap(e(o,l,j));case 9:return s.abrupt("return",s.sent);case 12:s.prev=12;s.t0=s["catch"](5);l++;if(s.t0 instanceof c("WARetryableError")){s.next=17;break}throw s.t0;case 17:n=s.t0;case 18:if(!(l<=k)){s.next=38;break}p=Date.now()-m;q=g({iterationCount:l,taskDuration:p});s.next=23;return b("regeneratorRuntime").awrap(d("WAPromiseDelays").delayMs(q,j));case 23:s.prev=23;m=Date.now();s.next=27;return b("regeneratorRuntime").awrap(e(o,l,j));case 27:return s.abrupt("return",s.sent);case 30:s.prev=30;s.t1=s["catch"](23);l++;if(s.t1 instanceof c("WARetryableError")){s.next=35;break}throw s.t1;case 35:n=s.t1;case 36:s.next=18;break;case 38:if(n){s.next=40;break}throw c("WAErr")("assert: backoff completed without error or result");case 40:r=n.source;throw r;case 42:case"end":return s.stop()}},null,this,[[5,12],[23,30]])}g.backoff=a}),98);
__d("WAWebQueryMediaConnsJob",["WADeprecatedSendIq","WALogger","WAMediaConnParser","WAPromiseRaceAbort","WATimeUtils","WAWap","WAWebBackendErrors","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["backend:queryMediaConnections: hosts.length ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["backend:queryMediaConnections: hosts exists ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["backend:queryMediaConnections: ttl exists ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["backend:queryMediaConnections: auth exists ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["backend:queryMediaConn: got "," hosts"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["response: "," ",""]);n=function(){return a};return a}function o(a){switch(a){case"kyc-id":case"novi-image":case"novi-video":case"thumbnail-gif":case"xma-image":return null;default:return a}}function p(a){return{hostname:a.domain,"class":a["class"],ips:[{ip4:a.ip4,ip6:a.ip6}]}}function q(a){var b=function(a){var b=[],c=a.downloadable.map(o).filter(Boolean);c.length>0&&b.push({download:c});c=a.uploadable.map(o).filter(Boolean);c.length>0&&b.push({upload:c});c=a.downloadBuckets.map(function(a){return a.toString()});c!=null&&c.length>0&&b.push({downloadBuckets:c});return b};return{hosts:a.hosts.map(function(a){return babelHelpers["extends"]({},p(a),{fallback:a.fallback!=null?p(a.fallback):void 0,type:a.isFallback?"fallback":"primary",rules:b(a)})}),auth:a.authToken,authTTL:a.authTokenExpiryTs,ttl:a.routesExpiryTs,maxBuckets:a.maxBuckets}}function a(a){var b,e=new Date(),f=d("WATimeUtils").unixTime();b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,xmlns:"w:m",type:"set",id:b.generateId()},b.wap("media_conn",null));b=d("WADeprecatedSendIq").deprecatedSendIq(b,d("WAMediaConnParser").mediaConnParser).then(function(a){if(!a.success){d("WALogger").ERROR(n(),a.errorCode,a.errorText).sendLogs("backend:queryMediaConn: fail");if(a.errorCode===507)throw new(d("WAWebBackendErrors").E507)(a.errorText,a.errorBackoff);throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)}else{d("WALogger").LOG(m(),a.result.hosts.length);a=q(a.result);var b=a.auth,g=a.authTTL,o=a.ttl,p=a.hosts;a=a.maxBuckets;if(!b||o==null||!p||p.length===0){d("WALogger").LOG(l(),String(!!b));d("WALogger").LOG(k(),String(!!o));d("WALogger").LOG(j(),String(!!p));p&&d("WALogger").LOG(i(),p.length);d("WALogger").ERROR(h()).sendLogs("backend:queryMediaConnections unexpected mediaConn");throw c("err")("Invalid mediaConn")}return babelHelpers["extends"]({queryStartTime:e,auth:b,hosts:p,ttl:o-f,maxBuckets:a},g!=null?{authTTL:g-f}:null)}});return c("WAPromiseRaceAbort")(b,a)}g.mapParsedMediaConn=q;g.queryMediaConn=a}),98);
__d("WAWebQueryMediaConnsBridge",["WABackoffDelay","WAPromiseBackoffs","WAWebBackendErrors","WAWebQueryMediaConnsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=1e3;c=15*60*1e3;var i=d("WAPromiseBackoffs").createTimer({algo:{type:"fibonacci",first:0,second:1},max:c,jitter:.25});function a(a){var c=5*60*1e3;return d("WABackoffDelay").backoff({delay:function(a){a=a.taskDuration;var b=h*i();return Math.max(b-a,0)},signal:a},function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=d("WAWebQueryMediaConnsJob").queryMediaConn(a);try{e=(yield e);var f=e.ttl,g=e.authTTL;g==null?(g=f*1e3,f=c):(g*=1e3,f*=1e3);return babelHelpers["extends"]({},e,{authTTL:g,ttl:f})}catch(a){if(a instanceof d("WAWebBackendErrors").E507)throw a;if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.status>=500)return b(a);throw a}});return function(a){return e.apply(this,arguments)}}())}g.sendQueryMediaConn=a}),98);
__d("WAWebMediaHosts",["Promise","WAAbortError","WALogger","WAMemoizeConcurrent","WAWebBackendErrors","WAWebMediaHost","WAWebMediaHostsErrors","WAWebMediaHostsRouteSelection","WAWebNormalizeStack","WAWebQueryMediaConnsBridge","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to init media conn from storage: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaHosts.sendQueryMediaConn error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaHosts.sendQueryMediaConn aborted"]);l=function(){return a};return a}a={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};e=function(){function a(){var a=this;this._locked=!1;this._fetch=c("WAMemoizeConcurrent")(function(){return"all"},function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=c.signal;try{c=(yield d("WAWebQueryMediaConnsBridge").sendQueryMediaConn(e));a._data=a._createMediaConnData(c);d("WAWebUserPrefsMultiDevice").setMms4Conn(c);a._err=null}catch(g){c=g;if(c instanceof d("WAWebBackendErrors").E507){var f;a._data=a._previousData;a._previousData=null;a._locked=!0;self.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield a._refreshIfStale({signal:e}),a._locked=!1}),(f=c.backoff)!=null?f:void 0);return}a._data=null;a._err=c;if(c.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(l());return}d("WALogger").WARN(k(),m(c)).verbose();d("WALogger").ERROR(j()).devConsole(c).sendLogs("Error fetching mms hosts")}});return function(a){return c.apply(this,arguments)}}());this._reset()}var e=a.prototype;e.forceRefresh=function(a){if(this._locked)return(h||(h=b("Promise"))).resolve(!1);a={signal:a,forceRefresh:!0};return this._refreshIfStale(a)};e.getCachedHostsInfo=function(a){var c=this;if(!this._locked){var d={signal:a.signal||new AbortController().signal,forceRefresh:!1};self.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c._refreshIfStale(d),c._locked=!1}),0)}return this._getPreferredHostsInfo(a)};e.maybeLoadMediaConnFromStorage=function(){var a=d("WAWebUserPrefsMultiDevice").getMms4Conn();if(a==null)return;try{this._data=this._createMediaConnData(a)}catch(a){d("WALogger").ERROR(i(),a).sendLogs("media-conn-failed-to-load")}};e.getHostsInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,c=a.encFilehash,d=a.operation,e=a.type,f=a.signal;a=a.forceRefresh;a=a===void 0?!1:a;if(!this._locked){f={signal:f||new AbortController().signal,forceRefresh:a};yield this._refreshIfStale(f)}return this._getPreferredHostsInfo({directPath:b,encFilehash:c,operation:d,type:e})});function c(b){return a.apply(this,arguments)}return c}();e.getHostsInfoByBucket=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.preferredBuckets,c=a.signal;a=a.forceRefresh;a=a===void 0?!1:a;if(!this._locked){c={signal:c||new AbortController().signal,forceRefresh:a};yield this._refreshIfStale(c)}if(!this._data)throw new(d("WAWebMediaHostsErrors").NoMediaHostsError)("no fetched data");a=this._data;c=a.auth;a=a.hosts;if(!a.length)throw new(d("WAWebMediaHostsErrors").NoMediaHostsError)("no selected host");var e=new Map(b.map(function(a){return[a,null]}));a.forEach(function(a){var b;b=(b=a.downloadBuckets)==null?void 0:b.find(function(a){return e.has(a)});b!=null&&e.set(b,a)});var f,g;for(b of e.values()){if(b==null)continue;if(!f)f=b;else if(!g){g=b;break}}!f&&!g?(f=a[0],g=a[1]):g||(g=a[0]);if(!f)throw new(d("WAWebMediaHostsErrors").NoMediaHostsError)("no selected host");return{auth:c,selectedHost:f,fallbackHost:g}});function c(b){return a.apply(this,arguments)}return c}();e._createMediaConnData=function(a){var b=new Date(a.queryStartTime);return{auth:a.auth,authExpirationTime:new Date(b.getTime()+a.authTTL),authTTL:a.authTTL,hosts:a.hosts.map(function(a){return new(d("WAWebMediaHost").MediaHost)(a)}),hostsRefreshTime:new Date(b.getTime()+a.ttl),queryStartTime:b,maxBuckets:a.maxBuckets}};e._isExpiredOrMissing=function(){if(!this._data)return!0;var a=this._data;return new Date()>=a.authExpirationTime};e._getPreferredHostsInfo=function(a){if(!this._data)throw new(d("WAWebMediaHostsErrors").NoMediaHostsError)("no fetched data");var b=a.encFilehash,c=a.operation;a=a.type;var e=this._data,f=e.auth,g=e.hosts;e=e.maxBuckets;b=d("WAWebMediaHostsRouteSelection").routeSelection({encFilehash:b,hosts:g,operation:c,type:a,maxBuckets:e});g=b.selectedHost;c=b.fallbackHost;if(!g)throw new(d("WAWebMediaHostsErrors").NoMediaHostsError)("no selected host");return{auth:f,selectedHost:g,fallbackHost:c}};e._needsRefresh=function(){if(!this._data)return!0;var a=this._data;if(new Date()>=a.hostsRefreshTime)return!0;var b=a.authTTL;a=a.queryStartTime;b=Math.floor(b*.8);a=new Date(a.getTime()+b);return new Date()>=a};e._refreshIfStale=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.forceRefresh;a=babelHelpers.objectWithoutPropertiesLoose(a,["forceRefresh"]);if(this._isExpiredOrMissing()||b){this._reset();yield this._fetch(a);return!0}if(this._needsRefresh()){this._fetch(a);return!1}return!1});function a(b){return a.apply(this,arguments)}return a}();e._reset=function(){this._previousData=this._data,this._data=null,this._err=null};return a}();f=new e();function m(a){a.name;a.message;a.stack;var b=babelHelpers.objectWithoutPropertiesLoose(a,["name","message","stack"]),c=d("WAWebNormalizeStack").normalizeStack(a);c=c.slice(c.indexOf("\n")+1);b=Object.keys(b).length===0?"":" "+JSON.stringify(b,function(a,b){return a&&typeof b==="object"?String(b):b});return(a.name||"Error")+": "+a.message+b+"\n"+c}g.FETCH_STATE=a;g.mediaHosts=f}),98);
__d("WAWebMmsClientErrors",["WAWebHttpErrors"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,404,b)||this;c.name="MediaNotFoundError";return c}return b}((a=d("WAWebHttpErrors")).HttpStatusCodeError);c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,413,b)||this;c.name="MediaTooLargeError";return c}return b}(a.HttpStatusCodeError);e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,415,b)||this;c.name="MediaInvalidError";return c}return b}(a.HttpStatusCodeError);f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,401,b)||this;c.name="MMSUnauthorizedError";return c}return b}(a.HttpStatusCodeError);d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,403,b)||this;c.name="MMSForbiddenError";return c}return b}(a.HttpStatusCodeError);a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,507,b)||this;c.name="MMSThrottleError";return c}return b}(a.HttpStatusCodeError);g.MediaNotFoundError=b;g.MediaTooLargeError=c;g.MediaInvalidError=e;g.MMSUnauthorizedError=f;g.MMSForbiddenError=d;g.MMSThrottleError=a}),98);
__d("WAWebMmsClientIsErrorRetryable",["WAWebHttpErrors","WAWebMediaHostsErrors","WAWebMmsClientErrors"],(function(a,b,c,d,e,f,g){function a(a){if(a===408)return!0;if(a===507)return!1;return a>=500?!0:!1}function b(a){return a instanceof d("WAWebMmsClientErrors").MMSThrottleError?!1:a instanceof d("WAWebMediaHostsErrors").NoMediaHostsError||a instanceof d("WAWebHttpErrors").HttpNetworkError||a instanceof d("WAWebMmsClientErrors").MMSUnauthorizedError||a instanceof d("WAWebHttpErrors").HttpStatusCodeError&&a.status>=500}g.isRetriableStatusCode=a;g.isErrorRetryable=b}),98);
__d("WAWebMmsClientMmsBackoffOptions",[],(function(a,b,c,d,e,f){a={minTimeout:1e3,retries:3};b=a;f["default"]=b}),66);
__d("WABase64UrlSafe",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/\//g,"_").replace(/\+/g,"-")}f["default"]=a}),66);
__d("WAWebMmsClientFormatHashUrl",["WABase64UrlSafe","WANullthrows","WAWebMmsMediaTypes","WAWebPonyfillsUrlSearchParams"],(function(a,b,c,d,e,f,g){var h=(b={audio:"/mms/audio",document:"/mms/document",gif:"/mms/gif",image:"/mms/image",ppic:"/pps/photo",product:"/mms/image",ptt:"/mms/ptt",sticker:"/mms/sticker","thumbnail-document":"/mms/thumbnail-document","thumbnail-link":"/mms/thumbnail-link",video:"/mms/video","md-app-state":"/mms/md-app-state","product-catalog-image":"/product/image","biz-cover-photo":"/pps/biz-cover-photo"},b[(e=d("WAWebMmsMediaTypes")).MEDIA_TYPES.NEWSLETTER_AUDIO]="/newsletter/newsletter-audio",b[e.MEDIA_TYPES.NEWSLETTER_IMAGE]="/newsletter/newsletter-image",b[e.MEDIA_TYPES.NEWSLETTER_DOCUMENT]="/newsletter/newsletter-document",b[e.MEDIA_TYPES.NEWSLETTER_IMAGE]="/newsletter/newsletter-image",b[e.MEDIA_TYPES.NEWSLETTER_GIF]="/newsletter/newsletter-gif",b[e.MEDIA_TYPES.NEWSLETTER_PTT]="/newsletter/newsletter-ptt",b[e.MEDIA_TYPES.NEWSLETTER_STICKER]="/newsletter/newsletter-sticker",b[e.MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK]="/newsletter/newsletter-thumbnail-link",b[e.MEDIA_TYPES.NEWSLETTER_VIDEO]="/newsletter/newsletter-video",b);function a(a){var b=a.hostname,d=a.type,e=a.encFilehash,f=a.query;a=c("WANullthrows")(h[d]);d=new URL("https://"+b+a+"/"+c("WABase64UrlSafe")(e));var g={};f&&Object.keys(f).forEach(function(a){f[a]!=null&&(g[a]=f[a])});b=new(c("WAWebPonyfillsUrlSearchParams"))(g).toString();b&&(b="?"+b);return"https://"+d.host+d.pathname+b}g["default"]=a}),98);
__d("WAWebMmsClientFormatUploadUrl",["WABase64UrlSafe","WAWebMmsClientFormatHashUrl"],(function(a,b,c,d,e,f,g){function a(a){var b=a.auth,d=a.encFilehash,e=a.hostname,f=a.query,g=a.type,h=a.byteRange,i=a.mediaId;a=a.token;var j=f==null?void 0:f.final_hash;return c("WAWebMmsClientFormatHashUrl")({encFilehash:d,hostname:e,type:g,query:{auth:b,token:c("WABase64UrlSafe")(a),resume:f==null?void 0:(d=f.resume)==null?void 0:d.toString(10),stream:f==null?void 0:(e=f.stream)==null?void 0:e.toString(10),final_hash:j!=null?c("WABase64UrlSafe")(j):void 0,bytestart:h==null?void 0:h.start.toString(10),byteend:h==null?void 0:h.end.toString(10),media_id:i.toString(10)}})}g["default"]=a}),98);
__d("WAWebMmsClientMmsLogError",["WAAbortError","WALogger","WAWebMmsClientErrors"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": canceled"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": expected error"]);j=function(){return a};return a}function a(a,b,c,e){e===void 0&&(e=!0),b instanceof d("WAWebMmsClientErrors").MediaNotFoundError&&e?d("WALogger").LOG(j(),a).devConsole(c,b):typeof b==="object"&&(b==null?void 0:b.name)===d("WAAbortError").ABORT_ERROR?d("WALogger").LOG(i(),a).devConsole(c,b):d("WALogger").WARN(h(),a,b).devConsole(c,b)}g.mmsLogError=a}),98);
__d("WAWebMmsClientMmsGetUploadProgress",["WALogger","WAWebHttpErrors","WAWebHttpExtendedFetch","WAWebMmsClientErrors","WAWebMmsClientFormatUploadUrl","WAWebMmsClientMmsLogError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsGetUploadProgress: success"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsGetUploadProgress: start"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.auth,e=a.encFilehash,f=a.hostname,g=a.signal,j=a.type,k=a.onProgress,l=a.mediaId;a=a.token;b=c("WAWebMmsClientFormatUploadUrl")({auth:b,encFilehash:e,hostname:f,query:{resume:1},type:j,mediaId:l,token:a});f={encFilehash:e,type:j,url:b};d("WALogger").LOG(i()).devConsole(f);try{l=(yield d("WAWebHttpExtendedFetch").extendedFetch(b,{method:"post",signal:g,onProgress:k}));if(!l.ok)switch(l.status){case 401:throw new(d("WAWebMmsClientErrors").MMSUnauthorizedError)("mmsGetUploadProgress",{url:b});case 404:throw new(d("WAWebMmsClientErrors").MediaNotFoundError)("mmsGetUploadProgress",{url:b});default:throw new(d("WAWebHttpErrors").HttpStatusCodeError)(l.status,"mmsGetUploadProgress",{url:b})}a=(yield l.json());if(!a.resume)throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsGetUploadProgress: missing resume",{url:b});d("WALogger").LOG(h()).devConsole(f);return{directPath:a.direct_path,resume:a.resume,url:a.url,handle:a.handle}}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsUpload",a,f);throw a}});return j.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebMmsClientMmsCheckIfUploadExists",["WALogger","WAWebHttpErrors","WAWebMmsClientErrors","WAWebMmsClientMmsGetUploadProgress","WAWebMmsClientMmsLogError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsCheckIfUploadExists: resume is NaN, resume=",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsCheckIfUploadExists: success"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsCheckIfUploadExists: start"]);j=function(){return a};return a}var k="complete";function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={encFilehash:a.encFilehash,type:a.type};d("WALogger").LOG(j()).devConsole(b);try{a=(yield c("WAWebMmsClientMmsGetUploadProgress")(a));var e=a.directPath,f=a.url,g=a.handle;a=a.resume;if(a===k){if(e==null||e==="")throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsCheckIfUploadExists: missing directPath");if(f==null||f==="")throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsCheckIfUploadExists: missing url");d("WALogger").LOG(i()).devConsole(b);return{directPath:e,url:f,handle:g,complete:!0}}e=parseInt(a,10);if(e===0)throw new(d("WAWebMmsClientErrors").MediaNotFoundError)("mmsCheckIfUploadExists");if(Number.isNaN(e)){d("WALogger").ERROR(h(),e).sendLogs("upload-offset-is-NaN");throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsCheckIfUploadExists: invalid resume")}return{complete:!1,resume:e}}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsCheckIfUploadExists",a,b);throw a}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebPonyfillsFetch",["WAWebHttpExtendedFetch"],(function(a,b,c,d,e,f,g){var h=function(){};b="fetch"in self?self.fetch:a;function a(a,b){b===void 0&&(b={});return d("WAWebHttpExtendedFetch").sharedFetch(a,babelHelpers["extends"]({},b,{onProgress:h}))}g["default"]=b}),98);
__d("WAWebMmsClientMmsDeleteMdHistorySyncBlob",["WABase64","WABase64UrlSafe","WAWebHttpErrors","WAWebMmsClientFormatHashUrl","WAWebMmsMediaTypes","WAWebPonyfillsFetch","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,e=a.encFilehash,f=a.hostname;a=a.auth;b=b.split("?")[0];b=new TextEncoder().encode(b);b=d("WABase64").encodeB64UrlSafe(b);f=c("WAWebMmsClientFormatHashUrl")({encFilehash:e,hostname:f,type:d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE,query:{token:c("WABase64UrlSafe")(e),d_md:b,auth:a}});e=(yield c("WAWebPonyfillsFetch")(f,{method:"DELETE"}));if(!e.ok)throw new(d("WAWebHttpErrors").HttpStatusCodeError)(e.status,"MMS Delete error")});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebMmsCdnUrlValidationUtils",["WATimeUtils"],(function(a,b,c,d,e,f,g){var h={OE:"oe"};function a(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(h.OE);a=a==null?void 0:d("WATimeUtils").convertHexToDate(a);return{expirationDate:a}}g.parseCdnUrlParams=a}),98);
__d("WAWebMmsClientFormatDownloadUrl",["WABase64UrlSafe","WALogger","WAWebABProps","WAWebMmsClientFormatHashUrl","WAWebPonyfillsUrlSearchParams","WAWebSharedConstants","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["url.hostname: ",", hostname: ",", directPath: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[WAWebMmsClientFormatDownloadUrl] failed: No direct path is found, hash based url is not allowed"]);i=function(){return a};return a}function a(a){var b=a.directPath,e=a.encFilehash,f=a.hostname,g=a.type,h=a.mode,k=a.byteRange;a=a.downloadBucket;if(b){return j({encFilehash:e,hostname:f,directPath:b,query:(b={mode:h,bytestart:k==null?void 0:k.start.toString(),byteend:k==null?void 0:k.end.toString()},b[d("WAWebSharedConstants").MMS_URL_MEDIA_TYPE_SEARCH_PARAM]=g,b[d("WAWebSharedConstants").IS_MMS_URL_SEARCH_PARAM]="",b),downloadBucket:a,type:g})}if(d("WAWebABProps").getABPropConfigValue("web_deprecate_mms4_hash_based_download")){d("WALogger").ERROR(i()).tags("media").sendLogs("no-direct-path-found");throw c("err")("No direct path is available for download, abort")}return c("WAWebMmsClientFormatHashUrl")({hostname:f,type:g,encFilehash:e,query:(k={mode:h},k[d("WAWebSharedConstants").IS_MMS_URL_SEARCH_PARAM]="",k)})}function j(a){var b=a.directPath,e=a.encFilehash,f=a.hostname,g=a.query,i=a.downloadBucket;a=a.type;var j=new URL(b,"https://"+f);if(j.hostname!==f){d("WALogger").ERROR(h(),j.hostname,f,b).sendLogs("malicious directPath");throw c("err")("malicious directPath")}var k=j.searchParams||new(c("WAWebPonyfillsUrlSearchParams"))(j.search);k.set("hash",c("WABase64UrlSafe")(e));i!=null&&k.set("_nc_cat",i.toString());f=d("WAWebABProps").getABPropConfigValue("low_cache_hit_rate_media_types");if(f!=null){b=f.split(",");b.includes(a)&&k.set("_nc_map","whatsapp-nofna")}Object.keys(g).forEach(function(a){var b=g[a];b!=null&&k.set(a,b)});return"https://"+j.host+j.pathname+"?"+k.toString()}g["default"]=a}),98);
__d("WAWebMmsClientMmsDownload",["WALogger","WAMediaCalculateFilehash","WATimeUtils","WAWebABProps","WAWebHttpErrors","WAWebHttpExtendedFetch","WAWebMiscErrors","WAWebMmsCdnUrlValidationUtils","WAWebMmsClientErrors","WAWebMmsClientFormatDownloadUrl","WAWebMmsClientMmsLogError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsDownload: [","] success"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["download hash mismatch error. downloaded size: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsDownload: [","] start"]);j=function(){return a};return a}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.url,c=a.signal,e=a.onHeadersReceived,f=a.onProgress,g=a.onData,k=a.debug,l=a.debugString;a=a.ciphertextValidator;d("WALogger").LOG(j(),l).devConsole(k);try{c=(yield d("WAWebHttpExtendedFetch").extendedFetch(b,{signal:c,onProgress:f,onData:g,onHeadersReceived:e}));yield o({response:c,functionName:"mmsDownload",url:b});f=(yield c.arrayBuffer());if(a&&!(yield a(f))){d("WALogger").WARN(i(),f.byteLength);throw new(d("WAWebHttpErrors").MmsDownloadFilehashMismatchError)({url:b})}d("WALogger").LOG(h(),l).devConsole(k);return f}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsDownload",a,k);if(a instanceof TypeError)throw new(d("WAWebHttpErrors").HttpNetworkError)(a.message);throw a}});return l.apply(this,arguments)}function a(a){var e=a.directPath,f=a.encFilehash,g=a.staticUrl,h=a.hostname,i=a.type,j=a.signal,l=a.onProgress,m=a.onData,n=a.onHeadersReceived,o=a.mode,p=a.byteRange,q=a.debugString;a=a.downloadBucket;g=g?g:c("WAWebMmsClientFormatDownloadUrl")({directPath:e,encFilehash:f,hostname:h,type:i,mode:o,byteRange:p,downloadBucket:a});e=p?null:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield d("WAMediaCalculateFilehash").calculateFilehash(a))===f});return function(b){return a.apply(this,arguments)}}();return k({url:g,signal:j,onHeadersReceived:n,onProgress:l,onData:m,ciphertextValidator:e,debugString:q,debug:{encFilehash:f,type:i,url:g}})}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,c=a.encFilehash,d=a.hostname,e=a.type;a=a.signal;yield q({directPath:b,encFilehash:c,hostname:d,type:e,signal:a,functionName:"mmsCheckExistence"})});return m.apply(this,arguments)}function f(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,c=a.encFilehash,e=a.hostname,f=a.type;a=a.signal;b=(yield q({directPath:b,encFilehash:c,hostname:e,type:f,signal:a,functionName:"mmsGetEncryptedMediaSize"}));c=b.headers.get("content-length");if(!c)throw new(d("WAWebMiscErrors").UnableToGetContentLengthError)();return parseInt(c,10)});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.response,c=a.url;a=a.functionName;if(!b.ok)switch(b.status){case 401:throw new(d("WAWebMmsClientErrors").MMSUnauthorizedError)(a,{url:c});case 403:var e=(yield b.text());if(e.includes("URL signature expired"))throw new(d("WAWebMmsClientErrors").MediaNotFoundError)(a,{url:c,status:b.status});e=d("WAWebMmsCdnUrlValidationUtils").parseCdnUrlParams(c);e=e.expirationDate;if(d("WAWebABProps").getABPropConfigValue("web_killswitch_s310872_mitigation")&&e!=null&&d("WATimeUtils").toDate(d("WATimeUtils").unixTime())>=e)throw new(d("WAWebMmsClientErrors").MediaNotFoundError)(a,{url:c,status:b.status});throw new(d("WAWebMmsClientErrors").MMSForbiddenError)(a,{url:c});case 404:case 410:throw new(d("WAWebMmsClientErrors").MediaNotFoundError)(a,{url:c,status:b.status});case 507:throw new(d("WAWebMmsClientErrors").MMSThrottleError)(a,{url:c});default:throw new(d("WAWebHttpErrors").HttpStatusCodeError)(b.status,a,{url:c})}});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,e=a.encFilehash,f=a.hostname,g=a.type,h=a.signal;a=a.functionName;b=c("WAWebMmsClientFormatDownloadUrl")({directPath:b,encFilehash:e,hostname:f,type:g,mode:"auto"});e=(yield d("WAWebHttpExtendedFetch").extendedFetch(b,{method:"HEAD",signal:h}));yield o({response:e,functionName:a,url:b});return e});return r.apply(this,arguments)}g.mms4Download=a;g.mmsCheckExistence=e;g.mmsGetEncryptedMediaSize=f;g.validateMmsResponse=o}),98);
__d("WAWebMmsClientMmsUpload",["WALogger","WAWebHttpErrors","WAWebHttpExtendedFetch","WAWebMmsClientErrors","WAWebMmsClientFormatUploadUrl","WAWebMmsClientMmsLogError","WAWebMmsMediaTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsUpload: success"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsUpload: start"]);i=function(){return a};return a}function j(a){if(a.direct_path==null||a.direct_path==="")throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUpload: missing direct_path");if(a.url==null||a.url==="")throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUpload: missing url");return{directPath:a.direct_path,url:a.url,handle:a.handle}}function k(a){if(a.ts==null)throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUpload: missing ts (timestamp)");if(a.meta_hmac==null)throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUpload: missing meta_hmac");if(a.fbid==null)throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUpload: missing fbid");return{directPath:"",url:"",ts:a.ts,metaHmac:a.meta_hmac,fbid:a.fbid}}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.auth,e=a.ciphertextHmac,f=a.encFilehash,g=a.hostname,l=a.type,m=a.signal,n=a.onProgress,o=a.byteRange,p=a.mediaId,q=c("WAWebMmsClientFormatUploadUrl")({auth:b,encFilehash:f,hostname:g,type:l,byteRange:o,mediaId:p,token:a.token});b={encFilehash:f,type:l,url:q};d("WALogger").LOG(i()).devConsole(b);try{g=l===d("WAWebMmsMediaTypes").MEDIA_TYPES.BIZ_COVER_PHOTO?k:j;o=(yield d("WAWebHttpExtendedFetch").extendedFetch(q,{method:"post",body:e,signal:m,onProgress:n}).then(function(a){if(!a.ok)switch(a.status){case 401:throw new(d("WAWebMmsClientErrors").MMSUnauthorizedError)("mmsUpload",{url:q});case 413:throw new(d("WAWebMmsClientErrors").MediaTooLargeError)("mmsUpload",{url:q});case 415:throw new(d("WAWebMmsClientErrors").MediaInvalidError)("mmsUpload: hash mismatch",{url:q});case 507:throw new(d("WAWebMmsClientErrors").MMSThrottleError)("mmsUpload",{url:q});default:throw new(d("WAWebHttpErrors").HttpStatusCodeError)(a.status,"mmsUpload",{url:q})}return a.json()}).then(g));d("WALogger").LOG(h()).devConsole(b);return o}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsUpload",a,b,!1);throw a}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebMediaHostsMaybeSwitchHost",["WAWebMediaHost"],(function(a,b,c,d,e,f,g){var h=50*1024*1024;function i(a,b,c){return a.equals(b)&&c!=null&&b!=null&&!b.equals(c)}function a(a,b,c,e){var f=b.selectedHost;b=b.fallbackHost;var g=c.selectedHost;c=c.fallbackHost;if(e<h)return{changed:!1,host:a};switch(a.type){case d("WAWebMediaHost").HOST_TYPE.PRIMARY:if(!a.equals(g))return{changed:!0,host:g};break;case d("WAWebMediaHost").HOST_TYPE.FALLBACK:if(!f.equals(g))return{changed:!0,host:g};else if(i(a,b,c)||i(a,f.fallback,g.fallback))return{changed:!0,host:f};break}return{changed:!1,host:a}}g.THRESHOLD=h;g.maybeSwitchHost=a}),98);
__d("WAWebMmsClientPollMediaHosts",["Promise","WAPromiseDelays","WARetryPromise","WAWebMediaHostsMaybeSwitchHost","WAWebMmsMediaTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=5*60*1e3;function a(a,b){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT&&b>d("WAWebMediaHostsMaybeSwitchHost").THRESHOLD}function e(a,b){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT&&((a=b)!=null?a:0)>d("WAWebMediaHostsMaybeSwitchHost").THRESHOLD}function f(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.connectionBlock;yield d("WAPromiseDelays").delayMs(i,a.signal);return c("WARetryPromise")(function(c){var f=c.retry;return new(h||(h=b("Promise")))(function(b){return a.getMediaHosts().then(function(c){var g=c.selectedHost;c=c.fallbackHost;g={selectedHost:g,fallbackHost:c};c=a.getRemainingBytes();if(c==null)return f(i);c=d("WAWebMediaHostsMaybeSwitchHost").maybeSwitchHost(a.getHost(),e,g,c);var h=c.changed;c=c.host;e=g;return h?b(c):f(i)})})},a.signal)});return j.apply(this,arguments)}g.SERVER_POLLING_INTERVAL=i;g.shouldPollUploadHosts=a;g.shouldPollDownloadHosts=e;g.pollMediaHosts=f}),98);
__d("WAWebMmsClientSelectHost",[],(function(a,b,c,d,e,f){var g=4;function a(a){var b=a.selectedHost,c=a.fallbackHost,d=a.attemptCount,e=a.lastHostUsed;a=a.lastFetchMadeProgress;if(a&&e)return e;if(d<=1)return b;if(d===g-1&&c)return c;return(e==null?void 0:e.equals(b))&&b.fallback!=null?b.fallback:(a=c)!=null?a:b}f["default"]=a}),66);
__d("WAWebMmsClientMmsUploadStream",["WALogger","WAWebHttpErrors","WAWebHttpExtendedFetch","WAWebMmsClientErrors","WAWebMmsClientFormatUploadUrl","WAWebMmsClientMmsLogError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsUploadStreamFinalize: success"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsUploadStreamFinalize: start"]);i=function(){return a};return a}function j(a,b,c){switch(a){case 401:throw new(d("WAWebMmsClientErrors").MMSUnauthorizedError)(b,{url:c});case 413:throw new(d("WAWebMmsClientErrors").MediaTooLargeError)(b,{url:c});case 415:throw new(d("WAWebMmsClientErrors").MediaInvalidError)(b+": hash mismatch",{url:c});case 507:throw new(d("WAWebMmsClientErrors").MMSThrottleError)("mmsUploadStreamFinalize",{url:c});default:throw new(d("WAWebHttpErrors").HttpStatusCodeError)(a,b,{url:c})}}function a(a){var b=a.auth,e=a.encFilehash,f=a.type,g=a.hostname,h=a.byteStart,i=a.byteEnd,k=a.chunk,l=a.signal,m=a.onProgress,n=a.mediaId;a=a.token;var o=c("WAWebMmsClientFormatUploadUrl")({auth:b,encFilehash:e,type:f,hostname:g,query:{stream:1},byteRange:{start:h,end:i},mediaId:n,token:a});return d("WAWebHttpExtendedFetch").extendedFetch(o,{method:"post",body:k,signal:l,onProgress:m}).then(function(a){a.ok||j(a.status,"mmsUploadStream",o)})}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.auth,e=a.encFilehash,f=a.type,g=a.hostname,k=a.finalHash,l=a.signal;a=a.mediaId;var m=c("WAWebMmsClientFormatUploadUrl")({auth:b,encFilehash:e,type:f,hostname:g,query:{stream:1,final_hash:k},mediaId:a,token:e});b={encFilehash:e,type:f,url:m};d("WALogger").LOG(i()).devConsole(b);try{g=(yield d("WAWebHttpExtendedFetch").extendedFetch(m,{method:"post",signal:l}).then(function(a){a.ok||j(a.status,"mmsUploadStreamFinalize",m);return a.json()}).then(function(a){if(a.direct_path==null||a.direct_path==="")throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUploadStreamFinalize: missing direct_path");if(a.url==null||a.url==="")throw new(d("WAWebHttpErrors").HttpInvalidResponseError)("mmsUploadStreamFinalize: missing url");return{directPath:a.direct_path,url:a.url,handle:a.handle}}));d("WALogger").LOG(h()).devConsole(b);return g}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsUpload",a,b,!1);throw a}});return k.apply(this,arguments)}g.mmsUploadStream=a;g.mmsUploadStreamFinalize=e}),98);
__d("WAWebWamEnumOverallLastUploadRetryPhaseType",[],(function(a,b,c,d,e,f){a=Object.freeze({RESUME_CHECK:1,UPLOAD:2,FINALIZE:3});f.OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE=a}),66);
__d("WAWebMmsClientUploadStreamer",["Promise","WAExponentialBackoff","WALogger","WARaceSignal","WARetryPromise","WAWebHttpErrors","WAWebMediaHosts","WAWebMediaHostsRouteSelection","WAWebMmsClientIsErrorRetryable","WAWebMmsClientMmsBackoffOptions","WAWebMmsClientMmsUploadStream","WAWebMmsClientPollMediaHosts","WAWebMmsClientSelectHost","WAWebMmsMediaTypes","WAWebNetworkStatus","WAWebServerPropsModel","WAWebWamEnumOverallLastUploadRetryPhaseType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadStreamer: [","] finalizing"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadStreamer: [","] uploading chunk ","/",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadStreamer: [","] start upload"]);k=function(){return a};return a}function a(a,b){var c=n(b);return b===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT&&c>0&&a>c}e=function(){function a(a){var c;this.$2=Date.now();this.$3=0;this.$4=0;this.$9=(h||(h=b("Promise"))).resolve();this.$6=a.encFilehash;this.$5=a.type;this.$7=a.signal;this.$3=(c=a.byteOffset)!=null?c:0;this.$1=a.encFilehash.slice(0,10);this.$11=a.token;this.$12=a.onUploadHostFound;this.$13=a.onUploadAttemptSuccess;this.$14=a.onUploadAttemptError;this.$15=a.onProgress;this.$16=a.onFinalize;this.$17=a.onStreamUploadStart;this.$10=a.mediaId}var e=a.prototype;e.uploadCompleteFile=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.ciphertextHmac;a=new Uint8Array(a);this.$8=a.byteLength;var b=n(this.$5);b=b===0?a.byteLength:b;this.$17==null?void 0:this.$17();d("WALogger").LOG(k(),this.$1);yield c("WAWebNetworkStatus").waitIfOffline({signal:this.$7});var e=Math.ceil((a.byteLength-this.$3)/b);for(var f=0;f<e;f++){this.$18(f,e);var g=this.$3+f*b,h=g+b;h=a.subarray(g,h);yield this.$19(h,g);this.$4+=h.byteLength}g=(yield this.$20(this.$6));this.$13==null?void 0:this.$13(Date.now()-this.$2);return g});function e(b){return a.apply(this,arguments)}return e}();e.startUploadFromClient=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c("WAWebNetworkStatus").waitIfOffline({signal:this.$7}),this.$17==null?void 0:this.$17()});function d(){return a.apply(this,arguments)}return d}();e.uploadChunkFromClient=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;this.$9=this.$9.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c.$19(a,c.$3),c.$4+=a.byteLength,c.$3+=a.byteLength}));yield this.$9});function c(b){return a.apply(this,arguments)}return c}();e.finalizeUploadFromClient=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=(yield this.$9.then(function(){return b.$20(a)}));this.$13==null?void 0:this.$13(Date.now()-this.$2);return c});function c(b){return a.apply(this,arguments)}return c}();e.$21=function(){this.$2=Date.now()};e.$22=function(){return Date.now()-this.$2};e.$23=function(){if(this.$8==null)return;return this.$8-this.$4};e.$18=function(a,b){d("WALogger").LOG(j(),this.$1,a+1,b)};e.$19=function(a,e){var f=this;return d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:this.$7}),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){try{yield f.$24(a,e,c)}catch(a){if(l(a,c)){f.$14==null?void 0:f.$14(a,f.$22(),c,d("WAWebWamEnumOverallLastUploadRetryPhaseType").OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE.UPLOAD);f.$21();return b(a)}throw a}});return function(a,b){return c.apply(this,arguments)}}())};e.$20=function(a){var e=this;return d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:this.$7}),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){try{e.$16==null?void 0:e.$16();return yield e.$25(a,c)}catch(a){if(m(a,c)){e.$14==null?void 0:e.$14(a,e.$22(),c,d("WAWebWamEnumOverallLastUploadRetryPhaseType").OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE.FINALIZE);e.$21();return b(a)}throw a}});return function(a,b){return c.apply(this,arguments)}}())};e.$24=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=this,i=null,j=!1;yield c("WAWebNetworkStatus").waitIfOffline({signal:this.$7});var k=(yield this.$26(f)),l=k.auth,m=babelHelpers.objectWithoutPropertiesLoose(k,["auth"]),n=i=c("WAWebMmsClientSelectHost")({selectedHost:m.selectedHost,fallbackHost:m.fallbackHost,lastHostUsed:i,lastFetchMadeProgress:j,attemptCount:f}),o=function(a){j=!0,g.$15==null?void 0:g.$15(a,e)};return c("WARetryPromise")(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){j=j.retry;var k=new AbortController(),p=k.signal;p=(yield c("WARaceSignal")([p,g.$7],function(c){var i=g.$8!=null&&d("WAWebMmsClientPollMediaHosts").shouldPollUploadHosts(g.$5,g.$8)?d("WAWebMmsClientPollMediaHosts").pollMediaHosts({connectionBlock:m,signal:c,getHost:function(){return n},getMediaHosts:function(){return g.$26(f,!0)},getRemainingBytes:function(){return g.$23()}}).then(function(a){return{host:a,kind:"host-changed"}}):null;c=d("WAWebMmsClientMmsUploadStream").mmsUploadStream({auth:l,encFilehash:g.$6,type:g.$5,hostname:n.hostname,byteStart:e,byteEnd:e+a.byteLength,chunk:a,signal:c,onProgress:o,mediaId:g.$10,token:g.$11}).then(function(){return{kind:"upload-completed"}});return(h||(h=b("Promise"))).race([c,i].filter(Boolean))["finally"](function(){return k.abort()})}));if(p.kind==="host-changed"){i=n;n=p.host;return j()}});return function(a){return j.apply(this,arguments)}}())});function e(b,c,d){return a.apply(this,arguments)}return e}();e.$25=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield c("WAWebNetworkStatus").waitIfOffline({signal:this.$7});b=(yield this.$26(b));var e=b.auth;b=b.selectedHost;d("WALogger").LOG(i(),this.$1);return d("WAWebMmsClientMmsUploadStream").mmsUploadStreamFinalize({auth:e,hostname:b.hostname,encFilehash:this.$6,finalHash:a,type:this.$5,signal:this.$7,mediaId:this.$10})});function e(b,c){return a.apply(this,arguments)}return e}();e.$26=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);b=(yield d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:d("WAWebMediaHostsRouteSelection").OPERATIONS.UPLOAD,encFilehash:this.$6,type:this.$5,signal:this.$7,forceRefresh:b}));this.$12==null?void 0:this.$12({failCount:a,hostName:b.selectedHost.hostname,hostClass:b.selectedHost["class"]});return b});function c(b,c){return a.apply(this,arguments)}return c}();return a}();function l(a,b){return d("WAWebMmsClientIsErrorRetryable").isErrorRetryable(a)&&b<c("WAWebMmsClientMmsBackoffOptions").retries}function m(a,b){return a instanceof d("WAWebHttpErrors").HttpStatusCodeError&&a.status>=500?!1:l(a,b)}function n(a){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT?d("WAWebServerPropsModel").ServerProps.streamingUploadChunkSize:0}g.shouldUseStreamingUpload=a;g.UploadStreamer=e}),98);
__d("WAWebMmsOperationsConst",[],(function(a,b,c,d,e,f){a={DOWNLOAD:"DOWNLOAD",UPLOAD:"UPLOAD"};b=a;f["default"]=b}),66);
__d("WAWebMmsClient",["Promise","WAExponentialBackoff","WALogger","WANullthrows","WARaceSignal","WARetryPromise","WAWebMediaHosts","WAWebMmsClientIsErrorRetryable","WAWebMmsClientMmsBackoffOptions","WAWebMmsClientMmsCheckIfUploadExists","WAWebMmsClientMmsDeleteMdHistorySyncBlob","WAWebMmsClientMmsDownload","WAWebMmsClientMmsLogError","WAWebMmsClientMmsUpload","WAWebMmsClientPollMediaHosts","WAWebMmsClientSelectHost","WAWebMmsClientUploadStreamer","WAWebMmsMediaTypes","WAWebMmsOperationsConst","WAWebNetworkStatus","WAWebWamEnumOverallLastUploadRetryPhaseType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.upload: switch to new host"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.upload: attempt #",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to compute upload offset"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.download: [","] switch to new host"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.download: [","] Content-Length "," bytes"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.download: [","] attempt #",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.download: [","] success"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.download: [","] start"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.upload: success"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.upload: start"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.checkIfUploadExists: success"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.checkIfUploadExists: attempt #",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["mmsClient.checkIfUploadExists: start"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["runMmsTaskWithBackoff: attempt #",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["runTaskWithBackoff: start"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["runMmsTaskWithBackoff: attempt #",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["runTaskWithBackoff: start"]);y=function(){return a};return a}function a(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.encFilehash,f=a.signal,g=a.type,h=a.mediaId,i=!1,j={encFilehash:a.encFilehash,type:a.type};d("WALogger").LOG(u()).devConsole(j);try{var k=null,l=(yield d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:f}),function(){var l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,l){d("WALogger").LOG(t(),l+1).devConsole(j);yield c("WAWebNetworkStatus").waitIfOffline({signal:f});try{var m=(yield d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:c("WAWebMmsOperationsConst").UPLOAD,encFilehash:e,type:g,signal:f})),n=m.auth,o=m.selectedHost;m=m.fallbackHost;o=c("WAWebMmsClientSelectHost")({selectedHost:o,fallbackHost:m,lastHostUsed:k,attemptCount:l,lastFetchMadeProgress:i});k=o;return yield c("WAWebMmsClientMmsCheckIfUploadExists")({auth:n,encFilehash:e,hostname:o.hostname,type:g,signal:f,onProgress:function(){i=!0},mediaId:h,token:a.token})}catch(a){if(d("WAWebMmsClientIsErrorRetryable").isErrorRetryable(a))return b(a);throw a}});return function(a,b){return l.apply(this,arguments)}}()));d("WALogger").LOG(s()).devConsole(j);return l}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsClient.checkIfUploadExists",a,j);throw a}});return z.apply(this,arguments)}function e(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.encFilehash,e=a.type,f=a.onUploadAttemptSuccess;b={encFilehash:b,type:e};d("WALogger").LOG(r()).devConsole(b);try{if(d("WAWebMmsClientUploadStreamer").shouldUseStreamingUpload(a.ciphertextHmac.byteLength,a.type)){e=a.ciphertextHmac;var g=babelHelpers.objectWithoutPropertiesLoose(a,["ciphertextHmac"]);g=new(d("WAWebMmsClientUploadStreamer").UploadStreamer)(g);return yield g.uploadCompleteFile({ciphertextHmac:e})}g=(yield L(a));e=g.response;a=g.retryStartTime;f(Date.now()-a);d("WALogger").LOG(q()).devConsole(b);return c("WANullthrows")(e)}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsClient.upload",a,b,!1);throw a}});return A.apply(this,arguments)}function f(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,c=a.filehash,e=a.type,f=a.debugString,g=a.staticUrl,h=a.onDownloadAttemptSuccess;b={directPath:b,filehash:c,type:e,staticUrl:g};d("WALogger").LOG(p(),f).devConsole(b);try{c=(yield H(a));e=c.response;g=c.retryStartTime;h(Date.now()-g);d("WALogger").LOG(o(),f).devConsole(b);return e}catch(a){d("WAWebMmsClientMmsLogError").mmsLogError("mmsClient.download",a,b);throw a}});return B.apply(this,arguments)}function C(a){return E(function(b){return d("WAWebMmsClientMmsDownload").mmsCheckExistence(babelHelpers["extends"]({},a,{hostname:b}))},a)}function D(a){return E(function(b){return d("WAWebMmsClientMmsDownload").mmsGetEncryptedMediaSize(babelHelpers["extends"]({},a,{hostname:b}))},a)}function E(a,e){var f=e.directPath,g=e.encFilehash,h=e.type,i=e.signal,j={directPath:f,type:h};d("WALogger").LOG(y()).devConsole(j);return d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:i}),function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){d("WALogger").LOG(x(),e+1).devConsole(j);try{e=(yield F({operation:c("WAWebMmsOperationsConst").DOWNLOAD,directPath:f,encFilehash:g,type:h,signal:i,failCount:e}));e=(yield a(e));return e}catch(a){if(d("WAWebMmsClientIsErrorRetryable").isErrorRetryable(a))return b(a);throw a}});return function(a,b){return e.apply(this,arguments)}}())}function F(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.failCount,c=a.operation,e=a.directPath,f=a.encFilehash,g=a.type;a=a.signal;c=(yield d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:c,directPath:e,encFilehash:f,type:g,signal:a}));e=c.selectedHost;f=c.fallbackHost;g=b>=2&&f?f:e;return g.hostname});return G.apply(this,arguments)}function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.debugString,f=a.signal,g=a.directPath,i=a.filehash,j=a.staticUrl,k=a.type,o=a.onDownloadHostFound,p=a.mode,q=a.byteRange,r=a.onDownloadAttemptError,s=a.onData,t=a.onProgress;a=Date.now();var u=!1,v={directPath:g,filehash:i,type:k,staticUrl:j},w=null,x=(yield d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:f}),function(){var x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(x,y){a=Date.now();d("WALogger").LOG(n(),e,y+1).devConsole(v);var z=function(a){return d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:c("WAWebMmsOperationsConst").DOWNLOAD,directPath:g,encFilehash:i,type:k,signal:f,forceRefresh:a})};try{var A=(yield z()),B=A.selectedHost;A=A.fallbackHost;var C=c("WAWebMmsClientSelectHost")({selectedHost:B,fallbackHost:A,attemptCount:y,lastHostUsed:w,lastFetchMadeProgress:u});w=C;o({hostName:C.hostname,hostClass:C["class"],failCount:y});var D=0,E=null,F={selectedHost:B,fallbackHost:A},G=function(a){if(a!=null&&E==null){a=a.get("Content-Length");a=parseInt(a,10);E=Number.isNaN(a)?null:a;d("WALogger").DEV(m(),e,E)}};return yield c("WARetryPromise")(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var m=a.retry;a.failCount;var n=function(a){t==null?void 0:t(a),u=!0,a.lengthComputable&&(D=a.loaded)};D=0;var o=new AbortController();a=o.signal;a=(yield c("WARaceSignal")([f,a],function(a){var c=d("WAWebMmsClientMmsDownload").mms4Download({directPath:g,encFilehash:i,staticUrl:j,hostname:C.hostname,type:k,signal:a,mode:p,byteRange:q,debugString:e,onHeadersReceived:G,onProgress:n,onData:s,downloadBucket:C.selectedBucket}).then(function(a){return{kind:"download-completed",arrayBuffer:a}});a=d("WAWebMmsClientPollMediaHosts").shouldPollDownloadHosts(k,E)?d("WAWebMmsClientPollMediaHosts").pollMediaHosts({connectionBlock:F,getHost:function(){return C},getMediaHosts:function(){return z(!0)},getRemainingBytes:function(){return E!=null?E-D:null},signal:a}).then(function(a){return{kind:"host-changed",host:a}}):null;return(h||(h=b("Promise"))).race([c,a].filter(Boolean))["finally"](function(){return o.abort()})}));if(a.kind==="host-changed"){C=a.host;w=C;d("WALogger").DEV(l(),e).devConsole(C);return m()}return a.arrayBuffer});return function(b){return a.apply(this,arguments)}}())}catch(b){u=!1;B=d("WAWebMmsClientIsErrorRetryable").isErrorRetryable(b);A=!B||y===c("WAWebMmsClientMmsBackoffOptions").retries;A||r({error:b,overallT:Date.now()-a,failCount:y});if(B)return x(b);throw b}});return function(a,b){return x.apply(this,arguments)}}()));return{response:c("WANullthrows")(x),retryStartTime:a}});return I.apply(this,arguments)}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.auth,e=a.encFilehash,f=a.hostname,g=a.type,h=a.signal,i=a.byteLength,j=a.byteOffset,l=a.failCount,m=a.mediaId;a=a.token;if(j!=null&&l===0)return j;if(!d("WAWebMmsClientPollMediaHosts").shouldPollUploadHosts(g,i))return 0;try{l=(yield c("WAWebMmsClientMmsCheckIfUploadExists")({auth:b,encFilehash:e,hostname:f,type:g,signal:h,mediaId:m,token:a}));if(l.complete)return 0;j=l.resume;return j>=i?0:j}catch(a){d("WALogger").ERROR(k()).verbose().devConsole(a).sendLogs("upload-offset-failed");return 0}});return K.apply(this,arguments)}function L(a){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.ciphertextHmac,f=a.encFilehash,g=a.type,k=a.signal,l=a.onUploadHostFound,m=a.onUploadAttemptError,n=a.onProgress,o=a.byteOffset,p=a.mediaId,q=!1,r=Date.now(),s={encFilehash:f,type:g},t=null,u=(yield d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:k}),function(){var u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(u,v){var w=function(a){return d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:c("WAWebMmsOperationsConst").UPLOAD,encFilehash:f,type:g,signal:k,forceRefresh:a})};r=Date.now();d("WALogger").LOG(j(),v+1).devConsole(s);try{yield c("WAWebNetworkStatus").waitIfOffline({signal:k});var x=(yield w()),y=x.auth,z=x.selectedHost;x=x.fallbackHost;var A={selectedHost:z,fallbackHost:x},B=c("WAWebMmsClientSelectHost")({selectedHost:z,fallbackHost:x,attemptCount:v,lastHostUsed:t,lastFetchMadeProgress:q});t=B;l({hostName:B.hostname,hostClass:B["class"],failCount:v});return yield c("WARetryPromise")(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){j=j.retry;var l=(yield J({auth:y,encFilehash:f,byteLength:e.byteLength,hostname:B.hostname,type:g,signal:k,byteOffset:o,failCount:v,mediaId:p,token:a.token})),m=new AbortController(),r=m.signal;r=(yield c("WARaceSignal")([k,r],function(i){i=d("WAWebMmsClientPollMediaHosts").shouldPollUploadHosts(g,e.byteLength)?d("WAWebMmsClientPollMediaHosts").pollMediaHosts({connectionBlock:A,getHost:function(){return B},getMediaHosts:function(){return w(!0)},getRemainingBytes:function(){return e.byteLength},signal:i}).then(function(a){return{kind:"host-changed",host:a}}):null;var j=c("WAWebMmsClientMmsUpload")({auth:y,ciphertextHmac:l>0?new Uint8Array(e).subarray(l):e,hostname:B.hostname,encFilehash:f,type:g,signal:k,onProgress:function(a){q=!0,n(a,l)},byteRange:l>0?{start:l,end:e.byteLength}:void 0,mediaId:p,token:a.token}).then(function(a){return{kind:"upload-completed",value:a}});return(h||(h=b("Promise"))).race([j,i].filter(Boolean))["finally"](function(){return m.abort()})}));if(r.kind==="host-changed"){B=r.host;t=B;d("WALogger").DEV(i()).devConsole(B);return j()}return r.value});return function(a){return j.apply(this,arguments)}}())}catch(a){q=!1;z=d("WAWebMmsClientIsErrorRetryable").isErrorRetryable(a);x=!z||v===c("WAWebMmsClientMmsBackoffOptions").retries;x||m(a,Date.now()-r,v,d("WAWebWamEnumOverallLastUploadRetryPhaseType").OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE.UPLOAD);if(z)return u(a);throw a}});return function(a,b){return u.apply(this,arguments)}}()));return{response:u,retryStartTime:r}});return M.apply(this,arguments)}function N(a){var b=a.directPath,e=a.encFilehash;return O(function(a,d){return c("WAWebMmsClientMmsDeleteMdHistorySyncBlob")({directPath:b,hostname:a,encFilehash:e,auth:d})},babelHelpers["extends"]({},a,{type:d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE,operation:c("WAWebMmsOperationsConst").UPLOAD}))}function O(a,e){var f=e.directPath,g=e.encFilehash,h=e.type,i=e.signal,j=e.operation,k={directPath:f,type:h};d("WALogger").LOG(w()).devConsole(k);return d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},c("WAWebMmsClientMmsBackoffOptions"),{signal:i}),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){d("WALogger").LOG(v(),c+1).devConsole(k);try{c=(yield P({operation:j,directPath:f,encFilehash:g,type:h,signal:i,failCount:c}));var e=c.hostname;c=c.auth;e=(yield a(e,c));return e}catch(a){if(d("WAWebMmsClientIsErrorRetryable").isErrorRetryable(a))return b(a);throw a}});return function(a,b){return c.apply(this,arguments)}}())}function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.failCount,c=a.operation,e=a.directPath,f=a.encFilehash,g=a.type;a=a.signal;c=(yield d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:c,directPath:e,encFilehash:f,type:g,signal:a}));e=c.selectedHost;f=c.fallbackHost;g=c.auth;a=b>=2&&f?f:e;return{hostname:a.hostname,auth:g}});return Q.apply(this,arguments)}f={download:f,upload:e,checkExistence:C,getEncryptedMediaSize:D,checkIfUploadExists:a,deleteMdHistorySyncBlob:N};e=f;g["default"]=e}),98);
__d("WAWebWamEnumPeerDataRequestType",[],(function(a,b,c,d,e,f){a=Object.freeze({UPLOAD_STICKER:0,SEND_RECENT_STICKER_BOOTSTRAP:1,GENERAL_LINK_PREVIEW:2,HISTORY_SYNC_ON_DEMAND:3,PLACEHOLDER_MESSAGE_RESEND:4});f.PEER_DATA_REQUEST_TYPE=a}),66);
__d("WAWebWamEnumPeerDataResponseResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,OTHER_ERROR:2,REQUEST_TARGET_NOT_FOUND:3,REQUEST_INVALID:4,FAIL_TO_UPLOAD:5,FAIL_TO_SEND_RESPONSE:6,REQUEST_TOO_OLD:7});f.PEER_DATA_RESPONSE_RESULT_TYPE=a}),66);
__d("WAWebNonMessagePeerDataMediaUploadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPeerDataRequestType","WAWebWamEnumPeerDataResponseResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({NonMessagePeerDataMediaUpload:[3902,{peerDataErrorCount:[1,a.TYPES.INTEGER],peerDataExistingDataNoUploadCount:[2,a.TYPES.INTEGER],peerDataNotFoundCount:[3,a.TYPES.INTEGER],peerDataRequestCount:[4,a.TYPES.INTEGER],peerDataRequestSessionId:[5,a.TYPES.STRING],peerDataRequestType:[6,d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE],peerDataResponseResult:[8,d("WAWebWamEnumPeerDataResponseResultType").PEER_DATA_RESPONSE_RESULT_TYPE],peerDataSuccessInlineNoUploadCount:[9,a.TYPES.INTEGER],peerDataSuccessUploadCount:[7,a.TYPES.INTEGER]},[1,1,1],"regular"]},{NonMessagePeerDataMediaUpload:[]});g.NonMessagePeerDataMediaUploadWamEvent=b}),98);
__d("WAWebWamEnumPeerDataResponseApplyResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,OTHER_ERROR:2,INVALID_RESPONSE:3,FAIL_TO_DOWNLOAD:4,REQUEST_TIMEOUT:5});f.PEER_DATA_RESPONSE_APPLY_RESULT_TYPE=a}),66);
__d("WAWebNonMessagePeerDataOperationResponseWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPeerDataRequestType","WAWebWamEnumPeerDataResponseApplyResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({NonMessagePeerDataOperationResponse:[3904,{peerDataErrorCount:[1,a.TYPES.INTEGER],peerDataNotFoundCount:[2,a.TYPES.INTEGER],peerDataRequestSessionId:[3,a.TYPES.STRING],peerDataRequestType:[4,d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE],peerDataResponseApplyResult:[8,d("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE],peerDataResponseCount:[5,a.TYPES.INTEGER],peerDataSuccessProcessCount:[6,a.TYPES.INTEGER],peerDataSuccessResponseCount:[7,a.TYPES.INTEGER]},[1,1,1],"regular"]},{NonMessagePeerDataOperationResponse:[]});g.NonMessagePeerDataOperationResponseWamEvent=b}),98);
__d("WAWebNonMessagePeerDataRequestWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPeerDataRequestType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({NonMessagePeerDataRequest:[3906,{peerDataRequestCount:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER],peerDataRequestSessionId:[2,d("WAWebWamCodegenUtils").TYPES.STRING],peerDataRequestType:[3,d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE]},[1,1,1],"regular"]},{NonMessagePeerDataRequest:[]});g.NonMessagePeerDataRequestWamEvent=a}),98);
__d("WAWebWebcLinkPreviewResponseHandleWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcLinkPreviewResponseHandle:[3860,{didRespondHqPreview:[5,a.TYPES.BOOLEAN],isPreviewSuccess:[2,a.TYPES.BOOLEAN],previewDurationMs:[4,a.TYPES.INTEGER],previewSessionId:[3,a.TYPES.STRING]},[1,1,1],"regular"]},{WebcLinkPreviewResponseHandle:[]});g.WebcLinkPreviewResponseHandleWamEvent=b}),98);
__d("WAWebNonMessageDataRequestLoggingUtils",["WALogger","WATimeUtils","WAWebNonMessagePeerDataMediaUploadWamEvent","WAWebNonMessagePeerDataOperationResponseWamEvent","WAWebNonMessagePeerDataRequestWamEvent","WAWebProtobufsE2E.pb","WAWebWamEnumPeerDataRequestType","WAWebWebcLinkPreviewResponseHandleWamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["link preview: session id: ",", is success: ",", durationMs: ",""]);h=function(){return a};return a}var i=new Map();function a(a,b,c){var e=void 0,f=d("WATimeUtils").unixTimeMs();if(a!=null){var g=i.get(a);g!=null&&(e=f-g)}d("WALogger").LOG(h(),a,b,e);new(d("WAWebWebcLinkPreviewResponseHandleWamEvent").WebcLinkPreviewResponseHandleWamEvent)({previewSessionId:a,isPreviewSuccess:b,previewDurationMs:(f=e)!=null?f:void 0,didRespondHqPreview:c}).commit();a!=null&&i["delete"](a)}function b(a,b){var c=k(a);new(d("WAWebNonMessagePeerDataRequestWamEvent").NonMessagePeerDataRequestWamEvent)({peerDataRequestCount:j(a,b),peerDataRequestType:c,peerDataRequestSessionId:b.id.id}).commit()}function j(a,b){switch(a){case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.SEND_RECENT_STICKER_BOOTSTRAP:return 1;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:a=(a=b.peerDataOperationRequestMessage)==null?void 0:a.requestStickerReupload;return(a=a==null?void 0:a.length)!=null?a:0;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.GENERATE_LINK_PREVIEW:a=(a=b.peerDataOperationRequestMessage)==null?void 0:a.requestStickerReupload;return(a=a==null?void 0:a.length)!=null?a:0;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.HISTORY_SYNC_ON_DEMAND:return 1;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND:b=(a=b.peerDataOperationRequestMessage)==null?void 0:a.placeholderMessageResendRequest;return(a=b==null?void 0:b.length)!=null?a:0}}function k(a){switch(a){case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:return d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE.UPLOAD_STICKER;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.SEND_RECENT_STICKER_BOOTSTRAP:return d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE.SEND_RECENT_STICKER_BOOTSTRAP;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.GENERATE_LINK_PREVIEW:return d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE.GENERAL_LINK_PREVIEW;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.HISTORY_SYNC_ON_DEMAND:return d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE.HISTORY_SYNC_ON_DEMAND;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND:return d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE.PLACEHOLDER_MESSAGE_RESEND}}function c(a,b,c,e,f,g,h){a=k(a);new(d("WAWebNonMessagePeerDataOperationResponseWamEvent").NonMessagePeerDataOperationResponseWamEvent)({peerDataResponseCount:c,peerDataSuccessResponseCount:e,peerDataSuccessProcessCount:f,peerDataErrorCount:g,peerDataNotFoundCount:h,peerDataRequestType:a,peerDataRequestSessionId:b}).commit()}function e(a,b,c,e,f,g,h){if(a!==d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER)return;a=k(a);new(d("WAWebNonMessagePeerDataMediaUploadWamEvent").NonMessagePeerDataMediaUploadWamEvent)({peerDataRequestCount:c,peerDataSuccessUploadCount:e,peerDataExistingDataNoUploadCount:f,peerDataErrorCount:g,peerDataNotFoundCount:h,peerDataRequestType:a,peerDataRequestSessionId:b}).commit()}function f(a,b){new(d("WAWebNonMessagePeerDataOperationResponseWamEvent").NonMessagePeerDataOperationResponseWamEvent)({peerDataRequestType:d("WAWebWamEnumPeerDataRequestType").PEER_DATA_REQUEST_TYPE.HISTORY_SYNC_ON_DEMAND,peerDataResponseApplyResult:a,peerDataRequestSessionId:b}).commit()}function l(a,b,c,e,f,g){a=k(a);new(d("WAWebNonMessagePeerDataOperationResponseWamEvent").NonMessagePeerDataOperationResponseWamEvent)({peerDataResponseCount:e,peerDataSuccessResponseCount:f,peerDataErrorCount:g,peerDataResponseApplyResult:c,peerDataRequestType:a,peerDataRequestSessionId:b}).commit()}g.sendTimes=i;g.logLinkPreviewResponse=a;g.logNonMessagePeerDataRequest=b;g.convertRequestTypeEnumForLogging=k;g.logNonMessagePeerDataResponse=c;g.logMediaUpload=e;g.logHistorySyncOnDemandResponse=f;g.logPlaceholderMessageResendResponse=l}),98);
__d("WAWebCryptoMediaRetry",["WABinary","WACryptoAesGcm","WACryptoHkdf","WALogger","WAWebProtobufsMmsRetry.pb","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["encodeServerErrorReceipt"]);h=function(){return a};return a}function i(a){d("WALogger").LOG(h()).devConsole(a);var b=new(d("WABinary").Binary)();d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsMmsRetry.pb").ServerErrorReceiptSpec,a,b);return b.readByteArray()}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield n(a));c=(c==null?void 0:c.slice())||o();var e=i({stanzaId:b});a=(yield d("WACryptoAesGcm").gcmEncrypt(a,c,e,b));return{ciphertext:a,iv:c}});return j.apply(this,arguments)}function c(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield n(a));a=(yield d("WACryptoAesGcm").gcmDecrypt(a,c,e,b));return d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsMmsRetry.pb").MediaRetryNotificationSpec,a)});return k.apply(this,arguments)}var l=12,m="WhatsApp Media Retry Notification";function n(a){return d("WACryptoHkdf").extractAndExpand(a,m,32)}function o(){var a=new Uint8Array(l);self.crypto.getRandomValues(a);return a}g.encryptServerErrorReceipt=a;g.decryptMediaRetryNotification=c;g.ENC_IV_SIZE=l}),98);
__d("WAWebSendHistSyncServerErrorReceiptJob",["WABase64","WADeprecatedSendIq","WAWap","WAWebCommsAckParser","WAWebCommsWapMd","WAWebCryptoMediaRetry","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;c=d("WABase64").decodeB64(c);c=(yield d("WAWebCryptoMediaRetry").encryptServerErrorReceipt(c,b));var f=c.ciphertext;c=c.iv;f=(e=d("WAWap")).wap("receipt",{type:"server-error",to:d("WAWebCommsWapMd").USER_JID(a),id:e.CUSTOM_STRING(b),category:"peer"},e.wap("encrypt",null,e.wap("enc_p",null,f),e.wap("enc_iv",null,c)));return d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(f,d("WAWebCommsAckParser").toCoreAckTemplate({id:b,"class":"receipt",type:"server-error",from:a,participant:null}))});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleHistorySyncChunk",["Promise","WAAsyncSleep","WABinary","WAGzip","WALogger","WALongInt","WANullthrows","WATimeUtils","WAWebAddonGatingUtils","WAWebAddonProcessMsgsUtils","WAWebApiChat","WAWebApiHistorySyncNotification","WAWebChatConstants","WAWebCmd","WAWebDBMessageUtils","WAWebDownloadManager","WAWebHandleHistorySyncMsg","WAWebHistoryMsgHandlerAction","WAWebHistorySyncNotificationUtils","WAWebHistorySyncProgress","WAWebHistorySyncWorkerCompatibleNotificationUtils","WAWebHttpErrors","WAWebMmsClient","WAWebMsgKey","WAWebMsgType","WAWebNetworkStatus","WAWebNonMessageDataRequestHistorySyncOnDemandUtils","WAWebNonMessageDataRequestLoggingUtils","WAWebPinMsgParseWebMsgInfoPinInChat","WAWebPollsParseWebMsgInfoPollUpdates","WAWebProtobufsE2E.pb","WAWebProtobufsHistorySync.pb","WAWebReactionsParseWebMsgInfoReaction","WAWebSchemaMessage","WAWebSendHistSyncServerErrorReceiptJob","WAWebSendReceiptJobCommon","WAWebServerPropsModel","WAWebSetUsernameJob","WAWebSyncGatingUtils","WAWebUpdateLidMetadataApi","WAWebUserPrefsAppStateSync","WAWebUserPrefsHistorySync","WAWebUserPrefsTypes","WAWebUsernameGatingUtils","WAWebWamEnumMdBootstrapStepResult","WAWebWamEnumPeerDataResponseApplyResultType","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] On demand history sync complete for chat ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] set history initial sync boundary to empty"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Full history sync complete"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Recent history sync complete"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Initial bootstrap history sync complete"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["MMS client delete error"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] storing recent/full/on-demand chunk complete, ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] no messages from history sync need to handle"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Dropping request welcome message"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Dropping chat "," due to the chat in sync payload "," is already marked as complete locally"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Dropping chat ","$ due to chat is not enabled for sync"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] dropping chat "," due to null entry in initial sync boundary, but it exists as chatJid ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Dropping chat ","$ due to null entry in initial sync boundary"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] boundary data is null or empty"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] start processing non initial status V3 messages"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] history_sync_notification_handler: invalid wid"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] chunk downloaded, ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][rdu] history sync on demand chunk fails to download."]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Initial sync download failed due to network error retry download"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] history sync download failed"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] start downloading chunk, ",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] get inline payload in chunk, ",""]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] history_sync_notification_handler: sending Status v3 receipt failed"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Skip duplicate initial sync chunk ",""]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] handleHistorySyncChunk started for ",""]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][rdu] dropping history sync on demand response as its conversation length "," is not 1."]);H=function(){return a};return a}var aa=10,ba=100;function I(a,b){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e===void 0&&(e=aa);d("WALogger").LOG(G(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync");if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP){var f=(yield d("WAWebUserPrefsHistorySync").getInitialHistorySyncComplete());if(f===!0){d("WALogger").LOG(F(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync");return}}if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3)try{f=c("WAWebMsgKey").fromString(a.msgKey);void d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:f.remote,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.HISTORY_SYNC_COMPLETION,groupedReceipt:new Map().set(f.remote,[f.id])})}catch(a){d("WALogger").WARN(E()).tags("history-sync").devConsole(a)}f=(yield d("WAWebHistorySyncNotificationUtils").getHistorySyncProgress(a));var g=d("WAWebHistorySyncNotificationUtils").maybeGetInlinePayload(a),i=(yield d("WAWebHistorySyncNotificationUtils").getHistorySyncMetrics(a,g==null)),j=i.historySyncStartDownloadingMetric,k=i.historySyncDownloadedMetric;i=i.historySyncDataAppliedMetric;void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADING,a.chunkOrder);d("WAWebHistorySyncNotificationUtils").commitHistoryStartDownloadingMetric(j,a.historySyncStepStartedTs,d("WATimeUtils").unixTimeMs());j=null;if(g!=null)d("WALogger").LOG(D(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync"),j=g;else try{d("WALogger").LOG(C(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync"),j=(yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt(babelHelpers["extends"]({signal:new AbortController().signal},a.downloadOptions)))}catch(b){d("WALogger").WARN(B()).devConsole(b);if(b instanceof d("WAWebHttpErrors").HttpNetworkError){if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP&&e>0){yield c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal});d("WALogger").WARN(A()).tags("history-sync");g=e-1;return I(a,g)}d("WAWebApiHistorySyncNotification").removeLocalFailureFromInFlightChunk(a.msgKey);return}e=c("WAWebMsgKey").fromString(a.msgKey);d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(k,a.historySyncStepStartedTs,!1,d("WATimeUtils").unixTimeMs());if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND){d("WALogger").LOG(z());d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").handleHistorySyncOnDemandFailure((g=a.peerDataRequestChatId)!=null?g:"");d("WAWebNonMessageDataRequestLoggingUtils").logHistorySyncOnDemandResponse(d("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.FAIL_TO_DOWNLOAD,(g=a.peerDataRequestSessionId)!=null?g:"")}c("WAWebSendHistSyncServerErrorReceiptJob")(e.remote,e.id,a.downloadOptions.mediaKey);yield d("WAWebApiHistorySyncNotification").markChunkForReuploadPending(a.msgKey);return}void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADED,a.chunkOrder);a.downloadOptions.mediaKey="";k.mdBootstrapStepResult=d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.SUCCESS;g=new(d("WABinary").Binary)(j);e=(yield d("WAGzip").inflate(g.readByteArray()));j=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsHistorySync.pb").HistorySyncSpec,e);var l=[];j.phoneNumberToLidMappings.forEach(function(a){a.lidJid!=null&&a.pnJid!=null&&l.push({lid:d("WAWebWidFactory").createUserWid(c("WANullthrows")(a.lidJid)),pn:d("WAWebWidFactory").createUserWid(c("WANullthrows")(a.pnJid))})});yield d("WAWebUpdateLidMetadataApi").createLidPnMappings({mappings:l,flushImmediately:!0});void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DECODED,a.chunkOrder);d("WALogger").LOG(y(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a,void 0,j.conversations.length));g=d("WATimeUtils").unixTimeMs();a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&a.chunkOrder!=null&&d("WAWebHistorySyncProgress").updateHistorySyncProgressModel();a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3&&j.statusV3Messages&&j.statusV3Messages.length>0?yield d("WAWebHistoryMsgHandlerAction").handleStatusV3Messages(j,a,k,i,g):a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.NON_BLOCKING_DATA?yield d("WAWebHistoryMsgHandlerAction").handleNonBlockingData(j,a,k,i,g):a.syncType!==d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.PUSH_NAME&&(j.conversations=j.conversations.reduce(function(a,b){var c=null;try{c=d("WAWebWidFactory").createWid(b.id)}catch(a){d("WALogger").WARN(x()).tags("history-sync").devConsole(a)}return c?a.concat(b):a},[]));e=[];var m=[],H=[];if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP)yield d("WAWebHistoryMsgHandlerAction").handleInitialSyncMsgs(j,a,e,m,k,i,g,H);else if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.PUSH_NAME)yield d("WAWebHistoryMsgHandlerAction").handlePushName(j,a,k,i,g);else if(![d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.NON_BLOCKING_DATA].includes(a.syncType)){d("WALogger").LOG(w());yield new(h||(h=b("Promise")))(function(a){return self.setTimeout(a,0)});if(!ca(a,j)){var J=[],K=[],L=[],M=[],N=[],O=new Set(),P=[],Q=d("WAWebUserPrefsHistorySync").getHistoryInitialSyncBoundary(),R=0,fa=0,ga=!1,ha=d("WAWebSyncGatingUtils").getRecentSyncMessageProcessingBreakIteration(),ia=(yield d("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced());(Q==null||Object.keys(Q).length===0)&&d("WALogger").LOG(v());for(var S=0;S<j.conversations.length;S++){var T=!1,U=j.conversations[S],V=Q==null?void 0:Q[U.id];if(V==null){d("WALogger").LOG(u(),c("gkx")("26258")?"-":U.id).tags("history-sync");var W=d("WAWebWidFactory").createWid(U.id).toJid();(Q==null?void 0:Q[W])!=null&&d("WALogger").LOG(t(),c("gkx")("26258")?"-":U.id,c("gkx")("26258")?"-":W).sendLogs("history-sync-unexpected-conversation-drop");T=!0}W=d("WAWebWidFactory").createWid(U.id);W.isNewsletter()&&(d("WALogger").LOG(s(),c("gkx")("26258")?"-":U.id),T=!0);var X=(yield d("WAWebApiChat").getChatRecord(W)),Y=(X==null?void 0:X.endOfHistoryTransferType)===d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY;(!X&&V!=null||X&&X.endOfHistoryTransferType==null||Y)&&(d("WALogger").LOG(r(),c("gkx")("26258")?"-":U.id,d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync"),T=!0);if(!T)for(Y=0;Y<U.messages.length;Y++){R++;T=U.messages[Y];var Z=d("WALongInt").maybeNumberOrThrowIfTooLarge(T.msgOrderId);if(V!=null&&V!==-1&&Z!=null&&Z>=V)continue;Z=(T==null?void 0:(Z=T.message)==null?void 0:(Z=Z.message)==null?void 0:(Z=Z.protocolMessage)==null?void 0:Z.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE;if(Z===!0){d("WALogger").LOG(q());continue}O.add(U.id);Z=d("WAWebHistorySyncNotificationUtils").parseWebMsgInfoAndReturnNullOnFailure(W,T.message,a);Z&&Z.id.remote.toString()!==U.id&&O.add(Z.id.remote.toString());if(Y===0&&Z&&X){var $=(yield d("WAWebSchemaMessage").getMessageTable().betweenCount(["internalId"],d("WAWebDBMessageUtils").beginningOfChat(W),d("WAWebDBMessageUtils").endOfChat(W)));$===0&&P.push(Z)}d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.REACTION)||(K=K.concat(d("WAWebReactionsParseWebMsgInfoReaction").parseWebMsgInfoReaction(T.message,Z)));if(!d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.POLL_UPDATE)){L=L.concat(d("WAWebPollsParseWebMsgInfoPollUpdates").parseWebMsgInfoPollUpdates({webMsgInfo:T.message,parsedWebMsgInfo:Z,isFromCag:($=U.isDefaultSubgroup)!=null?$:!1}))}d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE)||(M=M.concat(d("WAWebPinMsgParseWebMsgInfoPinInChat").parseWebMsgInfoPinInChat(T.message,Z)));N=N.concat(d("WAWebAddonProcessMsgsUtils").parseHistorySyncMsg({webMsgInfo:T.message,parsedWebMsgInfo:Z,isFromCag:($=U.isDefaultSubgroup)!=null?$:!1}));Z!=null&&(($=T.message)==null?void 0:(T=$.commentMetadata)==null?void 0:T.commentParentKey)==null&&J.push(Z);yield d("WAAsyncSleep").asyncSleepAfterGivenLoopIteration(fa++,ia?ha:ba)}else a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND&&(ga=!0)}k.mdBootstrapMessagesCount=R;k.mdBootstrapChatsCount=j.conversations.length;d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(k,a.historySyncStepStartedTs,!0,g);void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.MESSAGE_PREPROCESSED,a.chunkOrder);J.length!==0?yield d("WAWebHandleHistorySyncMsg").handleProgressiveHistorySyncMsgs(J,Array.from(O),K,L,M,N,P,a.syncType,a.chunkOrder):d("WALogger").LOG(p());yield d("WAWebUserPrefsHistorySync").setLastHistorySyncedChunk(a.syncType,a.chunkOrder,f);d("WAWebHistorySyncProgress").updateHistorySyncProgressModel();yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(a.msgKey,a.syncType,a.chunkOrder);var ja=new Set();j.conversations.forEach(function(a){var b=d("WAWebWidFactory").createWid(a.id);ja.add(b.toString());var c=(Q==null?void 0:Q[a.id])!=null,e=null;c&&(e=a.endOfHistoryTransferType);if(e!=null)return d("WAWebHistorySyncWorkerCompatibleNotificationUtils").updateEndOfHistorySync(b,e)});da(a,j,ga);d("WAWebCmd").Cmd.onHistorySyncChunkProcessed(ja);d("WAWebHistorySyncNotificationUtils").commitHistoryDataAppliedMetric(i,a.historySyncStepStartedTs,!0);void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.APPLIED,a.chunkOrder);d("WALogger").LOG(o(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a,R,O.size))}}$=c("WAWebMsgKey").fromString(a.msgKey);T=new Map();T.set($.remote,[$.id]);a.syncType!==d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3&&void d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:$.remote,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.HISTORY_SYNC_COMPLETION,groupedReceipt:T});yield d("WAWebUpdateLidMetadataApi").createLidPnMappings({mappings:m,flushImmediately:!0});yield d("WAWebUpdateLidMetadataApi").updateLidMetadata({updates:e});d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&(yield d("WAWebSetUsernameJob").setUsernamesJob(H));yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(a.msgKey,a.syncType,a.chunkOrder);d("WAWebServerPropsModel").ServerProps.webMdMmsSyncDeletionRequest&&a.downloadOptions.encFilehash!=null&&c("WAWebMmsClient").deleteMdHistorySyncBlob({directPath:a.downloadOptions.directPath,encFilehash:a.downloadOptions.encFilehash,signal:new AbortController().signal})["catch"](function(a){d("WALogger").WARN(n()).devConsole(a)});Z=j.conversations.length===1?j.conversations[0].id:null;yield ea(a.syncType,j.progress,Z)});return J.apply(this,arguments)}function ca(a,b){if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND&&b.conversations.length!==1){d("WALogger").LOG(H(),c("gkx")("26258")?"":b.conversations.length);d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").handleHistorySyncOnDemandFailure((b=a.peerDataRequestChatId)!=null?b:"");d("WAWebNonMessageDataRequestLoggingUtils").logHistorySyncOnDemandResponse(d("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.INVALID_RESPONSE,(b=a.peerDataRequestSessionId)!=null?b:"");return!0}return!1}function da(a,b,c){if(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND&&b.conversations.length===1){b=b.conversations[0].id;!c?d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").handleHistorySyncOnDemandSuccess(b):d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").handleHistorySyncOnDemandFailure(b);d("WAWebNonMessageDataRequestLoggingUtils").logHistorySyncOnDemandResponse(c?d("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.OTHER_ERROR:d("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.SUCCESS,(b=a.peerDataRequestSessionId)!=null?b:"")}}function ea(a,b,c){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("WAWebSyncGatingUtils").isHistorySyncOnDemandEnabled();if(a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP)d("WALogger").LOG(m()).tags("history-sync"),yield d("WAWebUserPrefsHistorySync").setInitialHistorySyncComplete(),yield d("WAWebUserPrefsHistorySync").setHistorySyncStatus({initialCompleted:!0}),d("WAWebCmd").Cmd.onInitialChatHistorySynced();else if(a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&b===100)d("WALogger").LOG(l()).tags("history-sync"),yield d("WAWebUserPrefsHistorySync").setHistorySyncStatus({recentCompleted:!0}),d("WAWebCmd").Cmd.onRecentChatHistorySynced();else if(a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.FULL&&b===100)d("WALogger").LOG(k()).tags("history-sync"),f||(d("WALogger").LOG(j()),void d("WAWebUserPrefsHistorySync").setHistoryInitialSyncBoundary({})),yield d("WAWebUserPrefsHistorySync").setHistorySyncStatus({fullCompleted:!0}),d("WAWebCmd").Cmd.onFullChatHistorySynced();else if(f&&a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND&&b===100){d("WALogger").LOG(i(),c("gkx")("26258")?"-":e).tags("history-sync");a="onDemandCompleted_"+((f=e)!=null?f:"");yield d("WAWebUserPrefsHistorySync").setHistorySyncStatus((b={},b[a]=!0,b))}});return K.apply(this,arguments)}g.handleHistorySyncChunk=I}),98);
__d("WAWebHandleWorkerCompatibleRecentSyncChunk",["Promise","WABinary","WAGzip","WALogger","WANullthrows","WATimeUtils","WAWebApiHistorySyncNotification","WAWebCmd","WAWebDownloadManager","WAWebHandleHistorySyncMsg","WAWebHistorySyncNotificationUtils","WAWebHistorySyncProgress","WAWebHistorySyncWorkerCompatibleNotificationUtils","WAWebHttpErrors","WAWebMmsClient","WAWebMsgKey","WAWebPreprocessHistorySyncProto","WAWebProtobufsHistorySync.pb","WAWebSendHistSyncServerErrorReceiptJob","WAWebSendReceiptJobCommon","WAWebServerPropsModel","WAWebSetUsernameJob","WAWebSyncGatingUtils","WAWebUpdateLidMetadataApi","WAWebUserPrefsHistorySync","WAWebUserPrefsTypes","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] Recent history sync complete"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MMS client delete error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] storing recent chunk complete, ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] no messages from history sync need to handle"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] start processing recent sync messages"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] history_sync_notification_handler: invalid wid"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] chunk decoded, ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] chunk downloaded, ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] history sync download failed"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] start downloading chunk, ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] get downloaded payload in chunk, ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] handleHistorySyncChunk started for ",""]);t=function(){return a};return a}function a(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(t(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync");var e=(yield d("WAWebHistorySyncNotificationUtils").getHistorySyncProgress(a)),f=d("WAWebSyncGatingUtils").isRecentSyncDownloadOptimizationEnabled(),g=f?a.downloadedHistorySyncPayload:null,u=(yield d("WAWebHistorySyncNotificationUtils").getHistorySyncMetrics(a,!0)),v=u.historySyncStartDownloadingMetric,w=u.historySyncDownloadedMetric;u=u.historySyncDataAppliedMetric;var x=null;if(g!=null)d("WALogger").LOG(s(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync"),x=g;else{void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADING,a.chunkOrder);d("WAWebHistorySyncNotificationUtils").commitHistoryStartDownloadingMetric(v,a.historySyncStepStartedTs,d("WATimeUtils").unixTimeMs());try{d("WALogger").LOG(r(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a)).tags("history-sync"),x=(yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt(babelHelpers["extends"]({signal:new AbortController().signal},a.downloadOptions)))}catch(b){d("WALogger").WARN(q()).devConsole(b);if(b instanceof d("WAWebHttpErrors").HttpNetworkError){d("WAWebApiHistorySyncNotification").removeLocalFailureFromInFlightChunk(a.msgKey);return}g=c("WAWebMsgKey").fromString(a.msgKey);d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(w,a.historySyncStepStartedTs,!1,d("WATimeUtils").unixTimeMs());void c("WAWebSendHistSyncServerErrorReceiptJob")(g.remote,g.id,a.downloadOptions.mediaKey);yield d("WAWebApiHistorySyncNotification").markChunkForReuploadPending(a.msgKey);return}void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADED,a.chunkOrder);a.downloadOptions.mediaKey="";d("WALogger").LOG(p(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a))}v=new(d("WABinary").Binary)(x);g=(yield d("WAGzip").inflate(v.readByteArray()));x=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsHistorySync.pb").HistorySyncSpec,g);var y=[];x.phoneNumberToLidMappings.forEach(function(a){a.lidJid!=null&&a.pnJid!=null&&y.push({lid:d("WAWebWidFactory").createUserWid(c("WANullthrows")(a.lidJid)),pn:d("WAWebWidFactory").createUserWid(c("WANullthrows")(a.pnJid))})});yield d("WAWebUpdateLidMetadataApi").createLidPnMappings({mappings:y,flushImmediately:!0});void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DECODED,a.chunkOrder);d("WALogger").LOG(o(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a,void 0,x.conversations.length));v=d("WATimeUtils").unixTimeMs();a.chunkOrder!=null&&void d("WAWebHistorySyncProgress").updateHistorySyncProgressModel();x.conversations=x.conversations.reduce(function(a,b){var c=null;try{c=d("WAWebWidFactory").createWid(b.id)}catch(a){d("WALogger").WARN(n()).tags("history-sync").devConsole(a)}return c?a.concat(b):a},[]);g=[];var z=[],A=[];d("WALogger").LOG(m());yield new(h||(h=b("Promise")))(function(a){return self.setTimeout(a,0)});var B=(yield d("WAWebPreprocessHistorySyncProto").preprocessHistorySyncProto(x)),C=B.recentOrFullSyncMsgs,D=B.chatsWithRecentOrFullSyncMsgs,E=B.reactionMessages,F=B.pollVotes,G=B.pinInChatMessages,H=B.unifiedAddons,I=B.lastMsgs;B=B.totalChunkMsgCount;f||(w.mdBootstrapMessagesCount=B,w.mdBootstrapChatsCount=x.conversations.length,d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(w,a.historySyncStepStartedTs,!0,v));void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.MESSAGE_PREPROCESSED,a.chunkOrder);C.length!==0?yield d("WAWebHandleHistorySyncMsg").handleProgressiveHistorySyncMsgs(C,Array.from(D),E,F,G,H,I,a.syncType,a.chunkOrder):d("WALogger").LOG(l());void d("WAWebUserPrefsHistorySync").setHistorySyncTotalProcessedMessageCount(B);yield d("WAWebUserPrefsHistorySync").setLastHistorySyncedChunk(a.syncType,a.chunkOrder,e);void d("WAWebHistorySyncProgress").updateHistorySyncProgressModel();yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(a.msgKey,a.syncType,a.chunkOrder);var J=d("WAWebUserPrefsHistorySync").getHistoryInitialSyncBoundary(),K=new Set();x.conversations.forEach(function(a){var b=d("WAWebWidFactory").createWid(a.id);K.add(b.toString());var c=(J==null?void 0:J[a.id])!=null,e=null;c&&(e=a.endOfHistoryTransferType);if(e!=null)return d("WAWebHistorySyncWorkerCompatibleNotificationUtils").updateEndOfHistorySync(b,e)});d("WAWebCmd").Cmd.onHistorySyncChunkProcessed(K);d("WAWebHistorySyncNotificationUtils").commitHistoryDataAppliedMetric(u,a.historySyncStepStartedTs,!0);void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.APPLIED,a.chunkOrder);d("WALogger").LOG(k(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(a,B,D.length));f=c("WAWebMsgKey").fromString(a.msgKey);w=new Map();w.set(f.remote,[f.id]);a.syncType!==d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3&&void d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:f.remote,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.HISTORY_SYNC_COMPLETION,groupedReceipt:w});yield d("WAWebUpdateLidMetadataApi").createLidPnMappings({mappings:z,flushImmediately:!0});yield d("WAWebUpdateLidMetadataApi").updateLidMetadata({updates:g});d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&(yield d("WAWebSetUsernameJob").setUsernamesJob(A));yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(a.msgKey,a.syncType,a.chunkOrder);d("WAWebServerPropsModel").ServerProps.webMdMmsSyncDeletionRequest&&a.downloadOptions.encFilehash!=null&&c("WAWebMmsClient").deleteMdHistorySyncBlob({directPath:a.downloadOptions.directPath,encFilehash:a.downloadOptions.encFilehash,signal:new AbortController().signal})["catch"](function(a){d("WALogger").WARN(j()).devConsole(a)});e===100&&(d("WALogger").LOG(i()).tags("history-sync"),yield d("WAWebUserPrefsHistorySync").setHistorySyncStatus({recentCompleted:!0}),d("WAWebCmd").Cmd.onRecentChatHistorySynced())});return u.apply(this,arguments)}g.handleWorkerCompatibleRecentSyncChunk=a}),98);
__d("WAWebPreprocessHistorySyncProto",["WAAsyncSleep","WALogger","WALongInt","WAWebAddonGatingUtils","WAWebAddonProcessMsgsUtils","WAWebApiChat","WAWebChatConstants","WAWebDBMessageUtils","WAWebHistorySyncNotificationUtils","WAWebMsgType","WAWebPinMsgParseWebMsgInfoPinInChat","WAWebPollsParseWebMsgInfoPollUpdates","WAWebProtobufsE2E.pb","WAWebReactionsParseWebMsgInfoReaction","WAWebSchemaMessage","WAWebSyncGatingUtils","WAWebUserPrefsAppStateSync","WAWebUserPrefsHistorySync","WAWebWidFactory","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] Dropping request welcome message"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] Dropping chat ","$ due to chat is not enabled for sync"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] dropping chat "," due to null entry in initial sync boundary, but it exists as chatJid ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] Dropping chat ","$ due to null entry in initial sync boundary"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] boundary data is null or empty"]);l=function(){return a};return a}var m=100;function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],e=[],f=[],g=[],n=[],o=new Set(),p=[],q=d("WAWebUserPrefsHistorySync").getHistoryInitialSyncBoundary(),r=0,s=0,t=d("WAWebSyncGatingUtils").getRecentSyncMessageProcessingBreakIteration(),u=(yield d("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced());(q==null||Object.keys(q).length===0)&&d("WALogger").LOG(l());for(var v=0;v<a.conversations.length;v++){var w=!1,x=a.conversations[v],y=q==null?void 0:q[x.id];if(y==null){d("WALogger").LOG(k(),c("gkx")("26258")?"-":x.id).tags("history-sync");var z=d("WAWebWidFactory").createWid(x.id).toJid();(q==null?void 0:q[z])!=null&&d("WALogger").LOG(j(),c("gkx")("26258")?"-":x.id,c("gkx")("26258")?"-":z).sendLogs("history-sync-unexpected-conversation-drop");w=!0}z=d("WAWebWidFactory").createWid(x.id);z.isNewsletter()&&(d("WALogger").LOG(i(),c("gkx")("26258")?"-":x.id),w=!0);var A=(yield d("WAWebApiChat").getChatRecord(z)),B=(A==null?void 0:A.endOfHistoryTransferType)===d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY;(!A&&y!=null||A&&A.endOfHistoryTransferType==null||B)&&(w=!0);if(!w)for(B=0;B<x.messages.length;B++){r++;w=x.messages[B];var C=d("WALongInt").maybeNumberOrThrowIfTooLarge(w.msgOrderId);if(y!=null&&y!==-1&&C!=null&&C>=y)continue;C=(w==null?void 0:(C=w.message)==null?void 0:(C=C.message)==null?void 0:(C=C.protocolMessage)==null?void 0:C.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE;if(C===!0){d("WALogger").LOG(h());continue}o.add(x.id);C=d("WAWebHistorySyncNotificationUtils").parseWebMsgInfoAndReturnNullOnFailure(z,w.message);C&&C.id.remote.toString()!==x.id&&o.add(C.id.remote.toString());if(B===0&&C&&A){var D=(yield d("WAWebSchemaMessage").getMessageTable().betweenCount(["internalId"],d("WAWebDBMessageUtils").beginningOfChat(z),d("WAWebDBMessageUtils").endOfChat(z)));D===0&&p.push(C)}d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.REACTION)||(e=e.concat(d("WAWebReactionsParseWebMsgInfoReaction").parseWebMsgInfoReaction(w.message,C)));if(!d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.POLL_UPDATE)){f=f.concat(d("WAWebPollsParseWebMsgInfoPollUpdates").parseWebMsgInfoPollUpdates({webMsgInfo:w.message,parsedWebMsgInfo:C,isFromCag:(D=x.isDefaultSubgroup)!=null?D:!1}))}d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE)||(g=g.concat(d("WAWebPinMsgParseWebMsgInfoPinInChat").parseWebMsgInfoPinInChat(w.message,C)));n=n.concat(d("WAWebAddonProcessMsgsUtils").parseHistorySyncMsg({webMsgInfo:w.message,parsedWebMsgInfo:C,isFromCag:(D=x.isDefaultSubgroup)!=null?D:!1}));C!=null&&((D=w.message)==null?void 0:(w=D.commentMetadata)==null?void 0:w.commentParentKey)==null&&b.push(C);yield d("WAAsyncSleep").asyncSleepAfterGivenLoopIteration(s++,u?t:m)}}return{recentOrFullSyncMsgs:b,chatsWithRecentOrFullSyncMsgs:Array.from(o),reactionMessages:e,pollVotes:f,pinInChatMessages:g,unifiedAddons:n,lastMsgs:p,totalChunkMsgCount:r}});return n.apply(this,arguments)}g.preprocessHistorySyncProto=a}),98);
__d("WAWebGetMetricHistorySyncPayloadType",["WAWebWamEnumMdBootstrapHistoryPayloadType"],(function(a,b,c,d,e,f,g){function a(a){switch(a){case 0:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.INITIAL;case 1:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.STATUS_V3;case 2:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.FULL_HISTORY;case 3:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.RECENT_HISTORY;case 4:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.PUSHNAME;case 5:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.NON_BLOCKING_DATA;case 6:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.ON_DEMAND;default:return d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.PUSHNAME}}g.getMetricHistorySyncPayloadType=a}),98);
__d("WAWebMdBootstrapHistoryDataDownloadedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapStepResult"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdBootstrapHistoryDataDownloaded:[2296,{historySyncChunkOrder:[15,a.TYPES.INTEGER],historySyncStageProgress:[14,a.TYPES.INTEGER],mdBootstrapChatsCount:[6,a.TYPES.INTEGER],mdBootstrapHistoryPayloadType:[13,d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE],mdBootstrapMessagesCount:[5,a.TYPES.INTEGER],mdBootstrapPayloadSize:[4,a.TYPES.INTEGER],mdBootstrapPayloadType:[2,d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE],mdBootstrapStepDuration:[7,a.TYPES.INTEGER],mdBootstrapStepResult:[8,d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT],mdHsOldestMessageTimestamp:[11,a.TYPES.INTEGER],mdRegAttemptId:[12,a.TYPES.STRING],mdSessionId:[1,a.TYPES.STRING],mdStorageQuotaBytes:[9,a.TYPES.INTEGER],mdStorageQuotaUsedBytes:[10,a.TYPES.INTEGER],mdTimestamp:[3,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdBootstrapHistoryDataDownloaded:[]});g.MdBootstrapHistoryDataDownloadedWamEvent=b}),98);
__d("WAWebMdBootstrapHistoryDataStartDownloadingWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdBootstrapPayloadType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdBootstrapHistoryDataStartDownloading:[4650,{historySyncChunkOrder:[1,a.TYPES.INTEGER],historySyncStageProgress:[2,a.TYPES.INTEGER],mdBootstrapHistoryPayloadType:[3,d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE],mdBootstrapPayloadSize:[4,a.TYPES.INTEGER],mdBootstrapPayloadType:[5,d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE],mdBootstrapStepDuration:[6,a.TYPES.INTEGER],mdSessionId:[7,a.TYPES.STRING],mdTimestamp:[8,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdBootstrapHistoryDataStartDownloading:[]});g.MdBootstrapHistoryDataStartDownloadingWamEvent=b}),98);
__d("WAWebHistorySyncNotificationUtils",["$InternalEnum","Promise","WALogger","WALongInt","WANullthrows","WATimeUtils","WAWebApiHistorySyncNotification","WAWebChatCollection","WAWebChatThreadLogging","WAWebDBGroupParticipant","WAWebDBGroupsGroupMetadata","WAWebGetMetricHistorySyncPayloadType","WAWebGroupMetadataCollection","WAWebGroupParticipantModel","WAWebGroupParticipantsJob","WAWebLeaveReasonType","WAWebMdBootstrapDataAppliedWamEvent","WAWebMdBootstrapHistoryDataDownloadedWamEvent","WAWebMdBootstrapHistoryDataStartDownloadingWamEvent","WAWebParseWebMessageInfoApi","WAWebProtobufsHistorySync.pb","WAWebSchemaHistorySyncNotification","WAWebSignalProtocolStore","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsHistorySync","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapSource","WAWebWamEnumMdBootstrapStepResult","WAWebWidFactory","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] get changed self identity key from history sync,\n     existing length: ",", new length: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Past Participants completed, ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] handleChatThreadLoggingMetadata: missing threadDsTimeframeOffset"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] handleChatThreadLoggingMetadata: missing threadIdUserSecret"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateParticipantsJob: failed: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] parseWebMessageInfo failed on msg key ",", msg type: "," in chunk ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] parseWebMessageInfo failed with error "," "," and stack ",""]);o=function(){return a};return a}var p=b("$InternalEnum").Mirrored(["NewRecentSyncNotification","NewOnDemandSyncNotification","LastProcessedNotification","InitialSyncComplete","BackendStart","HistorySyncStatusCheck","ManualRestart"]);function a(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.pastParticipants.map(function(a){return{groupId:c("WANullthrows")(a.groupJid),pastParticipants:a.pastParticipants.map(function(a){return{id:d("WAWebWidFactory").createWid(c("WANullthrows")(a.userJid)),leaveReason:a.leaveReason===d("WAWebProtobufsHistorySync.pb").PastParticipant$LeaveReason.LEFT?d("WAWebLeaveReasonType").LeaveReason.Left:d("WAWebLeaveReasonType").LeaveReason.Removed,leaveTs:d("WALongInt").numberOrThrowIfTooLarge(c("WANullthrows")(a.leaveTs))}})}});yield d("WAWebDBGroupParticipant").addPastParticipants(a);a.forEach(function(a){var b=d("WAWebChatCollection").ChatCollection.gadd(d("WAWebWidFactory").createWid(a.groupId));b=b.groupMetadata;b==null?void 0:b.pastParticipants.add(a.pastParticipants,{merge:!0})});d("WALogger").LOG(j(),r(b))});return q.apply(this,arguments)}function r(a,b,c){var d;b===void 0&&(b=0);c===void 0&&(c=0);if(a==null)return"";var e=(a.msgKey||"").split("_")[2],f=s(a.syncType,a.chunkOrder,a.isReupload);a=(d=(d=a.downloadOptions.filehash)==null?void 0:d.slice(0,10))!=null?d:(d=a.filehash)==null?void 0:d.slice(0,10);return" "+f+", id: "+e+" ## msgCount: "+b+", ## chatCount: "+c+", ## downloadStr: "+((d=a)!=null?d:"")+" "}function s(a,b,c){return"type_"+((a=a)!=null?a:"none")+"_order_"+((a=b)!=null?a:"none")+"_isReupload_"+(c||0)}function e(a,b,e){var f=null;try{b!=null&&(f=d("WAWebParseWebMessageInfoApi").parseWebMessageInfo(b))}catch(a){d("WALogger").ERROR(o(),a==null?void 0:a.name,a==null?void 0:a.code,a==null?void 0:a.stack),c("gkx")("26258")||d("WALogger").ERROR(n(),b==null?void 0:b.key.id,b==null?void 0:b.messageStubType,r(e)).sendLogs("parseWebMessageInfo failed during history sync")}if(t(a,f))return;return f}function t(a,b){if(b==null)return!1;a=a.isUser()&&!a.isLid();if(!a)return!1;b=(a=b.id)==null?void 0:a.remote;return b!=null&&b.isLid()}function f(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().loadIdentityKey(a));a&&a!==b&&d("WALogger").ERROR(i(),a.length,b.length).tags("history-sync").sendLogs("self-identity-change-from-history-sync")});return u.apply(this,arguments)}function v(a,b){if(!b.isGroup())return;if(a.suspended!=null||a.terminated!=null||a.createdBy!=null||a.createdAt!=null||a.description!=null||a.support!=null||a.isParentGroup!=null||a.isDefaultSubgroup!=null||a.parentGroupId!=null){var e,f={id:b,subject:a.name,suspended:a.suspended,terminated:a.terminated,owner:a.createdBy!=null?d("WAWebWidFactory").createWid(a.createdBy):void 0,creation:a.createdAt,desc:a.description,support:a.support,isParentGroup:a.isParentGroup,defaultSubgroup:a.isDefaultSubgroup,parentGroup:a.parentGroupId!=null?d("WAWebWidFactory").createWid(a.parentGroupId):void 0};d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(b,babelHelpers["extends"]({},f,{id:f.id.toString(),owner:f.owner!==void 0?f.owner.toString():void 0,creation:f.creation!==void 0?Number(f.creation):void 0,parentGroup:f.parentGroup!==void 0?String(f.parentGroup):void 0}));f=c("WAWebGroupMetadataCollection").add(f,{merge:!0})[0];e=(e=a.participant)==null?void 0:e.map(function(a){var b=a.rank===d("WAWebProtobufsHistorySync.pb").GroupParticipant$Rank.SUPERADMIN,e=a.rank===d("WAWebProtobufsHistorySync.pb").GroupParticipant$Rank.ADMIN;return new(c("WAWebGroupParticipantModel"))({id:d("WAWebWidFactory").createWid(a.userJid),isAdmin:e||b,isSuperAdmin:b})});f==null?void 0:f.participants.add(e,{merge:!0});(a.readOnly===!0||e.length>0)&&d("WAWebGroupParticipantsJob").updateParticipantsJob({group:b,participants:e.map(function(a){return{id:a.id,isAdmin:a.isAdmin,isSuperAdmin:a.isSuperAdmin}}),skipDeviceSync:a.readOnly})["catch"](function(a){d("WALogger").WARN(m(),a)})}}function w(a){var c=(h||(h=b("Promise"))).resolve(),e=h.resolve();a.threadIdUserSecret!=null?c=d("WAWebChatThreadLogging").setThreadIdUserSecret(a.threadIdUserSecret):d("WALogger").ERROR(l()).sendLogs("ctl-missing-secret-history-sync");a.threadDsTimeframeOffset!=null?e=d("WAWebChatThreadLogging").setThreadDsTimeframeOffset(a.threadDsTimeframeOffset):d("WALogger").ERROR(k()).sendLogs("ctl-missing-offset-history-sync");return h.all([c,e])}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP?d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL:d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,e=d("WAWebGetMetricHistorySyncPayloadType").getMetricHistorySyncPayloadType(a.syncType),f=(yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId()),g=(yield E(a)),h=new(d("WAWebMdBootstrapHistoryDataStartDownloadingWamEvent").MdBootstrapHistoryDataStartDownloadingWamEvent)({mdBootstrapPayloadType:c,mdBootstrapPayloadSize:a.historySyncPayloadSize,mdBootstrapHistoryPayloadType:e,mdSessionId:f,historySyncStageProgress:g}),i=new(d("WAWebMdBootstrapHistoryDataDownloadedWamEvent").MdBootstrapHistoryDataDownloadedWamEvent)({mdBootstrapPayloadType:c,mdBootstrapPayloadSize:a.historySyncPayloadSize,mdBootstrapHistoryPayloadType:e,mdSessionId:f,historySyncStageProgress:g});c=new(d("WAWebMdBootstrapDataAppliedWamEvent").MdBootstrapDataAppliedWamEvent)({mdBootstrapPayloadType:c,mdBootstrapSource:d("WAWebWamEnumMdBootstrapSource").MD_BOOTSTRAP_SOURCE.HISTORY,mdBootstrapHistoryPayloadType:e,mdSessionId:f,sentViaMms:b,historySyncStageProgress:g});a.chunkOrder!=null&&(h.historySyncChunkOrder=a.chunkOrder,i.historySyncChunkOrder=a.chunkOrder,c.historySyncChunkOrder=a.chunkOrder);e=(yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getStorageEstimation());e.mdStorageQuotaBytes!==d("WAWebSyncdMdSyncFieldstatMeta").STORAGE_QUOTA_UNAVAILABLE&&(i.mdStorageQuotaUsedBytes=e.mdStorageQuotaUsedBytes,i.mdStorageQuotaBytes=e.mdStorageQuotaBytes);return{historySyncStartDownloadingMetric:h,historySyncDownloadedMetric:i,historySyncDataAppliedMetric:c}});return y.apply(this,arguments)}function z(a,b,c){a.mdTimestamp=c,a.mdBootstrapStepDuration=c-b,a.commit()}function A(a,b,c,e){a.mdTimestamp=e,a.mdBootstrapStepDuration=e-b,a.mdBootstrapStepResult=c?d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.SUCCESS:d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.FAILURE,a.commit()}function B(a,b,c,e){e===void 0&&(e=!1);var f=d("WATimeUtils").unixTimeMs();a.mdTimestamp=f;a.mdBootstrapStepDuration=f-b;a.mdBootstrapStepResult=c?d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.SUCCESS:d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.FAILURE;a.commitAndWaitForFlush(e)}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a&&(yield new(h||(h=b("Promise")))(function(a){return self.setTimeout(a,1e3)}))});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.progress,c=(yield d("WAWebUserPrefsHistorySync").getChunkCountForEndOfRecentHistorySync());(a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.FULL||a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&a.chunkOrder===c)&&(b=100);return(a=b)!=null?a:0});return F.apply(this,arguments)}function G(a){return[d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.PUSH_NAME].includes(a.syncType)&&a.initialHistBootstrapInlinePayload!=null&&(a==null?void 0:a.initialHistBootstrapInlinePayload.byteLength)>0?a.initialHistBootstrapInlinePayload:null}function H(){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().equals(["processed","syncType"],[0,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT],{shouldDecrypt:!1}).then(function(a){return a.filter(function(a){return!d("WAWebApiHistorySyncNotification").inFlightChunk.has(a.msgKey)&&!a.reuploadPending}).sort(function(a,b){return((a=a.chunkOrder)!=null?a:0)-((a=b.chunkOrder)!=null?a:0)})})});return I.apply(this,arguments)}g.HistorySyncScheduleSource=p;g.processPastParticipants=a;g.getHistorySyncLogDetailsString=r;g.getHistorySyncBasicChunkInfoString=s;g.parseWebMsgInfoAndReturnNullOnFailure=e;g.isInvalidMsg=t;g.checkSelfHistorySyncIdentity=f;g.saveGroupMetadataForLeftGroup=v;g.handleChatThreadLoggingMetadata=w;g.getHistorySyncMetrics=x;g.commitHistoryStartDownloadingMetric=z;g.commitHistoryDownloadedMetric=A;g.commitHistoryDataAppliedMetric=B;g.checkThrottle=C;g.getHistorySyncProgress=E;g.maybeGetInlinePayload=G;g.getUnprocessedRecentSyncNotifications=H}),98);
__d("WASmaxInSpamEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={validators:[d("WAJids").validateDomainJid,d("WAJids").validateUserJid],typeName:"DomainJid|UserJid"};g.DOMAINJID_USERJID=a}),98);
__d("WASmaxInSpamIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInSpamIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInSpamIQErrorInternalServerErrorOrBadRequestMixinGroup",["WAResultOrError","WASmaxInSpamIQErrorBadRequestMixin","WASmaxInSpamIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInSpamIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInSpamIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorBadRequest"],[b,c])}g.parseIQErrorInternalServerErrorOrBadRequestMixinGroup=a}),98);
__d("WASmaxInSpamNewsletterReportResponseError",["WAResultOrError","WASmaxInSpamEnums","WASmaxInSpamIQErrorInternalServerErrorOrBadRequestMixinGroup","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;c=d("WASmaxInSpamIQErrorInternalServerErrorOrBadRequestMixinGroup").parseIQErrorInternalServerErrorOrBadRequestMixinGroup(c.value);return!c.success?c:d("WAResultOrError").makeResult({from:b.value,type:a.value,errorIQErrorInternalServerErrorOrBadRequestMixinGroup:c.value})}g.parseNewsletterReportResponseError=a}),98);
__d("WASmaxInSpamNewsletterReportResponseSuccess",["WAResultOrError","WASmaxInSpamEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:b.value})}g.parseNewsletterReportResponseSuccess=a}),98);
__d("WASmaxOutSpamBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutSpamBaseReportMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.spamListSpamFlow;a=d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"spam"},d("WASmaxJsx").smax("spam_list",{spam_flow:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseReportMixin=a}),98);
__d("WASmaxOutSpamEntitySubjectMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.spamListSubject;a=d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("spam_list",{subject:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEntitySubjectMixin=a}),98);
__d("WASmaxOutSpamAdminRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"8"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAdminRevokeMixin=a}),98);
__d("WASmaxOutSpamAutomatedMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("automated",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAutomatedMixin=a}),98);
__d("WASmaxOutSpamExtensionScreenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.extensionScreenExtensionId,e=a.extensionScreenSessionId,f=a.extensionScreenT,g=a.extensionScreenName,h=a.extensionScreenEntryPoint;a=a.dataElementValue;c=d("WASmaxJsx").smax("extension_screen",{extension_id:(b=d("WAWap")).CUSTOM_STRING(c),session_id:b.CUSTOM_STRING(e),t:b.INT(f),name:b.CUSTOM_STRING(g),entry_point:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,h)},d("WASmaxJsx").smax("data",null,a));return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeExtensionScreenMixin=a}),98);
__d("WASmaxOutSpamExtensionScreenDataMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamExtensionScreenMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutSpamExtensionScreenMixin").mergeExtensionScreenMixin(d("WASmaxJsx").smax("extension_screen",null),a);return a}function i(a){a=a.extensionScreenArgs;a=d("WASmaxJsx").smax("message",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,100));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeExtensionScreenDataExtensionScreen=h;g.mergeExtensionScreenDataMixin=a}),98);
__d("WASmaxOutSpamMessageEditMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"1"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageEditMixin=a}),98);
__d("WASmaxOutSpamClientFrankingTagMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.frankingTagElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("franking",null,d("WASmaxJsx").smax("franking_tag",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientFrankingTagMixin=a}),98);
__d("WASmaxOutSpamRawV3Mixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.rawProtocolV;a=d("WASmaxJsx").smax("raw",{v:d("WAWap").INT(3),protocol_v:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRawV3Mixin=a}),98);
__d("WASmaxOutSpamServerFrankingTagMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.reportingTagElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("franking",null,d("WASmaxJsx").smax("reporting_tag",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeServerFrankingTagMixin=a}),98);
__d("WASmaxOutSpamMessageFrankingMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamClientFrankingTagMixin","WASmaxOutSpamRawV3Mixin","WASmaxOutSpamServerFrankingTagMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutSpamRawV3Mixin").mergeRawV3Mixin(d("WASmaxJsx").smax("raw",null),a);return a}function i(a){var b=a.rawArgs;b=d("WASmaxOutSpamServerFrankingTagMixin").mergeServerFrankingTagMixin(d("WASmaxOutSpamClientFrankingTagMixin").mergeClientFrankingTagMixin(d("WASmaxJsx").smax("message",null,d("WASmaxChildren").OPTIONAL_CHILD(h,b)),a),a);return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeMessageFrankingRaw=h;g.mergeMessageFrankingMixin=a}),98);
__d("WASmaxOutSpamMessageParticipantMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageParticipant;a=d("WASmaxJsx").smax("message",{participant:d("WAWap").USER_JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageParticipantMixin=a}),98);
__d("WASmaxOutSpamContentTypePayMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"pay"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePayMixin=a}),98);
__d("WASmaxOutSpamReportPayNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.payType,e=a.payId,f=a.paySender;a=a.payReceiver;c=d("WASmaxJsx").smax("pay",{type:(b=d("WAWap")).CUSTOM_STRING(c),id:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,e),sender:d("WASmaxAttrs").OPTIONAL(b.USER_JID,f),receiver:d("WASmaxAttrs").OPTIONAL(b.USER_JID,a)});return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeReportPayNodeMixin=a}),98);
__d("WASmaxOutSpamMessageWithPaymentReportMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutSpamContentTypePayMixin","WASmaxOutSpamReportPayNodeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=a.reportPayNodeMixinArgs;a=d("WASmaxOutSpamContentTypePayMixin").mergeContentTypePayMixin(d("WASmaxJsx").smax("message",null,d("WASmaxOutSpamReportPayNodeMixin").mergeReportPayNodeMixin(d("WASmaxJsx").smax("pay",null),a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageWithPaymentReportMixin=a}),98);
__d("WASmaxOutSpamContentTypePollCreationMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"poll"},d("WASmaxJsx").smax("meta",{polltype:"creation"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePollCreationMixin=a}),98);
__d("WASmaxOutSpamMessageWithPollMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutSpamContentTypePollCreationMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutSpamContentTypePollCreationMixin").mergeContentTypePollCreationMixin(d("WASmaxJsx").smax("message",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageWithPollMixin=a}),98);
__d("WASmaxOutSpamContentTypeMediaMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"media"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeMediaMixin=a}),98);
__d("WASmaxOutSpamContentTypeTextMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"text"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeTextMixin=a}),98);
__d("WASmaxOutSpamContentTypeTextOrMediaMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutSpamContentTypeMediaMixin","WASmaxOutSpamContentTypeTextMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d("WASmaxOutSpamContentTypeTextMixin").mergeContentTypeTextMixin(a);if(b.isContentTypeMedia)return d("WASmaxOutSpamContentTypeMediaMixin").mergeContentTypeMediaMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeTextOrMediaMixinGroup=a}),98);
__d("WASmaxOutSpamMessageWithTypeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutSpamContentTypeTextOrMediaMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.contentTypeTextOrMediaMixinGroupArgs;a=d("WASmaxOutSpamContentTypeTextOrMediaMixinGroup").mergeContentTypeTextOrMediaMixinGroup(d("WASmaxJsx").smax("message",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageWithTypeMixin=a}),98);
__d("WASmaxOutSpamMessagePayloadTypes",["WASmaxMixinGroupExhaustiveError","WASmaxOutSpamMessageWithPaymentReportMixin","WASmaxOutSpamMessageWithPollMixin","WASmaxOutSpamMessageWithTypeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.messageWithPaymentReport)return d("WASmaxOutSpamMessageWithPaymentReportMixin").mergeMessageWithPaymentReportMixin(a,b.messageWithPaymentReport);if(b.messageWithType)return d("WASmaxOutSpamMessageWithTypeMixin").mergeMessageWithTypeMixin(a,b.messageWithType);if(b.isMessageWithPoll)return d("WASmaxOutSpamMessageWithPollMixin").mergeMessageWithPollMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeMessagePayloadTypes=a}),98);
__d("WASmaxOutSpamMessageWithHsmTemplateMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.hsmTid;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("hsm",{tid:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageWithHsmTemplateMixin=a}),98);
__d("WASmaxOutSpamMulticastMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("multicast",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMulticastMixin=a}),98);
__d("WASmaxOutSpamPreFilledNumberMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("url_number",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePreFilledNumberMixin=a}),98);
__d("WASmaxOutSpamPreFilledTextMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("url_text",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePreFilledTextMixin=a}),98);
__d("WASmaxOutSpamRawV2Mixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("raw",{v:d("WAWap").INT(2)});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRawV2Mixin=a}),98);
__d("WASmaxOutSpamRawV2Or3MixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutSpamRawV2Mixin","WASmaxOutSpamRawV3Mixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isRawV2)return d("WASmaxOutSpamRawV2Mixin").mergeRawV2Mixin(a);if(b.rawV3)return d("WASmaxOutSpamRawV3Mixin").mergeRawV3Mixin(a,b.rawV3);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeRawV2Or3MixinGroup=a}),98);
__d("WASmaxOutSpamRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"7"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRevokeMixin=a}),98);
__d("WASmaxOutSpamSMBBroadcastSourceMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{biz_source:"smb_promo"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSMBBroadcastSourceMixin=a}),98);
__d("WASmaxOutSpamClientReportingTokenMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.reportingTokenElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("reporting",null,d("WASmaxJsx").smax("reporting_token",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientReportingTokenMixin=a}),98);
__d("WASmaxOutSpamServerReportingTokenMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.reportingTagElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("reporting",null,d("WASmaxJsx").smax("reporting_tag",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeServerReportingTokenMixin=a}),98);
__d("WASmaxOutSpamWaMessageReportingMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamClientReportingTokenMixin","WASmaxOutSpamRawV2Mixin","WASmaxOutSpamServerReportingTokenMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutSpamRawV2Mixin").mergeRawV2Mixin(d("WASmaxJsx").smax("raw",null));return a}function i(a){var b=a.hasRaw,c=a.clientReportingTokenMixinArgs;b=d("WASmaxOutSpamServerReportingTokenMixin").mergeServerReportingTokenMixin(d("WASmaxMixins").optionalMerge(d("WASmaxOutSpamClientReportingTokenMixin").mergeClientReportingTokenMixin,d("WASmaxJsx").smax("message",null,d("WASmaxChildren").HAS_OPTIONAL_CHILD(h,b)),c),a);return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeWaMessageReportingRaw=h;g.mergeWaMessageReportingMixin=a}),98);
__d("WASmaxOutSpamMessageMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamAdminRevokeMixin","WASmaxOutSpamAutomatedMixin","WASmaxOutSpamExtensionScreenDataMixin","WASmaxOutSpamMessageEditMixin","WASmaxOutSpamMessageFrankingMixin","WASmaxOutSpamMessageParticipantMixin","WASmaxOutSpamMessagePayloadTypes","WASmaxOutSpamMessageWithHsmTemplateMixin","WASmaxOutSpamMulticastMixin","WASmaxOutSpamPreFilledNumberMixin","WASmaxOutSpamPreFilledTextMixin","WASmaxOutSpamRawV2Or3MixinGroup","WASmaxOutSpamRevokeMixin","WASmaxOutSpamSMBBroadcastSourceMixin","WASmaxOutSpamWaMessageReportingMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.rawMediatype,c=a.rawElementValue;a=a.rawV2Or3MixinGroupArgs;b=d("WASmaxOutSpamRawV2Or3MixinGroup").mergeRawV2Or3MixinGroup(d("WASmaxJsx").smax("raw",{mediatype:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b)},c),a);return b}function a(){var a=d("WASmaxJsx").smax("enc",null);return a}function i(a){var b,c=a.rawArgs,e=a.messageT,f=a.messageId,g=a.messageSelected,i=a.messageUnsent,j=a.messageDeletedReason,k=a.hasRevoke,l=a.hasAdminRevoke,m=a.hasMessageEdit,n=a.hasMulticast,o=a.hasPreFilledNumber,p=a.hasPreFilledText,q=a.hasAutomated,r=a.messageWithHsmTemplateMixinArgs,s=a.extensionScreenDataMixinArgs,t=a.messageParticipantMixinArgs,u=a.messageFrankingMixinArgs,v=a.waMessageReportingMixinArgs,w=a.hasSMBBroadcastSource;a=a.messagePayloadTypesArgs;e=d("WASmaxOutSpamMessagePayloadTypes").mergeMessagePayloadTypes((b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutSpamSMBBroadcastSourceMixin").mergeSMBBroadcastSourceMixin,b.optionalMerge(d("WASmaxOutSpamWaMessageReportingMixin").mergeWaMessageReportingMixin,b.optionalMerge(d("WASmaxOutSpamMessageFrankingMixin").mergeMessageFrankingMixin,b.optionalMerge(d("WASmaxOutSpamMessageParticipantMixin").mergeMessageParticipantMixin,b.optionalMerge(d("WASmaxOutSpamExtensionScreenDataMixin").mergeExtensionScreenDataMixin,b.optionalMerge(d("WASmaxOutSpamMessageWithHsmTemplateMixin").mergeMessageWithHsmTemplateMixin,b.optionalMerge(d("WASmaxOutSpamAutomatedMixin").mergeAutomatedMixin,b.optionalMerge(d("WASmaxOutSpamPreFilledTextMixin").mergePreFilledTextMixin,b.optionalMerge(d("WASmaxOutSpamPreFilledNumberMixin").mergePreFilledNumberMixin,b.optionalMerge(d("WASmaxOutSpamMulticastMixin").mergeMulticastMixin,b.optionalMerge(d("WASmaxOutSpamMessageEditMixin").mergeMessageEditMixin,b.optionalMerge(d("WASmaxOutSpamAdminRevokeMixin").mergeAdminRevokeMixin,b.optionalMerge(d("WASmaxOutSpamRevokeMixin").mergeRevokeMixin,d("WASmaxJsx").smax("message",{t:(b=d("WAWap")).INT(e),id:b.STANZA_ID(f),selected:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,g),unsent:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,i),deleted_reason:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,j)},d("WASmaxChildren").OPTIONAL_CHILD(h,c)),k),l),m),n),o),p),q),r),s),t),u),v),w),a);return e}function b(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeMessageRaw=h;g.makeMessageEnc=a;g.mergeMessageMixin=b}),98);
__d("WASmaxOutSpamNewsletterReportRequest",["WASmaxChildren","WASmaxJsx","WASmaxOutSpamBaseIQSetRequestMixin","WASmaxOutSpamBaseReportMixin","WASmaxOutSpamEntitySubjectMixin","WASmaxOutSpamMessageMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageFrom;b=d("WASmaxOutSpamMessageMixin").mergeMessageMixin(d("WASmaxJsx").smax("message",{from:d("WAWap").JID(b)}),a);return b}function a(a){var b=a.messageArgs,c=a.spamListJid;c=d("WASmaxOutSpamEntitySubjectMixin").mergeEntitySubjectMixin(d("WASmaxOutSpamBaseReportMixin").mergeBaseReportMixin(d("WASmaxOutSpamBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("spam_list",{jid:d("WAWap").JID(c)},d("WASmaxChildren").REPEATED_CHILD(h,b,0,30)))),a),a);return c}g.makeNewsletterReportRequestSpamListMessage=h;g.makeNewsletterReportRequest=a}),98);
__d("WASmaxSpamNewsletterReportRPC",["WAComms","WASmaxInSpamNewsletterReportResponseError","WASmaxInSpamNewsletterReportResponseSuccess","WASmaxOutSpamNewsletterReportRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutSpamNewsletterReportRequest").makeNewsletterReportRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInSpamNewsletterReportResponseSuccess").parseNewsletterReportResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"NewsletterReportResponseSuccess",value:g.value});case 7:h=d("WASmaxInSpamNewsletterReportResponseError").parseNewsletterReportResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"NewsletterReportResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("NewsletterReport",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendNewsletterReportRPC=a}),98);
__d("WAWebNewsletterReportUtils",["Promise","WAJids","WALogger","WASmaxSpamNewsletterReportRPC","WAWebReportSpamJob","WAWebReportUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseNewsletterReportResponse: server response with ",", ",""]);i=function(){return a};return a}function j(a){switch(a.name){case"NewsletterReportResponseError":var b=parseInt(a.value.errorIQErrorInternalServerErrorOrBadRequestMixinGroup.value,10),c=a.value.errorIQErrorInternalServerErrorOrBadRequestMixinGroup.name;d("WALogger").WARN(i(),b,c);return{errorCode:b,errorText:c};default:a.name;return a.value}}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=[];c!=null?f=[c]:f=d("WAWebReportSpamJob").loadMsgsForSpamReport(a,d("WAWebReportSpamJob").SPAM_REPORT_MESSAGE_COUNT,null);var g;c=(yield (h||(h=b("Promise"))).all(f.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("WAWebReportUtils").getMessageMixinArgs(b));b!=null&&(g=babelHelpers["extends"]({messageFrom:d("WAJids").toNewsletterJid(a.id.toJid())},b));return g});return function(a){return c.apply(this,arguments)}}())));f={spamListJid:d("WAJids").toNewsletterJid(a.id.toJid()),spamListSpamFlow:e,spamListSubject:a.name,messageArgs:c.filter(Boolean)};e=(yield d("WASmaxSpamNewsletterReportRPC").sendNewsletterReportRPC(f));return j(e)});return k.apply(this,arguments)}g["default"]=a}),98);
__d("WASmaxInGroupsIQErrorItemNotFoundOrBadRequestOrRateOverlimitOrFallbackClientMixinGroup",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:b.value});var c=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value});var e=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:e.value});var f=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorItemNotFound","IQErrorBadRequest","IQErrorRateOverlimit","IQErrorFallbackClient"],[b,c,e,f])}g.parseIQErrorItemNotFoundOrBadRequestOrRateOverlimitOrFallbackClientMixinGroup=a}),98);
__d("WASmaxInGroupsAcknowledgeGroupResponseClientError",["WAResultOrError","WASmaxInGroupsIQErrorItemNotFoundOrBadRequestOrRateOverlimitOrFallbackClientMixinGroup","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsIQErrorItemNotFoundOrBadRequestOrRateOverlimitOrFallbackClientMixinGroup").parseIQErrorItemNotFoundOrBadRequestOrRateOverlimitOrFallbackClientMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorItemNotFoundOrBadRequestOrRateOverlimitOrFallbackClientMixinGroup:b.value}))}g.parseAcknowledgeGroupResponseClientError=a}),98);
__d("WASmaxInGroupsAcknowledgeGroupResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseAcknowledgeGroupResponseServerError=a}),98);
__d("WASmaxInGroupsAcknowledgeGroupResponseSuccess",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);return!a.success?a:d("WAResultOrError").makeResult({type:c.value})}g.parseAcknowledgeGroupResponseSuccess=a}),98);
__d("WASmaxOutGroupsAcknowledgeGroupRequest",["WASmaxJsx","WASmaxOutGroupsBaseSetGroupMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutGroupsBaseSetGroupMixin").mergeBaseSetGroupMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("ack",null)),a);return a}g.makeAcknowledgeGroupRequest=a}),98);
__d("WASmaxGroupsAcknowledgeGroupRPC",["WAComms","WASmaxInGroupsAcknowledgeGroupResponseClientError","WASmaxInGroupsAcknowledgeGroupResponseServerError","WASmaxInGroupsAcknowledgeGroupResponseSuccess","WASmaxOutGroupsAcknowledgeGroupRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsAcknowledgeGroupRequest").makeAcknowledgeGroupRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsAcknowledgeGroupResponseSuccess").parseAcknowledgeGroupResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"AcknowledgeGroupResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsAcknowledgeGroupResponseClientError").parseAcknowledgeGroupResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"AcknowledgeGroupResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsAcknowledgeGroupResponseServerError").parseAcknowledgeGroupResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"AcknowledgeGroupResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("AcknowledgeGroup",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendAcknowledgeGroupRPC=a}),98);
__d("WASmaxInSpamGroupReportResponseError",["WAResultOrError","WASmaxInSpamEnums","WASmaxInSpamIQErrorInternalServerErrorOrBadRequestMixinGroup","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;c=d("WASmaxInSpamIQErrorInternalServerErrorOrBadRequestMixinGroup").parseIQErrorInternalServerErrorOrBadRequestMixinGroup(c.value);return!c.success?c:d("WAResultOrError").makeResult({from:b.value,type:a.value,errorIQErrorInternalServerErrorOrBadRequestMixinGroup:c.value})}g.parseGroupReportResponseError=a}),98);
__d("WASmaxInSpamGroupReportResponseSuccess",["WAResultOrError","WASmaxInSpamEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:b.value})}g.parseGroupReportResponseSuccess=a}),98);
__d("WASmaxOutSpamFRXMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.tagValue;a=d("WASmaxJsx").smax("tag",{value:d("WAWap").CUSTOM_STRING(a)});return a}function i(a){a=a.parametersElementValue;a=d("WASmaxJsx").smax("parameters",null,a);return a}function j(a){var b,c=a.tagArgs,e=a.parametersArgs,f=a.spamListReportee;a=a.contextElementValue;f=(b=d("WASmaxJsx")).smax("iq",null,b.smax("spam_list",{reportee:d("WAWap").USER_JID(f)}),b.smax("frx",null,b.smax("tagset",null,d("WASmaxChildren").REPEATED_CHILD(h,c,0,20)),b.smax("context",null,a),d("WASmaxChildren").OPTIONAL_CHILD(i,e)));return f}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeFRXFrxTagsetTag=h;g.makeFRXFrxParameters=i;g.mergeFRXMixin=a}),98);
__d("WASmaxOutSpamGroupReportRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamBaseIQSetRequestMixin","WASmaxOutSpamBaseReportMixin","WASmaxOutSpamEntitySubjectMixin","WASmaxOutSpamFRXMixin","WASmaxOutSpamMessageMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageFrom,c=a.messagePhash;b=d("WASmaxOutSpamMessageMixin").mergeMessageMixin(d("WASmaxJsx").smax("message",{from:d("WAWap").GROUP_JID(b),phash:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c)}),a);return b}function a(a){var b=a.messageArgs,c=a.fRXMixinArgs,e=a.spamListJid,f=a.spamListSource;e=d("WASmaxOutSpamEntitySubjectMixin").mergeEntitySubjectMixin(d("WASmaxMixins").optionalMerge(d("WASmaxOutSpamFRXMixin").mergeFRXMixin,d("WASmaxOutSpamBaseReportMixin").mergeBaseReportMixin(d("WASmaxOutSpamBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("spam_list",{jid:d("WAWap").GROUP_JID(e),source:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,f)},d("WASmaxChildren").REPEATED_CHILD(h,b,0,210)))),a),c),a);return e}g.makeGroupReportRequestSpamListMessage=h;g.makeGroupReportRequest=a}),98);
__d("WASmaxSpamGroupReportRPC",["WAComms","WASmaxInSpamGroupReportResponseError","WASmaxInSpamGroupReportResponseSuccess","WASmaxOutSpamGroupReportRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutSpamGroupReportRequest").makeGroupReportRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInSpamGroupReportResponseSuccess").parseGroupReportResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"GroupReportResponseSuccess",value:g.value});case 7:h=d("WASmaxInSpamGroupReportResponseError").parseGroupReportResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"GroupReportResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GroupReport",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendGroupReportRPC=a}),98);
__d("WASmaxInSpamIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInSpamIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInSpamIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup",["WAResultOrError","WASmaxInSpamIQErrorBadRequestMixin","WASmaxInSpamIQErrorForbiddenMixin","WASmaxInSpamIQErrorInternalServerErrorMixin","WASmaxInSpamIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInSpamIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInSpamIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value});var e=d("WASmaxInSpamIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:e.value});var f=d("WASmaxInSpamIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorBadRequest","IQErrorForbidden","IQErrorRateOverlimit"],[b,c,e,f])}g.parseIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup=a}),98);
__d("WASmaxInSpamIndividualReportResponseError",["WAResultOrError","WASmaxInSpamEnums","WASmaxInSpamIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;c=d("WASmaxInSpamIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup").parseIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup(c.value);return!c.success?c:d("WAResultOrError").makeResult({from:b.value,type:a.value,errorIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup:c.value})}g.parseIndividualReportResponseError=a}),98);
__d("WASmaxInSpamIndividualReportResponseSuccess",["WAResultOrError","WASmaxInSpamEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:b.value})}g.parseIndividualReportResponseSuccess=a}),98);
__d("WASmaxOutSpamBizOptOutMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.bizOptOutReason,f=a.bizOptOutBusinessDiscoveryEntryPoint,g=a.bizOptOutBusinessDiscoveryTimestamp,h=a.bizOptOutFirstMessage;a=a.bizOptOutBusinessDiscoveryId;e=d("WASmaxJsx").smax("biz_opt_out",{reason:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,e),business_discovery_entry_point:b.OPTIONAL(c.CUSTOM_STRING,f),business_discovery_timestamp:b.OPTIONAL(c.INT,g),first_message:b.OPTIONAL(c.CUSTOM_STRING,h),business_discovery_id:b.OPTIONAL(c.CUSTOM_STRING,a)});return e}function i(a){a=a.bizOptOutArgs;a=d("WASmaxJsx").smax("spam_list",null,d("WASmaxChildren").OPTIONAL_CHILD(h,a));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeBizOptOutBizOptOut=h;g.mergeBizOptOutMixin=a}),98);
__d("WASmaxOutSpamBizReportMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.bizApiReportKnownAccount;a=a.bizApiReportMessageReport;b=d("WASmaxJsx").smax("spam_list",null,d("WASmaxJsx").smax("biz_api_report",{known_account:d("WAWap").CUSTOM_STRING(b),message_report:d("WAWap").CUSTOM_STRING(a)}));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizReportMixin=a}),98);
__d("WASmaxOutSpamMessageRecipientMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageTo;a=d("WASmaxJsx").smax("message",{to:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageRecipientMixin=a}),98);
__d("WASmaxOutSpamMessageSenderMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageFrom;a=d("WASmaxJsx").smax("message",{from:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageSenderMixin=a}),98);
__d("WASmaxOutSpamMessageSenderOrRecipientMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutSpamMessageRecipientMixin","WASmaxOutSpamMessageSenderMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.messageSender)return d("WASmaxOutSpamMessageSenderMixin").mergeMessageSenderMixin(a,b.messageSender);if(b.messageRecipient)return d("WASmaxOutSpamMessageRecipientMixin").mergeMessageRecipientMixin(a,b.messageRecipient);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeMessageSenderOrRecipientMixinGroup=a}),98);
__d("WASmaxOutSpamPrivacyTokenContentsMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyElementValue;a=d("WASmaxJsx").smax("smax$any",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePrivacyTokenContentsMixin=a}),98);
__d("WASmaxOutSpamTCTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutSpamPrivacyTokenContentsMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.tctokenT;a=a.privacyTokenContentsMixinArgs;b=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutSpamPrivacyTokenContentsMixin").mergePrivacyTokenContentsMixin(d("WASmaxJsx").smax("tctoken",{t:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,b)}),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeTCTokenMixin=a}),98);
__d("WASmaxOutSpamUIStateSetMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("uistate",{value:"spam_banner"});return a}function i(a){a=a.hasUistate;a=d("WASmaxJsx").smax("spam_list",null,d("WASmaxJsx").smax("uistateset",null,d("WASmaxChildren").HAS_OPTIONAL_CHILD(h,a)));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeUIStateSetUistatesetUistate=h;g.mergeUIStateSetMixin=a}),98);
__d("WASmaxOutSpamUserInitiatedExtensionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamExtensionScreenMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutSpamExtensionScreenMixin").mergeExtensionScreenMixin(d("WASmaxJsx").smax("extension_screen",null),a);return a}function i(a){a=a.extensionScreenArgs;a=d("WASmaxJsx").smax("user_initiated_extension",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,100));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeUserInitiatedExtensionExtensionScreen=h;g.mergeUserInitiatedExtensionMixin=a}),98);
__d("WASmaxOutSpamIndividualReportRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutSpamBaseIQSetRequestMixin","WASmaxOutSpamBaseReportMixin","WASmaxOutSpamBizOptOutMixin","WASmaxOutSpamBizReportMixin","WASmaxOutSpamFRXMixin","WASmaxOutSpamMessageMixin","WASmaxOutSpamMessageSenderOrRecipientMixinGroup","WASmaxOutSpamTCTokenMixin","WASmaxOutSpamUIStateSetMixin","WASmaxOutSpamUserInitiatedExtensionMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageSenderOrRecipientMixinGroupArgs;a=d("WASmaxOutSpamMessageSenderOrRecipientMixinGroup").mergeMessageSenderOrRecipientMixinGroup(d("WASmaxOutSpamMessageMixin").mergeMessageMixin(d("WASmaxJsx").smax("message",null),a),b);return a}function i(a){var b,c=a.callTo,e=a.callFrom,f=a.callId,g=a.callInfoDuration,h=a.callInfoReason,i=a.callInfoTerminator,j=a.callInfoStartTime,k=a.callInfoAdder,l=a.callInfoCreator;a=a.callInfoMediatype;e=d("WASmaxJsx").smax("call",{to:(b=d("WAWap")).USER_JID(c),from:b.USER_JID(e),id:b.STANZA_ID(f)},d("WASmaxJsx").smax("call_info",{duration:b.INT(g),reason:b.CUSTOM_STRING(h),terminator:b.USER_JID(i),start_time:(c=d("WASmaxAttrs")).OPTIONAL(b.INT,j),adder:c.OPTIONAL(b.USER_JID,k),creator:c.OPTIONAL(b.USER_JID,l),mediatype:c.OPTIONAL(b.CUSTOM_STRING,a)}));return e}function j(a){a=d("WASmaxOutSpamUserInitiatedExtensionMixin").mergeUserInitiatedExtensionMixin(d("WASmaxJsx").smax("user_initiated_extension",null),a);return a}function a(a){var b,c=a.messageArgs,e=a.callArgs,f=a.userInitiatedExtensionArgs,g=a.fRXMixinArgs,k=a.spamListJid,l=a.bizOptOutMixinArgs,m=a.uIStateSetMixinArgs,n=a.bizReportMixinArgs,o=a.tCTokenMixinArgs;b=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutSpamFRXMixin").mergeFRXMixin,d("WASmaxOutSpamBaseReportMixin").mergeBaseReportMixin(d("WASmaxOutSpamBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",null,b.optionalMerge(d("WASmaxOutSpamTCTokenMixin").mergeTCTokenMixin,b.optionalMerge(d("WASmaxOutSpamBizReportMixin").mergeBizReportMixin,b.optionalMerge(d("WASmaxOutSpamUIStateSetMixin").mergeUIStateSetMixin,b.optionalMerge(d("WASmaxOutSpamBizOptOutMixin").mergeBizOptOutMixin,d("WASmaxJsx").smax("spam_list",{jid:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,k)},[].concat(d("WASmaxChildren").REPEATED_CHILD(h,c,0,210),d("WASmaxChildren").REPEATED_CHILD(i,e,0,5),d("WASmaxChildren").REPEATED_CHILD(j,f,0,5))),l),m),n),o))),a),g);return b}g.makeIndividualReportRequestSpamListMessage=h;g.makeIndividualReportRequestSpamListCall=i;g.makeIndividualReportRequestSpamListUserInitiatedExtension=j;g.makeIndividualReportRequest=a}),98);
__d("WASmaxSpamIndividualReportRPC",["WAComms","WASmaxInSpamIndividualReportResponseError","WASmaxInSpamIndividualReportResponseSuccess","WASmaxOutSpamIndividualReportRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutSpamIndividualReportRequest").makeIndividualReportRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInSpamIndividualReportResponseSuccess").parseIndividualReportResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"IndividualReportResponseSuccess",value:g.value});case 7:h=d("WASmaxInSpamIndividualReportResponseError").parseIndividualReportResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"IndividualReportResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("IndividualReport",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendIndividualReportRPC=a}),98);
__d("WASmaxInSpamStatusReportResponseError",["WAResultOrError","WASmaxInSpamEnums","WASmaxInSpamIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;c=d("WASmaxInSpamIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup").parseIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup(c.value);return!c.success?c:d("WAResultOrError").makeResult({from:b.value,type:a.value,errorIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup:c.value})}g.parseStatusReportResponseError=a}),98);
__d("WASmaxInSpamStatusReportResponseSuccess",["WAResultOrError","WASmaxInSpamEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"from",d("WASmaxInSpamEnums").DOMAINJID_USERJID);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:b.value})}g.parseStatusReportResponseSuccess=a}),98);
__d("WASmaxOutSpamStatusReportRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutSpamBaseIQSetRequestMixin","WASmaxOutSpamBaseReportMixin","WASmaxOutSpamBizOptOutMixin","WASmaxOutSpamBizReportMixin","WASmaxOutSpamFRXMixin","WASmaxOutSpamMessageMixin","WASmaxOutSpamMessageRecipientMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.fRXMixinArgs,e=a.spamListJid,f=a.bizOptOutMixinArgs,g=a.bizReportMixinArgs,h=a.messageFrom,i=a.messageMixinArgs,j=a.messageRecipientMixinArgs;e=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutSpamFRXMixin").mergeFRXMixin,d("WASmaxOutSpamBaseReportMixin").mergeBaseReportMixin(d("WASmaxOutSpamBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",null,b.optionalMerge(d("WASmaxOutSpamBizReportMixin").mergeBizReportMixin,b.optionalMerge(d("WASmaxOutSpamBizOptOutMixin").mergeBizOptOutMixin,d("WASmaxJsx").smax("spam_list",{jid:d("WAWap").JID(e)},b.optionalMerge(d("WASmaxOutSpamMessageRecipientMixin").mergeMessageRecipientMixin,d("WASmaxOutSpamMessageMixin").mergeMessageMixin(d("WASmaxJsx").smax("message",{from:d("WAWap").JID(h)}),i),j)),f),g))),a),c);return e}g.makeStatusReportRequest=a}),98);
__d("WASmaxSpamStatusReportRPC",["WAComms","WASmaxInSpamStatusReportResponseError","WASmaxInSpamStatusReportResponseSuccess","WASmaxOutSpamStatusReportRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutSpamStatusReportRequest").makeStatusReportRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInSpamStatusReportResponseSuccess").parseStatusReportResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"StatusReportResponseSuccess",value:g.value});case 7:h=d("WASmaxInSpamStatusReportResponseError").parseStatusReportResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"StatusReportResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("StatusReport",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendStatusReportRPC=a}),98);
__d("WAWebSpamConstants",["WAWebMsgType"],(function(a,b,c,d,e,f,g){a=Object.freeze({Block:"block_dialog",OverflowMenuBlock:"overflow_menu_block",OverflowMenuReport:"overflow_menu_report",MediaViewer:"media_viewer",MessageMenu:"message_menu",CommunityHome:"community_home",AccountInfoReport:"account_info_report",GroupInfoReport:"group_info_report",GroupSpamBannerReport:"group_spam_banner_report",OneToOneChatSpamBannerReport:"1_1_spam_banner_report",OneToOneOldSpamBannerBlock:"1_1_old_spam_banner_block",BizSpamBannerBlock:"biz_spam_banner_block",ChatListBlock:"chat_list_block",ChatListNoInsubBlock:"chat_list_noinsub_block",NotificationBlock:"notification_block",StatusPostReport:"status_post_report",NewsletterInfoReport:"newsletter_info_report",ChatFmxCardSafetyToolsReport:"chat_fmx_card_safety_tools_report",ChatFmxCardSafetyToolsReportSuspicious:"chat_fmx_card_safety_tools_report_suspicious",GroupInfoLeaveReportUpsell:"group_info_leave_report_upsell",GroupChatlistLeaveReportUpsell:"group_chatlist_leave_report_upsell",GroupOverflowMenuLeaveReportUpsell:"group_overflow_menu_leave_report_upsell"});c=new Set([(b=d("WAWebMsgType")).MSG_TYPE.CHAT,b.MSG_TYPE.AUDIO,b.MSG_TYPE.IMAGE,b.MSG_TYPE.PTT,b.MSG_TYPE.VIDEO,b.MSG_TYPE.VCARD,b.MSG_TYPE.CIPHERTEXT,b.MSG_TYPE.LIST,b.MSG_TYPE.LIST_RESPONSE,b.MSG_TYPE.BUTTONS_RESPONSE,b.MSG_TYPE.NATIVE_FLOW,b.MSG_TYPE.DOCUMENT,b.MSG_TYPE.STICKER,b.MSG_TYPE.LOCATION,b.MSG_TYPE.POLL_CREATION,b.MSG_TYPE.STATUS_V3]);e=new Set([].concat(Array.from(c),[b.MSG_TYPE.UNKNOWN,b.MSG_TYPE.REVOKED]));g.SpamFlow=a;g.SUPPORTED_MESSAGE_TYPES_FOR_MESSAGE_LEVEL_REPORTING=c;g.SPAM_REPORT_SUPPORTED_MESSAGE_TYPES=e}),98);
__d("WAWebIsSpamSupportedForMessageType",["WAWebSpamConstants"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSpamConstants").SUPPORTED_MESSAGE_TYPES_FOR_MESSAGE_LEVEL_REPORTING.has(a)}function b(a){return d("WAWebSpamConstants").SPAM_REPORT_SUPPORTED_MESSAGE_TYPES.has(a)}g.isMsgTypeSupportedForMsgLevelReporting=a;g.isSpamSupportedForMessageType=b}),98);
__d("WAWebPrivacyGatingUtils",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){function a(){return c("gkx")("26255")&&h()}function h(){return d("WAWebABProps").getABPropConfigValue("calling_privacy_callee")}function b(){return d("WAWebABProps").getABPropConfigValue("data_privacy_phase_2_enabled")}function e(){return d("WAWebABProps").getABPropConfigValue("data_privacy_phase_2_non_e2ee_enabled")}g.callSilencingEnabledInElectron=a;g.callSilencingEnabled=h;g.isDataPrivacyPhase2Enabled=b;g.isDataPrivacyPhase2NonE2eeEnabled=e}),98);
__d("WAWebReportSpamJob",["Promise","WAJids","WALogger","WASmaxGroupsAcknowledgeGroupRPC","WASmaxSpamGroupReportRPC","WASmaxSpamIndividualReportRPC","WASmaxSpamStatusReportRPC","WAWebABProps","WAWebIsSpamSupportedForMessageType","WAWebMsgGetters","WAWebNewsletterReportUtils","WAWebPrivacyGatingUtils","WAWebReportUtils","WAWebSchemaChat","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["reportStatus: server response with ",", ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["get chat table merge failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[callp] acknowledging group ",""]);k=function(){return a};return a}var l=5;function m(a,b,c){var e=[],f=a.msgs.toArray().reverse();for(var g=0;g<f.length;g++){if(e.length>=b)break;var h=f[g];if(!d("WAWebIsSpamSupportedForMessageType").isSpamSupportedForMessageType(h.type)||h.from.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser()))continue;if(c){if(a.isGroup&&!c.equals(h.author))continue;if(a.isUser&&!c.equals(h.from))continue}e.push(h)}return e}function a(a){var b;((b=a.buttonsMessage)==null?void 0:b.buttons)!=null&&(a.buttonsMessage=babelHelpers["extends"]({},a.buttonsMessage,{buttons:a.buttonsMessage.buttons.map(function(a){if(a.nativeFlowInfo){var b;b=JSON.parse((b=a.nativeFlowInfo.paramsJson)!=null?b:"{}");delete b.reference_id;delete b.total_amount;return babelHelpers["extends"]({},a,{nativeFlowInfo:babelHelpers["extends"]({},a.nativeFlowInfo,{paramsJson:JSON.stringify(b)})})}return a})}));((b=a.messageContextInfo)==null?void 0:b.messageSecret)!=null&&(a.messageContextInfo=babelHelpers["extends"]({},a.messageContextInfo,{messageSecret:null}));return a}function e(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("WAWebReportUtils").getMessageMixinArgs(b));if(e==null)throw c("err")("report status failed due to unsupported msg type");e=babelHelpers["extends"]({},e,{messageParticipantMixinArgs:{messageParticipant:d("WAWebWidToJid").widToUserJid(d("WAWebMsgGetters").getSender(b))}});a={spamListSpamFlow:a,spamListJid:d("WAJids").STATUS_JID,messageFrom:d("WAJids").STATUS_JID,messageRecipientMixinArgs:{messageTo:d("WAWebWidToJid").widToUserJid(b.to)},messageMixinArgs:e};b=(yield d("WASmaxSpamStatusReportRPC").sendStatusReportRPC(a));switch(b.name){case"StatusReportResponseError":e=parseInt(b.value.errorIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup.value.code,10);a=b.value.errorIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup.value.text;d("WALogger").WARN(i(),e,a);return{errorCode:e,errorText:a};default:b.name;return b.value}});return n.apply(this,arguments)}function f(a){a.isGroup&&d("WAWebPrivacyGatingUtils").callSilencingEnabled()&&(d("WALogger").LOG(k(),a.id.toLogString()),d("WASmaxGroupsAcknowledgeGroupRPC").sendAcknowledgeGroupRPC({iqTo:d("WAWebWidToJid").widToGroupJid(a.id)})["catch"](function(){}));return d("WAWebSchemaChat").getChatTable().merge(a.id.toString(),{notSpam:!0})["catch"](function(a){d("WALogger").ERROR(j()).verbose().devConsole(a).sendLogs("get chat table merge failed when sending spam report");throw c("err")("get chat table merge failed")})}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e,f=(yield d("WAWebReportUtils").getMessageMixinArgs(b));f!=null&&(e=babelHelpers["extends"]({messageSenderOrRecipientMixinGroupArgs:{messageSender:{messageFrom:d("WAWebWidToJid").widToUserJid(b.from)}}},f));f={spamListSpamFlow:c,spamListJid:d("WAWebWidToJid").widToUserJid(d("WAWebMsgGetters").getSender(b)),messageArgs:e!=null?[e]:[],tCTokenMixinArgs:y(a)};c=(yield d("WASmaxSpamIndividualReportRPC").sendIndividualReportRPC(f));return d("WAWebReportUtils").parseIndividualReportResponse(c)});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b={spamListJid:d("WAWebWidToJid").widToGroupJid(a.id),spamListSpamFlow:b,spamListSubject:a.formattedTitle};a=(yield d("WASmaxSpamGroupReportRPC").sendGroupReportRPC(b));return d("WAWebReportUtils").parseGroupReportResponse(a)});return r.apply(this,arguments)}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=[];c!=null?f=[c]:f=m(a,l,null);var g,i;c=(yield (h||(h=b("Promise"))).all(f.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield d("WAWebReportUtils").getMessageMixinArgs(b));b.author?i=d("WAWebWidToJid").widToUserJid(b.author):b.from.isUser()&&(i=d("WAWebWidToJid").widToUserJid(b.from));c!=null&&(g=babelHelpers["extends"]({messageFrom:d("WAWebWidToJid").widToGroupJid(a.id)},c,i!=null&&{messageParticipantMixinArgs:{messageParticipant:i}}));return g});return function(a){return c.apply(this,arguments)}}())));f={spamListJid:d("WAWebWidToJid").widToGroupJid(a.id),spamListSpamFlow:e,spamListSubject:a.formattedTitle,messageArgs:c.filter(Boolean)};e=(yield d("WASmaxSpamGroupReportRPC").sendGroupReportRPC(f));return d("WAWebReportUtils").parseGroupReportResponse(e)});return t.apply(this,arguments)}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=[];c!=null?f=[c]:f=m(a,l,a.id);var g;c=(yield (h||(h=b("Promise"))).all(f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebReportUtils").getMessageMixinArgs(a));b!=null&&(g=babelHelpers["extends"]({messageSenderOrRecipientMixinGroupArgs:{messageSender:{messageFrom:d("WAWebWidToJid").widToUserJid(a.from)}}},b));return g});return function(b){return a.apply(this,arguments)}}())));f={spamListSpamFlow:e,messageArgs:c.filter(Boolean),tCTokenMixinArgs:y(a)};e=(yield d("WASmaxSpamIndividualReportRPC").sendIndividualReportRPC(f));return d("WAWebReportUtils").parseIndividualReportResponse(e)});return v.apply(this,arguments)}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e;a.isNewsletter?e=(yield c("WAWebNewsletterReportUtils")==null?void 0:c("WAWebNewsletterReportUtils")(a,d,b)):d!=null&&!a.isGroup?e=(yield o(a,d,b)):a.isParentGroup===!0?e=(yield q(a,b)):a.isGroup?e=(yield s(a,d,b)):e=(yield u(a,d,b));return e});return x.apply(this,arguments)}function y(a){var b,c=a.tcToken;a=a.tcTokenTimestamp;d("WAWebABProps").getABPropConfigValue("enable_spam_report_iq_with_privacy_token")&&c!=null&&(d("WAWebABProps").getABPropConfigValue("enable_privacy_token_with_timestamp")&&a!=null?b={tctokenT:a,privacyTokenContentsMixinArgs:{anyElementValue:new Uint8Array(c)}}:b={privacyTokenContentsMixinArgs:{anyElementValue:new Uint8Array(c)}});return b}g.SPAM_REPORT_MESSAGE_COUNT=l;g.loadMsgsForSpamReport=m;g.getSpamMessageProtobuf=a;g.reportStatus=e;g.sendNotSpamJob=f;g.reportSpam=w;g.getTcTokenMixinArgs=y}),98);
__d("WAWebReportUtils",["WALogger","WAStanzaUtils","WAWebBackendJobsCommon","WAWebBizGatingUtils","WAWebDBReportingTokenUtils","WAWebE2EProtoUtils","WAWebIsSpamSupportedForMessageType","WAWebMessagingGatingUtils","WAWebMsgGetters","WAWebOTPHelper","WAWebOutgoingMessage","WAWebProtobufsE2E.pb","WAWebReportSpamJob","WAWebViewOnceState","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[WA-ICE][Reporting] getMessageMixinArgs failed for type: ",", subtype: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseIndividualReportResponse: server response with ",", ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseGroupReportResponse: server response with ",", ",""]);j=function(){return a};return a}function a(a){switch(a.name){case"GroupReportResponseError":var b=parseInt(a.value.errorIQErrorInternalServerErrorOrBadRequestMixinGroup.value.code,10),c=a.value.errorIQErrorInternalServerErrorOrBadRequestMixinGroup.value.text;d("WALogger").WARN(j(),b,c);return{errorCode:b,errorText:c};default:a.name;return a.value}}function c(a){switch(a.name){case"IndividualReportResponseError":var b=parseInt(a.value.errorIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup.value.code,10),c=a.value.errorIQErrorInternalServerErrorOrBadRequestOrForbiddenOrRateOverlimitMixinGroup.value.text;d("WALogger").WARN(i(),b,c);return{errorCode:b,errorText:c};default:a.name;return a.value}}function k(a,b){var c=a.conversation;if(!b.isFromTemplate||c==null)return a;b=b.buttons;b==null?void 0:b.forEach(function(a){a=d("WAWebOTPHelper").getOTPCodeFromButton(a);if(a!=null){var b;c=(b=c)==null?void 0:b.replace(a,"<code>")}});a.conversation=c;return a}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c,e=a.isViewOnce&&!d("WAWebViewOnceState").isUnviewed(a.safe());e&&(c=d("WAWebViewOnceState").isViewed(a.safe())?"view_once_opened":"view_once_expired");var f=d("WAWebReportSpamJob").getSpamMessageProtobuf(d("WAWebOutgoingMessage").createOutgoingMsgModelProtobuf(a));f.messageContextInfo=babelHelpers["extends"]({},f.messageContextInfo,{reportingTokenVersion:b==null?void 0:b.version});b=k(f,a);f=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(b);e=e?null:d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,b).readByteArray();b=d("WAWebE2EProtoUtils").typeAttributeFromProtobuf(b);var g;switch(b){case"poll":g={isMessageWithPoll:!0};break;case"text":g={messageWithType:{contentTypeTextOrMediaMixinGroupArgs:{isContentTypeText:!0}}};break;default:g={messageWithType:{contentTypeTextOrMediaMixinGroupArgs:{isContentTypeMedia:!0}}};break}b=e!=null?babelHelpers["extends"]({rawElementValue:e,rawV2Or3MixinGroupArgs:d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION===2?{isRawV2:!0}:{rawV3:{rawProtocolV:d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION}}},f&&{rawMediatype:f}):null;e=a.isFromTemplate&&a.templateId!=null?{hsmTid:a.templateId}:null;return{deletedReason:c,messagePayloadTypesArgs:g,hsmTemplateMixin:e,rawArgs:b}});return m.apply(this,arguments)}function e(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebIsSpamSupportedForMessageType").isSpamSupportedForMessageType(a.type))return null;var b,c=a.id;if(a.type==="revoked"){var e;c=(e=a.protocolMessageKey)!=null?e:a.id}d("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled()&&(b=(yield d("WAWebDBReportingTokenUtils").getReportingTokenRowFromMsg(c.toString())));try{e=(yield l(a,b));var f=e.deletedReason,g=e.messagePayloadTypesArgs,i=e.hsmTemplateMixin;e=e.rawArgs;g={messagePayloadTypesArgs:g,messageT:a.t,messageId:d("WAStanzaUtils").toStanzaId(c.id),rawArgs:e,messageDeletedReason:f,messageWithHsmTemplateMixinArgs:i};d("WAWebMsgGetters").getIsEdited(a)&&(g=babelHelpers["extends"]({},g,{hasMessageEdit:!0}));a.type==="revoked"&&(g=babelHelpers["extends"]({},g,a.subtype==="sender"?{hasRevoke:!0}:{hasAdminRevoke:!0}));d("WAWebBizGatingUtils").isSMBMMSpamReportEnabled()&&d("WAWebMsgGetters").getIsMarketingMessage(a)&&(g=babelHelpers["extends"]({hasSMBBroadcastSource:!0},g));b!=null&&b.reportingTag!=null&&(g=babelHelpers["extends"]({waMessageReportingMixinArgs:{hasRaw:!1,reportingTagElementValue:b.reportingTag}},g));return g}catch(b){d("WALogger").ERROR(h(),a.type,a.subtype).tags("wa-ice","reporting").devConsole(b).sendLogs("reporting-get-message-failed");throw b}});return n.apply(this,arguments)}g.parseGroupReportResponse=a;g.parseIndividualReportResponse=c;g.getMessageMixinArgs=e}),98);
__d("WAWebSendServerErrorReceiptJob",["Promise","WABase64","WADeprecatedSendIq","WALogger","WAWap","WAWebCommsAckParser","WAWebCommsWapMd","WAWebCryptoMediaRetry","WAWebFrontendMsgGetters","WAWebMsgGetters","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[media][rmr] Called RMR with null mediaKey"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Called RMR on newsletter media, which has null mediaKey"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.id.id;if(d("WAWebMsgGetters").getIsNewsletterMsg(a)){d("WALogger").ERROR(j()).tags("newsletter").sendLogs("newsletter-called-rmr");return(h||(h=b("Promise"))).resolve()}if(a.mediaKey==null){d("WALogger").ERROR(i()).tags("media","non-sad").sendLogs("rmr-called-with-null-media-key",.001);return(h||(h=b("Promise"))).resolve()}var e=d("WABase64").decodeB64(a.mediaKey);e=(yield d("WAWebCryptoMediaRetry").encryptServerErrorReceipt(e,c));var f=e.ciphertext;e=e.iv;var g=d("WAWebFrontendMsgGetters").getChat(a),k=d("WAWap").CUSTOM_STRING(g.id.toString({legacy:!0}));g=g.isGroup||g.isBroadcast?d("WAWap").CUSTOM_STRING(d("WAWebMsgGetters").getSender(a).toString({legacy:!0})):d("WAWap").DROP_ATTR;var l=d("WAWebUserPrefsMeUser").getMeUser();f=d("WAWap").wap("receipt",{type:"server-error",to:d("WAWebCommsWapMd").USER_JID(l),id:d("WAWap").CUSTOM_STRING(c)},d("WAWap").wap("encrypt",null,d("WAWap").wap("enc_p",null,f),d("WAWap").wap("enc_iv",null,e)),d("WAWap").wap("rmr",{jid:k,from_me:d("WAWap").CUSTOM_STRING(String(d("WAWebMsgGetters").getIsSentByMe(a))),participant:g}));return d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(f,d("WAWebCommsAckParser").toCoreAckTemplate({id:c,"class":"receipt",type:"server-error",from:l,participant:null}))});return k.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebSendAppStateSyncMsgJob",["WADeprecatedSendIq","WALogger","WAWebCommsAckParser","WAWebE2EProtoGenerator","WAWebEventsWaitForOfflineDeliveryEnd","WAWebSendMsgCreateDeviceStanza","WAWebSendMsgTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendKeyMsg: sending ",""]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();d("WALogger").LOG(h(),a.id.toString()).tags("messaging");var c=a.to,e=d("WAWebE2EProtoGenerator").createPeerMsgProtobuf(a);e=(yield d("WAWebSendMsgCreateDeviceStanza").createUserDeviceMsgStanza(c,null,{type:d("WAWebSendMsgTypes").SendMessageRecordType.Message,data:a},e,{type:d("WAWebSendMsgCreateDeviceStanza").MsgType.AppStateSync,pushPriority:b}));return d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(e,d("WAWebCommsAckParser").toCoreAckTemplate({id:a.id.id,"class":"message",from:c,participant:null}))});return i.apply(this,arguments)}g.encryptAndSendKeyMsg=a}),98);
__d("WAWebE2eMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumDeviceType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumRevokeType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({E2eMessageSend:[476,{agentEngagementType:[15,d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[17,d("WAWebWamEnumBotType").BOT_TYPE],e2eCiphertextType:[5,d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[6,a.TYPES.INTEGER],e2eDestination:[4,d("WAWebWamEnumE2eDestination").E2E_DESTINATION],e2eFailureReason:[2,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],e2eReceiverType:[8,d("WAWebWamEnumDeviceType").DEVICE_TYPE],e2eSuccessful:[1,a.TYPES.BOOLEAN],editType:[14,d("WAWebWamEnumEditType").EDIT_TYPE],encRetryCount:[9,a.TYPES.INTEGER],isLid:[12,a.TYPES.BOOLEAN],localAddressingMode:[16,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageIsInvisible:[10,a.TYPES.BOOLEAN],messageMediaType:[7,d("WAWebWamEnumMediaType").MEDIA_TYPE],retryCount:[3,a.TYPES.INTEGER],revokeType:[11,d("WAWebWamEnumRevokeType").REVOKE_TYPE],typeOfGroup:[13,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{E2eMessageSend:[]});g.E2eMessageSendWamEvent=b}),98);
__d("WAWebGroupMsgSendUtils",["WALogger","WAWebGroupType","WAWebMsgGetters","WAWebSchemaGroupMetadata","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWamGroupMetricUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["_getParticipantRecord: no participants record found for the group"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_getParticipantRecord: no participants record found for: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["_getGroupData: no group metadata record found for the group"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["_getGroupData: no group metadata record found for: ",""]);k=function(){return a};return a}function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(a));f==null&&(d("WALogger").WARN(k(),a),c("gkx")("26258")||d("WALogger").WARN(j()).sendLogs("messaging-no-group-metadata-record-for-group"));a={isIncognito:null,amIAdmin:null,isCag:null,isLid:null,isLidAddressingMode:null,wamTypeOfGroup:null,participantCount:null,deviceCount:null,deviceSizeBucket:null};if(f!=null){var g=d("WAWebGroupType").getGroupTypeFromGroupMetadata(f);a.wamTypeOfGroup=d("WAWebGroupType").groupTypeToWamEnum(g);g=g===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP;var h=f.incognito===!0;a.isLid=g&&h&&e;a.isCag=g;a.isIncognito=h;a.isLidAddressingMode=f.isLidAddressingMode}if(b!=null){e=d("WAWebUserPrefsMeUser").assertGetMeUser();g=b.admins.includes(e.toString());a.amIAdmin=g;Object.assign(a,d("WAWebWamGroupMetricUtils").getGroupMetricsFromDbRecord(b))}return a});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaParticipant").getParticipantTable().get(a));b==null&&(d("WALogger").WARN(i(),a),c("gkx")("26258")||d("WALogger").WARN(h()).sendLogs("messaging-no-participant-record-for-group"));return b});return m.apply(this,arguments)}function f(a,b){return b.isCag===!0&&b.isIncognito===!0?d("WAWebMsgGetters").getIsReaction(a)||d("WAWebMsgGetters").getIsPollVote(a):!1}function n(a){return"group type: "+(a.isLidAddressingMode===!0?"lid":"pn")+", "+(a.isCag===!0?"cag":"nonCag")+", "+(a.isIncognito===!0?"incognito":"nonIncognito")}g.getGroupData=a;g.getParticipantRecord=e;g.isCagAddon=f;g.groupTypeForLogging=n}),98);
__d("WAWebPostE2eMessageSendMetric",["WAWebBackendJobsCommon","WAWebE2eMessageSendWamEvent","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumEditType","WAWebWamMsgUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=a.to,c=a.retryCount,e=a.type,f=a.msg;a=a.editType;a=a===void 0?d("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED:a;c=new(d("WAWebE2eMessageSendWamEvent").E2eMessageSendWamEvent)({e2eCiphertextVersion:d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION,isLid:b.isLid(),retryCount:c,editType:a,botType:d("WAWebWamMsgUtils").getWamBotType(b,f==null?void 0:f.bizBotType)});a=d("WAWebBackendJobsCommon").getMetricE2eDestination(b);a&&(c.e2eDestination=a);e!=null&&(c.e2eCiphertextType=d("WAWebBackendJobsCommon").getMetricE2eCiphertextType(e));f&&(c.messageMediaType=d("WAWebWamMsgUtils").getWamMediaType(f),b.isBot()&&(f.id.remote.isBot()?c.agentEngagementType=d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:c.agentEngagementType=d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED));return c}function a(a){a=h(a);a.e2eSuccessful=!0;a.commit()}function b(a){a=h(a);a.e2eSuccessful=!1;a.weight=1;a.commit()}g.postSuccessDirectE2eMessageSendMetric=a;g.postFailureDirectE2eMessageSendMetric=b}),98);
__d("WAWebEncryptMsgProtobuf",["Promise","WALogger","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebE2eMessageSendWamEvent","WAWebGroupMsgSendUtils","WAWebMsgGetters","WAWebPostE2eMessageSendMetric","WAWebSendMsgCommonApi","WAWebSignal","WAWebSignalSessionApi","WAWebUserPrefsMeUser","WAWebWamAddressingModeUtils","WAWebWamEnumE2eDestination","WAWebWamEnumEditType","WAWebWamMsgUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptMsgSenderKey: encryption fail for ",", ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptMsgProtobuf: encryption fail for ",", ",""]);j=function(){return a};return a}function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){i===void 0&&(i=d("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED);try{f=(yield d("WAWebSignal").Cipher.encryptSignalProto(a,d("WAWebSendMsgCommonApi").encodeAndPad(f)));var k=f.type;f=f.ciphertext;d("WAWebPostE2eMessageSendMetric").postSuccessDirectE2eMessageSendMetric({to:a,retryCount:e,type:k,msg:g,editType:i});return{type:k,ciphertext:f}}catch(f){d("WALogger").WARN(j(),a.toString(),f).tags("messaging");d("WAWebSignalSessionApi").maybeDeleteUnconvertedSession(a);d("WAWebPostE2eMessageSendMetric").postFailureDirectE2eMessageSendMetric({to:a,retryCount:e,msg:g,editType:i});return(h||(h=b("Promise"))).reject(c("err")("[messaging] encryptMsgProtobuf: encryption fail for "+a.toString()+", "+f))}});return k.apply(this,arguments)}function e(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var j;j=new(d("WAWebE2eMessageSendWamEvent").E2eMessageSendWamEvent)(babelHelpers["extends"]({e2eSuccessful:!0,e2eCiphertextType:d("WAWebBackendJobsCommon").getMetricE2eCiphertextType(d("WAWebBackendJobs.flow").CiphertextType.Skmsg),e2eCiphertextVersion:d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION,e2eDestination:d("WAWebWamEnumE2eDestination").E2E_DESTINATION.GROUP,messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(a),retryCount:0,isLid:(j=g.isLid)!=null?j:void 0,typeOfGroup:(j=g.wamTypeOfGroup)!=null?j:void 0,editType:d("WAWebMsgGetters").getWamEditType(a)},d("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(g)));var k=d("WAWebWamMsgUtils").getWamAgentEngagementType(a);k!=null&&(j.agentEngagementType=k);k=d("WAWebUserPrefsMeUser").getMaybeMeLid();a=d("WAWebGroupMsgSendUtils").isCagAddon(a,g)&&k!=null?k:d("WAWebUserPrefsMeUser").assertGetMe();try{return yield d("WAWebSignal").Cipher.encryptSenderKeyMsgSignalProto(e,a,f)}catch(a){j.e2eSuccessful=!1;j.weight=1;d("WALogger").WARN(i(),e.toString(),a).tags("messaging");return(h||(h=b("Promise"))).reject(c("err")("[messaging] encryptMsgSenderKey: encryption fail for "+e.toString()+", "+a))}finally{j.commit()}});return l.apply(this,arguments)}g.encryptMsgProtobuf=a;g.encryptMsgSenderKey=e}),98);
__d("WAWebSendMsgCreateDeviceStanza",["invariant","$InternalEnum","Promise","WAWap","WAWebABProps","WAWebAdvSignatureApi","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebBizCoexGatingUtils","WAWebCommsWapMd","WAWebDBGroupsGroupMetadata","WAWebDeviceSentMessageProtoUtils","WAWebE2EProtoGenerator","WAWebE2EProtoUtils","WAWebEncryptMsgProtobuf","WAWebHandleMsgCommon","WAWebICDCMetaApi","WAWebManageE2ESessionsJob","WAWebSendMsgCommonApi","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){var i,j=b("$InternalEnum").Mirrored(["Retry","AppStateSync"]);function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){var i=e;yield d("WAWebManageE2ESessionsJob").ensureE2ESessions([a]);d("WAWebUserPrefsMeUser").isMeAccount(a)&&f.type!==j.AppStateSync?(b!=null||h(0,56363),i=d("WAWebDeviceSentMessageProtoUtils").wrapDeviceSentMessage(e,b),yield d("WAWebICDCMetaApi").populateICDCMeta(d("WAWebWidFactory").toUserWid(b),i)):yield d("WAWebICDCMetaApi").populateICDCMeta(d("WAWebWidFactory").toUserWid(a),i);return m(a,null,b,c,i,f,g)});return k.apply(this,arguments)}function e(a,b,c,d,e,f){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,k){yield d("WAWebManageE2ESessionsJob").ensureE2ESessions([e]);if(h.type===j.AppStateSync)return(i||(i=b("Promise"))).reject(c("err")("[messaging] createGroupDeviceMsgStanza: not expect for App State Sync message"));g=d("WAWebUserPrefsMeUser").isMeAccount(e)?d("WAWebDeviceSentMessageProtoUtils").wrapDeviceSentMessage(g,a):g;yield d("WAWebICDCMetaApi").populateICDCMeta(d("WAWebWidFactory").toUserWid(e),g);return m(a,e,null,f,g,h,k)});return l.apply(this,arguments)}function m(a,b,c,d,e,f,g){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,i){var k,l=e.data,m=b||a;k=(k=g.retryCount)!=null?k:0;var n=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(f),o=l.id,p=d("WAWebBackendJobsCommon").getMetricEditTypeFromMsg(f,l),q=!1;if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&k>0){var r;((r=e.data)==null?void 0:r.senderOrRecipientAccountTypeHosted)===!0&&(q=!0)}r=a.isBot()&&c!=null&&!c.isBot();var s=Boolean((b==null?void 0:b.isBot())||r);i=(yield d("WAWebEncryptMsgProtobuf").encryptMsgProtobuf(m,k,s&&i?d("WAWebE2EProtoGenerator").updateBotInvokeMsgProtoCopyForCapi(f,i):f,l,p));p=i.type;i=i.ciphertext;var t=null;if(p===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg){var u=(yield d("WAWebAdvSignatureApi").getADVEncodedIdentity());t=d("WAWap").wap("device-identity",null,u)}g.type!==j.Retry&&(yield d("WAWebSendMsgCommonApi").updateIdentityRange(e,[m]));yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();u=d("WAWebE2EProtoUtils").pollTypeAttributeFromProtobuf(f);e=u!=null?u:d("WAWap").DROP_ATTR;m=q===!0?d("WAWap").CUSTOM_STRING("hosted"):d("WAWap").DROP_ATTR;u=e!==d("WAWap").DROP_ATTR||m!==d("WAWap").DROP_ATTR;q=u!==!0?null:d("WAWap").wap("meta",{polltype:e,sender_intent:m});g.pushPriority!=null?u=d("WAWap").CUSTOM_STRING(g.pushPriority):u=g.type===j.AppStateSync?d("WAWap").CUSTOM_STRING("high"):d("WAWap").DROP_ATTR;e=null;if(a.isGroup()&&d("WAWebABProps").getABPropConfigValue("lid_groups_outgoing_explicit_address_mode")){m=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));e=(m==null?void 0:m.isLidAddressingMode)===!0?d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid:d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn}m=c&&r?c:a;r=d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(p),count:k===0?d("WAWap").DROP_ATTR:d("WAWap").INT(k),mediatype:d("WAWebBackendJobsCommon").encodeMaybeMediaType(n),"decrypt-fail":d("WAWebBackendJobsCommon").encodeMaybeDecryptFail(d("WAWebE2EProtoUtils").decryptFailAttributeFromProtobuf(f))},i);if(s){p=(a==null?void 0:a.isBot())?a:b;p!=null&&p.isBot()||h(0,75934);r=d("WAWap").wap("bot",null,d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(p)},r))}return d("WAWap").wap("message",{id:d("WAWap").CUSTOM_STRING(o.id),to:d("WAWebCommsWapMd").JID(m),participant:b&&!s?d("WAWebCommsWapMd").DEVICE_JID(b):d("WAWap").DROP_ATTR,recipient:c&&!s?d("WAWebCommsWapMd").USER_JID(c):d("WAWap").DROP_ATTR,type:d("WAWebE2EProtoUtils").typeAttributeFromProtobuf(f),edit:d("WAWebSendMsgCommonApi").editAttribute(f,l.subtype),category:g.type===j.AppStateSync?d("WAWap").CUSTOM_STRING("peer"):d("WAWap").DROP_ATTR,push_priority:u,addressing_mode:e!=null?d("WAWap").CUSTOM_STRING(e):d("WAWap").DROP_ATTR},r,t,q)});return n.apply(this,arguments)}g.MsgType=j;g.createUserDeviceMsgStanza=a;g.createGroupDeviceMsgStanza=e}),98);
__d("WAWebCommonMsgSubtypeTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({Subject:"subject",Add:"add",Remove:"remove",Leave:"leave",Picture:"picture",Modify:"modify",Suspend:"suspend",Delete:"delete",Create:"create",Promote:"promote",Demote:"demote",Invite:"invite",RevokeInvite:"revoke_invite",Description:"description",ParentGroupDescription:"parent_group_description",Restrict:"restrict",Announce:"announce",AnnounceMsgBounce:"announce_msg_bounce",V4AddInviteSent:"v4_add_invite_sent",V4AddInviteJoin:"v4_add_invite_join",NoFrequentlyForwarded:"no_frequently_forwarded",InitialPHashMismatch:"initial_pHash_mismatch",Ephemeral:"ephemeral",GrowthLocked:"growth_locked",GrowthUnlocked:"growth_unlocked",ParentGroupLink:"parent_group_link",ParentGroupLinkMembershipApproval:"parent_group_link_membership_approval",SiblingGroupLink:"sibling_group_link",SubGroupLink:"sub_group_link",ParentGroupUnlink:"parent_group_unlink",SiblingGroupUnlink:"sibling_group_unlink",SubGroupUnlink:"sub_group_unlink",LinkedGroupJoin:"linked_group_join",DeleteParentGroup:"delete_parent_group",DeleteParentGroupUnlink:"delete_parent_group_unlink",DeleteParentSubGroupUnlink:"delete_parent_sub_group_unlink",IntegrityParentGroupUnlink:"integrity_parent_group_unlink",IntegritySubGroupUnlink:"integrity_sub_group_unlink",LinkedGroupPromote:"linked_group_promote",LinkedGroupDemote:"linked_group_demote",MembershipApprovalMode:"membership_approval_mode",MembershipApprovalRequest:"membership_approval_request",MemberAddMode:"member_add_mode",CreatedMembershipRequests:"created_membership_requests",RevokedMembershipRequests:"revoked_membership_requests",AutoAdd:"auto_add",DefaultSubGroupAdminAdd:"default_sub_group_admin_add",DefaultSubGroupPromote:"default_sub_group_promote",DefaultSubGroupDemote:"default_sub_group_demote",InviteAutoAdd:"invite_auto_add",CommunityParticipantAddRich:"community_participant_add_rich",CommunityInviteRich:"community_invite_rich",SubGroupParticipantAddRich:"sub_group_participant_add_rich",SubGroupInviteRich:"sub_group_invite_rich",CommunityLinkParentGroupRich:"community_link_parent_group_rich",CommunityInviteAutoAddRich:"community_invite_auto_add_rich",AllowNonAdminSubGroupCreation:"allow_non_admin_sub_group_creation",AllowAdminReports:"allow_admin_reports",CreatedSubgroupSuggestion:"created_subgroup_suggestion",RevokedSubGroupSuggestions:"revoked_sub_group_suggestions",AdminReportReceived:"admin_report_received",SubgroupSuggestionsChangeNumber:"subgroup_suggestions_change_number",SubgroupAdminTriggeredAutoAdd:"subgroup_admin_triggered_auto_add",SubgroupAdminTriggeredInviteAutoAdd:"subgroup_admin_triggered_invite_auto_add",EmptySubgroupCreate:"empty_subgroup_create",GeneralChatAdd:"general_chat_add",GeneralChatAutoAddDisabled:"general_chat_auto_add_disabled",Url:"url",Encrypt:"encrypt",EncryptNow:"encrypt_now",E2EIdentityUnavailable:"e2e_identity_unavailable",Identity:"identity",Device:"device",ChatPsa:"chat_psa",ErrorInDeviceList:"error_in_device_list",Miss:"miss",MissVideo:"miss_video",MissGroup:"miss_group",MissGroupVideo:"miss_group_video",Silence:"silence",AdminRevoke:"admin_revoke",SenderRevoke:"sender_revoke",EphemeralSetting:"ephemeral_setting",EphemeralSyncResponse:"ephemeral_sync_response",SharePhoneNumber:"share_phone_number",AppStateFatalExceptionNotification:"app_state_fatal_exception_notification",AppStateSyncKeyShare:"app_state_sync_key_share",AppStateSyncKeyRequest:"app_state_sync_key_request",HistorySyncNotification:"history_sync_notification",MessageEdit:"message_edit",BotFeedback:"bot_feedback",BotRequestWelcome:"bot_request_welcome",Request:"request",Send:"send",Ciphertext:"ciphertext",Futureproof:"futureproof",PollVote:"poll_vote",Sender:"sender",Admin:"admin",Phone:"phone",PhoneOnlyFeature:"phone_only_feature",Reaction:"reaction",NonVerifiedTransition:"non_verified_transition",UnverifiedTransition:"unverified_transition",VerifiedTransition:"verified_transition",VerifiedLowUnknown:"verified_low_unknown",VerifiedHigh:"verified_high",VerifiedInitialUnknown:"verified_initial_unknown",VerifiedInitialLow:"verified_initial_low",VerifiedInitialHigh:"verified_initial_high",VerifiedTransitionAnyToNone:"verified_transition_any_to_none",VerifiedTransitionAnyToHigh:"verified_transition_any_to_high",VerifiedTransitionHighToLow:"verified_transition_high_to_low",VerifiedTransitionHighToUnknown:"verified_transition_high_to_unknown",VerifiedTransitionUnknownToLow:"verified_transition_unknown_to_low",VerifiedTransitionLowToUnknown:"verified_transition_low_to_unknown",VerifiedTransitionNoneToLow:"verified_transition_none_to_low",VerifiedTransitionNoneToUnknown:"verified_transition_none_to_unknown",PaymentTransactionStatusUpdateFailed:"payment_transaction_status_update_failed",PaymentTransactionStatusUpdateRefunded:"payment_transaction_status_update_refunded",PaymentTransactionStatusUpdateRefundFailed:"payment_transaction_status_update_refund_failed",PaymentTransactionStatusReceiverPendingSetup:"payment_transaction_status_receiver_pending_setup",PaymentTransactionStatusReceiverSuccessAfterHiccup:"payment_transaction_status_receiver_success_after_hiccup",PaymentTransactionRequestCancelled:"payment_transaction_request_cancelled",PaymentActionAccountSetupReminder:"payment_action_account_setup_reminder",PaymentActionSendPaymentReminder:"payment_action_send_payment_reminder",PaymentActionSendPaymentInvitation:"payment_action_send_payment_invitation",PaymentActionRequestDeclined:"payment_action_request_declined",PaymentActionRequestExpired:"payment_action_request_expired",PaymentInviteAccountSetUp:"payment_invite_account_set_up",BizVerifiedTransitionTopToBottom:"biz_verified_transition_top_to_bottom",BizVerifiedTransitionBottomToTop:"biz_verified_transition_bottom_to_top",BizIntroTop:"biz_intro_top",BizIntroBottom:"biz_intro_bottom",BizNameChange:"biz_name_change",BizMoveToConsumerApp:"biz_move_to_consumer_app",BizTwoTierMigrationTop:"biz_two_tier_migration_top",BizTwoTierMigrationBottom:"biz_two_tier_migration_bottom",SenderInvite:"sender_invite",ReceiverInvite:"receiver_invite",ChangeNumber:"change_number",ChangeUsername:"change_username",MaskedThreadCreated:"masked_thread_created",CagMaskedThreadCreated:"cag_masked_thread_created",InfoEncrypted:"info_encrypted",DescAdd:"desc_add",DescRemove:"desc_remove",Fanout:"fanout",BotUnavailableFanout:"bot_unavailable_fanout",HostedUnavailableFanout:"hosted_unavailable_fanout",DisappearingMode:"disappearing_mode",DisappearingModeUpdate:"disappearing_mode_update",DisappearingModeUnsupported:"disappearing_mode_unsupported",BlockContact:"block_contact",CommunityCreate:"community_create",EphemeralKeepInChat:"ephemeral_keep_in_chat",KeepInChat:"keep_in_chat",ChatAssignment:"chat_assignment",PeerDataOperationRequestMessage:"peer_data_operation_request_message",ChatAssignmentUnassign:"chat_assignment_unassign",PeerDataOperationRequestResponseMessage:"peer_data_operation_request_response_message",NewsletterCreated:"newsletter_created",NewsletterPrivacy:"newsletter_privacy",NewsletterDeleted:"newsletter_deleted",NewsletterAdminContextCard:"newsletter_admin_context_card",PollCreation:"poll_creation",PollUpdate:"poll_update",ContactInfoCard:"contact_info_card",OrderEphemeralExemption:"order_ephemeral_exemption",BotInit:"bot_init",BotTypingPlaceholder:"bot_typing_placeholder",BotInvokeDisclaimer:"bot_invoke_disclaimer",BizBot1PDisclosure:"biz_bot_1p_disclosure",BizBot3PDisclosure:"biz_bot_3p_disclosure",BlueMsgBspFbToBspPremise:"blue_msg_bsp_fb_to_bsp_premise",BlueMsgBspFbToSelfFb:"blue_msg_bsp_fb_to_self_fb",BlueMsgBspFbToSelfPremise:"blue_msg_bsp_fb_to_self_premise",BlueMsgBspFbUnverified:"blue_msg_bsp_fb_unverified",BlueMsgBspFbUnverifiedToBspPremiseVerified:"blue_msg_bsp_fb_unverified_to_bsp_premise_verified",BlueMsgBspFbUnverifiedToSelfFbVerified:"blue_msg_bsp_fb_unverified_to_self_fb_verified",BlueMsgBspFbUnverifiedToSelfPremiseVerified:"blue_msg_bsp_fb_unverified_to_self_premise_verified",BlueMsgBspFbVerified:"blue_msg_bsp_fb_verified",BlueMsgBspFbVerifiedToBspPremiseUnverified:"blue_msg_bsp_fb_verified_to_bsp_premise_unverified",BlueMsgBspFbVerifiedToSelfFbUnverified:"blue_msg_bsp_fb_verified_to_self_fb_unverified",BlueMsgBspFbVerifiedToSelfPremiseUnverified:"blue_msg_bsp_fb_verified_to_self_premise_unverified",BlueMsgBspPremiseToSelfPremise:"blue_msg_bsp_premise_to_self_premise",BlueMsgBspPremiseUnverified:"blue_msg_bsp_premise_unverified",BlueMsgBspPremiseUnverifiedToSelfPremiseVerified:"blue_msg_bsp_premise_unverified_to_self_premise_verified",BlueMsgBspPremiseVerified:"blue_msg_bsp_premise_verified",BlueMsgBspPremiseVerifiedToSelfPremiseUnverified:"blue_msg_bsp_premise_verified_to_self_premise_unverified",BlueMsgConsumerToBspFbUnverified:"blue_msg_consumer_to_bsp_fb_unverified",BlueMsgConsumerToBspPremiseUnverified:"blue_msg_consumer_to_bsp_premise_unverified",BlueMsgConsumerToSelfFbUnverified:"blue_msg_consumer_to_self_fb_unverified",BlueMsgConsumerToSelfPremiseUnverified:"blue_msg_consumer_to_self_premise_unverified",BlueMsgSelfFbToBspPremise:"blue_msg_self_fb_to_bsp_premise",BlueMsgSelfFbToSelfPremise:"blue_msg_self_fb_to_self_premise",BlueMsgSelfFbUnverified:"blue_msg_self_fb_unverified",BlueMsgSelfFbUnverifiedToBspPremiseVerified:"blue_msg_self_fb_unverified_to_bsp_premise_verified",BlueMsgSelfFbUnverifiedToSelfPremiseVerified:"blue_msg_self_fb_unverified_to_self_premise_verified",BlueMsgSelfFbVerified:"blue_msg_self_fb_verified",BlueMsgSelfFbVerifiedToBspPremiseUnverified:"blue_msg_self_fb_verified_to_bsp_premise_unverified",BlueMsgSelfFbVerifiedToSelfPremiseUnverified:"blue_msg_self_fb_verified_to_self_premise_unverified",BlueMsgSelfPremiseToBspPremise:"blue_msg_self_premise_to_bsp_premise",BlueMsgSelfPremiseUnverified:"blue_msg_self_premise_unverified",BlueMsgSelfPremiseVerified:"blue_msg_self_premise_verified",BlueMsgToBspFb:"blue_msg_to_bsp_fb",BlueMsgToConsumer:"blue_msg_to_consumer",BlueMsgToSelfFb:"blue_msg_to_self_fb",BlueMsgUnverifiedToBspFbVerified:"blue_msg_unverified_to_bsp_fb_verified",BlueMsgUnverifiedToBspPremiseVerified:"blue_msg_unverified_to_bsp_premise_verified",BlueMsgUnverifiedToSelfFbVerified:"blue_msg_unverified_to_self_fb_verified",BlueMsgUnverifiedToVerified:"blue_msg_unverified_to_verified",BlueMsgVerifiedToBspFbUnverified:"blue_msg_verified_to_bsp_fb_unverified",BlueMsgVerifiedToBspPremiseUnverified:"blue_msg_verified_to_bsp_premise_unverified",BlueMsgVerifiedToSelfFbUnverified:"blue_msg_verified_to_self_fb_unverified",BlueMsgVerifiedToUnverified:"blue_msg_verified_to_unverified",BizPrivacyModeInitFb:"biz_privacy_mode_init_fb",BizPrivacyModeInitBsp:"biz_privacy_mode_init_bsp",BizPrivacyModeToFb:"biz_privacy_mode_to_fb",BizPrivacyModeToBsp:"biz_privacy_mode_to_bsp",SagaInit:"saga_init",BizAccountTypeChangedToHosted:"biz_account_type_changed_to_hosted",BizMeAccountTypeIsHostedSystemMsg:"biz_me_account_type_is_hosted",BizMeAccountTypeIsHostedSystemMsgTransition:"biz_me_account_type_is_hosted_transition",BizAccountTypeIsHostedSystemMsg:"biz_account_type_is_hosted"});f.MsgSubtype=a}),66);
__d("WAWebWamEnumPrekeysFetchContext",[],(function(a,b,c,d,e,f){a=Object.freeze({SEND_MESSAGE:1,GET_VNAME_CERTIFICATE:2,SEND_LIVE_LOCATION_RETRY:3,SEND_LIVE_LOCATION_KEY:4,SEND_PEER_MESSAGE:5,MULTI_DEVICE_CALL:6,CALL_PEER_E2E_FAIL:7,IDENTITY_CHANGE_NOTIFICATION:8,BACK_OFF:9,USER_INTENT_PREFETCH:10,RESEND_MESSAGE:11,RETRY_MESSAGE:12,USER_INTENT_STATUS_PREFETCH:13});f.PREKEYS_FETCH_CONTEXT=a}),66);
__d("WAWebPrekeysDepletionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMessageType","WAWebWamEnumPrekeysFetchContext","WAWebWamEnumSizeBucket"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({PrekeysDepletion:[3014,{deviceSizeBucket:[3,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],messageType:[2,d("WAWebWamEnumMessageType").MESSAGE_TYPE],prekeysFetchReason:[1,d("WAWebWamEnumPrekeysFetchContext").PREKEYS_FETCH_CONTEXT]},[1,1,1],"regular"]},{PrekeysDepletion:[]});g.PrekeysDepletionWamEvent=a}),98);
__d("WAWebPostPrekeysDepletionMetric",["WALogger","WAWebPrekeysDepletionWamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybePostPrekeysDepletionMetric: depletion prekey count: ",""]);h=function(){return a};return a}function a(a){var b=a.count,c=a.prekeysFetchReason,e=a.messageType;a=a.deviceSizeBucket;if(b==null||b===0)return;var f={};c!=null&&(f.prekeysFetchReason=c);e!=null&&(f.messageType=e);a!=null&&(f.deviceSizeBucket=a);d("WALogger").DEV(h(),b);self.setTimeout(function(){for(var a=0;a<b;a++)new(d("WAWebPrekeysDepletionWamEvent").PrekeysDepletionWamEvent)(f).commit()},0)}g.maybePostPrekeysDepletionMetric=a}),98);
__d("WAWebSendMsgCreateFanoutStanza",["Promise","WALogger","WAWap","WAWebABProps","WAWebAdvSignatureApi","WAWebApiMessageInfoStore","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebBotGating","WAWebBotTypes","WAWebChatCollection","WAWebCommonMsgSubtypeTypes","WAWebCommsWapMd","WAWebContactCollection","WAWebDeviceSentMessageProtoUtils","WAWebE2EProtoGenerator","WAWebE2EProtoUtils","WAWebEncryptMsgProtobuf","WAWebICDCMetaApi","WAWebManageE2ESessionsJob","WAWebMsgGetters","WAWebMsgRcatUtils","WAWebMsgType","WAWebPostPrekeysDepletionMetric","WAWebReportingTokenUtils","WAWebSendMsgCommonApi","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebWamEnumMessageType","WAWebWamEnumPrekeysFetchContext","WAWebWamNumberToSizeBucket","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions with error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendUserMsg: encryption fail for primary device ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendUserMsg: encryption fail for ",": ",""]);k=function(){return a};return a}var l=Object.freeze({CHAT:"chat",GROUP_DIRECT:"groupDirect"});function m(a,b,c,d,e,f,g){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,m,n){var o,p,q=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(g),r=d("WAWebBackendJobsCommon").nativeFlowNameTypeFromProtobuf(g),s=d("WAWebBotGating").isBotEnabled()&&((o=a.invokedBotWid)==null?void 0:o.isBot())===!0;o=d("WAWebBotGating").isBotEnabled()&&d("WAWebMsgGetters").getIsBotFeedbackMessage(a);p=o&&Boolean(a.bizBotType&&((p=a.protocolMessageKey)==null?void 0:p.remote.equals(e)));var t=o&&e.isBot()||p,u=o&&!e.isBot()&&!p,v=d("WAWebMsgGetters").getIsRevokeForMsgFromOrDeliveredToBot(a);if(i.fanoutType===l.CHAT&&f.length===1&&d("WAWebSendMsgCommonApi").isPrimaryDevice(f[0])&&!u){p=f[0];var w=d("WAWebUserPrefsMeUser").isMeAccount(p)?d("WAWebDeviceSentMessageProtoUtils").wrapDeviceSentMessage(g,e):g;p=(yield d("WAWebEncryptMsgProtobuf").encryptMsgProtobuf(p,0,w,a,n));w=p.type;p=p.ciphertext;return{shouldHaveIdentity:w===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg,body:d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(w),mediatype:d("WAWebBackendJobsCommon").encodeMaybeMediaType(q),"decrypt-fail":d("WAWebBackendJobsCommon").encodeMaybeDecryptFail(d("WAWebE2EProtoUtils").decryptFailAttributeFromProtobuf(g)),native_flow_name:d("WAWebBackendJobsCommon").encodeMaybeNativeFlowName(r)},p),botBody:t?d("WAWap").wap("bot",{type:"feedback"}):null}}p=!1;w=f.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var b=d("WAWebUserPrefsMeUser").isMeAccount(c)?d("WAWebDeviceSentMessageProtoUtils").wrapDeviceSentMessage(g,e):g,f=i.fanoutType===l.GROUP_DIRECT?d("WAWebWidFactory").toUserWid(c):d("WAWebWidFactory").toUserWid(e);yield d("WAWebICDCMetaApi").populateICDCMeta(f,b);f=m==null?void 0:m.get(d("WAWebWidToJid").widToUserJid(f));f=f!=null?d("WAWap").wap("content_binding",null,f):null;try{var h=b,o=c.isBot()&&(s||u||v);o&&(h=d("WAWebE2EProtoGenerator").updateBotInvokeMsgProtoCopyForCapi(b,a.botMessageSecret));b=(yield d("WAWebEncryptMsgProtobuf").encryptMsgProtobuf(c,0,h,a,n));h=b.type;b=b.ciphertext;h===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg&&(p=!0);return{shouldFanoutToBot:o,node:d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(c)},d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(h),mediatype:d("WAWebBackendJobsCommon").encodeMaybeMediaType(q),"decrypt-fail":d("WAWebBackendJobsCommon").encodeMaybeDecryptFail(d("WAWebE2EProtoUtils").decryptFailAttributeFromProtobuf(g)),native_flow_name:d("WAWebBackendJobsCommon").encodeMaybeNativeFlowName(r)},b),f)}}catch(a){d("WALogger").WARN(k(),String(c),a);d("WAWebSendMsgCommonApi").isPrimaryDevice(c)&&d("WALogger").ERROR(j(),String(c)).tags("messaging").sendLogs("encryption-fail-for-primary-device");return null}});return function(a){return c.apply(this,arguments)}}());f=(yield (h||(h=b("Promise"))).all(w));var x=[],y=[];f.forEach(function(a){if((a==null?void 0:a.node)==null)return;(a==null?void 0:a.shouldFanoutToBot)?y.push(a.node):x.push(a.node)});return x.length>0||y.length>0?{body:x.length>0?d("WAWap").wap("participants",null,x):null,botBody:y.length>0||t?d("WAWap").wap("bot",{type:o?"feedback":d("WAWap").DROP_ATTR},y):null,shouldHaveIdentity:p}:h.reject(c("err")("[messaging] encryptAndSendUserMsg: encryption fail for all devices"))});return n.apply(this,arguments)}function a(a,b,c,d,e,f){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){var j=a.data,k=j.to,n=j.id,o=j.from,q=j.subtype;try{var r;(r=g.sendPerfReporter)==null?void 0:r.startPrekeysFetchStage();r=(yield d("WAWebManageE2ESessionsJob").ensureE2ESessions(e));var s=r==null?void 0:r.missedPrekeyCount;if(s!=null){var t;(t=g.sendPerfReporter)==null?void 0:t.setFetchedPrekeyCount(s)}(t=g.sendPerfReporter)==null?void 0:t.postPrekeysFetchStage();d("WAWebPostPrekeysDepletionMetric").maybePostPrekeysDepletionMetric({count:r==null?void 0:r.depletedPrekeyCount,prekeysFetchReason:d("WAWebWamEnumPrekeysFetchContext").PREKEYS_FETCH_CONTEXT.SEND_MESSAGE,messageType:f.fanoutType===l.GROUP_DIRECT?d("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP:d("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL,deviceSizeBucket:f.fanoutType===l.GROUP_DIRECT?c("WAWebWamNumberToSizeBucket")(e.length):null})}catch(a){d("WALogger").ERROR(i()).tags("messaging").devConsole(a)}t=d("WAWebMsgGetters").getIsBotFeedbackMessage(j)&&Boolean(j.bizBotType&&((s=j.protocolMessageKey)==null?void 0:s.remote.equals(k)));r=d("WAWebBotGating").isBotEnabled()&&d("WAWebMsgGetters").getIsBotFeedbackMessage(j)&&k.isBot()||t;s=e;f.isResendingMsg&&(s=(yield d("WAWebSendMsgCommonApi").filterDeviceWithChangedIdentity(a,e)));e=s.map(function(a){return{msgKey:n,receiverId:a}});yield d("WAWebApiMessageInfoStore").createOrMergeReceiptRecords(e);(e=g.sendPerfReporter)==null?void 0:e.startClientEncryptStage();e=(yield d("WAWebMsgRcatUtils").genContentBindingForMsg(j,p(o,s)));var u=d("WAWebMsgGetters").getWamEditType(j);u=(yield m(j,k,s,b,f,e,u));(g=g.sendPerfReporter)==null?void 0:g.postClientEncryptStage();g=null;if(f.fanoutType===l.GROUP_DIRECT){var v=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(b);g=d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobs.flow").CiphertextType.Skmsg),mediatype:d("WAWebBackendJobsCommon").encodeMaybeMediaType(v)})}v=null;if(u.shouldHaveIdentity){var w=(yield d("WAWebAdvSignatureApi").getADVEncodedIdentity());v=d("WAWap").wap("device-identity",null,w)}w=d("WAWebE2EProtoUtils").getBizNativeFlowName(b);var x,y=d("WAWebContactCollection").ContactCollection.get(k),z=d("WAWebChatCollection").ChatCollection.get(k),A=y==null?void 0:y.privacyMode;if(A!=null){var B;x=(B=d("WAWap")).wap("biz",{host_storage:B.INT(A.hostStorage),actual_actors:B.INT(A.actualActors),privacy_mode_ts:B.INT(A.privacyModeTs),native_flow_name:B.MAYBE_CUSTOM_STRING(w)})}var C,D,E;k.isLid()&&(((z==null?void 0:z.lidOriginType)==null||(z==null?void 0:z.lidOriginType)==="ctwa")&&(y==null?void 0:y.shareOwnPn)!==!0&&(y==null?void 0:y.phoneNumber)!=null?C=y==null?void 0:y.phoneNumber:d("WAWebABProps").getABPropConfigValue("lid_outgoing_msg_attach_meta_tag")&&(z==null?void 0:z.lidOriginType)==="username"&&((y==null?void 0:y.username)!=null&&(D=y==null?void 0:y.username),a.data.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.data.subtype===d("WAWebCommonMsgSubtypeTypes").MsgSubtype.SharePhoneNumber&&(E=!0)));A=z==null?void 0:z.lidOriginType;x==null&&w!=null&&(x=d("WAWap").wap("biz",{native_flow_name:d("WAWap").CUSTOM_STRING(w)}));f.isResendingMsg||(yield d("WAWebSendMsgCommonApi").updateIdentityRange(a,s));yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();B=d("WAWebE2EProtoUtils").pollTypeAttributeFromProtobuf(b);var F;if(k.isLid()&&d("WAWebABProps").getABPropConfigValue("lid_outgoing_msg_attach_meta_tag")||B!=null){var G;k.isLid()&&d("WAWebABProps").getABPropConfigValue("lid_outgoing_msg_attach_meta_tag")&&(G=A==="username"?d("WAWebBackendJobs.flow").LidOriginType.USERNAME:d("WAWebBackendJobs.flow").LidOriginType.CTWA);F=d("WAWap").wap("meta",{origin:G!=null?d("WAWap").CUSTOM_STRING(G):d("WAWap").DROP_ATTR,share_pn:E!=null?d("WAWap").CUSTOM_STRING("true"):d("WAWap").DROP_ATTR,polltype:B!=null?d("WAWap").CUSTOM_STRING(B):d("WAWap").DROP_ATTR})}y=e==null?void 0:e.get(d("WAWebWidToJid").widToUserJid(d("WAWebWidFactory").toUserWid(o)));z=y!=null?d("WAWap").wap("sender_content_binding",null,y):null;var H;if(j.subtype==="bot_request_welcome")H="request_welcome";else if(j.botMsgBodyType!=null)switch(j.botMsgBodyType){case d("WAWebBotTypes").BotMsgBodyType.PROMPT:H="prompt";break;case d("WAWebBotTypes").BotMsgBodyType.COMMAND:H="command";break}var I;if(j.bizBotType&&!t)switch(j.bizBotType){case d("WAWebBotTypes").BizBotType.BIZ_1P:I="1p_partial";break;case d("WAWebBotTypes").BizBotType.BIZ_3P:I="3p_full";break}var J;(H!=null||I!=null)&&(J=d("WAWap").wap("bot",{type:H!=null?d("WAWap").CUSTOM_STRING(H):d("WAWap").DROP_ATTR,local_automated_type:I!=null?d("WAWap").CUSTOM_STRING(I):d("WAWap").DROP_ATTR}));w=(yield d("WAWebReportingTokenUtils").genReportingTokenBody(j,b));return d("WAWap").wap("message",{id:d("WAWap").CUSTOM_STRING(n.id),to:d("WAWebCommsWapMd").CHAT_JID(k),type:d("WAWebE2EProtoUtils").typeAttributeFromProtobuf(b),edit:d("WAWebSendMsgCommonApi").editAttribute(b,q),device_fanout:f.isResendingMsg===!0||r?d("WAWap").CUSTOM_STRING("false"):d("WAWap").DROP_ATTR,recipient_pn:C?d("WAWebCommsWapMd").USER_JID(C):d("WAWap").DROP_ATTR,recipient_username:D!=null?d("WAWap").CUSTOM_STRING(D):d("WAWap").DROP_ATTR,addressing_mode:h!=null?d("WAWap").CUSTOM_STRING(h):d("WAWap").DROP_ATTR},u.body,u.botBody,g,v,x,F,z,J,w)});return o.apply(this,arguments)}function p(a,b){var c=new Map();c.set(a.user,d("WAWebWidFactory").toUserWid(a));for(a of b)c.has(a.user)||c.set(a.user,d("WAWebWidFactory").toUserWid(a));return Array.from(c.values())}g.FANOUT_TYPE=l;g.createFanoutMsgStanza=a}),98);
__d("WAWebWamEnumClientGroupSizeBucket",[],(function(a,b,c,d,e,f){a=Object.freeze({SMALL:1,MEDIUM:2,LARGE:3,EXTRA_LARGE:4,XX_LARGE:5,XXX_LARGE:6,LT1024:16,LT1500:7,LT2000:8,LT2500:9,LT3000:10,LT3500:11,LT4000:12,LT4500:13,LT5000:14,LARGEST_BUCKET:15});f.CLIENT_GROUP_SIZE_BUCKET=a}),66);
__d("WAWebWamEnumClientMessageSendStage",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_RENDERED:1,CLIENT_SAVED:2,CLIENT_WRITTEN_WIRE:3,CLIENT_QUEUED:4,CLIENT_WAITING_TO_ENCRYPT:5,CLIENT_READY_TO_SEND:6,CLIENT_ENCRYPT:7,CLIENT_PREKEYS_FETCH:8});f.CLIENT_MESSAGE_SEND_STAGE=a}),66);
__d("WAWebAndroidMessageSendPerfWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumClientGroupSizeBucket","WAWebWamEnumClientMessageSendStage","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({AndroidMessageSendPerf:[1994,{appRestart:[16,a.TYPES.BOOLEAN],bucketedSenderKeyDistributionCountPercentage:[32,a.TYPES.INTEGER],bucketedSenderKeyDistributionHashTime:[35,a.TYPES.INTEGER],deviceCount:[36,a.TYPES.INTEGER],deviceSizeBucket:[26,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],durationAbs:[11,a.TYPES.TIMER],durationRelative:[12,a.TYPES.TIMER],durationT:[1,a.TYPES.TIMER],editType:[42,d("WAWebWamEnumEditType").EDIT_TYPE],fetchPrekeys:[15,a.TYPES.BOOLEAN],fetchPrekeysPercentage:[21,a.TYPES.INTEGER],groupSizeBucket:[17,d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],isDirectedMessage:[33,a.TYPES.BOOLEAN],isE2eBackfill:[27,a.TYPES.BOOLEAN],isLid:[41,a.TYPES.BOOLEAN],isMessageFanout:[9,a.TYPES.BOOLEAN],isMessageForward:[8,a.TYPES.BOOLEAN],isRevokeMessage:[24,a.TYPES.BOOLEAN],isViewOnce:[29,a.TYPES.BOOLEAN],jobsInQueue:[18,a.TYPES.INTEGER],mediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageIsFirstUserMessage:[30,a.TYPES.BOOLEAN],messageIsInvisible:[31,a.TYPES.BOOLEAN],messageType:[4,d("WAWebWamEnumMessageType").MESSAGE_TYPE],networkWasDisconnected:[14,a.TYPES.BOOLEAN],participantCount:[37,a.TYPES.INTEGER],phoneCores:[34,a.TYPES.INTEGER],prekeysEligibleForPrallelProcessing:[28,a.TYPES.BOOLEAN],receiverDeviceCount:[39,a.TYPES.INTEGER],sendCount:[13,a.TYPES.INTEGER],sendRetryCount:[10,a.TYPES.INTEGER],sendStage:[2,d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE],senderDeviceCount:[40,a.TYPES.INTEGER],senderKeyDistributionCountPercentage:[23,a.TYPES.INTEGER],sessionsMissingWhenComposing:[25,a.TYPES.BOOLEAN],targetDeviceGroupSizeBucket:[20,d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],threadsInExecution:[19,a.TYPES.INTEGER],typeOfGroup:[38,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,2e3],"regular"]},{AndroidMessageSendPerf:[]});g.AndroidMessageSendPerfWamEvent=b}),98);
__d("WAWebMessageSendPerfReporter",["WAWebAndroidMessageSendPerfWamEvent","WAWebMessagingGatingUtils","WAWebWamEnumClientMessageSendStage","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket","gkx"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=a.chatWid,c=a.mediaType;a=a.messageType;this.$7=!1;this.$8=!1;this.$9=null;this.$11=!1;this.$12=!1;this.$1=Date.now();this.$2=new Map();this.$5=c;this.$6=a;this.$10=b}var b=a.prototype;b.setFetchedPrekeyCount=function(a){this.$3=a};b.setSenderKeyDistributionCount=function(a){this.$4=a};b.setMessageIsInvisible=function(a){this.$11=a};b.setMessageIsFirstUserMessage=function(a){this.$12=a};b.setIsRevokeMessage=function(a){this.$7=a};b.setIsDirectedMessage=function(a){this.$8=a};b.setGroupData=function(a){this.$9=a};b.startRenderedStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_RENDERED)};b.postRenderedStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_RENDERED)};b.startSavedStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_SAVED)};b.postSavedStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_SAVED)};b.startPrekeysFetchStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_PREKEYS_FETCH)};b.postPrekeysFetchStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_PREKEYS_FETCH)};b.startWrittenWireStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WRITTEN_WIRE)};b.postWrittenWireStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WRITTEN_WIRE)};b.startWaitingToEncryptStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WAITING_TO_ENCRYPT)};b.postWaitingToEncryptStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WAITING_TO_ENCRYPT)};b.startReadyToSendStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_READY_TO_SEND)};b.postReadyToSendStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_READY_TO_SEND)};b.startClientEncryptStage=function(){this.$13(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_ENCRYPT)};b.postClientEncryptStage=function(){this.$14(d("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_ENCRYPT)};b.$13=function(a){var b=new(d("WAWebAndroidMessageSendPerfWamEvent").AndroidMessageSendPerfWamEvent)({sendStage:a});this.$2.set(a,b);return b};b.$14=function(a){var b;a=this.$2.get(a)||this.$13(a);a.mediaType=this.$5;a.messageType=this.$6;a.messageIsInvisible=this.$11;a.messageIsFirstUserMessage=this.$12;a.durationRelative=Date.now()-this.$1;a.fetchPrekeys=this.$3!=null&&this.$3>0;a.isRevokeMessage=this.$7;a.isDirectedMessage=this.$8;((b=this.$9)==null?void 0:b.isLid)!=null?a.isLid=this.$9.isLid:this.$6===d("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL&&(a.isLid=this.$10.isLid());((b=this.$9)==null?void 0:b.wamTypeOfGroup)!=null&&(a.typeOfGroup=this.$9.wamTypeOfGroup);((b=this.$9)==null?void 0:b.participantCount)!=null&&(a.participantCount=this.$9.participantCount);((b=this.$9)==null?void 0:b.deviceSizeBucket)!=null&&(a.deviceSizeBucket=this.$9.deviceSizeBucket);if(((b=this.$9)==null?void 0:b.deviceCount)!=null){b=this.$9.deviceCount;a.deviceCount=b;this.$3!=null&&b>0&&(a.fetchPrekeysPercentage=Math.round(this.$3/b*100));this.$4!=null&&b>0&&(a.senderKeyDistributionCountPercentage=Math.round(this.$4/b*100))}a.participantCount!=null&&a.participantCount>d("WAWebMessagingGatingUtils").getGroupSizeBypassingSampling()?a.weight=0:a.fetchPrekeysPercentage!=null&&a.fetchPrekeysPercentage>=50||a.messageIsFirstUserMessage?a.weight=0:a.senderKeyDistributionCountPercentage!=null&&a.senderKeyDistributionCountPercentage>=50?!c("gkx")("26258")?a.weight=1:a.weight=20:(a.deviceSizeBucket===d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT5000||a.deviceSizeBucket===d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LARGEST_BUCKET)&&(!c("gkx")("26258")?a.weight=1:a.weight=100);a.markDurationAbs();a.commit()};return a}();g.MessageSendPerfReporter=a}),98);
__d("WAWebSendMsgJob",["Promise","WAWebEventsWaitForOfflineDeliveryEnd","WAWebMessageSendPerfReporter","WAWebMessageSendReporter","WAWebOutgoingMessage","WAWebSendGroupKeyDistributionMsgJob","WAWebSendGroupMsgJob","WAWebSendTcTokenChatAction","WAWebSendUserMsgJob","WAWebWamEnumMediaType","WAWebWamEnumMessageType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();var f=a.data,g=f.id;f=f.to;if(!g||!g.id)return(h||(h=b("Promise"))).reject(c("err")("[messaging] sending message without an id"));if(!f)return(h||(h=b("Promise"))).reject(c("err")("[messaging] sending message without an remote id"));g=d("WAWebOutgoingMessage").createOutgoingMessageProtobuf(a);if(f.isUser()){var i=d("WAWebSendUserMsgJob").encryptAndSendUserMsg(a,g,e);d("WAWebSendTcTokenChatAction").sendTcToken(f);return i}else if(f.isGroup())return d("WAWebSendGroupMsgJob").encryptAndSendGroupMsg(a,g,e);return(h||(h=b("Promise"))).reject(c("err")("[messaging] unsupported remote jid type"))});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();if(!a.id)return(h||(h=b("Promise"))).reject(c("err")("[messaging] sending message without an id"));else if(!a.remote)return(h||(h=b("Promise"))).reject(c("err")("[messaging] sending message without an remote id"));if(a.remote.isGroup()){var e=d("WAWebMessageSendReporter").createMessageSendMetricReporter({messageIsInvisible:!0}),f=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:a.remote,mediaType:d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE,messageType:d("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP});f.setMessageIsInvisible(!0);return d("WAWebSendGroupKeyDistributionMsgJob").encryptAndSendGroupKeyDistributionMsg(a,e).then(function(){f.postWrittenWireStage(),e.post()})}return(h||(h=b("Promise"))).reject(c("err")("[messaging] unsupported remote jid type"))});return j.apply(this,arguments)}g.encryptAndSendMsg=a;g.encryptAndSendKeyDistributionMsg=e}),98);
__d("WAWebSendMsgMetricReporter",["WAWebMessageSendPerfReporter","WAWebMessageSendReporter","WAWebWamMsgUtils"],(function(a,b,c,d,e,f,g){a=function(a){var b={createSendReporter:function(b){return new(d("WAWebMessageSendReporter").MessageSendReporter)(a,b)},sendReporter:null,sendPerfReporter:null};Object.defineProperty(b,"sendReporter",{get:function(){return a.wamMessageSendReporter},set:function(b){a.wamMessageSendReporter=b},enumerable:!0});Object.defineProperty(b,"sendPerfReporter",{get:function(){var b;return(b=a.wamMessageSendPerfReporter)!=null?b:null},set:function(b){a.wamMessageSendPerfReporter=b},enumerable:!0});return b};b=function(a){var b=new(d("WAWebMessageSendReporter").MessageSendReporter)(a),c=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:a.to,mediaType:d("WAWebWamMsgUtils").getWamMediaType(a),messageType:d("WAWebWamMsgUtils").getWamMessageType(a)}),e={createSendReporter:function(b){return new(d("WAWebMessageSendReporter").MessageSendReporter)(a,b)},sendReporter:null,sendPerfReporter:null};Object.defineProperty(e,"sendReporter",{get:function(){return b},set:function(a){b=a},enumerable:!0});Object.defineProperty(e,"sendPerfReporter",{get:function(){return c},set:function(a){c=a},enumerable:!0});return e};g.createMsgModelMetricReporter=a;g.createAddonMetricReporter=b}),98);
__d("WAWebDBDeviceListFanout",["WALogger","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getFanOutList: no device is found, just send to the primary device"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.wids,c=a.chatWidSetToIncludeHostedInFanoutOneToOneChatOnly;a=(yield d("WAWebApiDeviceList").getDeviceIds(b));var e=new Map();a.forEach(function(a,f){if(a){var g=a.devices;g.forEach(function(b){var f=b.id===99||b.isHosted===!0,g=!1;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&c!=null&&(g=(c==null?void 0:c.isUser())===!0);if(f&&!g)return;f=d("WAWebWidFactory").createDeviceWidFromDeviceListPk(a.id,b.id,b.isHosted);d("WAWebUserPrefsMeUser").isMeDevice(f)||e.set(f.toString(),f)})}else{d("WALogger").LOG(h()).tags("messaging");g=d("WAWebWidFactory").toUserWid(b[f]);d("WAWebUserPrefsMeUser").isMeAccount(g)||e.set(g.toString(),g)}});return Array.from(e.values())});return i.apply(this,arguments)}g.getFanOutList=a}),98);
__d("WASmaxInPreKeysFetchMissingPreKeysResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetch","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrorsFetch").parseRequestErrorsFetch(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrorsFetch:b.value}))}g.parseFetchMissingPreKeysResponseRequestError=a}),98);
__d("WASmaxInPreKeysFetchMissingPreKeysResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseFetchMissingPreKeysResponseServerError=a}),98);
__d("WASmaxInPreKeysFetchMissingPreKeysUserErrorFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(b.value,"code",500,599);return!b.success?b:d("WAResultOrError").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchMissingPreKeysUserErrorFallbackMixin=a}),98);
__d("WASmaxInPreKeysFetchMissingPreKeysUserErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,b.value,"code",500);return!b.success?b:d("WAResultOrError").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchMissingPreKeysUserErrorMixin=a}),98);
__d("WASmaxInPreKeysFetchMissingPreKeysUserSuccessMixin",["WAResultOrError","WASmaxInPreKeysDeviceIdentityMixin","WASmaxInPreKeysEnums","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysPreKeyMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"id",0,99);if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_cloud_api","true");if(!e.success)return e;var f=d("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(a);if(!f.success)return f;var g=d("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(a),h=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(a);if(!h.success)return h;var i=d("WASmaxInPreKeysPreKeyMixin").parsePreKeyMixin(a),j=d("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(a);if(!j.success)return j;a=d("WASmaxInPreKeysDeviceIdentityMixin").parseDeviceIdentityMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({id:b.value,t:c.value,isCloudApi:e.value},f.value,{keyTypeMixin:g.success?g.value:null},h.value,{preKeyMixin:i.success?i.value:null},j.value,{deviceIdentityMixin:a.success?a.value:null}))}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"jid",d("WASmaxInPreKeysEnums").USERJID_USERJID);if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"device",1,100,h);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,device:a.value})}g.parseFetchMissingPreKeysUserSuccessDevice=h;g.parseFetchMissingPreKeysUserSuccessMixin=a}),98);
__d("WASmaxInPreKeysUserFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup",["WAResultOrError","WASmaxInPreKeysFetchMissingPreKeysUserErrorFallbackMixin","WASmaxInPreKeysFetchMissingPreKeysUserErrorMixin","WASmaxInPreKeysFetchMissingPreKeysUserSuccessMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysFetchMissingPreKeysUserSuccessMixin").parseFetchMissingPreKeysUserSuccessMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FetchMissingPreKeysUserSuccess",value:b.value});var c=d("WASmaxInPreKeysFetchMissingPreKeysUserErrorMixin").parseFetchMissingPreKeysUserErrorMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"FetchMissingPreKeysUserError",value:c.value});var e=d("WASmaxInPreKeysFetchMissingPreKeysUserErrorFallbackMixin").parseFetchMissingPreKeysUserErrorFallbackMixin(a);return e.success?d("WAResultOrError").makeResult({name:"FetchMissingPreKeysUserErrorFallback",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["UserSuccess","UserError","UserErrorFallback"],[b,c,e])}g.parseUserFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup=a}),98);
__d("WASmaxInPreKeysFetchMissingPreKeysResponseSuccess",["WAResultOrError","WASmaxInPreKeysEnums","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysUserFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"jid",d("WASmaxInPreKeysEnums").USERJID_USERJID);if(!b.success)return b;a=d("WASmaxInPreKeysUserFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup").parseUserFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,userFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!c.success)return c;a=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"user",0,1e5,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{listUser:b.value}))}g.parseFetchMissingPreKeysResponseSuccessListUser=h;g.parseFetchMissingPreKeysResponseSuccess=a}),98);
__d("WASmaxOutPreKeysFetchMissingPreKeysRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysRegistrationIDMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.deviceId;b=d("WASmaxOutPreKeysRegistrationIDMixin").mergeRegistrationIDMixin(d("WASmaxJsx").smax("device",{id:d("WAWap").INT(b)}),a);return b}function i(a){var b=a.deviceArgs,c=a.userJid;a=a.hasUserReasonIdentity;c=d("WASmaxJsx").smax("user",{jid:d("WAWap").JID(c),reason:d("WASmaxAttrs").OPTIONAL_LITERAL("identity",a)},d("WASmaxChildren").REPEATED_CHILD(h,b,0,100));return c}function a(a){a=a.userArgs;a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"get"},d("WASmaxJsx").smax("key_fetch",null,d("WASmaxChildren").REPEATED_CHILD(i,a,1,1e5))));return a}g.makeFetchMissingPreKeysRequestKeyFetchUserDevice=h;g.makeFetchMissingPreKeysRequestKeyFetchUser=i;g.makeFetchMissingPreKeysRequest=a}),98);
__d("WASmaxPreKeysFetchMissingPreKeysRPC",["WAComms","WASmaxInPreKeysFetchMissingPreKeysResponseRequestError","WASmaxInPreKeysFetchMissingPreKeysResponseServerError","WASmaxInPreKeysFetchMissingPreKeysResponseSuccess","WASmaxOutPreKeysFetchMissingPreKeysRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutPreKeysFetchMissingPreKeysRequest").makeFetchMissingPreKeysRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInPreKeysFetchMissingPreKeysResponseSuccess").parseFetchMissingPreKeysResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"FetchMissingPreKeysResponseSuccess",value:g.value});case 7:h=d("WASmaxInPreKeysFetchMissingPreKeysResponseRequestError").parseFetchMissingPreKeysResponseRequestError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"FetchMissingPreKeysResponseRequestError",value:h.value});case 10:i=d("WASmaxInPreKeysFetchMissingPreKeysResponseServerError").parseFetchMissingPreKeysResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"FetchMissingPreKeysResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("FetchMissingPreKeys",{Success:g,RequestError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendFetchMissingPreKeysRPC=a}),98);
__d("WAWebFetchResendMissingKeyJob",["Promise","WALogger","WAParsableXmlNode","WAPromiseQueue","WASmaxPreKeysFetchMissingPreKeysRPC","WAWap","WAWebApiDeviceList","WAWebBackendErrors","WAWebDeviceListPk","WAWebEventsWaitForOfflineDeliveryEnd","WAWebProcessKeyBundle","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: failed to build session with error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: successfully established "," E2E sessions out of "," requested"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: parsed "," keys"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys failed for user ",": ",":",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: find "," users"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys failed: ",":",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys failed: ",":",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: start processing keys for "," wids"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: start sending fetching iq for "," wids"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: start fetching key for "," wids"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys deduped ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys ",""]);t=function(){return a};return a}var u=new(d("WAPromiseQueue").PromiseQueueMap)();function a(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();a=Array.from(new Set(a.map(function(a){return d("WAWebWidFactory").toUserWid(a).toString()}))).map(function(a){return d("WAWebWidFactory").createUserWid(a)});var b=a.map(function(a){return a.toString()}).join();d("WALogger").LOG(t(),b);var c=u.waitIfPending(b);if(c){d("WALogger").LOG(s(),b);return c}return u.enqueueHandlers(b,w(a))});return v.apply(this,arguments)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(r(),a.length);var c=(yield y(a)),e=(yield A(c)),f=new Map();c.forEach(function(a,b){b=e[b];var c=d("WAWebWidFactory").toUserWid(a).toString(),g=f.get(c)||[];if(b!=null){g.push({id:(a=a.device)!=null?a:0,regId:b})}f.set(c,g)});var g=[];f.forEach(function(a,b){b=d("WAWebWidToJid").widToUserJid(d("WAWebWidFactory").createUserWid(b));b={userJid:b,hasUserReasonIdentity:!1,deviceArgs:a.map(function(a){return{deviceId:a.id,registrationElementValue:d("WAWap").BIG_ENDIAN_CONTENT(a.regId)}})};g.push(b)});d("WALogger").LOG(q(),a.length);c=(yield d("WASmaxPreKeysFetchMissingPreKeysRPC").sendFetchMissingPreKeysRPC({userArgs:g}));switch(c.name){case"FetchMissingPreKeysResponseSuccess":d("WALogger").LOG(p(),a.length);return B(c.value);case"FetchMissingPreKeysResponseServerError":a=c.value.errorServerErrors.value;d("WALogger").LOG(o(),a.code,a.text);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a.code),a.text));case"FetchMissingPreKeysResponseRequestError":a=c.value.errorRequestErrorsFetch.value;d("WALogger").LOG(n(),a.code,a.text);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a.code),a.text))}});return x.apply(this,arguments)}function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(m(),a.length);var b=(yield d("WAWebApiDeviceList").getDeviceIds(a)),c=new Map();b.forEach(function(b,e){if(b){var f=b.devices;f.forEach(function(a){if(a.id!==0){a=d("WAWebWidFactory").createDeviceWidFromDeviceListPk(b.id,a.id,a.isHosted);c.set(a.toString(),a)}})}f=d("WAWebWidFactory").toUserWid(a[e]);c.set(f.toString(),f)});return Array.from(c.values())});return z.apply(this,arguments)}function A(a){a=a.map(function(a){return d("WAWebUserPrefsMeUser").isMeDevice(a)?d("WAWebSignalProtocolStore").getSignalProtocolStore().getLocalRegistrationId():d("WAWebSignalProtocolStore").getSignalProtocolStore().loadSession(String(d("WAWebSignalCommonUtils").createSignalAddress(a))).then(function(a){var b=a==null?void 0:a.sessions;if(b)for(var c in b)if(b[c].indexInfo.closed===-1)return b[c].registrationId;return a==null?void 0:(c=a.remote)==null?void 0:c.regId})});return(h||(h=b("Promise"))).all(a)}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];a.listUser.forEach(function(a){var c=a.userFetchMissingPreKeysSuccessOrFetchMissingPreKeysErrorOrFetchMissingPreKeysErrorFallbackMixinGroup;switch(c.name){case"FetchMissingPreKeysUserSuccess":var e=c.value,f=e.jid;e=e.device;var g=d("WAWebWidFactory").createWid(f);e.forEach(function(a){var c,e=a.preKeyMixin;b.push({identity:a.elementValue,deviceIdentity:(c=(c=a.deviceIdentityMixin)==null?void 0:c.deviceIdentityElementValue)!=null?c:null,skey:{id:d("WAParsableXmlNode").convertBytesToUint(a.skeyIdKeyIDMixin.elementValue,3),pubkey:a.skeyValueKeyDataMixin.elementValue,signature:a.skeySignatureElementValue},key:e&&{id:d("WAParsableXmlNode").convertBytesToUint(e.keyIdKeyIDMixin.elementValue,3),pubkey:e.keyValueKeyDataMixin.elementValue},regId:d("WAParsableXmlNode").convertBytesToUint(a.registrationElementValue,4),wid:d("WAWebWidFactory").createDeviceWidFromDeviceListPk(d("WAWebDeviceListPk").createDeviceListPK(g),a.id,!1)})});return;case"FetchMissingPreKeysUserErrorFallback":case"FetchMissingPreKeysUserError":f=c.value;d("WALogger").WARN(l(),a.jid,f.errorCode,f.errorText).sendLogs("fetchResendMissingKeys-user-error");return}});d("WALogger").LOG(k(),b.length);if(b.length>0)try{a=(yield d("WAWebProcessKeyBundle").processKeyBundles(b));a=a.processedPrekeyCount;d("WALogger").LOG(j(),a,b.length)}catch(a){d("WALogger").WARN(i(),a).sendLogs("fetchResendMissingKeys-session-error")}});return C.apply(this,arguments)}g.fetchResendMissingKeys=a}),98);
__d("WAWebMdDeviceSyncAckWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumMessageChatType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdDeviceSyncAck:[2180,{chatType:[1,d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE],isLid:[3,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],localAddressingMode:[5,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],revoke:[2,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],serverAddressingMode:[6,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],typeOfGroup:[4,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{MdDeviceSyncAck:[]});g.MdDeviceSyncAckWamEvent=a}),98);
__d("WAWebPostMdDeviceSyncAckMetric",["WAWebABProps","WAWebGetMessageChatTypeFromWid","WAWebMdDeviceSyncAckWamEvent","WAWebSendMsgCommonApi","WAWebWamAddressingModeUtils"],(function(a,b,c,d,e,f,g){function a(a,b,c,e){b=new(d("WAWebMdDeviceSyncAckWamEvent").MdDeviceSyncAckWamEvent)({revoke:d("WAWebSendMsgCommonApi").isRevokeMsg(b)});b.chatType=d("WAWebGetMessageChatTypeFromWid").getMessageChatTypeFromWid(a);b.isLid=a.isLid();a.isGroup()&&(c==null?void 0:c.isLid)!=null&&(b.isLid=c.isLid);d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes")&&(c!=null&&Object.assign(b,d("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(c)),e!=null&&(b.serverAddressingMode=d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(e)));a.isUser()&&(b.isLid=a.isLid());b.commit()}g.postMdDeviceSyncAckMetric=a}),98);
__d("WAWebWamEnumMessageSendResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:1,ERROR_UNKNOWN:3,ERROR_NETWORK:4,ERROR_EXPIRED:5,ERROR_CANCELLED:6,ERROR_UPLOAD:7,ERROR_BACKFILL_USYNC_FAILED:8,ERROR_PAYLOAD_TOO_BIG:9,ERROR_LOCATION:10,ERROR_INVALID_MESSAGE:11,ERROR_E2EE:12,ERROR_INVALID_PROTOBUF:13,SERVER_ERROR:14,EPHEMERALLY_EXPIRED:15});f.MESSAGE_SEND_RESULT_TYPE=a}),66);
__d("WAWebSendUserMsgJob",["Promise","WADeprecatedSendIq","WALogger","WATimeUtils","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebBotGating","WAWebCommsAckParser","WAWebDBDeviceListFanout","WAWebDBUpdateMessageTable","WAWebFetchResendMissingKeyJob","WAWebMsgGetters","WAWebMsgUtilsBridge","WAWebPostMdDeviceSyncAckMetric","WAWebSendMsgCommonApi","WAWebSendMsgCreateFanoutStanza","WAWebSyncDeviceAdvDeviceListJob","WAWebUserPrefsMeUser","WAWebWamEnumMessageSendResultType","asyncToGeneratorRuntime","cr:4330","err","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: ",": got phash during the resend"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: ",": skip resending because this message has been overwritten by a revoke"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: ",": resending to devices: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: ",": skip resending to the empty list"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: ",": skip resending due to "," min timeout"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: "," to ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: failed to resend message: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: failed to resend message: ",", type: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: failed"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendUserMsg: phash mismatch, got server phash ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendUserMsg: sending ",""]);s=function(){return a};return a}function a(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=a.data,g=f.id,i=f.to,j=f.invokedBotWid,k=f.protocolMessageKey,l=f.subtype;f=f.botRespOrInvocationRevokeBotWid;d("WALogger").LOG(s(),g).tags("messaging");var m=i.isLid()?(g=d("WAWebUserPrefsMeUser").getMaybeMeLid())!=null?g:d("WAWebUserPrefsMeUser").assertGetMe():d("WAWebUserPrefsMeUser").assertGetMe();g={wids:[i,m]};d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(i==null?void 0:i.isUser())&&(g.chatWidSetToIncludeHostedInFanoutOneToOneChatOnly=i);var n=(yield d("WAWebDBDeviceListFanout").getFanOutList(g));if(d("WAWebBotGating").isBotEnabled())if(d("WAWebMsgGetters").getIsBotFeedbackMessage(a.data)&&k!=null){!i.isBot()&&k.participant!=null?g=k.participant:a.data.bizBotType!=null?g=i:g=k.remote;n=[g]}else if(j&&(j==null?void 0:j.isBot())){k=j;n=[].concat(n,[k])}else f&&(f==null?void 0:f.isBot())&&((l==="sender_revoke"||l==="admin_revoke")&&(n=[].concat(n,[f])));d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&d("WAWebBizCoexUtils").fanoutListContainsHostedDevice(n)&&void d("WAWebDBUpdateMessageTable").updateMessageTable(a.data.id,{senderOrRecipientAccountTypeHosted:!0});g=(yield w(a,c,n,{fanoutType:d("WAWebSendMsgCreateFanoutStanza").FANOUT_TYPE.CHAT},e));var t=g.phash;if(t!=null){d("WALogger").LOG(r(),t).tags("messaging");var v=d("WATimeUtils").unixTime();d("WAWebPostMdDeviceSyncAckMetric").postMdDeviceSyncAckMetric(i,c);e.sendReporter=e.createSendReporter({isResend:!0,originalMessage:a.type==="message"?a.data:void 0});void (h||(h=b("Promise"))).resolve().then(function(){if(!i.isLid())return d("WAWebFetchResendMissingKeyJob").fetchResendMissingKeys([i,m])["catch"](function(){d("WALogger").WARN(q()).sendLogs("fetchResendMissingKeys-sync-error")})}).then(function(){return d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([i,m],"message",t)}).then(function(){return u(a,c,n,v,e)})["catch"](function(b){d("WALogger").WARN(p(),a.data.id.toString(),a.data.type).tags("messaging"),d("WALogger").ERROR(o(),b).tags("messaging").sendLogs("message-resend-failed",.01)})}return g});return t.apply(this,arguments)}function u(a,b,c,d,e){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=a.data.to,o=a.data.id.id;d("WALogger").LOG(n(),o,h.toString()).tags("messaging");var p=d("WAWebSendMsgCommonApi").getResendTimeoutInSeconds();if(d("WATimeUtils").unixTime()-f>p){d("WALogger").LOG(m(),o,p/60).tags("messaging");(f=g.sendReporter)==null?void 0:f.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_EXPIRED,isTerminal:!1});g.sendReporter=null;return}try{f=h.isLid()?(p=d("WAWebUserPrefsMeUser").getMaybeMeLid())!=null?p:d("WAWebUserPrefsMeUser").assertGetMe():d("WAWebUserPrefsMeUser").assertGetMe();p=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:[h,f]}));p=c("lodash").differenceBy(p,e,String);if(p.length===0){d("WALogger").LOG(l(),o).tags("messaging");(e=g.sendReporter)==null?void 0:e.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_BACKFILL_USYNC_FAILED,isTerminal:!1});g.sendReporter=null;return}d("WALogger").LOG(k(),o,p.join(",")).tags("messaging");if(a.data.isOverwrittenByRevoke===!0){d("WALogger").LOG(j(),o).tags("messaging");return}e=(yield w(a,b,p,{fanoutType:d("WAWebSendMsgCreateFanoutStanza").FANOUT_TYPE.CHAT,isResendingMsg:!0},g));b=e.phash;b!=null&&(d("WALogger").LOG(i(),o).tags("messaging"),void d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([h,f],"message",b))}catch(a){(p=g.sendReporter)==null?void 0:p.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!1});g.sendReporter=null;throw a}yield d("WAWebMsgUtilsBridge").logMessageSendForChatThreadLogging(a.data)});return v.apply(this,arguments)}function w(a,b,c,d,e){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h;(h=g.sendPerfReporter)==null?void 0:h.startReadyToSendStage();h=a.data;var i=h.id;h=h.to;a=(yield d("WAWebSendMsgCreateFanoutStanza").createFanoutMsgStanza(a,b,e,f,g));(b=g.sendPerfReporter)==null?void 0:b.postReadyToSendStage();(e=g.sendPerfReporter)==null?void 0:e.startWrittenWireStage();f=(yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(a,d("WAWebCommsAckParser").toCoreAckTemplate({id:i.id,"class":"message",from:h,participant:null})));b=d("WAWebSendMsgCommonApi").sendMsgAckSyncParser.parse(f);if(b.error)throw c("err")("[messaging] sendMsgToDeviceList: Invalid ack from server");(e=g.sendPerfReporter)==null?void 0:e.postWrittenWireStage();g.sendPerfReporter=null;(a=g.sendReporter)==null?void 0:a.postSuccess();g.sendReporter=null;return b.success});return x.apply(this,arguments)}g.encryptAndSendUserMsg=a}),98);
__d("WAWebAdvMetadataCreationFailureWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({AdvMetadataCreationFailure:[3048,{advMetadataIsMe:[1,d("WAWebWamCodegenUtils").TYPES.BOOLEAN]},[1,1,1],"regular"]},{AdvMetadataCreationFailure:[]});g.AdvMetadataCreationFailureWamEvent=a}),98);
__d("WAWebIdentityApiUtils",["WABinary","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(a,b){for(var c=0;c<a.length&&c<b.length;++c)if(a[c]!==b[c])return a[c]-b[c];return a.length-b.length}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));return b.map(function(b,d){if(b==null)throw c("err")("getAllIdentityKeys: missing identity key for device "+String(a[d]));return b})});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(a.map(function(a){return d("WAWebSignalCommonUtils").createSignalAddress(a).toString()})));return a.map(function(a){return a==null?null:new Uint8Array(d("WAWebSignalCommonUtils").strToBuffer(a))})});return k.apply(this,arguments)}function e(a){var b=new(d("WABinary").Binary)();a.sort(h).forEach(function(a){b.writeByteArray(a)});return b.readByteArray()}g.getAllIdentityKeysBytesOrThrow=a;g.getAllIdentityKeysBytes=j;g.identityKeysToBinary=e}),98);
__d("WAWebIdentityIcdcApi",["WACryptoSha256","WAJids","WANullthrows","WASignalOther","WATimeUtils","WAWebABProps","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebCryptoCurve25519","WAWebIdentityApiUtils","WAWebProtobufsAdv.pb","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=8,i=30*24*60*60;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebApiDeviceList").getDeviceRecord(a));return!b||b.deleted?null:k(a,b)});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!b||b.deleted)return null;var e={keyHash:void 0,timestamp:void 0},f=b.timestamp,g=b.devices,h=b.id;b=b.advAccountType;var i=g.some(function(a){return a.id!==d("WAJids").DEFAULT_DEVICE_ID});if(i){var j=g.map(function(a){return[a.keyIndex,d("WAWebWidFactory").createDeviceWidFromDeviceListPk(h,a.id,a.isHosted)]}),k=[],l=null;j.forEach(function(a){var b=a[0];a=a[1];!d("WAWebUserPrefsMeUser").isMeDevice(a)?k.push([b,a]):l=b});j=(yield d("WAWebIdentityApiUtils").getAllIdentityKeysBytes(k.map(function(a){a=a[1];return a})));var n=[],q=[];j.forEach(function(a,b){a!=null&&(n.push(a),q.push(k[b][0]))});if(d("WAWebUserPrefsMeUser").isMeAccount(a)){j=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().getIdentityKeyPair());if(!j)return null;n.push(new Uint8Array(j.pubKey));q.push(c("WANullthrows")(l))}a=o();e.keyHash=(yield m(n.map(function(a){return new Uint8Array(d("WAWebCryptoCurve25519").toCurveKeyPubKey(a.buffer))}),a));q.length!==g.length&&(e.keyIndexes=q)}(i||p(f))&&(e.timestamp=f);d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&((yield d("WAWebUserPrefsMultiDevice").getIsHostedMeAccount())===!0&&(e.senderAccountType=d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED),b===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(e.receiverAccountType=d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED));return e});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAWebIdentityApiUtils").identityKeysToBinary(a);a=(yield d("WACryptoSha256").sha256(a));a=new Uint8Array(a);return d("WASignalOther").sliceBytes(a,0,b)});return n.apply(this,arguments)}function o(){var a=d("WAWebABProps").getABPropConfigValue("md_icdc_hash_length");return Math.max(a,h)}function p(a){return d("WATimeUtils").unixTime()-a<i}g.getICDCMeta=a;g.getICDCMetaFromDeviceRecord=k;g.computeIdentityHash=m}),98);
__d("WAWebGetGroupKeyDistributionMsg",["Promise","WALogger","WAWebAdvMetadataCreationFailureWamEvent","WAWebApiDeviceList","WAWebDeviceSentMessageProtoUtils","WAWebE2EProtoGenerator","WAWebEncryptMsgProtobuf","WAWebIdentityIcdcApi","WAWebSendMsgCommonApi","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendUserMsg: encryption fail for ",", ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getKeyDistributionMsg: precalculate ICDC for ",""]);j=function(){return a};return a}function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var m={senderKeyDistributionMessage:{groupId:e.toString({legacy:!0}),axolotlSenderKeyDistributionMessage:g}};d("WALogger").LOG(j(),a==null?void 0:a.id.toString()).tags("messaging");var n=(yield l(m,f,k,e));g=f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var e;e=(e=n.get(d("WAWebWidFactory").toUserWid(a).toString()))!=null?e:babelHelpers["extends"]({},m);e=(yield d("WAWebEncryptMsgProtobuf").encryptMsgProtobuf(a,0,e));return{type:e.type,ciphertext:e.ciphertext,participant:a}}catch(e){d("WALogger").LOG(i(),a.toString(),e).tags("messaging");if(d("WAWebSendMsgCommonApi").isPrimaryDevice(a))return(h||(h=b("Promise"))).reject(c("err")("[messaging] encryptAndSendUserMsg: encryption fail for primary device "+String(a)))}});return function(b){return a.apply(this,arguments)}}());a=(yield (h||(h=b("Promise"))).all(g));return a.filter(Boolean)});return k.apply(this,arguments)}function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=d("WAWebUserPrefsMeUser").getMeUser(),i=[].concat(Array.from(new Set(c.map(d("WAWebWidFactory").toUserWid))));c=(yield d("WAWebApiDeviceList").bulkGetDeviceRecord([g].concat(i)));var j=c[0];c=c.slice(1);var k=null;try{k=(yield d("WAWebIdentityIcdcApi").getICDCMetaFromDeviceRecord(g,j))}catch(a){new(d("WAWebAdvMetadataCreationFailureWamEvent").AdvMetadataCreationFailureWamEvent)({advMetadataIsMe:!0}).commit();throw a}var l=new Map();yield (h||(h=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){c=i[c];var h=babelHelpers["extends"]({},a),j=null;if(c.equals(g))e&&(h=d("WAWebDeviceSentMessageProtoUtils").wrapDeviceSentMessage(h,f));else try{j=(yield d("WAWebIdentityIcdcApi").getICDCMetaFromDeviceRecord(c,b))}catch(a){new(d("WAWebAdvMetadataCreationFailureWamEvent").AdvMetadataCreationFailureWamEvent)({advMetadataIsMe:!1}).commit();throw a}d("WAWebE2EProtoGenerator").populateMessageContextInfo(h,k,j);l.set(c.toString(),h)});return function(a,b){return c.apply(this,arguments)}}()));return l});return m.apply(this,arguments)}g.getKeyDistributionMsg=a;g.generateMsgProtobufs=l}),98);
__d("WAWebMdGroupParticipantMissAckWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumClientGroupSizeBucket","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdGroupParticipantMissAck:[4146,{groupSizeBucket:[1,d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],isLid:[2,a.TYPES.BOOLEAN],messageIsRevoke:[3,a.TYPES.BOOLEAN],participantAddCount:[4,a.TYPES.INTEGER],participantRemoveCount:[5,a.TYPES.INTEGER],typeOfGroup:[6,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{MdGroupParticipantMissAck:[]});g.MdGroupParticipantMissAckWamEvent=b}),98);
__d("WAWebWamNumberToClientGroupSizeBucket",["WAWebWamEnumClientGroupSizeBucket"],(function(a,b,c,d,e,f,g){function a(a){if(a<=32+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.SMALL;if(a<=64+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.MEDIUM;if(a<=128+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LARGE;if(a<=256+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.EXTRA_LARGE;if(a<=512+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.XX_LARGE;if(a<=1024+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT1024;if(a<=1500+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT1500;if(a<=2e3+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT2000;if(a<=2500+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT2500;if(a<=3e3+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT3000;if(a<=3500+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT3500;if(a<=4e3+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT4000;if(a<=4500+1)return d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT4500;return a<=5e3+1?d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LT5000:d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET.LARGEST_BUCKET}g["default"]=a}),98);
__d("WAWebMaybePostMdGroupSyncMetrics",["WALogger","WAWebMdGroupParticipantMissAckWamEvent","WAWebSendMsgCommonApi","WAWebWamEnumTypeOfGroupEnum","WAWebWamNumberToClientGroupSizeBucket"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["postGroupParticipantSyncMetric: skip due to no participant change"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybePostGroupSyncMetrics: event commit failed with ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["postGroupParticipantSyncMetric: added: ",", removed: ",""]);j=function(){return a};return a}function a(a,b,e,f){b=k(a,b);var g=b.added;b=b.removed;if(g!==0||b!==0){d("WALogger").LOG(j(),g,b);var l=new(d("WAWebMdGroupParticipantMissAckWamEvent").MdGroupParticipantMissAckWamEvent)();l.messageIsRevoke=d("WAWebSendMsgCommonApi").isRevokeMsg(e);l.groupSizeBucket=c("WAWebWamNumberToClientGroupSizeBucket")((f==null?void 0:f.participantCount)||0);l.typeOfGroup=(f==null?void 0:f.wamTypeOfGroup)||d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM.GROUP;l.isLid=l.isLid=a.some(function(a){return a.isLid()});l.participantAddCount=g;l.participantRemoveCount=b;l.commitAndWaitForFlush()["catch"](function(a){d("WALogger").WARN(i(),a)})}d("WALogger").LOG(h())}function k(a,b){var c=new Set(a.map(String)),d=new Set(b.map(String));return{added:b.filter(function(a){return!c.has(String(a))}).length,removed:a.filter(function(a){return!d.has(String(a))}).length}}g.maybePostGroupSyncMetrics=a;g.computeParticipantChange=k}),98);
__d("WAWebWamEnumMessageDistributionEnumType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR_MESSAGE:0,DIRECT_MESSAGE:1,SENDER_KEY_DISTRIBUTION_MESSAGE:2});f.MESSAGE_DISTRIBUTION_ENUM_TYPE=a}),66);
__d("WAWebSendGroupDirectJob",["Promise","WADeprecatedSendIq","WALogger","WATimeUtils","WAWebABProps","WAWebCommsAckParser","WAWebDBDeviceListFanout","WAWebFetchResendMissingKeyJob","WAWebGroupMsgSendUtils","WAWebGroupQueryBridge","WAWebHandleMsgCommon","WAWebMaybePostMdGroupSyncMetrics","WAWebMsgUtilsBridge","WAWebPostMdDeviceSyncAckMetric","WAWebSendMsgCommonApi","WAWebSendMsgCreateFanoutStanza","WAWebSignalProtocolStore","WAWebSyncDeviceAdvDeviceListJob","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumMessageSendResultType","WAWebWidFactory","asyncToGeneratorRuntime","cr:4330","err","gkx","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["postGroupParticipantSyncMetric: failed to find participant record for group ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["postGroupParticipantSyncMetric: start"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: failed to resend message: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: failed to resend "," message: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: ",": done"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: ",": skip resending because this message has been overwritten by a revoke"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: ",": resending to devices: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: ",": skip resending to the empty list"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsg: ",": skip group resending due to "," min timeout"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: ",": sendQueryGroup failed for message resend: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["postGroupParticipantSyncMetric: ",": failed for postGroupParticipantSyncMetric ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchResendMissingKeys: failed"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsg: "," to ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupDirectMsg: phash mismatch, got server phash ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupDirectMsg: sending "," with group ",""]);w=function(){return a};return a}function a(a,b,c,d,e){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=a.data.to;d("WALogger").LOG(w(),a.data.id,g.toLogString()).tags("messaging");g=(yield B(a,b,c,{fanoutType:d("WAWebSendMsgCreateFanoutStanza").FANOUT_TYPE.GROUP_DIRECT},e,f));var h=g.phash,i=g.addressingMode;h&&(d("WALogger").LOG(v(),h).tags("messaging"),y({isDirect:!0,msgRecord:a,msgProtobuf:b,oldList:c,ackTime:d("WATimeUtils").unixTime(),groupData:e,phash:h,metricReporter:f,serverAddressingMode:i}));return g});return x.apply(this,arguments)}function y(a){(h||(h=b("Promise"))).resolve().then(function(){return z(a)})}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.isDirect,e=a.msgRecord,f=a.msgProtobuf,g=a.oldList,h=a.ackTime,i=a.groupData,j=a.phash,v=a.metricReporter;a=a.serverAddressingMode;var w=e.data.id.id,x=e.data.to;d("WALogger").LOG(u(),w,x.toString()).tags("messaging");d("WAWebPostMdDeviceSyncAckMetric").postMdDeviceSyncAckMetric(x,f,i,a);v.sendReporter=v.createSendReporter({isResend:!0,originalMessage:e.type==="message"?e.data:void 0,groupData:i});a=Array.from(new Set(g.map(function(a){return d("WAWebWidFactory").toUserWid(a).toString()}))).map(function(a){return d("WAWebWidFactory").createUserWid(a)});if(!d("WAWebGroupMsgSendUtils").isCagAddon(e.data,i))try{yield d("WAWebFetchResendMissingKeyJob").fetchResendMissingKeys(g)}catch(a){d("WALogger").WARN(t()).sendLogs("fetchResendMissingKeys-sync-error")}if(b)yield d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob(g,"message",j);else try{yield d("WAWebGroupQueryBridge").sendQueryGroup(x),E(i,x,f,a.map(d("WAWebWidFactory").createWidFromWidLike))["catch"](function(a){d("WALogger").WARN(s(),w,a).tags("messaging")})}catch(a){d("WALogger").WARN(r(),w,a).tags("messaging");D(v);throw a}b=d("WAWebSendMsgCommonApi").getResendTimeoutInSeconds();if(d("WATimeUtils").unixTime()-h>b){d("WALogger").LOG(q(),w,b/60).tags("messaging");(j=v.sendReporter)==null?void 0:j.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_EXPIRED,isTerminal:!1});v.sendReporter=null;return}try{x=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:a}));h=c("lodash").differenceBy(x,g,String);if(h.length===0){d("WALogger").LOG(p(),w).tags("messaging");return}d("WALogger").LOG(o(),w,h.join(",")).tags("messaging");if(e.data.isOverwrittenByRevoke===!0){d("WALogger").LOG(n(),w).tags("messaging");return}yield B(e,f,h,{fanoutType:d("WAWebSendMsgCreateFanoutStanza").FANOUT_TYPE.GROUP_DIRECT,isResendingMsg:!0},i,v);d("WALogger").LOG(m(),w).tags("messaging")}catch(a){d("WALogger").LOG(l(),w,a).tags("messaging");c("gkx")("26258")||d("WALogger").ERROR(k(),a).tags("messaging").sendLogs("message-resend-failed");(b=v.sendReporter)==null?void 0:b.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!1});v.sendReporter=null;throw a}yield d("WAWebMsgUtilsBridge").logMessageSendForChatThreadLogging(e.data)});return A.apply(this,arguments)}function B(a,b,c,d,e,f){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,j){var k=a.data,l=k.id;k=k.to;var m;i!=null&&d("WAWebABProps").getABPropConfigValue("lid_groups_outgoing_explicit_address_mode")&&(m=Boolean(i==null?void 0:i.isLidAddressingMode)===!0?d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid:d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn);i=(yield d("WAWebSendMsgCreateFanoutStanza").createFanoutMsgStanza(a,e,f,g,j,m));yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();(a=j.sendPerfReporter)==null?void 0:a.postReadyToSendStage();(e=j.sendPerfReporter)==null?void 0:e.startWrittenWireStage();f=(yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(i,d("WAWebCommsAckParser").toCoreAckTemplate({id:l.id,"class":"message",from:k,participant:null})));g=d("WAWebSendMsgCommonApi").sendMsgAckSyncParser.parse(f);if(g.error)return(h||(h=b("Promise"))).reject(c("err")("[messaging] encryptAndSendGroupDirectMsg: Invalid ack from server"));(a=j.sendReporter)==null?void 0:a.setMessageDistributionType(d("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE.DIRECT_MESSAGE);(e=j.sendPerfReporter)==null?void 0:e.postWrittenWireStage();j.sendPerfReporter=null;(i=j.sendReporter)==null?void 0:i.postSuccess();j.sendReporter=null;return g.success});return C.apply(this,arguments)}function D(a){var b;(b=a.sendReporter)==null?void 0:b.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_BACKFILL_USYNC_FAILED,isTerminal:!1});a.sendReporter=null}function E(a,b,c,d){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){d("WALogger").LOG(j());var f=(yield d("WAWebGroupMsgSendUtils").getParticipantRecord(String(b)));if(!f){d("WALogger").LOG(i(),String(b));return}b=f.participants.map(d("WAWebWidFactory").createWid);d("WAWebMaybePostMdGroupSyncMetrics").maybePostGroupSyncMetrics(e,b,c,a)});return F.apply(this,arguments)}g.encryptAndSendGroupDirectMsg=a;g.resendGroupMsg=y;g._resendGroupMsgImpl=z}),98);
__d("WAWebSendMsgQueueMap",["WAPromiseQueue"],(function(a,b,c,d,e,f,g){a=new(d("WAPromiseQueue").PromiseQueueMap)();g.sendMsgQueueMap=a}),98);
__d("WAWebSendGroupKeyDistributionMsgJob",["Promise","WADeprecatedSendIq","WALogger","WAWap","WAWebAdvSignatureApi","WAWebApiMessageInfoStore","WAWebApiParticipantStore","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebCommsAckParser","WAWebCommsWapMd","WAWebGetGroupKeyDistributionMsg","WAWebGroupMsgSendUtils","WAWebManageE2ESessionsJob","WAWebPhashUtils","WAWebSchemaParticipant","WAWebSendMsgCommonApi","WAWebSendMsgQueueMap","WAWebSignal","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","cr:4330","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendSenderKeyMsg: Invalid ack from server"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupKeyDistributionMsg: skip sending ",": sender key distribution list is empty"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupKeyDistributionMsg: sending ",""]);k=function(){return a};return a}function a(a,b){d("WALogger").LOG(k(),a).tags("messaging");var c=a.remote;return d("WAWebSendMsgQueueMap").sendMsgQueueMap.enqueue(c.toString(),function(){return l(a,b)})}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=a.id,g=a.remote,k=(yield d("WAWebSchemaParticipant").getParticipantTable().get(g.toString())),l=(yield d("WAWebGroupMsgSendUtils").getGroupData(g.toString(),k,!1));e.setGroupData(l);e=(yield d("WAWebApiParticipantStore").getGroupSenderKeyListFromParticipantRecord(g,k));l=e.skDistribList;k=e.skList;e=e.rotateKey;k=k.concat(l);if(l.length===0){d("WALogger").LOG(j(),a).tags("messaging");return}yield d("WAWebApiMessageInfoStore").createOrMergeReceiptRecords(k.map(function(b){return{msgKey:a,receiverId:b}}));yield d("WAWebManageE2ESessionsJob").ensureE2ESessions(l);k=(yield d("WAWebPhashUtils").phashV2([].concat(k,[d("WAWebUserPrefsMeUser").assertGetMe()])));e=(yield n(g,l,e));var m=e[0];e=e[1];k=d("WAWap").wap("message",{id:d("WAWap").CUSTOM_STRING(f),to:d("WAWebCommsWapMd").CHAT_JID(g),phash:d("WAWap").CUSTOM_STRING(k),type:"text",device_fanout:d("WAWap").CUSTOM_STRING("false")},d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobs.flow").CiphertextType.Skmsg),"decrypt-fail":d("WAWap").CUSTOM_STRING("hide")}),m,e);yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();m=(yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(k,d("WAWebCommsAckParser").toCoreAckTemplate({id:f,"class":"message",from:g,participant:null})));e=d("WAWebSendMsgCommonApi").sendMsgAckSyncParser.parse(m);if(e.error){d("WALogger").WARN(i()).tags("messaging");return(h||(h=b("Promise"))).reject(c("err")("[messaging] encryptAndSendSenderKeyMsg: Invalid ack from server"))}yield d("WAWebApiParticipantStore").markHasSenderKey(g,l);return e.success});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(c){c=d("WAWebUserPrefsMeUser").assertGetMe();yield d("WAWebSignal").Session.deleteGroupSenderKeyInfo(a,c)}c=(yield d("WAWebSignal").Session.getGroupSenderKeyInfo(a,d("WAWebUserPrefsMeUser").assertGetMe()));a=(yield d("WAWebGetGroupKeyDistributionMsg").getKeyDistributionMsg(null,a,b,c,!0));b=null;c=!1;a&&a.length>0&&(b=d("WAWap").wap("participants",null,a.map(function(a){var b=a.type,e=a.ciphertext;a=a.participant;b===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg&&(c=!0);return d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)},d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),"decrypt-fail":d("WAWap").CUSTOM_STRING("hide"),type:d("WAWap").CUSTOM_STRING(b)},e))})));a=null;if(c){var e=(yield d("WAWebAdvSignatureApi").getADVEncodedIdentity());a=d("WAWap").wap("device-identity",null,e)}return[b,a]});return o.apply(this,arguments)}g.encryptAndSendGroupKeyDistributionMsg=a}),98);
__d("WAWebSendGroupMsgJob",["WALogger","WAWebABProps","WAWebApiContact","WAWebApiParticipantStore","WAWebDBDeviceListFanout","WAWebGroupMsgSendUtils","WAWebLidMigrationUtils","WAWebMaybe","WAWebMsgGetters","WAWebMsgKey","WAWebMsgRcatUtils","WAWebProtobufsE2E.pb","WAWebSchemaMessageInfo","WAWebSendGroupDirectJob","WAWebSendGroupSkmsgJob","WAWebSendMsgQueueMap","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["incorrect addresses found in "," group groupSendingList.senderKeyList.skList"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["incorrect addresses found in "," group groupSendingList.senderKeyList.skDistribList"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["incorrect addresses found in "," group groupSendingList.deviceList"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupMsg: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupMsg: Incognito CAG "," "]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupMsg: sending ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendGroupMsg: queued ",""]);n=function(){return a};return a}var o=Object.freeze({SKMSG:"skmsg",DIRECT:"direct"});function p(a){return a.isLid()}function q(a){return!a.isLid()}function r(a,b,c,d,e,f,g){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h){a=(yield d("WAWebApiParticipantStore").getGroupSenderKeyListFromParticipantRecord(a,h));h=a.skDistribList;a=a.skList;var i=t(f,g);i=i?p:q;a={type:o.SKMSG,senderKeyList:{skList:a.filter(i),skDistribList:h.filter(i),rotateKey:!1}};if(f.subtype==="sender_revoke"){h=!g&&d("WAWebABProps").getABPropConfigValue("send_cag_member_revokes_as_GDM");i=b==null?null:yield w(b,a.senderKeyList,{forceDirectMessage:h,normalizeAddressingModeFn:function(a){return a}});return(b=i)!=null?b:a}if(f.type==="keep_in_chat"){h=!g&&d("WAWebABProps").getABPropConfigValue("supports_keep_in_chat_in_cag");i=c==null?null:yield y(c,a.senderKeyList,h);return(b=i)!=null?b:a}return e?A(e,a.senderKeyList,{normalizeAddressingModeFn:function(a){return a}}):a});return s.apply(this,arguments)}function t(a,b){var e=a.type,f=a.subtype;a=a.keepType;if(f==="sender_revoke")return!1;if(a===d("WAWebProtobufsE2E.pb").KeepType.UNDO_KEEP_FOR_ALL)return!1;switch(e){case"reaction_enc":return!0;case"comment":return!0;case"poll_update":if(f==="poll_vote")return!0;break;case"notification":case"notification_template":case"gp2":case"broadcast_notification":case"e2e_notification":case"call_log":case"protocol":case"chat":case"location":case"payment":case"vcard":case"ciphertext":case"debug_placeholder":case"multi_vcard":case"revoked":case"oversized":case"groups_v4_invite":case"hsm":case"template_button_reply":case"debug":case"image":case"video":case"ptv":case"audio":case"ptt":case"sticker":case"status_v3":case"document":case"product":case"order":case"list":case"interactive":case"interactive_response":case"list_response":case"buttons_response":case"reaction":case"poll_creation":case"request_phone_number":case"native_flow":case"biz-cover-photo":case"keep_in_chat":case"pin_message":case"pinned_message":case"unknown":case"newsletter_notification":case"history_bundle":case"newsletter_admin_invite":case"event_creation":case"event_response":case"biz_content_placeholder":case"event_edit_encrypted":break;default:e;throw c("err")("CAG - Invalid type: "+e)}if(b)return!1;throw c("err")("CAG - non-admin trying to send a regular message")}function u(a,b,c,d,e){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){a=(yield d("WAWebApiParticipantStore").getGroupSenderKeyListFromParticipantRecord(a,b));b={senderKeyList:a,type:o.SKMSG};if(c){c=(yield w(c,a,{forceDirectMessage:!1,normalizeAddressingModeFn:function(a){return d("WAWebLidMigrationUtils").normalizeWidsToAddressingMode(f,a)}}));return(c=c)!=null?c:b}return e?A(e,a,{normalizeAddressingModeFn:function(a){return d("WAWebLidMigrationUtils").normalizeWidsToAddressingMode(f,a)}}):b});return v.apply(this,arguments)}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("WAWebSchemaMessageInfo").getMessageInfoTable().equals(["msgKey"],String(a)));a=a.map(function(a){return d("WAWebWidFactory").createWid(a.receiverUserJid)});if(a.length===0)return null;var e=b.skDistribList;b=b.skList;var f=new Set([].concat(e,b).map(d("WAWebWidFactory").toUserWid).map(String));a=a.filter(function(a){var b=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));return!f.has(String(a))&&!(b!=null&&f.has(String(b)))});a=c.normalizeAddressingModeFn(a).filter(Boolean);if(c.forceDirectMessage===!1&&a.length===0)return null;c=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:a}));return{type:o.DIRECT,deviceList:[].concat(c,b,e)}});return x.apply(this,arguments)}function y(a,b,c){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("WAWebSchemaMessageInfo").getMessageInfoTable().equals(["msgKey"],String(a)));if(a.length===0)return null;var e=b.skDistribList;b=b.skList;var f=new Set(e.concat(b).map(function(a){return String(d("WAWebWidFactory").toUserWid(a))}));a=a.filter(function(a){return!f.has(a.receiverUserJid)}).map(function(a){return d("WAWebWidFactory").createWid(a.receiverUserJid)});if(a.length===0&&!(c===!0))return null;c=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:a}));a=[].concat(c,b,e);return{type:o.DIRECT,deviceList:a}});return z.apply(this,arguments)}function A(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("WAWebSchemaMessageInfo").getMessageInfoTable().equals(["msgKey"],String(a)));var e=b.skDistribList;b=b.skList;var f=new Set(e.concat(b).map(function(a){return String(d("WAWebWidFactory").toUserWid(a))})),g=function(a){return d("WAWebMaybe").ifSome(d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a)),function(a){return f.has(String(a))})};e=a.map(function(a){return d("WAWebWidFactory").createWid(a.receiverUserJid)}).filter(function(a){return f.has(String(a))||g(a)});b=c.normalizeAddressingModeFn(e).filter(Boolean);a=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:b}));return{type:o.DIRECT,deviceList:[].concat(a)}});return B.apply(this,arguments)}function a(a,c,e){var f,g=a.data,h=g.id,i=g.to;d("WALogger").LOG(n(),h).tags("messaging");(f=e.sendPerfReporter)==null?void 0:f.startWaitingToEncryptStage();return d("WAWebSendMsgQueueMap").sendMsgQueueMap.enqueue(i.toString(),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,f;d("WALogger").LOG(m(),h).tags("messaging");(b=e.sendPerfReporter)==null?void 0:b.postWaitingToEncryptStage();(b=e.sendPerfReporter)==null?void 0:b.startReadyToSendStage();b=D(c);var j=F(c),n=E(c),p=(yield d("WAWebGroupMsgSendUtils").getParticipantRecord(i.toString())),q=(yield d("WAWebGroupMsgSendUtils").getGroupData(i.toString(),p,d("WAWebMsgGetters").getIsReaction(g)));(f=e.sendReporter)==null?void 0:f.setGroupData(q);(f=e.sendPerfReporter)==null?void 0:f.setGroupData(q);f=(f=p==null?void 0:p.participants.map(function(a){return d("WAWebWidFactory").createUserWid(a)}))!=null?f:[];f=(yield d("WAWebMsgRcatUtils").genContentBindingForMsg(g,f));if(q.isCag===!0&&q.isIncognito===!0){var s=Boolean(q.amIAdmin);d("WALogger").LOG(l(),s?"admin":"non-admin").tags("messaging");n=(yield r(i,b,n,j,g,s,p))}else{d("WALogger").LOG(k(),d("WAWebGroupMsgSendUtils").groupTypeForLogging(q)).tags("messaging");s=(yield u(i,p,b,j,Boolean(q.isLidAddressingMode)));n=C(s,q)}if(n.type===o.DIRECT){p=n;b=p.deviceList;(j=e.sendReporter)==null?void 0:j.setDeviceCount(b.length);(s=e.sendPerfReporter)==null?void 0:s.setIsDirectedMessage(!0);return d("WAWebSendGroupDirectJob").encryptAndSendGroupDirectMsg(a,c,b,q,e)}p=n;j=p.senderKeyList;(s=e.sendReporter)==null?void 0:s.setDeviceCount(j.skList.length+j.skDistribList.length);return d("WAWebSendGroupSkmsgJob").encryptAndSendSenderKeyMsg(a,c,j,q,e,f)}))}function C(a,b){var e=b.isLidAddressingMode===!0?p:q;switch(a.type){case o.DIRECT:var f=a.deviceList.filter(e);f.length<a.deviceList.length&&d("WALogger").ERROR(j(),d("WAWebGroupMsgSendUtils").groupTypeForLogging(b)).sendLogs("GroupLidInfra/outgoing_message");return babelHelpers["extends"]({},a,{deviceList:f});case o.SKMSG:f=a.senderKeyList;var g=f.skDistribList;f=f.skList;var k=g.filter(e);k.length<g.length&&d("WALogger").ERROR(i(),d("WAWebGroupMsgSendUtils").groupTypeForLogging(b)).sendLogs("GroupLidInfra/outgoing_message");g=f.filter(e);g.length<f.length&&d("WALogger").ERROR(h(),d("WAWebGroupMsgSendUtils").groupTypeForLogging(b)).sendLogs("GroupLidInfra/outgoing_message");return babelHelpers["extends"]({},a,{senderKeyList:babelHelpers["extends"]({},a.senderKeyList,{skDistribList:k,skList:g})});default:a.type;throw c("err")("filterIncorrectlyAddressedDevices - Invalid type: "+a.type)}}function D(a){a=a.protocolMessage;var b=null;if((a==null?void 0:a.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE&&(a==null?void 0:a.key)){a=a.key;var e=a.remoteJid,f=a.id;a=a.participant;e&&f&&a&&(b=new(c("WAWebMsgKey"))({remote:d("WAWebWidFactory").createWid(e),fromMe:!0,id:f,participant:d("WAWebWidFactory").createWid(a)}))}return b}function E(a){a=a.keepInChatMessage;if(a==null?void 0:a.key){a=a.key;var b=a.remoteJid,e=a.id;a=a.participant;if(b!=null&&e!=null&&a!=null){b=new(c("WAWebMsgKey"))({remote:d("WAWebWidFactory").createWid(b),fromMe:!0,id:e,participant:d("WAWebWidFactory").createWid(a)});return b}}return null}function F(a){a=(a=a.editedMessage)==null?void 0:(a=a.message)==null?void 0:a.protocolMessage;var b=null;if((a==null?void 0:a.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT&&(a==null?void 0:a.key)){a=a.key;var e=a.remoteJid,f=a.id;a=a.participant;e&&f&&a&&(b=new(c("WAWebMsgKey"))({remote:d("WAWebWidFactory").createWid(e),fromMe:!0,id:f,participant:d("WAWebWidFactory").createWid(a)}))}return b}g.GROUP_MSG_TYPE=o;g.getCagMessageSendList=r;g.getGroupSendListForRevoke=w;g.getGroupSendListForUnkeep=y;g.encryptAndSendGroupMsg=a;g.filterIncorrectlyAddressedDevices=C}),98);
__d("WAWebSendGroupSkmsgJob",["Promise","WADeprecatedSendIq","WALogger","WATimeUtils","WAWap","WAWebABProps","WAWebAdvSignatureApi","WAWebApiMessageInfoStore","WAWebApiParticipantStore","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebBotGating","WAWebCommsAckParser","WAWebCommsWapMd","WAWebE2EProtoGenerator","WAWebE2EProtoUtils","WAWebEncryptMsgProtobuf","WAWebGetGroupKeyDistributionMsg","WAWebGroupHandleAddressingModeMismatch","WAWebGroupMsgSendUtils","WAWebHandleMsgCommon","WAWebManageE2ESessionsJob","WAWebMsgGetters","WAWebPhashUtils","WAWebPostPrekeysDepletionMetric","WAWebReportingTokenUtils","WAWebSchemaMessage","WAWebSendGroupDirectJob","WAWebSendMsgCommonApi","WAWebSignal","WAWebSignalProtocolStore","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumMessageType","WAWebWamEnumPrekeysFetchContext","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","cr:4330","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendSenderKeyMsg: phash mismatch for ",", got server phash ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendSenderKeyMsg: invalid ack from server for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendSenderKeyMsg: sending ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: failed for "," devices: ",""]);l=function(){return a};return a}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;(e=a.sendPerfReporter)==null?void 0:e.startPrekeysFetchStage();(e=a.sendPerfReporter)==null?void 0:e.setFetchedPrekeyCount(0);if(b.length>0)try{var f;e=(yield d("WAWebManageE2ESessionsJob").ensureE2ESessions(b));(f=a.sendPerfReporter)==null?void 0:f.setFetchedPrekeyCount(e==null?void 0:e.missedPrekeyCount);d("WAWebPostPrekeysDepletionMetric").maybePostPrekeysDepletionMetric({count:e==null?void 0:e.depletedPrekeyCount,prekeysFetchReason:d("WAWebWamEnumPrekeysFetchContext").PREKEYS_FETCH_CONTEXT.SEND_MESSAGE,messageType:d("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP,deviceSizeBucket:c.deviceSizeBucket})}catch(a){d("WALogger").ERROR(l(),b.length,a).tags("messaging").devConsole(a)}(f=a.sendPerfReporter)==null?void 0:f.postPrekeysFetchStage()});return n.apply(this,arguments)}function o(a,b,c,d,e,f,g,h){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h,i){var j,k;(j=h.sendPerfReporter)==null?void 0:j.startClientEncryptStage();j=d("WAWebSendMsgCommonApi").encodeAndPad(f);var l=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(f);k=d("WAWebBotGating").isBotEnabled()&&((k=a.invokedBotWid)==null?void 0:k.isBot())===!0;var m=d("WAWebBotGating").isBotEnabled()&&d("WAWebMsgGetters").getIsBotFeedbackMessage(a),n=d("WAWebMsgGetters").getIsRevokeForMsgFromOrDeliveredToBot(a);j=(yield d("WAWebEncryptMsgProtobuf").encryptMsgSenderKey(a,b,j,g));g=j.ciphertext;j=j.senderKeyBytes;var o;c.length>0&&(o=(yield d("WAWebGetGroupKeyDistributionMsg").getKeyDistributionMsg(a,b,c,j,!1)));(b=h.sendPerfReporter)==null?void 0:b.postClientEncryptStage();c=null;j=!1;o&&o.length>0&&!m?c=d("WAWap").wap("participants",null,o.map(function(a){var b=a.type,c=a.ciphertext;a=a.participant;b===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg&&(j=!0);var e=i==null?void 0:i.get(d("WAWebWidToJid").widToUserJid(d("WAWebWidFactory").toUserWid(a)));e=e!=null?d("WAWap").wap("content_binding",null,e):null;return d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)},d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(b),"decrypt-fail":d("WAWebBackendJobsCommon").encodeMaybeDecryptFail(d("WAWebE2EProtoUtils").decryptFailAttributeFromProtobuf(f))},c),e)})):i!=null&&(c=d("WAWap").wap("participants",null,e.map(function(a){var b=i==null?void 0:i.get(d("WAWebWidToJid").widToUserJid(d("WAWebWidFactory").toUserWid(a)));return b!=null?d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)},d("WAWap").wap("content_binding",null,b)):null})));h=m?null:d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobs.flow").CiphertextType.Skmsg),mediatype:d("WAWebBackendJobsCommon").encodeMaybeMediaType(l),"decrypt-fail":d("WAWebBackendJobsCommon").encodeMaybeDecryptFail(d("WAWebE2EProtoUtils").decryptFailAttributeFromProtobuf(f))},g);b=null;e=k||m||n?yield s(a,f):[null,!1];l=e[0];g=e[1];if(j||g){k=(yield d("WAWebAdvSignatureApi").getADVEncodedIdentity());b=d("WAWap").wap("device-identity",null,k)}return[c,h,b,l]});return p.apply(this,arguments)}function a(a,b,c,d,e,f){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,l,n){var p,q=a.data,s=q.id;q=q.to;var t=a.data;d("WALogger").LOG(k(),s).tags("messaging");var u=s.id,v=f.skDistribList,w=f.skList;f=f.rotateKey;r(q,l);(p=l.sendPerfReporter)==null?void 0:p.setSenderKeyDistributionCount(v.length);p=w.concat(v);var x=d("WAWebUserPrefsMeUser").getMaybeMeLid();x=(d("WAWebGroupMsgSendUtils").isCagAddon(t,g)||(g==null?void 0:g.isLidAddressingMode)===!0)&&x!=null?x:d("WAWebUserPrefsMeUser").assertGetMe();var y=(yield d("WAWebPhashUtils").phashV2([].concat(p,[x]))),z=d("WAWebMsgGetters").getIsBotFeedbackMessage(t);yield d("WAWebApiMessageInfoStore").createOrMergeReceiptRecords(p.map(function(a){return{msgKey:s,receiverId:a}}));f&&(yield d("WAWebSignal").Session.deleteGroupSenderKeyInfo(q,x));yield m(l,v,g);f=(yield o(t,q,v,w,e,g,l,n));w=f[0];var A=f[1],B=f[2];f=f[3];var C=d("WAWebE2EProtoUtils").pollTypeAttributeFromProtobuf(e),D=d("WAWebE2EProtoUtils").eventTypeAttributeFromProtobuf(e),E=d("WAWebE2EProtoUtils").extractCommentTargetIdAndSenderLid(t),F=E.threadMsgId;E=E.threadMsgSenderLid;var G=C!=null||D!=null||F!=null&&E!=null;G=G?d("WAWap").wap("meta",{polltype:(G=C)!=null?G:d("WAWap").DROP_ATTR,event_type:(C=D)!=null?C:d("WAWap").DROP_ATTR,thread_msg_id:F!=null?d("WAWap").CUSTOM_STRING(F):d("WAWap").DROP_ATTR,thread_msg_sender_jid:E?d("WAWebCommsWapMd").USER_JID(E):d("WAWap").DROP_ATTR}):null;D=n==null?void 0:n.get(d("WAWebWidToJid").widToUserJid(d("WAWebWidFactory").toUserWid(x)));C=D!=null?d("WAWap").wap("sender_content_binding",null,D):null;F=g.isLidAddressingMode===!0?d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid:d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn;E=(yield d("WAWebReportingTokenUtils").genReportingTokenBody(t,e));n=d("WAWap").wap("message",{id:d("WAWap").CUSTOM_STRING(u),to:d("WAWebCommsWapMd").CHAT_JID(q),phash:z?d("WAWap").DROP_ATTR:d("WAWap").CUSTOM_STRING(y),type:d("WAWebE2EProtoUtils").typeAttributeFromProtobuf(e),edit:d("WAWebSendMsgCommonApi").editAttribute(e,t.subtype),addressing_mode:d("WAWebABProps").getABPropConfigValue("lid_groups_outgoing_explicit_address_mode")?d("WAWap").CUSTOM_STRING(F):d("WAWap").DROP_ATTR},w,A,B,G,f,C,E);yield d("WAWebSendMsgCommonApi").updateIdentityRange(a,p);yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();(x=l.sendPerfReporter)==null?void 0:x.postReadyToSendStage();(D=l.sendPerfReporter)==null?void 0:D.startWrittenWireStage();z=(yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(n,d("WAWebCommsAckParser").toCoreAckTemplate({id:u,"class":"message",from:q,participant:null})));if(w){(A=l.sendReporter)==null?void 0:A.setMessageDistributionType(d("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE.SENDER_KEY_DISTRIBUTION_MESSAGE)}(B=l.sendPerfReporter)==null?void 0:B.postWrittenWireStage();l.sendPerfReporter=null;(G=l.sendReporter)==null?void 0:G.postSuccess();l.sendReporter=null;f=d("WAWebSendMsgCommonApi").sendMsgAckSyncParser.parse(z);if(f.error){d("WALogger").WARN(j(),t.id).tags("messaging");return(h||(h=b("Promise"))).reject(c("err")("[messaging] encryptAndSendSenderKeyMsg: Invalid ack from server"))}yield d("WAWebApiParticipantStore").markHasSenderKey(q,v);C=f.success;E=C.phash;x=C.count;D=C.addressingMode;E!=null&&E!==y?(d("WALogger").LOG(i(),t.id,E).tags("messaging"),d("WAWebSendGroupDirectJob").resendGroupMsg({isDirect:!1,msgRecord:a,msgProtobuf:e,oldList:p,ackTime:d("WATimeUtils").unixTime(),groupData:g,metricReporter:l,serverAddressingMode:D})):d("WAWebABProps").getABPropConfigValue("lid_groups_handle_server_addressing_mode")&&D!=null&&D!==F&&void d("WAWebGroupHandleAddressingModeMismatch").handleAddressingModeMismatch(q,{localAddressingMode:F,serverAddressingMode:D,mismatchOrigin:d("WAWebGroupHandleAddressingModeMismatch").MISMATCH_ORIGIN_TYPE.ACK_OUTGOING_MESSAGE});x!=null&&void d("WAWebSchemaMessage").getMessageTable().merge(String(s),{count:x});return f.success});return q.apply(this,arguments)}function r(a,b){a=d("WAWebUserPrefsGeneral").markUserSentMessageToChat(a);if(a){(a=b.sendPerfReporter)==null?void 0:a.setMessageIsFirstUserMessage(!0);(a=b.sendReporter)==null?void 0:a.setMessageIsFirstUserMessage(!0)}}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebMsgGetters").getIsBotFeedbackMessage(a),e=null,f=d("WAWebMsgGetters").getIsRevokeForMsgFromOrDeliveredToBot(a);if(c){var g;e=(g=a.protocolMessageKey)==null?void 0:g.participant}else f?e=a.botRespOrInvocationRevokeBotWid:e=a.invokedBotWid;if(!e||!e.isBot())return[null,!1];yield d("WAWebApiMessageInfoStore").createOrMergeReceiptRecords([{msgKey:a.id,receiverId:e}]);g=!1;yield d("WAWebManageE2ESessionsJob").ensureE2ESessions([e]);f=d("WAWebE2EProtoGenerator").updateBotInvokeMsgProtoCopyForCapi(b,a.botMessageSecret);b=(yield d("WAWebEncryptMsgProtobuf").encryptMsgProtobuf(e,0,f,a,0));f=b.type;a=b.ciphertext;f===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg&&(g=!0);b=d("WAWap").wap("bot",{type:c?"feedback":d("WAWap").DROP_ATTR},d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(e)},d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(f)},a)));return[b,g]});return t.apply(this,arguments)}g.encryptAndSendSenderKeyMsg=a}),98);
__d("WAWebSendNonMessageDataRequest",["WALogger","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebApiPeerMessageStore","WAWebCommsWapMd","WAWebE2EProtoUtils","WAWebMsgKey","WAWebNonMessageDataRequestHistorySyncOnDemandUtils","WAWebNonMessageDataRequestLoggingUtils","WAWebNonMessageDataRequestMediaHandlingUtils","WAWebNonMessageDataRequestPlaceholderMessageResendUtils","WAWebProtobufsE2E.pb","WAWebSendAppStateSyncMsgJob","WAWebSyncGatingUtils","WAWebUserPrefsMeUser","WAWebWamEnumPeerDataResponseApplyResultType","WAWebWidFactory","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] drop history sync on demand request as it's in flight"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] stop sending history sync on demand request as it fails too many times"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] start building rdu message, ## type: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] build rdu message successfully, ## type: ",", ## msg: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] the constructed peer data operation request message is null"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] clean rdu message request after timeout with key ",", ## type: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][rdu] dropping history sync on demand response as it's timeout with key ","."]);n=function(){return a};return a}var o=3e3;function a(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield q(a,b,c));if(b==null){d("WALogger").WARN(l());return}d("WALogger").LOG(k(),a,b.id.id);x(a,b);d("WAWebNonMessageDataRequestLoggingUtils").logNonMessagePeerDataRequest(a,b);yield d("WAWebApiPeerMessageStore").storePeerMessages([b]);d("WAWebNonMessageDataRequestLoggingUtils").sendTimes.set(b.id.id,d("WATimeUtils").unixTimeMs());c=z(a);return d("WAWebSendAppStateSyncMsgJob").encryptAndSendKeyMsg(b,(a=c)!=null?a:void 0)});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("WALogger").LOG(j(),a);var f={peerDataOperationRequestType:a,requestUrlPreview:[],requestStickerReupload:[],placeholderMessageResendRequest:[]};switch(a){case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.SEND_RECENT_STICKER_BOOTSTRAP:break;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:a=s(b);if(a==null)return null;f.requestStickerReupload=a;break;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.GENERATE_LINK_PREVIEW:a=t(b);if(a==null)return null;f.requestUrlPreview=a;break;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.HISTORY_SYNC_ON_DEMAND:a=(yield u(b));if(a==null)return null;f.historySyncOnDemandRequest=a;break;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND:a=w(b);if(a==null)return null;f.placeholderMessageResendRequest=a;break}a=new(c("WAWebMsgKey"))({fromMe:!0,remote:d("WAWebUserPrefsMeUser").getMeUser(),id:(b=e)!=null?b:yield c("WAWebMsgKey").newId()});return{id:a,to:d("WAWebWidFactory").createDeviceWidFromUserAndDevice(d("WAWebUserPrefsMeUser").assertGetMe().user,d("WAWebUserPrefsMeUser").assertGetMe().server,0),type:"protocol",subtype:"peer_data_operation_request_message",peerDataOperationRequestMessage:f}});return r.apply(this,arguments)}function s(a){a=a.fileSha256Arr;a=a==null?void 0:(a=a.filter(function(a){return!d("WAWebNonMessageDataRequestMediaHandlingUtils").inFlightStickerRequests.has(a)}))==null?void 0:a.map(function(a){y(d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,d("WAWebNonMessageDataRequestMediaHandlingUtils").inFlightStickerRequests,a);return{fileSha256:a}});return(a==null?void 0:a.length)===0?null:a}function t(a){var b=a.urls;return b==null?void 0:b.map(function(b){return{url:b,includeHqThumbnail:a.includeHqThumbnail}})}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebSyncGatingUtils").isHistorySyncOnDemandEnabled())return null;if(d("WAWebABProps").getABPropConfigValue("history_sync_on_demand_request_send_killswitch")&&d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").historySyncOnDemandRequestsFailureRecord.disableRequestSending){d("WALogger").LOG(i());return null}a=a.chatId;if(a==null)return null;var b=d("WAWebCommsWapMd").CHAT_JID(a).toString();if(new Set(d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").inFlightHistorySyncOnDemandRequests.values()).has(b)){d("WALogger").LOG(h());return null}a=(yield d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").getOldestMsgInChatFromDB(a));var c=(yield d("WAWebABProps").getABPropConfigValue("history_sync_on_demand_message_count"));return{chatJid:b,oldestMsgId:a==null?void 0:a.id.id,oldestMsgFromMe:a==null?void 0:a.id.fromMe,onDemandMsgCount:c,oldestMsgTimestampMs:a==null?void 0:a.t}});return v.apply(this,arguments)}function w(a){if(!d("WAWebSyncGatingUtils").isPlaceholderMessageResendEnabled())return null;a=a.msgKeys;return a==null||a.length===0?null:a.filter(function(a){return!d("WAWebNonMessageDataRequestPlaceholderMessageResendUtils").inFlightPlaceholderResendRequests.has(a.id)}).map(function(a){y(d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND,d("WAWebNonMessageDataRequestPlaceholderMessageResendUtils").inFlightPlaceholderResendRequests,a.id);return{messageKey:d("WAWebE2EProtoUtils").msgKeyToProtobuf(a)}})}function x(a,b){switch(a){case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:a=(a=b.peerDataOperationRequestMessage)==null?void 0:a.requestStickerReupload;a!=null&&a.forEach(function(a){a=a.fileSha256;if(a!=null){d("WAWebNonMessageDataRequestMediaHandlingUtils").inFlightStickerRequests.add(a);d("WAWebNonMessageDataRequestMediaHandlingUtils").mediaReuploadRequestCountMap.set(a,((a=d("WAWebNonMessageDataRequestMediaHandlingUtils").mediaReuploadRequestCountMap.get(a))!=null?a:0)+1)}});break;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.HISTORY_SYNC_ON_DEMAND:a=(a=b.peerDataOperationRequestMessage)==null?void 0:a.historySyncOnDemandRequest;if(a!=null){var e=(a=a.chatJid)!=null?a:"";d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").inFlightHistorySyncOnDemandRequests.set(b.id.id,e);a=d("WAWebABProps").getABPropConfigValue("history_sync_on_demand_timeout_ms");var f=function(){d("WALogger").LOG(n(),c("gkx")("26258")?"":b.id.id),d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").handleHistorySyncOnDemandFailure(e),d("WAWebNonMessageDataRequestLoggingUtils").logHistorySyncOnDemandResponse(d("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.REQUEST_TIMEOUT,b.id.id)};y(d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.HISTORY_SYNC_ON_DEMAND,d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").inFlightHistorySyncOnDemandRequests,b.id.id,a,f)}break;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND:f=(a=b.peerDataOperationRequestMessage)==null?void 0:a.placeholderMessageResendRequest;f!=null&&f.forEach(function(a){a=(a=a.messageKey)==null?void 0:a.id;a!=null&&d("WAWebNonMessageDataRequestPlaceholderMessageResendUtils").inFlightPlaceholderResendRequests.add(a)});break;default:break}}function y(a,b,e,f,g){f===void 0&&(f=o),new(d("WAShiftTimer").ShiftTimer)(function(){b.has(e)&&(d("WALogger").LOG(m(),c("gkx")("26258")?"":e,a),b["delete"](e),g==null?void 0:g())}).onOrAfter(f)}function z(a){switch(a){case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.GENERATE_LINK_PREVIEW:return d("WAWebSyncGatingUtils").isWebLinkPreviewNseSupportEnabled()?"high_force":null;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND:return d("WAWebSyncGatingUtils").isMessagePlaceholderResendNseSupportEnabled()?"high_force":null;case d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.HISTORY_SYNC_ON_DEMAND:return d("WAWebSyncGatingUtils").isHistorySyncOnDemandEnabled()?"high_force":null;default:return null}}g.sendPeerDataOperationRequest=a;g.cleanRequestAfterTimeout=y}),98);
__d("WAWebEncryptAndSendStatusMsg",["WADeprecatedSendIq","WAJids","WALogger","WANullthrows","WAWap","WAWebABProps","WAWebAdvSignatureApi","WAWebApiContact","WAWebApiMessageInfoStore","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebCommsAckParser","WAWebCommsWapMd","WAWebDBDeviceListFanout","WAWebE2EProtoUtils","WAWebGetGroupKeyDistributionMsg","WAWebManageE2ESessionsJob","WAWebMsgKey","WAWebProtobufsE2E.pb","WAWebSchemaMessageInfo","WAWebSendMsgCommonApi","WAWebSendMsgCreateFanoutStanza","WAWebSignal","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebUserPrefsStatus","WAWebUserPrefsStatusType","WAWebWamEnumMessageDistributionEnumType","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusDirectMsg: start sending ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusDirectMsg: send "," to "," device"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: start sending ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: encrypt message body done"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: create receipts records"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: distribute "," sender key"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: all device list size ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: start to send direct revoke message"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndSendStatusMsg: start to send ",", reokve: ",""]);p=function(){return a};return a}function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.data.id,g=d("WAWebABProps").getABPropConfigValue("lid_status_send_enabled"),h=d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID),i=g?c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLid()):d("WAWebUserPrefsMeUser").assertGetMe(),q=u(b),s,x=(yield c("WAWebUserPrefsStatus").getStatusList());g&&(x.list=x.list.map(function(a){return d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a))}).filter(Boolean).map(function(a){return a}));d("WALogger").LOG(p(),f.id,q).devConsole(b);if(q){(g=e.sendPerfReporter)==null?void 0:g.setIsRevokeMessage(!0);g=(yield d("WAWebSchemaMessageInfo").getMessageInfoTable().equals(["msgKey"],String(q)));q=g.map(function(a){return d("WAWebWidFactory").createWid(a.receiverUserJid)});if(v(q,x.list)){d("WALogger").LOG(o());g=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:[].concat(q,[i])}));return w(a,b,g,e)}g=q}else{if(x.list.length===0)return;g=x.list;s=d("WAWap").wap("meta",{status_setting:t(x.setting)})}q=(yield d("WAWebDBDeviceListFanout").getFanOutList({wids:[].concat(g,[i])}));d("WALogger").LOG(n(),q.length);x=(yield c("WAWebUserPrefsStatus").getStatusSkDistribList(q));g=x.skDistribList;x=x.participantList;if(g.length>0){var y;d("WALogger").LOG(m(),g.length);(y=e.sendReporter)==null?void 0:y.setMessageDistributionType(d("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE.SENDER_KEY_DISTRIBUTION_MESSAGE);(y=e.sendReporter)==null?void 0:y.setDeviceCount(g.length);(y=e.sendPerfReporter)==null?void 0:y.setSenderKeyDistributionCount(g.length)}yield d("WAWebApiMessageInfoStore").createOrMergeReceiptRecords(q.map(function(a){return{msgKey:f,receiverId:a}}));d("WALogger").LOG(l());(y=e.sendPerfReporter)==null?void 0:y.startPrekeysFetchStage();q=(yield d("WAWebManageE2ESessionsJob").ensureE2ESessions(g));y=q==null?void 0:q.missedPrekeyCount;if(y!=null){(q=e.sendPerfReporter)==null?void 0:q.setFetchedPrekeyCount(y)}(q=e.sendPerfReporter)==null?void 0:q.postPrekeysFetchStage();(y=e.sendPerfReporter)==null?void 0:y.startClientEncryptStage();q=(yield r(h,i,g,x,b));y=q[0];i=q[1];x=q[2];d("WALogger").LOG(k());q=d("WAWap").wap("message",{id:d("WAWap").CUSTOM_STRING(f.id),to:d("WAWebCommsWapMd").CHAT_JID(h),type:d("WAWebE2EProtoUtils").typeAttributeFromProtobuf(b),edit:d("WAWebSendMsgCommonApi").editAttribute(b,a.data.subtype)},y,i,x,s);yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();(b=e.sendPerfReporter)==null?void 0:b.postClientEncryptStage();(a=e.sendPerfReporter)==null?void 0:a.startWrittenWireStage();d("WALogger").LOG(j(),f.id);yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(q,d("WAWebCommsAckParser").toCoreAckTemplate({id:f.id,"class":"message",from:h,participant:null}));(y=e.sendPerfReporter)==null?void 0:y.postWrittenWireStage();yield c("WAWebUserPrefsStatus").markStatusHasSenderKey(g)});return q.apply(this,arguments)}function r(a,b,c,d,e){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=d("WAWebSendMsgCommonApi").encodeAndPad(f);f=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(f);b=(yield d("WAWebSignal").Cipher.encryptSenderKeyMsgSignalProto(a,b,g));g=b.ciphertext;b=b.senderKeyBytes;var h;c.length>0&&(h=(yield d("WAWebGetGroupKeyDistributionMsg").getKeyDistributionMsg(null,a,c,b,!1)));a=[];c=[];b=!1;var i=null;h&&h.length>0&&(a=h.map(function(a){var c=a.type,e=a.ciphertext;a=a.participant;c===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg&&(b=!0);return d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)},d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(c)},e))}));c=e.map(function(a){return d("WAWap").wap("to",{jid:d("WAWebCommsWapMd").USER_JID(a)})});(c.length>0||a.length>0)&&(i=d("WAWap").wap("participants",null,a.concat(c)));e=d("WAWap").wap("enc",{v:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION.toString()),type:d("WAWap").CUSTOM_STRING(d("WAWebBackendJobs.flow").CiphertextType.Skmsg),mediatype:d("WAWebBackendJobsCommon").encodeMaybeMediaType(f)},g);a=null;if(b){c=(yield d("WAWebAdvSignatureApi").getADVEncodedIdentity());a=d("WAWap").wap("device-identity",null,c)}return[i,e,a]});return s.apply(this,arguments)}function t(a){switch(a){case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList:return"allowlist";case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList:return"denylist";case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact:return"contacts"}}function u(a){a=a.protocolMessage;var b=null;if((a==null?void 0:a.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE&&(a==null?void 0:a.key)){a=a.key;var e=a.remoteJid,f=a.id;a=a.participant;e!=null&&f!=null&&a!=null&&(b=new(c("WAWebMsgKey"))({remote:d("WAWebWidFactory").createWid(e),fromMe:!0,id:f,participant:d("WAWebWidFactory").createWid(a)}))}return b}function v(a,b){var c=new Set(b.map(function(a){return d("WAWebWidFactory").toUserWid(a).toString()}));return a.some(function(a){return!d("WAWebUserPrefsMeUser").isMeAccount(a)&&!c.has(d("WAWebWidFactory").toUserWid(a).toString())})}function w(a,b,c,d){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a.data.id,g=d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID);d("WALogger").LOG(i(),f.id,c.length);a=(yield d("WAWebSendMsgCreateFanoutStanza").createFanoutMsgStanza(a,b,c,{fanoutType:d("WAWebSendMsgCreateFanoutStanza").FANOUT_TYPE.GROUP_DIRECT,isResendingMsg:!1},e));yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();(b=e.sendPerfReporter)==null?void 0:b.startWrittenWireStage();d("WALogger").LOG(h(),f.id);yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(a,d("WAWebCommsAckParser").toCoreAckTemplate({id:f.id,"class":"message",from:g,participant:null}));(c=e.sendPerfReporter)==null?void 0:c.postWrittenWireStage()});return x.apply(this,arguments)}g.encryptAndSendStatusMsg=a}),98);
__d("WASmaxInPsaIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInPsaIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInPsaIQErrorRequestTimeoutMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","request-timeout");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",408);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRequestTimeoutMixin=a}),98);
__d("WASmaxInPsaIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInPsaIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup",["WAResultOrError","WASmaxInPsaIQErrorInternalServerErrorMixin","WASmaxInPsaIQErrorRateOverlimitMixin","WASmaxInPsaIQErrorRequestTimeoutMixin","WASmaxInPsaIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPsaIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInPsaIQErrorRequestTimeoutMixin").parseIQErrorRequestTimeoutMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorRequestTimeout",value:c.value});var e=d("WASmaxInPsaIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:e.value});var f=d("WASmaxInPsaIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorRequestTimeout","IQErrorServiceUnavailable","IQErrorRateOverlimit"],[b,c,e,f])}g.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup=a}),98);
__d("WASmaxInPsaIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInPsaChatBlockGetResponseServerError",["WAResultOrError","WASmaxInPsaIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup","WASmaxInPsaIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPsaIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPsaIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup").parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup:b.value}))}g.parseChatBlockGetResponseServerError=a}),98);
__d("WASmaxInPsaEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={blocked:"blocked",unblocked:"unblocked"};b={image:"image",video:"video"};c={validators:[d("WAJids").validateStatusJid,d("WAJids").validateUserJid],typeName:"StatusJid|UserJid"};g.ENUM_BLOCKED_UNBLOCKED=a;g.ENUM_IMAGE_VIDEO=b;g.STATUSJID_USERJID=c}),98);
__d("WASmaxInPsaIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInPsaChatBlockGetResponseSuccess",["WAResultOrError","WASmaxInPsaEnums","WASmaxInPsaIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"blocking");if(!c.success)return c;c=d("WASmaxParseUtils").attrStringEnum(c.value,"status",d("WASmaxInPsaEnums").ENUM_BLOCKED_UNBLOCKED);if(!c.success)return c;a=d("WASmaxInPsaIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({blockingStatus:c.value},a.value))}g.parseChatBlockGetResponseSuccess=a}),98);
__d("WASmaxOutPsaBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutPsaChatBlockGetRequest",["WASmaxJsx","WASmaxOutPsaBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutPsaBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"w:comms:chat"},d("WASmaxJsx").smax("query",null,d("WASmaxJsx").smax("blocking_status",null))));return a}g.makeChatBlockGetRequest=a}),98);
__d("WASmaxPsaChatBlockGetRPC",["WAComms","WASmaxInPsaChatBlockGetResponseServerError","WASmaxInPsaChatBlockGetResponseSuccess","WASmaxOutPsaChatBlockGetRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:c=d("WASmaxOutPsaChatBlockGetRequest").makeChatBlockGetRequest();h.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=h.sent;f=d("WASmaxInPsaChatBlockGetResponseSuccess").parseChatBlockGetResponseSuccess(e,c);if(!f.success){h.next=7;break}return h.abrupt("return",{name:"ChatBlockGetResponseSuccess",value:f.value});case 7:g=d("WASmaxInPsaChatBlockGetResponseServerError").parseChatBlockGetResponseServerError(e,c);if(!g.success){h.next=10;break}return h.abrupt("return",{name:"ChatBlockGetResponseServerError",value:g.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ChatBlockGet",{Success:f,ServerError:g}));case 11:case"end":return h.stop()}},null,this)}g.sendChatBlockGetRPC=a}),98);
__d("WAWebApiBlocklist",["Promise","WAWebModelStorageUtils","WAWebSchemaBlocklist","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h;function a(){return d("WAWebSchemaBlocklist").getBlocklistTable().all().then(function(a){a=a.map(function(a){return d("WAWebWidFactory").createUserWid(a.id)});return a})}function c(a){if(!a)return(h||(h=b("Promise"))).resolve(!1);var c=a.map(function(a){return{id:a.toString()}});return d("WAWebModelStorageUtils").getStorage().lock(["blocklist"],function(a){var b=a[0];return b.clear().then(function(){return b.bulkCreate(c).then(function(){return!0})})})}g.getBlocklist=a;g.updateBlocklist=c}),98);
__d("WASmaxInBlocklistsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInBlocklistsIQErrorFeatureNotImplementedMixin","WASmaxInBlocklistsIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBlocklistsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:b.value});var c=d("WASmaxInBlocklistsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorFeatureNotImplemented","IQErrorInternalServerError"],[b,c])}g.parseIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInBlocklistsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBlocklistsGetBlockListResponseInternalServerError",["WAResultOrError","WASmaxInBlocklistsIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup","WASmaxInBlocklistsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBlocklistsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBlocklistsIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup").parseIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup:b.value}))}g.parseGetBlockListResponseInternalServerError=a}),98);
__d("WASmaxInBlocklistsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorBadRequestOrRateOverlimitMixinGroup",["WAResultOrError","WASmaxInBlocklistsIQErrorBadRequestMixin","WASmaxInBlocklistsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBlocklistsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBlocklistsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorRateOverlimit"],[b,c])}g.parseIQErrorBadRequestOrRateOverlimitMixinGroup=a}),98);
__d("WASmaxInBlocklistsGetBlockListResponseInvalidRequest",["WAResultOrError","WASmaxInBlocklistsIQErrorBadRequestOrRateOverlimitMixinGroup","WASmaxInBlocklistsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBlocklistsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBlocklistsIQErrorBadRequestOrRateOverlimitMixinGroup").parseIQErrorBadRequestOrRateOverlimitMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrRateOverlimitMixinGroup:b.value}))}g.parseGetBlockListResponseInvalidRequest=a}),98);
__d("WASmaxInBlocklistsGetBlockListResponseSuccessWithMatch",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);return!a.success?a:d("WAResultOrError").makeResult({type:c.value})}g.parseGetBlockListResponseSuccessWithMatch=a}),98);
__d("WASmaxInBlocklistsDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInBlocklistsUsernameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"username");return!a.success?a:d("WAResultOrError").makeResult({username:a.value})}g.parseUsernameMixin=a}),98);
__d("WASmaxInBlocklistsDisplayNameOrUsernameMixinGroup",["WAResultOrError","WASmaxInBlocklistsDisplayNameMixin","WASmaxInBlocklistsUsernameMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBlocklistsDisplayNameMixin").parseDisplayNameMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"DisplayName",value:b.value});var c=d("WASmaxInBlocklistsUsernameMixin").parseUsernameMixin(a);return c.success?d("WAResultOrError").makeResult({name:"Username",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["DisplayName","Username"],[b,c])}g.parseDisplayNameOrUsernameMixinGroup=a}),98);
__d("WASmaxInBlocklistsGetBlockListResponseSuccessWithMismatch",["WAResultOrError","WASmaxInBlocklistsDisplayNameOrUsernameMixinGroup","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxInBlocklistsDisplayNameOrUsernameMixinGroup").parseDisplayNameOrUsernameMixinGroup(a);return d("WAResultOrError").makeResult({jid:b.value,displayNameOrUsernameMixinGroup:a.success?a.value:null})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"dhash");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"item",0,64e3,h);return!a.success?a:d("WAResultOrError").makeResult({type:e.value,listDhash:b.value,listItem:a.value})}g.parseGetBlockListResponseSuccessWithMismatchListItem=h;g.parseGetBlockListResponseSuccessWithMismatch=a}),98);
__d("WASmaxOutBlocklistsGetBlockListRequest",["WASmaxChildren","WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.itemDhash;a=d("WASmaxJsx").smax("item",{dhash:d("WAWap").CUSTOM_STRING(a)});return a}function a(a){a=a.itemArgs;a=d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"blocklist",type:"get",id:d("WAWap").generateId()},d("WASmaxChildren").OPTIONAL_CHILD(h,a));return a}g.makeGetBlockListRequestItem=h;g.makeGetBlockListRequest=a}),98);
__d("WASmaxBlocklistsGetBlockListRPC",["WAComms","WASmaxInBlocklistsGetBlockListResponseInternalServerError","WASmaxInBlocklistsGetBlockListResponseInvalidRequest","WASmaxInBlocklistsGetBlockListResponseSuccessWithMatch","WASmaxInBlocklistsGetBlockListResponseSuccessWithMismatch","WASmaxOutBlocklistsGetBlockListRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d("WASmaxOutBlocklistsGetBlockListRequest").makeGetBlockListRequest(a);k.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=k.sent;g=d("WASmaxInBlocklistsGetBlockListResponseSuccessWithMismatch").parseGetBlockListResponseSuccessWithMismatch(f,e);if(!g.success){k.next=7;break}return k.abrupt("return",{name:"GetBlockListResponseSuccessWithMismatch",value:g.value});case 7:h=d("WASmaxInBlocklistsGetBlockListResponseSuccessWithMatch").parseGetBlockListResponseSuccessWithMatch(f,e);if(!h.success){k.next=10;break}return k.abrupt("return",{name:"GetBlockListResponseSuccessWithMatch",value:h.value});case 10:i=d("WASmaxInBlocklistsGetBlockListResponseInvalidRequest").parseGetBlockListResponseInvalidRequest(f,e);if(!i.success){k.next=13;break}return k.abrupt("return",{name:"GetBlockListResponseInvalidRequest",value:i.value});case 13:j=d("WASmaxInBlocklistsGetBlockListResponseInternalServerError").parseGetBlockListResponseInternalServerError(f,e);if(!j.success){k.next=16;break}return k.abrupt("return",{name:"GetBlockListResponseInternalServerError",value:j.value});case 16:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetBlockList",{SuccessWithMismatch:g,SuccessWithMatch:h,InvalidRequest:i,InternalServerError:j}));case 17:case"end":return k.stop()}},null,this)}g.sendGetBlockListRPC=a}),98);
__d("WAWebGetBlocklistJob",["WALogger","WASmaxBlocklistsGetBlockListRPC","WAWebJidToWid","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchBlocklist: GetBlockListResponseSuccessWithMatch ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchBlocklist failed: code "," text ",""]);i=function(){return a};return a}function j(a,b){d("WALogger").WARN(i(),a,b).sendLogs("getBlocklist")}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsMultiDevice").getBlocklistHash());a=babelHelpers["extends"]({},a!=null&&{itemArgs:{itemDhash:a}});a=(yield d("WASmaxBlocklistsGetBlockListRPC").sendGetBlockListRPC(a));switch(a.name){case"GetBlockListResponseInternalServerError":var b=a.value.errorIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup.value,c=b.code;b=b.text;j(Number(c),b);return{errorCode:Number(c),errorText:b};case"GetBlockListResponseInvalidRequest":c=a.value.errorIQErrorBadRequestOrRateOverlimitMixinGroup.value;b=c.code;c=c.text;j(Number(b),c);return{errorCode:Number(b),errorText:c};case"GetBlockListResponseSuccessWithMatch":d("WALogger").LOG(h(),a.value.type);b={wids:[]};return b;case"GetBlockListResponseSuccessWithMismatch":var e={wids:[]};c=a.value.listDhash;b=a.value.listItem;c!=null&&(e.dhash=c);b.forEach(function(a){var b;e.wids.push({wid:d("WAWebJidToWid").userJidToUserWid(a.jid),displayName:(b=a.displayNameOrUsernameMixinGroup)==null?void 0:b.value.displayName,username:(b=a.displayNameOrUsernameMixinGroup)==null?void 0:b.value.username})});return e}});return k.apply(this,arguments)}g.getBlocklist=a}),98);
__d("WAWebQueryBlockListJob",["WALogger","WASmaxPsaChatBlockGetRPC","WAWebApiBlocklist","WAWebGetBlocklistJob","WAWebUpdateLidMetadataJob","WAWebUserPrefsMultiDevice","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBlockingStatusForPSAUser: server response with ",", ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[blocklist] no change in blocklist, skip update"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[blocklist] updating blocklist with "," contact(s)"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[blocklist] fetch blocklist using blocklist"]);k=function(){return a};return a}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(k());var a=(yield d("WAWebGetBlocklistJob").getBlocklist());if(a.errorCode!=null)return a;if(a.dhash){d("WALogger").LOG(j(),a.wids.length||0);yield d("WAWebUserPrefsMultiDevice").setBlocklistHash(a.dhash);yield d("WAWebApiBlocklist").updateBlocklist(a.wids.map(function(a){return a.wid}));var b=a.wids.map(function(a){var b=a.wid,c=a.displayName;a=a.username;if(c==null&&a==null||!b.isLid())return null;var e={};c!=null?(e.displayNameLID=c,e.username=void 0):d("WAWebUsernameGatingUtils").usernameDisplayedEnabled&&a!=null&&(e.username=a);return{lid:d("WAWebWidFactory").toUserWid(b),data:e}}).filter(Boolean);yield d("WAWebUpdateLidMetadataJob").updateLidMetadataJob(b)}else d("WALogger").LOG(i());return a});return l.apply(this,arguments)}function c(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WASmaxPsaChatBlockGetRPC").sendChatBlockGetRPC());switch(a.name){case"ChatBlockGetResponseServerError":var b=a.value.errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableOrRateOverlimitMixinGroup.value,c=b.code;b=b.text;d("WALogger").WARN(h(),c,b);return{errorCode:Number(c),errorText:b};default:a.name;return a.value.blockingStatus==="blocked"}});return m.apply(this,arguments)}g.fetchAndUpdateBlocklist=a;g.getBlockingStatusForPSAUser=c}),98);
__d("WAWebQueryDisappearingModeJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("dmParser",function(a){a=a.child("disappearing_mode");return{duration:a.attrInt("duration"),t:a.attrInt("t")}});function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWap").wap("iq",{xmlns:"disappearing_mode",to:d("WAWap").S_WHATSAPP_NET,type:"get",id:d("WAWap").generateId()});a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode);return a.result});return i.apply(this,arguments)}g.queryDisappearingMode=a}),98);
__d("WAWebQueryPrivacySettingsJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebPrivacySettings","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPrivacy error: "," - code "," text ",""]);h=function(){return a};return a}function i(a,b){b=b.maybeChild("error");var c=b&&b.maybeAttrString("code");b=b&&b.maybeAttrString("text");d("WALogger").WARN(h(),a,c,b).sendLogs("getPrivacy",.001)}var j=new(c("WADeprecatedWapParser"))("privacyParser",function(a){a.assertAttr("type","result");var b={};a.child("privacy").forEachChildWithTag("category",function(a){var c=a.attrString("name");switch(c){case"readreceipts":var e=a.attrEnum("value",d("WAWebPrivacySettings").ALL_NONE_WITH_ERROR);e!=="error"?b.readReceipts=e:i("readreceipts",a);break;case"last":e=a.attrEnum("value",d("WAWebPrivacySettings").VISIBILITY_WITH_ERROR);e!=="error"?b.lastSeen=e:i("last",a);break;case"online":e=a.attrEnum("value",d("WAWebPrivacySettings").ONLINE_VISIBILITY_WITH_ERROR);e!=="error"?b.online=e:i("online",a);break;case"profile":e=a.attrEnum("value",d("WAWebPrivacySettings").VISIBILITY_WITH_ERROR);e!=="error"?b.profilePicture=e:i("profile",a);break;case"status":e=a.attrEnum("value",d("WAWebPrivacySettings").VISIBILITY_WITH_ERROR);e!=="error"?b.about=e:i("status",a);break;case"groupadd":e=a.attrEnum("value",d("WAWebPrivacySettings").VISIBILITY_WITH_ERROR);e!=="error"?b.groupAdd=e:i("groupadd",a);break;case"calladd":e=a.attrEnum("value",d("WAWebPrivacySettings").CALL_ADD_WITH_ERROR);e!=="error"?b.callAdd=e:i("calladd",a);break;default:i(c+" is unknown type",a);break}});return b});function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(a=d("WAWap")).wap("iq",{xmlns:"privacy",to:a.S_WHATSAPP_NET,type:"get",id:a.generateId()},a.wap("privacy",null));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,j));if(!a.success)throw c("err")("invalid response");else return a.result});return k.apply(this,arguments)}g.getPrivacy=a}),98);
__d("WAWebQueryPrivacyDisallowedListJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebJidToWid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("getPrivacyDisallowedListParser",function(a){a=a.child("privacy");a=a.maybeChild("list");if(a==null)return{status:"match"};var b=a.mapChildren(function(a){return d("WAWebJidToWid").deviceJidToUserWid(a.attrDeviceJid("jid"))});return{status:"mismatch",users:b,dhash:a.attrString("dhash")}});function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"get",id:b.generateId(),xmlns:"privacy"},b.wap("privacy",null,b.wap("list",{name:b.CUSTOM_STRING(a),value:b.CUSTOM_STRING("contact_blacklist")})));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!b.success)throw c("err")("invalid response");else return b.result});return i.apply(this,arguments)}g.queryPrivacyDisallowedList=a}),98);
__d("WAWebSyncPrivacyDisallowedLists",["Promise","WAWebQueryPrivacyDisallowedListJob","WAWebSchemaPrivacyDisallowedList","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebQueryPrivacyDisallowedListJob").queryPrivacyDisallowedList(a));return{type:a,response:b}});return function(b){return a.apply(this,arguments)}}())));var c=[];a.forEach(function(a){var b=a.response,d=b.status,e=b.users;b=b.dhash;if(d!=="mismatch"||e==null||b==null)return;c.push({id:a.type,disallowedList:e.map(function(a){return a.toString()}),dhash:b})});yield d("WAWebSchemaPrivacyDisallowedList").getPrivacyDisallowedListTable().bulkCreateOrReplace(c);return c});return j.apply(this,arguments)}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield i([a])});return k.apply(this,arguments)}g.syncPrivacyDisallowedLists=i;g.syncSinglePrivacyDisallowedList=a}),98);
__d("WAWebAccountSyncJob",["$InternalEnum","WAWebBlocklistCollection","WAWebProfilePicThumbCollection","WAWebQueryBlockListJob","WAWebQueryDisappearingModeJob","WAWebQueryPrivacySettingsJob","WAWebSchemaPrivacyDisallowedList","WAWebSyncDeviceAdvDeviceListJob","WAWebSyncPrivacyDisallowedLists","WAWebTos","WAWebUpdateDisappearingModeForContact","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({BLOCKLIST:"blocklist",DEVICES:"devices",DISAPPEARING_MODE:"disappearing_mode",PICTURE:"picture",PRIVACY:"privacy",STATUS:"status",TOS:"tos",NOTICE:"notice",USER:"user",TEXT_STATUS:"text_status",USERNAME:"username"});function a(a){return d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob(d("WAWebUserPrefsMeUser").getMePNandLIDWids(),a,null)}function c(){var a=d("WAWebUserPrefsMeUser").getMeUser(),b=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.get(a);return b!=null?d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.resyncPictures([b]):d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.resyncPicturesByWid([a])}function e(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=(yield d("WAWebQueryPrivacySettingsJob").getPrivacy());d("WAWebUserPrefsGeneral").setUserPrivacySettings(b);a=[(a=d("WAWebSchemaPrivacyDisallowedList")).PrivacyDisallowedListType.About,a.PrivacyDisallowedListType.GroupAdd,a.PrivacyDisallowedListType.LastSeen,a.PrivacyDisallowedListType.ProfilePicture];a=(yield d("WAWebSyncPrivacyDisallowedLists").syncPrivacyDisallowedLists(a));return{privacySettings:b,privacyDisallowedRows:a}});return i.apply(this,arguments)}function f(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebQueryBlockListJob").fetchAndUpdateBlocklist());a.dhash&&(d("WAWebBlocklistCollection").BlocklistCollection.reset(),a.wids.length&&d("WAWebBlocklistCollection").BlocklistCollection.add(a.wids.map(function(a){return{id:a.wid}})))});return j.apply(this,arguments)}function k(a){a.forEach(function(a){d("WAWebTos").TosManager.setState(a.id,a.state?"ACCEPTED":"NOT_ACCEPTED")})}function l(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebQueryDisappearingModeJob").queryDisappearingMode());yield d("WAWebUpdateDisappearingModeForContact").updateDisappearingModeForContact(d("WAWebUserPrefsMeUser").getMaybeMeUser(),a.duration,a.t)});return m.apply(this,arguments)}g.AccountSyncType=h;g.getDevices=a;g.getAndUpdateProfilePicture=c;g.updatePrivacySettings=e;g.updateBlocklist=f;g.updateTosState=k;g.updateDefaultDisappearingMode=l}),98);
__d("WAWebNonAddressBookContactsJob",["WALogger","WAWebApiContact","WAWebChatCollection","WAWebJidUtils","WAWebModelStorageUtils","WAWebSchemaChat","WAWebSchemaParticipant","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["get "," non-address book contacts, mark dirty, and update the contact table during the initial sync"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mark "," contacts dirty during the regular sync"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["found "," contacts with set isAddressBookContact value from contact table"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["found "," contacts from chat and group participant tables"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["get "," chunks of contacts from chat collection, chunk size: ",""]);l=function(){return a};return a}function a(a){a===void 0&&(a=500);var b=[],c=[],e=new Set(),f=new Set();for(var g of d("WAWebChatCollection").ChatCollection.toArray())f.size===a&&(b.push(f),f=new Set()),g.isEligibleForContactSync&&(g.isGroup?c.push(g.id):e.has(g.id)||(f.add(g.id),e.add(g.id)));for(g of c){c=d("WAWebChatCollection").ChatCollection.get(g)||{};c=(c=(c=c.groupMetadata)==null?void 0:c.participants.toArray())!=null?c:[];for(c of c)f.size===a&&(b.push(f),f=new Set()),e.has(c.id)||(f.add(c.id),e.add(c.id))}f.size!==0&&b.push(f);d("WALogger").LOG(l(),b.length,a).tags("contact-sync");return b}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=new Set();yield d("WAWebSchemaParticipant").getParticipantTable().forEach(function(b){b.participants.forEach(function(b){c("WAWebWid").isLid(b)?a.add(d("WAWebJidUtils").toLidUserJid(d("WAWebWidFactory").createWid(b).user)):a.add(d("WAWebJidUtils").toPhoneUserJid(d("WAWebWidFactory").createWid(b).user))})});yield d("WAWebSchemaChat").getChatTable().forEach(function(b){c("WAWebWid").isEligibleForUSync(b.id)&&(c("WAWebWid").isLid(b.id)?a.add(d("WAWebJidUtils").toLidUserJid(d("WAWebWidFactory").createWid(b.id).user)):a.add(d("WAWebJidUtils").toPhoneUserJid(d("WAWebWidFactory").createWid(b.id).user)))});d("WALogger").LOG(k(),a.size).tags("contact-sync");return Array.from(a)});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a.anyOf(["isAddressBookContact"],[1,0]));a=new Set(a.map(function(a){return a.id}));d("WALogger").LOG(j(),a.size).tags("contact-sync");return a});return p.apply(this,arguments)}function e(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield m());return d("WAWebModelStorageUtils").getStorage().lock(["contact"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield o(b)),e=Array.from(a).map(function(a){return c.has(a)?{id:a,isContactSyncCompleted:0}:{id:a,isAddressBookContact:0,isContactSyncCompleted:0,contactHash:d("WAWebApiContact").getContactHash(a)}});d("WALogger").LOG(i(),e.length).tags("contact-sync");return b.bulkCreateOrMerge(e)});return function(a){return c.apply(this,arguments)}}())});return q.apply(this,arguments)}function f(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield m());return d("WAWebModelStorageUtils").getStorage().lock(["contact"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield o(b)),e=a.filter(function(a){return!c.has(a)});e=e.map(function(a){return{id:a,isAddressBookContact:0,isContactSyncCompleted:0,contactHash:d("WAWebApiContact").getContactHash(a)}});d("WALogger").LOG(h(),e.length).tags("contact-sync");return b.bulkCreateOrMerge(e)});return function(a){return c.apply(this,arguments)}}())});return r.apply(this,arguments)}g.getAllContactsFromChatCollectionIntoChunks=a;g.getNonAddressBookContactsAndMarkAllContactsDirty=e;g.getAndUpdateNonAddressBookContacts=f}),98);
__d("WAWebSyncContactJob",["WAJobOrchestratorTypes","WAWebContactSyncApi","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b=!0);a={contactIds:a,shouldDelayBetweenChunks:b};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("syncContactListInChunks",function(a){return d("WAWebContactSyncApi").syncContactListInChunks(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function b(a,b){b===void 0&&(b=!0);a={contactIds:a,shouldSyncDevice:b};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("syncContactList",function(a){return d("WAWebContactSyncApi").syncContactList(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}g.syncContactListInChunksJob=a;g.syncContactListJob=b}),98);
__d("WAWebNonMessageDataRequestMediaHandlingUtils",["Promise","WAJobOrchestratorTypes","WATimeUtils","WAWebMediaMmsV4Upload","WAWebOrchestratorNonPersistedJob","WAWebProtobufsE2E.pb","WAWebSchemaNonMessageDataRequest","WAWebSendNonMessageDataRequest","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=15,j=15,k=new Set(),l=new Map(),m=new Map();function a(a){l.clear(),a.forEach(function(a){a.operationType===d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.MEDIA_UPLOAD&&l.set(a.id,a)})}function c(){m.clear();return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("requestAllSyncdMissingKeys",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WATimeUtils").unixTime(),b=d("WAWebSchemaNonMessageDataRequest").getNonMessageDataRequestTable();b=(yield b.all());b.filter(function(b){if(b.operationType!==d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.MEDIA_UPLOAD)return!1;if(b.requestType!==d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER)return!1;if(b.lastRequestTimeStampSec!=null&&a-b.lastRequestTimeStampSec>48*d("WATimeUtils").HOUR_SECONDS)return!1;return b.requestRetryCount!=null&&b.requestRetryCount>=3?!1:!0});d("WAWebSendNonMessageDataRequest").sendPeerDataOperationRequest(d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,{fileSha256Arr:b.map(function(a){return a.fileKey})})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted()}function e(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("WAWebSchemaNonMessageDataRequest").getNonMessageDataRequestTable(),f=Array.from(a.keys()),g=d("WATimeUtils").unixTime(),i=[];yield (h||(h=b("Promise"))).all(f.map(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f=q(b,c,d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.SEND_REQUEST),h=(yield e.get(f));i.push({id:f,fileKey:b,requestType:c,operationType:d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.SEND_REQUEST,lastRequestTimeStampSec:g,requestRetryCount:((f=h==null?void 0:h.requestRetryCount)!=null?f:0)+1,responseError:a.get(b)})});return function(a){return f.apply(this,arguments)}}())).then(function(){e.bulkCreateOrReplace(i)})});return n.apply(this,arguments)}function f(a,b,c){a=q(a,b,d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.MEDIA_UPLOAD);b=l.get(a);return b!=null&&b.lastMediaUploadSuccess===!0&&b.lastMediaUploadTimeStampSec!=null&&c-b.lastMediaUploadTimeStampSec<=d("WATimeUtils").DAY_SECONDS}function o(a,b,c){a=q(a,b,d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.MEDIA_UPLOAD);b=l.get(a);a=r(c,b==null?void 0:b.lastRequestTimeStampSec);return b!=null&&b.lastMediaUploadSuccess===!1&&a&&b.mediaUploadFailureCount!=null&&b.mediaUploadFailureCount>=i}function p(a,b){var c=[];a.forEach(function(a,e){var f=q(e,d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.MEDIA_UPLOAD),g=l.get(f),h=!r(b,g==null?void 0:g.lastMediaUploadTimeStampSec);a=a===d("WAWebMediaMmsV4Upload").UploadMediaResultKind.SUCCESS;g=(h?0:(h=g==null?void 0:g.mediaUploadFailureCount)!=null?h:0)+(a?0:1);h={id:f,fileKey:e,requestType:d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,operationType:d("WAWebSchemaNonMessageDataRequest").DataRequestUploadOperationType.MEDIA_UPLOAD,lastMediaUploadTimeStampSec:b,lastMediaUploadSuccess:a,mediaUploadFailureCount:g};l.set(f,h);c.push(h)});a=d("WAWebSchemaNonMessageDataRequest").getNonMessageDataRequestTable();a.bulkCreateOrReplace(c)}function q(a,b,c){return a+"_"+String(b)+"_"+String(c)}function r(a,b){a=new Date(a*1e3).toDateString();b=b!=null?new Date(b*1e3).toDateString():a;return a===b}g.MEDIA_REUPLOAD_REQUEST_LIMIT=j;g.inFlightStickerRequests=k;g.mediaUploadResultMap=l;g.mediaReuploadRequestCountMap=m;g.initializeMediaUploadResultFromStorage=a;g.retryNonMessageDataRequestJob=c;g.insertResponseError=e;g.shouldSkipMediaUploadWithSuccess=f;g.shouldSkipMediaUploadWithCancellation=o;g.insertMediaUploadResult=p}),98);
__d("WAWebNonMessageDataRequestPlaceholderMessageResendUtils",["WATimeUtils","WAWebABProps","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebSendNonMessageDataRequest","WAWebSyncGatingUtils"],(function(a,b,c,d,e,f,g){var h=new Set();b=new Set();var i=32;function a(a,b){if(!d("WAWebSyncGatingUtils").isPlaceholderMessageResendEnabled()||!b)return;var c=[],e=d("WATimeUtils").unixTime(),f=d("WAWebABProps").getABPropConfigValue("placeholder_message_resend_maximum_days_limit")*d("WATimeUtils").DAY_SECONDS;a.forEach(function(a){a.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT&&!h.has(a.id)&&e-a.t<=f&&!a.unsafe().isMdHistoryMsg&&a.subtype!=="bot_unavailable_fanout"&&a.subtype!=="hosted_unavailable_fanout"&&(h.add(a.id),c.push(a.id))});if(c.length>0)for(b=0;b<c.length;b+=i){a=c.slice(b,b+i);d("WAWebSendNonMessageDataRequest").sendPeerDataOperationRequest(d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND,{msgKeys:a})}}g.PLACEHOLDER_MESSAGES_IN_CHAT=h;g.inFlightPlaceholderResendRequests=b;g.handlePlaceholderMsgsSeen=a}),98);
__d("WAWebContactSyncApiConst",[],(function(a,b,c,d,e,f){a=500;b=20;f.CONTACT_SYNC_CHUNK_SIZE=a;f.SYNC_CONTACT_CHUNK_INTERVAL_SECONDS=b}),66);
__d("WAWebContactSyncApi",["Promise","WALogger","WANullthrows","WAPromiseDelays","WATimeUtils","WAWebAdvHandlerApi","WAWebApiContact","WAWebApiDeviceList","WAWebBizVerifiedNameAction","WAWebChangeProfilePicThumb","WAWebContactSyncApiConst","WAWebGetIdentityKeysJob","WAWebJidUtils","WAWebLocalStorage","WAWebPhashUtils","WAWebProfilePicConstants","WAWebSchemaContact","WAWebSetUsernameJob","WAWebStatusCollection","WAWebTextStatusGatingUtils","WAWebUpdateDisappearingModeForContact","WAWebUpdateLidMetadataJob","WAWebUpdateTextStatusForContact","WAWebUserPrefsKeys","WAWebUsernameGatingUtils","WAWebUsync","WAWebUsyncUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSyncDevice: skipping "," out of "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSyncDevice: error ",": ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleUsernameUsync: error ",": ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleLidSync: error ",": ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDisappearingMode: failed "," : ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSyncTextStatus: failed "," : ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to execute usync query"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["start contact sync for "," contacts in "," chunks, each chunk size: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["set contact sync refresh period: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid contact sync refresh period: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["mark "," contacts completed for contact sync"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSyncProfilePictures: failed "," : ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSyncStatus: failed "," : ",""]);u=function(){return a};return a}function a(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.contactIds;a=a.shouldDelayBetweenChunks;var c=d("WAWebContactSyncApiConst").CONTACT_SYNC_CHUNK_SIZE;d("WALogger").LOG(p(),b.length,Math.ceil(b.length/c),c).tags("contact-sync");for(var e=0;e<b.length;e+=c){var f=b.slice(e,e+c);a&&(yield d("WAPromiseDelays").delayMs(d("WAWebContactSyncApiConst").SYNC_CONTACT_CHUNK_INTERVAL_SECONDS*1e3));yield w({contactIds:f,shouldSyncDevice:!0})}});return v.apply(this,arguments)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.contactIds;a=a.shouldSyncDevice;if(e.length===0)return;var f=(yield N(e)),g=new(d("WAWebUsync").USyncQuery)().withContext("background").withMode("full").withBusinessProtocol().withPictureProtocol().withStatusProtocol();d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled()&&g.withTextStatusProtocol();a&&g.withDeviceProtocol();g.withDisappearingModeProtocol();g.withLidProtocol();d("WAWebUsernameGatingUtils").usernameUsyncEnabled()&&g.withUsernameProtocol();var i=f.filter(function(a){return!a.id.isLid()}).map(function(a){return d("WAWebWidFactory").toUserWid(a.id)}),j=new Map(i.map(function(a){var b=d("WAWebApiContact").getCurrentLid(a);return b==null?null:[a.toString(),b]}).filter(Boolean));yield (h||(h=b("Promise"))).all(f.map(function(a){var b=new(d("WAWebUsyncUser").USyncUser)().withId(a.id).withDeviceHash(String(a.hash));if(!a.id.isLid()){a=j.get(a.id.toString());a!=null&&b.withLid(a)}g.withUser(b)}));i=null;f=3;var k=10*Math.random();while(f-->0)try{i=(yield g.execute());var l=i.error.all;if(l){var m;k=(m=l.errorBackoff)!=null?m:10*Math.random();throw c("err")("syncContactList: error "+l.errorCode+": "+l.errorText)}else f=0}catch(a){f===0&&d("WALogger").ERROR(o()).verbose().devConsole(a).sendLogs("failed to execute usync query: "+a),yield d("WAPromiseDelays").delayMs(k*1e3)}if(i==null||i.error.all)return;m=i.refresh;l=[];for(f of Object.keys(m))l.push(m[f]);if(l.length>0){k=Math.min.apply(Math,l);P(k)}yield h.all([a?L(i):(h||(h=b("Promise"))).resolve(),B(i),D(i),d("WAWebUsernameGatingUtils").usernameUsyncEnabled()?F(i):(h||(h=b("Promise"))).resolve(),y(i),z(i),H(i),J(i)]);yield K(e)});return x.apply(this,arguments)}function y(a){var b=a.error.status;if(b){d("WALogger").WARN(u(),b.errorCode,b.errorText);return}a.list.map(function(a){var b=d("WAWebStatusCollection").StatusCollection.get(a.id);b&&a.status&&b.set({status:a.status})})}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled())return(h||(h=b("Promise"))).resolve();var c=a.error.text_status;if(c){d("WALogger").WARN(n(),c.errorCode,c.errorText);return}yield (h||(h=b("Promise"))).all(a.list.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.text_status){var b=a.text_status,c=b.text,e=b.emoji,f=b.ephemeralDurationSeconds;b=b.lastUpdateTime;yield d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(a.id,c,e,f,b)}});return function(b){return a.apply(this,arguments)}}()))});return A.apply(this,arguments)}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.error.status;if(c){d("WALogger").WARN(m(),c.errorCode,c.errorText);return}yield (h||(h=b("Promise"))).all(a.list.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.disappearing_mode&&(yield d("WAWebUpdateDisappearingModeForContact").updateDisappearingModeForContact(a.id,a.disappearing_mode.duration,a.disappearing_mode.t))});return function(b){return a.apply(this,arguments)}}()))});return C.apply(this,arguments)}function D(a){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.error.lid;b&&d("WALogger").WARN(l(),b.errorCode,b.errorText);a=[].concat(a.list,(b=a.sideList)!=null?b:[]).filter(function(a){a=a.lid;return typeof a==="string"});yield d("WAWebUpdateLidMetadataJob").createLidPnMappingsJob(a.map(function(a){var b=a.id;a=a.lid;return{lid:d("WAWebWidFactory").createUserWid(a),pn:b}}),!0)});return E.apply(this,arguments)}function F(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.error.username;if(b){d("WALogger").WARN(k(),b.errorCode,b.errorText);return}a=[].concat(a.list,(b=a.sideList)!=null?b:[]);b=a.map(function(a){return Object.prototype.hasOwnProperty.call(a,"username")?{userId:a.id,username:a.username}:{userId:a.id,username:void 0}});yield d("WAWebSetUsernameJob").setUsernamesJob(b)});return G.apply(this,arguments)}function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.list.filter(function(a){a=a.business;return Boolean(a)});yield d("WAWebBizVerifiedNameAction").handleVerifiedNameSync(a.map(function(a){var b=a.id;a=a.business.verifiedName;return{id:b,verifiedName:a}}))});return I.apply(this,arguments)}function J(a){var b=a.error.picture;if(b){d("WALogger").WARN(t(),b.errorCode,b.errorText);return}a.list.concat((b=a.sideList)!=null?b:[]).forEach(function(a){var b=a.id;a=a.picture;a==null&&d("WAWebChangeProfilePicThumb").changeProfilePicThumb(b,d("WAWebProfilePicConstants").ProfilePicCommand.Remove)})}function K(a){a=a.map(function(a){a=a.isLid()?d("WAWebJidUtils").toLidUserJid(a.user):d("WAWebJidUtils").toPhoneUserJid(a.user);return{id:a,isContactSyncCompleted:1}});d("WALogger").LOG(s(),a.length).tags("contact-sync");return d("WAWebSchemaContact").getContactTable().bulkCreateOrMerge(a)}function L(a){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.error.devices;b&&d("WALogger").WARN(j(),b.errorCode,b.errorText);b=a.list.filter(function(a){return a.devices&&a.devices.deviceList!=null&&a.devices.keyIndex!=null&&!("errorCode"in a.devices)}).map(function(a){return{wid:a.id,devices:a.devices}});d("WALogger").LOG(i(),a.list.length-b.length,a.list.length);yield d("WAWebGetIdentityKeysJob").getAndStoreIdentityKeys(b.map(function(a){return a.wid}));return d("WAWebAdvHandlerApi").handleADVDeviceSyncResult(b)});return M.apply(this,arguments)}function N(a){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield d("WAWebApiDeviceList").getDeviceIds(a));c=c.map(function(a){return a==null?[]:a.devices.map(function(b){return d("WAWebWidFactory").createDeviceWidFromDeviceListPk(a.id,b.id,b.isHosted)})});var e=(yield (h||(h=b("Promise"))).all(c.map(function(a){return a.length===0?"":d("WAWebPhashUtils").phashV2(a)})));c=a.map(function(a,b){return{id:a,hash:e[b]}});return c});return O.apply(this,arguments)}function P(a){if(Number.isNaN(a)||a<=d("WATimeUtils").HOUR_SECONDS){d("WALogger").WARN(r(),a).tags("contact-sync");return}d("WALogger").LOG(q(),a).tags("contact-sync");c("WANullthrows")(c("WAWebLocalStorage")).setItem(d("WAWebUserPrefsKeys").KEYS.CONTACT_SYNC_REFRESH,String(a))}g.syncContactListInChunks=a;g.syncContactList=w;g.handleUsernameSync=F}),98);
__d("WAWebOutgoingMessage",["WALogger","WAWebABProps","WAWebAddonGatingUtils","WAWebE2EProtoGenerator","WAWebE2EProtoUtils","WAWebFrontendMsgGetters","WAWebHandleMsgError","WAWebMessagePluginParseProtobuf","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebSendMsgTypes","WAWebVerifyProtobufMsgObjectKeys"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["generate proto: type:"," error:",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["generate proto: msgId:"," type:"," error:",""]);i=function(){return a};return a}var j=new Set([(a=d("WAWebMsgType")).MSG_TYPE.REACTION,a.MSG_TYPE.REACTION_ENC,a.MSG_TYPE.POLL_CREATION,a.MSG_TYPE.POLL_UPDATE,a.MSG_TYPE.COMMENT,a.MSG_TYPE.IMAGE,a.MSG_TYPE.VIDEO,a.MSG_TYPE.STICKER,a.MSG_TYPE.AUDIO,a.MSG_TYPE.PTT,a.MSG_TYPE.DOCUMENT,a.MSG_TYPE.MULTI_VCARD]),k=function(a,b){try{b=d("WAWebE2EProtoUtils").getMutableMessageProtobuf(b);d("WAWebVerifyProtobufMsgObjectKeys").verifyProtobufMessageObjectKeys(b);var c=d("WAWebABProps").getABPropConfigValue("all_outgoing_message_validataion_enabled")||j.has(a.data.type)||d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(a.data.type);c&&d("WAWebMessagePluginParseProtobuf").parseProtobuf({msgContext:"outgoing",messageProtobuf:b,baseMessage:a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Message?d("WAWebProcessBaseMsgInfo").msgToBaseMsgInfo(a.data):d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(a.data)})}catch(b){b instanceof d("WAWebHandleMsgError").MessageValidationError&&(d("WALogger").WARN(i(),a.data.id,a.data.type,b.stack).tags("messaging"),d("WALogger").WARN(h(),a.data.type,b.name).tags("messaging").sendLogs("outgoingMsg: "+b.name));throw b}},l="https://web.whatsapp.net",m=function(a){a.type===d("WAWebMsgType").MSG_TYPE.STICKER&&a.deprecatedMms3Url==null&&(a.deprecatedMms3Url=l);var b;if(d("WAWebFrontendMsgGetters").getAsMms(a)){var c=a.isUnsentPhoneMsg();b=c?{type:a.type}:a.avParams();a.type===d("WAWebMsgType").MSG_TYPE.STICKER&&!c&&b.url==null&&(b.url=l)}return d("WAWebE2EProtoGenerator").createMsgProtobuf(a,b||{})},n=function(a){var b=a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Message?m(a.data):d("WAWebE2EProtoGenerator").createAddonProtobuf(a.data);k(a,b);return b};b=function(a){return n({type:d("WAWebSendMsgTypes").SendMessageRecordType.Message,data:a})};c=function(a){return n({type:d("WAWebSendMsgTypes").SendMessageRecordType.Addon,data:a})};g.createOutgoingMessageProtobuf=n;g.createOutgoingMsgModelProtobuf=b;g.createOutgoingAddonMessageProtobuf=c}),98);
__d("WAWebICDCMetaApi",["WAWebAdvMetadataCreationFailureWamEvent","WAWebE2EProtoGenerator","WAWebIdentityIcdcApi","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebUserPrefsMeUser").getMeUser(),e,f;try{e=(yield d("WAWebIdentityIcdcApi").getICDCMeta(c))}catch(a){new(d("WAWebAdvMetadataCreationFailureWamEvent").AdvMetadataCreationFailureWamEvent)({advMetadataIsMe:!0}).commit();throw a}try{f=a.equals(c)?null:yield d("WAWebIdentityIcdcApi").getICDCMeta(a)}catch(a){new(d("WAWebAdvMetadataCreationFailureWamEvent").AdvMetadataCreationFailureWamEvent)({advMetadataIsMe:!1}).commit();throw a}d("WAWebE2EProtoGenerator").populateMessageContextInfo(b,e,f)});return h.apply(this,arguments)}g.populateICDCMeta=a}),98);
__d("WASentinel",["WAGetPendingMutation","WASentinelMutationSync","WASyncd","WASyncdConst","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(c("WASentinelMutationSync").getSentinelMutations());case 2:a=e.sent;e.next=5;return b("regeneratorRuntime").awrap(d("WAGetPendingMutation").bulkCreateSyncPendingMutationsInTransaction(a));case 5:return e.abrupt("return",d("WASyncd").markCollectionsForSync(Array.from(d("WASyncdConst").CollectionName.members())));case 6:case"end":return e.stop()}},null,this)}g["default"]=a}),98);
__d("WAWebAddMeContactAction",["WAWebJidUtils","WAWebLazyLoadedMainRequires","WAWebSchemaContact","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebLazyLoadedMainRequires").requireContactCollection()),c=d("WAWebJidUtils").toPhoneUserJid(a.user);yield d("WAWebSchemaContact").getContactTable().createOrMerge(c,{id:c});b.gadd(a)});return h.apply(this,arguments)}g.addMeToContacts=a}),98);
__d("WAWebSetWorkerLocalStorage",["WANullthrows","WAWebApiLocalStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLid()),b=d("WAWebUserPrefsMeUser").getMeDisplayName();a=[{key:"deviceJid",value:d("WAWebWidToJid").widToDeviceJid(d("WAWebUserPrefsMeUser").assertGetMe())},{key:"lidDeviceJid",value:a.toString()},{key:d("WAWebUserPrefsKeys").KEYS.ME_DISPLAY_NAME,value:b}];yield d("WAWebApiLocalStorage").updateLocalStorage(a)});return h.apply(this,arguments)}function e(){return d("WAWebApiLocalStorage").clearLocalStorage()}g.setWorkerLocalStorage=a;g.clearWorkerLocalStorage=e}),98);
__d("WAWebBackgroundSyncAction",["WALogger","WATimeUtils","WAWebABProps","WAWebPushNotificationsGatingUtils","WAWebPwaDocumentMetadataUtils","WAWebSetWorkerLocalStorage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa-background-sync-registration-update-failure: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa background sync is already unregistered"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa background sync unregistered successfully"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa background sync failed to unregister"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Start pwa background sync unregistration"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa background sync is already registered"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa background sync failed to register"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["pwa background sync registered successfully"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Start pwa background sync registration"]);p=function(){return a};return a}var q="background-sync";function a(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);try{var b,c,e;if(!d("WAWebPushNotificationsGatingUtils").canSupportPeriodicBackgroundSync()||!d("WAWebPwaDocumentMetadataUtils").isCurrentWebSessionInsidePwa())return;b=(yield (b=window.navigator.serviceWorker)==null?void 0:b.ready);if(!("periodicSync"in((c=b)!=null?c:[])))return;c=b==null?void 0:b.periodicSync;if(!c)return;b=(yield c.getTags==null?void 0:c.getTags());if(!b)return;e=(yield (e=window.navigator.permissions)==null?void 0:e.query==null?void 0:e.query({name:"background-sync"}));if((e==null?void 0:e.state)!=="granted")return;e=d("WAWebABProps").getABPropConfigValue("web_pwa_background_sync");if(!a&&e){yield d("WAWebSetWorkerLocalStorage").setWorkerLocalStorage();if(!b.includes(q)){d("WALogger").LOG(p());yield c.register==null?void 0:c.register(q,{minInterval:d("WAWebABProps").getABPropConfigValue("web_pwa_background_sync_min_interval_hours")*d("WATimeUtils").HOUR_MILLISECONDS});a=(yield c.getTags==null?void 0:c.getTags());(a==null?void 0:a.includes==null?void 0:a.includes(q))?d("WALogger").LOG(o()):d("WALogger").LOG(n())}else d("WALogger").LOG(m())}else if(b.includes(q)){d("WALogger").LOG(l());yield c.unregister==null?void 0:c.unregister(q);e=(yield c.getTags==null?void 0:c.getTags());(e==null?void 0:e.includes==null?void 0:e.includes(q))?d("WALogger").LOG(k()):d("WALogger").LOG(j())}else d("WALogger").LOG(i())}catch(a){d("WALogger").ERROR(h(),a.stack).devConsole(a).sendLogs("pwa-background-sync-registration-update-failure")}});return r.apply(this,arguments)}g.updatePeriodicBackgroundSyncRegistration=a}),98);
__d("WAWebCryptoEncryptionSaltHelper",["Promise","WALogger","WAWebLogoutReasonConstants","WAWebSocketLogoutJob","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB ENC CRITICAL ERROR] null returned for local enc salt"]);i=function(){return a};return a}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=128,c=!!d("WAWebUserPrefsMeUser").getMaybeMeUser(),e=null;c||(e=new Uint8Array(a),self.crypto.getRandomValues(e),e=btoa(String.fromCharCode.apply(String,Array.from(new Uint8Array(e)))),yield d("WAWebUserPrefsMultiDevice").setWebEncSalt(e));e=d("WAWebUserPrefsMultiDevice").getWebEncSalt();e==null&&(d("WALogger").ERROR(i()),void d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.MissingEncSalt));e=Uint8Array.from(atob(e),function(a){return a.charCodeAt(0)});return(h||(h=b("Promise"))).resolve(e)});return j.apply(this,arguments)}function c(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebUserPrefsMultiDevice").setWebEncSalt(null)});return k.apply(this,arguments)}g.getOrGenSalt=a;g.deleteSalt=c}),98);
__d("WAWebCryptoEncKeyHelper",["Promise","WAWebCmd","WAWebCryptoEncryptionSaltHelper","WAWebDbEncryptionKey","WAWebInvocationInterface","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(i=d("WAWebCryptoEncryptionSaltHelper").getOrGenSalt());var a=(yield i);if(!a||a.constructor!==Uint8Array)return;return d("WAWebDbEncryptionKey").DbEncKeyStore.init(a)});return j.apply(this,arguments)}function c(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(i=d("WAWebCryptoEncryptionSaltHelper").getOrGenSalt());var a=(yield i);if(!a||a.constructor!==Uint8Array)return;d("WAWebInvocationInterface").get().initDatabaseEncnKey(a)});return k.apply(this,arguments)}function e(a){return d("WAWebInvocationInterface").get().generateFinalDbEncryptionAndFtsKey(a)}function f(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all([d("WAWebDbEncryptionKey").DbEncKeyStore.deleteKeys(),d("WAWebInvocationInterface").get().deleteDbEncKeyCache()])});return l.apply(this,arguments)}d("WAWebCmd").Cmd.on("logout",function(){i=(h||(h=b("Promise"))).resolve(null)});g.initEncSalt=a;g.initEncSaltForInvoker=c;g.generateFinalDbEncryptionAndFtsKeyForInvoker=e;g.deleteEncKeysAndCache=f}),98);
__d("WAWebDeleteAllCacheStorage",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g;function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=window.caches;if(a==null)return;var c=(yield a.keys());yield (g||(g=b("Promise"))).all(c.map(function(b){return a["delete"](b)}))});return h.apply(this,arguments)}f["default"]=a}),66);
__d("WAWebFeatureDetectionDetermineIncognito",["Promise","WACustomError","WAFilteredCatch","WALogger","WAPromiseTimeout","WAWebIndexedDB","WAWebLocalStorage","WAWebUA"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["promiseUtil:determineIncognito failed check: ",""]);i=function(){return a};return a}function a(){var a=new(h||(h=b("Promise")))(function(a){function b(){a(!1)}if(self.requestFileSystem)self.requestFileSystem(window.TEMPORARY,1,b,function(b){a(b.name==="SecurityError")});else if(c("WAWebIndexedDB")){var e=c("WAWebIndexedDB").open("pb_detect");e?(e.onsuccess=b,e.onerror=function(b){b.preventDefault(),window.InvalidStateError?a(b instanceof window.InvalidStateError):a(!0)}):b()}else d("WAWebUA").UA.isTrident?a(!0):b()}).then(function(a){if(a)return a;if(!c("WAWebLocalStorage"))return!1;try{c("WAWebLocalStorage").setItem("INCOG","0");c("WAWebLocalStorage").removeItem("INCOG");return!1}catch(a){if(a.name==="QuotaExceededError")return!0;throw a}});return d("WAPromiseTimeout").promiseTimeout(a,100,"detectIncognitoTimeout")["catch"](d("WAFilteredCatch").filteredCatch(d("WACustomError").TimeoutError,function(){return!1}))["catch"](function(a){d("WALogger").WARN(i(),String(a)).devConsole(a).sendLogs("incog-throw");return!1})}g["default"]=a}),98);
__d("WAWebLogoutReason",["WAWebLogoutReasonConstants"],(function(a,b,c,d,e,f,g){var h=null,i=null;function a(a){switch(a){case d("WAWebLogoutReasonConstants").LogoutReason.ClientFatalError:return d("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.CLIENT_FATAL;case d("WAWebLogoutReasonConstants").LogoutReason.SyncdFailure:case d("WAWebLogoutReasonConstants").LogoutReason.SyncdErrorDuringBootstrap:case d("WAWebLogoutReasonConstants").LogoutReason.AccountSyncError:case d("WAWebLogoutReasonConstants").LogoutReason.SyncdTimeout:case d("WAWebLogoutReasonConstants").LogoutReason.CriticalSyncTimeout:return d("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.SYNC_FAIL;case d("WAWebLogoutReasonConstants").LogoutReason.HistorySyncTimeout:return d("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.INITIAL_HISTORY_SYNC_TIMEOUT;case d("WAWebLogoutReasonConstants").LogoutReason.AccountLocked:return d("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.ACCOUNT_LOCKED;default:return null}}function b(a){h=a}function c(a){i=a}function e(){return h}function f(){return i}g.getErrorCodeFromLogoutReason=a;g.setPrevLogoutReasonCode=b;g.setPrevCustomLogoutMessage=c;g.getPrevLogoutReasonCode=e;g.getPrevCustomLogoutMessage=f}),98);
__d("WAWebLruMediaStorageUtils",["invariant","WAWebIdb","WAWebStorage","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){var i="lru-media-storage-idb",j=null;function a(){var a=new(c("WAWebIdb"))(i);j=new(d("WAWebStorage").Storage)(a)}function e(){j!=null||h(0,56300);return j}function f(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j==null)throw c("err")("[lru-media-storage-idb] Storage should be created first before being destroyed");try{yield j.purge()}finally{j=null}});return k.apply(this,arguments)}a();g.DATABASE_NAME=i;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebMediaArrayBufferCacheStore",["WAWebKeyValueCacheStore"],(function(a,b,c,d,e,f,g){var h={ignoreSearch:!0,ignoreMethod:!0,ignoreVary:!0};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b,i,j,{encodeKey:k,matchOptions:h})||this}return b}(c("WAWebKeyValueCacheStore"));function i(a){return new Response(a)}function j(a){return a.arrayBuffer()}function k(a,b){a=encodeURIComponent(a);b=encodeURIComponent(b);return"https://_media_cache_v2_.whatsapp.com/"+b+"_"+a}g["default"]=a}),98);
__d("WAWebLruMediaStorage",["WAWebLruMediaStorageUtils","lodash"],(function(a,b,c,d,e,f,g){a=2;b=c("lodash").once(function(){return d("WAWebLruMediaStorageUtils").getStorage().initialize()});g.versionToRollout=a;g.initialize=b}),98);
__d("WAWebMediaLruIdbStoreUtils",["Promise","WAWebAbstractStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this)||this;d.$IdbStore1=b;d.$IdbStore2=c;return d}var d=c.prototype;d.doGet=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$IdbStore1();return this.$IdbStore2.get(a)});function c(b){return a.apply(this,arguments)}return c}();d.doQueryByIndex=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.$IdbStore1();return this.$IdbStore2.all({limit:b.limit,index:[a]})});function c(b,c){return a.apply(this,arguments)}return c}();d.doGetAll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.$IdbStore1();return this.$IdbStore2.all()});function c(){return a.apply(this,arguments)}return c}();d.doPut=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this;yield this.$IdbStore1().then(function(){return c.$IdbStore2.createOrReplace(b)});return b});function c(b,c){return a.apply(this,arguments)}return c}();d.doDel=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$IdbStore1();return this.$IdbStore2.remove(a)});function c(b){return a.apply(this,arguments)}return c}();d.doCount=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.$IdbStore1();return this.$IdbStore2.count()});function c(){return a.apply(this,arguments)}return c}();d.doClear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.$IdbStore1();return this.$IdbStore2.clear(!0)});function c(){return a.apply(this,arguments)}return c}();d.doOpen=function(){return this.$IdbStore1()};d.doClose=function(){return(h||(h=b("Promise"))).resolve()};return c}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebSchemaLruMediaArrayBuffer",["WAWebLruMediaStorageUtils","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="id",i="data";a="lru-media-array-buffer";b=d("WAWebStorageMutationBuilder").columnBuilder();c=b.addColumn;e=b.addUserDefinedPrimaryKey;d("WAWebLruMediaStorageUtils").getStorage().add(a).version(d("WAWebLruMediaStorageUtils").getStorage().versions.version(0),[e(h),c(i)]).view(function(a){a={id:a[h],data:a[i]};return a});f=d("WAWebLruMediaStorageUtils").getStorage().table(a);g.storePrimaryIndex=h;g.storeDataIndex=i;g.IdbArrayBufferTable=f}),98);
__d("WAWebMediaArrayBufferIdbStore",["Promise","WAWebAbstractStore","WAWebLruMediaStorage","WAWebMediaLruIdbStoreUtils","WAWebSchemaLruMediaArrayBuffer","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){b=a.call(this)||this;b.$ArrayBufferIdbStore1=new(c("WAWebMediaLruIdbStoreUtils"))(d("WAWebLruMediaStorage").initialize,d("WAWebSchemaLruMediaArrayBuffer").IdbArrayBufferTable);return b}var f=e.prototype;f.doGet=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$ArrayBufferIdbStore1.get(a));return!a?null:a.data});function c(b){return a.apply(this,arguments)}return c}();f.doQueryByIndex=function(a,b){throw c("err")("Not implemented. Actual Arraybuffer store does not need it.")};f.doGetAll=function(){throw c("err")("Not implemented. Actual Arraybuffer store does not need it.")};f.doPut=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.$ArrayBufferIdbStore1.put(a,{id:a,data:b}));return a.data});function c(b,c){return a.apply(this,arguments)}return c}();f.doDel=function(a){return this.$ArrayBufferIdbStore1.del(a)};f.doCount=function(){return this.$ArrayBufferIdbStore1.count()};f.clear=function(){return this.$ArrayBufferIdbStore1.clear()};f.doOpen=function(){return(h||(h=b("Promise"))).resolve()};f.doClose=function(){return(h||(h=b("Promise"))).resolve()};return e}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebMediaStoreDummyImpl",["Promise","WAWebAbstractStore"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.get=function(a){return(h||(h=b("Promise"))).resolve()};d.queryByIndex=function(a,c){return(h||(h=b("Promise"))).resolve([])};d.getAll=function(){return(h||(h=b("Promise"))).resolve([])};d.put=function(a,c){return(h||(h=b("Promise"))).resolve(c)};d.del=function(a){return(h||(h=b("Promise"))).resolve()};d.count=function(){return(h||(h=b("Promise"))).resolve(0)};d.clear=function(){return(h||(h=b("Promise"))).resolve()};d.setMaxSize=function(a){return(h||(h=b("Promise"))).resolve()};return c}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebSchemaLruMediaMetaInfo",["WAWebLruMediaStorageUtils","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){a="id";b="timestamp";c="size";e="lru-media-meta-info";f=d("WAWebStorageMutationBuilder").columnBuilder();var h=f.addColumn,i=f.addUserDefinedPrimaryKey;f=f.addIndex;(d=d("WAWebLruMediaStorageUtils")).getStorage().add(e).version(d.getStorage().versions.version(1),[i(a),h(b),f(b)]).version(d.getStorage().versions.version(2),[h(c)]).view(function(a){a={id:a.id,timestamp:a.timestamp,size:a.size||0};return a});i=d.getStorage().table(e);g.metaInfoPrimaryIndex=a;g.metaInfoDateIndex=b;g.metaInfoSizeIndex=c;g.IdbMetaInfoTable=i}),98);
__d("WAWebSizeLruObjectStore",["Promise","WALogger","WANullthrows","WAPromiseLoop","WAPromiseQueue","WAShiftTimer","WAWebAbstractStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid size in index ",": ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while purging during setMaxSize: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while purging: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["SizeLRUObjectStore: _dispose error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["SizeLruObjectStore: _purge error: No row returned but currentSize (",") > maxSize (","). Row count is "," (may be out of date)."]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(e,f){var g;g=a.call(this)||this;g._queueMap=new(d("WAPromiseQueue").PromiseQueueMap)();g._purge=function(){if(g._pendingPurgePromise)return g._pendingPurgePromise;var a=g.open().then(function(){return d("WAPromiseLoop").promiseLoop(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=function(){g._pendingPurgePromise=null,a()},f=g.getCurrentSize();if(f==null||f<=g._maxSize){e();return}f=(yield g.queryOneByIndex(g._dateIndex));var i=g.getCurrentSize(),j=g._maxSize;if(i==null||i<=j){e();return}if(f==null){b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield g.count());d("WALogger").WARN(m(),i,j,a).sendLogs("size-lru-store-invalid-empty")})();return(h||(h=b("Promise"))).reject(c("err")("Query returned no result but currentSize > maxSize"))}e=f[g._primaryIndex];return g.del(e)});return function(b){return a.apply(this,arguments)}}())});return g._pendingPurgePromise=a};g._schedulePurge=function(){g._purgeTimer.debounce(2*1e3)};g.doPut=function(a,d){return g._queueMap.enqueue(a,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d[g._primaryIndex]!==a)throw c("err")("The key you provide does not match.");var b=(yield g._store.get(a));b=b==null?0:g._getSize(b);var e=g._getSize(d);e=e-b;b=(yield g._store.put(a,d));g._currentSize=c("WANullthrows")(g.getCurrentSize())+e;g._schedulePurge();return b}))};g.doDel=function(a){return g._queueMap.enqueue(a,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield g._store.get(a));if(b==null)return;try{yield g._dispose(a,b)}catch(a){d("WALogger").WARN(l(),a.message).sendLogs("size-lru-store-dispose-error");throw a}yield g._store.del(a);g._currentSize=c("WANullthrows")(g.getCurrentSize())-g._getSize(b)}))};g._store=e;g._primaryIndex=f.primaryIndex;g._dateIndex=f.dateIndex;g._sizeIndex=f.sizeIndex;if(f.maxSize<0)throw c("err")("Cannot set max size to a negative number");g._maxSize=Math.floor(f.maxSize);g._dispose=f.dispose;g._purgeTimer=new(d("WAShiftTimer").ShiftTimer)(function(){g._purge()["catch"](function(a){d("WALogger").WARN(k(),a.message)})});return g}var f=e.prototype;f.getCurrentSize=function(){return this._currentSize};f.getMaxSize=function(){return this._maxSize};f.setMaxSize=function(a){if(a<0)return(h||(h=b("Promise"))).reject(c("err")("Cannot set size to a negative number"));this._maxSize=Math.floor(a);this._purgeTimer.cancel();return this._purge()["catch"](function(a){d("WALogger").WARN(j(),a.message)})};f.putObject=function(a){var b=a[this._primaryIndex];return this.put(b,a)};f._getSize=function(a){a=a[this._sizeIndex];if(typeof a!=="number"||a<0){d("WALogger").WARN(i(),this._sizeIndex,a);return 0}return a};f.doGet=function(a){return this._store.get(a)};f.queryOneByIndex=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this._store.queryByIndex(a,{limit:1}));return a.length===0?null:a[0]});function c(b){return a.apply(this,arguments)}return c}();f.doQueryByIndex=function(a,b){return this._store.queryByIndex(a,b)};f.doGetAll=function(){return this._store.getAll()};f.doClear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this._purgeTimer.cancel(),yield this._store.clear(),this._currentSize=0});function c(){return a.apply(this,arguments)}return c}();f.doCount=function(){return this._store.count()};f.doOpen=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;yield this._store.open();if(this._currentSize!=null)return;var b=(yield this._store.doGetAll());this._currentSize=b.reduce(function(b,c){return b+a._getSize(c)},0)});function c(){return a.apply(this,arguments)}return c}();f.doClose=function(){this._currentSize=null;return this._store.close()};return e}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebMediaStoreMetaInfo",["WAWebLruMediaStorage","WAWebMediaLruIdbStoreUtils","WAWebSchemaLruMediaMetaInfo","WAWebSizeLruObjectStore"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;b={primaryIndex:(f=d("WAWebSchemaLruMediaMetaInfo")).metaInfoPrimaryIndex,dateIndex:f.metaInfoDateIndex,sizeIndex:f.metaInfoSizeIndex,maxSize:b,dispose:e};e=new(c("WAWebMediaLruIdbStoreUtils"))(d("WAWebLruMediaStorage").initialize,f.IdbMetaInfoTable);return a.call(this,e,b)||this}return b}(c("WAWebSizeLruObjectStore"));g["default"]=a}),98);
__d("WAWebMediaStoreLruImpl",["Promise","WALogger","WANullthrows","WAPromiseQueue","WAStorageEstimator","WAWeb-dexie","WAWebAbstractStore","WAWebMediaGatingUtils","WAWebMediaStoreMetaInfo","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["LruMediaStore: encounter QuotaExceededError, thus shrink the size of LruMediaStore"]);i=function(){return a};return a}var j=3e7;a=function(a){babelHelpers.inheritsLoose(e,a);function e(e){var f;f=a.call(this)||this;f._queueMap=new(d("WAPromiseQueue").PromiseQueueMap)();f.updateMaxSizeInterval=null;f._dispose=function(a,b){return f._bufferStore.del(a)};f.doPut=function(a,e){return f._queueMap.enqueue(a,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(e.byteLength>f.getMaxSize())return e;if(e.byteLength>j)return e;var b={id:a,timestamp:new Date().getTime(),size:e.byteLength};try{yield f._metaInfoStore.putObject(b);return f._bufferStore.put(a,e)}catch(a){if(a instanceof c("WAWeb-dexie").AbortError&&a.message.includes("QuotaExceededError")){d("WALogger").LOG(i());f.setMaxSize(c("WANullthrows")(f.getCurrentSize())/2);return}throw a}}))};f.doDel=function(a){return f._queueMap.enqueue(a,function(){return f._metaInfoStore.del(a)})};f._updateMaxSize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(d("WAWebMediaGatingUtils").isStoreQuotaManagerEnabled())return;var b=(yield d("WAStorageEstimator").estimateStorage());if(!b.success){f._clearStoreForThisSession();return}var c=f.getCurrentSize();if(c==null)return;b=b.value;var e=b.quota;b=b.usage;b=e-b;e=f._calculateTargetedBufferSize(e);if(b>e){a&&f.setMaxSize(b);return}a=e-b;if(c<a){f._clearStoreForThisSession();return}f.setMaxSize(c-a)});return function(b){return a.apply(this,arguments)}}();var g=e.maxSize;e=e.arrayBufferStore;f._bufferStore=e;f._metaInfoStore=new(c("WAWebMediaStoreMetaInfo"))(g,f._dispose);d("WAWebMediaGatingUtils").isStoreQuotaManagerEnabled()||(f.updateMaxSizeInterval=self.setInterval(f._updateMaxSize,60*1e3));return f}var f=e.prototype;f.doGet=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._bufferStore.get(a));b!=null&&this.put(a,b);return b});function c(b){return a.apply(this,arguments)}return c}();f.doClear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this._bufferStore.clear();return this._metaInfoStore.clear()});function c(){return a.apply(this,arguments)}return c}();f.doCount=function(){return this._metaInfoStore.count()};f.doOpen=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all([this._metaInfoStore.open(),this._bufferStore.open()])});function c(){return a.apply(this,arguments)}return c}();f.doClose=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all([this._metaInfoStore.close(),this._bufferStore.close()])});function c(){return a.apply(this,arguments)}return c}();f.getCurrentSize=function(){return this._metaInfoStore.getCurrentSize()};f.getMaxSize=function(){return this._metaInfoStore.getMaxSize()};f.setMaxSize=function(a){return this._metaInfoStore.setMaxSize(a)};f._calculateTargetedBufferSize=function(a){a=Math.floor(a*.01);if(a<1e8)return 1e8;return a>5e8?5e8:a};f._clearStoreForThisSession=function(){this.setMaxSize(0),this.updateMaxSizeInterval&&(self.clearInterval(this.updateMaxSizeInterval),this.updateMaxSizeInterval=null)};return e}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebSerializeError",["WAWebNormalizeStack"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebNormalizeStack").normalizeError(a),c=b.name,e=b.message;b.stack;b=babelHelpers.objectWithoutPropertiesLoose(b,["name","message","stack"]);a=d("WAWebNormalizeStack").normalizeStack(a,!0);b=Object.keys(b).length===0?"":" "+JSON.stringify(b,function(a,b){return a&&typeof b==="object"?String(b):b});return c+" - "+(e||"")+b+"\n"+a}g["default"]=a}),98);
__d("WAWebStoreQuotaManager",["WAStorageEstimator","WAWebABProps","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=1024*1024*1024;a=new Map([["lru-media-store",{getQuota:function(a){return a<=d("WAWebABProps").getABPropConfigValue("web_browser_quota_threshold")*h?Math.min(a*.2,d("WAWebABProps").getABPropConfigValue("web_browser_min_storage_quota")*h):.2*a}}]]);c=function(){function a(a){this.$1=a}var c=a.prototype;c.getQuotaForStore=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAStorageEstimator").estimateStorage());if(!b.success)return 0;b=b.value.quota;return Math.floor((a=(a=this.$1.get(a))==null?void 0:a.getQuota(b))!=null?a:0)});function c(b){return a.apply(this,arguments)}return c}();return a}();e=new c(a);g.storeConfigs=a;g.StoreQuotaManager=c;g.storeQuotaManager=e}),98);
__d("WAWebMediaStore",["WALogger","WAWebIndexedDB","WAWebMediaArrayBufferCacheStore","WAWebMediaArrayBufferIdbStore","WAWebMediaGatingUtils","WAWebMediaStoreDummyImpl","WAWebMediaStoreLruImpl","WAWebMiscErrors","WAWebSerializeError","WAWebStoreQuotaManager","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n            Failed to initialize media store! Falling back to fake (no-op) storage. Error:\n            ","\n          "]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n            There was a security error attempting to open the media storage.             This likely indicates a permissions error. Falling back to fake             (no-op) storage.\n          "],["\n            There was a security error attempting to open the media storage. \\\n            This likely indicates a permissions error. Falling back to fake \\\n            (no-op) storage.\n          "]);i=function(){return a};return a}a=function(){function a(){this._getBackingStore=c("lodash").once(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield j());if(a!=null){yield a.open();return a}}catch(a){if(a.name==="SecurityError")d("WALogger").WARN(i());else if(a instanceof d("WAWebMiscErrors").DbOnLogoutAbort)throw a;else d("WALogger").ERROR(h(),c("WAWebSerializeError")(a)).verbose().devConsole(a).sendLogs("Failed to initialize media store")}return new(c("WAWebMediaStoreDummyImpl"))()}))}var e=a.prototype;e.setMaxSize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._getBackingStore());b.setMaxSize(a)});function c(b){return a.apply(this,arguments)}return c}();e.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._getBackingStore());return b.get(a)});function c(b){return a.apply(this,arguments)}return c}();e.queryByIndex=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield this._getBackingStore());return c.queryByIndex(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();e.getAll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._getBackingStore());return a.getAll()});function c(){return a.apply(this,arguments)}return c}();e.put=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield this._getBackingStore());return c.put(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();e.del=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._getBackingStore());yield b.del(a)});function c(b){return a.apply(this,arguments)}return c}();e.count=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._getBackingStore());return a.count()});function c(){return a.apply(this,arguments)}return c}();e.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._getBackingStore());yield a.clear()});function c(){return a.apply(this,arguments)}return c}();e.open=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._getBackingStore());yield a.open()});function c(){return a.apply(this,arguments)}return c}();e.close=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._getBackingStore());yield a.close()});function c(){return a.apply(this,arguments)}return c}();return a}();function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=l();if(a==null)return null;var b=d("WAWebMediaGatingUtils").isStoreQuotaManagerEnabled()?yield d("WAWebStoreQuotaManager").storeQuotaManager.getQuotaForStore("lru-media-store"):Number.MAX_SAFE_INTEGER;return new(c("WAWebMediaStoreLruImpl"))({maxSize:b,arrayBufferStore:a})});return k.apply(this,arguments)}function l(){if(c("WAWebIndexedDB")!=null){var a=new(c("WAWebMediaArrayBufferIdbStore"))("media_lru_buffer");return"caches"in self?new(c("WAWebMediaArrayBufferCacheStore"))("lru-media-array-buffer-cache"):a}return null}e=new a();g.MediaStore=a;g.LruMediaStore=e}),98);
__d("WAWebQplStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="qpl-storage",k=null;function a(){var a=new(c("WAWebIdb"))(j);k=new(d("WAWebStorage").Storage)(a)}function e(){k!=null||h(0,56368);return k}function f(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[qpl-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebQplStorageVersions",["WAWebQplStorageUtils"],(function(a,b,c,d,e,f,g){b=0;function a(){return d("WAWebQplStorageUtils").getStorage().versions.version(0)}g.versionToRollout=b;g.qplEventsCreateTable=a}),98);
__d("WAWebSchemaQplEvents",["WAWebQplStorageUtils","WAWebQplStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey;function a(){d("WAWebQplStorageUtils").getStorage().add("qpl-events").version(d("WAWebQplStorageVersions").qplEventsCreateTable(),[i("id"),h("marker_id"),h("instance_id"),h("action_id"),h("sample_rate"),h("method"),h("duration_ns"),h("points"),h("metadata"),h("marker_type"),h("flags"),h("annotations"),h("annotations_double"),h("annotations_int"),h("annotations_bool"),h("annotations_string_array"),h("annotations_double_array"),h("annotations_int_array"),h("annotations_bool_array"),h("app_version"),h("app_build_number"),h("wa_ab_key2")]).view(function(a){return a})}function b(){return d("WAWebQplStorageUtils").getStorage().table("qpl-events")}g.addTable=a;g.getTable=b}),98);
__d("WAWebQplStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebQplStorageUtils","WAWebSchemaQplEvents","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}var i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebDbRolloutUtil").loadSchemaVersions();i==null&&(d("WAWebQplStorageUtils").createStorage(),d("WAWebSchemaQplEvents").addTable(),i=d("WAWebQplStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).tags("sad").sendLogs("Failed to initialize qpl storage");throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebQplStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebQplStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}g.getQplEventsTable=d("WAWebSchemaQplEvents").getTable;g.initialize=a;g.destroy=e}),98);
__d("WAWebSocketConstants",[],(function(a,b,c,d,e,f){a={OPENING:"OPENING",PAIRING:"PAIRING",UNPAIRED:"UNPAIRED",UNPAIRED_IDLE:"UNPAIRED_IDLE",CONNECTED:"CONNECTED",TIMEOUT:"TIMEOUT",CONFLICT:"CONFLICT",UNLAUNCHED:"UNLAUNCHED",PROXYBLOCK:"PROXYBLOCK",TOS_BLOCK:"TOS_BLOCK",SMB_TOS_BLOCK:"SMB_TOS_BLOCK",DEPRECATED_VERSION:"DEPRECATED_VERSION",SCREEN_LOCKED:"SCREEN_LOCKED"};b={DISCONNECTED:"DISCONNECTED",SYNCING:"SYNCING",RESUMING:"RESUMING",CONNECTED:"CONNECTED"};c={OPEN:"OPEN",CLOSED:"CLOSED"};f.SOCKET_STATE=a;f.SOCKET_STREAM=b;f.WATCHED_SOCKET_STATE=c}),66);
__d("WAWebUnpairDeviceJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebCommsWapMd","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("unpairResponse",function(a){a.assertTag("iq");a.assertFromServer();var b=a.attrString("type"),c=200;b==="error"&&(c=a.child("error").attrInt("code"));return{status:c}});function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"set",id:b.generateId(),xmlns:"md"},b.wap("remove-companion-device",{jid:d("WAWebCommsWapMd").DEVICE_JID(d("WAWebUserPrefsMeUser").assertGetMe()),reason:b.CUSTOM_STRING(a)}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));return a.success?{status:a.result.status}:{status:a.errorCode}});return i.apply(this,arguments)}g.unpairDevice=a}),98);
__d("WAWebUserPrefsClearLocalState",["Promise","WAWebLoggerImpl","WAWebPermanentStorage","WAWebTemporaryStorage","WAWebUserPrefsCookie","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebUserPrefsTypes","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.PRESERVED_USER_KEYS,{storage:c("WAWebPermanentStorage")});a=a instanceof Array?[].concat(d("WAWebUserPrefsTypes").LS_PRESERVE_KEYS,a.filter(function(a){return typeof a==="string"})):d("WAWebUserPrefsTypes").LS_PRESERVE_KEYS;return c("WAWebUserPrefsStore").getKeys(c("WAWebPermanentStorage"),a,!0)}function j(){return c("WAWebUserPrefsStore").getKeys(c("WAWebTemporaryStorage"),d("WAWebUserPrefsTypes").TS_PRESERVE_KEYS,!0)}function a(){c("WAWebTemporaryStorage").clear(j())}function e(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=i();a=[c("WAWebTemporaryStorage").clear(j()),c("WAWebPermanentStorage").clear(a)];c("gkx")("26258")&&a.push(d("WAWebLoggerImpl").Logger.clearLogs());d("WAWebUserPrefsCookie").clearCookies();yield (h||(h=b("Promise"))).all(a)});return k.apply(this,arguments)}g.clearAllTemporaryStorageData=a;g.clearAllLocalState=e}),98);
__d("WAWebSocketModel",["Promise","WAComms","WALogger","WAPromiseDelays","WAPromiseTimeout","WASentinel","WAWebABProps","WAWebABPropsCache","WAWebAddMeContactAction","WAWebBackendErrors","WAWebBackgroundSyncAction","WAWebBaseModel","WAWebBuildConstants","WAWebCmd","WAWebConnModel","WAWebCrashlog","WAWebCryptoEncKeyHelper","WAWebCryptoEncryptionSaltHelper","WAWebDeleteAllCacheStorage","WAWebFeatureDetectionDetermineIncognito","WAWebFtsClient","WAWebFtsStorage","WAWebInvocationInterface","WAWebJobsStorage","WAWebLazyLoadedMainRequires","WAWebLocalStorage","WAWebLogoutReason","WAWebLogoutReasonConstants","WAWebLruMediaStorageUtils","WAWebMediaStore","WAWebMiscBrowserUtils","WAWebMiscErrors","WAWebModelStorage","WAWebOffdStorage","WAWebPonyfillsUrlSearchParams","WAWebQplStorage","WAWebServerPropsModel","WAWebSignalStorage","WAWebSocketConstants","WAWebSubscribePushManagerAction","WAWebSyncBootstrap","WAWebUnpairDeviceJob","WAWebUpdater","WAWebUserPrefsAppStateSync","WAWebUserPrefsClearLocalState","WAWebUserPrefsGeneral","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebUserPrefsStore","WAWebWorkerStorage","asyncToGeneratorRuntime","cr:5291","err","gkx","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Chatd login cookie delete request failed with ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[CRITICAL] unpairDevice failed with error, preoceed with local logout \n",""],["[CRITICAL] unpairDevice failed with error, preoceed with local logout \\n",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:multi-device logout failed with error code ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearState error ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearState failed due to DB operations aborted: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearState error ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearState failed due to DB operations aborted: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearState"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearAllLocalState error ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:destroySignal error ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearRegistrationInfo error ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:setMe error ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:setUnknownId error ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:clearState error ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ws2] moving to main screen from onCriticalSyncDone"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ephemeral Drop: ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:stream change: ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:state change: ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MD] ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws socket id:      ",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["wd online:         ",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws state           ",""]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws:summary --------------------------------"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2: [logout error] sentinelPromise or sendCurrentLogoutPromise timed out with ",""]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2: [logout error] sendCurrentLogoutPromise errored with ",""]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2: multi-device logout did not manage to send sentinel patch"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["ws2:user logged out"]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["MD WS2 logout debug: \n ",""],["MD WS2 logout debug: \\n ",""]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["destroyStorage: failed with error ",""]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose(["destroyStorage: failed with error ",""]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose(["Requesting chatd login cookie delete during logout"]);M=function(){return a};return a}function N(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ws2] moving to main screen from main_stream_mode_ready"]);N=function(){return a};return a}function O(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ws2] did not meet conditions to move to main screen"]);O=function(){return a};return a}function P(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ws2] observed main_stream_mode_ready"]);P=function(){return a};return a}function Q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ws2] observed on_critical_sync_done"]);Q=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.socket=d("WAWebBaseModel").session(),c.launchGeneration=d("WAWebBaseModel").session(0),c.backoffGeneration=d("WAWebBaseModel").session(0),c.hasSynced=d("WAWebBaseModel").session(),c.state=d("WAWebBaseModel").session(d("WAWebSocketConstants").SOCKET_STATE.UNLAUNCHED),c.stream=d("WAWebBaseModel").session(d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED),c.canSend=d("WAWebBaseModel").session(),c.sendQueue=d("WAWebBaseModel").session(),c.sendHash=d("WAWebBaseModel").session(),c.cancelHash=d("WAWebBaseModel").session(),c.doubleAckHash=d("WAWebBaseModel").session(),c.sequence=d("WAWebBaseModel").session(0),c.shortTagBase=d("WAWebBaseModel").session(),c.socketWatcher=d("WAWebBaseModel").session(),c.refWatcher=d("WAWebBaseModel").session(),c.pendingPhoneReqs=d("WAWebBaseModel").session(0),c.isIncognito=d("WAWebBaseModel").session(),c.logoutMutex=d("WAWebBaseModel").session(0),c.retryTimestamp=d("WAWebBaseModel").session(),c.launched=d("WAWebBaseModel").session(),c.mustExitLoop=d("WAWebBaseModel").session(),c.syncTag=d("WAWebBaseModel").session(),c.lastPhoneMessage=d("WAWebBaseModel").session(),c.shouldForceReconnect=d("WAWebBaseModel").session(!1),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){var a=this,e;this.sendQueue=[];this.sendHash={};this.cancelHash={};this.doubleAckHash={};this.listenTo(this,"change:state",this.$SocketImpl1.bind(this));this.listenTo(this,"change:stream",this.$SocketImpl2.bind(this));d("WAPromiseDelays").delayMs(0).then(c("WAWebFeatureDetectionDetermineIncognito")).then(function(b){a.isIncognito=b});this.listenTo((e=d("WAWebCmd")).Cmd,"log_socket_summary",this.summary);this.listenTo(e.Cmd,"set_socket_state",function(b){a.state=b});this.listenTo(e.Cmd,"open_socket_stream",function(){a.openStream(),a.hasSynced&&a.set({stream:d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED})});this.listenTo(e.Cmd,"socket_stream_disconnected",function(){a.set({stream:d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED})});this.listenTo(e.Cmd,"on_critical_sync_done",function(){d("WALogger").LOG(Q()),a.$SocketImpl3()});this.listenTo(e.Cmd,"main_stream_mode_ready",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(P());if(!(yield d("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced())){d("WALogger").LOG(O());return}d("WALogger").LOG(N());a.set({hasSynced:!0,stream:d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED})}));this.listenTo(e.Cmd,"socket_stream_disconnected",function(){a.stream=d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED})};f.reconnect=function(){d("WAWebABProps").getABPropConfigValue("web_butterbar_socket_reconnect_enabled")&&d("WAWebCmd").Cmd.reconnectSocket()};f.takeover=function(){throw"Takeover called without conflict!"};f.exitLoop=function(){this.mustExitLoop=!0};f.$SocketImpl4=function(){c("WAWebLocalStorage")&&c("WAWebLocalStorage").setItem(d("WAWebUserPrefsKeys").KEYS.LOGOUT_DIRTY_BIT,"1")};f.$SocketImpl5=function(){c("WAWebLocalStorage")&&c("WAWebLocalStorage").removeItem(d("WAWebUserPrefsKeys").KEYS.LOGOUT_DIRTY_BIT)};f.$SocketImpl6=function(){c("WAWebLocalStorage")&&c("WAWebLocalStorage").getItem(d("WAWebUserPrefsKeys").KEYS.LOGOUT_DIRTY_BIT)==="1"};f.clearCredentialsAndStoredData=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=!1;!c("gkx")("26258")&&c("gkx")("26257")&&!d("WAWebBuildConstants").LOCALHOST_ENV_CONFIG&&(d("WALogger").DEV(M()),yield R());!c("gkx")("26255")&&a===d("WAWebLogoutReasonConstants").LogoutReason.ClientFatalError&&(e=!0);this.$SocketImpl4();e=(yield this.clearCredentials());this.$SocketImpl6()&&(e=!0);void d("WAWebSubscribePushManagerAction").unsubscribePushManager();void d("WAWebBackgroundSyncAction").updatePeriodicBackgroundSyncRegistration(!0);this.$SocketImpl4();try{yield this.destroyStorage()}catch(a){e=!0,c("gkx")("26258")?d("WALogger").ERROR(L(),a).tags("logout"):d("WALogger").ERROR(K(),a).tags("logout").sendLogs("Logout destroyStorage failed")}d("WAWebABPropsCache").clearABPropConfigs();e||this.$SocketImpl5();if(c("gkx")("26255")){var f=window.Native.ipcRenderer;yield f.invoke("refresh-electron-window-on-logout")}else{f=new(c("WAWebPonyfillsUrlSearchParams"))();e&&c("WAWebMiscBrowserUtils").info().name!=="Firefox"&&f.set("post_logout","1");if(a){e=d("WAWebLogoutReason").getErrorCodeFromLogoutReason(a);e&&f.set("logout_reason",e);if(a===d("WAWebLogoutReasonConstants").LogoutReason.AccountLocked&&b!=null){e=b.logoutMessageHeader;a=b.logoutMessageSubtext;e!=null&&f.set("logout_message_header",e);a!=null&&f.set("logout_message_subtext",a)}}b=f.toString();b==null||b===""?window.location.reload():window.location.href=window.location.pathname+"?"+f.toString()}});function e(b,c){return a.apply(this,arguments)}return e}();f.destroyStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[d("WAWebModelStorage").destroy(),d("WAWebLruMediaStorageUtils").destroyStorage()];a.push(d("WAWebFtsStorage").destroy());a.push(d("WAWebOffdStorage").destroy());a.push(d("WAWebJobsStorage").destroy());a.push(d("WAWebQplStorage").destroy());a.push(d("WAWebFtsClient").ftsClient.clearInitializationPromises());a.push(d("WAWebWorkerStorage").destroy());yield (h||(h=b("Promise"))).all(a)});function c(){return a.apply(this,arguments)}return c}();f.logout=function(a){var e=this;a===void 0&&(a=d("WAWebLogoutReasonConstants").LogoutReason.UserInitiated);c("WAWebLocalStorage")&&(c("WAWebLocalStorage").removeItem("WebEncKeySalt"),c("WAWebLocalStorage").removeItem("WANoiseInfo"));d("WAWebInvocationInterface").get().setLogoutState(!0);d("WAWebCmd").Cmd.onStartingLogout();if(!c("gkx")("26258"))try{throw c("err")("Non Error - WS2 logout, thrown only for getting logout stack trace")}catch(a){d("WALogger").LOG(J(),a.stack).verbose()}d("WALogger").LOG(I());var f=(h||(h=b("Promise"))).resolve(),g=0,i=20;i=Math.min(i,Math.max(g,d("WAWebServerPropsModel").ServerProps.syncdSentinelTimeoutSeconds));f=d("WAPromiseTimeout").promiseTimeout(c("WASentinel")(),i*1e3)["catch"](function(){return d("WALogger").WARN(H())});g=3;d("WAPromiseTimeout").promiseTimeout(f.then(function(){return e.sendCurrentLogout(a)})["catch"](function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("WALogger").ERROR(G(),b),yield e.clearCredentialsAndStoredData(a),d("WAWebCmd").Cmd.logout()});return function(a){return c.apply(this,arguments)}}()),g*1e3,"network request took more than "+g+" seconds").then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield e.clearCredentialsAndStoredData(a),e.state===d("WAWebSocketConstants").SOCKET_STATE.OPENING&&e.trigger("change:state"),d("WAWebCmd").Cmd.logout()}))["catch"](function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("WALogger").ERROR(F(),b),yield e.clearCredentialsAndStoredData(a),d("WAWebCmd").Cmd.logout()});return function(a){return c.apply(this,arguments)}}())["finally"](function(){d("WAWebInvocationInterface").get().setLogoutState(!1)})};f.summary=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;(a=d("WALogger")).LOG(E());a.LOG(D(),this.state);a.LOG(C(),String(navigator.onLine));a.LOG(B(),this.socket?this.socket.id:"n/a");if(!c("gkx")("26258")){a=(yield c("WAWebSyncBootstrap").getCriticalSyncDebugSummary());d("WALogger").LOG(A(),a);return}});function e(){return a.apply(this,arguments)}return e}();f.$SocketImpl1=function(){d("WALogger").LOG(z(),this.state)};f.$SocketImpl2=function(){d("WALogger").LOG(y(),this.stream),this.stream===d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED&&this.unset("resumePromise")};f.clearSendHash=function(a){if(a)c("lodash").forOwn(this.sendHash,function(a){a.resendTimer&&self.clearTimeout(a.resendTimer),a.onDrop(new(d("WAWebBackendErrors").LogoutDrop)(a.toString()))});else{a=c("lodash").filter(this.sendHash,"ephemeral");d("WALogger").WARN(x(),c("lodash").map(a,"tag").join(","));a.forEach(function(a){a.resendTimer&&self.clearTimeout(a.resendTimer),a.onDrop(new(d("WAWebBackendErrors").EphemeralDrop)(a.toString()))})}this.sendHash={};this.doubleAckHash={};this.pendingPhoneReqs=0};f.$SocketImpl3=function(){d("WALogger").LOG(w()),this.set({hasSynced:!0,stream:d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED})};f.openStream=function(){var a=d("WAWebUserPrefsMeUser").getMeUser();if(a){var c;(c=d("WAWebConnModel")).Conn.blockStoreAdds=!1;c.Conn.id="1";c.Conn.trigger("me_ready");c.Conn.meReadyTriggered=!0;return d("WAWebAddMeContactAction").addMeToContacts(a)}return(h||(h=b("Promise"))).resolve()};f.clearCredentials=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){c("WAWebUserPrefsStore").updatePreservedUserKeys();var a=!1;try{a=(yield this.clearState())}catch(b){a=!0}try{d("WAWebUserPrefsGeneral").setBrowserId()}catch(b){a=!0,d("WALogger").ERROR(v(),b).tags("logout")}try{d("WAWebUserPrefsGeneral").setUnknownId()}catch(a){d("WALogger").ERROR(u(),a).tags("logout")}try{d("WAWebUserPrefsMeUser").setMe()}catch(b){a=!0,d("WALogger").ERROR(t(),b).tags("logout")}try{yield d("WAWebUserPrefsMultiDevice").clearRegistrationInfo()}catch(b){a=!0,d("WALogger").ERROR(s(),b).tags("logout")}try{yield d("WAWebSignalStorage").destroy()}catch(b){a=!0,d("WALogger").ERROR(r(),b).tags("logout")}try{yield d("WAWebCryptoEncKeyHelper").deleteEncKeysAndCache(),yield d("WAWebCryptoEncryptionSaltHelper").deleteSalt()}catch(b){a=!0}try{yield d("WAWebUserPrefsClearLocalState").clearAllLocalState()}catch(b){a=!0,d("WALogger").ERROR(q(),b).tags("logout")}return a});function e(){return a.apply(this,arguments)}return e}();f.clearState=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(p());var a=!1;this.sendQueue=[];this.clearSendHash(!0);this.unset("hasSynced");try{var b=(yield d("WAWebLazyLoadedMainRequires").requireClearAppStates());b()}catch(b){a=!0,b instanceof d("WAWebMiscErrors").DbOnLogoutAbort?d("WALogger").WARN(o(),b.stack):d("WALogger").ERROR(n(),b.stack).sendLogs("clear_session_app_state")}try{yield S()}catch(b){a=!0,b instanceof d("WAWebMiscErrors").DbOnLogoutAbort?d("WALogger").WARN(m(),b.stack):d("WALogger").ERROR(l(),b.stack).sendLogs("clear_persistent_app_state")}return a});function c(){return a.apply(this,arguments)}return c}();f.sendCurrentLogout=function(a){a=d("WAWebUnpairDeviceJob").unpairDevice(a).then(function(a){a.status!==200&&d("WALogger").WARN(k(),a.status),d("WAComms").stopComms()})["catch"](function(a){d("WALogger").ERROR(j(),a.stack).verbose().devConsole(a)});a||(a=(h||(h=b("Promise"))).reject(c("err")("sendCurrentLogout: should not reach")));return a};f.updateImmediately=function(a){d("WAWebCrashlog").upload({reason:a,immediate:!0})["finally"](function(){d("WAWebUpdater").Updater.restart(!0)})};return e}(d("WAWebBaseModel").BaseModel);e=d("WAWebBaseModel").defineModel(a);f=new e();function R(){var a=c("gkx")("26258")?"https://web.whatsapp.com/ws/chat":"https://dev-web.whatsapp.com/ws/chat";self.fetch(a,{method:"delete"})["catch"](function(a){d("WALogger").DEV(i(),a.message)})}function S(){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=b("Promise"))).allSettled([c("WAWebDeleteAllCacheStorage")(),d("WAWebMediaStore").LruMediaStore.clear()]));a.forEach(function(a){if(a.status==="rejected")throw a.reason})});return T.apply(this,arguments)}g.Socket=f}),98);
__d("WAWebMsgSendDeliveryReceiptBridge",["WAWebSendDeliveryReceiptJob"],(function(a,b,c,d,e,f,g){function a(){d("WAWebSendDeliveryReceiptJob").sendDeliveryReceiptsAfterPresence()}g.sendDeliveryReceiptsAfterPresence=a}),98);
__d("WAWebChatStateBridge",["WASendChatStateProtocol","WAWebWidToJid"],(function(a,b,c,d,e,f,g){function a(a){return d("WASendChatStateProtocol").sendChatStateProtocol(d("WAWebWidToJid").widToChatJid(a),"idle")}function b(a){return d("WASendChatStateProtocol").sendChatStateProtocol(d("WAWebWidToJid").widToChatJid(a),"recording_audio")}function c(a){return d("WASendChatStateProtocol").sendChatStateProtocol(d("WAWebWidToJid").widToChatJid(a),"typing")}g.sendChatStatePaused=a;g.sendChatStateRecording=b;g.sendChatStateComposing=c}),98);
__d("WASmaxOutPresencePrivacyTokenContentsMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyElementValue;a=d("WASmaxJsx").smax("smax$any",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePrivacyTokenContentsMixin=a}),98);
__d("WASmaxOutPresenceTCTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutPresencePrivacyTokenContentsMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.tctokenT;a=a.privacyTokenContentsMixinArgs;b=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutPresencePrivacyTokenContentsMixin").mergePrivacyTokenContentsMixin(d("WASmaxJsx").smax("tctoken",{t:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,b)}),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeTCTokenMixin=a}),98);
__d("WASmaxOutPresenceSubscribeRequest",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutPresenceTCTokenMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.presenceTo,c=a.presenceName;a=a.tCTokenMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutPresenceTCTokenMixin").mergeTCTokenMixin,d("WASmaxJsx").smax("presence",{type:"subscribe",to:d("WAWap").JID(b),name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c)}),a);return b}g.makeSubscribeRequest=a}),98);
__d("WASmaxPresenceSubscribeRPC",["WAComms","WASmaxOutPresenceSubscribeRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutPresenceSubscribeRequest").makeSubscribeRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendSubscribeRPC=a}),98);
__d("WAWebSendPresenceSubscriptionJob",["WASmaxPresenceSubscribeRPC","WAWebWidToJid"],(function(a,b,c,d,e,f,g){function a(a,b){var c;a.isUser()&&b!=null&&(c={privacyTokenContentsMixinArgs:{anyElementValue:new Uint8Array(b)}});void d("WASmaxPresenceSubscribeRPC").sendSubscribeRPC({presenceTo:d("WAWebWidToJid").widToChatJid(a),tCTokenMixinArgs:c})}g["default"]=a}),98);
__d("WAWebContactPresenceBridge",["Promise","WASendPresenceStatusProtocol","WAWebConnModel","WAWebSendPresenceSubscriptionJob","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h;function a(){void d("WASendPresenceStatusProtocol").sendPresenceStatusProtocol({status:"available",name:d("WAWebConnModel").Conn.pushname})}function e(){void d("WASendPresenceStatusProtocol").sendPresenceStatusProtocol({status:"unavailable",name:d("WAWebConnModel").Conn.pushname})}function f(a,e){var f;a instanceof c("WAWebWid")?f=a:f=d("WAWebWidFactory").createWid(a);return(h||(h=b("Promise"))).resolve(c("WAWebSendPresenceSubscriptionJob")(f,e))}g.setPresenceAvailable=a;g.setPresenceUnavailable=e;g.subscribePresence=f}),98);
__d("WAWebPresenceChatAction",["WAFilteredCatch","WALogger","WAWebBackendErrors","WAWebChatStateBridge","WAWebContactPresenceBridge","WAWebStateUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat send presence resend composing error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat send presence resend recording error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat send presence recording error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat send presence paused error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat send presence composing error ",""]);l=function(){return a};return a}var m=2500,n=1e4;function a(a){if(a.isNewsletter||a.id.isBot())return;return o(d("WAWebStateUtils").unproxy(a))}function b(a){if(a.isNewsletter||a.id.isBot())return;return p(d("WAWebStateUtils").unproxy(a))}function c(a){if(a.isNewsletter||a.id.isBot())return;return q(d("WAWebStateUtils").unproxy(a))}function e(){d("WAWebContactPresenceBridge").setPresenceAvailable()}function f(){d("WAWebContactPresenceBridge").setPresenceUnavailable()}function o(a){if(!a.typing){var b=a.id;d("WAWebChatStateBridge").sendChatStateComposing(b)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status>=400&&d("WALogger").WARN(l(),b.toLogString())}));a.presenceResendTimerId=self.setTimeout(function(){return r(a)},n)}a.typing=!0;a.pausedTimerId&&self.clearTimeout(a.pausedTimerId);a.pausedTimerId=self.setTimeout(function(){return p(a)},m)}function p(a){if(a.typing||a.recording){var b=a.id;d("WAWebChatStateBridge").sendChatStatePaused(b)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status>=400&&d("WALogger").WARN(k(),b.toLogString())}))}a.presenceResendTimerId&&(self.clearTimeout(a.presenceResendTimerId),a.unset("presenceResendTimerId"));a.pausedTimerId&&(self.clearTimeout(a.pausedTimerId),a.unset("pausedTimerId"));a.typing=a.recording=!1}function q(a){if(!a.recording){var b=a.id;d("WAWebChatStateBridge").sendChatStateRecording(b)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status>=400&&d("WALogger").WARN(j(),b.toLogString())}));a.presenceResendTimerId=self.setTimeout(function(){return r(a)},n)}a.pausedTimerId&&(self.clearTimeout(a.pausedTimerId),a.unset("pausedTimerId"));a.recording=!0;a.typing=!1}function r(a){var b=a.id;if(a.recording)d("WAWebChatStateBridge").sendChatStateRecording(b)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status>=400&&d("WALogger").WARN(i(),b.toLogString())}));else if(a.typing)d("WAWebChatStateBridge").sendChatStateComposing(b)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status>=400&&d("WALogger").WARN(h(),b.toLogString())}));else{a.unset("presenceResendTimerId");return}a.presenceResendTimerId=self.setTimeout(function(){return r(a)},n)}function s(a){a.presence.isOnline?r(a):a.presenceResendTimerId&&(self.clearTimeout(a.presenceResendTimerId),a.unset("presenceResendTimerId"))}function t(a){a.presenceResendTimerId&&(self.clearTimeout(a.presenceResendTimerId),a.unset("presenceResendTimerId")),a.pausedTimerId&&(self.clearTimeout(a.pausedTimerId),a.unset("pausedTimerId")),a.typing=!1}g.markComposing=a;g.markPaused=b;g.markRecording=c;g.sendPresenceAvailable=e;g.sendPresenceUnavailable=f;g.presenceOnlineChanged=s;g.clearPresence=t}),98);
__d("WAWebUserPrefsScreenLock",["WAArrayBufferUtils","WABase64","WABinary","WAWebDbEncryptionKey","WAWebDirectConnectionX509","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){var a;z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS);a=parseInt((a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS))!=null?a:0,10);return a!==0}function e(){z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS);return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS)}function f(){var a;z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS);return(a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS))!=null?a:0}function h(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS,a)}function i(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV,a)}function j(){z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV);return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV)}function k(a){return c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT,a,{shouldWriteToIdb:!1})}function l(){z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT,!1);return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=y();a=(yield u(String(a),b));return c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS,a+"_"+b)});return n.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS);var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS);if(a==null)return null;if(typeof a==="number")return parseInt(a,10);a=a.split("_");var b=a[0];a=a[1];if(b==null||a==null)return null;b=(yield w(b,a));return parseInt(b,10)});return p.apply(this,arguments)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){z(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT);var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT);if(a==null)return 0;if(typeof a==="number")return parseInt(a,10);a=a.split("_");var b=a[0];a=a[1];b=(yield w(b,a));return parseInt(b,10)});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=y();a=(yield u(String(a),e));if(b.aborted)return;c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT,a+"_"+e)});return t.apply(this,arguments)}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=new Uint8Array(d("WABase64").decodeB64(b));var c=d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0];b=(yield self.crypto.subtle.encrypt({iv:b,name:"AES-CBC"},c.key,d("WAArrayBufferUtils").stringToArrayBuffer(a)));return d("WABase64").encodeB64(b)});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=new Uint8Array(d("WABase64").decodeB64(b));var c=d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0];b=(yield self.crypto.subtle.decrypt({iv:b,name:"AES-CBC"},c.key,d("WABase64").decodeB64(a)));return d("WAWebDirectConnectionX509").arrayBufferToString(b)});return x.apply(this,arguments)}function y(){var a=new Uint8Array(16);self.crypto.getRandomValues(a);a=new(d("WABinary").Binary)(a).readByteArray(16);return d("WABase64").encodeB64(a)}function z(a,b){var d=c("WAWebUserPrefsStore").get(a);if(d!=null){b=b!=null?{shouldWriteToIdb:b}:null;c("WAWebUserPrefsStore").setUser(a,d,(d=b)!=null?d:{});c("WAWebPermanentStorage").removeItem(a)}}g.getScreenLockEnabled=a;g.getScreenLockDurationForLogging=e;g.getScreenLockDurationInSeconds=f;g.setScreenLockDurationInSeconds=h;g.setScreenLockIvString=i;g.getScreenLockIvString=j;g.setScreenLockSalt=k;g.getScreenLockSalt=l;g.setScreenLockIterations=m;g.getScreenLockIterations=o;g.getScreenUnlockTryCount=q;g.setScreenUnlockTryCount=s}),98);
__d("WAWebWamEnumWebcStreamModeCode",[],(function(a,b,c,d,e,f){a=Object.freeze({QR:0,MAIN:1,SYNCING:2,OFFLINE:3,CONFLICT:4,PROXYBLOCK:5,TOS_BLOCK:6,SMB_TOS_BLOCK:7,DEPRECATED_VERSION:8,LOCK:9});f.WEBC_STREAM_MODE_CODE=a}),66);
__d("WASmaxPingsClientRPC",["WAComms","WASmaxInPingsClientResponseServerResponse","WASmaxOutPingsClientRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=d("WASmaxOutPingsClientRequest").makeClientRequest();g.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=g.sent;f=d("WASmaxInPingsClientResponseServerResponse").parseClientResponseServerResponse(e,c);if(!f.success){g.next=7;break}return g.abrupt("return",{name:"ClientResponseServerResponse",value:f.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Client",{ServerResponse:f}));case 8:case"end":return g.stop()}},null,this)}g.sendClientRPC=a}),98);
__d("WAWebDeprecatedTightPromise",["Promise","WAAbortError","err"],(function(a,b,c,d,e,f,g){var h,i={ROOT:1,THENABLE:2,FINALLY:3,META:4},j={PENDING:1,FULFILLED:2,REJECTED:3};function k(a,b){this._parent=null;this._subs=[];this._catchTypes=null;this._onResolve=null;this._onReject=null;this.type=i.ROOT;this.state=j.PENDING;this.value=void 0;this._forceable=!1;this._cancellable=!1;var d,e;switch(arguments.length){case 0:break;case 1:d=arguments[0];break;case 2:e=arguments[0];d=arguments[1];break;default:throw c("err")("TightPromise constructor with "+arguments.length+" arguments")}this.context=e;if(arguments.length>0)try{d.call(e,l.bind(this),m.bind(this))}catch(a){m.call(this,a)}}k.STATE=j;k.TYPE=i;function a(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];var e=new k();e.type=i.THENABLE;e._onReject=arguments[arguments.length-1];arguments.length>1&&(e._catchTypes=Array.prototype.slice.call(arguments,0,arguments.length-1),e._catchTypes.forEach(function(a){if(typeof a!=="function")throw c("err")("expected type, got "+a)}));this._addChild(e);return e}k.prototype={isPending:function(){return this.state===j.PENDING},then:function(a,b){if(!a&&!b)return this;var c=new k();c.type=i.THENABLE;c._onResolve=a||null;c._onReject=b||null;this._addChild(c);return c},"catch":a,catchType:a,catchTypes:a,catchTypes3:a,catchEqualTo:a,"finally":function(a){var b=new k();b.type=i.FINALLY;b._onResolve=a;this._addChild(b);return b},bind:function(a){var b=new k();b.type=i.META;this._addChild(b);b.context=a;return b},spread:function(a){return this.then(function(b){a.apply(this,b)})},get:function(a){return this.then(function(b){return b[a]})},forceable:function(){var a=new k();a.context=this.context;a.type=i.META;this._addChild(a);a._forceable=!0;return a},cancellable:function(){var a=new k();a.context=this.context;a.type=i.META;this._addChild(a);a._cancellable=!0;return a},force:function(a){if(this._forceable){var b=this;while(b.type===i.META){var c=b._parent;if((c==null?void 0:c._forceable)&&c.state===j.PENDING)b=c;else break}l.call(this,a)}},cancel:function(a){a=a;if(this._cancellable){a=a||new(d("WAAbortError").AbortError)();var b=this,c=!1;do{var e=b._parent;(e==null?void 0:e._cancellable)&&e.state===j.PENDING?b=e:c=!0}while(!c);m.call(b,a)}},loosen:function(){return(h||(h=b("Promise"))).resolve(this)},_run:function(a,b){var c;try{c=a.call(this.context,b)}catch(a){m.call(this,a);return}l.call(this,c)},_handle:function(){if(this.state!==j.PENDING)return;var a=this._parent;switch(this.type){case i.THENABLE:if(a.state===j.FULFILLED){var b=this._onResolve;b?this._run(b,a.value):l.call(this,a.value)}else if(this._onReject){b=this._catchTypes;var c=b?b.length:0,d=a.value;if(c===0){this._run(this._onReject,d);return}for(var e=0;e<c;e++)if(d instanceof b[e]){this._run(this._onReject,d);return}m.call(this,d)}else m.call(this,a.value);return;case i.FINALLY:try{this._onResolve.call(this.context)}catch(a){o(a)}default:a.state===j.FULFILLED?l.call(this,a.value):m.call(this,a.value)}},_addChild:function(a){a._parent=this,a.context=this.context,a._cancellable=this._cancellable,a.type===i.META&&(a._forceable=this._forceable),this.state===j.PENDING?this._subs.push(a):a._handle()},_notifySubs:function(){this._subs.forEach(function(a){a._handle()})}};function l(a){if(this.state!==j.PENDING)return;n(a)?a.then(l.bind(this),m.bind(this)):(this.value=a,this.state=j.FULFILLED,this._notifySubs())}function m(a){if(this.state!==j.PENDING)return;this.value=a;this.state=j.REJECTED;this._notifySubs()}k.delay=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d,e;switch(arguments.length){case 0:d=0;break;case 1:d=arguments[0];break;default:d=arguments[1],e=arguments[0]}return new k(function(a){self.setTimeout(a.bind(null,e),d)})};k.resolve=function(a){var b=new k();l.call(b,a);return b};k.reject=function(a){var b=new k();m.call(b,a);return b};function n(a){return(typeof a==="object"||typeof a==="function")&&typeof a.then==="function"}function o(a){self.setTimeout(function(a){throw a},0,a)}e=k;g["default"]=e}),98);
__d("WAWebEventsWaitForEvent",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){var h;function a(a,c,e,f){e===void 0&&(e=function(){return!0});return(f==null?void 0:f.aborted)?(h||(h=b("Promise"))).reject(new(d("WAAbortError").AbortError)()):new(h||(h=b("Promise")))(function(b,g){var h=function(){if(!e.apply(this,arguments))return;j==null?void 0:j();b.apply(this,arguments)},i=function(){j==null?void 0:j(),g(new(d("WAAbortError").AbortError)())},j=function(){a.removeEventListener(c,h),f==null?void 0:f.removeEventListener("abort",i),j=null};f==null?void 0:f.addEventListener("abort",i);a.addEventListener(c,h)})}g["default"]=a}),98);
__d("WAWebEventsWaitForOffline",["WAWebEventsWaitForEvent"],(function(a,b,c,d,e,f,g){function a(a){return c("WAWebEventsWaitForEvent")(window,"offline",void 0,a)}g["default"]=a}),98);
__d("WAWebOpenSocket",["WAAbortError","WANullthrows","WAWebCookieDomain","WAWebLocalStorage","gkx"],(function(a,b,c,d,e,f,g){function a(a,b){if(!c("gkx")("26258")){if(c("gkx")("26257")){var e=new Image();e.src="https://dev-web.whatsapp.com/desktop/auth.png?"+Date.now()}e=c("WANullthrows")(c("WAWebLocalStorage")).getItem("wdev-pinning-cookie-value");document.cookie=["sticky_routing="+(e&&e.replace(/\"/g,"")||""),"path=/","domain="+d("WAWebCookieDomain").COOKIE_DOMAIN,"secure"].join(";")}if(b.aborted)throw new(d("WAAbortError").AbortError)();return new WebSocket(a)}g.openSocket=a}),98);
__d("WAWebWatchedSocketMd",["$InternalEnum","WAAbortError","WABinary","WALogger","WAShiftTimer","WASmaxPingsClientRPC","WAWebABProps","WAWebBaseJSHaltDetector","WAWebCmd","WAWebDeprecatedTightPromise","WAWebEventsWaitForOffline","WAWebJSHaltDetector","WAWebMiscErrors","WAWebOpenSocket","WAWebSocketConstants","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD opened socket ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD aborted socket ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD error on open of ",": ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD opening socket ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["WatchedSocketMD error constructing: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Socket "," closing: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["exception sending: ","\n",""],["exception sending: ","\\n",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD:exception closing: ","\n",""],["Comms: WatchedSocketMD:exception closing: ","\\n",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD "," Timeout!"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD handleJsHalt: js halt longer than "," ms detected, killing socket"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD handleJsHalt: restart socket via (v1) legacy reconnect"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD handleJsHalt: restart socket via (v2) force reconnect"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD handleJsHalt: ping failed"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD handleJsHalt: ping succeeded"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms: WatchedSocketMD handleJsHalt: attempting ping"]);v=function(){return a};return a}var w=3*60*1e3,x=function(){function a(a){var b=this;this.onError=null;this.dataToSend=new(d("WABinary").Binary)();this.url=a;this._killTimer=new(d("WAShiftTimer").ShiftTimer)(function(){return b._killSocket()});d("WAWebJSHaltDetector").jsHaltDetector.on(d("WAWebBaseJSHaltDetector").JS_HALT_EVENT,this._handleJsHalt,this)}var c=a.prototype;c._handleJsHalt=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a<=w)return;a=A();if(d("WAWebABProps").getABPropConfigValue("web_kill_socket_on_jshalt_event_disabled")&&!a.enabled)return;if(a.enabled){d("WALogger").LOG(v());try{yield d("WASmaxPingsClientRPC").sendClientRPC({timeoutSeconds:1});d("WALogger").LOG(u());return}catch(b){d("WALogger").LOG(t());if(a.reconnectMethod===z.FORCE_RECONNECT){d("WALogger").LOG(s());d("WAWebCmd").Cmd.reconnectSocket();return}d("WALogger").LOG(r());this._killTimer.cancel();this._killTimer.onOrBefore(0);return}}d("WALogger").LOG(q(),w);this._killTimer.cancel();this._killTimer.onOrBefore(0)});function a(b){return a.apply(this,arguments)}return a}();c._killSocket=function(){d("WALogger").WARN(p(),this.id),this.close(!0,"stale")};c.close=function(a,b){a===void 0&&(a=!1);var c=this.socket;this._handleCloseOrError(a,b||"unspecified");if(c){a=c.readyState;if(a===WebSocket.CONNECTING||a===WebSocket.OPEN)try{c.close()}catch(a){d("WALogger").WARN(o(),a,a.stack).devConsole(a)}}};c.requestSend=function(){if(this.state!==d("WAWebSocketConstants").WATCHED_SOCKET_STATE.OPEN)throw new(d("WAWebMiscErrors").SocketNotOpen)(this.state);else{if(!this.dataToSend.size())return;try{this.socket.send(this.dataToSend.readByteArray())}catch(a){d("WALogger").WARN(n(),a,a.stack).devConsole(a),this.close(!0,a)}}};c._handleMessage=function(a){if(a.data instanceof ArrayBuffer){if(this.onData){var b=this.onData;b(new Uint8Array(a.data))}}else throw new TypeError("expected ArrayBuffer from the socket")};c._handleCloseOrError=function(a,b){if(this.state===d("WAWebSocketConstants").WATCHED_SOCKET_STATE.CLOSED)return;this.socket&&(this.socket.onclose=y,this.socket.onerror=y,this.socket.onmessage=y);this._offlineListenerAbortController&&this._offlineListenerAbortController.abort();d("WALogger").WARN(m(),this.id,b.toString());d("WAWebJSHaltDetector").jsHaltDetector.off(d("WAWebBaseJSHaltDetector").JS_HALT_EVENT,this._handleJsHalt,this);this._killTimer.cancel();this.state=d("WAWebSocketConstants").WATCHED_SOCKET_STATE.CLOSED;this.error=a?b:void 0;this.onClose!=null&&this.onClose()};return a}();x.numSocketsAttempted=0;function y(){}function a(a,b){var e;try{e=new x(a)}catch(a){d("WALogger").WARN(l(),a).devConsole(a);return c("WAWebDeprecatedTightPromise").reject(a)}return new(c("WAWebDeprecatedTightPromise"))(e,function(a,c){x.numSocketsAttempted++;this.id=x.numSocketsAttempted;d("WALogger").LOG(k(),this.id);var e=d("WAWebOpenSocket").openSocket(this.url,b);e.binaryType="arraybuffer";e.onopen=a;e.onclose=e.onerror=function(a){c(new(d("WAWebMiscErrors").SocketError)(a))};b.aborted&&c(new(d("WAAbortError").AbortError)());this.socket=e}).cancellable()["catch"](function(a){d("WALogger").LOG(j(),this.id,a).devConsole(a);if(d("WAWebABProps").getABPropConfigValue("web_prevent_parallel_socket_connection_enabled")&&a.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(i(),this.id);throw a}if(this.socket){var b=this.socket;switch(b.readyState){case WebSocket.CONNECTING:b.onopen=null;case WebSocket.OPEN:b.onerror=null;b.onclose=null;b.close();break;case WebSocket.CLOSING:case WebSocket.CLOSED:b.onerror=null;b.onclose=null;break}}throw a}).then(function(){d("WALogger").LOG(h(),this.id);if(b.aborted)throw new(d("WAAbortError").AbortError)();var a=this.socket;a.onmessage=this._handleMessage.bind(this);a.onerror=this._handleCloseOrError.bind(this,!0);a.onclose=this._handleCloseOrError.bind(this,!1);this._offlineListenerAbortController=new AbortController();this._offlineListener=c("WAWebEventsWaitForOffline")(this._offlineListenerAbortController.signal).then(this.close.bind(this,!1,"offline"))["catch"](d("WAAbortError").catchAbort(function(){}));this.state=d("WAWebSocketConstants").WATCHED_SOCKET_STATE.OPEN;return this})}var z=b("$InternalEnum")({LEGACY_RECONNECT:1,FORCE_RECONNECT:2});function A(){var a=d("WAWebABProps").getABPropConfigValue("web_jshalt_ping_and_reconnect_version");a===0||a===1||a===2||(a=0);return a===0?{enabled:!1}:{enabled:!0,reconnectMethod:a===1?z.LEGACY_RECONNECT:z.FORCE_RECONNECT}}g.WatchedSocketMD=x;g.open=a}),98);
__d("WAWebWebcPageResumeWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcPageResume:[884,{webcResumeCount:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{WebcPageResume:[]});g.WebcPageResumeWamEvent=a}),98);
__d("WAWebWebcPhoneDisconnectedWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcPhoneDisconnected:[878,{webcPhoneBbarShownT:[2,d("WAWebWamCodegenUtils").TYPES.TIMER],webcPhoneDisconnectedT:[1,d("WAWebWamCodegenUtils").TYPES.TIMER]},[1,1,1],"regular"]},{WebcPhoneDisconnected:[]});g.WebcPhoneDisconnectedWamEvent=a}),98);
__d("WAWebWebcStreamModeChangeWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcStreamModeCode"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcStreamModeChange:[770,{webcStreamMode:[1,d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE]},[1,1,1],"regular"]},{WebcStreamModeChange:[]});g.WebcStreamModeChangeWamEvent=a}),98);
__d("WAWebStreamModel",["$InternalEnum","WALogger","WAShiftTimer","WAWebBaseModel","WAWebCmd","WAWebLockScreenResolver","WAWebMsgSendDeliveryReceiptBridge","WAWebNetworkStatus","WAWebPresenceChatAction","WAWebPresenceCollection","WAWebSocketConstants","WAWebSocketModel","WAWebUpdater","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","WAWebWamEnumWebcStreamModeCode","WAWebWamPageLoadReporter","WAWebWamPerfUtils","WAWebWatchedSocketMd","WAWebWebcPageResumeWamEvent","WAWebWebcPhoneDisconnectedWamEvent","WAWebWebcStreamModeChangeWamEvent","gkx","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stream:unknown obscure level:"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stream:onAvailableUpdate user ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stream:onSelfUpdate mode:"," info:"," view:",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stream:autoLockShiftTimer auto lock due to inactivity"]);k=function(){return a};return a}var l=b("$InternalEnum").Mirrored(["OFFLINE","OPENING","PAIRING","SYNCING","RESUMING","CONNECTING","NORMAL","TIMEOUT"]),m=b("$InternalEnum").Mirrored(["QR","MAIN","SYNCING","OFFLINE","CONFLICT","PROXYBLOCK","TOS_BLOCK","SMB_TOS_BLOCK","DEPRECATED_VERSION"]),n=b("$InternalEnum").Mirrored(["SHOW","OBSCURE","HIDE"]),o=18e3,p=3e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.info=d("WAWebBaseModel").session(l.NORMAL),c.mode=d("WAWebBaseModel").session(m.SYNCING),c.obscurity=d("WAWebBaseModel").session(n.HIDE),c.needsUpdate=d("WAWebBaseModel").session(),c.clientExpired=d("WAWebBaseModel").session(!1),c.hardExpired=d("WAWebBaseModel").session(!1),c.lastSyncStart=d("WAWebBaseModel").session(u()),c.needsManualDownload=d("WAWebBaseModel").session(),c.couldForce=d("WAWebBaseModel").session(),c.uiActive=d("WAWebBaseModel").session(),c.available=d("WAWebBaseModel").session(!0),c.unavailableShiftTimer=d("WAWebBaseModel").session(),c.unavailableAutoLockTimer=d("WAWebBaseModel").session(),c.unavailableLogoutTimer=d("WAWebBaseModel").session(),c.unobscureShiftTimer=d("WAWebBaseModel").session(),c.timeoutEvent=d("WAWebBaseModel").session(),c.resumeCount=d("WAWebBaseModel").session(0),c.phoneAuthed=d("WAWebBaseModel").session(!1),c.$StreamImpl2=d("WAWebBaseModel").session(),c.displayInfo=d("WAWebBaseModel").derived(function(){return t(this.info,this.obscurity)},["info","obscurity"]),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.initialize=function(){var b=this;a.prototype.initialize.call(this);d("WAWebUserPrefsMultiDevice").isRegistered()||(this.mode=m.QR);this.$StreamImpl2=d("WAWebWamPerfUtils").startMeasure("Stream.mode: "+this.mode);this.unavailableShiftTimer=new(d("WAShiftTimer").ShiftTimer)(function(){return b.markUnavailable()});this.unobscureShiftTimer=new(d("WAShiftTimer").ShiftTimer)(function(){return b.unobscure()});this.unavailableAutoLockTimer=new(d("WAShiftTimer").ShiftTimer)(function(){d("WAWebUserPrefsScreenLock").getScreenLockDurationInSeconds()!==0&&(d("WALogger").LOG(k()),void d("WAWebLockScreenResolver").lockScreenAndTriggerUnlockFlow())});this.listenTo(d("WAWebSocketModel").Socket,"change:state change:stream change:hasSynced",this.$StreamImpl3);this.listenTo(c("WAWebNetworkStatus"),"change:online",this.$StreamImpl3);this.listenTo(this,"change:available",this.$StreamImpl4);this.listenTo(this,"change:phoneAuthed",this.$StreamImpl5);this.listenTo(this,"change:info change:displayInfo change:mode",c("lodash").debounce(this.$StreamImpl6));this.listenTo(this,"change:info",this.logPageResume);this.listenTo(this,"change:info",this.updateWamLog);this.listenTo(this,"change:mode",this.logModeChange);this.listenTo(this,"change:available change:uiActive",this.updateCouldForce);this.listenTo(d("WAWebCmd").Cmd,"midnight",this.updateHardExpire);this.listenTo(d("WAWebCmd").Cmd,"serverUpdatedClientExpiration",this.updateHardExpire);this.listenTo(d("WAWebCmd").Cmd,"socket_stream_disconnected",function(){d("WAWebPresenceCollection").PresenceCollection.clearAllPresence()});window.document&&document.addEventListener("visibilitychange",this.updateCouldForce);this.updateCouldForce();this.updateHardExpire()};e["delete"]=function(){};e.markAvailable=function(){this.unavailableShiftTimer.cancel(),this.available=!0};e.markUnavailable=function(a){a!=null&&a!==0?this.unavailableShiftTimer.onOrBefore(a):(this.unavailableShiftTimer.cancel(),this.available=!1)};e.$StreamImpl6=function(){d("WALogger").LOG(j(),this.mode,this.info,this.displayInfo);var a=this.timeoutEvent;if(this.info===l.TIMEOUT)a||(this.timeoutEvent=a=new(d("WAWebWebcPhoneDisconnectedWamEvent").WebcPhoneDisconnectedWamEvent)()),this.displayInfo===l.TIMEOUT&&this.$StreamImpl1==null&&(this.$StreamImpl1=Date.now());else if(a){a.markWebcPhoneDisconnectedT();var b=this.$StreamImpl1;b!=null&&(a.webcPhoneBbarShownT=Date.now()-b);a.commit();this.timeoutEvent=null;this.$StreamImpl1=null}this.mode===m.MAIN&&d("WAWebCmd").Cmd.readyForMainStreamModeLegacy()};e.$StreamImpl3=function(){var a={},b=r();a.info=b;a.mode=s();a.phoneAuthed=d("WAWebSocketModel").Socket.stream!==d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED;if(b===l.NORMAL)this.unobscureShiftTimer.cancel(),a.obscurity=n.HIDE;else if(b===l.OFFLINE)this.unobscureShiftTimer.cancel(),a.obscurity=n.OBSCURE;else switch(this.obscurity){case n.HIDE:this.unobscureShiftTimer.onOrBefore(o);break;case n.OBSCURE:this.unobscureShiftTimer.onOrBefore(p);break;case n.SHOW:break}this.set(a)};e.unobscure=function(){this.obscurity=n.SHOW};e.$StreamImpl5=function(){this.phoneAuthed&&this.sendAvailability(!0)};e.$StreamImpl4=function(){var a=this.available;d("WALogger").LOG(i(),a?"available":"unavailable");var b=d("WAWebUserPrefsScreenLock").getScreenLockDurationInSeconds();!a&&b!==0?this.unavailableAutoLockTimer.onOrBefore(b*1e3):this.unavailableAutoLockTimer.cancel();this.sendAvailability(!1);a?d("WAWebMsgSendDeliveryReceiptBridge").sendDeliveryReceiptsAfterPresence():d("WAWebPresenceCollection").PresenceCollection.clearAllPresence()};e.sendAvailability=function(a){(a||this.uiActive)&&(this.available?d("WAWebPresenceChatAction").sendPresenceAvailable():d("WAWebPresenceChatAction").sendPresenceUnavailable())};e.updateCouldForce=function(){c("gkx")("26254")&&(this.couldForce=!this.uiActive||!this.available&&document.hidden),c("gkx")("26255")&&(this.couldForce=!this.uiActive||!this.available)};e.updateHardExpire=function(){d("WAWebUpdater").Updater.isExpired()&&(this.hardExpired=!0,d("WAWebUpdater").Updater.restart(!0))};e.logPageResume=function(){this.info===l.RESUMING&&(this.resumeCount++,new(d("WAWebWebcPageResumeWamEvent").WebcPageResumeWamEvent)({webcResumeCount:this.resumeCount}).commit())};e.updateWamLog=function(){var a=this.info===l.NORMAL;d("WAWebWamPageLoadReporter").streamInfoChange(this.info,d("WAWebWatchedSocketMd").WatchedSocketMD.numSocketsAttempted,a);a&&this.stopListening(this,"change:info",this.updateWamLog)};e.logModeChange=function(){this.$StreamImpl2&&this.$StreamImpl2.end(),this.mode===m.SYNCING&&(this.lastSyncStart=u()),this.$StreamImpl2=d("WAWebWamPerfUtils").startMeasure("Stream.mode: "+this.mode),new(d("WAWebWebcStreamModeChangeWamEvent").WebcStreamModeChangeWamEvent)({webcStreamMode:q(this.mode)}).commit()};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="stream";function q(a){switch(a){case m.QR:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.QR;case m.MAIN:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.MAIN;case m.SYNCING:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.SYNCING;case m.OFFLINE:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.OFFLINE;case m.CONFLICT:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.CONFLICT;case m.PROXYBLOCK:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.PROXYBLOCK;case m.DEPRECATED_VERSION:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.DEPRECATED_VERSION;case m.TOS_BLOCK:case m.SMB_TOS_BLOCK:return d("WAWebWamEnumWebcStreamModeCode").WEBC_STREAM_MODE_CODE.TOS_BLOCK}}e=d("WAWebBaseModel").defineModel(a);f=new e();function r(){var a=!1;if((a||c("gkx")("26256"))&&!c("WAWebNetworkStatus").online&&c("WAWebNetworkStatus").simulatedOfflineConditions)return l.OFFLINE;switch(d("WAWebSocketModel").Socket.state){case d("WAWebSocketConstants").SOCKET_STATE.TIMEOUT:return l.TIMEOUT;case d("WAWebSocketConstants").SOCKET_STATE.OPENING:return c("WAWebNetworkStatus").online?l.OPENING:l.OFFLINE;case d("WAWebSocketConstants").SOCKET_STATE.PAIRING:return d("WAWebSocketModel").Socket.hasSynced?l.RESUMING:l.PAIRING;case d("WAWebSocketConstants").SOCKET_STATE.CONNECTED:return d("WAWebSocketModel").Socket.stream!==d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED?d("WAWebSocketModel").Socket.hasSynced?l.NORMAL:l.SYNCING:l.NORMAL;case d("WAWebSocketConstants").SOCKET_STATE.UNLAUNCHED:case d("WAWebSocketConstants").SOCKET_STATE.PROXYBLOCK:default:return l.NORMAL}}function s(){var a;a=d("WAWebUserPrefsMultiDevice").isRegistered();if(!a&&d("WAWebSocketModel").Socket.state!==d("WAWebSocketConstants").SOCKET_STATE.PROXYBLOCK)return m.QR;a=d("WAWebSocketModel").Socket.hasSynced;switch(d("WAWebSocketModel").Socket.state){case d("WAWebSocketConstants").SOCKET_STATE.PROXYBLOCK:return m.PROXYBLOCK;case d("WAWebSocketConstants").SOCKET_STATE.CONFLICT:return m.CONFLICT;case d("WAWebSocketConstants").SOCKET_STATE.TOS_BLOCK:return m.TOS_BLOCK;case d("WAWebSocketConstants").SOCKET_STATE.SMB_TOS_BLOCK:return m.SMB_TOS_BLOCK;case d("WAWebSocketConstants").SOCKET_STATE.DEPRECATED_VERSION:return m.DEPRECATED_VERSION;case d("WAWebSocketConstants").SOCKET_STATE.UNLAUNCHED:return m.SYNCING;case d("WAWebSocketConstants").SOCKET_STATE.UNPAIRED_IDLE:case d("WAWebSocketConstants").SOCKET_STATE.UNPAIRED:return m.QR;case d("WAWebSocketConstants").SOCKET_STATE.OPENING:if(!c("WAWebNetworkStatus").online&&!d("WAWebSocketModel").Socket.hasSynced)return m.OFFLINE;default:return a||d("WAWebSocketModel").Socket.stream===d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED?m.MAIN:m.SYNCING}}function t(a,b){switch(b){case n.SHOW:return a;case n.HIDE:return d("WAWebSocketModel").Socket.hasSynced?l.NORMAL:l.CONNECTING;case n.OBSCURE:switch(a){case l.OPENING:case l.PAIRING:case l.SYNCING:case l.RESUMING:return l.CONNECTING;default:return a}}d("WALogger").WARN(h()).devConsole(b);return a}function u(){return Math.floor(window.performance.now())}g.StreamInfo=l;g.StreamMode=m;g.Obscurity=n;g.Stream=f}),98);
__d("WAWebMessagePluginGenerateProtobuf",["WAWebMessagePluginGenerateProtobufRegistry","WAWebPluginCreateRegistryLookup"],(function(a,b,c,d,e,f,g){var h=d("WAWebPluginCreateRegistryLookup").createMsgTypeRegistryLookup(c("WAWebMessagePluginGenerateProtobufRegistry"));function a(a){var b=a.json;return(b=h(b.type,b.subtype))==null?void 0:b.generateProtobuf==null?void 0:b.generateProtobuf(a)}g.generateProtobuf=a}),98);
__d("WAWebEventsGenerateEventResponseMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;a={eventCreationMessageKey:d("WAWebE2EProtoUtils").encodeKey(a.targetMessageKey),encPayload:a.encPayload,encIv:a.encIv};return{encEventResponseMessage:a}}g["default"]=a}),98);
__d("WAWebGenerateBizContentPlaceholderProto",["err"],(function(a,b,c,d,e,f,g){function a(a){throw c("err")("Not supported")}g["default"]=a}),98);
__d("WAWebGenerateBotFeedbackProtocolMessageProto",["WAWebBotTypes","WAWebE2EProtoUtils","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;var b;switch(a.botFeedbackKind){case d("WAWebBotTypes").BotFeedbackKind.POSITIVE:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_POSITIVE;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_GENERIC:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_GENERIC;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_HELPFUL:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_HELPFUL;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_INTERESTING:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_INTERESTING;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_ACCURATE:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_ACCURATE;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_SAFE:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_SAFE;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_OTHER:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_OTHER;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_REFUSED:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_REFUSED;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_NOT_VISUALLY_APPEALING:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING;break;case d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_NOT_RELEVANT_TO_TEXT:b=d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT;break}a={messageKey:d("WAWebE2EProtoUtils").encodeKey(a.protocolMessageKey),kind:b,text:a.botFeedbackText};a={type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.BOT_FEEDBACK_MESSAGE,botFeedbackMessage:a};return{protocolMessage:a}}g["default"]=a}),98);
__d("WAWebGenerateBotRequestWelcomeMessageProto",["WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE}}}g["default"]=a}),98);
__d("WAWebGenerateButtonsResponseMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.json;a=a.contextInfo;return{buttonsResponseMessage:babelHelpers["extends"]({},b.buttonsResponse,{contextInfo:a})}}f["default"]=a}),66);
__d("WAWebGenerateCancelPaymentMessageProto",["err"],(function(a,b,c,d,e,f,g){function a(a){throw c("err")("Not supported")}g["default"]=a}),98);
__d("WAWebGenerateExtendedTextMessageProtoUtils",["WATypeUtils","WAWebE2EProtoUtils","WAWebGroupType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function h(a){switch(a){case d("WAWebGroupType").GroupType.COMMUNITY:return d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.PARENT;case d("WAWebGroupType").GroupType.LINKED_SUBGROUP:return d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.SUB;case d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP:return d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.DEFAULT_SUB;default:return d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.DEFAULT}}function a(a){var b=a.json;a=a.contextInfo;return{extendedTextMessage:{text:b.body,matchedText:b.matchedText,canonicalUrl:b.canonicalUrl,description:b.description,title:b.title,jpegThumbnail:d("WAWebE2EProtoUtils").encodeBytes(b.thumbnail),previewType:b.richPreviewType,contextInfo:a,mediaKey:d("WAWebE2EProtoUtils").encodeBytes(b.mediaKey),mediaKeyTimestamp:d("WATypeUtils").isNumber(b.mediaKeyTimestamp)?b.mediaKeyTimestamp:void 0,thumbnailDirectPath:b.thumbnailDirectPath,thumbnailSha256:d("WAWebE2EProtoUtils").encodeBytes(b.thumbnailSha256),thumbnailEncSha256:d("WAWebE2EProtoUtils").encodeBytes(b.thumbnailEncSha256),thumbnailHeight:b.thumbnailHeight,thumbnailWidth:b.thumbnailWidth,inviteLinkGroupTypeV2:h(b.inviteGrpType),backgroundArgb:b.backgroundColor}}}g["default"]=a}),98);
__d("WAWebGenerateExtendedTextUrlChatMessageProto",["WAWebGenerateExtendedTextMessageProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json;a=a.contextInfo;return c("WAWebGenerateExtendedTextMessageProtoUtils")({json:b,contextInfo:a})}g["default"]=a}),98);
__d("WAWebGenerateChatMessageProto",["WAWebGenerateExtendedTextUrlChatMessageProto"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json;a=a.contextInfo;return b.quotedMsg||b.quotedRemoteJid||Array.isArray(b.mentionedJidList)&&b.mentionedJidList.length>0||Array.isArray(b.groupMentions)&&b.groupMentions.length>0||b.conversionTuple||b.isForwarded||b.forwardingScore||b._isPaymentNoteMsg||b.ephemeralDuration||b.ephemeralSettingTimestamp||b.ctwaContext||b.backgroundColor||(a==null?void 0:a.utm)?c("WAWebGenerateExtendedTextUrlChatMessageProto")({json:b,contextInfo:a}):{conversation:b.body}}g["default"]=a}),98);
__d("WAWebGenerateDeclinePaymentMessageProto",["err"],(function(a,b,c,d,e,f,g){function a(a){throw c("err")("Not supported")}g["default"]=a}),98);
__d("WAWebGenerateDocumentMessageProto",["WATypeUtils","WAWebE2EProtoUtils","WAWebMiscGatingUtils","WAWebMsgType","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a){var b=a.contextInfo,e=a.json;a=a.mediaMetadata;a=a===void 0?{}:a;var f=e.mimetype||a.mimetype,g=void 0,h=void 0;e.type!==d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&(g=e.caption,d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&(h=e.caption,g=a.filename));f={url:a.url,mimetype:f,title:g,caption:h,directPath:a.directPath,fileSha256:d("WAWebE2EProtoUtils").encodeBytes(a.filehash),fileEncSha256:d("WAWebE2EProtoUtils").encodeBytes(a.encFilehash),fileName:a.filename,fileLength:d("WATypeUtils").isNumber(e.size)?e.size:void 0,mediaKey:d("WAWebE2EProtoUtils").encodeBytes(a.mediaKey),mediaKeyTimestamp:d("WATypeUtils").isNumber(a.mediaKeyTimestamp)?a.mediaKeyTimestamp:void 0,jpegThumbnail:d("WAWebE2EProtoUtils").encodeBytes(e.body),contextInfo:b,contactVcard:e.isVcardOverMmsDocument,thumbnailDirectPath:a.thumbnailDirectPath,thumbnailSha256:d("WAWebE2EProtoUtils").encodeBytes(a.thumbnailSha256),thumbnailEncSha256:d("WAWebE2EProtoUtils").encodeBytes(a.thumbnailEncSha256),thumbnailHeight:a.thumbnailHeight,thumbnailWidth:a.thumbnailWidth};Number.isFinite(e.pageCount)&&!Number.isNaN(e.pageCount)&&(f.pageCount=e.pageCount);d("WAWebE2EProtoUtils").validateOutgoingRequiredMediaProperties(e.type,f,c("WAWebWid").isNewsletter(e.to));return{documentMessage:f}}g["default"]=a}),98);
__d("WAWebGenerateEncCommentMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return{encCommentMessage:{targetMessageKey:d("WAWebE2EProtoUtils").encodeKey(a.targetMessageKey),encIv:a.encIv,encPayload:a.encPayload}}}g["default"]=a}),98);
__d("WAWebGenerateEphemeralSyncResponseMessageProto",["WAWebE2EProtoUtils","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;a={type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SYNC_RESPONSE,ephemeralExpiration:a.ephemeralDuration,ephemeralSettingTimestamp:a.ephemeralSettingTimestamp,disappearingMode:d("WAWebE2EProtoUtils").disappearingModeInitiatorToProto(a.disappearingModeInitiator,a.disappearingModeTrigger,a.disappearingModeInitiatedByMe)};return{protocolMessage:a}}g["default"]=a}),98);
__d("WAWebGenerateGroupInviteMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json;a=a.contextInfo;return{groupInviteMessage:{inviteCode:b.inviteCode,inviteExpiration:parseInt(b.inviteCodeExp,10),groupJid:b.inviteGrp,groupName:b.inviteGrpName,caption:b.comment,jpegThumbnail:d("WAWebE2EProtoUtils").encodeBytes(b.inviteGrpJpegThum),contextInfo:a}}}g["default"]=a}),98);
__d("WAWebGenerateHsmMessageProto",["err"],(function(a,b,c,d,e,f,g){function a(a){throw c("err")("Not supported")}g["default"]=a}),98);
__d("WAWebGenerateImageMessageProto",["WATypeUtils","WAWebE2EProtoUtils","WAWebWid","err"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json,e=a.mediaMetadata;a=a.contextInfo;if(e==null)throw c("err")("generateImageMessageProto: generating image protobuf without mediaMetadata");var f=b.mimetype||e.mimetype;f={url:e.url,mimetype:f,caption:b.caption,directPath:e.directPath,fileSha256:d("WAWebE2EProtoUtils").encodeBytes(e.filehash),fileEncSha256:d("WAWebE2EProtoUtils").encodeBytes(e.encFilehash),height:e.height,width:e.width,fileLength:d("WATypeUtils").isNumber(b.size)?b.size:void 0,mediaKey:d("WAWebE2EProtoUtils").encodeBytes(e.mediaKey),mediaKeyTimestamp:d("WATypeUtils").isNumber(e.mediaKeyTimestamp)?e.mediaKeyTimestamp:void 0,jpegThumbnail:b.isViewOnce?void 0:d("WAWebE2EProtoUtils").encodeBytes(b.body),contextInfo:a,viewOnce:b.isViewOnce};d("WAWebE2EProtoUtils").validateOutgoingRequiredMediaProperties(b.type,f,c("WAWebWid").isNewsletter(b.to));return{imageMessage:f}}g["default"]=a}),98);
__d("WAWebGenerateVideoMessageProto",["WATypeUtils","WAWebE2EProtoUtils","WAWebMsgType","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json,e=a.mediaMetadata;a=a.contextInfo;var f=e==null?void 0:e.duration;f=f!=null&&d("WATypeUtils").isString(f)?parseInt(f,10):f;var g=b.caption,h=b.mimetype||(e==null?void 0:e.mimetype);h={url:e==null?void 0:e.url,mimetype:h,directPath:e==null?void 0:e.directPath,fileSha256:d("WAWebE2EProtoUtils").encodeBytes(e==null?void 0:e.filehash),fileEncSha256:d("WAWebE2EProtoUtils").encodeBytes(e==null?void 0:e.encFilehash),height:e==null?void 0:e.height,width:e==null?void 0:e.width,seconds:f,caption:g,fileLength:d("WATypeUtils").isNumber(b.size)?b.size:void 0,mediaKey:d("WAWebE2EProtoUtils").encodeBytes(e==null?void 0:e.mediaKey),mediaKeyTimestamp:d("WATypeUtils").isNumber(e==null?void 0:e.mediaKeyTimestamp)?e.mediaKeyTimestamp:void 0,jpegThumbnail:b.isViewOnce?void 0:d("WAWebE2EProtoUtils").encodeBytes(b.body),gifPlayback:b.isGif,gifAttribution:b.gifAttribution,contextInfo:a,streamingSidecar:b.streamingSidecar,viewOnce:b.isViewOnce};d("WAWebE2EProtoUtils").validateOutgoingRequiredMediaProperties(b.type,h,c("WAWebWid").isNewsletter(b.to));return b.type===d("WAWebMsgType").MSG_TYPE.PTV?{ptvMessage:h}:{videoMessage:h}}g["default"]=a}),98);
__d("WAWebGenerateInteractiveMessageProto",["WAWebE2EProtoUtils","WAWebGenerateDocumentMessageProto","WAWebGenerateImageMessageProto","WAWebGenerateVideoMessageProto","WAWebInteractiveMessageHeaderMediaType","WAWebInteractiveMessagesNativeFlowName"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json,e=a.mediaMetadata;a=a.contextInfo;var f;if(b.interactiveHeader){f={title:b.interactiveHeader.title,subtitle:b.interactiveHeader.subtitle,hasMediaAttachment:b.interactiveHeader.hasMediaAttachment};if(b.interactiveHeader.thumbnail)f=babelHelpers["extends"]({},f,{jpegThumbnail:d("WAWebE2EProtoUtils").encodeBytes(b.interactiveHeader.thumbnail)});else if(b.interactiveHeader.mediaType)switch(b.interactiveHeader.mediaType){case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.VIDEO:var g=c("WAWebGenerateVideoMessageProto")({json:b,mediaMetadata:e,contextInfo:a}).videoMessage;f=babelHelpers["extends"]({},f,{videoMessage:babelHelpers["extends"]({},g,{caption:void 0})});break;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.DOCUMENT:f=babelHelpers["extends"]({},f,{documentMessage:c("WAWebGenerateDocumentMessageProto")({json:b,mediaMetadata:e,contextInfo:a}).documentMessage});break;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.IMAGE:f=babelHelpers["extends"]({},f,{imageMessage:c("WAWebGenerateImageMessageProto")({json:b,mediaMetadata:e,contextInfo:a}).imageMessage});break}}g=babelHelpers["extends"]({body:b.caption||b.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS?{text:b.caption}:void 0,footer:b.footer?{text:b.footer}:void 0,header:f},a&&{contextInfo:a});e=d("WAWebE2EProtoUtils").getInteractiveMessageFieldNameForType(b.interactiveType);e&&(g[e]=b.interactivePayload);return{interactiveMessage:g}}g["default"]=a}),98);
__d("WAWebGenerateInteractiveResponseMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json;a=a.contextInfo;var c=b.interactivePayload,e=c.type;c=babelHelpers.objectWithoutPropertiesLoose(c,["type"]);e=d("WAWebE2EProtoUtils").getInteractiveResponseMessageFieldNameForType(e);e=(b={body:{text:b.body}},b[e]=c,b.contextInfo=a,b);return{interactiveResponseMessage:e}}g["default"]=a}),98);
__d("WAWebGenerateKeepInChatMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return{keepInChatMessage:{key:d("WAWebE2EProtoUtils").encodeKey(a.keptMessageKey),keepType:a.keepType,timestampMs:a.senderTimestampMs}}}g["default"]=a}),98);
__d("WAWebGenerateListMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.json;a=a.contextInfo;return{listMessage:babelHelpers["extends"]({},b.list,{contextInfo:a})}}f["default"]=a}),66);
__d("WAWebGenerateListResponseMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.json;a=a.contextInfo;return{listResponseMessage:babelHelpers["extends"]({},b.listResponse,{contextInfo:a})}}f["default"]=a}),66);
__d("WAWebGenerateLocationMessageProto",["WATypeUtils","WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json;a=a.contextInfo;var c={};if(b.loc&&d("WATypeUtils").isString(b.loc)){var e=b.loc.split("\n");c={name:e[0],address:e[1],url:b.clientUrl}}return{locationMessage:babelHelpers["extends"]({},c,{degreesLatitude:parseFloat(b.lat)||void 0,degreesLongitude:parseFloat(b.lng)||void 0,jpegThumbnail:d("WAWebE2EProtoUtils").encodeBytes(b.body),contextInfo:a})}}g["default"]=a}),98);
__d("WAWebGenerateMultiVcardMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.json;a=a.contextInfo;return{contactsArrayMessage:{contacts:b.vcardList.map(function(a){return a}),contextInfo:a}}}f["default"]=a}),66);
__d("WAWebGenerateNativeFlowButtonsMessageProto",["WAWebButtonsMessageProtoUtils","WAWebGenerateImageMessageProto","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.message,e=a.json,f=a.mediaMetadata;a=a.contextInfo;b=babelHelpers["extends"]({},b);if(e.headerType===d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.IMAGE){f=c("WAWebGenerateImageMessageProto")({json:e,mediaMetadata:f,contextInfo:void 0});f=f.imageMessage;b=babelHelpers["extends"]({},b,{imageMessage:f})}b=d("WAWebButtonsMessageProtoUtils").createDynamicReplyButtonsMessage(b,e,a);b.buttonsMessage=babelHelpers["extends"]({},b.buttonsMessage,{buttons:e.nativeFlowButtons});return b}g["default"]=a}),98);
__d("WAWebGenerateNewsletterAdminInviteMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json;a=a.contextInfo;b=b.newsletterAdminInviteInfo;var c=b.newsletterId,e=b.newsletterName,f=b.inviteExpiration,g=b.inviteMessage;b=b.pictureThumbnail;return{newsletterAdminInviteMessage:{newsletterJid:d("WAWebE2EProtoUtils").encodeJid(c),newsletterName:e,caption:g,inviteExpiration:f,jpegThumbnail:d("WAWebE2EProtoUtils").encodeBytes(b),contextInfo:a}}}g["default"]=a}),98);
__d("WAWebGenerateOrderMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return a.itemCount||a.message||a.orderId||a.orderTitle||a.sellerJid||a.status||a.surface||a.thumbnail||a.token||a.totalAmount1000||a.totalCurrencyCode?{orderMessage:{itemCount:a.itemCount,message:a.message,orderId:a.orderId,orderTitle:a.orderTitle,sellerJid:a.sellerJid,status:a.status,surface:a.surface,thumbnail:d("WAWebE2EProtoUtils").encodeBytes(a.thumbnail),token:a.token,totalAmount1000:a.totalAmount1000,totalCurrencyCode:a.totalCurrencyCode}}:{conversation:a.body}}g["default"]=a}),98);
__d("WAWebGeneratePaymentInviteMessageProto",["err"],(function(a,b,c,d,e,f,g){function a(a){throw c("err")("Not supported")}g["default"]=a}),98);
__d("WAWebGeneratePinMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return{pinInChatMessage:{key:d("WAWebE2EProtoUtils").encodeKey(a.pinParentKey),type:a.pinMessageType,senderTimestampMs:a.pinSenderTimestampMs},messageContextInfo:{messageAddOnDurationInSecs:a.pinExpiryDuration}}}g["default"]=a}),98);
__d("WAWebGenerateProductMessageProto",["WAWebGenerateImageMessageProto"],(function(a,b,c,d,e,f,g){function a(a){var b=a.json,d=a.mediaMetadata;a=a.contextInfo;var e;d!=null&&(e=c("WAWebGenerateImageMessageProto")({json:b,mediaMetadata:d,contextInfo:a}).imageMessage);d={product:{productImage:e,productId:b.productId,title:b.title,description:b.description,currencyCode:b.currencyCode,priceAmount1000:b.priceAmount1000||void 0,salePriceAmount1000:b.salePriceAmount1000||void 0,retailerId:b.retailerId,url:b.url,productImageCount:b.productImageCount},businessOwnerJid:b.businessOwnerJid,contextInfo:a,body:b.caption,footer:b.footer};return{productMessage:d}}g["default"]=a}),98);
__d("WAWebGenerateProtocolEphemeralSettingMessageProto",["WAWebE2EProtoUtils","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SETTING,ephemeralExpiration:a.ephemeralDuration,disappearingMode:d("WAWebE2EProtoUtils").disappearingModeInitiatorToProto(a.disappearingModeInitiator,a.disappearingModeTrigger,a.disappearingModeInitiatedByMe)}}}g["default"]=a}),98);
__d("WAWebGenerateProtocolHistorySyncNotificationMessageProto",["err"],(function(a,b,c,d,e,f,g){function a(a){throw c("err")("generateProtocolHistorySyncNotificationMessageProto: Not supported")}g["default"]=a}),98);
__d("WAWebGenerateProtocolRevokeMessageProto",["WAWebE2EProtoUtils","WAWebProtobufsE2E.pb","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return babelHelpers["extends"]({protocolMessage:{key:d("WAWebE2EProtoUtils").encodeKey(a.protocolMessageKey),type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE}},a.botTargetSenderJid instanceof c("WAWebWid")?{messageContextInfo:{botMetadata:{invokerJid:a.botTargetSenderJid.toJid()}}}:{})}g["default"]=a}),98);
__d("WAWebGenerateProtocolSharePhoneNumberMessageProto",["WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.SHARE_PHONE_NUMBER}}}g["default"]=a}),98);
__d("WAWebGenerateReactionEncMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return{encReactionMessage:{targetMessageKey:d("WAWebE2EProtoUtils").encodeKey(a.targetMessageKey),encIv:a.encIv,encPayload:a.encPayload}}}g["default"]=a}),98);
__d("WAWebGenerateRequestPhoneNumberMessageProto",[],(function(a,b,c,d,e,f){function a(a){a=a.contextInfo;return{requestPhoneNumberMessage:{contextInfo:a}}}f["default"]=a}),66);
__d("WAWebGenerateTemplateButtonReplyMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.json;a=a.contextInfo;return{templateButtonReplyMessage:{selectedId:b.selectedId,selectedIndex:b.selectedIndex,selectedCarouselCardIndex:b.selectedCarouselCardIndex,selectedDisplayText:b.body,contextInfo:a}}}f["default"]=a}),66);
__d("WAWebGenerateVcardMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.json;a=a.contextInfo;return{contactMessage:{displayName:b.vcardFormattedName,vcard:b.body,contextInfo:a}}}f["default"]=a}),66);
__d("WAWebPollsGeneratePollCreationMessageProto",[],(function(a,b,c,d,e,f){function a(a){var b=a.msgContext,c=a.contextInfo;a=a.json;b=b==="quoted"?{name:a.pollName,options:[]}:{name:a.pollName,options:a.pollOptions.map(function(a){a=a.name;return{optionName:a}}),selectableOptionsCount:a.pollSelectableOptionsCount};c=c?babelHelpers["extends"]({},b,{contextInfo:c}):b;if(a.isSentCagPollCreation)return{pollCreationMessageV2:c};return a.pollSelectableOptionsCount===1?{pollCreationMessageV3:c}:{pollCreationMessage:c}}f["default"]=a}),66);
__d("WAWebPollsGeneratePollVoteMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;a={pollCreationMessageKey:d("WAWebE2EProtoUtils").encodeKey(a.pollUpdateParentKey),vote:a.encPollVote,senderTimestampMs:a.senderTimestampMs};return{pollUpdateMessage:a}}g["default"]=a}),98);
__d("WAWebPttGenerateAudioOrPttMessageProto",["invariant","WALogger","WATypeUtils","WAWebAudioMessageProtoUtils","WAWebE2EProtoUtils","WAWebWid"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Outgoing waveform with invalid size: ",""]);i=function(){return a};return a}function a(a){var b=a.json,e=a.mediaMetadata;a=a.contextInfo;e||h(0,66891);var f=b.mimetype||e.mimetype,g=e.duration,j=b.waveform||e.waveform;g=g!=null&&d("WATypeUtils").isString(g)?parseInt(g,10):g;f={url:e.url,mimetype:f,directPath:e.directPath,fileSha256:d("WAWebE2EProtoUtils").encodeBytes(e.filehash),fileEncSha256:d("WAWebE2EProtoUtils").encodeBytes(e.encFilehash),seconds:g,ptt:b.type==="ptt",fileLength:d("WATypeUtils").isNumber(b.size)?b.size:void 0,mediaKey:d("WAWebE2EProtoUtils").encodeBytes(e.mediaKey),mediaKeyTimestamp:d("WATypeUtils").isNumber(e.mediaKeyTimestamp)?e.mediaKeyTimestamp:void 0,contextInfo:a,streamingSidecar:b.streamingSidecar,viewOnce:b.isViewOnce};j&&(d("WAWebAudioMessageProtoUtils").validateWaveform(j)?f.waveform=j.buffer:d("WALogger").ERROR(i(),j.byteLength).sendLogs("outgoing-waveform-invalid-size"));d("WAWebE2EProtoUtils").validateOutgoingRequiredMediaProperties(b.type?"ptt":"audio",f,c("WAWebWid").isNewsletter(b.to));return{audioMessage:f}}g["default"]=a}),98);
__d("WAWebReactionsGenerateReactionMessageProto",["WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;return{reactionMessage:{key:d("WAWebE2EProtoUtils").encodeKey(a.reactionParentKey),text:a.reactionText,senderTimestampMs:a.reactionTimestamp}}}g["default"]=a}),98);
__d("WAWebStickersGenerateStickerMessageProto",["invariant","WALogger","WATypeUtils","WAWebE2EProtoUtils","WAWebMsgType","WAWebStickerMimeUtils","WAWebWid","err"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid sticker mimetype: ",""]);i=function(){return a};return a}function a(a){var b=a.contextInfo,e=a.json;a=a.mediaMetadata;a!=null||h(0,66810);if(a.mimetype!=null&&!d("WAWebStickerMimeUtils").getValidStickerMimeTypes().has(a.mimetype)){d("WALogger").WARN(i(),a.mimetype);throw c("err")("invalid sticker mimetype")}a={url:a.url,mimetype:a.mimetype,directPath:a.directPath,fileSha256:d("WAWebE2EProtoUtils").encodeBytes(a.filehash),fileEncSha256:d("WAWebE2EProtoUtils").encodeBytes(a.encFilehash),mediaKey:d("WAWebE2EProtoUtils").encodeBytes(a.mediaKey),mediaKeyTimestamp:d("WATypeUtils").isNumber(a.mediaKeyTimestamp)?a.mediaKeyTimestamp:void 0,fileLength:d("WATypeUtils").isNumber(e.size)?e.size:void 0,height:e.height,width:e.width,firstFrameLength:a.firstFrameLength,firstFrameSidecar:e.firstFrameSidecar||void 0,isAnimated:a.isAnimated,isLottie:a.isLottie,stickerSentTs:e.stickerSentTs,contextInfo:b};d("WAWebE2EProtoUtils").validateOutgoingRequiredMediaProperties(d("WAWebMsgType").MSG_TYPE.STICKER,a,c("WAWebWid").isNewsletter(e.to));return{stickerMessage:a}}g["default"]=a}),98);
__d("WAWebMessagePluginGenerateProtobufRegistry",["WAWebEventsGenerateEventResponseMessageProto","WAWebGenerateBizContentPlaceholderProto","WAWebGenerateBotFeedbackProtocolMessageProto","WAWebGenerateBotRequestWelcomeMessageProto","WAWebGenerateButtonsResponseMessageProto","WAWebGenerateCancelPaymentMessageProto","WAWebGenerateChatMessageProto","WAWebGenerateDeclinePaymentMessageProto","WAWebGenerateDocumentMessageProto","WAWebGenerateEncCommentMessageProto","WAWebGenerateEphemeralSyncResponseMessageProto","WAWebGenerateExtendedTextUrlChatMessageProto","WAWebGenerateGroupInviteMessageProto","WAWebGenerateHsmMessageProto","WAWebGenerateImageMessageProto","WAWebGenerateInteractiveMessageProto","WAWebGenerateInteractiveResponseMessageProto","WAWebGenerateKeepInChatMessageProto","WAWebGenerateListMessageProto","WAWebGenerateListResponseMessageProto","WAWebGenerateLocationMessageProto","WAWebGenerateMultiVcardMessageProto","WAWebGenerateNativeFlowButtonsMessageProto","WAWebGenerateNewsletterAdminInviteMessageProto","WAWebGenerateOrderMessageProto","WAWebGeneratePaymentInviteMessageProto","WAWebGeneratePinMessageProto","WAWebGenerateProductMessageProto","WAWebGenerateProtocolEphemeralSettingMessageProto","WAWebGenerateProtocolHistorySyncNotificationMessageProto","WAWebGenerateProtocolMessageEditProto","WAWebGenerateProtocolRevokeMessageProto","WAWebGenerateProtocolSharePhoneNumberMessageProto","WAWebGenerateReactionEncMessageProto","WAWebGenerateRequestPaymentMessageProto","WAWebGenerateRequestPhoneNumberMessageProto","WAWebGenerateSendPaymentMessageProto","WAWebGenerateTemplateButtonReplyMessageProto","WAWebGenerateVcardMessageProto","WAWebGenerateVideoMessageProto","WAWebPollsGeneratePollCreationMessageProto","WAWebPollsGeneratePollVoteMessageProto","WAWebPttGenerateAudioOrPttMessageProto","WAWebReactionsGenerateReactionMessageProto","WAWebStickersGenerateStickerMessageProto"],(function(a,b,c,d,e,f,g){b=[{type:"audio",subtype:void 0,generateProtobuf:c("WAWebPttGenerateAudioOrPttMessageProto")},{type:"biz_content_placeholder",subtype:void 0,generateProtobuf:c("WAWebGenerateBizContentPlaceholderProto")},{type:"buttons_response",subtype:void 0,generateProtobuf:c("WAWebGenerateButtonsResponseMessageProto")},{type:"chat",subtype:"url",generateProtobuf:c("WAWebGenerateExtendedTextUrlChatMessageProto")},{type:"chat",subtype:void 0,generateProtobuf:c("WAWebGenerateChatMessageProto")},{type:"ciphertext",subtype:"bot_unavailable_fanout",generateProtobuf:null},{type:"ciphertext",subtype:"fanout",generateProtobuf:null},{type:"ciphertext",subtype:"hosted_unavailable_fanout",generateProtobuf:null},{type:"ciphertext",subtype:void 0,generateProtobuf:null},{type:"comment",subtype:void 0,generateProtobuf:c("WAWebGenerateEncCommentMessageProto")},{type:"debug_placeholder",subtype:void 0,generateProtobuf:null},{type:"document",subtype:void 0,generateProtobuf:c("WAWebGenerateDocumentMessageProto")},{type:"event_creation",subtype:void 0,generateProtobuf:null},{type:"event_edit_encrypted",subtype:void 0,generateProtobuf:null},{type:"event_response",subtype:void 0,generateProtobuf:c("WAWebEventsGenerateEventResponseMessageProto")},{type:"groups_v4_invite",subtype:void 0,generateProtobuf:c("WAWebGenerateGroupInviteMessageProto")},{type:"hsm",subtype:void 0,generateProtobuf:c("WAWebGenerateHsmMessageProto")},{type:"image",subtype:void 0,generateProtobuf:c("WAWebGenerateImageMessageProto")},{type:"interactive",subtype:void 0,generateProtobuf:c("WAWebGenerateInteractiveMessageProto")},{type:"interactive_response",subtype:void 0,generateProtobuf:c("WAWebGenerateInteractiveResponseMessageProto")},{type:"keep_in_chat",subtype:void 0,generateProtobuf:c("WAWebGenerateKeepInChatMessageProto")},{type:"list",subtype:void 0,generateProtobuf:c("WAWebGenerateListMessageProto")},{type:"list_response",subtype:void 0,generateProtobuf:c("WAWebGenerateListResponseMessageProto")},{type:"location",subtype:void 0,generateProtobuf:c("WAWebGenerateLocationMessageProto")},{type:"multi_vcard",subtype:void 0,generateProtobuf:c("WAWebGenerateMultiVcardMessageProto")},{type:"native_flow",subtype:void 0,generateProtobuf:c("WAWebGenerateNativeFlowButtonsMessageProto")},{type:"newsletter_admin_invite",subtype:void 0,generateProtobuf:c("WAWebGenerateNewsletterAdminInviteMessageProto")},{type:"notification_template",subtype:"contact_info_card",generateProtobuf:null},{type:"order",subtype:void 0,generateProtobuf:c("WAWebGenerateOrderMessageProto")},{type:"payment",subtype:"ciphertext",generateProtobuf:null},{type:"payment",subtype:"futureproof",generateProtobuf:null},{type:"payment",subtype:"invite",generateProtobuf:c("WAWebGeneratePaymentInviteMessageProto")},{type:"payment",subtype:"request",generateProtobuf:c("WAWebGenerateRequestPaymentMessageProto")},{type:"payment",subtype:"send",generateProtobuf:c("WAWebGenerateSendPaymentMessageProto")},{type:"pin_message",subtype:void 0,generateProtobuf:c("WAWebGeneratePinMessageProto")},{type:"pinned_message",subtype:void 0,generateProtobuf:null},{type:"poll_creation",subtype:void 0,generateProtobuf:c("WAWebPollsGeneratePollCreationMessageProto")},{type:"poll_update",subtype:"poll_vote",generateProtobuf:c("WAWebPollsGeneratePollVoteMessageProto")},{type:"product",subtype:void 0,generateProtobuf:c("WAWebGenerateProductMessageProto")},{type:"protocol",subtype:"admin_revoke",generateProtobuf:a=c("WAWebGenerateProtocolRevokeMessageProto")},{type:"protocol",subtype:"bot_feedback",generateProtobuf:c("WAWebGenerateBotFeedbackProtocolMessageProto")},{type:"protocol",subtype:"bot_request_welcome",generateProtobuf:c("WAWebGenerateBotRequestWelcomeMessageProto")},{type:"protocol",subtype:"ephemeral_setting",generateProtobuf:c("WAWebGenerateProtocolEphemeralSettingMessageProto")},{type:"protocol",subtype:"ephemeral_sync_response",generateProtobuf:c("WAWebGenerateEphemeralSyncResponseMessageProto")},{type:"protocol",subtype:"history_sync_notification",generateProtobuf:c("WAWebGenerateProtocolHistorySyncNotificationMessageProto")},{type:"protocol",subtype:"message_edit",generateProtobuf:c("WAWebGenerateProtocolMessageEditProto")},{type:"protocol",subtype:"sender_revoke",generateProtobuf:a},{type:"protocol",subtype:"share_phone_number",generateProtobuf:c("WAWebGenerateProtocolSharePhoneNumberMessageProto")},{type:"ptt",subtype:void 0,generateProtobuf:c("WAWebPttGenerateAudioOrPttMessageProto")},{type:"ptv",subtype:void 0,generateProtobuf:c("WAWebGenerateVideoMessageProto")},{type:"reaction",subtype:void 0,generateProtobuf:c("WAWebReactionsGenerateReactionMessageProto")},{type:"reaction_enc",subtype:void 0,generateProtobuf:c("WAWebGenerateReactionEncMessageProto")},{type:"request_phone_number",subtype:void 0,generateProtobuf:c("WAWebGenerateRequestPhoneNumberMessageProto")},{type:"revoked",subtype:"admin",generateProtobuf:a},{type:"revoked",subtype:"sender",generateProtobuf:a},{type:"sticker",subtype:void 0,generateProtobuf:c("WAWebStickersGenerateStickerMessageProto")},{type:"template_button_reply",subtype:void 0,generateProtobuf:c("WAWebGenerateTemplateButtonReplyMessageProto")},{type:"unknown",subtype:"payment_action_request_declined",generateProtobuf:c("WAWebGenerateDeclinePaymentMessageProto")},{type:"unknown",subtype:"payment_transaction_request_cancelled",generateProtobuf:c("WAWebGenerateCancelPaymentMessageProto")},{type:"unknown",subtype:"phone",generateProtobuf:null},{type:"unknown",subtype:"phone_only_feature",generateProtobuf:null},{type:"unknown",subtype:void 0,generateProtobuf:null},{type:"vcard",subtype:void 0,generateProtobuf:c("WAWebGenerateVcardMessageProto")},{type:"video",subtype:void 0,generateProtobuf:c("WAWebGenerateVideoMessageProto")}];g["default"]=b}),98);
__d("WAWebE2EProtoGenerator",["WATypeUtils","WAWebBizCoexGatingUtils","WAWebBotGating","WAWebButtonsMessageProtoUtils","WAWebConversionTupleCollection","WAWebE2EProtoUtils","WAWebMessagePluginGenerateProtobuf","WAWebMessagePluginGenerateReportingTokenContent","WAWebMessagingGatingUtils","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebReportingTokenUtils","WAWebURLUtils","WAWebWid","WAWebWidFactory","lodash"],(function(a,b,c,d,e,f,g){function a(a,b,c){if(!b&&!c)return;a.messageContextInfo=babelHelpers["extends"]({},a.messageContextInfo,{deviceListMetadata:{senderKeyHash:b==null?void 0:b.keyHash,senderTimestamp:b==null?void 0:b.timestamp,senderKeyIndexes:b==null?void 0:b.keyIndexes,recipientKeyHash:c==null?void 0:c.keyHash,recipientTimestamp:c==null?void 0:c.timestamp,recipientKeyIndexes:c==null?void 0:c.keyIndexes,senderAccountType:d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()?b==null?void 0:b.senderAccountType:void 0,receiverAccountType:d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()?c==null?void 0:c.receiverAccountType:void 0},deviceListMetadataVersion:2})}function b(a){if(a.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL)return{};switch(a.subtype){case"app_state_sync_key_share":return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.APP_STATE_SYNC_KEY_SHARE,appStateSyncKeyShare:a.appStateSyncKeyShare}};case"app_state_sync_key_request":return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.APP_STATE_SYNC_KEY_REQUEST,appStateSyncKeyRequest:a.appStateSyncKeyRequest}};case"app_state_fatal_exception_notification":return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.APP_STATE_FATAL_EXCEPTION_NOTIFICATION,appStateFatalExceptionNotification:a.appStateFatalExceptionNotification}};case"peer_data_operation_request_message":return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.PEER_DATA_OPERATION_REQUEST_MESSAGE,peerDataOperationRequestMessage:a.peerDataOperationRequestMessage}};case"peer_data_operation_request_response_message":return{protocolMessage:{type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE,peerDataOperationRequestResponseMessage:a.peerDataOperationRequestResponseMessage}}}return{}}function e(a,b){var c=i(a);return h(c,b,(c=a.utm)!=null?c:void 0)}function f(a){return h(a)}function h(a,b,c){var e={};if(a.quotedMsg){var f=a.quotedMsg.mentionedJidList,g=a.quotedMsg.groupMentions,h=[],i=[];Array.isArray(f)&&f.length>0&&h.push.apply(h,f.map(d("WAWebE2EProtoUtils").encodeJid));Array.isArray(g)&&g.length>0&&i.push.apply(i,g.map(function(a){return{groupSubject:a.groupSubject,groupJid:d("WAWebE2EProtoUtils").encodeJid(a.groupJid)}}));f=h.length>0||i.length>0?{mentionedJid:h,groupMentions:i}:void 0;e.stanzaId=a.quotedStanzaID;e.remoteJid=d("WAWebE2EProtoUtils").encodeJid(a.quotedRemoteJid);e.participant=d("WAWebE2EProtoUtils").encodeJid(a.quotedParticipant);g={duration:a.quotedMsg.duration,directPath:a.quotedMsg.directPath,encFilehash:a.quotedMsg.encFilehash,filehash:a.quotedMsg.filehash,height:a.quotedMsg.height,mediaKey:a.quotedMsg.mediaKey,mediaKeyTimestamp:d("WATypeUtils").isNumber(a.quotedMsg.mediaKeyTimestamp)?a.quotedMsg.mediaKeyTimestamp:void 0,mimetype:a.quotedMsg.mimetype,url:a.quotedMsg.clientUrl||a.quotedMsg.deprecatedMms3Url,width:a.quotedMsg.width};e.quotedMessage=j(a.quotedMsg,g,f,void 0,"quoted")}else a.quotedRemoteJid&&a.quotedGroupSubject&&a.quotedParentGroupJid?(e.remoteJid=d("WAWebE2EProtoUtils").encodeJid(a.quotedRemoteJid),e.groupSubject=a.quotedGroupSubject,e.parentGroupJid=d("WAWebE2EProtoUtils").encodeJid(a.quotedParentGroupJid)):a.quotedRemoteJid&&(e.remoteJid=d("WAWebE2EProtoUtils").encodeJid(a.quotedRemoteJid));if(a.mentionedJidList&&a.mentionedJidList.length>0){h=a.mentionedJidList;e.mentionedJid=h.map(d("WAWebE2EProtoUtils").encodeJid)}a.groupMentions&&a.groupMentions.length>0&&(e.groupMentions=a.groupMentions.map(function(a){return{groupSubject:a.groupSubject,groupJid:d("WAWebE2EProtoUtils").encodeJid(a.groupJid)}}));a.conversionTuple&&Object.assign(e,a.conversionTuple);a.isForwarded&&(e.isForwarded=a.isForwarded);a.forwardingScore&&(e.forwardingScore=a.forwardingScore);if(a.forwardedNewsletterMessageInfo){i=a.forwardedNewsletterMessageInfo;g=i.newsletterId;f=i.newsletterName;h=i.serverMessageId;e.forwardedNewsletterMessageInfo={newsletterJid:d("WAWebE2EProtoUtils").encodeJid(g),newsletterName:f,serverMessageId:h}}a.ephemeralDuration&&(e.expiration=a.ephemeralDuration);a.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=a.ephemeralSettingTimestamp);a.disappearingModeInitiator&&(e.disappearingMode=d("WAWebE2EProtoUtils").disappearingModeInitiatorToProto(a.disappearingModeInitiator,a.disappearingModeTrigger,a.disappearingModeInitiatedByMe));a.ctwaContext&&(e.externalAdReply={sourceUrl:a.ctwaContext.sourceUrl,sourceId:a.ctwaContext.sourceId,sourceType:a.ctwaContext.sourceType,body:a.ctwaContext.description,title:a.ctwaContext.title,thumbnailUrl:a.ctwaContext.thumbnailUrl,thumbnail:a.ctwaContext.thumbnail?d("WAWebE2EProtoUtils").encodeBytes(a.ctwaContext.thumbnail):void 0,mediaType:a.ctwaContext.mediaType,mediaUrl:a.ctwaContext.mediaUrl});c&&(e.utm={utmCampaign:c.campaign!=null?c.campaign:void 0,utmSource:c.source!=null?c.source:void 0});return j(a,b,Object.keys(e).length>0?e:void 0)}function i(a){var b=a.id,d=a.toJSON();delete d.status;delete d.mimetype;delete d.height;delete d.width;delete d.recipients;delete d.chat;delete d.broadcast;delete d.ack;delete d.invis;delete d.filehash;delete d.recvFresh;delete d.mediaData;c("WAWebURLUtils").isHttp(a.clientUrl)||delete d.clientUrl;c("WAWebURLUtils").isHttp(a.deprecatedMms3Url)||delete d.deprecatedMms3Url;for(a in d)d[a]==null&&delete d[a];a=c("WAWebConversionTupleCollection").get(b.remote);a&&(d.conversionTuple=a.serialize());return d}function j(a,b,c,e,f){b===void 0&&(b={});c===void 0&&(c=void 0);b=k(a,b,c,e,f);!(d("WAWebBotGating").isBotEnabled()&&((e=a.invokedBotWid)==null?void 0:e.isBot()))&&a.messageSecret&&(b.messageContextInfo=babelHelpers["extends"]({},b.messageContextInfo,{messageSecret:a.messageSecret}));d("WAWebBotGating").isBotEnabled()&&a.botPersonaId!=null&&(b.messageContextInfo=babelHelpers["extends"]({},b.messageContextInfo,{botMetadata:{personaId:a.botPersonaId}}));if(d("WAWebBotGating").isBotEnabled()&&a.subtype==="bot_feedback"){b.messageContextInfo=babelHelpers["extends"]({},b.messageContextInfo,{botMetadata:babelHelpers["extends"]({},((f=b.messageContextInfo)==null?void 0:f.botMetadata)||{},{invokerJid:(e=a.botTargetSenderJid)==null?void 0:e.toJid()})})}b=q(b,a,c);if(d("WAWebMessagingGatingUtils").isReportingTokenSendingEnabled()&&d("WAWebMessagePluginGenerateReportingTokenContent").isMsgTypeReportingTokenCompatible(a.type,a.subtype)){b.messageContextInfo=babelHelpers["extends"]({},b.messageContextInfo,{messageSecret:(e=(f=b.messageContextInfo)==null?void 0:f.messageSecret)!=null?e:a.messageSecret,reportingTokenVersion:d("WAWebReportingTokenUtils").REPORTING_TOKEN_VERSION.DEFAULT})}return b}function k(a,b,c,e,f){b===void 0&&(b={});c===void 0&&(c=void 0);e=e?e:{};f=d("WAWebMessagePluginGenerateProtobuf").generateProtobuf({message:e,msgContext:f,contextInfo:c,json:a,mediaMetadata:b});if(f!=null)return f;switch(a.type){case"template":a.subtype==="text"?(a.type="chat",a.title&&(a.body="*"+a.title+"*\n"+a.body)):a.type=a.subtype;return j(a,b,c,e)}return e}function l(a,b){return b.type==="ptt"?{viewOnceMessageV2Extension:{message:a}}:{viewOnceMessage:{message:a}}}function m(a){return{documentWithCaptionMessage:{message:a}}}function n(a){return{lottieStickerMessage:{message:a}}}function o(a){return{groupMentionedMessage:{message:a}}}function p(a){return{botInvokeMessage:{message:a}}}function q(a,b,e){var f,g=a;b.isViewOnce&&(g=l(g,b));b.isDynamicReplyButtonsMsg===!0&&(g=d("WAWebButtonsMessageProtoUtils").createDynamicReplyButtonsMessage(g,b,e));b.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&Boolean((f=g.documentMessage)==null?void 0:f.caption)&&(g=m(g));b.type===d("WAWebMsgType").MSG_TYPE.STICKER&&Boolean((f=g.stickerMessage)==null?void 0:f.isLottie)&&(g=n(g));(e==null?void 0:(f=e.groupMentions)==null?void 0:f.length)&&!g.editedMessage&&(g=o(g));if(((e=b.invokedBotWid)==null?void 0:e.isBot())||b.subtype==="bot_request_welcome"){g=p(g);if(d("WAWebBotGating").isBotEnabled()){g.messageContextInfo=babelHelpers["extends"]({},g.messageContextInfo,{messageSecret:b.messageSecret,botMetadata:babelHelpers["extends"]({},((f=a.messageContextInfo)==null?void 0:f.botMetadata)||{},b.botTargetSenderJid instanceof c("WAWebWid")?{invokerJid:b.botTargetSenderJid.toJid()}:{})})}}return g}function r(a,b){a=c("lodash").cloneDeep(a);a.messageContextInfo=babelHelpers["extends"]({},a.messageContextInfo,{messageSecret:null});b&&(a.messageContextInfo=babelHelpers["extends"]({},a.messageContextInfo,{botMessageSecret:b}));b=(a==null?void 0:(b=a.botInvokeMessage)==null?void 0:(b=b.message)==null?void 0:(b=b.extendedTextMessage)==null?void 0:b.contextInfo)||(a==null?void 0:(b=a.extendedTextMessage)==null?void 0:b.contextInfo);if((b==null?void 0:b.quotedMessage)!=null){var e;b.participant!=null&&((e=d("WAWebWidFactory").createWid(b.participant))==null?void 0:e.isBot())!==!0&&(delete b.quotedMessage,delete b.stanzaId,delete b.remoteJid,delete b.participant)}e=a==null?void 0:(e=a.protocolMessage)==null?void 0:(b=e.botFeedbackMessage)==null?void 0:b.messageKey;e!=null&&e.remoteJid!=null&&delete e.remoteJid;b=(a==null?void 0:(b=a.protocolMessage)==null?void 0:b.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE?a==null?void 0:(e=a.protocolMessage)==null?void 0:e.key:null;b!=null&&b.remoteJid!=null&&delete b.remoteJid;return a}g.populateMessageContextInfo=a;g.createPeerMsgProtobuf=b;g.createMsgProtobuf=e;g.createAddonProtobuf=f;g.getProtobufMessage=j;g.updateBotInvokeMsgProtoCopyForCapi=r}),98);
__d("WAWebApiHistorySyncNotification",["Promise","WALogger","WAWebHistorySyncNotificationUtils","WAWebHistorySyncProgress","WAWebProtobufsHistorySync.pb","WAWebSchemaHistorySyncNotification","WAWebSyncGatingUtils","WAWebUserPrefsHistorySync","WAWebUserPrefsTypes","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] fetched next history sync chunk for processing, ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] isPreviousChunkProcessed returned false for ","_",", last processed: "," "]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] isPreviousChunkProcessed: next chunk already processed ","_",", last processed: "," "]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] check if previous recent sync is processed with optimized logic"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] isPreviousChunkProcessed returned false for ","_",", last processed: "," "]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] isPreviousChunkProcessed: next chunk already processed ","_",", last processed: "," "]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] add history sync notification, ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] updateCurrentlyProcessed failed with error ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] remove history sync notfication from db with ","_",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] getNextUnProcessedNotification chunkOrder is null, ",""]);r=function(){return a};return a}var s=new Set(),t={};function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.PUSH_NAME)return!0;if([d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.FULL,d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT].includes(a)&&b===1||d("WAWebSyncGatingUtils").isHistorySyncOnDemandEnabled()&&a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND&&b===0){if(a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT){var e=(yield d("WAWebUserPrefsHistorySync").getInitialHistorySyncComplete());return e===!0}e=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatus());return!!(e==null?void 0:e.recentCompleted)}e=(yield d("WAWebUserPrefsHistorySync").getLastHistorySyncedChunk());if(e==null)return!1;var f=e.split("_"),g=f[0];f=f[1];if(g===""+a&&f===""+(b-1))return!0;else if(g===""+a&&f===""+b){d("WALogger").LOG(n(),a,b,e).tags("history-sync");yield z(c,a,b);return!1}d("WALogger").LOG(m(),a,b,e).tags("history-sync");return!1});return v.apply(this,arguments)}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(l());if(b===1){var e=(yield d("WAWebUserPrefsHistorySync").getInitialHistorySyncComplete());return e===!0}e=(yield d("WAWebUserPrefsHistorySync").getLastHistoryRecentSyncedChunk());if(e==null)return!1;var f=e.chunkOrder;if(f===b-1)return!0;else if(f===b){d("WALogger").LOG(k(),a,b,e).tags("history-sync");yield z(c,a,b);return!1}d("WALogger").LOG(j(),a,b,f).tags("history-sync");return!1});return x.apply(this,arguments)}function y(a){a=d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().equals(["processed"],0,{shouldDecrypt:!1}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.filter(function(a){return!s.has(a.msgKey)&&!a.reuploadPending}).sort(function(a,b){if(a.syncType!==b.syncType)return b.syncType-a.syncType;return a.chunkOrder!=null&&b.chunkOrder!=null?a.chunkOrder-b.chunkOrder:0});a=a.length>0?a[0]:void 0;b=(b=a)==null?void 0:b.chunkOrder;if(b==null){var c;d("WALogger").LOG(r(),(c=a)==null?void 0:c.msgKey).tags("history-sync");return void 0}if(a){a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&d("WAWebSyncGatingUtils").isRecentSyncNextChunkFetchOptimizationEnabled()?c=(yield w(a.syncType,b,a.msgKey)):c=(yield u(a.syncType,b,a.msgKey));d("WAWebHistorySyncProgress").handleChunkProgress(c);if(!c)return void 0;a=(yield d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().postflightDecryptSingleRecord(a))}return a});return function(b){return a.apply(this,arguments)}}());return!a?(h||(h=b("Promise"))).reject(c("err")("[history sync] getNextUnProcessed history sync notification: not supported for non MD")):a}function z(a,b,c){d("WALogger").LOG(q(),b,c);s["delete"](a);return d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().remove(a)["catch"](function(a){d("WALogger").LOG(p(),a).tags("history-sync")})}function a(a){s["delete"](a);return d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().merge(a,{reuploadPending:!0})}function e(a){s["delete"](a)}function A(a){var b=d("WAWebHistorySyncNotificationUtils").getHistorySyncBasicChunkInfoString(a.syncType,a.chunkOrder,a.isReupload);d("WALogger").DEV(o(),b);b=a.downloadOptions.mediaKey;var c=a.downloadOptions.directPath,e=a.downloadOptions.filehash,f=a.downloadOptions.encFilehash;a.downloadOptions.mediaKey="";a.downloadOptions.directPath="";a.downloadOptions.filehash="";a.downloadOptions.encFilehash="";b=babelHelpers["extends"]({},a,{chunkEncryptionKey:b,directPath:c,filehash:e,encFilehash:f});a.processed=0;return d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().createOrMerge(a.msgKey,b)}function f(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1),yield A(a).then(function(){void d("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(a.syncType,d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.NOTIFICATION_STORED,a.chunkOrder)}),b&&s.add(a.msgKey)});return B.apply(this,arguments)}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(s.size>0)return null;var a=(yield y());if(a){var b=d("WAWebHistorySyncNotificationUtils").getHistorySyncBasicChunkInfoString(a==null?void 0:a.syncType,a==null?void 0:a.chunkOrder,a==null?void 0:a.isReupload);d("WALogger").DEV(i(),b);a.downloadOptions.mediaKey=a.chunkEncryptionKey;delete a.chunkEncryptionKey;a.downloadOptions.directPath=a.directPath||a.downloadOptions.directPath;delete a.directPath;a.downloadOptions.filehash=a.downloadOptions.filehash===""?a.filehash:a.downloadOptions.filehash;delete a.filehash;a.downloadOptions.encFilehash=a.encFilehash;delete a.encFilehash;s.add(a.msgKey)}return a});return D.apply(this,arguments)}g.inFlightChunk=s;g.recentSyncChunkHandlingTriedCount=t;g.updateCurrentlyProcessed=z;g.markChunkForReuploadPending=a;g.removeLocalFailureFromInFlightChunk=e;g.addNotification=A;g.enqueueNotification=f;g.fetchNextHistorySyncChunkForProcessing=C}),98);
__d("WAWebApiStatusV3",["WAJids","WALogger","WATimeUtils","WAWebAck","WAWebDBMessageSerialization","WAWebDBMessageStoreUtils","WAWebDBMessageUtils","WAWebDbEncryptionKey","WAWebMsgType","WAWebSchemaMessage","WAWebWidFactory","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Message id: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Author is null for status v3 message"]);i=function(){return a};return a}function a(){var a=d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID);return d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey().then(function(){return d("WAWebDBMessageStoreUtils").queryChatMessageHelper(d("WAWebDBMessageUtils").beginningOfChat(a),d("WAWebDBMessageUtils").endOfChat(a),{lowerInclusive:!1,upperInclusive:!1}).then(function(a){var b=[],e=[];a.forEach(function(a){!a.author?(d("WALogger").WARN(i()),d("WALogger").DEV(h(),a.id)):d("WATimeUtils").happenedWithin(d("WATimeUtils").castToUnixTime(a.t),d("WATimeUtils").DAY_SECONDS)&&a.type!==d("WAWebMsgType").MSG_TYPE.REVOKED?a.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL&&e.push(d("WAWebDBMessageSerialization").messageFromDbRow(a)):b.push(a.id)});d("WAWebSchemaMessage").getMessageTable().bulkRemove(b);a=c("lodash").groupBy(e,function(a){return a.author.toString()});var f=[];for(var g in a){var j=a[g],k=j.filter(function(a){return a.ack<d("WAWebAck").ACK.READ}).length,l=j[j.length-1].t;f.push({id:d("WAWebWidFactory").createWid(g),unreadCount:k,totalCount:j.length,t:l,_msgs:j})}return f})})}g.getAllStatuses=a}),98);
__d("WAWebSettingsGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createSettingsCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;d=b("archive");a=c(function(a){a=a[0];return!a.enabled?!1:!a.classic},[d]);g.clearSettingsGetterCacheFor=f;g.getArchive=d;g.getShowArchiveV2=a}),98);
__d("WAWebSettingsModel",["WAWebBaseModel","WAWebSettingsGetters"],(function(a,b,c,d,e,f,g){var h={classic:!1,enabled:!1};a={duration:0,settingTimestamp:0};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.archive=d("WAWebBaseModel").prop(),c.disappearingMode=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c["delete"]=function(){this.set({archive:h,disappearingMode:h}),a.prototype["delete"].call(this),d("WAWebSettingsGetters").clearSettingsGetterCacheFor(this)};return b}(d("WAWebBaseModel").BaseModel);b.Proxy="settings";c=d("WAWebBaseModel").defineModel(b);e=new c({id:"default_settings_id",archive:h,disappearingMode:a});g["default"]=e}),98);
__d("WAWebInitFromStorage",["Promise","WALogger","WAWebAgentCollection","WAWebApiHydrateWidsUtil","WAWebBizGatingUtils","WAWebBlocklistCollection","WAWebCartCollection","WAWebChatAssignmentCollection","WAWebCommunityActivityCollection","WAWebConnModel","WAWebFavoriteStickerCollection","WAWebGroupMetadataCollection","WAWebLabelCollection","WAWebLogoutReasonConstants","WAWebMobilePlatforms","WAWebModelStorageUtils","WAWebNonMessageDataRequestMediaHandlingUtils","WAWebQuickReplyCollection","WAWebRecentStickerCollectionMd","WAWebSchemaAgent","WAWebSchemaBlocklist","WAWebSchemaCart","WAWebSchemaChatAssignment","WAWebSchemaFavoriteStickers","WAWebSchemaLabel","WAWebSchemaNonMessageDataRequest","WAWebSchemaQuickReply","WAWebSchemaRecentStickers","WAWebSchemaSubscription","WAWebSchemaUnjoinedSubgroupMetadata","WAWebSettingsGetters","WAWebSettingsModel","WAWebSocketModel","WAWebSubscriptionCollection","WAWebUnjoinedSubgroupMetadataCollection","WAWebUserPrefsGeneral","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreUnjoinedSubgroups: complete restoring unjoined subgroups"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreUnjoinedSubgroups: start restoring unjoined subgroups"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[InitFromStorage] important metadata loaded"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["platform not found in UserPrefs."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[InitFromStorage] will attempt to initialize metadata from storage"]);m=function(){return a};return a}function a(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(m());d("WAWebConnModel").Conn.trigger("me_ready");d("WAWebConnModel").Conn.meReadyTriggered=!0;var a=d("WAWebUserPrefsGeneral").getPushname(),b=(yield d("WAWebUserPrefsGeneral").getLastMobilePlatform());if(b==null){d("WALogger").ERROR(l());return d("WAWebSocketModel").Socket.logout(d("WAWebLogoutReasonConstants").LogoutReason.UnknownCompanion)}yield d("WAWebMobilePlatforms").setMobilePlatform(b,!1);d("WAWebConnModel").Conn.pushname=a;d("WAWebConnModel").Conn.platform=b;d("WALogger").LOG(k())});return n.apply(this,arguments)}function e(){return d("WAWebSchemaBlocklist").getBlocklistTable().all().then(function(a){d("WAWebBlocklistCollection").BlocklistCollection.initializeFromCache(a.map(d("WAWebApiHydrateWidsUtil").hydrateWids))})}function f(){return d("WAWebBizGatingUtils").canDisplayLabel()?d("WAWebSchemaLabel").getLabelTable().all().then(function(a){d("WAWebLabelCollection").LabelCollection.initializeFromCache(a)}):(h||(h=b("Promise"))).resolve()}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizGatingUtils").canDisplayLabel()){var a=[];yield d("WAWebModelStorageUtils").getStorage().lock(["label","label-association"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b[0];b=b[1];c=(yield c.all());c=c.map(function(a){return a.id});b=(yield b.anyOf(["labelId"],c));a.push.apply(a,b)});return function(a){return c.apply(this,arguments)}}());a.length>0&&d("WAWebLabelCollection").LabelCollection.initializeAssociationsFromCache(a)}return(h||(h=b("Promise"))).resolve()});return p.apply(this,arguments)}function q(){return d("WAWebBizGatingUtils").canSendQuickReply()?d("WAWebSchemaQuickReply").getQuickReplyTable().all().then(function(a){d("WAWebQuickReplyCollection").QuickReplyCollection.initializeFromCache(a)}):(h||(h=b("Promise"))).resolve()}function r(){return d("WAWebSchemaRecentStickers").getRecentStickersTable().all().then(function(a){return d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.initializeFromCache(a)})}function s(){return d("WAWebSchemaFavoriteStickers").getFavoriteStickersTable().all().then(function(a){return d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.initializeFromCache(a)})}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsMultiDevice").getArchiveV2EnabledSetting()),b=(yield d("WAWebUserPrefsMultiDevice").getUnarchiveChatsSetting());a!=null&&(c("WAWebSettingsModel").archive=babelHelpers["extends"]({},d("WAWebSettingsGetters").getArchive(c("WAWebSettingsModel")),{enabled:a}));b!=null&&(c("WAWebSettingsModel").archive=babelHelpers["extends"]({},d("WAWebSettingsGetters").getArchive(c("WAWebSettingsModel")),{classic:b}))});return u.apply(this,arguments)}function v(){return d("WAWebSchemaCart").getCartTable().all().then(function(a){d("WAWebCartCollection").CartCollection.initializeFromCache(a.map(d("WAWebApiHydrateWidsUtil").hydrateWids))})}function w(){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizGatingUtils").isMultiDeviceMessageAttributionEnabled()){var a=(yield d("WAWebSchemaAgent").getAgentTable().all());d("WAWebAgentCollection").AgentCollection.initializeFromCache(a)}});return x.apply(this,arguments)}function y(){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSchemaSubscription").getSubscriptionTable().all());d("WAWebSubscriptionCollection").SubscriptionCollection.initializeFromCache(a)});return z.apply(this,arguments)}function A(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizGatingUtils").chatAssignmentEnabled()){var a=(yield d("WAWebSchemaChatAssignment").getChatAssignmentTable().all());d("WAWebChatAssignmentCollection").ChatAssignmentCollection.initializeFromCache(a)}});return B.apply(this,arguments)}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").DEV(j());try{var a=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().all());a.forEach(function(a){c("WAWebUnjoinedSubgroupMetadataCollection").add({id:d("WAWebWidFactory").createWid(a.id),subject:a.subject,subjectTime:a.subjectTime,defaultSubgroup:a.defaultSubgroup,parentGroupId:d("WAWebWidFactory").createWid(a.parentGroup)},{merge:!0})})}finally{d("WALogger").DEV(i())}});return D.apply(this,arguments)}function E(){var a=c("WAWebGroupMetadataCollection").filter(function(a){return a.isParentGroup});a=a.map(function(a){return c("WAWebCommunityActivityCollection").syncActivityFor(a.id)});return(h||(h=b("Promise"))).all(a)}function F(){return d("WAWebSchemaNonMessageDataRequest").getNonMessageDataRequestTable().all().then(function(a){d("WAWebNonMessageDataRequestMediaHandlingUtils").initializeMediaUploadResultFromStorage(a)})}g.restoreImportantMetaData=a;g.restoreBlocklist=e;g.restoreLabels=f;g.restoreLabelAssociations=o;g.restoreQuickReplies=q;g.restoreRecentStickers=r;g.restoreFavoriteStickers=s;g.restoreArchiveV2Settings=t;g.restoreCarts=v;g.restoreAgents=w;g.restoreSubscriptions=y;g.restoreChatAssignments=A;g.restoreUnjoinedSubgroups=C;g.restoreCommunityActivity=E;g.restoreMediaUploadResult=F}),98);
__d("WAWebArchiveChatSync",["Promise","WALogger","WANullthrows","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebApiActiveMessageRanges","WAWebChatDbUpdatesApi","WAWebMessageRangeUtils","WAWebPinChatSync","WAWebSchemaChat","WAWebSettingsGetters","WAWebSettingsModel","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][archive-chat]: archive-",", rangeEnclosedType-",", chatId-",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][archive-chat]: shouldKeepChatsArchived-",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][archive-chat]: archive-",", chatId-",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][archive-chat]: REMOVE operation not supported"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][archive-chat]: malformed mutation"]);m=function(){return a};return a}function n(a,b){switch(b){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:return{actionState:d("WASyncdConst").SyncActionState.Success};case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:a.toString()}}}}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.getVersion=function(){return 3};f.getAction=function(){return d("WASyncdConst").Actions.Archive};f.getChatJidAndMessageKey=function(a){a=a.indexArr;a=a[1];a||d("WAWebSyncdActionUtils").throwInvalidActionIndex();return{chatJid:a,messageKey:null}};f.validateSyncActionValue=function(a){a=a.archiveChatAction;var b=a==null?void 0:a.archived;return b!=null&&d("WAWebMessageRangeUtils").validateMessageRange(a==null?void 0:a.messageRange)};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this,f=new Map();yield d("WAWebSchemaChat").getChatTable().bulkGet(a.map(function(a){a=a.indexParts;a=a[1];return!a||!c("WAWebWid").isWid(a)?null:d("WAWebWidFactory").createWid(a).toString()}).filter(Boolean)).then(function(a){return a.forEach(function(a){a&&f.set(a.id,a)})});var g=[];a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b=a.indexParts;a=a.value;b=b[1];b||d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(!c("WAWebWid").isWid(b)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var h=a.archiveChatAction;if(!e.validateSyncActionValue(a)){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var i=c("WANullthrows")(h==null?void 0:h.archived);h=c("WANullthrows")(h==null?void 0:h.messageRange);b=d("WAWebWidFactory").createWid(b);if(!f.has(b.toString()))return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:b.toString()}};b=(yield e.$ArchiveChatSync1(b,i,h,a));b.updates&&g.push(b.updates);return b.syncApplyActionResult}d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}())));g.length>0&&(yield d("WAWebChatDbUpdatesApi").setArchive(g));return a});function e(b){return a.apply(this,arguments)}return e}();f.$ArchiveChatSync1=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){yield d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("archive"));if(!b){d("WALogger").DEV(k(),b,a.toString());return{updates:{id:a.toString(),archive:b},syncApplyActionResult:{actionState:d("WASyncdConst").SyncActionState.Success}}}var g=(yield d("WAWebMessageRangeUtils").constructMessageRange(a,!1));g=d("WAWebMessageRangeUtils").compareMessageRanges(g,e);var h=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,f).readBuffer();e=function(){return d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("archive"),h)};f=d("WAWebSettingsGetters").getShowArchiveV2(c("WAWebSettingsModel"));d("WALogger").DEV(j(),f);d("WALogger").DEV(i(),b,g,a.toLogString());switch(g){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:yield e();return{updates:{id:a.toString(),archive:b},syncApplyActionResult:n(a,g)};case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:if(f)return{updates:{id:a.toString(),archive:b},syncApplyActionResult:n(a,g)};yield e();return{updates:void 0,syncApplyActionResult:n(a,g)}}});function e(b,c,d,e){return a.apply(this,arguments)}return e}();f.$ArchiveChatSync2=function(a){return[a.toString({legacy:!0})]};f.getArchiveChatMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b={archiveChatAction:{archived:b,messageRange:yield d("WAWebMessageRangeUtils").constructMessageRange(c,!0)}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:this.$ArchiveChatSync2(c),value:b,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})});function c(b,c,d){return a.apply(this,arguments)}return c}();f.getMutationsForArchive=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e=[yield this.getArchiveChatMutation(a,b,d)];b&&e.push(c("WAWebPinChatSync").getPinMutation(a,!1,d));return e});function d(b,c,d){return a.apply(this,arguments)}return d}();f.resolveConflicts=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction),g=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,e.binarySyncData).value,h=a.timestamp;e=e.timestamp;f=c("WANullthrows")(f.archiveChatAction);var i=c("WANullthrows")(g==null?void 0:g.archiveChatAction),j=d("WAWebMessageRangeUtils").compareMessageRanges(c("WANullthrows")(i.messageRange),c("WANullthrows")(f.messageRange));switch(j){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:return d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:return d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:return h<=e?d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal:d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:var k=h<=e?(j=i.archived)!=null?j:!1:(h=f.archived)!=null?h:!1;e=d("WAWebMessageRangeUtils").mergeMessageRanges(c("WANullthrows")(i.messageRange),c("WANullthrows")(f.messageRange));j={archived:k,messageRange:e};var l=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,babelHelpers["extends"]({},g,{archiveChatAction:j})).readBuffer();h=babelHelpers["extends"]({},a,{binarySyncAction:l});delete h.id;yield d("WAWebMessageRangeUtils").lockForMessageRangeSync(["chat"],[h],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=JSON.parse(a.index);b=d("WAWebWidFactory").createWid(b[1]);yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(b.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("archive"),l);return d("WAWebChatDbUpdatesApi").setArchive([{id:b.toString(),archive:k}])}));return d("WASyncdConst").ConflictResolutionState.SkipRemoteAndDropLocal}});function e(b,c){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebBotWelcomeRequestSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebChatCollection","WAWebDBUpdateChatTable","WAWebSyncdActionUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[BotWelcomeRequestSync] mutation generated, set bot welcome request to "," for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[BotWelcomeRequestSync] operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[BotWelcomeRequestSync]: set bot welcome request to "," for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[BotWelcomeRequestSync]: could not find chat"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[BotWelcomeRequestSync]: malformed mutation. isSent is not of boolean type"]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var e=c.prototype;e.getVersion=function(){return 2};e.getAction=function(){return d("WASyncdConst").Actions.BotWelcomeRequest};e.applyMutations=function(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{switch(a.operation){case"set":var b=a.indexParts;a=a.value;b=b[1];b||d("WAWebSyncdActionUtils").throwInvalidActionIndex();a=(a=a.botWelcomeRequestAction)==null?void 0:a.isSent;if(a==null){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var c=d("WAWebWidFactory").createWid(b),e=d("WAWebChatCollection").ChatCollection.get(c);if(!e){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Orphan}}d("WALogger").DEV(k(),a,b);e.hasRequestedWelcomeMsg=a;yield d("WAWebDBUpdateChatTable").updateChatTable(c,{hasRequestedWelcomeMsg:a});return{actionState:d("WASyncdConst").SyncActionState.Success};default:d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};e.getBotWelcomeRequestSetMutation=function(a,b){var c={botWelcomeRequestAction:{isSent:b}};c=d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[a.toString({legacy:!0})],value:c,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:d("WATimeUtils").unixTime(),action:this.getAction()});d("WALogger").DEV(i(),b,a).devConsole(c);return c};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebAndroidUnsupportedActionsSync",["Promise","WALogger","WASyncdAction","WASyncdConst","WAWebUserPrefsAppStateSync"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd] primary allows all mutations flag set: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["locale setting sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: androidUnsupportedMutation has invalid 'allowed' value"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set primary allows all mutations flag"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["android unsupported actions: malformed mutation"]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var e=c.prototype;e.getVersion=function(){return 4};e.getAction=function(){return d("WASyncdConst").Actions.AndroidUnsupportedActions};e.applyMutations=function(a){var c=this;return(h||(h=b("Promise"))).all(a.map(function(a){try{if(a.operation==="set"){a=a.value;a=a.androidUnsupportedActions;if(!a){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=a.allowed;a?(c.updatePrimaryAllowsAllMutationsFlag("allow_unsupported_mutation"),d("WALogger").DEV(l())):d("WALogger").DEV(k());return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}}))};e.updatePrimaryAllowsAllMutationsFlag=function(a){d("WAWebUserPrefsAppStateSync").getPrimaryAllowsAllMutations()||(d("WALogger").LOG(i(),a),d("WAWebUserPrefsAppStateSync").setPrimaryAllowsAllMutations())};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebWamEnumMdFeatureCode",[],(function(a,b,c,d,e,f){a=Object.freeze({PIN_MUTATION:1,UNPIN_4TH_CHAT_MUTATION:2,DELETE_MUTATION:3,CLEAR_CHAT_REMOVE_STARRED_MUTATION:4,CLEAR_CHAT_KEEP_STARRED_MUTATION:5});f.MD_FEATURE_CODE=a}),66);
__d("WAWebMdSyncdDogfoodingFeatureUsageWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdFeatureCode"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdSyncdDogfoodingFeatureUsage:[3016,{mdSyncdDogfoodingFeature:[1,d("WAWebWamEnumMdFeatureCode").MD_FEATURE_CODE]},[1,1,1],"regular"]},{MdSyncdDogfoodingFeatureUsage:[]});g.MdSyncdDogfoodingFeatureUsageWamEvent=a}),98);
__d("WAWebClearChatSync",["Promise","WALogger","WANullthrows","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebAndroidUnsupportedActionsSync","WAWebApiActiveMessageRanges","WAWebBackendApi","WAWebChatCollection","WAWebDBMessageRange","WAWebDBQueryAndRemoveMessageHistory","WAWebMdSyncdDogfoodingFeatureUsageWamEvent","WAWebMessageRangeUtils","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebSchemaChat","WAWebSyncdActionUtils","WAWebSyncdDb","WAWebSyncdUtils","WAWebWamEnumMdFeatureCode","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][clear-chat]: chatId-",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][clear-chat]: REMOVE operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][clear-chat]: malformed mutation"]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.getVersion=function(){return 6};f.getAction=function(){return d("WASyncdConst").Actions.ClearChat};f.getChatJidAndMessageKey=function(a){a=a.indexArr;a=a[1];a||d("WAWebSyncdActionUtils").throwInvalidActionIndex();return{chatJid:a,messageKey:null}};f.$ClearChatSync1=function(a,b){var c=new Set();a.forEach(function(a){if(a.actionName===d("WASyncdConst").Actions.Star&&a.timestamp>b){a=d("WAWebSyncdActionUtils").getMsgKeyFromStarActionIndex(a.index);c.add(a.toString())}});return c};f.validateSyncActionValue=function(a){a=a.clearChatAction;return d("WAWebMessageRangeUtils").validateMessageRange(a==null?void 0:a.messageRange)};f.applyMutations=function(a,e){var f=this;c("WAWebAndroidUnsupportedActionsSync").updatePrimaryAllowsAllMutationsFlag("other mutation");var g=e.allSupportedSetMutations;return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b,e=a.indexParts,h=a.value,i=e[1],l=e[2];e=e[3];(!i||!l||!e)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(!c("WAWebWid").isWid(i)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!f.validateSyncActionValue(h)){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=c("WANullthrows")((b=h.clearChatAction)==null?void 0:b.messageRange);i=d("WAWebWidFactory").createWid(i);var m=i.toString(),n=(yield d("WAWebSchemaChat").getChatTable().get(m,!1));if(!n)return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:m}};n=f.$ClearChatSync1(g,a.timestamp);return f.$ClearChatSync2(i,b,l==="1",e==="0",n,h)}d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};f.clearChat=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=(yield d("WAWebDBQueryAndRemoveMessageHistory").queryAndRemoveMessagesInMessageRange(a,b,{skipStarred:!c,skipMessages:e}));b.length>0&&(d("WAWebBackendApi").frontendFireAndForget("deleteModelsForLastAddOnPreview",{messagesIds:b}),yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.toString(),b)));c=d("WAWebChatCollection").ChatCollection.get(a);c&&c.deleteMessages(b)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();f.$ClearChatSync2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){g=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,g).readBuffer();d("WALogger").DEV(i(),a.toString());yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("clearChat",{deleteMedia:e,deleteStarred:c}),g);yield this.clearChat(a,b,c,f);return{actionState:d("WASyncdConst").SyncActionState.Success}});function c(b,c,d,e,f,g){return a.apply(this,arguments)}return c}();f.getClearChatMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){c("gkx")("26258")||new(d("WAWebMdSyncdDogfoodingFeatureUsageWamEvent").MdSyncdDogfoodingFeatureUsageWamEvent)({mdSyncdDogfoodingFeature:e?d("WAWebWamEnumMdFeatureCode").MD_FEATURE_CODE.CLEAR_CHAT_REMOVE_STARRED_MUTATION:d("WAWebWamEnumMdFeatureCode").MD_FEATURE_CODE.CLEAR_CHAT_KEEP_STARRED_MUTATION}).commit();var g=(yield d("WAWebMessageRangeUtils").constructForwardMovingMessageRange(b));b=this.$ClearChatSync3(b,e,f||!1);e=(yield d("WAWebSyncdDb").getPendingMutationsRowsByIndex(["index"],d("WASyncdActionUtils").buildIndex(this.getAction(),b)));if(e.length){f=e.reduce(function(a,b){return a.timestamp>b.timestamp?a:b});e=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,f.binarySyncAction);e=(f=e.clearChatAction)==null?void 0:f.messageRange;e&&(g=d("WAWebMessageRangeUtils").mergeMessageRanges(g,e),d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(g.lastMessageTimestamp,"pendingMutationRange"))}f={clearChatAction:{messageRange:g}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:b,value:f,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})});function e(b,c,d,e){return a.apply(this,arguments)}return e}();f.$ClearChatSync3=function(a,b,c){return[a.toString({legacy:!0}),b?"1":"0",c?"1":"0"]};f.resolveConflicts=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this,g=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction),h=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,e.binarySyncData).value,i=a.timestamp;e=e.timestamp;g=c("WANullthrows")(g.clearChatAction);var j=c("WANullthrows")(h==null?void 0:h.clearChatAction),k=d("WAWebMessageRangeUtils").compareMessageRanges(c("WANullthrows")(j.messageRange),c("WANullthrows")(g.messageRange));switch(k){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:return d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:return d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:return i<=e?d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal:d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:var l=d("WAWebMessageRangeUtils").mergeMessageRanges(c("WANullthrows")(j.messageRange),c("WANullthrows")(g.messageRange));k={messageRange:l};var m=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,babelHelpers["extends"]({},h,{clearChatAction:k})).readBuffer();i=babelHelpers["extends"]({},a,{binarySyncAction:m});delete i.id;yield d("WAWebMessageRangeUtils").lockForMessageRangeSync([],[i],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=JSON.parse(a.index),c=d("WAWebWidFactory").createWid(b[1]),e=b[2]==="1";b=b[3]==="1";yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(c.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("clearChat",{deleteStarred:e,deleteMedia:b}),m);return f.clearChat(c,l,e)}));return d("WASyncdConst").ConflictResolutionState.SkipRemoteAndDropLocal}});function e(b,c){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WADeleteChatSyncBase",["WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getVersion=function(){return 6};c.getAction=function(){return d("WASyncdConst").Actions.DeleteChat};c.buildDeleteChatMutation=function(a){var b=a.timestamp,c=a.chatId,e=a.mergedRange;a=a.deleteMediaFiles;e={deleteChatAction:{messageRange:e}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:this.buildDeleteChatIndexArgs(c,a),value:e,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:b,action:this.getAction()})};c.buildDeleteChatIndexArgs=function(a,b){return[a,b?"1":"0"]};return b}(d("WASyncdAction").SyncActionBase);g.DeleteChatSyncBase=a}),98);
__d("WAWebDeleteChatSync",["Promise","WADeleteChatSyncBase","WALogger","WANullthrows","WASyncAction.pb","WASyncdActionUtils","WASyncdConst","WAWebAndroidUnsupportedActionsSync","WAWebApiActiveMessageRanges","WAWebBackendApi","WAWebChatCollection","WAWebChatDeleteBridge","WAWebDBMessageRange","WAWebDBQueryAndRemoveMessageHistory","WAWebMdSyncdDogfoodingFeatureUsageWamEvent","WAWebMessageRangeUtils","WAWebNonMessageDataRequestHistorySyncOnDemandUtils","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebSchemaChat","WAWebSyncdActionUtils","WAWebSyncdDb","WAWebSyncdUtils","WAWebWamEnumMdFeatureCode","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][delete-chat]: rangeEnclosedType-"," chatId-",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][delete-chat]: REMOVE operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][delete-chat]: malformed mutation"]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.validateSyncActionValue=function(a){a=a.deleteChatAction;return d("WAWebMessageRangeUtils").validateMessageRange(a==null?void 0:a.messageRange)};f.applyMutations=function(a){var e=this;c("WAWebAndroidUnsupportedActionsSync").updatePrimaryAllowsAllMutationsFlag("other mutation");return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b,f=a.indexParts;a=a.value;var g=f[1];f=f[2];(!g||!f)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(!c("WAWebWid").isWid(g)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!e.validateSyncActionValue(a)){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=c("WANullthrows")((b=a.deleteChatAction)==null?void 0:b.messageRange);g=d("WAWebWidFactory").createWid(g);var h=g.toString(),i=(yield d("WAWebSchemaChat").getChatTable().get(h,!1));return!i?{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:h}}:e.$DeleteChatSync1(g,b,f==="0",a)}d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};f.deleteChat=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebChatCollection").ChatCollection.get(a);if(b){b=(yield d("WAWebDBQueryAndRemoveMessageHistory").queryAndRemoveMessagesInMessageRange(a,b,{forceDeleteAllMessages:!0}));b.length>0&&(d("WAWebBackendApi").frontendFireAndForget("deleteModelsForLastAddOnPreview",{messagesIds:b}),yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.toString(),b)));c&&c.deleteMessages(b)}else yield d("WAWebChatDeleteBridge").deleteFromStorage(a),c&&c["delete"]();d("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").deleteChatFromInitialSyncBoundary(a)});function c(b,c){return a.apply(this,arguments)}return c}();f.$DeleteChatSync1=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,e).readBuffer();yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("deleteChat",{deleteMedia:c}),e);c=(yield d("WAWebMessageRangeUtils").constructMessageRange(a,!1));e=d("WAWebMessageRangeUtils").compareMessageRanges(c,b);d("WALogger").DEV(i(),e,a.toString());switch(e){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:yield this.deleteChat(a,b);break;default:yield this.deleteChat(a);break}return{actionState:d("WASyncdConst").SyncActionState.Success}});function c(b,c,d,e){return a.apply(this,arguments)}return c}();f.getDeleteChatMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){c("gkx")("26258")||new(d("WAWebMdSyncdDogfoodingFeatureUsageWamEvent").MdSyncdDogfoodingFeatureUsageWamEvent)({mdSyncdDogfoodingFeature:d("WAWebWamEnumMdFeatureCode").MD_FEATURE_CODE.DELETE_MUTATION}).commit();var f=d("WAWebWidToJid").widToChatJid(b);b=(yield d("WAWebMessageRangeUtils").constructForwardMovingMessageRange(b));var g=d("WASyncdActionUtils").buildIndex(this.getAction(),this.buildDeleteChatIndexArgs(f,e||!1));g=(yield d("WAWebSyncdDb").getPendingMutationsRowsByIndex(["index"],g));if(g.length){g=g.reduce(function(a,b){return a.timestamp>b.timestamp?a:b});g=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,g.binarySyncAction);g=(g=g.deleteChatAction)==null?void 0:g.messageRange;g&&(b=d("WAWebMessageRangeUtils").mergeMessageRanges(b,g),d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(b.lastMessageTimestamp,"pendingMutationRange"))}return this.buildDeleteChatMutation({timestamp:a,chatId:f,mergedRange:b,deleteMediaFiles:e||!1})});function e(b,c,d){return a.apply(this,arguments)}return e}();f.resolveConflicts=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this,g=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction),h=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,e.binarySyncData).value,i=a.timestamp;e=e.timestamp;g=c("WANullthrows")(g.deleteChatAction);var j=c("WANullthrows")(h==null?void 0:h.deleteChatAction),k=d("WAWebMessageRangeUtils").compareMessageRanges(c("WANullthrows")(j.messageRange),c("WANullthrows")(g.messageRange));switch(k){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:return d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:return d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:return i<=e?d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal:d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:var l=d("WAWebMessageRangeUtils").mergeMessageRanges(c("WANullthrows")(j.messageRange),c("WANullthrows")(g.messageRange));k={messageRange:l};var m=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,babelHelpers["extends"]({},h,{deleteChatAction:k})).readBuffer();i=babelHelpers["extends"]({},a,{binarySyncAction:m});delete i.id;yield d("WAWebMessageRangeUtils").lockForMessageRangeSync([],[i],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=JSON.parse(a.index),c=d("WAWebWidFactory").createWid(b[1]);yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(c.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("deleteChat",{deleteMedia:b[2]==="1"}),m);return f.deleteChat(c,l)}));return d("WASyncdConst").ConflictResolutionState.SkipRemoteAndDropLocal}});function e(b,c){return a.apply(this,arguments)}return e}();return e}(d("WADeleteChatSyncBase").DeleteChatSyncBase);e=new a();g["default"]=e}),98);
__d("WAWebMarkChatAsReadSync",["Promise","WALogger","WANullthrows","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebApiActiveMessageRanges","WAWebChatCollection","WAWebConstantsDeprecated","WAWebMessageRangeUtils","WAWebSchemaChat","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebUpdateUnreadChatAction","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][mark-chat-as-read]: isChatMarkedUnreadByUser-true"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][mark-chat-as-read]: read-",", rangeEnclosedType-",", chatId-",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][mark-chat-as-read]: operation not supported"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd][mark-chat-as-read]: malformed mutation"]);l=function(){return a};return a}function m(a,b){switch(b){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:return{actionState:d("WASyncdConst").SyncActionState.Success};case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:a.toString()}}}}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.getVersion=function(){return 3};f.getAction=function(){return d("WASyncdConst").Actions.MarkChatAsRead};f.$MarkChatAsReadSync1=function(a,b){a=d("WAWebChatCollection").ChatCollection.get(a);a&&(b?d("WAWebUpdateUnreadChatAction").markSeen(a):d("WAWebUpdateUnreadChatAction").markUnseen(a))};f.$MarkChatAsReadSync2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaChat").getChatTable().get(a.toString(),!1));return(a==null?void 0:a.unreadCount)===c("WAWebConstantsDeprecated").MARKED_AS_UNREAD});function e(b){return a.apply(this,arguments)}return e}();f.validateSyncActionValue=function(a){a=a.markChatAsReadAction;var b=a==null?void 0:a.read;return b!=null&&d("WAWebMessageRangeUtils").validateMessageRange(a==null?void 0:a.messageRange)};f.applyMutations=function(a){var e=this;return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b,f,g=a.indexParts;a=a.value;g=g[1];g||d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(!e.validateSyncActionValue(a)){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!c("WAWebWid").isWid(g)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=c("WANullthrows")((b=a.markChatAsReadAction)==null?void 0:b.read);f=c("WANullthrows")((f=a.markChatAsReadAction)==null?void 0:f.messageRange);g=d("WAWebWidFactory").createWid(g);var h=g.toString(),i=(yield d("WAWebSchemaChat").getChatTable().get(h,!1));return!i?{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:h}}:e.$MarkChatAsReadSync3(g,b,f,a)}d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};f.$MarkChatAsReadSync3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){yield d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("markChatAsRead"));var g=(yield d("WAWebMessageRangeUtils").constructMessageRange(a,!1));g=d("WAWebMessageRangeUtils").compareMessageRanges(g,e);var k=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,f).readBuffer();e=function(){return d("WAWebApiActiveMessageRanges").addActiveMessageRange(a.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("markChatAsRead"),k)};d("WALogger").DEV(j(),c,g,a.toString());switch(g){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:yield e();this.$MarkChatAsReadSync1(a,c);return(h||(h=b("Promise"))).resolve(m(a,g));case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:c&&(yield this.$MarkChatAsReadSync2(a))&&(d("WALogger").DEV(i()),this.$MarkChatAsReadSync1(a,c));return(h||(h=b("Promise"))).resolve(m(a,g))}});function c(b,c,d,e){return a.apply(this,arguments)}return c}();f.$MarkChatAsReadSync4=function(a){return[a.toString({legacy:!0})]};f.getMarkChatAsReadMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b={markChatAsReadAction:{read:b,messageRange:yield d("WAWebMessageRangeUtils").constructMessageRange(c,!0)}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:this.$MarkChatAsReadSync4(c),value:b,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})});function c(b,c,d){return a.apply(this,arguments)}return c}();f.resolveConflicts=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this,g=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction),h=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,e.binarySyncData).value,i=a.timestamp;e=e.timestamp;g=c("WANullthrows")(g.markChatAsReadAction);var j=c("WANullthrows")(h==null?void 0:h.markChatAsReadAction),k=d("WAWebMessageRangeUtils").compareMessageRanges(c("WANullthrows")(j.messageRange),c("WANullthrows")(g.messageRange));switch(k){case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB:return d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeBEnclosesRangeA:return d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesAreEqual:return i<=e?d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal:d("WASyncdConst").ConflictResolutionState.SkipRemote;case d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing:var l=i<=e?(k=j.read)!=null?k:!1:(i=g.read)!=null?i:!1;e=d("WAWebMessageRangeUtils").mergeMessageRanges(c("WANullthrows")(j.messageRange),c("WANullthrows")(g.messageRange));k={read:l,messageRange:e};var m=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,babelHelpers["extends"]({},h,{markChatAsReadAction:k})).readBuffer();i=babelHelpers["extends"]({},a,{binarySyncAction:m});delete i.id;yield d("WAWebMessageRangeUtils").lockForMessageRangeSync(["chat"],[i],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=JSON.parse(a.index);b=d("WAWebWidFactory").createWid(b[1]);yield d("WAWebApiActiveMessageRanges").addActiveMessageRange(b.toString(),d("WAWebApiActiveMessageRanges").getActiveRangeAction("markChatAsRead"),m);return f.$MarkChatAsReadSync1(b,l)}));return d("WASyncdConst").ConflictResolutionState.SkipRemoteAndDropLocal}});function e(b,c){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebMessageRangeUtils",["$InternalEnum","WALogger","WALongInt","WASyncAction.pb","WASyncdConst","WAWebApiActiveMessageRanges","WAWebDBMessageRange","WAWebSchemaActiveMessageRanges","WAWebSyncd","WAWebSyncdDb","WAWebSyncdUtils","WAWebTimestampConversionUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["constructForwardMovingMessageRange: deleteMessageForMeAction malformed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["constructForwardMovingMessageRange: delete for me mutation index malformed ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: deleteForMeSyncActions length: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: constructing forward moving message range for ","\n      ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: constructing current message range for ","\n      ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["message_range_utils: malformed message key for id ",""]);n=function(){return a};return a}var o=b("$InternalEnum").Mirrored(["RangeAEnclosesRangeB","RangeBEnclosesRangeA","RangesAreEqual","RangesNotEnclosing"]);function p(a,b){var c=new Set(a.messages.map(function(a){return(a=a.key)==null?void 0:a.id}));for(var e=0;e<b.messages.length;e++)if(b.messages[e].timestamp==null){var f;if(!c.has((f=b.messages[e].key)==null?void 0:f.id))return!1}for(f=0;f<b.messages.length;f++){if(!c.has((e=b.messages[f].key)==null?void 0:e.id)&&d("WALongInt").numberOrThrowIfTooLarge((e=a.lastMessageTimestamp)!=null?e:0)<=d("WALongInt").numberOrThrowIfTooLarge((e=b.messages[f].timestamp)!=null?e:0))return!1}return!0}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e,f=(yield (e=d("WAWebDBMessageRange")).getLastMessageTimestamp(a));e.logMaybeMillisecondTimestamp(f,"getLastMessageTimestamp");var g=(yield e.getLastSystemMessageTimestamp(a));e.logMaybeMillisecondTimestamp(g,"lastSystemMessageTimestamp");e=(yield e.getAdditionalMessages(a,f,c));c=e.messages;e=e.newLastMessageTimestamp;e!=null&&(f=e,d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(e,"newLastMessageTimestamp"));if(f==null){e=c.sort(d("WAWebDBMessageRange").timestampComparison);f=(e=e[c.length-1])==null?void 0:e.timestamp;d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(f,"sorting")}e={messages:c};f!=null&&(e.lastMessageTimestamp=f);g!=null&&((f==null||g>d("WALongInt").numberOrThrowIfTooLarge(f))&&(e.lastSystemMessageTimestamp=g,d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(e.lastSystemMessageTimestamp,"lastSystemMessageTimestamp")));if(b&&e.lastMessageTimestamp==null){c=(yield d("WAWebDBMessageRange").getFirstSystemMessageTimestamp(a));c!=null&&(e.lastMessageTimestamp=c,d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(e.lastMessageTimestamp,"firstSystemMessageTimestamp"),c===g&&(e.lastSystemMessageTimestamp=void 0))}d("WALogger").DEV(m(),a.toString({legacy:!0}),JSON.stringify(e,null,2));return e});return r.apply(this,arguments)}function a(a,b){var c=p(a,b);b=p(b,a);if(c&&b)return o.RangesAreEqual;else if(c)return o.RangeAEnclosesRangeB;else if(b)return o.RangeBEnclosesRangeA;return o.RangesNotEnclosing}function s(a,b,c){var e=new Map();a=a.concat(b);a.forEach(function(a){var b,f;b=(b=(b=a.key)==null?void 0:b.id)!=null?b:"";if(d("WALongInt").numberOrThrowIfTooLarge((f=a.timestamp)!=null?f:0)>=c){f=e.get(b);if(f){var g;e.set(b,d("WALongInt").numberOrThrowIfTooLarge((g=f.timestamp)!=null?g:0)<d("WALongInt").numberOrThrowIfTooLarge((g=a.timestamp)!=null?g:0)?a:f)}else e.set(b,a)}});return Array.from(e.values())}function t(a,b){var c,e;c=d("WALongInt").numberOrThrowIfTooLarge((c=a.lastMessageTimestamp)!=null?c:0);e=d("WALongInt").numberOrThrowIfTooLarge((e=b.lastMessageTimestamp)!=null?e:0);c=Math.max(c,e);e=s(a.messages,b.messages,c);e={messages:e};c!==0&&(e.lastMessageTimestamp=c);if(a.lastSystemMessageTimestamp!=null||b.lastSystemMessageTimestamp!=null){b=Math.max(d("WALongInt").numberOrThrowIfTooLarge((a=a.lastSystemMessageTimestamp)!=null?a:0),d("WALongInt").numberOrThrowIfTooLarge((a=b.lastSystemMessageTimestamp)!=null?a:0));(c==null||b>c)&&(e.lastSystemMessageTimestamp=b)}return e}var u=[[(h=d("WAWebWamEnumMdSyncdCriticalEventCode")).MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_LAST_SYSTEM_MESSAGE_TIMESTAMP_SET,function(a){var b=a.lastSystemMessageTimestamp;a=a.lastMessageTimestamp;return b!=null&&a!=null&&d("WALongInt").numberOrThrowIfTooLarge(b)<d("WALongInt").numberOrThrowIfTooLarge(a)}],[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGES_CROSS_LIMIT,function(a){return a.messages.filter(function(a){return a.timestamp!=null}).length>1e3}]],v=[[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGE_KEY_UNSET,function(a){return a.key==null}],[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_UNSET,function(a){return((a=a.key)==null?void 0:a.remoteJid)==null}],[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGE_KEY_FROM_ME_UNSET,function(a){return((a=a.key)==null?void 0:a.fromMe)==null}],[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGE_KEY_STANZA_ID_UNSET,function(a){return((a=a.key)==null?void 0:a.id)==null}],[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_INVALID,function(a){return!d("WAWebWidFactory").isWidlike((a=a.key)==null?void 0:a.remoteJid)}],[h.MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_MESSAGE_KEY_PARTICIPANT_UNSET,function(a){var b;return c("WAWebWid").isGroup((b=a.key)==null?void 0:b.remoteJid)&&!((b=a.key)==null?void 0:b.fromMe)&&((b=a.key)==null?void 0:b.participant)==null}]];function e(a){if(a==null){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.MESSAGE_RANGE_UNSET);return!1}for(var b of u){var c=b[0],e=b[1];if(e(a)){d("WAWebSyncdUtils").uploadCriticalEventMetric(c);return!1}}for(e of a.messages)for(c of v){b=c[0];a=c[1];if(a(e)){d("WALogger").DEV(n(),(a=e.key)==null?void 0:a.id);d("WAWebSyncdUtils").uploadCriticalEventMetric(b);return!1}}return!0}function f(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield q(a,!0,b));b=(yield d("WAWebApiActiveMessageRanges").getActiveMessageRanges(a.toString()));b.forEach(function(a){var b=a.actionValue.messageRange;b&&(d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(b.lastMessageTimestamp,"activeRanges"),d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(b.lastSystemMessageTimestamp,"activeRangesSystem"));switch(a.action){case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredDeleteMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredKeepMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredDeleteMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredKeepMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatDeleteMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatKeepMedia:b=a.actionValue.messageRange;b&&(c=t(c,b));break;case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.MarkChatAsRead:break}});d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(c.lastMessageTimestamp,"intermediaForwardMovingRange");b=(yield x(a));c.messages=s(c.messages,b,d("WALongInt").numberOrThrowIfTooLarge((b=c.lastMessageTimestamp)!=null?b:0));c=d("WAWebDBMessageRange").fixMessageRange(c);d("WAWebDBMessageRange").logMaybeMillisecondTimestamp(c.lastMessageTimestamp,"forwardMovingRange");d("WALogger").DEV(l(),a.toString({legacy:!0}),JSON.stringify(c,null,2));return c});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],c=(yield d("WAWebSyncdDb").getSyncActionsRows(["action"],[d("WASyncdConst").Actions.DeleteMessageForMe]));d("WALogger").LOG(k(),c.length);c.forEach(function(c){var e=a.toString({legacy:!0}),f=JSON.parse(c.index);if(f.length!==5)d("WALogger").LOG(j(),c.index);else if(e===f[1]&&c.actionState===d("WASyncdConst").SyncActionState.Success){e=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,c.binarySyncData).value;e=e==null?void 0:(c=e.deleteMessageForMeAction)==null?void 0:c.messageTimestamp;if(e==null)d("WALogger").LOG(i());else{c={remoteJid:f[1],id:f[2],fromMe:f[3]==="1",participant:f[4]!=="0"?f[4]:void 0};b.push({key:c,timestamp:d("WAWebTimestampConversionUtils").maybeMillisecondsToSeconds(e)})}}});return b});return y.apply(this,arguments)}h=function(a,b,c){return d("WAWebSyncd").lockForSync([].concat(a,["message","active-message-ranges"]),b,c)};g.MessageRangeEncloseType=o;g.constructMessageRange=q;g.compareMessageRanges=a;g.mergeMessageRanges=t;g.validateMessageRange=e;g.constructForwardMovingMessageRange=f;g.lockForMessageRangeSync=h}),98);
__d("WAWebMuteChatSync",["Promise","WALogger","WALongInt","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebMiscGatingUtils","WAWebMuteCollection","WAWebSchemaChat","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mute chat sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set mute for "," with expiration=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set mute for "," with expiration="," and isAutoMuted=",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["mute chat sync: malformed mutation"]);l=function(){return a};return a}var m=-1;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.getVersion=function(){return 2};f.getAction=function(){return d("WASyncdConst").Actions.Mute};f.getChatJidAndMessageKey=function(a){a=a.indexArr;a=a[1];return{chatJid:a,messageKey:null}};f.applyMutations=function(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b,e=a.indexParts;a=a.value;e=e[1];e||d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(!c("WAWebWid").isWid(e)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var f=a.muteAction;b=(b=a.muteAction)==null?void 0:b.muted;f=d("WALongInt").maybeNumberOrThrowIfTooLarge(f==null?void 0:f.muteEndTimestamp);a=!!((a=a.muteAction)==null?void 0:a.autoMuted);if(b==null||b&&f==null){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=d("WAWebWidFactory").createWid(e);var g=(yield d("WAWebSchemaChat").getChatTable().get(b.toString(),!1));if(!g)return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:b.toString()}};f=(g=f)!=null?g:0;g=f>0&&f<d("WATimeUtils").unixTimeMs()?0:Math.floor(f/1e3);d("WAWebMiscGatingUtils").isAutoMuteConfirmationDialogEnabled()?(yield d("WAWebSchemaChat").getChatTable().merge(b.toString(),{muteExpiration:g,isAutoMuted:a}),f={id:b,expiration:g,isAutoMuted:a}):(yield d("WAWebSchemaChat").getChatTable().merge(b.toString(),{muteExpiration:g}),f={id:b,expiration:g});d("WAWebMuteCollection").MuteCollection.add(f,{merge:!0});d("WAWebMiscGatingUtils").isAutoMuteConfirmationDialogEnabled()?d("WALogger").DEV(k(),e,g,a):d("WALogger").DEV(j(),e,g);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};f.generateMuteMutation=function(a,b,c){var e=b!==void 0&&b!==0,f=d("WATimeUtils").unixTimeMs();b=b;b!==m&&(b*=1e3);d("WAWebMiscGatingUtils").isAutoMuteConfirmationDialogEnabled()?c={muted:e,muteEndTimestamp:b,autoMuted:c}:c={muted:e,muteEndTimestamp:b};e={muteAction:c};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:[a.toString({legacy:!0})],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),value:e,timestamp:f,action:this.getAction()})};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebPinChatSync",["Promise","WALogger","WALongInt","WANullthrows","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebAndroidUnsupportedActionsSync","WAWebArchiveChatSync","WAWebChatGetExistingBridge","WAWebMdSyncdDogfoodingFeatureUsageWamEvent","WAWebSchemaChat","WAWebSyncd","WAWebSyncdActionUtils","WAWebSyncdDb","WAWebSyncdUtils","WAWebWamEnumMdFeatureCode","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: pin_chat_sync: "," already pinned, updating timestamp"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: pin_chat_sync: unpin ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: pin_chat_sync: missing pinned field"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: pin_chat_sync: missing pinAction"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: pin_chat_sync: missing chatId in index"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: pin_chat_sync: REMOVE not supported"]);n=function(){return a};return a}var o=3;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.getVersion=function(){return 5};f.getAction=function(){return d("WASyncdConst").Actions.Pin};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("WAWebAndroidUnsupportedActionsSync").updatePrimaryAllowsAllMutationsFlag("other mutation");var b=[];for(var d=0;d<a.length;d++)b.push(yield this.applyMutation(a[d]));return b});function d(b){return a.apply(this,arguments)}return d}();f.applyMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.operation==="remove"){d("WALogger").WARN(n());return(h||(h=b("Promise"))).resolve({actionState:d("WASyncdConst").SyncActionState.Unsupported})}var e=a.indexParts,f=a.value;a=a.timestamp;e=e[1];try{e||(d("WALogger").WARN(m()),d("WAWebSyncdActionUtils").throwInvalidActionIndex());if(!c("WAWebWid").isWid(e)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var g=d("WAWebWidFactory").createWid(e);f=f.pinAction;if(f==null){d("WALogger").WARN(l());return(h||(h=b("Promise"))).resolve({actionState:d("WASyncdConst").SyncActionState.Malformed})}f=f.pinned;if(f==null){d("WALogger").WARN(k());return(h||(h=b("Promise"))).resolve({actionState:d("WASyncdConst").SyncActionState.Malformed})}var p=(yield d("WAWebSchemaChat").getChatTable().get(g.toString(),!1));if(p==null)return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelType:d("WASyncdConst").SyncModelType.Chat,modelId:g.toString()}};if(!f){d("WALogger").DEV(j(),e);yield this.applyUpdates([{wid:g,pinned:!1,timestamp:a}]);return{actionState:d("WASyncdConst").SyncActionState.Success}}p=(yield this.getLocalPins());if(p.some(function(a){return a.chatId.toString()===g.toString()})){d("WALogger").DEV(i(),e);yield this.applyUpdates([{wid:g,pinned:f,timestamp:a}]);return{actionState:d("WASyncdConst").SyncActionState.Success}}if(p.length<o){yield this.applyUpdates([{wid:g,pinned:f,timestamp:a}]);return{actionState:d("WASyncdConst").SyncActionState.Success}}c("gkx")("26258")||new(d("WAWebMdSyncdDogfoodingFeatureUsageWamEvent").MdSyncdDogfoodingFeatureUsageWamEvent)({mdSyncdDogfoodingFeature:d("WAWebWamEnumMdFeatureCode").MD_FEATURE_CODE.UNPIN_4TH_CHAT_MUTATION}).commit();e=p.reduce(function(a,b){return b.timestamp<a.timestamp?b:a});f=[];p=e.timestamp<a?e.chatId:g;p===e.chatId&&f.push({wid:e.chatId,pinned:!1,timestamp:a},{wid:g,pinned:!0,timestamp:a});yield (h||(h=b("Promise"))).all([this.applyUpdates(f),this.createPendingUnpin(p,a)]);return h.resolve({actionState:d("WASyncdConst").SyncActionState.Success})}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});function e(b){return a.apply(this,arguments)}return e}();f.applyUpdates=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var c=a.map(function(a){var b=a.wid,c=a.pinned;a=a.timestamp;b={id:b.toString(),pin:c?a:0};c&&(b.archive=!1);return b});yield (h||(h=b("Promise"))).all(c.map(function(a){return d("WAWebSchemaChat").getChatTable().merge(a.id,a)}));yield h.all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebChatGetExistingBridge").getExisting(a.wid));if(b==null)return;b.pin=a.pinned?a.timestamp:0;a.pinned&&(b.archive=!1)});return function(b){return a.apply(this,arguments)}}()))});function c(b){return a.apply(this,arguments)}return c}();f.createPendingUnpin=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebSyncdDb").appendPendingMutationsRows([this.getPinMutation(b,!1,a)])});function c(b,c){return a.apply(this,arguments)}return c}();f.getLocalPins=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebSchemaChat").getChatTable().all().then(function(a){return a.filter(function(a){return a.pin!=null&&a.pin>0}).map(function(a){return[a.id,c("WANullthrows")(a.pin)]})}),e=d("WAWebSyncdDb").getSyncActionsRows(["action"],[d("WASyncdConst").Actions.Pin]).then(function(a){return a.filter(function(a){return a.actionState===d("WASyncdConst").SyncActionState.Orphan}).map(function(a){var b=JSON.parse(a.index);if(b.length<2)return null;b=b[1];a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a.binarySyncData).value;return(a==null?void 0:a.pinAction)==null||!(a==null?void 0:a.pinAction.pinned)?null:[b,d("WALongInt").numberOrThrowIfTooLarge((b=a.timestamp)!=null?b:0)]}).filter(Boolean)});a=(yield (h||(h=b("Promise"))).all([a,e]));e=a[0];a=a[1];return[].concat(e,a).map(function(a){var b=a[0];a=a[1];return{chatId:d("WAWebWidFactory").createWid(b),timestamp:a}})});function e(){return a.apply(this,arguments)}return e}();f.unpinAll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this,c=(yield this.getLocalPins()),e=d("WATimeUtils").unixTimeMs(),f=c.map(function(b){b=b.chatId;return a.getPinMutation(e,!1,b)});return d("WAWebSyncd").lockForSync(["chat"],f,function(){return(h||(h=b("Promise"))).resolve()}).then(function(){return a.applyUpdates(c.map(function(a){a=a.chatId;return{wid:a,pinned:!1,timestamp:e}}))})});function c(){return a.apply(this,arguments)}return c}();f.getMutationsForPin=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){c("gkx")("26258")||new(d("WAWebMdSyncdDogfoodingFeatureUsageWamEvent").MdSyncdDogfoodingFeatureUsageWamEvent)({mdSyncdDogfoodingFeature:d("WAWebWamEnumMdFeatureCode").MD_FEATURE_CODE.PIN_MUTATION}).commit();var f=[this.getPinMutation(a,b,e)];b&&f.push(yield c("WAWebArchiveChatSync").getArchiveChatMutation(a,!1,e));return f});function e(b,c,d){return a.apply(this,arguments)}return e}();f.getChatJidAndMessageKey=function(a){a=a.indexArr;a=a[1];return{chatJid:a,messageKey:null}};f.getPinMutation=function(a,b,c){b={pinAction:{pinned:b}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[c.toString({legacy:!0})],value:b,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebStarMessageSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebMessageStore","WAWebMsgCollection","WAWebSchemaMessage","WAWebStarredMsgCollection","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["star message sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully "," msg ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["star_message_sync: msg "," found in storage but not in collection"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["star message sync: malformed mutation"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.getVersion=function(){return 2};f.getAction=function(){return d("WASyncdConst").Actions.Star};f.getChatJidAndMessageKey=function(a){a=a.indexArr;var b=a[1],c=a[2],e=a[3];a=a[4];(!b||!c||!e||!a)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();c=d("WAWebSyncdActionUtils").syncKeyToMsgKey(b,c,e,a);return{chatJid:b,messageKey:c==null?void 0:c.toString()}};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=[],f=[],g=new Set();yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a.map(function(a){a=a.indexParts;var b=a[1],e=a[2],f=a[3];a=a[4];if(!b||!e||!f||!a)return null;return!c("WAWebWid").isWid(b)?null:(b=d("WAWebSyncdActionUtils").syncKeyToMsgKey(b,e,f,a))==null?void 0:b.toString()}).filter(Boolean)).then(function(a){return a.forEach(function(a){a&&g.add(a.id)})});a=(yield (h||(h=b("Promise"))).all(a.map(function(a){try{if(a.operation==="set"){var b=a.indexParts;a=a.value;var c=b[1],h=b[2],m=b[3];b=b[4];(!c||!h||!m||!b)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();a=(a=a.starAction)==null?void 0:a.starred;if(a==null){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}c=d("WAWebSyncdActionUtils").syncKeyToMsgKey(c,h,m,b);if(!c){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!g.has(c.toString()))return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelId:c.toString(),modelType:d("WASyncdConst").SyncModelType.Msg}};a?e.push(c.toString()):f.push(c.toString());h=d("WAWebMsgCollection").MsgCollection.get(c);h?(h.star=a,h.star?d("WAWebStarredMsgCollection").addStarredMsgs([h]):d("WAWebStarredMsgCollection").removeStarredMsgs([h])):d("WALogger").WARN(k(),c);d("WALogger").DEV(j(),a?"starred":"unstarred",c);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}})));yield h.all([d("WAWebMessageStore").starMessages(e),d("WAWebMessageStore").unstarMessages(f)]);return a});function e(b){return a.apply(this,arguments)}return e}();f.getStarMessageMutations=function(a,b){var c=this,e=d("WATimeUtils").unixTimeMs();return a.map(function(a){var f={starAction:{starred:b}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:d("WAWebSyncdUtils").constructMsgKeySegments(a),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:c.getVersion(),value:f,timestamp:e,action:c.getAction()})})};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebWamEnumMdSyncdFatalErrorCode",[],(function(a,b,c,d,e,f){a=Object.freeze({TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D:1,SERVER_DATA_MISMATCH:2,PROTOBUF_DESERIALIZATION_FAILED:3,EXTERNAL_PATCH_EXPIRED:4,MISSING_OR_EMPTY_INDEX:5,SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH:6,DECRYPTION_FAILED:7,MISSING_PATCH_VERSION:8,DUPLICATE_PATCH_VERSION_IN_COLLECTION:9,ENCRYPTION_FAILED:10,MISSING_MUTATION_VERSION:11,MISSING_MUTATION_VALUE:12,INVALID_MUTATION_INDEX:13,PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS:14,MISSING_MUTATION_OPERATION:15,MISSING_MUTATION_RECORD:16,MISSING_MUTATION_KEY_ID:17,PATCH_PROTOBUF_DESERIALIZATION_FAILED:18,ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED:19,MISSING_MUTATION_INDEX:20,MISSING_ACTION_INDEX:21,INVALID_ACTION_INDEX:22,MISSING_ACTION_VALUE:23,MISSING_ACTION_VERSION:24,MISSING_ACTION_TIMESTAMP:25,MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED:26,MUTATIONS_PROTOBUF_SERIALIZATION_FAILED:27,PATCH_PROTOBUF_SERIALIZATION_FAILED:28,ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED:29,MISSING_KEY_ON_ALL_CLIENTS:30,TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY:31,MAC_MISMATCH_SNAPSHOT:33,MAC_MISMATCH_PATCH:34,DB_STORE_NOT_READY:35,TERMINAL_PATCH_MISSING_DATA:36,TERMINAL_PATCH_DESERIALIZATION_ERROR:37,TERMINAL_PATCH_UNKNOWN:38,CYCLIC_MUTATION_DEPENDENCY_IN_PATCH:39,MISSING_SNAPSHOT_VERSION:45,MISSING_SNAPSHOT_MAC:46,MISSING_PATCH_SNAPSHOT_MAC:47,MISSING_PATCH_MAC:48,MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY:49,MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH:50,MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256:51,MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256:52,INVALID_KEY_SHARE_KEY_ID:53,MISSING_PATCH_KEY_ID:56,INVALID_KEY_SHARE_KEY_DATA:57,SNAPSHOT_EXPIRED:58,MISSING_SNAPSHOT_KEY_ID:59,SNAPSHOT_MAC_MISMATCH_IN_PATCH:60,SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:61,XMPP_BAD_REQUEST_FOR_COLLECTION:62,XMPP_NOT_FOUND_FOR_COLLECTION:63,XMPP_BAD_REQUEST_GLOBAL_ERROR:64,XMPP_NOT_FOUND_GLOBAL_ERROR:65,XMPP_BAD_METHOD_GLOBAL_ERROR:66,XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR:67,SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT:68,EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED:69,SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED:70,REQUESTING_MISSING_KEY_WITH_NO_CLIENTS:71,DB_STORE_NOT_READY_LOW_DISK_SPACE:72,SERVER_DID_NOT_SEND_ALL_PATCHES:73,SERVER_SENT_EARLIER_PATCH:74,MISSING_KEY_FOR_MUTATION_IN_LOCAL_SNAPSHOT:75,MISSING_ACTIVE_KEY_AFTER_ROTATION:76,MISSING_ACTIVE_KEY_FOR_ENCRYPTION:77,MISSING_CURRENT_EPOCH_FOR_ACTIVE_KEY_VALIDATION:78,SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_OUTGOING_PATCH:79,INVALID_SNAPSHOT_RECORDS:80,MISSING_EXTERNAL_BLOB_REFERENCE_HANDLE:81,INVALID_EXTERNAL_BLOB_REFERENCE_UPLOADED:82,INVALID_PATCH_KEY_ID_SIZE:83,INVALID_PATCH_MAC_SIZE:84,INVALID_PATCH_SNAPSHOT_MAC_SIZE:85,INVALID_COLLECTION_SNAPSHOT_HASH_SIZE:86,MISSING_COLLECTION_SNAPSHOT_HASH:87,INVALID_PATCH_KEY_ID_DEVICE_ID:88,INVALID_PATCH_KEY_ID_EPOCH:89,DECRYPTION_FAILED_KEY_ID_MISMATCH:90,DECRYPTION_FAILED_VALUE_MAC_MISMATCH:91,DECRYPTION_FAILED_INDEX_MAC_MISMATCH:92,EXTERNAL_PATCH_MISSING_BLOB:93,COLLECTION_PULL_REQUEST_RECEIVED_PUSH_RESPONSE_WITH_UPDATED_VERSION:94,COLLECTION_PUSH_REQUEST_RECEIVED_RESPONSE_WITH_VERSION_MISMATCH:95,MMS_ERROR_INVALID_FILEHASH:96,UNKNOWN:97,MALFORMED_MUTATION_CLEAR_CHAT:98,MALFORMED_MUTATION_DELETE_CHAT:99,FAILED_MUTATION_CLEAR_CHAT:100,FAILED_MUTATION_DELETE_CHAT:101,CHAT_DB_CORRUPTION:102});f.MD_SYNCD_FATAL_ERROR_CODE=a}),66);
__d("WAWebSyncdActionUtils",["WALogger","WASyncdError","WAWebMsgKey","WAWebSyncdUploadFatalErrorMetric","WAWebUserPrefsMeUser","WAWebWamEnumMdSyncdFatalErrorCode","WAWebWid","WAWebWidFactory","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sync-action] star action index data is malformed, , cannot create MsgKey"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncKeyToMsgKey: invalid participant value: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncKeyToMsgKey: invalid remote value: ",""]);j=function(){return a};return a}var k=/\d(?=)/gm;function l(a,b,e,f){var g=void 0;if(!c("WAWebWid").isWid(a)){d("WALogger").WARN(j(),a.replace(k,"#"));return null}if(!d("WAWebWidFactory").createWid(a).isUser()){if(e==="0"&&!c("WAWebWid").isWid(f)){d("WALogger").WARN(i(),f.replace(k,"#"));return null}g=e==="1"?d("WAWebUserPrefsMeUser").getMeUser():d("WAWebWidFactory").createWid(f)}return new(c("WAWebMsgKey"))({fromMe:e==="1",remote:d("WAWebWidFactory").createWid(a),id:b,participant:g})}function a(a){a=JSON.parse(a);if(a.length<5)throw c("err")("[sync-action] star action index malformed, cannot create MsgKey");a=l(a[1],a[2],a[3],a[4]);if(!a){d("WALogger").WARN(h());throw c("err")("[sync-action] star action index data is malformed, , cannot create MsgKey")}return a}function b(){d("WAWebSyncdUploadFatalErrorMetric").uploadFatalErrorMetric(d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.INVALID_ACTION_INDEX,null);throw new(d("WASyncdError").SyncdFatalError)("invalid action index")}g.syncKeyToMsgKey=l;g.getMsgKeyFromStarActionIndex=a;g.throwInvalidActionIndex=b}),98);
__d("WAWebWamEnumMdSyncdFatalErrorSource",[],(function(a,b,c,d,e,f){a=Object.freeze({SNAPSHOT:1,EXTERNAL_PATCH:2,INLINE_PATCH:3});f.MD_SYNCD_FATAL_ERROR_SOURCE=a}),66);
__d("WAWebMdFatalErrorWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCollection","WAWebWamEnumMdSyncdFatalErrorCode","WAWebWamEnumMdSyncdFatalErrorSource"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdFatalError:[2304,{collection:[2,d("WAWebWamEnumCollection").COLLECTION],currentPrimaryAppVersion:[14,a.TYPES.STRING],daysSinceLastPeriodicSync:[11,a.TYPES.INTEGER],didBootstrapFromSnapshot:[38,a.TYPES.BOOLEAN],hoursSinceFirstFiniteFailure:[12,a.TYPES.INTEGER],isBootstrap:[3,a.TYPES.BOOLEAN],isFatal:[16,a.TYPES.BOOLEAN],isPatchSenderPrimary:[23,a.TYPES.BOOLEAN],isPreviousPatchAnIncomingPatch:[24,a.TYPES.BOOLEAN],isPreviousPatchSenderPrimary:[25,a.TYPES.BOOLEAN],isSenderIndexSameAsPreviousSenderIndex:[39,a.TYPES.BOOLEAN],isThereAnotherSyncdCompanion:[40,a.TYPES.BOOLEAN],isWebLthashConsistent:[17,a.TYPES.BOOLEAN],macFatalCollectionNameMismatch:[18,a.TYPES.BOOLEAN],macFatalCurrentLthashMismatch:[19,a.TYPES.BOOLEAN],macFatalDidPreviousPatchFailPostSaveValidation:[26,a.TYPES.BOOLEAN],macFatalDidUseMacFetchFallback:[36,a.TYPES.BOOLEAN],macFatalFirstTwoBytesFromAHashOfSnapshotMacKeyMismatch:[20,a.TYPES.BOOLEAN],macFatalHasMissingRemove:[37,a.TYPES.BOOLEAN],macFatalNewLthashMismatch:[21,a.TYPES.BOOLEAN],macFatalNewLthashSubtractMismatch:[27,a.TYPES.BOOLEAN],macFatalNumberAddMismatch:[28,a.TYPES.BOOLEAN],macFatalNumberHasOverrideMutation:[29,a.TYPES.BOOLEAN],macFatalNumberNumAddMutation:[30,a.TYPES.INTEGER],macFatalNumberNumRemoveMutation:[31,a.TYPES.INTEGER],macFatalNumberOverrideMismatch:[32,a.TYPES.BOOLEAN],macFatalNumberRemoveMismatch:[33,a.TYPES.BOOLEAN],macFatalPatchVersionMismatch:[22,a.TYPES.BOOLEAN],macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:[34,a.TYPES.BOOLEAN],macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:[35,a.TYPES.BOOLEAN],mailboxAgeDays:[13,a.TYPES.INTEGER],mdFatalErrorCode:[1,d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE],patchSnapshotMutationCount:[9,a.TYPES.INTEGER],patchVersion:[5,a.TYPES.INTEGER],sessionStartPrimaryAppVersion:[15,a.TYPES.STRING],sourceType:[10,d("WAWebWamEnumMdSyncdFatalErrorSource").MD_SYNCD_FATAL_ERROR_SOURCE],timeSincePairingMs:[6,a.TYPES.INTEGER],timeSinceRefreshMs:[7,a.TYPES.INTEGER],timeSinceTabTakeoverMs:[8,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdFatalError:[]});g.MdFatalErrorWamEvent=b}),98);
__d("WAWebSyncdUploadFatalErrorMetric",["WASyncAction.pb","WASyncdCollectionsStateMachine","WATimeUtils","WAWebABProps","WAWebMdFatalErrorWamEvent","WAWebSchemaSyncActions","WAWebSyncBootstrap","WAWebSyncdUtils","WAWebUserPrefsAppStateSync","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h=d("WATimeUtils").unixTime();function a(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){a={mdFatalErrorCode:a,collection:b?d("WAWebSyncdUtils").collectionNameToMetric(b):void 0,isBootstrap:c("WAWebSyncBootstrap").isSyncDCriticalDataSyncInProcess()};b=d("WAWebUserPrefsMultiDevice").getPairingTimestamp();b=b!=null?(d("WATimeUtils").unixTime()-b)*1e3:void 0;a=babelHelpers["extends"]({},a,{timeSinceRefreshMs:(d("WATimeUtils").unixTime()-h)*1e3,timeSincePairingMs:b,patchSnapshotMutationCount:e,patchVersion:f,isFatal:g,isWebLthashConsistent:i,macFatalCollectionNameMismatch:j,macFatalCurrentLthashMismatch:k,macFatalNewLthashMismatch:l,macFatalPatchVersionMismatch:m,macFatalNewLthashSubtractMismatch:n,macFatalNumberHasOverrideMutation:o,macFatalNumberNumAddMutation:p,macFatalNumberNumRemoveMutation:q,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:r,isPatchSenderPrimary:s,macFatalDidUseMacFetchFallback:t,macFatalHasMissingRemove:u,macFatalNumberAddMismatch:v,macFatalNumberRemoveMismatch:w,macFatalDidPreviousPatchFailPostSaveValidation:x,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:y,isPreviousPatchAnIncomingPatch:z,isPreviousPatchSenderPrimary:A,isSenderIndexSameAsPreviousSenderIndex:B,didBootstrapFromSnapshot:C,isThereAnotherSyncdCompanion:D});if(d("WAWebABProps").getABPropConfigValue("web_syncd_fatal_fields_from_L1104589PRV2")){b=(yield d("WAWebUserPrefsMultiDevice").getRecentMailboxAgeDays());e=(yield d("WAWebUserPrefsAppStateSync").getLastPeriodicAppStateSyncTs());f=c("WASyncdCollectionsStateMachine").getCollectionMinFailureTime();a=babelHelpers["extends"]({},a,{mailboxAgeDays:b==null?void 0:b,daysSinceLastPeriodicSync:e==null?void 0:Math.trunc((d("WATimeUtils").unixTime()-e)/60/60/24),hoursSinceFirstFiniteFailure:f==null?void 0:Math.trunc((d("WATimeUtils").unixTimeMs()-f)/1e3/60/60)});g=(yield d("WAWebSchemaSyncActions").getSyncActionsTable().get('["primary_version","current"]'));i=(yield d("WAWebSchemaSyncActions").getSyncActionsTable().get('["primary_version","session_start"]'));if(g||i){j=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,g==null?void 0:g.binarySyncData).value;k=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,i==null?void 0:i.binarySyncData).value;a=babelHelpers["extends"]({},a,{currentPrimaryAppVersion:(m=j==null?void 0:(l=j.primaryVersionAction)==null?void 0:l.version)!=null?m:void 0,sessionStartPrimaryAppVersion:(o=k==null?void 0:(n=k.primaryVersionAction)==null?void 0:n.version)!=null?o:void 0})}}new(d("WAWebMdFatalErrorWamEvent").MdFatalErrorWamEvent)(a).commitAndWaitForFlush(!0)});return i.apply(this,arguments)}g.uploadFatalErrorMetric=a}),98);
__d("WAWebMediaTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=Object.freeze({preview:"body",mediaKey:"mediaKey",mediaKeyTimestamp:"mediaKeyTimestamp",size:"size",filehash:"filehash",mimetype:"mimetype",duration:"duration",pageCount:"pageCount",fullHeight:"height",fullWidth:"width",type:"type",filename:"filename",caption:"caption",isGif:"isGif",gifAttribution:"gifAttribution",sidecar:"streamingSidecar",subtype:"subtype",firstFrameLength:"firstFrameLength",firstFrameSidecar:"firstFrameSidecar",isAnimated:"isAnimated",isLottie:"isLottie",isVcardOverMmsDocument:"isVcardOverMmsDocument",isViewOnce:"isViewOnce",waveform:"waveform",staticUrl:"staticUrl"});c=Object.freeze({body:"preview",directPath:"directPath",mediaKey:"mediaKey",mediaKeyTimestamp:"mediaKeyTimestamp",size:"size",filehash:"filehash",mimetype:"mimetype",duration:"duration",pageCount:"pageCount",height:"fullHeight",width:"fullWidth",type:"type",filename:"filename",caption:"caption",isGif:"isGif",gifAttribution:"gifAttribution",streamingSidecar:"sidecar",subtype:"subtype",firstFrameLength:"firstFrameLength",firstFrameSidecar:"firstFrameSidecar",isAnimated:"isAnimated",isLottie:"isLottie",isVcardOverMmsDocument:"isVcardOverMmsDocument",isViewOnce:"isViewOnce",waveform:"waveform",staticUrl:"staticUrl",stickerPackId:"stickerPackId",stickerPackName:"stickerPackName",stickerPackPublisher:"stickerPackPublisher"});d=Object.keys(c);e=["filehash","height","mimetype","size","type","width","stickerPackId","stickerPackName","stickerPackPublisher"];var g=[].concat(d,["deprecatedMms3Url","encFilehash","streamable"]),h=Object.freeze({VIDEO:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","duration","durationFloat","isViewOnce","fullPreviewData","staticUrl"]),PTV:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","duration","durationFloat","isViewOnce","fullPreviewData","staticUrl"]),AUDIO:Object.freeze(["duration","waveform"]),IMAGE:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","isViewOnce","fullPreviewData","staticUrl"]),PRODUCT:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview"]),STICKER:Object.freeze(["animationDuration","singleLoopDuration","emojis","firstFrameLength","firstFrameSidecar","isAnimated","isAvatar","isAiSticker","isLottie","isFirstParty","isFromStickerMaker","stickerPackId","stickerPackName","stickerPackPublisher","stickerMakerSourceType","fullWidth","fullHeight","preview","rgbaBuffer","rgbaWidth","rgbaHeight","aspectRatio","extractedLottieSticker"]),STICKER_PACK:Object.freeze([]),DOCUMENT:Object.freeze(["aspectRatio","pageCount","preview","isVcardOverMmsDocument","parsedVcards","fullPreviewData","fullPreviewSize"]),RAW:Object.freeze(["mediaBlob","size","loadedSize","filehash","progressiveStage"]),BIZ_COVER_PHOTO:Object.freeze([])}),i=["type","filename","caption","isGif","gifAttribution","mimetype","pageCount","sidecar","subtype","isViewOnce"],j=b("$InternalEnum").Mirrored(["INIT","EXISTS","PREPARING","REUPLOADING","FETCHING","PROCESSING","NEED_POKE","ERROR_MISSING","ERROR_UNSUPPORTED","PROGRESSIVE_READY","RESOLVED"]),k=b("$InternalEnum").Mirrored(["INIT","PREPARING","UPLOADING","FINALIZING","NEED_UPLOAD","ERROR_FILE_NOT_READABLE","ERROR_MISSING","ERROR_TOO_LARGE","UPLOADED"]);b=b("$InternalEnum").Mirrored(["INIT","EXISTS","PREPARING","UPLOADING","FINALIZING","SENDING","REUPLOADING","FETCHING","DECRYPTING","RESOLVED","NEED_POKE","NEED_UPLOAD","ERROR_FILE_NOT_READABLE","ERROR_MISSING","ERROR_TOO_LARGE","ERROR_UNSUPPORTED","PROGRESSIVE_READY","REMOTE_UPLOADING","REMOTE_NEED_UPLOAD"]);var l={IMAGE:"image",VIDEO:"video",PTV:"ptv",AUDIO:"audio",PTT:"ptt",STICKER:"sticker",DOCUMENT:"document",PRODUCT:"product",BIZ_COVER_PHOTO:"biz-cover-photo",UNKNOWN:"unknown"},m=Object.freeze({VIDEO:"VIDEO",PTV:"PTV",IMAGE:"IMAGE",AUDIO:"AUDIO",STICKER:"STICKER",DOCUMENT:"DOCUMENT",PRODUCT:"PRODUCT",BIZ_COVER_PHOTO:"BIZ_COVER_PHOTO"});f.MEDIA_TO_MSG=a;f.MSG_TO_MEDIA=c;f.MAPPED_MSG_PROPS=d;f.MAPPED_STICKER_PROPS=e;f.MEDIA_MSG_PROPS=g;f.FIELDS=h;f.MSG_SPECIFIC_FIELDS=i;f.DownloadStage=j;f.UploadStage=k;f.MediaDataStage=b;f.OUTWARD_TYPES=l;f.TYPE=m}),66);
__d("WAWebOrderItemGetters",["WAWebGetters","WAWebGettersCaches","WAWebMediaData","WAWebMediaTypes"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createOrderItemCache});b=a.field;e=a.computed;f=a.clearCacheFor;a=f;f=b("thumbnailUrl");b=e(function(a){a=a[0];return new(c("WAWebMediaData"))({mediaStage:a!=null?d("WAWebMediaTypes").MediaDataStage.RESOLVED:d("WAWebMediaTypes").MediaDataStage.PREPARING,renderableUrl:a!=null?""+a:null})},[f]);g.clearOrderItemGetterCacheFor=a;g.getThumbnailUrl=f;g.getMediaData=b}),98);
__d("WAWebMediaMetadata",["WALogger","WAWebMediaCryptoEligibilityUtils","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);i=function(){return a};return a}function a(a){var b=a.mediaObject;if(!b){d("WALogger").ERROR(i(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: mediaMetadata msg without mediaObject");throw c("err")("msg.mediaMetadata with no mediaObject")}b=d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMsg(a)?b.entries.getEntryByEncFilehash({encFilehash:a.encFilehash,deprecatedMms3Url:a.deprecatedMms3Url}):b.entries.getUnencryptedEntry(a.filehash,a.directPath);if(!b){d("WALogger").ERROR(h(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: mediaMetadata no entry");throw c("err")("msg.mediaMetadata with entry mismatch")}var e=a.mediaData;return{url:d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMsg(a)?b.deprecatedMms3Url:null,directPath:b.directPath,encFilehash:b.getEncfilehash(),mediaKey:b.getMediaKey(),mediaKeyTimestamp:b.getMediaKeyTimestamp(),filehash:a.filehash,type:e.type,mimetype:e.mimetype,filename:e.filename,duration:e.duration,width:e.fullWidth,height:e.fullHeight,firstFrameLength:e.firstFrameLength,isAnimated:e.isAnimated,isLottie:e.isLottie,thumbnailDirectPath:a.thumbnailDirectPath,thumbnailSha256:a.thumbnailSha256,thumbnailEncSha256:a.thumbnailEncSha256,thumbnailHeight:a.thumbnailHeight,thumbnailWidth:a.thumbnailWidth,waveform:a.waveform,staticUrl:a.staticUrl}}g.mediaMetadata=a}),98);
__d("WAWebWamEnumMediaPickerOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_PHOTO_LIBRARY:1,CAMERA_TAB_CAPTURE:2,FORWARD:3,PASTE:4,SHARE_EXTENSION:5,EXPORT:6,MENU_CAMERA_CAPTURE:7,EXTERNAL_CAMERA:8,LINK_PREVIEW_DOWNLOAD:9,CAMERA_TAB_MEDIA_STRIP:10,CAMERA_TAB_PHOTO_LIBRARY:11,CHAT_BUTTON_CAMERA_CAPTURE:12,CHAT_BUTTON_CAMERA_MEDIA_STRIP:13,CHAT_BUTTON_CAMERA_PHOTO_LIBRARY:14,STATUS_TAB_CAMERA_CAPTURE:15,STATUS_TAB_CAMERA_MEDIA_STRIP:16,STATUS_TAB_CAMERA_PHOTO_LIBRARY:17,STATUS_REPLY_CAMERA_CAPTURE:18,STATUS_REPLY_CAMERA_MEDIA_STRIP:19,STATUS_REPLY_CAMERA_PHOTO_LIBRARY:20,MENU_CAMERA_PHOTO_LIBRARY:21,CHAT_GIF_INAPP:22,CHAT_GIF_EXTERNAL:23,STATUS_REPLY_GIF_INAPP:24,STATUS_REPLY_GIF_EXTERNAL:25,SMB_QUICK_REPLY_EDIT:26,SMB_QUICK_REPLY_SEND:27,MEDIA_BROWSER:28,CHAT_QUICK_EDIT:29,CAMERA_TAB_GIF:30,STATUS_TAB_GIF:31,PAYMENT_COMPOSER:32,PHOTO_RECEIVED:33,PHOTO_RECEIVED_GALLERY:34,AD_CREATION:35,EXTERNAL_DROP:36,IN_APP_BROWSER:37,PREMIUM_MESSAGE_COMPOSER:38,DOCUMENT_PICKER:39,IN_APP_BUG_REPORTING:40,STICKER_TRAY_CREATE_STICKER:41,STICKER_TRAY_EDIT_STICKER:42,STICKER_MESSAGE_CREATE_YOUR_OWN:43,STICKER_MESSAGE_EDIT_STICKER:44,MEDIA_VIEWER_CREATE_STICKER:45,STATUS_NEWSLETTER_CARD:46,CUTOUT_IMAGE_EDIT_STICKER:47,STICKER_TRAY_CREATE_STICKER_CAPTURE:48,THUNDERSTORM_IN_APP_PHOTO_LIBRARY:49,TRANSPARENT_IMAGE_EDIT_STICKER:50,BUSINESS_FLOWS:51,SYSTEM_INTENT:52,SMB_CATALOG_CAMERA:53});f.MEDIA_PICKER_ORIGIN_TYPE=a}),66);
__d("WAWebWamEnumUploadSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:1,CAMERA:2,GALLERY:3,SHARE:4});f.UPLOAD_SOURCE_TYPE=a}),66);
__d("WAWebMapFileOriginToUploadOrigin",["WAWebWamEnumMediaPickerOriginType","WAWebWamEnumUploadSourceType"],(function(a,b,c,d,e,f,g){function a(a,b){if(b)return d("WAWebWamEnumUploadSourceType").UPLOAD_SOURCE_TYPE.OTHER;switch(a){case d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY:return d("WAWebWamEnumUploadSourceType").UPLOAD_SOURCE_TYPE.GALLERY;case d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.MENU_CAMERA_CAPTURE:return d("WAWebWamEnumUploadSourceType").UPLOAD_SOURCE_TYPE.CAMERA;case d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.PASTE:return d("WAWebWamEnumUploadSourceType").UPLOAD_SOURCE_TYPE.SHARE;default:return d("WAWebWamEnumUploadSourceType").UPLOAD_SOURCE_TYPE.OTHER}}g["default"]=a}),98);
__d("WAWebWamEnumConnectionType",[],(function(a,b,c,d,e,f){a=Object.freeze({HOSTNAME:0,IP4:1,IP6:2});f.CONNECTION_TYPE=a}),66);
__d("WAWebWamEnumHttpProtocolVersionType",[],(function(a,b,c,d,e,f){a=Object.freeze({HTTP1:0,HTTP2:1,HTTP3:2});f.HTTP_PROTOCOL_VERSION_TYPE=a}),66);
__d("WAWebWamEnumMediaQuality",[],(function(a,b,c,d,e,f){a=Object.freeze({AUTO:0,DATA_SAVER:1,HIGH_QUALITY:2,HIGHEST_QUALITY:3});f.MEDIA_QUALITY=a}),66);
__d("WAWebWamEnumMediaUploadModeType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:1,FAST_FORWARD_EXIST_CHECK:2,VIDEO_EXIST_CHECK:3,PRODUCT:4,MEDIA_RETRY:5,WEB_REUPLOAD:6,THUMBNAIL:7,EXPRESS_PATH_UPLOAD:8});f.MEDIA_UPLOAD_MODE_TYPE=a}),66);
__d("WAWebWamEnumMediaUploadResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:1,DUPLICATE:3,ERROR_UNKNOWN:2,ERROR_REQUEST:4,ERROR_UPLOAD:5,ERROR_OOM:6,ERROR_IO:7,ERROR_NO_PERMISSIONS:8,ERROR_BAD_MEDIA:9,ERROR_INSUFFICIENT_SPACE:10,ERROR_FNF:11,ERROR_CANCEL:12,ERROR_SERVER:13,ERROR_REQUEST_TIMEOUT:14,ERROR_NOT_FINALIZED:15,ERROR_OPTIMISTIC_HASH:16,ERROR_MEDIA_CONN:17,ERROR_DNS:18,ERROR_THROTTLE:19,ERROR_SSL:20,ERROR_NO_CLIENT_NETWORK:21,SKIPPED_EP_NOT_ONLINE:22,SKIPPED_EP_NOT_1TO1CHAT:23,SKIPPED_EP_UPLOAD_FAILED:24,SKIPPED_EP_MULTI_CHAT:25,SKIPPED_EP_NO_PRIMARY_HOST:26,ERROR_CRONET:27,ERROR_INCOMPLETE_SERVER_RESPONSE:28,ERROR_TRANSCODING:29,ERROR_CANCEL_PROGRAMMATIC:30,ERROR_NO_ROUTE:31,ERROR_TOO_LARGE:32,ERROR_CANNOT_TRANSCODE:33,ERROR_UNKNOWN_MIMETYPE:34,ERROR_UNSUPPORTED_MIMETYPE:35,ERROR_SERVER_REJECTED_MEDIA:36,ERROR_IO_ENCRYPTION:37,ERROR_NO_ENCRYPTION_ALGORITHM:38,ERROR_HOST_SWITCH_REQUIRED:39,ERROR_WAMSYS:40,ERROR_INVALID_URL:41});f.MEDIA_UPLOAD_RESULT_TYPE=a}),66);
__d("WAWebWamEnumNetworkStackType",[],(function(a,b,c,d,e,f){a=Object.freeze({NATIVE:0,OK_HTTP:1,LIGER:2,APACHE:3,WATLS:4,CRONET:5});f.NETWORK_STACK_TYPE=a}),66);
__d("WAWebWamEnumOptimisticFlagType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,OPTIMISTIC:1,OPT_USED:2,OPT_TAKEOVER:3,OPT_DISABLED:4});f.OPTIMISTIC_FLAG_TYPE=a}),66);
__d("WAWebWamEnumOverallMediaKeyReuseType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE_NEW_CONTENT:1,NONE_EXPIRED:2,REUSED:3,NONE_WAS_STATUS:4});f.OVERALL_MEDIA_KEY_REUSE_TYPE=a}),66);
__d("WAWebWamEnumUploadOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1,CHAT_PERSONAL:2,CHAT_GROUP:3,STATUS_USER:4,PRODUCT_CATALOG:5,STICKER_WEB:6,PAYMENTS_KYC:7,MESSAGE_HISTORY_SYNC:8,COMMUNITY:9,CHANNEL:10,BROADCAST:11,MULTI_CHAT:12,INTEROP:13});f.UPLOAD_ORIGIN_TYPE=a}),66);
__d("WAWebMediaUpload2WamEvent",["WAWebWamCodegenUtils","WAWebWamEnumConnectionType","WAWebWamEnumHttpProtocolVersionType","WAWebWamEnumMediaQuality","WAWebWamEnumMediaType","WAWebWamEnumMediaUploadModeType","WAWebWamEnumMediaUploadResultType","WAWebWamEnumNetworkStackType","WAWebWamEnumOptimisticFlagType","WAWebWamEnumOverallLastUploadRetryPhaseType","WAWebWamEnumOverallMediaKeyReuseType","WAWebWamEnumUploadOriginType","WAWebWamEnumUploadSourceType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MediaUpload2:[1588,{batchSize:[57,a.TYPES.INTEGER],connectionType:[43,d("WAWebWamEnumConnectionType").CONNECTION_TYPE],debugMediaException:[34,a.TYPES.STRING],debugMediaIp:[32,a.TYPES.STRING],debugUrl:[33,a.TYPES.STRING],estimatedBandwidth:[45,a.TYPES.NUMBER],fileHeight:[55,a.TYPES.INTEGER],fileWidth:[56,a.TYPES.INTEGER],finalizeConnectT:[28,a.TYPES.TIMER],finalizeHttpCode:[31,a.TYPES.INTEGER],finalizeIsReuse:[30,a.TYPES.BOOLEAN],finalizeNetworkT:[29,a.TYPES.TIMER],httpProtocolVersionType:[51,d("WAWebWamEnumHttpProtocolVersionType").HTTP_PROTOCOL_VERSION_TYPE],isViewOnce:[49,a.TYPES.BOOLEAN],mediaId:[46,a.TYPES.INTEGER],messageKeyHash:[58,a.TYPES.STRING],networkStack:[42,d("WAWebWamEnumNetworkStackType").NETWORK_STACK_TYPE],originalSize:[53,a.TYPES.INTEGER],overallAttemptCount:[4,a.TYPES.INTEGER],overallConnBlockFetchT:[10,a.TYPES.TIMER],overallConnectionClass:[41,a.TYPES.STRING],overallCumT:[37,a.TYPES.TIMER],overallCumUserVisibleT:[38,a.TYPES.TIMER],overallDomain:[5,a.TYPES.STRING],overallEncryptT:[50,a.TYPES.TIMER],overallIsFinal:[36,a.TYPES.BOOLEAN],overallIsForward:[16,a.TYPES.BOOLEAN],overallIsManual:[13,a.TYPES.BOOLEAN],overallLastUploadRetryPhase:[11,d("WAWebWamEnumOverallLastUploadRetryPhaseType").OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE],overallMediaKeyReuse:[40,d("WAWebWamEnumOverallMediaKeyReuseType").OVERALL_MEDIA_KEY_REUSE_TYPE],overallMediaSize:[7,a.TYPES.NUMBER],overallMediaType:[1,d("WAWebWamEnumMediaType").MEDIA_TYPE],overallMmsVersion:[6,a.TYPES.INTEGER],overallOptimisticFlag:[12,d("WAWebWamEnumOptimisticFlagType").OPTIMISTIC_FLAG_TYPE],overallQueueT:[9,a.TYPES.TIMER],overallRetryCount:[3,a.TYPES.INTEGER],overallT:[8,a.TYPES.TIMER],overallTranscodeT:[15,a.TYPES.TIMER],overallUploadMode:[39,d("WAWebWamEnumMediaUploadModeType").MEDIA_UPLOAD_MODE_TYPE],overallUploadOrigin:[44,d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE],overallUploadResult:[35,d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE],overallUserVisibleT:[14,a.TYPES.TIMER],photoQualitySetting:[52,d("WAWebWamEnumMediaQuality").MEDIA_QUALITY],resumeConnectT:[17,a.TYPES.TIMER],resumeHttpCode:[20,a.TYPES.INTEGER],resumeIsReuse:[19,a.TYPES.BOOLEAN],resumeNetworkT:[18,a.TYPES.TIMER],uploadBytesTransferred:[27,a.TYPES.NUMBER],uploadConnectT:[22,a.TYPES.TIMER],uploadHttpCode:[25,a.TYPES.INTEGER],uploadIsReuse:[24,a.TYPES.BOOLEAN],uploadIsStreaming:[26,a.TYPES.BOOLEAN],uploadNetworkT:[23,a.TYPES.TIMER],uploadResumePoint:[21,a.TYPES.INTEGER],uploadSource:[48,d("WAWebWamEnumUploadSourceType").UPLOAD_SOURCE_TYPE],usedFallbackHint:[47,a.TYPES.STRING],videoQualitySetting:[54,d("WAWebWamEnumMediaQuality").MEDIA_QUALITY]},[1,1,1],"regular"]},{MediaUpload2:[]});g.MediaUpload2WamEvent=b}),98);
__d("WAWebWamEnumBackendStoreType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NON_DIRECT_PATH:1,EVERSTORE:2,OIL:3,EXPRESS_PATH:4,STATIC:5,MANIFOLD:6});f.BACKEND_STORE_TYPE=a}),66);
__d("WAWebWamEnumMediaDownloadModeType",[],(function(a,b,c,d,e,f){a=Object.freeze({MANUAL:1,FULL:2,PREFETCH:3,HEADER:4,THUMBNAIL:5,EXPRESS_PATH_DOWNLOAD:6,PREFETCH_FOR_THUMB_PREVIEW:7,FULL_FOR_THUMB_PREVIEW:8});f.MEDIA_DOWNLOAD_MODE_TYPE=a}),66);
__d("WAWebWamEnumMediaDownloadResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:1,ERROR_UNKNOWN:2,ERROR_TIMEOUT:3,ERROR_DNS:4,ERROR_INSUFFICIENT_SPACE:5,ERROR_TOO_OLD:6,ERROR_CANNOT_RESUME:7,ERROR_HASH_MISMATCH:8,ERROR_INVALID_URL:9,ERROR_OUTPUT_STREAM:10,ERROR_CANCEL:11,DEDUPED:12,ERROR_ENC_HASH_MISMATCH:14,PREFETCH_END:15,ERROR_CANCEL_PROGRAMMATIC:16,ERROR_MEDIA_CONN:17,ERROR_THROTTLE:18,ERROR_SSL:19,ERROR_NETWORK:20,ERROR_CONNECT:21,ERROR_EP_NOTIFY_DECRYPTION_FAILURE:22,SKIPPED_EP_DIFFERENT_POP:23,SKIPPED_EP_AUTODOWNLOAD_DISABLED:24,ERROR_SERVER:25,ERROR_WATLS:26,ERROR_INVALID_CODE:27,ERROR_WAMSYS:28,ERROR_GENERIC:29,ERROR_CRONET:30,ERROR_NO_CLIENT_NETWORK:31,ERROR_HOST_SWITCH_REQUIRED:32,ERROR_SUSPICIOUS_CONTENT:33,ERROR_NO_ENCRYPTION_ALGORITHM:34,ERROR_NO_ENCRYPTED_HASH:35,ERROR_NO_MEDIA_HASH:36,ERROR_NO_MEDIA_KEY:37,ERROR_NO_SIDECAR:38,ERROR_HASH_VERIFICATION_FAILURE:39});f.MEDIA_DOWNLOAD_RESULT_TYPE=a}),66);
__d("WAWebWamEnumWebcMediaOperationCode",[],(function(a,b,c,d,e,f){a=Object.freeze({DOWNLOAD:1,UPLOAD:2});f.WEBC_MEDIA_OPERATION_CODE=a}),66);
__d("WAWebWebcMediaErrorUnknownDetailsWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcMediaOperationCode"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcMediaErrorUnknownDetails:[2352,{mediaId:[1,a.TYPES.INTEGER],webcMediaErrorMessage:[4,a.TYPES.STRING],webcMediaErrorName:[3,a.TYPES.STRING],webcMediaOperation:[2,d("WAWebWamEnumWebcMediaOperationCode").WEBC_MEDIA_OPERATION_CODE]},[1,1,1],"regular"]},{WebcMediaErrorUnknownDetails:[]});g.WebcMediaErrorUnknownDetailsWamEvent=b}),98);
__d("WAWebWamMediaMetricUtils",["WAAbortError","WALogger","WAWebHttpErrors","WAWebMediaHostsErrors","WAWebMmsClientErrors","WAWebMmsMediaTypes","WAWebWamEnumBackendStoreType","WAWebWamEnumMediaDownloadModeType","WAWebWamEnumMediaDownloadResultType","WAWebWamEnumMediaType","WAWebWamEnumMediaUploadModeType","WAWebWamEnumMediaUploadResultType","WAWebWamEnumWebcMediaOperationCode","WAWebWebcMediaErrorUnknownDetailsWamEvent","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unrecognized direct path type: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unrecognized direct path type"]);i=function(){return a};return a}function j(a){switch(a){case"thumbnail-document":case"thumbnail-image":case"thumbnail-video":case"thumbnail-link":case"newsletter-thumbnail-link":return!0}return!1}function a(a,b,c){if(j(a))return d("WAWebWamEnumMediaDownloadModeType").MEDIA_DOWNLOAD_MODE_TYPE.THUMBNAIL;if(b==="manual")return d("WAWebWamEnumMediaDownloadModeType").MEDIA_DOWNLOAD_MODE_TYPE.MANUAL;return c?d("WAWebWamEnumMediaDownloadModeType").MEDIA_DOWNLOAD_MODE_TYPE.PREFETCH:d("WAWebWamEnumMediaDownloadModeType").MEDIA_DOWNLOAD_MODE_TYPE.FULL}function b(a){return j(a)?d("WAWebWamEnumMediaUploadModeType").MEDIA_UPLOAD_MODE_TYPE.THUMBNAIL:d("WAWebWamEnumMediaUploadModeType").MEDIA_UPLOAD_MODE_TYPE.REGULAR}function e(a){switch(a){case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_AUDIO:case"audio":return d("WAWebWamEnumMediaType").MEDIA_TYPE.AUDIO;case"document":return d("WAWebWamEnumMediaType").MEDIA_TYPE.DOCUMENT;case"thumbnail-document":return d("WAWebWamEnumMediaType").MEDIA_TYPE.DOCUMENT;case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_GIF:case"gif":return d("WAWebWamEnumMediaType").MEDIA_TYPE.GIF;case"image":case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_IMAGE:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PHOTO;case"thumbnail-image":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PHOTO;case"ppic":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PROFILE_PIC;case"product":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_IMAGE;case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_PTT:case"ptt":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PTT;case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_STICKER:case"sticker":return d("WAWebWamEnumMediaType").MEDIA_TYPE.STICKER;case"video":case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_VIDEO:return d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO;case"ptv":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PUSH_TO_VIDEO;case"thumbnail-video":return d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO;case"template":return d("WAWebWamEnumMediaType").MEDIA_TYPE.TEMPLATE;case"md-msg-hist":return d("WAWebWamEnumMediaType").MEDIA_TYPE.MD_HISTORY_SYNC;case"md-app-state":return d("WAWebWamEnumMediaType").MEDIA_TYPE.MD_APP_STATE;case"product-catalog-image":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_IMAGE;case d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK:case"thumbnail-link":return d("WAWebWamEnumMediaType").MEDIA_TYPE.URL;case"payment-bg-image":return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"biz-cover-photo":return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;default:throw c("err")("webMediaType is invalid: "+a)}}function f(a){if(a instanceof d("WAWebMmsClientErrors").MMSUnauthorizedError)return d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_NO_PERMISSIONS;if(a instanceof d("WAWebMmsClientErrors").MediaTooLargeError)return d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_BAD_MEDIA;if(a instanceof d("WAWebMmsClientErrors").MMSThrottleError)return d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_THROTTLE;if(a instanceof d("WAWebHttpErrors").HttpStatusCodeError&&a.status>=500)return d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_SERVER;if(a instanceof d("WAWebMediaHostsErrors").NoMediaHostsError)return d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_MEDIA_CONN;if(a.name===d("WAAbortError").ABORT_ERROR)return d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_CANCEL;return a instanceof d("WAWebHttpErrors").HttpNetworkError?d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_UPLOAD:d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_UNKNOWN}function k(a){if(a instanceof d("WAWebMmsClientErrors").MMSThrottleError)return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_THROTTLE;if(a instanceof d("WAWebMediaHostsErrors").NoMediaHostsError)return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_MEDIA_CONN;if(a instanceof d("WAWebHttpErrors").HttpNetworkError)return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_NETWORK;if(a instanceof d("WAWebHttpErrors").HttpStatusCodeError)switch(a.status){case 404:case 410:return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_TOO_OLD;case 416:return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_CANNOT_RESUME;case 401:return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_INVALID_URL;case 429:case 507:return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_THROTTLE;default:return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN}if(a.name===d("WAAbortError").ABORT_ERROR)return d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_CANCEL;return a instanceof d("WAWebHttpErrors").MmsDownloadFilehashMismatchError?d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_ENC_HASH_MISMATCH:d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN}function l(a){if(a instanceof d("WAWebHttpErrors").HttpStatusCodeError)return a.status}function m(){return 1+Math.floor(Number.MAX_SAFE_INTEGER*Math.random())}function n(a,b){if(b==null)return;var c;a.overallDownloadResult===d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN?c=d("WAWebWamEnumWebcMediaOperationCode").WEBC_MEDIA_OPERATION_CODE.DOWNLOAD:a.overallUploadResult===d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.ERROR_UNKNOWN&&(c=d("WAWebWamEnumWebcMediaOperationCode").WEBC_MEDIA_OPERATION_CODE.UPLOAD);if(c==null)return;new(d("WAWebWebcMediaErrorUnknownDetailsWamEvent").WebcMediaErrorUnknownDetailsWamEvent)({mediaId:a.mediaId,webcMediaOperation:c,webcMediaErrorName:b.name,webcMediaErrorMessage:b.message}).commit()}function o(a){if(!a)return d("WAWebWamEnumBackendStoreType").BACKEND_STORE_TYPE.NON_DIRECT_PATH;switch(a.slice(0,2).toLowerCase()){case"/v":return d("WAWebWamEnumBackendStoreType").BACKEND_STORE_TYPE.EVERSTORE;case"/o":return d("WAWebWamEnumBackendStoreType").BACKEND_STORE_TYPE.OIL;case"/m":return d("WAWebWamEnumBackendStoreType").BACKEND_STORE_TYPE.MANIFOLD}c("gkx")("26258")?d("WALogger").ERROR(i()).sendLogs("unrecognized-direct-path-type"):d("WALogger").ERROR(h(),a).sendLogs("unrecognized-direct-path-type");return null}g.getMetricOverallDownloadModeType=a;g.getMetricOverallUploadModeType=b;g.getMetricMediaType=e;g.getMetricUploadErrorResultType=f;g.getMetricDownloadErrorResultType=k;g.getStatusCode=l;g.generateMediaEventId=m;g.logErrorUnknownDetails=n;g.getMetricBackendStore=o}),98);
__d("WAWebCreateMediaUploadMetrics",["WAWebABProps","WAWebHttpErrors","WAWebMapFileOriginToUploadOrigin","WAWebMediaUpload2WamEvent","WAWebMmsMediaTypes","WAWebWamEnumConnectionType","WAWebWamEnumMediaQuality","WAWebWamEnumMediaUploadResultType","WAWebWamEnumNetworkStackType","WAWebWamEnumOverallLastUploadRetryPhaseType","WAWebWamMediaMetricUtils"],(function(a,b,c,d,e,f,g){function a(a,b,e,f,g,h){h===void 0&&(h=!1);var i=d("WAWebWamMediaMetricUtils").generateMediaEventId(),j=new(d("WAWebMediaUpload2WamEvent").MediaUpload2WamEvent)({mediaId:i,connectionType:d("WAWebWamEnumConnectionType").CONNECTION_TYPE.HOSTNAME,overallMediaType:d("WAWebWamMediaMetricUtils").getMetricMediaType(a),overallMmsVersion:4,overallAttemptCount:e,networkStack:d("WAWebWamEnumNetworkStackType").NETWORK_STACK_TYPE.NATIVE,overallUploadMode:d("WAWebWamMediaMetricUtils").getMetricOverallUploadModeType(a),overallIsForward:f,overallUploadOrigin:b,uploadSource:c("WAWebMapFileOriginToUploadOrigin")(b,f),isViewOnce:g,overallUserVisibleT:0});if(a===d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE&&d("WAWebABProps").getABPropConfigValue("hqp_log_enabled")){e=h?d("WAWebWamEnumMediaQuality").MEDIA_QUALITY.HIGHEST_QUALITY:d("WAWebWamEnumMediaQuality").MEDIA_QUALITY.DATA_SAVER;j.set({photoQualitySetting:e})}function k(a){j.set({overallMediaSize:a})}function l(a){a instanceof d("WAWebHttpErrors").HttpStatusCodeError&&j.set({resumeHttpCode:a.status})}function m(){j.set({overallUploadResult:d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.DUPLICATE,overallIsFinal:!0,resumeHttpCode:200}),j.markOverallCumT(),j.commit()}function n(a){var b=a.hostName,c=a.hostClass;a=a.failCount;j.set({overallDomain:b,overallConnectionClass:c,overallRetryCount:a})}function o(){j.set({resumeHttpCode:404,overallUploadResult:d("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE.OK,overallIsFinal:!0,uploadHttpCode:200,finalizeHttpCode:200}),j.markOverallCumT(),j.commit()}function p(a){j.set({overallUploadResult:d("WAWebWamMediaMetricUtils").getMetricUploadErrorResultType(a),overallIsFinal:!0});var b=d("WAWebWamMediaMetricUtils").getStatusCode(a);b!=null&&(j.uploadHttpCode=b,j.finalizeHttpCode=b);j.markOverallCumT();j.commit();d("WAWebWamMediaMetricUtils").logErrorUnknownDetails(j,a)}function q(a){j.set({overallT:a})}function r(a,b,c,e){var f=new(d("WAWebMediaUpload2WamEvent").MediaUpload2WamEvent)(j.all),g=d("WAWebWamMediaMetricUtils").getStatusCode(a),h=e===d("WAWebWamEnumOverallLastUploadRetryPhaseType").OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE.FINALIZE?g:f.finalizeHttpCode;f.set({mediaId:d("WAWebWamMediaMetricUtils").generateMediaEventId(),overallUploadResult:d("WAWebWamMediaMetricUtils").getMetricUploadErrorResultType(a),overallIsFinal:!1,overallT:b,overallRetryCount:c,overallLastUploadRetryPhase:e,finalizeHttpCode:h});g!=null&&(j.uploadHttpCode=g);j.markOverallCumT();f.commit();d("WAWebWamMediaMetricUtils").logErrorUnknownDetails(j,a)}function s(){j.startOverallEncryptT()}function t(){j.markOverallEncryptT()}function u(){j.set({uploadIsStreaming:!0})}function v(a){j.set({uploadBytesTransferred:a})}function w(a){a!=null&&j.set({isViewOnce:a}),j.markOverallUserVisibleT()}return{handleStreamUploadStart:u,handleArrayBufferCreated:k,handleCheckExistingError:l,handleCheckExistingSuccess:m,handleUploadHostFound:n,handleUploadSuccess:o,handleUploadError:p,handleUploadAttemptSuccess:q,handleUploadAttemptError:r,mediaId:i,handleEncryptionStart:s,handleEncryptionSuccess:t,handleUploadProgress:v,handleSendMessageStart:w}}g["default"]=a}),98);
__d("WAPromiseProps",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c=Object.keys(a),d=(g||(g=b("Promise"))).all(c.map(function(b){return a[b]}));function e(a){var b={};for(var d=0;d<a.length;d++)b[c[d]]=a[d];return b}return d.then(e)}f.promiseProps=a}),66);
__d("WAWebCryptoCalculateStreamingSidecar",["Promise","WAArrayBuffersConcat","WACryptoHmac","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h,i=64*1024,j=16,k=10;function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=a instanceof ArrayBuffer?a.byteLength:a.buffer.byteLength;f=f-j;f=Math.ceil(f/i);f=c("lodash").times(f,function(b){b=b*i;var c=b+j+i;b=a.slice(b,c);return d("WACryptoHmac").hmacSha256(e,b,k)});f=(yield (h||(h=b("Promise"))).all(f));return d("WAArrayBuffersConcat").concatArrayBuffers.apply(void 0,f)});return l.apply(this,arguments)}g.IV_LENGTH=j;g.HMAC_LENGTH=k;g.calculateStreamingSidecar=a}),98);
__d("WAWebCryptoCalculateFirstFrameSidecar",["WACryptoHmac","WAWebCryptoCalculateStreamingSidecar"],(function(a,b,c,d,e,f,g){var h=16;function a(a,b,c){a=Math.ceil(a/h)*h;b=b.slice(0,d("WAWebCryptoCalculateStreamingSidecar").IV_LENGTH+a);return d("WACryptoHmac").hmacSha256(c,b,d("WAWebCryptoCalculateStreamingSidecar").HMAC_LENGTH)}g["default"]=a}),98);
__d("WAWebCryptoCreateMediaKeys",["WABase64","WACryptoHkdf","WALogger","WAWebMiscErrors","WAWebMmsMediaTypes","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodeB64: invalid base64 string ",""]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=j(a),f;try{f=d("WABase64").decodeB64(b)}catch(a){c("gkx")("26258")||d("WALogger").LOG(h(),b)}if(!b||!e||!f)throw new(d("WAWebMiscErrors").MediaEncryptionError)("createKeys fail: !!mediakey: "+!!b+" info: "+e+" type: "+a);b=(yield d("WACryptoHkdf").extractAndExpand(f,e,112));if(!b||b.byteLength<112)throw new(d("WAWebMiscErrors").MediaEncryptionError)("computeMediaKeys: hkdf error");return{iv:b.slice(0,0+16),encKey:b.slice(16,16+32),macKey:b.slice(48,48+32),refKey:b.slice(80,80+32)}});return i.apply(this,arguments)}function j(a){switch(a){case d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO:return"WhatsApp Audio Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT:return"WhatsApp Document Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.GIF:return"WhatsApp Video Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE:return"WhatsApp Image Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.PPIC:throw c("err")("Cannot create media keys for profile pics");case d("WAWebMmsMediaTypes").MEDIA_TYPES.PRODUCT:return"WhatsApp Image Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.PTT:return"WhatsApp Audio Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER:return"WhatsApp Image Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO:case d("WAWebMmsMediaTypes").MEDIA_TYPES.PTV:return"WhatsApp Video Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_DOCUMENT:return"WhatsApp Document Thumbnail Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_IMAGE:return"WhatsApp Image Thumbnail Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_VIDEO:return"WhatsApp Video Thumbnail Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_LINK:return"WhatsApp Link Thumbnail Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.TEMPLATE:throw c("err")("Cannot create media keys for template");case d("WAWebMmsMediaTypes").MEDIA_TYPES.HISTORY_SYNC:return"WhatsApp History Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.MD_APP_STATE:return"WhatsApp App State Keys";case d("WAWebMmsMediaTypes").MEDIA_TYPES.PRODUCT_CATALOG_IMAGE:throw c("err")("Cannot create media keys for product catalog image");case d("WAWebMmsMediaTypes").MEDIA_TYPES.PAYMENT_BG_IMAGE:return"WhatsApp Payment Background Keys"}}g["default"]=a}),98);
__d("WAWebMmsPerformanceExperimentSwitch",["WAWebABProps","WAWebServerPropsModel","gkx"],(function(a,b,c,d,e,f,g){function h(){return c("gkx")("26254")===!0&&d("WAWebServerPropsModel").ServerProps.maxFileSize>d("WAWebServerPropsModel").DEFAULT_MAX_FILE_SIZE_BYTES||d("WAWebServerPropsModel").ServerProps.maxElectronFileSize>d("WAWebServerPropsModel").DEFAULT_MAX_FILE_SIZE_BYTES}function a(a){return h()&&a>d("WAWebServerPropsModel").DEFAULT_MAX_FILE_SIZE_BYTES}function b(){return h()?!0:d("WAWebABProps").getABPropConfigValue("web_abprop_large_files_encryption_optimization")}g.shouldEncryptInChunks=a;g.isPerformanceExperimentEnabled=b}),98);
__d("WAWebWebp",["$InternalEnum","WABinary","WALogger","WATypedArraysEqual"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["JSON not found in sticker file"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker file not extended format."]);i=function(){return a};return a}var j=b("$InternalEnum")({VP8X:"VP8X",ANMF:"ANMF",EXIF:"EXIF",XMP:"XMP "}),k=12,l=8,m=4,n=20,o=2,p="}".charCodeAt(0),q=0;function r(a,b){b=u(b);var d=0;d+=k;while(d<a.byteLength){var e=a.slice(d,d+l),f=e.slice(0,m);e=t(e.slice(m,2*m));e%2!==0&&(e+=1);if(c("WATypedArraysEqual")(f,b))return{position:d,size:e+m+m};d+=l+e}return null}function a(a){if(!s(a)){d("WALogger").LOG(i());return null}var b=r(a,j.EXIF);if(!b)return null;a=a.slice(b.position,b.position+b.size);var c,e;for(var f=a.byteLength;f>0;--f)if(e==null&&a[f]===p)e=f;else if(e!=null&&a[f]===q){c=f+1;break}if(c==null||e==null){d("WALogger").WARN(h());return null}return{position:b.position+c,size:e-c+1}}function s(a){a=a.slice(k,k+m);return c("WATypedArraysEqual")(a,u(j.VP8X))}function e(a){a=new Uint8Array(a);return s(a)&&(o&a[n])!==0}function t(a){return a.reduce(function(a,b,c){return a+(b<<c*8)},0)}function f(a){var b=new(d("WABinary").Binary)();b.writeUint32(a,!0);return b.readByteArray()}function u(a){var b=new(d("WABinary").Binary)();b.writeString(a);return b.readByteArray()}g.Chunk=j;g.WEBP_HEADER_SIZE=k;g.CHUNK_HEADER_SIZE=l;g.FOUR=m;g.findWebpChunk=r;g.findWebpMetadata=a;g.isExtendedFile=s;g.isAnimatedWebp=e;g.littleEndianToNumber=t;g.numberToLittleEndian=f;g.stringToUint8=u}),98);
__d("WAWebWebpMetadata",["$InternalEnum","WAWebStickerMetadataParsing","WAWebWamEnumStickerMakerSourceType"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({CutoutImage:1,WebStickerMaker:2,IosStickerMaker:3,AndroidStickerMaker:4});function a(a){return d("WAWebStickerMetadataParsing").toStickerMetadata(a)}function c(a){var b={};a.isFirstParty!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.isFirstParty]=a.isFirstParty?1:0);a.isFromStickerMaker!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.isFromStickerMaker]=a.isFromStickerMaker?1:0);a.emojis!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.emojis]=a.emojis);a.stickerPackId!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.stickerPackId]=a.stickerPackId);a.stickerPackName!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.stickerPackName]=a.stickerPackName);a.stickerPackPublisher!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.stickerPackPublisher]=a.stickerPackPublisher);a.stickerPackPlayStoreLink!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.stickerPackPlayStoreLink]=a.stickerPackPlayStoreLink);a.stickerPackAppleStoreLink!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.stickerPackAppleStoreLink]=a.stickerPackAppleStoreLink);a.isAvatar!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.isAvatar]=a.isAvatar?1:0);a.isAiSticker!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.isAiSticker]=a.isAiSticker?1:0);a.stickerMakerSourceType!=null&&(b[d("WAWebStickerMetadataParsing").STICKER_METADATA_FIELDS.stickerMakerSourceType]=a.stickerMakerSourceType);return b}function e(a){if(a==null)return null;switch(a){case h.CutoutImage:return d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE.CUTOUT_IMAGE;case h.WebStickerMaker:return d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE.WEB_STICKER_MAKER;case h.IosStickerMaker:return d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE.IOS_STICKER_MAKER;case h.AndroidStickerMaker:return d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE.ANDROID_STICKER_MAKER}}g.StickerMakerSourceType=h;g.toWebpMetadata=a;g.toRawWebpMetadata=c;g.getStickerMakerSourceType=e}),98);
__d("WAWebStickerMetadataParsing",["WAWebWebpMetadata"],(function(a,b,c,d,e,f,g){"use strict";var h={isFirstParty:!1,isFromStickerMaker:!1,emojis:[],stickerPackId:null,stickerPackName:null,stickerPackPublisher:null,stickerPackPlayStoreLink:null,stickerPackAppleStoreLink:null,isAvatar:!1,isAiSticker:!1,stickerMakerSourceType:null},i={isFirstParty:"is-first-party-sticker",isFromStickerMaker:"is-from-sticker-maker",emojis:"emojis",stickerPackId:"sticker-pack-id",stickerPackName:"sticker-pack-name",stickerPackPublisher:"sticker-pack-publisher",stickerPackPlayStoreLink:"android-app-store-link",stickerPackAppleStoreLink:"ios-app-store-link",isAvatar:"is-avatar-sticker",isAiSticker:"is-ai-sticker",stickerMakerSourceType:"sticker-maker-source-type"};function a(a){var b=a[i.isFirstParty],c=a[i.isFromStickerMaker],e=a[i.emojis],f=a[i.stickerPackId],g=a[i.stickerPackName],j=a[i.stickerPackPublisher],k=a[i.stickerPackPlayStoreLink],l=a[i.stickerPackAppleStoreLink],m=a[i.isAvatar],n=a[i.isAiSticker];a=d("WAWebWebpMetadata").StickerMakerSourceType.cast(a[i.stickerMakerSourceType]);var o=babelHelpers["extends"]({},h);if(b!=null){b=b===1;o.isFirstParty=b}if(c!=null){b=c===1;o.isFromStickerMaker=b}e!=null&&Array.isArray(e)&&(o.emojis=e);f!=null&&(o.stickerPackId=f);g!=null&&(o.stickerPackName=g);j!=null&&(o.stickerPackPublisher=j);k!=null&&(o.stickerPackPlayStoreLink=k);l!=null&&(o.stickerPackAppleStoreLink=l);if(m!=null){c=m===1;o.isAvatar=c}if(n!=null){b=n===1;o.isAiSticker=b}a!=null&&(o.stickerMakerSourceType=a);return o}g.DEFAULT_STICKER_METADATA=h;g.STICKER_METADATA_FIELDS=i;g.toStickerMetadata=a}),98);
__d("WAWebGetWebpMetadata",["WALogger","WAWebWebp","WAWebWebpMetadata"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse emojis out of sticker, returning empty object."]);h=function(){return a};return a}function i(a){a=new Uint8Array(a);var b=d("WAWebWebp").findWebpMetadata(a);if(!b)return{};var c=b.position;b=b.size;var e=new TextDecoder();a=a.slice(c,c+b);c=e.decode(a);try{b=JSON.parse(c);return b}catch(a){d("WALogger").LOG(h()).devConsole(a);return{}}}function a(a){a=i(a);a=d("WAWebWebpMetadata").toWebpMetadata(a);return a}g.getWebpMetadata=a}),98);
__d("WAWebWebpParseWebp",["WALogger","WATypedArraysEqual","WAWebGetWebpMetadata","WAWebWebp"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker file not extended format."]);h=function(){return a};return a}var i=3,j=5e3;function k(a){if(a===0)return 0;var b=Math.min(Math.floor(j/a),i);return Math.max(b,1)*a}var l=44,m=20,n=3,o=4,p={animationDuration:0,singleLoopDuration:0,emojis:[],isFirstParty:!1,isFromStickerMaker:!1,stickerPackId:null,stickerPackName:null,stickerPackPublisher:null,isAvatar:!1,isAiSticker:!1,stickerMakerSourceType:null};function a(a){var b=new Uint8Array(a);if(!d("WAWebWebp").isExtendedFile(b)){d("WALogger").LOG(h());return p}a=d("WAWebGetWebpMetadata").getWebpMetadata(a);var e=a.emojis,f=a.isFirstParty,g=a.isFromStickerMaker,i=a.stickerPackId,j=a.stickerPackName,q=a.stickerPackPublisher,r=a.isAvatar,s=a.isAiSticker;a=a.stickerMakerSourceType;e=babelHelpers["extends"]({},p,{emojis:e,isFirstParty:f,isFromStickerMaker:g,stickerPackId:i,stickerPackName:j,stickerPackPublisher:q,isAvatar:r,isAiSticker:s,stickerMakerSourceType:a});if(!d("WAWebWebp").isAnimatedWebp(b))return e;f=0;g=l;var t;while(c("WATypedArraysEqual")(b.slice(g,g+o),d("WAWebWebp").stringToUint8(d("WAWebWebp").Chunk.ANMF))){i=g+m;j=b.slice(i,i+n);if(j.length!==n)return e;f+=d("WAWebWebp").littleEndianToNumber(j);q=g+o;r=b.slice(q,q+o);if(r.length!==o)return e;g+=o*2+d("WAWebWebp").littleEndianToNumber(r);t==null&&(t=g)}s=k(f);return babelHelpers["extends"]({},e,{animationDuration:s,firstFrameLength:t,singleLoopDuration:f})}g.MAX_LOOPS=i;g.MAX_DURATION=j;g.getTotalAnimationDuration=k;g.parseWebp=a}),98);
__d("WAWebCryptoEncryptMedia",["Promise","WAArrayBuffersConcat","WACryptoAesCbc","WACryptoHmac","WALogger","WAMediaCalculateFilehash","WAPromiseProps","WATypedArraysConcat","WAWebCryptoCalculateFirstFrameSidecar","WAWebCryptoCalculateStreamingSidecar","WAWebCryptoCreateMediaKeys","WAWebMiscErrors","WAWebMmsMediaTypes","WAWebMmsPerformanceExperimentSwitch","WAWebWebpParseWebp","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptMedia: error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptMedia: success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptMedia: start"]);k=function(){return a};return a}var l=10;function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=f.iv,i=f.encKey;f=f.macKey;i=(yield d("WACryptoAesCbc").aesCbcEncrypt(i,a,g));g=i.slice(g.byteLength);var j=(yield d("WACryptoHmac").hmacSha256(f,i,l)),k=(h||(h=b("Promise"))).resolve();if(e===d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO||e===d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO){var m=d("WAArrayBuffersConcat").concatArrayBuffers(i,j);k=d("WAWebCryptoCalculateStreamingSidecar").calculateStreamingSidecar(m,f)}m=h.resolve();if(e===d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER){e=d("WAWebWebpParseWebp").parseWebp(a);a=e.firstFrameLength;if(a!=null){e=d("WAArrayBuffersConcat").concatArrayBuffers(i,j);m=c("WAWebCryptoCalculateFirstFrameSidecar")(a,e,f)}}i=d("WAArrayBuffersConcat").concatArrayBuffers(g,j);return d("WAPromiseProps").promiseProps({ciphertextHmac:i,hash:d("WAMediaCalculateFilehash").calculateFilehash(i),sidecar:k,firstFrameSidecar:m})});return n.apply(this,arguments)}function a(a){var c=a.ivCiphertext,e=a.signature;a=a.macKey;c=d("WAArrayBuffersConcat").concatArrayBuffers(c,e);return{sidecar:d("WAWebCryptoCalculateStreamingSidecar").calculateStreamingSidecar(c,a),firstFrameSidecar:(h||(h=b("Promise"))).resolve()}}function e(a){var e=a.plaintext,f=a.ivCiphertext,g=a.signature;a=a.macKey;e=d("WAWebWebpParseWebp").parseWebp(e);e=e.firstFrameLength;return{sidecar:(h||(h=b("Promise"))).resolve(),firstFrameSidecar:e!=null?c("WAWebCryptoCalculateFirstFrameSidecar")(e,d("WAArrayBuffersConcat").concatArrayBuffers(f,g),a):(h||(h=b("Promise"))).resolve()}}var o=new Map([[d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO,a],[d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO,a],[d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER,e]]);function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=e.iv,g=e.encKey;e=e.macKey;g=d("WAWebMmsPerformanceExperimentSwitch").shouldEncryptInChunks(a.byteLength)?yield d("WACryptoAesCbc").aesCbcEncryptWithChunking(g,a,f):yield d("WACryptoAesCbc").aesCbcEncrypt(g,a,f);f=new Uint8Array(g).subarray(f.byteLength);var i=(yield d("WACryptoHmac").hmacSha256(e,g,l));a=(c=o.get(c)==null?void 0:o.get(c)({plaintext:a,ivCiphertext:g,signature:i,macKey:e}))!=null?c:{};g=a.sidecar;e=g===void 0?(h||(h=b("Promise"))).resolve():g;c=a.firstFrameSidecar;g=c===void 0?(h||(h=b("Promise"))).resolve():c;a=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[f,new Uint8Array(i)]).buffer;return d("WAPromiseProps").promiseProps({ciphertextHmac:a,hash:d("WAMediaCalculateFilehash").calculateFilehash(a),sidecar:e,firstFrameSidecar:g})});return q.apply(this,arguments)}function f(a){var e=a.mediaKey,f=a.plaintext,g=a.type;return new(h||(h=b("Promise")))(function(a,b){var h={mediaKey:e.slice(0,10),type:g};d("WALogger").LOG(k()).devConsole(h);if(!g)throw new(d("WAWebMiscErrors").MediaEncryptionError)('encryptMedia: missing "type"');if(!e)throw new(d("WAWebMiscErrors").MediaEncryptionError)('encryptMedia: missing "mediaKey"');c("WAWebCryptoCreateMediaKeys")(g,e).then(function(a){return d("WAWebMmsPerformanceExperimentSwitch").isPerformanceExperimentEnabled()?p(f,g,a):m(f,g,a)}).then(function(b){d("WALogger").LOG(j()).devConsole(h),a(b)})["catch"](function(a){d("WALogger").WARN(i()).devConsole(h,a);if(a instanceof d("WAWebMiscErrors").MediaEncryptionError)throw a;throw new(d("WAWebMiscErrors").MediaEncryptionError)("encryption error: "+String(a)+"; stack: "+a.stack)})["catch"](b)})}g["default"]=f}),98);
__d("WAWebCryptoRandomMediaKey",["WABase64","WATimeUtils"],(function(a,b,c,d,e,f,g){function a(){var a=new Uint8Array(32);self.crypto.getRandomValues(a);return{key:d("WABase64").encodeB64(a),timestamp:d("WATimeUtils").unixTime()}}g["default"]=a}),98);
__d("WAWebMediaDebugString",[],(function(a,b,c,d,e,f){function a(a){return(a=a==null?void 0:a.slice(0,10))!=null?a:""}f.getDebugString=a}),66);
__d("WAWebMmsDownloadUploadCrashLogger",["$InternalEnum","WALogger","WAWebLocalStorage","WAWebServerPropsModel"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadUploadCrashLogger.likelyCrashedDuring","WithID","",""]);h=function(){return a};return a}a=b("$InternalEnum").Mirrored(["DOWNLOAD_STARTED","DOWNLOAD_FINISHED","DOWNLOAD_DECRYPTION_STARTED","DOWNLOAD_DECRYPTION_FINISHED","DOWNLOAD_ERROR","UPLOAD_STARTED","UPLOAD_FINISHED","UPLOAD_BLOB_TO_ARRAY_BUFFER_STARTED","UPLOAD_BLOB_TO_ARRAY_BUFFER_FINISHED","UPLOAD_ENCRYPTION_STARTED","UPLOAD_ENCRYPTION_FINISHED","UPLOAD_ERROR"]);var i="DownloadUploadCrashLoggerLikelyCrashed",j=new Set([a.DOWNLOAD_DECRYPTION_FINISHED,a.DOWNLOAD_ERROR,a.UPLOAD_FINISHED,a.UPLOAD_ERROR]);function k(a){return a.toLowerCase().replace(/(?:^|_)(\w)/g,function(a,b){return b.toLocaleUpperCase()})}function l(a){return Object.entries(a).map(function(a){var b=a[0];a=a[1];return b+": "+String(a)}).join(", ")}e=function(){function a(){this.hasPerformedInit=!1,this.$3=function(){c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").removeItem(i)}}var b=a.prototype;b.$1=function(){var a=c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").getItem(i);return a?JSON.parse(a):{}};b.$2=function(){c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").setItem(i,JSON.stringify(this.storage))};b.$4=function(){return d("WAWebServerPropsModel").ServerProps.webLogUploadDownloadCrashes===!0};b.init=function(){if(this.hasPerformedInit||!this.$4())return;window.addEventListener("beforeunload",this.$3);this.storage=this.$1();Object.entries(this.storage).forEach(function(a){var b=a[0];a=a[1];var c=a.progressType;a=a.metadata;d("WALogger").WARN(h(),k(c),b,a?"AndData => "+l(a):"").sendLogs("download-upload-manager-likely-crashed")});this.$3();this.hasPerformedInit=!0};b.reset=function(){if(!this.$4())return;window.removeEventListener("beforeunload",this.$3);this.$3();this.hasPerformedInit=!1};b.mark=function(a,b,c){if(!this.$4())return;j.has(b)?delete this.storage[String(a)]:this.storage[String(a)]={progressType:b,metadata:c};this.$2()};return a}();f=new e();g.ProgressType=a;g.downloadUploadCrashLogger=f}),98);
__d("WAWebUploadManager",["Promise","WAAbortError","WAFilteredCatch","WALogger","WAMemoizeConcurrent","WATimeUtils","WAWebCreateMediaUploadMetrics","WAWebCryptoEncryptMedia","WAWebCryptoRandomMediaKey","WAWebFileUtils","WAWebMediaDebugString","WAWebMmsClient","WAWebMmsClientErrors","WAWebMmsDownloadUploadCrashLogger","WAWebMmsPerformanceExperimentSwitch","WAWebPonyfillsUrlSearchParams","WAWebServerPropsModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.encryptAndUpload: error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.encryptAndUpload: canceled"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.encryptAndUpload: success"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.encryptAndUpload: start"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager._getExistingOrUpload: [","] error"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager._getExistingOrUpload: [","] canceled"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager._getExistingOrUpload: [","] success"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager._getExistingOrUpload: [","] start"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.checkIfAlreadyUploaded: [","] error"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.checkIfAlreadyUploaded: [","] canceled"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.checkIfAlreadyUploaded: [","] success"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadManager.checkIfAlreadyUploaded: [","] start"]);t=function(){return a};return a}function u(a){var b=a.mediaKey;a=a.mediaKeyTimestamp;if(b!=null&&a!=null)return{mediaKey:b,mediaKeyTimestamp:a};b=c("WAWebCryptoRandomMediaKey")();a=b.key;b=b.timestamp;return{mediaKey:a,mediaKeyTimestamp:b}}a=function(){function a(){var a=this;this._checkIfAlreadyUploaded=c("WAMemoizeConcurrent")(function(a){return a.token},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.encFilehash,e=a.type;e={encFilehash:b,type:e};b=d("WAWebMediaDebugString").getDebugString(b);d("WALogger").LOG(t(),b).devConsole(e);try{a=(yield c("WAWebMmsClient").checkIfUploadExists(a)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMmsClientErrors").MediaNotFoundError,function(){return null})));d("WALogger").LOG(s(),b).devConsole(e);return a}catch(a){a.name===d("WAAbortError").ABORT_ERROR?d("WALogger").LOG(r(),b).devConsole(e,a):d("WALogger").WARN(q(),b).devConsole(e,a);throw a}});return function(b){return a.apply(this,arguments)}}());this._memoizedUpload=c("WAMemoizeConcurrent")(function(a){return a.token},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ciphertextHmac,d=a.encFilehash,e=a.type,f=a.signal,g=a.onUploadHostFound,h=a.onUploadAttemptSuccess,i=a.onUploadAttemptError,j=a.onUploadSuccess,k=a.onProgress,l=a.onFinalize,m=a.onStreamUploadStart,n=a.mediaId;d=(yield c("WAWebMmsClient").upload({ciphertextHmac:b,encFilehash:d,type:e,signal:f,onUploadHostFound:g,onUploadAttemptSuccess:h,onUploadAttemptError:i,onProgress:k,byteOffset:(b=a.byteOffset)!=null?b:0,onFinalize:l,onStreamUploadStart:m,mediaId:n,token:a.token}));j();return d});return function(b){return a.apply(this,arguments)}}());this._getExistingOrUpload=c("WAMemoizeConcurrent")(function(a){return a.token},function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.ciphertextHmac,e=b.encFilehash,f=b.signal,g=b.type,h=b.onCheckExistingSuccess,i=b.onCheckExistingError,j=b.onUploadHostFound,k=b.onUploadAttemptSuccess,l=b.onUploadAttemptError,q=b.onUploadSuccess,r=b.onProgress,s=b.onFinalize,t=b.onStreamUploadStart,u=b.mediaId,v={encFilehash:e,type:g},w=d("WAWebMediaDebugString").getDebugString(e);d("WALogger").LOG(p(),w).devConsole(v);try{var x=(yield a._checkIfAlreadyUploaded({encFilehash:e,type:g,signal:f,mediaId:u,token:b.token})["catch"](function(a){i(a);throw a}).then(function(d){if((d==null?void 0:d.complete)===!0){h();return{directPath:d.directPath,handle:d.handle,url:d.url}}return a._memoizedUpload({ciphertextHmac:c,encFilehash:e,type:g,signal:f,onUploadHostFound:j,onUploadAttemptSuccess:k,onUploadAttemptError:l,onUploadSuccess:q,onCheckExistingSuccess:h,onCheckExistingError:i,onProgress:r,onFinalize:s,onStreamUploadStart:t,byteOffset:d==null?void 0:d.resume,mediaId:u,token:b.token})}));d("WALogger").LOG(o(),w).devConsole(v,x);return x}catch(a){a.name===d("WAAbortError").ABORT_ERROR?d("WALogger").LOG(n(),w).devConsole(v,a):d("WALogger").WARN(m(),w).devConsole(v,a);throw a}});return function(a){return c.apply(this,arguments)}}());d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.init()}var e=a.prototype;e.encryptAndUpload=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this,f=a.blob,g=a.signal,m=a.type,n=a.userUploadAttemptCount,o=a.forwardedFromWeb,p=a.uploadOrigin,q=a.onProgress,r=a.onFinalize,s=a.isViewOnce,t=a.isHdPhoto,w={type:m};d("WALogger").LOG(l()).devConsole(w);p=c("WAWebCreateMediaUploadMetrics")(m,p,n,o,s,t);var x=p.handleCheckExistingSuccess,y=p.handleCheckExistingError,z=p.handleUploadHostFound,A=p.handleUploadAttemptSuccess,B=p.handleUploadAttemptError,C=p.handleUploadSuccess,D=p.handleArrayBufferCreated;n=p.handleUploadError;var E=p.mediaId,F=p.handleEncryptionStart,G=p.handleEncryptionSuccess,H=p.handleStreamUploadStart,I=p.handleUploadProgress,J=function(a,b){q==null?void 0:q(a,b);b=b+a.loaded;I(b)};d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_ENCRYPTION_STARTED);try{if(d("WAWebMmsPerformanceExperimentSwitch").isPerformanceExperimentEnabled()){var K=u(a);s=(h||(h=b("Promise"))).resolve(f).then(function(a){d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_BLOB_TO_ARRAY_BUFFER_STARTED,{size:f instanceof Blob?f.size:f.byteLength});a=a instanceof Blob?d("WAWebFileUtils").blobToArrayBuffer(a):a;d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_BLOB_TO_ARRAY_BUFFER_FINISHED);return a}).then(function(a){D(a.byteLength);F();return c("WAWebCryptoEncryptMedia")({type:m,plaintext:a,mediaKey:K.mediaKey})}).then(function(b){var c=b.hash,f=b.ciphertextHmac,h=b.sidecar,i=b.firstFrameSidecar;G();d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_ENCRYPTION_FINISHED);b=a.mediaKey?e._getExistingOrUpload:e._memoizedUpload;return b({ciphertextHmac:f,encFilehash:c,type:m,signal:g,onCheckExistingSuccess:x,onCheckExistingError:y,onUploadHostFound:z,onUploadAttemptSuccess:A,onUploadAttemptError:B,onUploadSuccess:C,onProgress:J,onFinalize:r,onStreamUploadStart:H,mediaId:E,token:(b=a.token)!=null?b:c}).then(function(a){return{directPath:o&&d("WAWebServerPropsModel").ServerProps.mmsCatV1ForwardHotOverrideEnabled?v(a.directPath):a.directPath,encFilehash:c,mediaKey:K.mediaKey,mediaKeyTimestamp:K.mediaKeyTimestamp,sidecar:h,firstFrameSidecar:i,url:a.url,handle:a.handle}})})}else{d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_BLOB_TO_ARRAY_BUFFER_STARTED,{size:f instanceof Blob?f.size:f.byteLength});t=f instanceof Blob?d("WAWebFileUtils").blobToArrayBuffer(f):(h||(h=b("Promise"))).resolve(f);d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_BLOB_TO_ARRAY_BUFFER_FINISHED);s=t.then(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){D(b.byteLength);var f=u(a),h=f.mediaKey;f=f.mediaKeyTimestamp;F();b=(yield c("WAWebCryptoEncryptMedia")({type:m,plaintext:b,mediaKey:h}));var i=b.ciphertextHmac,j=b.hash,k=b.sidecar;b=b.firstFrameSidecar;G();d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_ENCRYPTION_FINISHED);var l=a.mediaKey?e._getExistingOrUpload:e._memoizedUpload;i=(yield l({ciphertextHmac:i,encFilehash:j,type:m,signal:g,onCheckExistingSuccess:x,onCheckExistingError:y,onUploadHostFound:z,onUploadAttemptSuccess:A,onUploadAttemptError:B,onUploadSuccess:C,onFinalize:r,onStreamUploadStart:H,onProgress:J,mediaId:E,token:(l=a.token)!=null?l:j}));return{directPath:o&&d("WAWebServerPropsModel").ServerProps.mmsCatV1ForwardHotOverrideEnabled?v(i.directPath):i.directPath,encFilehash:j,mediaKey:h,mediaKeyTimestamp:f,sidecar:k,firstFrameSidecar:b,url:i.url,handle:i.handle}});return function(a){return f.apply(this,arguments)}}())}p=(yield s);d("WALogger").LOG(k()).devConsole(w);d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_FINISHED);return p}catch(a){a.name===d("WAAbortError").ABORT_ERROR?d("WALogger").LOG(j()).devConsole(w,a):d("WALogger").WARN(i()).devConsole(w,a);d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(E,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.UPLOAD_ERROR);n(a);throw a}});function e(b){return a.apply(this,arguments)}return e}();e.unencryptedUpload=function(a){var b=a.file,d=a.hash,e=a.type,f=a.signal,g=a.uploadOrigin,h=a.isViewOnce;g=c("WAWebCreateMediaUploadMetrics")(e,g,0,!1,h);h=g.handleCheckExistingSuccess;var i=g.handleCheckExistingError,j=g.handleUploadHostFound,k=g.handleUploadAttemptSuccess,l=g.handleUploadAttemptError,m=g.handleUploadSuccess,n=g.handleStreamUploadStart,o=g.handleUploadProgress;g=g.mediaId;var p=function(a,b){o(a.loaded+b)};a=(a=a.token)!=null?a:d;return this._getExistingOrUpload({ciphertextHmac:b,encFilehash:d,type:e,signal:f,onCheckExistingSuccess:h,onCheckExistingError:i,onUploadHostFound:j,onUploadAttemptSuccess:k,onUploadAttemptError:l,onUploadSuccess:m,onStreamUploadStart:n,onProgress:p,mediaId:g,token:a})};e.uploadCoverPhoto=function(a){var b=a.file,d=a.hash,e=a.type,f=a.signal,g=a.uploadOrigin,h=a.isViewOnce;g=c("WAWebCreateMediaUploadMetrics")(e,g,0,!1,h);h=g.handleCheckExistingSuccess;var i=g.handleCheckExistingError,j=g.handleUploadHostFound,k=g.handleUploadAttemptSuccess,l=g.handleUploadAttemptError,m=g.handleUploadSuccess,n=g.handleStreamUploadStart,o=g.handleUploadProgress;g=g.mediaId;var p=function(a,b){o(a.loaded+b)};d={ciphertextHmac:b,encFilehash:d,type:e,signal:f,onCheckExistingSuccess:h,onCheckExistingError:i,onUploadHostFound:j,onUploadAttemptSuccess:k,onUploadAttemptError:l,onUploadSuccess:m,onStreamUploadStart:n,onProgress:p,mediaId:g,token:(b=a.token)!=null?b:a.hash};return this._memoizedUpload(d)};return a}();e=new a();function v(a){a=a.split("?");var b=a[0];a=a[1];a=new(c("WAWebPonyfillsUrlSearchParams"))(a);var e=d("WATimeUtils").unixTime();a.set("_nc_hot",String(e));return b+"?"+a.toString()}g["default"]=e}),98);
__d("WAWebMediaProduct",["WAWebFileUtils","WAWebMmsMediaTypes","WAWebUploadManager","WAWebWamEnumUploadOriginType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebFileUtils").blobToArrayBuffer(a.forceToBlob()).then(function(a){return c("WAWebUploadManager").unencryptedUpload({file:a,hash:b,signal:new AbortController().signal,type:d("WAWebMmsMediaTypes").MEDIA_TYPES.PRODUCT_CATALOG_IMAGE,uploadOrigin:d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.PRODUCT_CATALOG,isViewOnce:!1})}));return new URL(a.directPath,"https://mmg.whatsapp.net").toString()});return h.apply(this,arguments)}g.uploadProductImage=a}),98);
__d("WAWebMediaVideoStreaming",[],(function(a,b,c,d,e,f){function a(a){var b=a.mediaObject;return b?b.videoStreamingInfo(a.id.toString()):null}f.videoStreamingInfo=a}),66);
__d("WAWebMedia",["WAWebCheckMediaExistence","WAWebClearMediaForChat","WAWebDownloadProgressiveJpegThumbnail","WAWebDownloadStatusV3Thumbnail","WAWebDownloadVideoThumbnail","WAWebManuallySetMedia","WAWebMediaCancelDownloadMsg","WAWebMediaCancelUploadMsg","WAWebMediaDownloadMsg","WAWebMediaForwardMediaMsg","WAWebMediaMetadata","WAWebMediaMsgRegistration","WAWebMediaPrep","WAWebMediaProduct","WAWebMediaResumeUploadMsg","WAWebMediaStickers","WAWebMediaVideoStreaming","WAWebPrepRawMedia"],(function(a,b,c,d,e,f){a=importNamespace("WAWebDownloadVideoThumbnail").downloadVideoThumbnail;b=importNamespace("WAWebMediaPrep").MediaPrep;c=importNamespace("WAWebCheckMediaExistence").checkMediaExistence;d=importNamespace("WAWebClearMediaForChat").clearMediaForChat;e=importNamespace("WAWebMediaDownloadMsg").downloadMsg;var g=importNamespace("WAWebDownloadProgressiveJpegThumbnail").downloadProgressiveJpegThumbnail,h=importNamespace("WAWebDownloadStatusV3Thumbnail").downloadStatusV3Thumbnail,i=importNamespace("WAWebMediaForwardMediaMsg").forwardMediaMsg,j=importNamespace("WAWebManuallySetMedia").manuallySetMedia,k=importNamespace("WAWebPrepRawMedia").prepRawMedia,l=importNamespace("WAWebMediaResumeUploadMsg").resumeUploadMsg;Object.keys(importNamespace("WAWebMediaCancelDownloadMsg")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaCancelDownloadMsg")[a]});Object.keys(importNamespace("WAWebMediaCancelUploadMsg")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaCancelUploadMsg")[a]});Object.keys(importNamespace("WAWebMediaMetadata")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaMetadata")[a]});Object.keys(importNamespace("WAWebMediaMsgRegistration")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaMsgRegistration")[a]});Object.keys(importNamespace("WAWebMediaProduct")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaProduct")[a]});Object.keys(importNamespace("WAWebMediaStickers")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaStickers")[a]});Object.keys(importNamespace("WAWebMediaVideoStreaming")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebMediaVideoStreaming")[a]});f.downloadVideoThumbnail=a;f.MediaPrep=b;f.checkMediaExistence=c;f.clearMediaForChat=d;f.downloadMsg=e;f.downloadProgressiveJpegThumbnail=g;f.downloadStatusV3Thumbnail=h;f.forwardMediaMsg=i;f.manuallySetMedia=j;f.prepRawMedia=k;f.resumeUploadMsg=l}),66);
__d("WAConcurrentPriorityPromiseQueue",["Promise","WANullthrows","WAPriorityQueue","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new Map(),this.$4=new Map()}var d=a.prototype;d.clearQueue=function(){this.$4.clear(),this.$3.clear()};d.enqueue=function(a,c){var d,e,f=new(h||(h=b("Promise")))(function(a,b){d=a,e=b});this.$5(babelHelpers["extends"]({},c,{run:function(){var c;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;f.next=3;return b("regeneratorRuntime").awrap(a());case 3:c=f.sent;d(c);f.next=10;break;case 7:f.prev=7,f.t0=f["catch"](0),e(f.t0);case 10:case"end":return f.stop()}},null,this,[[0,7]])}}));this.$6();return f};d.$5=function(a){var b=this.$7(a.group);b.push(a)};d.$8=function(){return this.$9()};d.$6=function(){while(this.$10()<this.$1){var a=this.$8();if(a==null)break;this.$11(a)}};d.$11=function(a){var c=this,d,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:d=a.run,e=a.signal,f=a.group;g=this.$12(f);if(!(e==null?void 0:e.aborted)){h.next=5;break}setTimeout(function(){return c.$6()},0);return h.abrupt("return");case 5:g.add(a);h.prev=6;h.next=9;return b("regeneratorRuntime").awrap(d());case 9:h.prev=9;g["delete"](a);setTimeout(function(){return c.$6()},0);return h.finish(9);case 13:case"end":return h.stop()}},null,this,[[6,,9,13]])};d.$9=function(){for(var a=this.$4.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d.peek();if(!e)continue;if(this.$13(e.group))continue;return d.pull()}return null};d.$10=function(){var a=0;for(var b=this.$3.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a+=e.size}return a};d.getEnqueuedTasksCount=function(){var a=0;for(var b=this.$4.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a+=e.size()}return a};d.$12=function(a){if(!this.$3.has(a)){var b=new Set();this.$3.set(a,b);return b}return c("WANullthrows")(this.$3.get(a))};d.$13=function(a){var b=this.$3.get(a);return b==null?!1:b.size>=this.$14(a)};d.$7=function(a){if(!this.$4.has(a)){var b=new(c("WAPriorityQueue"))(function(a){return a.priority});this.$4.set(a,b)}return c("WANullthrows")(this.$4.get(a))};d.$14=function(a){a=this.$2[a];return a==null?Infinity:a};return a}();g["default"]=a}),98);
__d("WAWebWamEnumWebcRmrReasonCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,MSG_CLICK:1,STICKER_PANEL_ICON:2,MEDIA_VIEWER:3,VIDEO_STREAMING:4,STATUS_V3:5,MULTI_SELECT_DOWNLOAD:6,DOCUMENT_DOWNLOAD:7,PIP:8,STICKER_PANEL_STICKER:9,SEND_TO_CHAT:10,UPLOAD:11,MSG_INIT:12,MSG_UPDATE:13,MSG_DELETE:14,MSG_RENDER:15});f.WEBC_RMR_REASON_CODE=a}),66);
__d("WAWebMediaAutoDownloadQueue",["$InternalEnum","WAConcurrentPriorityPromiseQueue","WALogger","WAWebMedia","WAWebMediaDownloadMmsThumbnail","WAWebMiscGatingUtils","WAWebMsgGetters","WAWebMsgModelPropUtils","WAWebMsgModelUtils","WAWebMsgType","WAWebStickerModel","WAWebUserPrefsGeneral","WAWebWamEnumWebcRmrReasonCode","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaObject does not exist for media at download time ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaObject does not exist for media at enqueue time ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker mediaObject does not exist for media at download time ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker mediaObject does not exist for media at enqueue time ",""]);k=function(){return a};return a}var l=b("$InternalEnum")({MEDIA:"media",MMS_THUMBNAIL:"mms_thumbnail"}),m=32*1024*1024,n=512*1024,o=5,p=512,q=500*1024;function r(a){return d("WAWebMsgModelPropUtils").isTrusted(a.unsafe())}function s(a){switch(a.type){case d("WAWebMsgType").MSG_TYPE.AUDIO:case d("WAWebMsgType").MSG_TYPE.PTT:return d("WAWebUserPrefsGeneral").getAutoDownloadAudio();case d("WAWebMsgType").MSG_TYPE.STICKER:case d("WAWebMsgType").MSG_TYPE.IMAGE:return d("WAWebUserPrefsGeneral").getAutoDownloadPhotos();case d("WAWebMsgType").MSG_TYPE.VIDEO:case d("WAWebMsgType").MSG_TYPE.PTV:return a.isGif&&a.size<q?d("WAWebUserPrefsGeneral").getAutoDownloadPhotos():d("WAWebUserPrefsGeneral").getAutoDownloadVideos();case d("WAWebMsgType").MSG_TYPE.DOCUMENT:return d("WAWebUserPrefsGeneral").getAutoDownloadDocuments()}return!1}function t(a){switch(a.type){case d("WAWebMsgType").MSG_TYPE.IMAGE:case d("WAWebMsgType").MSG_TYPE.VIDEO:case d("WAWebMsgType").MSG_TYPE.PTV:case d("WAWebMsgType").MSG_TYPE.DOCUMENT:return a.size<=m;case d("WAWebMsgType").MSG_TYPE.AUDIO:case d("WAWebMsgType").MSG_TYPE.PTT:return a.size<n;case d("WAWebMsgType").MSG_TYPE.STICKER:return!0}return!1}a=function(){function a(){this.$1=new(c("WAConcurrentPriorityPromiseQueue"))(o,{photos:2,videos:1,audio:1,documents:1,mms_thumbnail:4})}var e=a.prototype;e.getEnqueuedTasksCount=function(){return this.$1.getEnqueuedTasksCount()};e.clearQueue=function(){this.$1.clearQueue()};e.$2=function(){return d("WAWebMiscGatingUtils").webMediaAutoDownloadEnabled()&&d("WAWebUserPrefsGeneral").getAutoDownloadPhotos()&&this.getEnqueuedTasksCount()<p};e.enqueue=function(a,b,c){if(a instanceof d("WAWebStickerModel").StickerModel){if(this.$2()){void this.$3({sticker:a});return!0}return!1}a=a;var e=d("WAWebMiscGatingUtils").webMediaAutoDownloadEnabled()&&b===l.MEDIA&&!d("WAWebMsgGetters").getIsNewsletterMsg(a)&&r(a)&&a.isNewMsg&&s(a)&&t(a)&&this.getEnqueuedTasksCount()<p;if(e)switch(a.type){case d("WAWebMsgType").MSG_TYPE.AUDIO:case d("WAWebMsgType").MSG_TYPE.PTT:this.$4({message:a,group:"audio",chat:c});return!0;case d("WAWebMsgType").MSG_TYPE.IMAGE:case d("WAWebMsgType").MSG_TYPE.STICKER:this.$4({message:a,group:"photos",chat:c});return!0;case d("WAWebMsgType").MSG_TYPE.VIDEO:case d("WAWebMsgType").MSG_TYPE.PTV:if(a.isGif&&a.size<q){this.$4({message:a,group:"photos",chat:c});return!0}this.$4({message:a,group:"videos",chat:c});return!0;case d("WAWebMsgType").MSG_TYPE.DOCUMENT:this.$4({message:a,group:"documents",chat:c});return!0}if(b===l.MMS_THUMBNAIL){if(a.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT||d("WAWebMsgModelUtils").typeIsUrl(a)){this.$5({message:a,group:"mms_thumbnail",chat:c});return!0}if(a.type===d("WAWebMsgType").MSG_TYPE.IMAGE||a.type===d("WAWebMsgType").MSG_TYPE.VIDEO||a.type===d("WAWebMsgType").MSG_TYPE.PTV){this.$6({message:a,group:"mms_thumbnail"});return!0}}return!1};e.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.sticker;if(!e.mediaObject){d("WALogger").ERROR(k(),c("gkx")("26258")?"":e.id).sendLogs("Sticker mediaObject does not exist for media at enqueue time");return}yield this.$1.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!e.mediaObject){d("WALogger").ERROR(j(),c("gkx")("26258")?"":e.id).sendLogs("Sticker mediaObject does not exist for media at download time");return}yield e.downloadMedia()}),{group:"photos",priority:1})});function e(b){return a.apply(this,arguments)}return e}();e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.message;a=a.group;if(!e.mediaObject){d("WALogger").ERROR(i(),c("gkx")("26258")?"":e.id).sendLogs("mediaObject does not exist for media at enqueue time");return}yield this.$1.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!e.mediaObject){d("WALogger").ERROR(h(),c("gkx")("26258")?"":e.id).sendLogs("mediaObject does not exist for media at download time",0);return}if(!s(e))return;yield e.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.OTHER,isUserInitiated:!1,isAutoDownload:!0})}),{group:a,priority:-e.t})});function e(b){return a.apply(this,arguments)}return e}();e.$5=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=a.message,e=a.chat;a=a.group;yield this.$1.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c("WAWebMediaDownloadMmsThumbnail")({msg:d,chat:e})}),{group:a,priority:-d.t})});function d(b){return a.apply(this,arguments)}return d}();e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.message;a=a.group;yield this.$1.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebMedia").downloadStatusV3Thumbnail({msg:c})}),{group:a,priority:-c.t})});function c(b){return a.apply(this,arguments)}return c}();return a}();e=new a();g.AutoDownloadTypes=l;g.MAX_AUTO_DOWNLOAD_SIZE=m;g.AUDIO_AUTO_DOWNLOAD_SIZE_LIMIT=n;g.shouldTrustMedia=r;g.shouldAutoDownloadMedia=s;g.validateMediaSize=t;g.AutoDownloadQueue=e}),98);
__d("WAWebMediaData",["WAWebBaseModel","WAWebFeatureDetectionSwSupport","WAWebMediaCleanFileName","WAWebMediaInMemoryBlobCache","WAWebMediaTypes","gkx"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.type=d("WAWebBaseModel").prop(d("WAWebMediaTypes").OUTWARD_TYPES.UNKNOWN),c.directPath=d("WAWebBaseModel").prop(),c.mediaKey=d("WAWebBaseModel").prop(),c.mediaKeyTimestamp=d("WAWebBaseModel").prop(),c.encFilehash=d("WAWebBaseModel").prop(),c.mediaStage=d("WAWebBaseModel").prop(d("WAWebMediaTypes").MediaDataStage.INIT),c.size=d("WAWebBaseModel").prop(),c.loadedSize=d("WAWebBaseModel").prop(),c.filehash=d("WAWebBaseModel").prop(),c.mimetype=d("WAWebBaseModel").prop(),c.mediaBlob=d("WAWebBaseModel").prop(),c.renderableUrl=d("WAWebBaseModel").prop(),c.fullHeight=d("WAWebBaseModel").prop(),c.fullWidth=d("WAWebBaseModel").prop(),c.aspectRatio=d("WAWebBaseModel").prop(),c.rgbaBuffer=d("WAWebBaseModel").prop(),c.rgbaHeight=d("WAWebBaseModel").prop(),c.rgbaWidth=d("WAWebBaseModel").prop(),c.animationDuration=d("WAWebBaseModel").prop(0),c.animatedAsNewMsg=d("WAWebBaseModel").prop(!1),c.isAnimated=d("WAWebBaseModel").prop(),c.isFirstParty=d("WAWebBaseModel").prop(),c.isFromStickerMaker=d("WAWebBaseModel").prop(),c.isAvatar=d("WAWebBaseModel").prop(),c.isAiSticker=d("WAWebBaseModel").prop(),c.isLottie=d("WAWebBaseModel").prop(),c.stickerPackId=d("WAWebBaseModel").prop(),c.stickerPackName=d("WAWebBaseModel").prop(),c.stickerPackPublisher=d("WAWebBaseModel").prop(),c.stickerMakerSourceType=d("WAWebBaseModel").prop(),c.singleLoopDuration=d("WAWebBaseModel").prop(),c.firstFrameLength=d("WAWebBaseModel").prop(),c.firstFrameSidecar=d("WAWebBaseModel").prop(),c.emojis=d("WAWebBaseModel").prop(),c.progressiveStage=d("WAWebBaseModel").prop(),c.isViewOnce=d("WAWebBaseModel").prop(!1),c.staticUrl=d("WAWebBaseModel").prop(),c.preview=d("WAWebBaseModel").prop(),c.sidecar=d("WAWebBaseModel").prop(),c.duration=d("WAWebBaseModel").prop(),c.durationFloat=d("WAWebBaseModel").prop(),c.isGif=d("WAWebBaseModel").prop(),c.gifAttribution=d("WAWebBaseModel").prop(),c.streamable=d("WAWebBaseModel").derived(function(){return this.isStreamable()},["isGif","isViewOnce","mediaStage","sidecar","type","_swStreamingSupported"]),c._swStreamingSupported=d("WAWebBaseModel").prop(!1),c._listeningToSwSupport=d("WAWebBaseModel").prop(!1),c.filename=d("WAWebBaseModel").prop(),c.pageCount=d("WAWebBaseModel").prop(),c.documentPreview=d("WAWebBaseModel").prop(),c.isVcardOverMmsDocument=d("WAWebBaseModel").prop(!1),c.parsedVcards=d("WAWebBaseModel").prop(),c.extractedLottieSticker=d("WAWebBaseModel").prop(),c.fullPreviewSize=d("WAWebBaseModel").prop(),c.fullPreviewData=d("WAWebBaseModel").prop(),c.subtype=d("WAWebBaseModel").prop(),c.waveform=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this)};f.set=function(b,c,d){d=d;if(typeof b==="string"){var e;e=(e={},e[b]=c,e)}else e=b,d=c;e=i(e);return a.prototype.set.call(this,e,d)};f.isStreamable=function(){return this.isStreamableType()&&this.listenToServiceWorkerSupport()&&!this.isViewOnce};f._updateStreamingSupported=function(a){this._swStreamingSupported=a};f.listenToServiceWorkerSupport=function(){if(this._listeningToSwSupport)return this._swStreamingSupported;if(c("gkx")("26262")){var a=b("WAWebFeatureDetectionSwSupport");this.listenTo(a,"change:streamingSupported",this._updateStreamingSupported);this._swStreamingSupported=Boolean(a.streamingSupported)}this._listeningToSwSupport=!0;return this._swStreamingSupported};f.isStreamableType=function(){return c("gkx")("26262")?this.type===d("WAWebMediaTypes").OUTWARD_TYPES.VIDEO&&!this.isGif&&(this.mediaStage===d("WAWebMediaTypes").MediaDataStage.INIT||this.mediaStage===d("WAWebMediaTypes").MediaDataStage.FETCHING||this.mediaStage===d("WAWebMediaTypes").MediaDataStage.DECRYPTING||this.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED)&&this.fullWidth!=null&&this.fullHeight!=null&&Boolean(this.sidecar&&this.sidecar.byteLength>0):!1};f.isDownloadable=function(){return this.isViewOnce?!1:this.renderableUrl!=null||d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.has(this.filehash)||this.mediaStage===d("WAWebMediaTypes").MediaDataStage.EXISTS||this.mediaStage===d("WAWebMediaTypes").MediaDataStage.PROGRESSIVE_READY};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="mediaData";var h=d("WAWebBaseModel").defineModel(a);h.TYPE=d("WAWebMediaTypes").OUTWARD_TYPES;e=h;function i(a){if(a.filename&&a.type===h.TYPE.DOCUMENT){var b=d("WAWebMediaCleanFileName").cleanFilename(a.filename);return babelHelpers["extends"]({},a,{filename:b,caption:b})}return a}g["default"]=e}),98);
__d("WAWebMediaOpaqueData",["Promise","WABase64","WALogger","WANullthrows","WAShiftTimer","WAWebFileUtils","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["OpaqueData:size returned 0"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," called on unretained OpaqueData"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([""," called on released OpaqueData"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["OpaqueData:autorelease too many release calls"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["OpaqueData:autorelease called on released object"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["OpaqueData:retain called on released OpaqueData"]);n=function(){return a};return a}var o=[],p=new(d("WAShiftTimer").ShiftTimer)(a),q=function(){function a(){this._retainCount=1,this._inAutoreleasePool=!1,this.released=!1,this._b64=void 0,this._blob=void 0,this._url=void 0,this._mimetype=void 0,this._released=void 0}var e=a.prototype;e.retain=function(){if(this.released){d("WALogger").WARN(n());throw c("err")("OpaqueData:retain called on released OpaqueData")}else this._retainCount++};e.autorelease=function(){this.released?d("WALogger").WARN(m()):this._retainCount===0?d("WALogger").WARN(l()):this._retainCount===1?(this._retainCount=0,this._inAutoreleasePool||(this._inAutoreleasePool=!0,o.push(this),p.onOrBefore(1e3))):this._retainCount--};e.autoreleaseWhenPromiseCompletes=function(a){var b=this,c=function(){b.autorelease()};a.then(c,c)};e.throwIfReleased=function(a){if(this.released){d("WALogger").ERROR(k(),a);throw c("err")(a+" called on released OpaqueData")}else this._retainCount===0&&d("WALogger").ERROR(j(),a)};e.url=function(){this.throwIfReleased("OpaqueData:url");if(this._url!=null&&this._url!=="")return this._url;if(this._b64!=null&&this._b64!==""){this._url="data:image/jpeg;base64,"+this._b64;return this._url}this._url=window.URL.createObjectURL(c("WANullthrows")(this._blob));return this._url};e.getBlob=function(){return this._blob};e.getBase64=function(){return this._b64};e.validate=function(){if(this._released===!0)return(h||(h=b("Promise"))).resolve(!1);else if(this._blob)return d("WAWebFileUtils").validateBlob(this._blob);return(h||(h=b("Promise"))).resolve(!0)};e.size=function(){this.throwIfReleased("OpaqueData:size");if(this._blob)return this._blob.size;else if(this._b64!=null)return d("WABase64").sizeWhenB64Decoded(this._b64);d("WALogger").ERROR(i()).sendLogs("opaque-data-size-0");return 0};e.formData=function(a){this.throwIfReleased("OpaqueData:formData");return this.forceToBlob()};e.type=function(){this.throwIfReleased("OpaqueData:type");return this._mimetype!=null&&this._mimetype!==""?this._mimetype:"undefined"};e.forceToBlob=function(){this.throwIfReleased("OpaqueData:forceToBlob");var a=this._blob;if(a)return a;a=this._b64;if(a!=null&&a!==""){this._b64=void 0;this._url=void 0;var b=this._mimetype;return this._blob=new Blob([d("WABase64").decodeB64(a)],b!=null&&b!==""?{type:b}:void 0)}throw c("err")("OpaqueData:forceToBlob no b64 or blob")};e._releaseImpl=function(){this._mimetype=void 0;var a=this._blob;a?(this._blob=void 0,this._url!=null&&this._url!==""&&(window.URL.revokeObjectURL(this._url),this._url=void 0)):(this._b64=void 0,this._url=void 0)};e.isBlobEqual=function(a){return!a?!this._blob:this._blob===a._blob};return a}();q.createFromBase64Jpeg=function(a){return new(h||(h=b("Promise")))(function(b){var c=new q();c._b64=a;c._mimetype="image/jpeg";return b(c)})};q.createFromData=function(a,c){return new(h||(h=b("Promise")))(function(b){var d=new q();d._blob=a instanceof Blob&&a.type===c?a:new Blob([a],{type:c});d._mimetype=c;return b(d)})};function a(){var a=o;o=[];for(var b=0;b<a.length;b++){var c=a[b];c._inAutoreleasePool=!1;c._retainCount===0&&!c.released&&(c.released=!0,c._releaseImpl())}}g["default"]=q}),98);
__d("WAWebMessagePluginCreateRegistryLookup",[],(function(a,b,c,d,e,f){function a(a){var b=new Map();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f;if(c){if(d>=a.length)break;f=a[d++]}else{d=a.next();if(d.done)break;f=d.value}f=f;var g=f.type;e=(e=f.subtype)!=null?e:null;var h=b.get(g);h==null&&(h=new Map(),b.set(g,h));h.set(e,f)}return function(a,c){return(a=b.get(a))==null?void 0:a.get((a=c)!=null?a:null)}}f.createMsgTypeRegistryLookup=a}),66);
__d("WAWebGetThumbnailTypeForMediaChatMsg",["WAWebMmsMediaTypes","WAWebMsgGetters"],(function(a,b,c,d,e,f,g){function a(a){a=a.msg;a=d("WAWebMsgGetters").getIsNewsletterMsg(a);return a?d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK:d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_LINK}g["default"]=a}),98);
__d("WAWebGetThumbnailTypeForMediaDocumentMsg",["WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_DOCUMENT}g["default"]=a}),98);
__d("WAWebGetThumbnailTypeForMediaImageMsg",["WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_IMAGE}g["default"]=a}),98);
__d("WAWebGetThumbnailTypeForMediaInteractiveMsg",["WAWebInteractiveMessageHeaderMediaType","WAWebMmsMediaTypes","err"],(function(a,b,c,d,e,f,g){function a(a){a=a.msg;a=a.interactiveHeader;if((a==null?void 0:a.mediaType)!=null)switch(a.mediaType){case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.DOCUMENT:return d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_DOCUMENT;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.VIDEO:return d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_VIDEO;default:break}throw c("err")("getThumbnailTypeForMediaMsg: unsupported msg type")}g["default"]=a}),98);
__d("WAWebGetThumbnailTypeForMediaVideoMsg",["WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_VIDEO}g["default"]=a}),98);
__d("WAWebMessagePluginGetThumbnailTypeForMediaMsgRegistry",["WAWebGetThumbnailTypeForMediaChatMsg","WAWebGetThumbnailTypeForMediaDocumentMsg","WAWebGetThumbnailTypeForMediaImageMsg","WAWebGetThumbnailTypeForMediaInteractiveMsg","WAWebGetThumbnailTypeForMediaVideoMsg"],(function(a,b,c,d,e,f,g){a=[{type:"audio",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"biz_content_placeholder",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"buttons_response",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"chat",subtype:"url",getThumbnailTypeForMediaMsg:c("WAWebGetThumbnailTypeForMediaChatMsg")},{type:"chat",subtype:void 0,getThumbnailTypeForMediaMsg:c("WAWebGetThumbnailTypeForMediaChatMsg")},{type:"ciphertext",subtype:"bot_unavailable_fanout",getThumbnailTypeForMediaMsg:null},{type:"ciphertext",subtype:"fanout",getThumbnailTypeForMediaMsg:null},{type:"ciphertext",subtype:"hosted_unavailable_fanout",getThumbnailTypeForMediaMsg:null},{type:"ciphertext",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"comment",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"debug_placeholder",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"document",subtype:void 0,getThumbnailTypeForMediaMsg:c("WAWebGetThumbnailTypeForMediaDocumentMsg")},{type:"event_creation",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"event_edit_encrypted",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"event_response",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"groups_v4_invite",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"hsm",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"image",subtype:void 0,getThumbnailTypeForMediaMsg:c("WAWebGetThumbnailTypeForMediaImageMsg")},{type:"interactive",subtype:void 0,getThumbnailTypeForMediaMsg:c("WAWebGetThumbnailTypeForMediaInteractiveMsg")},{type:"interactive_response",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"keep_in_chat",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"list",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"list_response",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"location",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"multi_vcard",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"native_flow",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"newsletter_admin_invite",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"notification_template",subtype:"contact_info_card",getThumbnailTypeForMediaMsg:null},{type:"order",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"payment",subtype:"ciphertext",getThumbnailTypeForMediaMsg:null},{type:"payment",subtype:"futureproof",getThumbnailTypeForMediaMsg:null},{type:"payment",subtype:"invite",getThumbnailTypeForMediaMsg:null},{type:"payment",subtype:"request",getThumbnailTypeForMediaMsg:null},{type:"payment",subtype:"send",getThumbnailTypeForMediaMsg:null},{type:"pin_message",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"pinned_message",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"poll_creation",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"poll_update",subtype:"poll_vote",getThumbnailTypeForMediaMsg:null},{type:"product",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"admin_revoke",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"bot_feedback",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"bot_request_welcome",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"ephemeral_setting",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"ephemeral_sync_response",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"history_sync_notification",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"message_edit",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"sender_revoke",getThumbnailTypeForMediaMsg:null},{type:"protocol",subtype:"share_phone_number",getThumbnailTypeForMediaMsg:null},{type:"ptt",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"ptv",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"reaction",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"reaction_enc",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"request_phone_number",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"revoked",subtype:"admin",getThumbnailTypeForMediaMsg:null},{type:"revoked",subtype:"sender",getThumbnailTypeForMediaMsg:null},{type:"sticker",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"template_button_reply",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"unknown",subtype:"payment_action_request_declined",getThumbnailTypeForMediaMsg:null},{type:"unknown",subtype:"payment_transaction_request_cancelled",getThumbnailTypeForMediaMsg:null},{type:"unknown",subtype:"phone",getThumbnailTypeForMediaMsg:null},{type:"unknown",subtype:"phone_only_feature",getThumbnailTypeForMediaMsg:null},{type:"unknown",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"vcard",subtype:void 0,getThumbnailTypeForMediaMsg:null},{type:"video",subtype:void 0,getThumbnailTypeForMediaMsg:c("WAWebGetThumbnailTypeForMediaVideoMsg")}];g["default"]=a}),98);
__d("WAWebMessagePluginGetThumbnailTypeForMediaMsg",["WAWebMessagePluginCreateRegistryLookup","WAWebMessagePluginGetThumbnailTypeForMediaMsgRegistry"],(function(a,b,c,d,e,f,g){var h=d("WAWebMessagePluginCreateRegistryLookup").createMsgTypeRegistryLookup(c("WAWebMessagePluginGetThumbnailTypeForMediaMsgRegistry"));function a(a){var b=a.msg;b=h(b.type,b.subtype);return b==null?void 0:b.getThumbnailTypeForMediaMsg==null?void 0:b.getThumbnailTypeForMediaMsg(a)}g.getThumbnailTypeForMediaMsg=a}),98);
__d("WAWebMediaDownloadMmsThumbnail",["WAAbortError","WABase64","WALogger","WANullthrows","WAWebDownloadManager","WAWebFrontendMsgGetters","WAWebMediaCryptoEligibilityUtils","WAWebMediaOpaqueData","WAWebMessagePluginGetThumbnailTypeForMediaMsg","WAWebMmsMediaTypes","WAWebMsgType","WAWebSerializeError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadMmsThumbnail: error\n",""],["media.downloadMmsThumbnail: error\\n",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadMmsThumbnail aborted"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadMmsThumbnail: success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadMmsThumbnail: start"]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msg,e=a.chat,f=a.isPreload;a=a.signal;var g=b.thumbnailSha256,l=b.thumbnailEncSha256,m=b.thumbnailDirectPath,n=b.mediaKey,o=b.mediaKeyTimestamp;if(m==null||g==null)return;if(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMsg(b)&&(l==null||n==null||o==null))return;if((b.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT||b.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE)&&d("WAWebMmsMediaTypes").getMsgMediaType(b)===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT&&(b.thumbnailHeight==null||b.thumbnailWidth==null))return;var p=d("WAWebFrontendMsgGetters").getAsUrl(b.unsafe());if(p&&(p.thumbnailHeight==null||p.thumbnailWidth==null))return;d("WALogger").LOG(k());try{m=(yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt({directPath:m,encFilehash:l,filehash:g,mediaKey:n,mediaKeyTimestamp:o,type:c("WANullthrows")(d("WAWebMessagePluginGetThumbnailTypeForMediaMsg").getThumbnailTypeForMediaMsg({msg:b})),signal:a||new AbortController().signal,userDownloadAttemptCount:0,isPreload:f,chatWid:e==null?void 0:e.id}));if(p)p.thumbnailHQ=d("WABase64").encodeB64(m);else{l=c("WANullthrows")(b.mediaObject,"mediaObject cannot be null for thumbnail download");g={fullPreviewData:yield c("WAWebMediaOpaqueData").createFromData(m,"image/jpeg")};b.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&(g.fullPreviewSize={height:c("WANullthrows")(b.thumbnailHeight),width:c("WANullthrows")(b.thumbnailWidth)});l.consolidate(g)}d("WALogger").LOG(j())}catch(a){if(a.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(i());return}d("WALogger").WARN(h(),c("WAWebSerializeError")(a)).verbose()}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebDownloadManagerErrors",["WAWebBackendErrors"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,404)||this;b.name="MediaNotOnPhone";return b}return b}(d("WAWebBackendErrors").ServerStatusCodeError);g.MediaNotOnPhone=a}),98);
__d("WABase64Equal",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.length,d=b.length;switch(c-d){case-2:return b.charCodeAt(c)===61&&b.charCodeAt(c+1)===61&&b.substr(0,c)===a;case-1:return b.charCodeAt(c)===61&&b.substr(0,c)===a;case 0:return a===b;case 1:return a.charCodeAt(d)===61&&a.substr(0,d)===b;case 2:return a.charCodeAt(d)===61&&a.charCodeAt(d+1)===61&&a.substr(0,d)===b;default:return!1}}f.b64Equal=a}),66);
__d("WAWebValidateMediaKeyTimestamp",["WATimeUtils","WAWebServerPropsModel"],(function(a,b,c,d,e,f,g){function a(a){return d("WATimeUtils").unixTime()-a<d("WAWebServerPropsModel").ServerProps.mmsMediaKeyTTL+Math.floor(Math.random()*86400)}g["default"]=a}),98);
__d("WAWebMediaEntry",["Promise","WABase64Equal","WAIsMediaKeyReusable","WALogger","WATimeUtils","WAWebMediaHosts","WAWebMmsClientFormatDownloadUrl","WAWebMmsOperationsConst","WAWebValidateMediaKeyTimestamp","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Media type "," from "," is missing encFilehash"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["media-fault: mediaKey changed for the same MMS3 url. type:",". equal?:",". Debug:\n",""],["media-fault: mediaKey changed for the same MMS3 url. type:",". equal?:",". Debug:\\n",""]);j=function(){return a};return a}var k={PROBABLY_ON_SERVER:"PROBABLY_ON_SERVER",PROBABLY_OFF_SERVER:"PROBABLY_OFF_SERVER",UNKNOWN:"UNKNOWN"};a=function(){function a(b){this.useBackupUrl=!1;if(this.constructor===a)throw c("err")("AbstractMediaEntry is an abstract class");this.deprecatedMms3Url=b.deprecatedMms3Url;this.serverStatus=k.UNKNOWN;this.sidecar=b.sidecar;this.directPath=b.directPath;this.firstFrameSidecar=b.firstFrameSidecar;this.type=b.type;this.scansSidecar=b.scansSidecar;this.scanLengths=b.scanLengths;this.staticUrl=b.staticUrl}var b=a.prototype;b.markWhetherOnServer=function(a){this.serverStatus=a?k.PROBABLY_ON_SERVER:k.PROBABLY_OFF_SERVER};b.getMediaKey=function(){return null};b.getMediaKeyTimestamp=function(){return null};b.getEncfilehash=function(){return null};b.getFilehash=function(){return null};b.validateForUploads=function(){throw c("err")("You must implement this method in a subclass")};b.validateForDownloads=function(){return this.serverStatus!==k.PROBABLY_OFF_SERVER};return a}();var l=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c=a.filehash,d=a.handle;a=babelHelpers.objectWithoutPropertiesLoose(a,["filehash","handle"]);a=b.call(this,a)||this;a.filehash=c;a.handle=d;return a}var c=a.prototype;c.getFilehash=function(){return this.filehash};c.validateForUploads=function(){return!0};return a}(a),m=function(e){babelHelpers.inheritsLoose(a,e);function a(a){var b=a.mediaKey,c=a.mediaKeyTimestamp,d=a.encFilehash;a=babelHelpers.objectWithoutPropertiesLoose(a,["mediaKey","mediaKeyTimestamp","encFilehash"]);a=e.call(this,a)||this;a.$EncryptedMediaEntry1=!0;a.mediaKey=b;a.mediaKeyTimestamp=c;a.encFilehash=d;return a}var f=a.prototype;f.canReuseMediaKey=function(){if(this.directPath==null)return!1;var a=d("WATimeUtils").castToUnixTime(this.mediaKeyTimestamp);return d("WAIsMediaKeyReusable").isMediaKeyReusable(a)};f.getMediaKey=function(){return this.mediaKey};f.getMediaKeyTimestamp=function(){return this.mediaKeyTimestamp};f.getEncfilehash=function(){return this.encFilehash};f.url=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a||{};var e=a.useFallback;a=a.forceHashUrl;var f=this.encFilehash;if(f==null||f==="")return(h||(h=b("Promise"))).reject(c("err")("media_entry: encFilehash does not exist"));var g=(yield d("WAWebMediaHosts").mediaHosts.getHostsInfo({operation:c("WAWebMmsOperationsConst").DOWNLOAD,encFilehash:f,type:this.type})),i=g.selectedHost;g=g.fallbackHost;e=Boolean(e)&&g?g:i;return c("WAWebMmsClientFormatDownloadUrl")({directPath:a?null:this.directPath,encFilehash:f,hostname:e.hostname,type:this.type})});function e(b){return a.apply(this,arguments)}return e}();f.validateForUploads=function(){if(!this.$EncryptedMediaEntry1)return!1;if(!c("WAWebValidateMediaKeyTimestamp")(this.mediaKeyTimestamp)){this.$EncryptedMediaEntry1=!1;return!1}return!0};return a}(a);e=function(){function a(){this.entries=[]}var b=a.prototype;b.$1=function(a){var b=a.foundEntry,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.encFilehash,g=a.sidecar,h=a.directPath,i=a.firstFrameSidecar,k=a.scansSidecar,l=a.scanLengths,n=a.deprecatedMms3Url;a=a.staticUrl;if(b instanceof m&&c!=null&&c!==""&&!d("WABase64Equal").b64Equal(b.mediaKey,c)){var o=b.mediaKey.replace("=","").split("\n")[0];c=c.replace("=","").split("\n")[0];d("WALogger").ERROR(j(),b.type,o===c,JSON.stringify({before:{hasDirectPath:Boolean(b.directPath),hasEncFilehash:Boolean(b.encFilehash),hasMediaKey:Boolean(b.mediaKey),hasDeprecatedMms3Url:Boolean(b.deprecatedMms3Url)},after:{hasDirectPath:Boolean(h),hasEncFilehash:Boolean(f),hasDeprecatedMms3Url:Boolean(n)}},null,2)).sendLogs("media-key-mismatch-same-mms3-url");return null}b instanceof m&&e!=null&&(b.mediaKeyTimestamp=e);g&&(b.sidecar=g);i&&(b.firstFrameSidecar=i);k&&(b.scansSidecar=k);(l==null?void 0:l.length)&&(b.scanLengths=l);a&&(b.staticUrl=a);b.directPath=h;return b};b.updateEntry=function(a){var b=a.deprecatedMms3Url,c=a.mediaKey,d=a.mediaKeyTimestamp,e=a.encFilehash;a.type;var f=a.sidecar,g=a.directPath,h=a.firstFrameSidecar,i=a.scansSidecar,j=a.scanLengths;a=a.staticUrl;var k=this.getEntryByEncFilehash({encFilehash:e,deprecatedMms3Url:b});if(!k)return;return this.$1({foundEntry:k,mediaKey:c,mediaKeyTimestamp:d,encFilehash:e,sidecar:f,directPath:g,firstFrameSidecar:h,scansSidecar:i,scanLengths:j,deprecatedMms3Url:b,staticUrl:a})};b.addUnencryptedEntry=function(a){var b=this.updateUnencryptedEntry({filehash:a.filehash,directPath:a.directPath});if(b)return b;b=new l({deprecatedMms3Url:a.directPath,filehash:a.filehash,type:a.type,directPath:a.directPath,handle:a.handle});this.entries.push(b);return b};b.updateUnencryptedEntry=function(a){var b=a.directPath!=null?this.getUnencryptedEntry(a.filehash,a.directPath):null;if(!b||!(b instanceof l))return null;a.directPath!=null&&(b.directPath=a.directPath);return b};b.addEntry=function(a){var b=a.deprecatedMms3Url,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.encFilehash,g=a.type,h=a.sidecar,j=a.directPath,k=a.firstFrameSidecar,l=a.scansSidecar,n=a.scanLengths,o=a.staticUrl,p=a.debugHint;f==null&&d("WALogger").ERROR(i(),g,p).devConsole(a).sendLogs("media-entry-missing-upload-hash-"+g+"-"+p);a=this.entries;p=this.getEntryByEncFilehash({encFilehash:f,deprecatedMms3Url:b});p=p?this.$1({foundEntry:p,mediaKey:c,mediaKeyTimestamp:e,encFilehash:f,sidecar:h,directPath:j,firstFrameSidecar:k,scansSidecar:l,scanLengths:n,deprecatedMms3Url:b,staticUrl:o}):null;if(p instanceof m)return p;if(!c)return null;p=new m({deprecatedMms3Url:b,mediaKey:c,mediaKeyTimestamp:e,encFilehash:f,type:g,sidecar:h,directPath:j,firstFrameSidecar:k,scansSidecar:l,scanLengths:n,staticUrl:o});a.push(p);return p};b.$2=function(a){var b=a.encFilehash;a=a.deprecatedMms3Url;return b==null?"mms3:"+a:b};b.has=function(a){return this.getEntryByEncFilehash(a)instanceof m};b.hasUnencryptedEntry=function(a){return a.filehash==null||a.directPath==null?!1:this.getUnencryptedEntry(a.filehash,a.directPath)instanceof l};b.getEntryByEncFilehash=function(a){var b=this,c=this.$2(a);return this.entries.find(function(a){return a instanceof m&&b.$2({encFilehash:a.encFilehash,deprecatedMms3Url:a.deprecatedMms3Url})===c})};b.getUnencryptedEntry=function(a,b){return this.entries.find(function(c){return c instanceof l&&c.filehash===a&&c.directPath===b})};b.$3=function(a){return this.entries.filter(function(b){return a?b instanceof m:b instanceof l})};b.getUploadEntry=function(a){n(this);return this.$3(a).find(function(a){return a.validateForUploads()})};b.getDownloadEntry=function(a){n(this);return this.$3(a).find(function(a){return a.validateForDownloads()})};b.clearEntries=function(){this.entries=[]};return a}();function n(a){a.entries.sort(function(a,b){var c=o(b)-o(a);if(c!==0)return c;a=a.getMediaKeyTimestamp();b=b.getMediaKeyTimestamp();return a==null||b==null?c:b-a})}function o(a){var b=0;switch(a.serverStatus){case k.PROBABLY_ON_SERVER:b+=200;break;case k.PROBABLY_OFF_SERVER:break;case k.UNKNOWN:b+=100;break}a.getEncfilehash()!=null&&(b+=20);return b}g.AbstractMediaEntry=a;g.UnencryptedMediaEntry=l;g.EncryptedMediaEntry=m;g.MediaEntryList=e}),98);
__d("WAWebMmsConst",[],(function(a,b,c,d,e,f){a=100;f.FILE_PROGRESS_THROTTLE_WAIT_MS=a}),66);
__d("WAWebWamEnumStickerErrorType",[],(function(a,b,c,d,e,f){a=Object.freeze({DECOMPRESSION:2,SENDER_VALIDATION:3,RECEIVER_VALIDATION:4});f.STICKER_ERROR_TYPE=a}),66);
__d("WAWebStickerErrorWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumStickerErrorType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({StickerError:[5024,{stickerErrorType:[1,d("WAWebWamEnumStickerErrorType").STICKER_ERROR_TYPE]},[1,1,1],"regular"]},{StickerError:[]});g.StickerErrorWamEvent=a}),98);
__d("WAWebWamEnumStickerLatencyAction",[],(function(a,b,c,d,e,f){a=Object.freeze({DECOMPRESSION:2});f.STICKER_LATENCY_ACTION=a}),66);
__d("WAWebStickerLatencyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumStickerLatencyAction"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({StickerLatency:[5026,{size:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER],stickerLatencyAction:[2,d("WAWebWamEnumStickerLatencyAction").STICKER_LATENCY_ACTION],stickerLatencyTtAction:[3,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{StickerLatency:[]});g.StickerLatencyWamEvent=a}),98);
__d("WAWebWebcProgressiveImageWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcProgressiveImage:[2226,{webcFirstRenderScans:[1,a.TYPES.INTEGER],webcFirstRenderT:[2,a.TYPES.TIMER],webcFullQualityT:[4,a.TYPES.TIMER],webcMidQualityT:[3,a.TYPES.TIMER]},[1,1,10],"regular"]},{WebcProgressiveImage:[]});g.WebcProgressiveImageWamEvent=b}),98);
__d("WAWebMediaMmsV4Download",["WAAbortError","WACustomError","WAFilteredCatch","WALogger","WAMediaUtils","WANullthrows","WARaceSignal","WAWebABProps","WAWebCryptoImageStreamer","WAWebDownloadManager","WAWebDownloadManagerErrors","WAWebFileUtils","WAWebInMemoryLottieStickerCache","WAWebLottieStickersGatingUtils","WAWebMediaCryptoEligibilityUtils","WAWebMediaDataUtils","WAWebMediaEntry","WAWebMediaInMemoryBlobCache","WAWebMediaLoad","WAWebMediaOpaqueData","WAWebMediaTypes","WAWebMimeTypes","WAWebMiscErrors","WAWebMmsClientErrors","WAWebMmsConst","WAWebMmsMediaTypes","WAWebStickerErrorWamEvent","WAWebStickerLatencyWamEvent","WAWebStickerMimeUtils","WAWebVcardParsingUtils","WAWebWamEnumStickerErrorType","WAWebWamEnumStickerLatencyAction","WAWebWebcProgressiveImageWamEvent","asyncToGeneratorRuntime","err","fflate","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["checkExistence: error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to extract Lottie Sticker zip file ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia: error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia: error: ",", ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia: error: ",", ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia: media unsupported error: ",", ",", ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected download error: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia: media unsupported error: ",", ",", ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to retrieve blob text contents ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);v=function(){return a};return a}var w=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WACustomError").customError("NoEntryAfterRMR")),x=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WACustomError").customError("MissingEncFilehash")),y={THUMBNAIL:1,LOW:2,MID:3,FULL:4},z=new WeakMap();function a(a){a.getDownloadPromises().forEach(function(a){var b;if(a==null)return;b=(b=z.get(a))==null?void 0:b.abort;if(b==null)return;z["delete"](a);b()})}function e(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.mimetype,c=a.mediaObject,e=a.mediaBlob,f=a.mediaType,g=a.rmrReason,h=a.downloadOrigin;a=a.chatWid;if(c.mediaBlob)return;yield d("WAWebMediaDataUtils").gatherAndSetMetadata(c,e);yield D({mimetype:b,mediaObject:c,downloadEvenIfExpensive:!1,mediaType:f,rmrReason:g,downloadOrigin:h,chatWid:a})});return A.apply(this,arguments)}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.mimetype,e=c("lodash").throttle(function(b){a.mediaObject.consolidate({loadedSize:b.loaded})},d("WAWebMmsConst").FILE_PROGRESS_THROTTLE_WAIT_MS);e=(yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt({directPath:a.directPath,encFilehash:a.encFilehash,filehash:a.objFilehash,isFinalRmrRetry:a.isFinalRmrRetry,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,signal:a.signal,staticUrl:a.staticUrl,type:a.mediaType,onDecryptStart:function(){a.mediaObject.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.PROCESSING})},onProgress:e,userDownloadAttemptCount:a.mediaObject.userDownloadAttemptCount,downloadOrigin:a.downloadOrigin,mode:a.mode,progressiveJpegOpts:K({scanLengths:a.scanLengths,scansSidecar:a.scansSidecar,mimetype:b,mediaObject:a.mediaObject,signal:a.signal}),isViewOnce:a.isViewOnce,imageDimensions:a.mediaType===d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE?{fileHeight:(e=a.mediaObject.contentInfo.fullHeight)!=null?e:0,fileWidth:(e=a.mediaObject.contentInfo.fullWidth)!=null?e:0}:void 0,chatWid:a.chatWid}));b=b!=null&&b!==""?b:d("WAWebMimeTypes").getMediaMimeType(a.mediaType,new Uint8Array(e));return new Blob([e],{type:b})});return C.apply(this,arguments)}function D(a){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.mimetype,f=a.mediaObject,g=a.downloadEvenIfExpensive,h=a.mediaType,i=a.signal,y=a.rmrReason,A=a.rmrData,C=a.downloadOrigin,E=a.shouldThrow,F=a.isVcardOverMmsDocument,G=a.mode,H=a.isAutoDownload,I=a.isFinalRmrRetry,J=a.isViewOnce,K=a.chatWid,L=E===!0,M=!H;if(!f)return;var P=f.filehash;if(!P)return;a=N(f,h);a&&M&&(a.shouldStoreInMemory=!0);E=f.getDownloadPromise(h);if(E)return E;if(f.downloadStage===d("WAWebMediaTypes").DownloadStage.ERROR_MISSING)return;if(f.downloadStage===d("WAWebMediaTypes").DownloadStage.PREPARING)return;if(f.mediaBlob){a=(yield f.mediaBlob.validate());if(a){f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.RESOLVED});return}f.clearBlob();f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE});f.notifyMsgsAsync();return}var Q=d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.get(P),R,S=new AbortController();return c("WARaceSignal")([S.signal,i].filter(Boolean),function(a){var i,T=function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(Q)E=Q;else{R=f.entries.getDownloadEntry(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(h));if(!R)if(g&&d("WAWebMediaCryptoEligibilityUtils").isRmrSupportedForMediaType(h)){yield d("WAWebDownloadManager").downloadManager.rmr({mediaObject:f,signal:a,rmrReason:y,rmrData:A});R=f.entries.getDownloadEntry(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(h));if(!R){if(h!==d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER)throw new w();return}}else{if(!d("WAWebMediaCryptoEligibilityUtils").isRmrSupportedForMediaType(h))throw new(d("WAWebDownloadManagerErrors").MediaNotOnPhone)();f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE});return}f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.FETCHING});R=c("WANullthrows")(R);var b=R,i=b.scansSidecar,j=b.scanLengths,k=b.directPath;b=b.staticUrl;if(R instanceof d("WAWebMediaEntry").EncryptedMediaEntry&&R.getEncfilehash()==null){var l;(l=R)==null?void 0:l.markWhetherOnServer(!1);throw new x()}k=(yield B({directPath:k,encFilehash:(l=R)==null?void 0:l.getEncfilehash(),objFilehash:P,isFinalRmrRetry:I,mediaKey:(k=R)==null?void 0:k.getMediaKey(),mediaKeyTimestamp:(l=R)==null?void 0:l.getMediaKeyTimestamp(),signal:a,staticUrl:b,mediaType:h,mediaObject:f,downloadOrigin:C,mode:G,scanLengths:j,mimetype:e,scansSidecar:i,isViewOnce:J,chatWid:K}));O(h)?E=(yield d("WAWebMediaLoad").transcode(k)):E=k}E.type===d("WAWebStickerMimeUtils").WhatsAppLottieStickerMimeType&&d("WAWebLottieStickersGatingUtils").isLottieStickerReceivingEnabled()&&(d("WAWebInMemoryLottieStickerCache").InMemoryLottieStickerCache.has(P)||(yield d("WAWebInMemoryLottieStickerCache").extractAndSetLottieJSONInMemoryCache(P,E)),f.consolidate({isLottie:!0}));if(E.type==="text/vcard"&&F)try{l=(yield d("WAWebFileUtils").blobToText(E));if(l){b=d("WAWebVcardParsingUtils").parseMultiVcard(l);b.length>0?f.consolidate({parsedVcards:b}):d("WALogger").ERROR(v()).tags("non-sad").sendLogs("vcard_over_mms:Failed to parse vcard over mms contents")}}catch(a){d("WALogger").ERROR(u(),String(a)).tags("non-sad").sendLogs("vcard_over_mms:blobToText failed with error: "+String(a))}if(!d("WAWebMediaDataUtils").shouldUseMediaCache(h)){j=(yield c("WAWebMediaOpaqueData").createFromData(E,E.type));yield d("WAWebMediaDataUtils").gatherAndSetMetadata(f,j)}else{i=N(f,h);((i==null?void 0:i.shouldStoreInMemory)||M)&&(d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.put(P,E),yield d("WAWebMediaDataUtils").gatherAndSetMetadataNoOpaque(f,E))}f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.RESOLVED});f.clearDownloadPromise(h);return f.resolveWhenConsolidated()});return function(){return i.apply(this,arguments)}}();T=T()["catch"]((T=d("WAFilteredCatch")).filteredCatch(d("WAWebMmsClientErrors").MediaNotFoundError,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!R)throw a;R.markWhetherOnServer(!1);if(!g)throw a;yield d("WAWebDownloadManager").downloadManager.rmr({mediaObject:f,signal:new AbortController().signal,rmrReason:y,rmrData:A});f.clearDownloadPromise(h);return D({mimetype:e,mediaObject:f,downloadEvenIfExpensive:!1,mediaType:h,rmrReason:y,rmrData:A,downloadOrigin:C,isFinalRmrRetry:!0,isVcardOverMmsDocument:F,mode:G,isAutoDownload:H,chatWid:K})});return function(b){return a.apply(this,arguments)}}()))["catch"](T.filteredCatch(d("WAWebMiscErrors").MediaUnsupportedError,function(a){f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.ERROR_UNSUPPORTED});d("WALogger").WARN(t(),a.name,a.message,e||"");d("WALogger").ERROR(s(),a.message).tags("non-sad").sendLogs("downloadMedia: media unsupported error:");if(L)throw a}))["catch"](T.filteredCatch(d("WAWebDownloadManagerErrors").MediaNotOnPhone,function(a){f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.ERROR_MISSING});if(L)throw a}))["catch"](T.filteredCatch([w,x],function(a){f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.ERROR_MISSING});if(a===w&&h===d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER)return;d("WALogger").WARN(r(),a.name).devConsole(a.message,a.stack);d("WALogger").ERROR(q()).tags("non-sad").sendLogs("unexpected download error: "+a.name);if(L)throw a}))["catch"](T.filteredCatch([d("WAWebMiscErrors").MediaDecryptionError,d("WAWebMiscErrors").MediaHashMismatch],function(a){var b=f.progressiveStage;S.abort();f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE,progressiveStage:null});f.notifyMsgsAsync();f["delete"]();d("WAWebCryptoImageStreamer").deleteFromInMemoryMediaBlobCache(P,b);if(L)throw a}))["catch"](function(a){f.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE});if(a instanceof d("WAWebMiscErrors").MediaLoadError){d("WALogger").WARN(p(),a.name,a.message,e||"");d("WALogger").ERROR(o(),a.message).tags("non-sad").sendLogs("downloadMedia: media load error:",0);if(L)throw a;return}if(a instanceof d("WAWebMiscErrors").TranscodeBlobTooLargeError){d("WALogger").WARN(n(),a.message,e||"");d("WALogger").ERROR(m(),a.message).tags("non-sad").sendLogs("downloadMedia: transcode blob too large",0);if(L)throw a;return}if(a instanceof d("WAWebMiscErrors").UnableToPlayVideoError){d("WALogger").WARN(l(),a.message,e||"");d("WALogger").ERROR(k(),a.message).tags("non-sad").sendLogs("downloadMedia: unable to play video",0);if(L)throw a;return}if(a.name===d("WAAbortError").ABORT_ERROR){if(L)throw a;return}d("WALogger").LOG(j()).devConsole(a.name,a.message,a.stack);if(L)throw a})["finally"](function(){f.clearDownloadPromise(h)});z.set(T,{abort:function(){S.abort()},shouldStoreInMemory:((i=N(f,h))==null?void 0:i.shouldStoreInMemory)||M});f.setDownloadPromise(T,h);return T})});return E.apply(this,arguments)}var F=function(a){var b=/animation\/animation.json$/,c=Object.keys(a).find(function(a){return b.test(a)});return c!=null?a[c]:void 0};function f(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=new(d("WAWebStickerLatencyWamEvent").StickerLatencyWamEvent)({size:a.size,stickerLatencyAction:d("WAWebWamEnumStickerLatencyAction").STICKER_LATENCY_ACTION.DECOMPRESSION}),e=self.performance.now();a=(yield d("WAMediaUtils").blobToArrayBuffer(a));a=new Uint8Array(a);a=d("fflate").unzipSync(a);a=F(a);if(!a)throw c("err")("animationContents missing");if(a){a=new TextDecoder("utf-8").decode(a);b.stickerLatencyTtAction=Math.ceil(self.performance.now()-e);d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_logging_enabled")&&b.commit();return a}}catch(a){d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_logging_enabled")&&new(d("WAWebStickerErrorWamEvent").StickerErrorWamEvent)({stickerErrorType:d("WAWebWamEnumStickerErrorType").STICKER_ERROR_TYPE.DECOMPRESSION}).commit(),d("WALogger").ERROR(i(),String(a)).tags("non-sad").sendLogs("lottie_sticker:Failed to extract Lottie Sticker zip file")}});return G.apply(this,arguments)}function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.mimetype;var b=a.mediaObject;a=a.mediaType;var c=b.filehash;if(!c)return;if(b.downloadStage!==d("WAWebMediaTypes").DownloadStage.INIT)return;if(yield L(b))return;c=d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.get(c);var e=new AbortController();if(c){b.downloadStage===d("WAWebMediaTypes").DownloadStage.INIT&&b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.EXISTS});return}c=b.entries.getDownloadEntry(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(a));if(!c){b.downloadStage===d("WAWebMediaTypes").DownloadStage.INIT&&b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE});return}if(c instanceof d("WAWebMediaEntry").UnencryptedMediaEntry)return;var f=c.getEncfilehash();if(!f){c.markWhetherOnServer(!1);b.downloadStage===d("WAWebMediaTypes").DownloadStage.INIT&&b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE});return}try{yield d("WAWebDownloadManager").downloadManager.checkExistence({directPath:c.directPath,encFilehash:f,signal:e.signal,type:a}),b.downloadStage===d("WAWebMediaTypes").DownloadStage.INIT&&b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.EXISTS})}catch(a){b.downloadStage===d("WAWebMediaTypes").DownloadStage.INIT&&b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE}),d("WALogger").LOG(h()).devConsole(a.name,a.message,a.stack)}});return I.apply(this,arguments)}function J(a,b){return!!(a&&b&&a.length>=2&&a.length*10===b.byteLength)}function K(a){var b=a.scanLengths,e=a.scansSidecar,f=a.mimetype,g=a.mediaObject,h=a.signal;if(!J(b,e))return null;var i=new(d("WAWebWebcProgressiveImageWamEvent").WebcProgressiveImageWamEvent)({webcFirstRenderScans:0});return{mimetype:f,scansSidecar:c("WANullthrows")(e),scanLengths:c("WANullthrows")(b),onProgressiveUpdate:function(a){if(h.aborted)return;if(g.downloadStage===d("WAWebMediaTypes").DownloadStage.RESOLVED)return;g.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.PROGRESSIVE_READY,progressiveStage:a});i.webcFirstRenderScans||(i.webcFirstRenderScans=a,i.markWebcFirstRenderT());a>=y.MID&&!i.webcMidQualityT&&i.markWebcMidQualityT();a===y.FULL&&!i.webcFullQualityT&&(i.markWebcFullQualityT(),i.commit())}}}function L(a){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.mediaBlob)return!1;var b=(yield a.mediaBlob.validate());if(b){a.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.RESOLVED});return!0}a.clearBlob();a.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.NEED_POKE});a.notifyMsgsAsync();return!1});return M.apply(this,arguments)}function N(a,b){a=a.getDownloadPromise(b);return a?z.get(a):null}function O(a){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PTT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_PTT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_AUDIO}g.NoEntryAfterRMR=w;g.MissingEncFilehash=x;g.cancelDownloadMedia=a;g.manuallySetMedia=e;g.downloadMedia=D;g.getContentsOfLottieJSONFile=F;g.extractLottieJSON=f;g.checkExistence=H}),98);
__d("WAWebHDMediaUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(a,b){a=Math.max(a,b);return a>=d("WAWebABProps").getABPropConfigValue("original_quality_image_min_edge")}function b(a,b){if(!d("WAWebABProps").getABPropConfigValue("hd_video_label_enabled"))return!1;a=[Math.max(a,b),Math.min(a,b)];b=a[0];a=a[1];return a>=d("WAWebABProps").getABPropConfigValue("hd_video_definition_min_edge")?!0:b>d("WAWebABProps").getABPropConfigValue("hd_video_definition_max_edge")&&a>=d("WAWebABProps").getABPropConfigValue("hd_video_definition_min_edge_with_max_edge")}g.isHdPhoto=a;g.isHdVideo=b}),98);
__d("WAWebWamEnumDownloadOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_PERSONAL:1,CHAT_GROUP:2,STATUS_USER:3,STATUS_ADS:4,PRODUCT_CATALOG:5,GDPR:6,STICKER_PICKER:7,PROFILE_PICTURE:8,BLOKS:9,P2B:10,MESSAGE_HISTORY_SYNC:11,COMMUNITY:12,CHANNEL:13,BROADCAST:14,INTEROP:15});f.DOWNLOAD_ORIGIN_TYPE=a}),66);
__d("WAWebMediaGetDownloadOriginFromUploadOrigin",["WAWebWamEnumDownloadOriginType","WAWebWamEnumUploadOriginType"],(function(a,b,c,d,e,f,g){function a(a){switch(a){case d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.CHAT_PERSONAL:return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL;case d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.CHANNEL:return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHANNEL;case d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.COMMUNITY:return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.COMMUNITY;default:return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP}}g.getDownloadOriginFromUploadOrigin=a}),98);
__d("WAWebMediaMmsV4Upload",["Promise","WAAbortError","WAFilteredCatch","WALogger","WAMediaCalculateFilehash","WAWebCreateMediaUploadMetrics","WAWebDownloadManagerErrors","WAWebFileUtils","WAWebHDMediaUtils","WAWebMediaCryptoEligibilityUtils","WAWebMediaDataUtils","WAWebMediaEntry","WAWebMediaGetDownloadOriginFromUploadOrigin","WAWebMediaInMemoryBlobCache","WAWebMediaLoad","WAWebMediaMmsV4Download","WAWebMediaTypes","WAWebMiscErrors","WAWebMmsClientErrors","WAWebMmsConst","WAWebMmsMediaTypes","WAWebUploadManager","WAWebWamEnumWebcRmrReasonCode","asyncToGeneratorRuntime","err","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAlgo.uploadMedia: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAlgo.uploadMedia: canceled"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAlgo.uploadMedia: success"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[_uploadMediaAndManageErrors]: isNewEntry: "," uploadEntry.mediaKey length "," - mediaKeyInfo.mediaKey length ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadEntry.mediaKey and mediaKeyInfo.mediaKey should be the same, mediaType: ",""]);m=function(){return a};return a}var n=new WeakMap();function a(a){a.getUploadPromises().forEach(function(a){if(a==null)return;var b=n.get(a);if(b==null)return;n["delete"](a);b()})}var o={SUCCESS:"success",CANCELLATION:"cancellation",ERROR:"error",TIMEOUT:"timeout"};function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.blob,e=a.forwardedFromWeb,f=a.mediaKeyInfo,g=a.mediaObject,h=a.mediaType,i=a.signal,j=a.uploadEntry,k=a.uploadOrigin,l=a.isViewOnce;a=a.earlyUpload;if(j instanceof d("WAWebMediaEntry").EncryptedMediaEntry&&(j==null?void 0:j.canReuseMediaKey())){c("WAWebCreateMediaUploadMetrics")(h,k,0,e,l).handleCheckExistingSuccess();return j}a=(yield a);if(a!=null)return g.entries.addEntry({deprecatedMms3Url:a.url,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,encFilehash:a.encFilehash,type:h,sidecar:a.sidecar,directPath:a.directPath,firstFrameSidecar:a.firstFrameSidecar,debugHint:"upload"});a=function(){g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.FINALIZING})};var m=c("lodash").throttle(function(a,b){a=a.loaded+b;Number.isFinite(a)&&g.consolidate({loadedSize:a})},d("WAWebMmsConst").FILE_PROGRESS_THROTTLE_WAIT_MS),n=f?f.key:j==null?void 0:j.getMediaKey();f=f?f.timestamp:j==null?void 0:j.getMediaKeyTimestamp();n=(yield c("WAWebUploadManager").encryptAndUpload({blob:b,mediaKey:n,mediaKeyTimestamp:f,type:h,signal:i,userUploadAttemptCount:g.userUploadAttemptCount,forwardedFromWeb:e,uploadOrigin:k,onProgress:m,onFinalize:a,isViewOnce:l,isHdPhoto:h===d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE&&d("WAWebHDMediaUtils").isHdPhoto((j=g.contentInfo.fullHeight)!=null?j:0,(b=g.contentInfo.fullWidth)!=null?b:0)}));f=n.directPath;i=n.encFilehash;e=n.mediaKey;k=n.mediaKeyTimestamp;m=n.url;a=n.sidecar;l=n.firstFrameSidecar;return g.entries.addEntry({deprecatedMms3Url:m,mediaKey:e,mediaKeyTimestamp:k,encFilehash:i,type:h,sidecar:a,directPath:f,firstFrameSidecar:l,debugHint:"upload"})});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.blob,e=a.mediaObject,f=a.mediaType,g=a.signal,h=a.uploadOrigin,i=a.isViewOnce;a=a.calculateToken;b=(yield d("WAWebFileUtils").blobToArrayBuffer(b));var j=(yield d("WAMediaCalculateFilehash").calculateFilehash(b));b=(yield c("WAWebUploadManager").unencryptedUpload({file:b,isViewOnce:i,signal:g,type:f,uploadOrigin:h,hash:j,token:yield a==null?void 0:a(j)}));return e.entries.addUnencryptedEntry({directPath:b.directPath,debugHint:"upload",filehash:j,type:f,handle:b.handle})});return s.apply(this,arguments)}function e(a){return t(a,p)}function f(a){return t(a,r)}function t(a,e){var f=a.mimetype,g=a.mediaObject,p=a.mediaType,q=a.forwardedFromWeb,r=a.uploadOrigin,s=a.mediaKeyInfo,t=a.isViewOnce,v=a.earlyUpload,w=a.calculateToken,x=s;a=g.getUploadPromise(p);if(a)return a;var y=new AbortController(),z=y.signal;s=(h||(h=b("Promise"))).resolve().then(function(){g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.UPLOADING})}).then(function(){return u({mediaObject:g,mimetype:f,mediaType:p,abortSignal:z,uploadOrigin:r})}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=g.entries.getUploadEntry(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(p));if(b instanceof d("WAWebMediaEntry").EncryptedMediaEntry&&x&&b.mediaKey!==x.key){var f=x;d("WALogger").ERROR(m(),p).sendLogs("media-keys-not-the-same-"+p);var h=!g.entries.entries.some(function(a){return a.getMediaKey()===f.key});d("WALogger").LOG(l(),h,(h=b.mediaKey)==null?void 0:h.length,(h=f.key)==null?void 0:h.length);if(p===d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER)x=null;else throw c("err")("uploadEntry.mediaKey and mediaKeyInfo.mediaKey should be the same")}var i=(yield e({blob:a,forwardedFromWeb:q,mediaKeyInfo:x,mediaObject:g,mediaType:p,signal:z,uploadEntry:b,uploadOrigin:r,isViewOnce:t,earlyUpload:v,calculateToken:w}));if(!i)throw c("err")("could not create media entry");if((p===d("WAWebMmsMediaTypes").MEDIA_TYPES.PTT||p===d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO)&&!d("WAWebMediaDataUtils").canPlayOgg())if(d("WAWebMediaDataUtils").shouldUseMediaCache(p)){var j=g.filehash;if(j&&g.mediaBlob)return d("WAWebMediaLoad").transcode(g.mediaBlob.formData()).then(function(a){d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.put(j,a)}).then(function(){return i})}else if(g.mediaBlob)return d("WAWebMediaDataUtils").gatherAndSetMetadata(g,g.mediaBlob).then(function(){return i});return i});return function(b){return a.apply(this,arguments)}}()).then(function(a){var b;if(z.aborted)throw new(d("WAAbortError").AbortError)();g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.UPLOADED});d("WALogger").LOG(k()).devConsole((b=a.getEncfilehash())!=null?b:a.getFilehash());return{kind:o.SUCCESS,mediaEntry:a}})["catch"](function(a){a.name===d("WAAbortError").ABORT_ERROR?d("WALogger").LOG(j()).devConsole(a):d("WALogger").WARN(i(),a).devConsole(a);throw a})["finally"](function(){g.clearUploadPromise(p)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").FileNotReadableError,function(){g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.ERROR_FILE_NOT_READABLE});return{kind:o.ERROR}}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDownloadManagerErrors").MediaNotOnPhone,function(){g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.ERROR_MISSING});return{kind:o.ERROR}}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMmsClientErrors").MediaTooLargeError,function(){g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.ERROR_TOO_LARGE});return{kind:o.ERROR}}))["catch"](function(a){g.consolidate({uploadStage:d("WAWebMediaTypes").UploadStage.NEED_UPLOAD});return a.name===d("WAAbortError").ABORT_ERROR?{kind:o.CANCELLATION}:{kind:o.ERROR}});n.set(s,function(){y.abort()});g.setUploadPromise(s,p);return s}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.mediaObject,e=a.mimetype,f=a.mediaType,g=a.abortSignal,h=a.uploadOrigin;a=a.chatWid;var i=w(b);if(i)return i;yield d("WAWebMediaMmsV4Download").downloadMedia({mimetype:e,mediaObject:b,downloadEvenIfExpensive:!0,mediaType:f,signal:g,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.UPLOAD,downloadOrigin:d("WAWebMediaGetDownloadOriginFromUploadOrigin").getDownloadOriginFromUploadOrigin(h),mode:"manual",chatWid:a});if(b.downloadStage===d("WAWebMediaTypes").DownloadStage.ERROR_MISSING)throw new(d("WAWebDownloadManagerErrors").MediaNotOnPhone)();i=w(b);if(i)return i;throw c("err")("cant upload media w/out mediaBlob after download")});return v.apply(this,arguments)}function w(a){var b=a.mediaBlob;if(b)return b.formData();if(!a.filehash)return;return d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.get(a.filehash)}g.cancelUploadMedia=a;g.UploadMediaResultKind=o;g.uploadMedia=e;g.uploadUnencryptedMedia=f;g.getOrDownloadBlob=u;g.getBlobFromMediaObject=w}),98);
__d("WAWebMediaObject",["Promise","WALogger","WANullthrows","WAShiftTimer","WAWebAck","WAWebCryptoCreateMediaKeys","WAWebInteractiveMessageHeaderMediaType","WAWebMedia","WAWebMediaCryptoEligibilityUtils","WAWebMediaDataUtils","WAWebMediaEntry","WAWebMediaOpaqueData","WAWebMediaTypes","WAWebMmsMediaTypes","WAWebMsgType","WAWebRequestMediaReuploadBridge","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["type: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["The sticker associated message has been deleted."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);p=function(){return a};return a}e=function(){function a(){var a=this;this._msgs=[];this._notifyTimer=new(d("WAShiftTimer").ShiftTimer)(function(){t(a),C(a)});this._callOnConsolidate=null;this._keyedProcesses=null;this._pendingChangesCount=0;this._saveMedia=null;this._stickers=[];this._stickerPacks=[];this.entries=new(d("WAWebMediaEntry").MediaEntryList)();this.downloadStage=d("WAWebMediaTypes").DownloadStage.INIT;this.uploadStage=d("WAWebMediaTypes").UploadStage.INIT;this.userUploadAttemptCount=0;this.userDownloadAttemptCount=0;this._encryptedDownloadPromise=null;this._unencryptedDownloadPromise=null;this._encryptedUploadPromise=null;this._unencryptedUploadPromise=null;this.mediaBlob=null;this.size=void 0;this.loadedSize=void 0;this.filehash=void 0;this.contentInfo={};this.progressiveStage=void 0;this.parsedVcards=null;this.extractedLottieSticker=null}var e=a.prototype;e.consolidate=function(a){if(q(this,a)){this.notifyMsgsAsync();return!0}return!1};e.clearBlob=function(a){var b=this.mediaBlob;b&&(this.mediaBlob=null,b.autorelease());(a==null?void 0:a.reset)===!0&&this._resetDownloadLoadStage()};e._resetDownloadLoadStage=function(){this.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.INIT})};e.contentFields=function(){var a=this.type||d("WAWebMediaTypes").TYPE.DOCUMENT;return d("WAWebMediaTypes").FIELDS[a]};e.resolveWhenConsolidated=function(){var a=this;return this._notifyTimer.ts||this._pendingChanges?new(h||(h=b("Promise")))(function(b){a._callOnConsolidate?a._callOnConsolidate.push(b):a._callOnConsolidate=[b]}):(h||(h=b("Promise"))).resolve()};e.notifyMsgsAsync=function(){this._notifyTimer.debounce(0)};e.addMsg=function(a){var b=this._msgs;for(var c=0;c<b.length;c++){var e=b[c],f=e[0];e=e[1];f===a&&!e&&d("WALogger").ERROR(p()).sendLogs("redundant-media-msg")}b.push([a,!1]);this.notifyMsgsAsync()};e.removeMsg=function(a){var b=this._msgs,c=!1;for(var d=0;!c&&d<b.length;d++){var e=b[d],f=e[0];e=e[1];f===a&&!e&&(b[d][1]=!0,c=!0)}};e.hasAssociatedMsgsOrStickers=function(){var a=this._msgs;for(var b=0;b<a.length;b++)if(!a[b][1])return!0;return this.hasAssociatedStickers()||this.hasAssociatedStickerPacks()};e.associatedMsgs=function(){var a=this._msgs,b=[];for(var c=0;c<a.length;c++){var d=a[c],e=d[0];d=d[1];d||b.push(e)}return b};e.rmr=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this.associatedStickers();if(e.length>0){e=this.associatedMsgs().filter(function(a){return a!=null});if(e.length===0){d("WALogger").LOG(o());return(h||(h=b("Promise"))).resolve(200)}}e=this._msgs.find(function(a){var b=a[0];a=a[1];return!a&&!b.isUnsentPhoneMsg()})||[null];e=e[0];if(!e){d("WALogger").ERROR(n()).sendLogs("media-fault: rmr called on MediaObject with no msg");return(h||(h=b("Promise"))).reject(c("err")("rmr called on MediaObject with no msg"))}a.onMsgSelect(e);a=(yield c("WAWebRequestMediaReuploadBridge")(e));if(a.status===200){var f=e.mediaData.type;if(f==="unknown")return(h||(h=b("Promise"))).reject(c("err")("rmr called on MediaData with unknown type"));e=a.isMD?this.entries.updateEntry({deprecatedMms3Url:e.deprecatedMms3Url,encFilehash:e.encFilehash,directPath:a.directPath}):this.entries.addEntry({deprecatedMms3Url:a.url,mediaKey:a.mediaKey||c("WANullthrows")(e.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp,encFilehash:a.encFilehash,type:f,directPath:a.directPath,debugHint:"rmr"});e||d("WALogger").ERROR(m()).sendLogs("media-fault: rmr entry can not be found");e==null?void 0:e.markWhetherOnServer(!0)}return a.status});function e(b){return a.apply(this,arguments)}return e}();e.msgProps=function(a){var b={};u(b,this,d("WAWebMediaTypes").FIELDS.RAW);u(b,this.contentInfo,this.contentFields());u(b,a,d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS);b.preview=this.contentInfo._preview;a={};for(var c in b){var e=d("WAWebMediaTypes").MEDIA_TO_MSG[c];e&&(a[e]=b[c])}return a};e["delete"]=function(){this._saveMedia=null;var a=b("WAWebMedia"),c=a.cancelDownloadMedia;a=a.cancelUploadMedia;c(this);a(this);this.clearBlob()};e.runProcessIfNotRunBefore=function(a,c,d){var e=this,f=this._keyedProcesses;f||(f=this._keyedProcesses={});if(Object.prototype.hasOwnProperty.call(f,a))return;this._pendingChangesCount++;f[a]=(h||(h=b("Promise"))).resolve(d).then(c).then(function(a){return void e.consolidate(a)})["finally"](function(){e._pendingChangesCount--,e._pendingChangesCount===0&&e.notifyMsgsAsync()})};e.getPendingProcess=function(a){return this._pendingChangesCount===0||!this._keyedProcesses||!Object.prototype.hasOwnProperty.call(this._keyedProcesses,a)?(h||(h=b("Promise"))).resolve():this._keyedProcesses[a]};e.videoStreamingInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(this.type!==d("WAWebMediaTypes").TYPE.VIDEO){d("WALogger").ERROR(l(),String(this.type)).sendLogs("media-fault: media streaming info request for non-video type");return}var e=this.entries.getDownloadEntry(!0);if(!e||!e.sidecar||!(e instanceof d("WAWebMediaEntry").EncryptedMediaEntry))return null;var f=(yield (h||(h=b("Promise"))).all([c("WAWebCryptoCreateMediaKeys")(d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO,e.mediaKey),e.url()])),g=f[0];f=f[1];return{cryptoKeys:babelHelpers["extends"]({},g,{cipherKey:g.encKey,sidecar:e.sidecar}),streamData:{clientUrl:f,size:this.size,msgKey:a}}});function e(b){return a.apply(this,arguments)}return e}();e.addStickerPack=function(a){var b=this._stickerPacks;for(var c=0;c<b.length;c++){var e=b[c],f=e[0];e=e[1];f===a&&!e&&d("WALogger").ERROR(k()).sendLogs("redundant-sticker-pack-add")}b.push([a,!1]);this.notifyMsgsAsync()};e.addSticker=function(a){var b=this._stickers;for(var c=0;c<b.length;c++){var e=b[c],f=e[0];e=e[1];f===a&&!e&&d("WALogger").ERROR(j()).sendLogs("redundant-sticker-add")}b.push([a,!1]);this.notifyMsgsAsync()};e.removeSticker=function(a){var b=this._stickers,c=!1;for(var d=0;!c&&d<b.length;d++){var e=b[d],f=e[0];e=e[1];f===a&&!e&&(b[d][1]=!0,c=!0)}};e.removeStickerPack=function(a){var b=this._stickerPacks,c=!1;for(var d=0;!c&&d<b.length;d++){var e=b[d],f=e[0];e=e[1];f===a&&!e&&(b[d][1]=!0,c=!0)}};e.hasAssociatedStickers=function(){return this._stickers.some(function(a){a[0];a=a[1];return!a})};e.hasAssociatedStickerPacks=function(){return this._stickerPacks.some(function(a){a[0];a=a[1];return!a})};e.associatedStickers=function(){return this._stickers.reduce(function(a,b){var c=b[0];b=b[1];return b?a:a.concat(c)},[])};e.getUploadPromise=function(a){return d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(a)?this._encryptedUploadPromise:this._unencryptedUploadPromise};e.setUploadPromise=function(a,b){d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(b)?this._encryptedUploadPromise=a:this._unencryptedUploadPromise=a};e.clearUploadPromise=function(a){d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(a)?this._encryptedUploadPromise=null:this._unencryptedUploadPromise=null};e.getUploadPromises=function(){return[this._encryptedUploadPromise,this._unencryptedUploadPromise]};e.getDownloadPromise=function(a){return d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(a)?this._encryptedDownloadPromise:this._unencryptedDownloadPromise};e.setDownloadPromise=function(a,b){d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(b)?this._encryptedDownloadPromise=a:this._unencryptedDownloadPromise=a};e.clearDownloadPromise=function(a){d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(a)?this._encryptedDownloadPromise=null:this._unencryptedDownloadPromise=null};e.getDownloadPromises=function(){return[this._encryptedDownloadPromise,this._unencryptedDownloadPromise]};e.toJSON=function(){return{mediaBlob:this.mediaBlob,size:this.size,filehash:this.filehash,type:this.type,contentInfo:this.contentInfo,downloadStage:this.downloadStage,uploadStage:this.uploadStage}};return a}();function q(a,b){var c=a.contentInfo,d=!1,e=r(b.type,b.subtype);e&&!a.type&&(a.type=e,d=!0);e=b.downloadStage;var f=b.uploadStage;e&&e!==a.downloadStage&&(a.downloadStage=e,d=!0);f&&f!==a.uploadStage&&(a.uploadStage=f,d=!0);b.resolvedPreview&&!c.preview&&(b.resolvedPreview.retain(),c.preview=b.resolvedPreview,d=!0);b.progressiveStage!==void 0&&b.progressiveStage!==a.progressiveStage&&(a.progressiveStage=b.progressiveStage,d=!0);e=b.mediaBlob;e&&!e.isBlobEqual(a.mediaBlob)&&(a.mediaBlob&&a.clearBlob(),e.retain(),a.mediaBlob=e,a.size=e.size(),d=!0);b.size!=null&&b.size!==0&&(a.size==null||b.size<a.size)&&(a.size=b.size,d=!0);f=b.loadedSize;f!=null&&f!==a.loadedSize&&(a.loadedSize=f,d=!0);b.filehash&&!a.filehash&&(a.filehash=b.filehash,d=!0);b.parsedVcards&&b.parsedVcards!==a.parsedVcards&&(a.parsedVcards=b.parsedVcards,d=!0);b.extractedLottieSticker!=null&&b.extractedLottieSticker!==a.extractedLottieSticker&&(a.extractedLottieSticker=b.extractedLottieSticker,d=!0);e=a.contentFields();for(f=0;f<e.length;f++){var g=e[f];switch(g){case"preview":b.preview&&!c._preview&&(a.runProcessIfNotRunBefore("preview",y,b.preview),c._preview=b.preview,d=!0);break;case"fullWidth":case"fullHeight":case"aspectRatio":var h=b[g];h!=null&&h!==0&&c[g]!==h&&(c[g]=h,d=!0);break;case"animationDuration":case"singleLoopDuration":h=b[g];h!=null&&h!==c[g]&&(c[g]=h,d=!0);break;default:h=b[g];h!==void 0&&c[g]===void 0&&(c[g]=h,d=!0)}}(c.aspectRatio==null||c.aspectRatio===0)&&(c.fullWidth!=null&&c.fullWidth!==0&&c.fullHeight!=null&&c.fullHeight!==0?(c.aspectRatio=c.fullWidth/c.fullHeight,d=!0):c.preview&&a.runProcessIfNotRunBefore("aspectRatio",A,c.preview));return d}function r(a,b){switch(a){case d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE:case d("WAWebMediaTypes").OUTWARD_TYPES.PRODUCT:return d("WAWebMediaTypes").TYPE.IMAGE;case d("WAWebMediaTypes").OUTWARD_TYPES.VIDEO:return d("WAWebMediaTypes").TYPE.VIDEO;case d("WAWebMediaTypes").OUTWARD_TYPES.PTV:return d("WAWebMediaTypes").TYPE.PTV;case d("WAWebMediaTypes").OUTWARD_TYPES.STICKER:return d("WAWebMediaTypes").TYPE.STICKER;case d("WAWebMediaTypes").OUTWARD_TYPES.AUDIO:case d("WAWebMediaTypes").OUTWARD_TYPES.PTT:return d("WAWebMediaTypes").TYPE.AUDIO;case d("WAWebMediaTypes").OUTWARD_TYPES.DOCUMENT:default:return void 0}}function a(a){switch(a){case"VIDEO":case"PTV":return 3;case"IMAGE":return 2;case"AUDIO":return 4;case"STICKER":return 16;case"DOCUMENT":return 8;case"PRODUCT":return 18;case"BIZ_COVER_PHOTO":throw c("err")("web media type is invalid: "+a);default:a;throw c("err")("web media type is invalid: "+a)}}function s(a){var b;if(((b=a.interactiveHeader)==null?void 0:b.mediaType)!=null)switch(a.interactiveHeader.mediaType){case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.DOCUMENT:return d("WAWebMediaTypes").OUTWARD_TYPES.DOCUMENT;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.VIDEO:return d("WAWebMediaTypes").OUTWARD_TYPES.VIDEO;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.IMAGE:return d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE}return void 0}function t(a){var b={};u(b,a,d("WAWebMediaTypes").FIELDS.RAW);u(b,a.contentInfo,a.contentFields());a.mediaBlob&&(b.renderableUrl=a.mediaBlob.url());var c=a._msgs,e=c.length;for(var f=0;f<e;f++){var g=c[f],h=g[0];g=g[1];if(h!=null&&!g){if(h.type!==d("WAWebMsgType").MSG_TYPE.CIPHERTEXT){b.mediaStage=v(h,a);for(g=0;g<d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS.length;g++){var i=d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS[g];b[i]=h.get(d("WAWebMediaTypes").MEDIA_TO_MSG[i])}b.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&(b.type=s(h))}else{delete b.mediaStage;for(i=0;i<d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS.length;i++)delete b[d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS[i]]}h.mediaData.set(b)}}for(g=c.length-1;g>=0;g--)c[g][1]&&c.splice(g,1);i=a._callOnConsolidate;!a._pendingChanges&&i&&(a._callOnConsolidate=null,i.forEach(function(a){return void a()}));a._saveMedia&&a._saveMedia(a)}function u(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];a[e]=b[e]}}function v(a,b){if(!b.filehash)return d("WAWebMediaTypes").MediaDataStage.PREPARING;else if(a.id.fromMe&&a.ack<d("WAWebAck").ACK.SENT){a.local||d("WALogger").ERROR(i()).sendLogs("media-fault: unsent media system message not local");return x(b)}return w(b)}function w(a){switch(a.downloadStage){case d("WAWebMediaTypes").DownloadStage.INIT:return d("WAWebMediaTypes").MediaDataStage.INIT;case d("WAWebMediaTypes").DownloadStage.EXISTS:return d("WAWebMediaTypes").MediaDataStage.EXISTS;case d("WAWebMediaTypes").DownloadStage.PREPARING:return d("WAWebMediaTypes").MediaDataStage.PREPARING;case d("WAWebMediaTypes").DownloadStage.REUPLOADING:return d("WAWebMediaTypes").MediaDataStage.REUPLOADING;case d("WAWebMediaTypes").DownloadStage.FETCHING:return d("WAWebMediaTypes").MediaDataStage.FETCHING;case d("WAWebMediaTypes").DownloadStage.PROCESSING:return d("WAWebMediaTypes").MediaDataStage.DECRYPTING;case d("WAWebMediaTypes").DownloadStage.NEED_POKE:return d("WAWebMediaTypes").MediaDataStage.NEED_POKE;case d("WAWebMediaTypes").DownloadStage.ERROR_MISSING:return d("WAWebMediaTypes").MediaDataStage.ERROR_MISSING;case d("WAWebMediaTypes").DownloadStage.ERROR_UNSUPPORTED:return d("WAWebMediaTypes").MediaDataStage.ERROR_UNSUPPORTED;case d("WAWebMediaTypes").DownloadStage.RESOLVED:return d("WAWebMediaTypes").MediaDataStage.RESOLVED;case d("WAWebMediaTypes").DownloadStage.PROGRESSIVE_READY:return d("WAWebMediaTypes").MediaDataStage.PROGRESSIVE_READY}}function x(a){switch(a.uploadStage){case d("WAWebMediaTypes").UploadStage.INIT:return d("WAWebMediaTypes").MediaDataStage.PREPARING;case d("WAWebMediaTypes").UploadStage.PREPARING:return d("WAWebMediaTypes").MediaDataStage.PREPARING;case d("WAWebMediaTypes").UploadStage.UPLOADING:return d("WAWebMediaTypes").MediaDataStage.UPLOADING;case d("WAWebMediaTypes").UploadStage.NEED_UPLOAD:return d("WAWebMediaTypes").MediaDataStage.NEED_UPLOAD;case d("WAWebMediaTypes").UploadStage.ERROR_MISSING:return d("WAWebMediaTypes").MediaDataStage.ERROR_MISSING;case d("WAWebMediaTypes").UploadStage.ERROR_TOO_LARGE:return d("WAWebMediaTypes").MediaDataStage.ERROR_TOO_LARGE;case d("WAWebMediaTypes").UploadStage.UPLOADED:return d("WAWebMediaTypes").MediaDataStage.SENDING;case d("WAWebMediaTypes").UploadStage.ERROR_FILE_NOT_READABLE:return d("WAWebMediaTypes").MediaDataStage.ERROR_FILE_NOT_READABLE;case d("WAWebMediaTypes").UploadStage.FINALIZING:return d("WAWebMediaTypes").MediaDataStage.FINALIZING}}function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield c("WAWebMediaOpaqueData").createFromBase64Jpeg(a));a.autorelease();return{resolvedPreview:a}});return z.apply(this,arguments)}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebMediaDataUtils").getImageWidthHeight(a));var b=a.width;a=a.height;return{aspectRatio:b/a}});return B.apply(this,arguments)}function C(a){var b={};u(b,a,d("WAWebMediaTypes").FIELDS.RAW);u(b,a.contentInfo,a.contentFields());a.mediaBlob&&(b.renderableUrl=a.mediaBlob.url());var c=w(a);a._stickers=a._stickers.filter(function(a){a[0];a=a[1];return!a});a._stickers.forEach(function(a){var d=a[0];a[1];d.mediaData.set(babelHelpers["extends"]({},b,{mediaStage:c}))});a._stickerPacks=a._stickerPacks.filter(function(a){a[0];a=a[1];return!a});a._stickerPacks.forEach(function(a){var d=a[0];a[1];d.mediaData.set(babelHelpers["extends"]({},b,{mediaStage:c}))});!a._pendingChanges&&a._callOnConsolidate&&(a._callOnConsolidate.forEach(function(a){return void a()}),a._callOnConsolidate=null);a._saveMedia&&a._saveMedia(a)}g.MediaObject=e;g.consolidate=q;g.webMediaTypeToWamMediaType=a;g.getInteractiveMsgMediaType=s}),98);
__d("WAWebAttachMenuGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("web_attach_menu_redesign")}function b(){return d("WAWebABProps").getABPropConfigValue("web_expression_panels")}function c(){return d("WAWebABProps").getABPropConfigValue("web_expression_panels_outside_input")}g.isAttachMenuRedesignEnabled=a;g.areExpressionPanelsEnabled=b;g.shouldShowExpressionPanelsOutOfInput=c}),98);
__d("WAWebImageGeometry",[],(function(a,b,c,d,e,f){function a(a,b){if(typeof a!=="number"||a<0||a!==a)return{width:b,height:b};else if(a>1)return{width:b,height:Math.max(b/a,1)};return{width:Math.max(b*a,1),height:b}}function b(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{width:Math.max(b,1),height:Math.max(a,1)}}f.aspectRatioScaled=a;f.boundHeightWidth=b}),66);
__d("WAWebCanvasUtils",["Promise","WAWebABProps","WAWebDataUrlToBlob","WAWebImageGeometry","WAWebMediaOpaqueData","asyncToGeneratorRuntime","cr:5397","gkx"],(function(a,b,c,d,e,f,g){var h;function a(a){if(c("gkx")("26254")&&b("cr:5397")){var d=a.getContext("2d");d=d.getImageData(0,0,a.width,a.height);return b("cr:5397")(d.data,a.width,a.height,{ensureExtendedFormat:!0})}return i(a,"image/webp")}function i(a,c){c===void 0&&(c="image/jpeg");if(Object.prototype.hasOwnProperty.call(HTMLCanvasElement.prototype,"toBlob")){var e=c==="image/jpeg"?d("WAWebABProps").getABPropConfigValue("web_jpeg_quality")/100:void 0;return new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,e)})}return(h||(h=b("Promise"))).resolve(d("WAWebDataUrlToBlob").dataURLtoBlob(a.toDataURL(c)))}function e(a,b,c){b===void 0&&(b="image/jpeg");var e=a.toDataURL(b);e=d("WAWebDataUrlToBlob").dataURLtoBlob(e);if(e.size<=c)return a.toDataURL(b);for(e=.9;e>=.1;e-=.1){var f=a.toDataURL(b,e),g=d("WAWebDataUrlToBlob").dataURLtoBlob(f);if(g.size<=c)return f}return null}function f(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e;d=d||{};e=(e=d.mimetype)!=null?e:"image/jpeg";d=(d=d.maxAttempts)!=null?d:10;var f=.5,g=a,h=(yield i(g,e));for(var j=0;j<d;j++){if(h.size<=b)break;var k=Math.floor(a.width*f),l=Math.floor(a.height*f);g=q(k,l);var m=g.getContext("2d");m.drawImage(a,0,0,k,l);h=(yield i(g,e));f*=.5}return{opaqueData:yield c("WAWebMediaOpaqueData").createFromData(h,e),width:g.width,height:g.height,dataUrl:g.toDataURL("image/jpeg")}});return j.apply(this,arguments)}function k(a,b){var c=b.x||0,d=b.y||0;b.degrees&&(b.radians=b.degrees*(Math.PI/180));a.translate(c,d);a.rotate(b.radians);a.translate(-c,-d)}function l(a,b,c){var d=a.getContext("2d"),e=d.getImageData(0,0,b,c);a.width=b;a.height=c;d.putImageData(e,0,0)}function m(a){var b=a.getContext("2d"),c=a.width,d=a.height,e=b.getImageData(0,0,c,d),f=Math.max(c,d);a.width=f;a.height=f;a=(f-c)/2;f=(f-d)/2;b.clearRect(0,0,c,d);b.putImageData(e,a,f,0,0,c,d)}function n(a,b){var c=a.getContext("2d"),e=r(a);b=d("WAWebImageGeometry").aspectRatioScaled(a.width/a.height,b);var f=b.width;b=b.height;a.width=f;a.height=b;c.drawImage(e,0,0,f,b)}function o(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function p(a,b){b=d("WAWebImageGeometry").boundHeightWidth(a.height,a.width,b);var c=b.width;b=b.height;if(c>a.width&&b>a.height)return a;var e=document.createElement("canvas"),f=e.getContext("2d");e.width=c;e.height=b;f.drawImage(a,0,0,c,b);return e}function q(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c}function r(a){var b=q(a.width,a.height),c=b.getContext("2d");c.drawImage(a,0,0);return b}function s(a){var b=a.getContext("2d");b=b.getImageData(0,0,a.width,a.height);a=b.data.length/4;var c;for(c=0;c<a;c++){var d=b.data[4*c+3];if(d!==0)return!1}return!0}function t(a){var b=a.getContext("2d");b=b.getImageData(0,0,a.width,a.height);var c=b.data.length/4,d=Infinity,e=Infinity,f=0,g=0,h;for(h=0;h<c;h++){var i=b.data[4*h+3];if(i===0)continue;i=h%a.width;var j=Math.floor(h/a.width);i<d&&(d=i);i>f&&(f=i);j<e&&(e=j);j>g&&(g=j)}return{left:d,top:e,right:f,bottom:g}}function u(a){if(s(a))return;var b=t(a),c=b.left,d=b.top,e=b.right;b=b.bottom;b=b-d;e=e-c;a=a.getContext("2d");a=a.getImageData(c,d,e,b);c=q(e,b);d=c.getContext("2d");d.putImageData(a,0,0);return c}function v(a,b,c){c===void 0&&(c="white");var d=document.createElement("canvas"),e=d.getContext("2d"),f=document.createElement("canvas"),g=f.getContext("2d");b=b*2;d.width=f.width=a.width+b*2;d.height=f.height=a.height+b*2;e.drawImage(a,b,b);g.shadowColor=c;g.shadowBlur=1;for(c=0;c<b;c++)g.drawImage(d,0,0),e.drawImage(f,0,0);g.shadowColor="rgba(0,0,0,0)";g.drawImage(a,b,b);return f}g.canvasToWebp=a;g.canvasToBlob=i;g.getResizedDataUrl=e;g.generateMicroThumb=f;g.rotate=k;g.resize=l;g.square=m;g.scale=n;g.fillBackgroundWithGray=o;g.contain=p;g.createCanvas=q;g.copy=r;g.trim=u;g.addBorder=v}),98);
__d("WAWebChatEphemerality",["WALogger","WAWebEphemeralityTypes","WAWebStateUtils","WAWebUserPrefsMultiDevice"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral] invalid duration of "," for chat ",""]);h=function(){return a};return a}function i(a){var b;a=d("WAWebStateUtils").unproxy(a);b=a.isGroup?(b=a.groupMetadata)==null?void 0:b.ephemeralDuration:a.ephemeralDuration;if(b==null||b===0)return null;if(b<0){d("WALogger").WARN(h(),b,a.id.toLogString());return null}return b}function a(a){a=d("WAWebStateUtils").unproxy(a);if(a.isGroup)return null;return a.ephemeralSettingTimestamp===0?null:a.ephemeralSettingTimestamp}function j(a){a=d("WAWebStateUtils").unproxy(a);a=i(a);return a!=null&&a!==0}function b(a){a=d("WAWebStateUtils").unproxy(a);if(d("WAWebUserPrefsMultiDevice").getIsHostedMeAccountFromLocalStorage()&&!a.isGroup)return!1;if(a.isPSA)return!1;if(a.id.isBot())return!1;if(a.isGroup){var b;b=(b=a.groupMetadata)==null?void 0:b.participants.getSuperAdmin();if(b==null?void 0:b.contact.isEnterprise)return!1;if(!((b=a.groupMetadata)==null?void 0:b.canSetEphemeralSetting())&&!j(a))return!1}if(a.isBroadcast)return!1;return a.contact.isEnterprise?!1:!0}function c(a){a=d("WAWebStateUtils").unproxy(a);if(a.isGroup)return null;if(a.disappearingModeInitiator!=null)return a.disappearingModeInitiator;return j(a)?d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:null}function e(a){a=d("WAWebStateUtils").unproxy(a);if(a.isGroup)return null;if(a.disappearingModeTrigger!=null)return a.disappearingModeTrigger;return j(a)?d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings:null}function f(a){a=d("WAWebStateUtils").unproxy(a);if(a.isGroup)return null;return a.disappearingModeInitiatedByMe!=null?a.disappearingModeInitiatedByMe:null}function k(a){var b;a=d("WAWebStateUtils").unproxy(a);return a.ephemeralDuration==null&&a.ephemeralSettingTimestamp==null&&a.disappearingModeInitiator==null?null:{duration:(b=a.ephemeralDuration)!=null?b:0,settingTimestamp:a.ephemeralSettingTimestamp,initiator:a.disappearingModeInitiator,disappearingModeTrigger:a.disappearingModeTrigger,initiatedByMe:a.disappearingModeInitiatedByMe}}g.getEphemeralSetting=i;g.getEphemeralSettingTimestamp=a;g.isEphemeralSettingOn=j;g.shouldShowEphemeralSetting=b;g.getDisappearingModeInitiator=c;g.getDisappearingModeTrigger=e;g.getDisappearingModeInitiatedByMe=f;g.getChatEphemeralityFields=k}),98);
__d("WAWebAddWebpMetadata",["WATypedArraysConcat","WAWebWebp","WAWebWebpMetadata","err"],(function(a,b,c,d,e,f,g){function a(a,b){a=new Uint8Array(a);if(!d("WAWebWebp").isExtendedFile(a))throw c("err")("Not extended");b=d("WAWebWebpMetadata").toRawWebpMetadata(b);b=i(b);a=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[a,b]);a.set(d("WAWebWebp").numberToLittleEndian(a.byteLength-8),4);b=a.buffer;return b}function h(a,b){return d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[d("WAWebWebp").stringToUint8(a),d("WAWebWebp").numberToLittleEndian(b)])}function i(a){var b=new TextEncoder();a=JSON.stringify(a);b=b.encode(a);a=j(b);a=[h(d("WAWebWebp").Chunk.EXIF,a.byteLength),a];b.byteLength%2!==0&&a.push(new Uint8Array([0]));b=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,a);return b}function j(a){var b;b=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[(b=d("WAWebWebp")).stringToUint8("II"),new Uint8Array([42,0]),b.numberToLittleEndian(8),new Uint8Array([1,0]),b.stringToUint8("AW"),new Uint8Array([7,0]),b.numberToLittleEndian(a.byteLength),b.numberToLittleEndian(22),a]);return b}g.addWebpMetadata=a}),98);
__d("WAWebMediaJpeg",["WABinary","WAProgressiveJpegMarkers","err"],(function(a,b,c,d,e,f,g){function h(a){var b=new(d("WABinary").Binary)();b.writeBytes(255,216,255,224,0,16,74,70,73,70,0);b.writeUint16(a.version);b.writeUint8(a.densityUnits);b.writeUint16(a.xDensity);b.writeUint16(a.yDensity);b.writeBytes(0,0);return b.readByteArray()}function a(a){var b=new(d("WABinary").Binary)(a);a=new(d("WABinary").Binary)(a);var e=new(d("WABinary").Binary)(),f=2,g=2,i=!1,j=!1,k=!1,l=!1,m={version:257,densityUnits:0,xDensity:1,yDensity:1};if(!(b.readUint8()===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&b.readUint8()===d("WAProgressiveJpegMarkers").MARKERS.SOI))throw c("err")("SOI marker not at the start of the file.");a.advance(f);var n=void 0;while(n!=null||b.size()){if(n===void 0){var o=b.readUint8();if(o!==d("WAProgressiveJpegMarkers").MARKER_PREFIX)throw c("err")("0x"+o.toString(16)+" is not a marker prefix.");n=b.readUint8()}switch(n){case d("WAProgressiveJpegMarkers").MARKERS.APP0:if(j)o=b.readUint16(),a.advance(o+f),b.advance(b.size()-a.size());else{o=b.readUint16();if(b.readString(5)!=="JFIF\0")throw c("err")("APP0 marker missing 'JFIF' magic bytes.");l=!0;m.version=b.readUint16();m.densityUnits=b.readUint8();m.xDensity=b.readUint16();m.yDensity=b.readUint16();a.advance(o+f);b.advance(b.size()-a.size());j=!0}break;case d("WAProgressiveJpegMarkers").MARKERS.SOS:if(!k&&!l)throw c("err")("Missing magic bytes marker.");b.advance(b.readUint16()-g);var p,q=void 0,r=b.readUint8();while(b.size()){q=b.readUint8();p=r===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&!d("WAProgressiveJpegMarkers").SOS_STREAM.includes(q);if(p){n=q;break}r=q}e.writeByteArray(a.readByteArray(a.size()-b.size()-f));continue;case d("WAProgressiveJpegMarkers").MARKERS.APP1:o=b.readUint16();if(!k&&b.readString(6)!=="Exif\0\0")throw c("err")("APP1 marker missing 'EXIF' magic bytes.");k=!0;a.advance(o+f);b.advance(b.size()-a.size());break;case d("WAProgressiveJpegMarkers").MARKERS.APP13:case d("WAProgressiveJpegMarkers").MARKERS.COM:if(!k&&!l)throw c("err")("Missing magic bytes marker.");o=b.readUint16();a.advance(o+f);b.advance(b.size()-a.size());break;case d("WAProgressiveJpegMarkers").MARKERS.EOI:if(!k&&!l)throw c("err")("Missing magic bytes marker.");i=!0;e.writeByteArray(a.readByteArray(f));break;case d("WAProgressiveJpegMarkers").MARKERS.SOF0:case d("WAProgressiveJpegMarkers").MARKERS.SOF1:case d("WAProgressiveJpegMarkers").MARKERS.SOF2:case d("WAProgressiveJpegMarkers").MARKERS.SOF3:case d("WAProgressiveJpegMarkers").MARKERS.SOF5:case d("WAProgressiveJpegMarkers").MARKERS.SOF6:case d("WAProgressiveJpegMarkers").MARKERS.SOF7:case d("WAProgressiveJpegMarkers").MARKERS.SOF9:case d("WAProgressiveJpegMarkers").MARKERS.SOF10:case d("WAProgressiveJpegMarkers").MARKERS.SOF11:case d("WAProgressiveJpegMarkers").MARKERS.SOF13:case d("WAProgressiveJpegMarkers").MARKERS.SOF14:case d("WAProgressiveJpegMarkers").MARKERS.SOF15:case d("WAProgressiveJpegMarkers").MARKERS.DQT:case d("WAProgressiveJpegMarkers").MARKERS.DHT:case d("WAProgressiveJpegMarkers").MARKERS.DRI:if(!k&&!l)throw c("err")("Missing magic bytes marker.");o=b.readUint16();e.writeByteArray(a.readByteArray(f+o));b.advance(b.size()-a.size());break;case d("WAProgressiveJpegMarkers").MARKERS.APP2:case d("WAProgressiveJpegMarkers").MARKERS.APP3:case d("WAProgressiveJpegMarkers").MARKERS.APP4:case d("WAProgressiveJpegMarkers").MARKERS.APP5:case d("WAProgressiveJpegMarkers").MARKERS.APP6:case d("WAProgressiveJpegMarkers").MARKERS.APP7:case d("WAProgressiveJpegMarkers").MARKERS.APP8:case d("WAProgressiveJpegMarkers").MARKERS.APP9:case d("WAProgressiveJpegMarkers").MARKERS.APP10:case d("WAProgressiveJpegMarkers").MARKERS.APP11:case d("WAProgressiveJpegMarkers").MARKERS.APP12:case d("WAProgressiveJpegMarkers").MARKERS.APP14:case d("WAProgressiveJpegMarkers").MARKERS.APP15:throw c("err")("Received unexpected APP marker 0x"+n.toString(16));default:throw c("err")("Did not understand marker: 0x"+n.toString(16))}n=void 0;if(i)break}if(!i)throw c("err")("No EOI tag found.");p=h(m);return new Blob([p,e.readByteArray()],{type:"image/jpeg"})}g.cleanJPEG=a}),98);
__d("WAWebStickerConstants",[],(function(a,b,c,d,e,f){a=512;b=8;c=36;d=156;e=20;var g=24*60*60;f.STICKER_DIMENSION=a;f.STICKER_BORDER_WIDTH=b;f.STICKER_PADDING=c;f.STICKER_LIST_ITEM_HEIGHT=d;f.STICKER_MAKER_IMAGE_PADDING=e;f.STICKER_PACK_FETCH_TIMEOUT=g}),66);
__d("WAWebImageUtils",["Promise","WACustomError","WAExponentialBackoff","WALogger","WAPromiseProps","WAWebAddWebpMetadata","WAWebCanvasUtils","WAWebFileUtils","WAWebImageGeometry","WAWebMediaJpeg","WAWebMediaLoad","WAWebMiscErrors","WAWebModernizr","WAWebStickerConstants","WAWebUA","WAWebWebpMetadata","asyncToGeneratorRuntime","err","exif-component","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Webp sticker file generation failed: "]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["addMetadataToSticker: Unable to add metadata to Sticker"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["data URL conversion failed: "]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["link preview image generation failed: "]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Image size too small for link preview"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["generateVideoThumbsAndDuration: Failed to generate video thumbnail from ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["generateVideoThumbsAndDuration: Failed to generate video thumbnail from ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["generateVideoThumbsAndDuration: Thumb generation had to be retried, from ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["generateVideoThumbsAndDuration: Setting video.currentTime to 0 to attempt to unblock the video"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Could not parse JPEG: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageUtils::rotateAndResize error: ",""]);s=function(){return a};return a}var t={DATA_URL:1<<0,BLOB:1<<1,CANVAS:1<<2},u=t.DATA_URL,v=t.BLOB,w=t.CANVAS,x=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WACustomError").customError("BlackVideoThumbnailError"));x.message="Generated video thumbnail is black";var y=function(a){var b=a.video,c=a.fullWidth,e=a.fullHeight;a=a.maxDimension;var f=document.createElement("canvas");a=d("WAWebImageGeometry").boundHeightWidth(e,c,a);var g=a.width;a=a.height;f.width=g;f.height=a;var h=f.getContext("2d");h.drawImage(b,0,0,g,a);b=h.getImageData(0,0,g,a);h=f.toDataURL("image/jpeg");f={url:h,width:g,height:a,fullWidth:c,fullHeight:e};return{thumb:f,imageData:b}};function a(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.file,f=a.maxDimensions,g=a.debugHint;a=a.throwOnBlack;var i=a===void 0?!1:a;a=(yield d("WAWebMediaLoad").loadVideo(e));var j=a.video,k=a.fullWidth,l=a.fullHeight;if(d("WAWebUA").UA.isBuggyVideoLoad){e=50;var m=5e3/e;return d("WAExponentialBackoff").exponentialBackoff({minTimeout:e,maxTimeout:e,retries:m,signal:new AbortController().signal,factor:1},function(a,e){var n=[],r;for(r of f){var s=y({video:j,fullHeight:l,fullWidth:k,maxDimension:r}),t=s.thumb;s=s.imageData;if(R(s)){if(e<m){e===0&&d("WALogger").LOG(q());j.currentTime=0;(c("gkx")("26261")&&!c("gkx")("26258")||e===0)&&d("WALogger").WARN(p(),g);return a(c("err")("retry"))}d("WALogger").ERROR(o(),g).sendLogs("thumbnail-generation-failed-"+g,.001);if(i)throw new x()}n.push(t)}s={duration:~~j.seekable.end(0),thumbs:n};d("WAWebMediaLoad").disposeVideo(j);return(h||(h=b("Promise"))).resolve(s)})}try{a=f.map(function(a){a=y({video:j,fullHeight:l,fullWidth:k,maxDimension:a});var b=a.thumb;a=a.imageData;if(R(a)){d("WALogger").ERROR(n(),g).sendLogs("thumbnail-generation-failed-"+g,.001);if(i)throw new x()}return b});return{duration:~~j.seekable.end(0),thumbs:a}}finally{d("WAWebMediaLoad").disposeVideo(j)}});return z.apply(this,arguments)}function e(a,b,c,d,e,f,g,h){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h,i){i===void 0&&(i=u);a=a instanceof HTMLCanvasElement?a:yield d("WAWebMediaLoad").loadImage(a);var j=document.createElement("canvas"),k=j.getContext("2d");g==null||h==null?(j.height=f,j.width=e,k.drawImage(a,b,c,e,f)):(j.height=h,j.width=g,k.drawImage(a,b,c,e,f,0,0,g,h));k={};O(k,j,i);a=(yield d("WAPromiseProps").promiseProps(k));return{images:a,width:e,height:f}});return A.apply(this,arguments)}function f(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a instanceof HTMLCanvasElement?a:yield d("WAWebMediaLoad").loadImage(a);var b=document.createElement("canvas"),c=b.getContext("2d");b.height=a.height;b.width=a.width;var e=Math.min(a.width,a.height);e=e/2;c.beginPath();c.arc(a.width/2,a.height/2,e,0,Math.PI*2,!0);c.clip();c.closePath();c.drawImage(a,0,0);return b.toDataURL("image/png")});return B.apply(this,arguments)}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebMediaLoad").loadImage(a));var b=100,c=140;if(a.width<b||a.height<b){d("WALogger").LOG(m());return null}b=document.createElement("canvas");var e=b.getContext("2d");b.height=c;b.width=c;var f=Math.min(a.width,a.height),g=(a.width-f)/2,h=(a.height-f)/2;e.drawImage(a,g,h,f,f,0,0,c,c);return b.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")}catch(a){d("WALogger").LOG(l()).devConsole(a);return null}});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebMediaLoad").loadImage(a));var b=document.createElement("canvas"),c=b.getContext("2d");b.height=a.height;b.width=a.width;c.drawImage(a,0,0);return b.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")}catch(a){d("WALogger").LOG(k()).devConsole(a);return null}});return F.apply(this,arguments)}function G(a,e,f,g){g=(g=g)!=null?g:{};var i=g.transparency,j=i===void 0?!1:i;i=g.fitToSquare;var k=i===void 0?!1:i;i=g.minDimension;var l=i===void 0?0:i,m=new ArrayBuffer(0),n;a instanceof HTMLCanvasElement?(g=(h||(h=b("Promise"))).resolve(a),i=h.resolve(m)):(n=window.URL.createObjectURL(a),g=d("WAWebMediaLoad").loadImage(n),i=d("WAWebFileUtils").blobToArrayBuffer(a)["catch"](function(a){d("WALogger").WARN(s(),a).devConsole(a);return m}));return d("WAPromiseProps").promiseProps({buffer:i,image:g}).then(function(a){var b,g=a.buffer;a=a.image;var h={};try{h=c("exif-component")(g)}catch(a){}var i=0;if(!((b=d("WAWebModernizr").getModernizr())==null?void 0:b.exiforientation))switch(h.orientation||"UNKNOWN"){case"right-top":i=1;break;case"left-bottom":i=-1;break;case"bottom-right":i=2;break}var m=document.createElement("canvas");b=a.naturalWidth||a.width;h=a.naturalHeight||a.height;var n=Math.max(b,h),o=m.getContext("2d"),p={};if(i)switch(i){case 1:case-1:var q=Math.max(b,h),s=q/2;m.width=m.height=q;j||d("WAWebCanvasUtils").fillBackgroundWithGray(m);d("WAWebCanvasUtils").rotate(o,{x:s,y:s,degrees:i*90});i===1?o.drawImage(a,0,q-h):o.drawImage(a,q-b,0);d("WAWebCanvasUtils").rotate(o,{x:s,y:s,degrees:i*-90});d("WAWebCanvasUtils").resize(m,h,b);k&&d("WAWebCanvasUtils").square(m);n<l&&d("WAWebCanvasUtils").scale(m,l);var t=d("WAWebCanvasUtils").contain(m,e);O(p,t,f,j);return d("WAPromiseProps").promiseProps(p).then(function(a){return{width:t.width,height:t.height,images:a}});case 2:q=d("WAWebImageGeometry").boundHeightWidth(h,b,e);s=m.width=q.width;q=m.height=q.height;j||d("WAWebCanvasUtils").fillBackgroundWithGray(m);d("WAWebCanvasUtils").rotate(o,{x:s/2,y:q/2,degrees:i*90});o.drawImage(a,0,0,s,q);d("WAWebCanvasUtils").rotate(o,{x:s/2,y:q/2,degrees:i*-90});k&&d("WAWebCanvasUtils").square(m);n<l&&d("WAWebCanvasUtils").scale(m,l);O(p,m,f,j);return d("WAPromiseProps").promiseProps(p).then(function(a){return{width:m.width,height:m.height,images:a}})}else{s=d("WAWebImageGeometry").boundHeightWidth(h,b,e);var u,w;q=f&v;if(g&&q&&b===s.width&&h===s.height)try{i=d("WAWebMediaJpeg").cleanJPEG(g);p.blob=i;q=!1;u=b;w=h}catch(a){d("WALogger").LOG(r(),a.message)}(q||f&~v)&&(m.width=s.width,m.height=s.height,j||d("WAWebCanvasUtils").fillBackgroundWithGray(m),o.drawImage(a,0,0,m.width,m.height),k&&(d("WAWebCanvasUtils").square(m),p.blob=void 0),n<l&&(d("WAWebCanvasUtils").scale(m,l),p.blob=void 0),u=m.width,w=m.height,O(p,m,f,j));return d("WAPromiseProps").promiseProps(p).then(function(a){return{width:u,height:w,images:a}})}})["finally"](function(){})}function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var c=(yield a.arrayBuffer());c=d("WAWebAddWebpMetadata").addWebpMetadata(c,b);b=new Uint8Array(c);c=new Blob([b],{type:"image/webp"});return c}catch(b){d("WALogger").ERROR(j()).sendLogs("unable-to-add-sticker-metadata");return a}});return I.apply(this,arguments)}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=window.URL.createObjectURL(a);var b=(yield d("WAWebMediaLoad").loadImage(a));window.URL.revokeObjectURL(a);a=d("WAWebStickerConstants").STICKER_DIMENSION;var c=d("WAWebCanvasUtils").createCanvas(a,a),e=c.getContext("2d"),f=d("WAWebImageGeometry").aspectRatioScaled(b.width/b.height,a),g=f.width;f=f.height;var h=(a-g)/2;a=(a-f)/2;e.drawImage(b,h,a,g,f);e=(yield d("WAWebCanvasUtils").canvasToWebp(c));b=(yield H(e,{isFirstParty:!1,isFromStickerMaker:!0,emojis:[],stickerPackPublisher:"WhatsApp Sticker Maker",stickerMakerSourceType:d("WAWebWebpMetadata").StickerMakerSourceType.WebStickerMaker}));return b}catch(a){d("WALogger").LOG(i()).devConsole(a);throw a}});return K.apply(this,arguments)}function L(a){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=(yield d("WAWebMediaLoad").loadImage(a)),c=document.createElement("canvas");c.width=b.naturalWidth;c.height=b.naturalHeight;var e=c.getContext("2d");d("WAWebCanvasUtils").fillBackgroundWithGray(c);e.drawImage(b,0,0);return d("WAWebCanvasUtils").canvasToBlob(c)}catch(b){throw new(d("WAWebMiscErrors").MediaDragDropError)("unable to render image",a)}});return M.apply(this,arguments)}function N(a){if(!a)return!1;var b=new Image();b.src=a;return!!b.complete}function O(a,c,e,f){f===void 0&&(f=!1);f=f?"image/png":"image/jpeg";!a.blob&&e&v&&(a.blob=d("WAWebCanvasUtils").canvasToBlob(c,f));!a.dataUrl&&e&u&&(a.dataUrl=(h||(h=b("Promise"))).resolve(c.toDataURL(f)));!a.canvas&&e&w&&(a.canvas=(h||(h=b("Promise"))).resolve(c))}function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebMediaLoad").loadImage(a));var b=d("WAWebCanvasUtils").createCanvas(a.width,a.height),c=b.getContext("2d");c.drawImage(a,0,0);return b});return Q.apply(this,arguments)}function R(a){var b=a.data,c=a.width,d=a.height;for(var e=0;e<d;e++){var f=Math.round(e*(c/d));f=e*c+f;f=f*4;var g=b[f];if(g!==0)return!1;g=b[f+1];if(g!==0)return!1;g=a.data[f+2];if(g!==0)return!1;g=a.data[f+3];if(g!==0&&g!==255)return!1}return!0}g.DATA_URL=u;g.BLOB=v;g.CANVAS=w;g.BlackVideoThumbnailError=x;g.generateVideoThumbsAndDuration=a;g.crop=e;g.toDataUrlWithRoundedCorners=f;g.generateLinkPreview=C;g.toDataUrl=E;g.rotateAndResize=G;g.toWebpSticker=J;g.urlToFile=L;g.isCached=N;g.base64ImageToCanvas=P}),98);
__d("WAWebMediaGatingShouldClearUploadedBlobs",["WAWebABProps","WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){function a(a){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT&&d("WAWebABProps").getABPropConfigValue("web_abprop_remove_uploaded_files")===!0}g["default"]=a}),98);
__d("WAWebMediaGetUploadOriginForChat",["WAWebStateUtils","WAWebWamEnumUploadOriginType"],(function(a,b,c,d,e,f,g){function a(a){if(!a)return d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.UNKNOWN;a=d("WAWebStateUtils").unproxy(a);if(a.isNewsletter)return d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.CHANNEL;return a.isGroup?a.isCAG?d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.COMMUNITY:d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.CHAT_GROUP:d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.CHAT_PERSONAL}g["default"]=a}),98);
__d("WAWebMediaInMemoryKeyCache",["WALruCache"],(function(a,b,c,d,e,f,g){b=10;c={sizeLimit:b,getSize:function(a){return 1}};function a(){return!0}e=new(d("WALruCache").LruCache)(c);g.shouldUseMediaKeyCache=a;g.MediaKeyCache=e}),98);
__d("WAWebMediaUpdateMsg",["WAWebDBUpdateMessageTable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,b),a.set(b)});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebSendMsgResultAction",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["OK","ERROR_NETWORK","ERROR_EXPIRED","ERROR_CANCELLED","ERROR_UPLOAD","ERROR_UNKNOWN"]);f.SendMsgResult=a}),66);
__d("WAWebMediaPrep",["invariant","Promise","WALogger","WAMediaCalculateFilehash","WAPromiseCallSync","WATimeUtils","WAWebABProps","WAWebAck","WAWebAttachMenuGatingUtils","WAWebCanvasUtils","WAWebChatEphemerality","WAWebCryptoCalculateFilehash","WAWebCryptoRandomMediaKey","WAWebImageUtils","WAWebMediaCryptoEligibilityUtils","WAWebMediaData","WAWebMediaDataUtils","WAWebMediaEntry","WAWebMediaGatingShouldClearUploadedBlobs","WAWebMediaGetUploadOriginForChat","WAWebMediaInMemoryBlobCache","WAWebMediaInMemoryKeyCache","WAWebMediaMmsV4Download","WAWebMediaMmsV4Upload","WAWebMediaOpaqueData","WAWebMediaStorage","WAWebMediaTypes","WAWebMediaUpdateMsg","WAWebMediaUploadMmsThumbnail","WAWebMessagePluginGenerateReportingTokenContent","WAWebMessagingGatingUtils","WAWebMiscGatingUtils","WAWebMmsMediaTypes","WAWebMsgDataUtils","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebNewsletterSendMsgAction","WAWebRecentStickerCollectionMd","WAWebSendMsgChatAction","WAWebSendMsgResultAction","WAWebSendStatusGatingUtils","WAWebSendStatusMsgAction","WAWebStateUtils","WAWebURLUtils","WAWebWamEnumDownloadOriginType","WAWebWamEnumMessageSendResultType","WAWebWamEnumWebcRmrReasonCode","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["upload failed: thumbnail data incomplete\nDebug info:",""],["upload failed: thumbnail data incomplete\\nDebug info:",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker:sendToChat failed with unknown error"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Media:sendToChat error\nresult: ","\nuploadStage: ","\nuploadResultKind: ","\nerror: ",""],["Media:sendToChat error\\nresult: ","\\nuploadStage: ","\\nuploadResultKind: ","\\nerror: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Media:sendToChat canceled"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker:sendToChat failed with expressions panel enabled"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Media:sendToChat chat ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);r=function(){return a};return a}a=function(){function a(a,b){var e=this;this._baseType=a;this._mediaData=new(c("WAWebMediaData"))({mediaStage:d("WAWebMediaTypes").MediaDataStage.PREPARING});this._prepwork=b.then(function(a){e._mediaData.set(a);if(!a.filehash){a.mediaBlob||d("WALogger").ERROR(r()).sendLogs("media-fault: no hash or blob");return d("WAWebCryptoCalculateFilehash").calculateFilehashFromBlob(a.mediaBlob).then(function(a){e._mediaData.filehash=a})}},function(a){e._mediaData.mediaStage=d("WAWebMediaTypes").MediaDataStage.ERROR_UNSUPPORTED;throw a})}var e=a.prototype;e.sendToChat=function(a,b,c){return d("WAPromiseCallSync").promiseCallSync(w,null,this,a,b,c)};e.waitForPrep=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this._prepwork;return this._mediaData});function c(){return a.apply(this,arguments)}return c}();return a}();function s(a,b){if(b.type==="product")return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.PRODUCT_CATALOG;b=d("WAWebStateUtils").unproxy(a);if(b.isGroup)return b.isCAG?d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.COMMUNITY:d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP;return b.isNewsletter?d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHANNEL:d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL}function t(a){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT&&d("WAWebABProps").getABPropConfigValue("upload_document_thumb_mms_enabled")}function u(a){(a=a.wamMessageSendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UPLOAD,isTerminal:!0});return d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UPLOAD}function v(a,b,e,f){return a.waitForPrep().then(function(a){var b=a.mediaBlob;return b&&!(b instanceof c("WAWebMediaOpaqueData"))?c("WAWebMediaOpaqueData").createFromData(b,b.type).then(function(b){a.mediaBlob=b;return a}):a}).then(function(a){var g=a.filehash;g||d("WALogger").ERROR(q()).sendLogs("media-fault: sendToChat filehash undefined");var h=d("WAWebMediaStorage").getOrCreateMediaObject(g),i=h.mediaBlob;i&&(i.retain(),a.mediaBlob instanceof c("WAWebMediaOpaqueData")&&a.mediaBlob.autorelease(),a.mediaBlob=i);a.mediaBlob instanceof c("WAWebMediaOpaqueData")&&(a.renderableUrl=a.mediaBlob.url());h.consolidate(a.toJSON());a.mediaBlob instanceof c("WAWebMediaOpaqueData")&&a.mediaBlob.autorelease();i=d("WAWebMediaDataUtils").shouldUseMediaCache(d("WAWebMmsMediaTypes").castToV4(h.type));if(i&&a.mediaBlob instanceof c("WAWebMediaOpaqueData")){i=a.mediaBlob.formData();d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.put(g,i)}d("WAWebMediaMmsV4Download").downloadMedia({mimetype:a.mimetype,mediaObject:h,downloadEvenIfExpensive:!0,mediaType:d("WAWebMmsMediaTypes").msgToMediaType({type:a.type,isGif:a.isGif,isNewsletter:b.isNewsletter}),rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.SEND_TO_CHAT,downloadOrigin:s(b,f),mode:"manual",chatWid:b.id});g=babelHelpers["extends"]({},h.msgProps(a));g.caption=e.caption;!d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&(e.caption==null||e.caption==="")&&a.type===d("WAWebMediaTypes").OUTWARD_TYPES.DOCUMENT&&(g.caption=a.filename);e.isViewOnce===!0&&(g.isViewOnce=!0);return g})}function w(a,b,c,d){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var q,r;d("WALogger").LOG(p(),e.id.toLogString());var s=f.caption,w=f.footer,x=f.quotedMsg?f.quotedMsg.msgContextInfo(e.id):{};q=(q=f.productMsgOptions)!=null?q:{};var y=d("WAWebChatEphemerality").isEphemeralSettingOn(e)?d("WAWebChatEphemerality").getEphemeralSetting(e):void 0,z=d("WAWebChatEphemerality").getEphemeralSettingTimestamp(e),A=d("WAWebChatEphemerality").getDisappearingModeInitiator(e),B,C=!1;e.isCAGAdmin()&&(C=!0);r=(r=f.type)!=null?r:a._baseType;d("WAWebMessagingGatingUtils").isReportingTokenSendingEnabled()&&d("WAWebMessagePluginGenerateReportingTokenContent").isMsgTypeReportingTokenCompatible(r)&&(C=!0);C&&(B=self.crypto.getRandomValues(new Uint8Array(32)));var D=babelHelpers["extends"]({},yield d("WAWebMsgDataUtils").genOutgoingMsgData(e,r),{type:r,caption:s,footer:w,quotedMsg:x.quotedMsg,quotedParticipant:x.quotedParticipant,quotedStanzaID:x.quotedStanzaID,quotedRemoteJid:x.quotedRemoteJid,mentionedJidList:f.mentionedJidList,groupMentions:f.groupMentions,isForwarded:f.isForwarded,forwardingScore:f.forwardingScore,forwardedNewsletterMessageInfo:f.forwardedNewsletterMessageInfo,multicast:f.multicast,forwardedFromWeb:f.forwardedFromWeb,ctwaContext:f.ctwaContext,ephemeralDuration:y,ephemeralSettingTimestamp:z,disappearingModeInitiator:A,messageSecret:B,isAvatar:f.isAvatar},q);f.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&Boolean(f.caption)&&(D.isCaptionByUser=!0);var E,F;function G(a){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){E=a;var f=a.mediaObject;f||d("WALogger").ERROR(k()).sendLogs("media-fault: incorrect media object for created msg");f||h(0,56330);var l=d("WAWebMmsMediaTypes").getMsgMediaType(a),m=f.entries.getUploadEntry(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForChat(e));m=m instanceof d("WAWebMediaEntry").EncryptedMediaEntry?{key:m.mediaKey,timestamp:m.mediaKeyTimestamp}:c("WAWebCryptoRandomMediaKey")();var n=f.contentInfo,o=n.fullPreviewData;n=n.fullPreviewSize;var p=a.body;if(t(l)&&!o&&f.contentInfo.preview){var q=(yield d("WAWebImageUtils").base64ImageToCanvas(f.contentInfo.preview.url()));q=(yield d("WAWebCanvasUtils").generateMicroThumb(q,1300,{mimetype:"image/jpeg",maxAttempts:10}));o=f.contentInfo.preview;n={width:q.width,height:q.height};p=c("WAWebURLUtils").parseDataURL(q.dataUrl).data}q=a.safe();var r=o&&n&&t(l);q=o&&r===!0&&q.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT?c("WAWebMediaUploadMmsThumbnail")({thumbnail:o,mediaKeyInfo:m,mediaType:d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_DOCUMENT,uploadOrigin:c("WAWebMediaGetUploadOriginForChat")(e),forwardedFromWeb:Boolean(a.forwardedFromWeb),isViewOnce:Boolean(a.isViewOnce)}):(i||(i=b("Promise"))).resolve(null);o={mimetype:a.mimetype,mediaObject:f,mediaType:l,forwardedFromWeb:Boolean(a.forwardedFromWeb),uploadOrigin:c("WAWebMediaGetUploadOriginForChat")(e),isViewOnce:Boolean(a.isViewOnce),earlyUpload:g};a=d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForChat(e)?d("WAWebMediaMmsV4Upload").uploadMedia(babelHelpers["extends"]({},o,{mediaKeyInfo:m})):d("WAWebMediaMmsV4Upload").uploadUnencryptedMedia(babelHelpers["extends"]({},o,{calculateToken:d("WAMediaCalculateFilehash").getRandomFilehash}));o=f.filehash;d("WAWebMediaInMemoryKeyCache").shouldUseMediaKeyCache()&&o!=null&&d("WAWebMediaInMemoryKeyCache").MediaKeyCache.put(o,m);m=(yield (i||(i=b("Promise"))).all([a,q]));a=m[0];q=a.kind;a=a.mediaEntry;m=m[1];c("WAWebMediaGatingShouldClearUploadedBlobs")(l)&&f.clearBlob({reset:!0});F=q;if(!a)throw c("err")("upload failed: media entry was not created");d("WAWebMediaInMemoryKeyCache").shouldUseMediaKeyCache()&&o!=null&&d("WAWebMediaInMemoryKeyCache").MediaKeyCache["delete"](o);l=m==null?void 0:m.mediaEntry;q={};if(r===!0)if(l&&m&&n)q={thumbnailDirectPath:l.directPath,thumbnailSha256:m.filehash,thumbnailEncSha256:l.encFilehash,thumbnailHeight:n.height,thumbnailWidth:n.width};else{o={thumbnailResultEntry:l,uploadThumbnailResult:m,fullPreviewSize:n};d("WALogger").ERROR(j(),JSON.stringify(o)).devConsole(o).sendLogs("mms-thumbnail-data-incomplete");throw c("err")("upload failed: thumbnail data incomplete")}yield c("WAWebMediaUpdateMsg")(E,babelHelpers["extends"]({deprecatedMms3Url:a.deprecatedMms3Url,directPath:a.directPath,mediaKey:a.getMediaKey(),mediaKeyTimestamp:a.getMediaKeyTimestamp(),filehash:f.filehash,encFilehash:a.getEncfilehash(),size:f.size,streamingSidecar:a.sidecar,firstFrameSidecar:a.firstFrameSidecar,body:p,stickerSentTs:d("WATimeUtils").unixTimeMs(),mediaHandle:a instanceof d("WAWebMediaEntry").UnencryptedMediaEntry?a.handle:null},q));return E});return H.apply(this,arguments)}if(f.addEvenWhilePreparing===!0){C=f.placeholderProps||{};r=babelHelpers["extends"]({},C,D);s=function(b){E=b;return v(a,e,f,D).then(function(a){return c("WAWebMediaUpdateMsg")(E,a)}).then(function(){return G(E)})};d("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&e.isNewsletter?w=b("WAWebNewsletterSendMsgAction").sendNewsletterMediaMsg(e,r,s):d("WAWebSendStatusGatingUtils").isStatusPostingEnabled()&&e.id.isStatusV3()?(b("WAWebSendStatusMsgAction").sendStatusMediaMsgAction(r,s),w=(i||(i=b("Promise"))).reject(c("err")("unsupported"))):w=d("WAWebSendMsgChatAction").addAndSendMsgToChat(e,r,s)[1]}else{x=v(a,e,f,D).then(function(a){var b=f.useBasePropsType===!0?D.type:a.type;return babelHelpers["extends"]({},D,a,{type:b})});d("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&e.isNewsletter?w=b("WAWebNewsletterSendMsgAction").sendNewsletterMediaMsg(e,yield x,G):d("WAWebSendStatusGatingUtils").isStatusPostingEnabled()&&e.id.isStatusV3()?(b("WAWebSendStatusMsgAction").sendStatusMediaMsgAction(yield x,G),w=(i||(i=b("Promise"))).reject(c("err")("unsupported"))):w=d("WAWebSendMsgChatAction").addAndSendMsgToChat(e,x,G)[1]}return w.then(function(a){return{result:a,error:null}})["catch"](function(a){return{result:null,error:a}}).then(function(a){var c,e=a.result;a=a.error;if((e==null?void 0:e.messageSendResult)===d("WAWebSendMsgResultAction").SendMsgResult.OK){E.type===d("WAWebMediaTypes").OUTWARD_TYPES.STICKER&&E.isAvatar!==!0&&b("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.addStickerWithMediaData(E);return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.OK}}E&&(E.ack=d("WAWebAck").ACK.FAILED);c=(c=E)==null?void 0:(c=c.mediaObject)==null?void 0:c.uploadStage;if(E&&d("WAWebMmsMediaTypes").getMsgMediaType(E)===d("WAWebMediaTypes").OUTWARD_TYPES.STICKER&&d("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabled()){var f=c?c:"undefined";d("WALogger").ERROR(o()).tags("non-sad").sendLogs("sticker-send-fail-with-expressions-panel-enabled-uploadStage-"+f,.001)}if(F===d("WAWebMediaMmsV4Upload").UploadMediaResultKind.CANCELLATION){d("WALogger").LOG(n()).devConsole({result:e,uploadStage:c,error:a});(f=E.wamMessageSendReporter)==null?void 0:f.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_CANCELLED,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_CANCELLED}}d("WALogger").WARN(m(),e,c,F,String(a)).devConsole(a);if(c!=null)switch(c){case d("WAWebMediaTypes").UploadStage.NEED_UPLOAD:case d("WAWebMediaTypes").UploadStage.ERROR_TOO_LARGE:return{messageSendResult:u(E)};case d("WAWebMediaTypes").UploadStage.ERROR_MISSING:return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_EXPIRED};default:}if(F===d("WAWebMediaMmsV4Upload").UploadMediaResultKind.ERROR)return{messageSendResult:u(E)};if(e!=null)return e;E&&d("WAWebMmsMediaTypes").getMsgMediaType(E)===d("WAWebMediaTypes").OUTWARD_TYPES.STICKER&&d("WALogger").ERROR(l()).sendLogs("sticker-send-fail-unknown-"+(d("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabled()?"expression-panels":"old-panels"));return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}})});return x.apply(this,arguments)}g.MediaPrep=a;g.sendMediaMsgToChat=w}),98);
__d("WAWebMediaStorage",["WAWebMediaDataUtils","WAWebMediaObject","WAWebMediaStore","WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){var h={};function a(a,b){a.addMsg(b)}function b(a,b){b.mediaObject=null;a.removeMsg(b);if(a.hasAssociatedMsgsOrStickers())return;var c=a.filehash;c&&delete h[c];c&&d("WAWebMediaDataUtils").shouldUseLruMediaStore(d("WAWebMmsMediaTypes").getMsgMediaType(b))&&d("WAWebMediaStore").LruMediaStore.del(c);a["delete"]()}function c(){var a=h;h={};for(var b in a)a[b]["delete"]()}function e(a){return Object.prototype.hasOwnProperty.call(h,a)?h[a]:h[a]=new(d("WAWebMediaObject").MediaObject)()}function f(a){}function i(a,b){a.addStickerPack(b)}function j(a,b){b.mediaObject=null;a.removeStickerPack(b);if(a.hasAssociatedMsgsOrStickers())return;b=a.filehash;b&&delete h[b];b&&d("WAWebMediaStore").LruMediaStore.del(b);a["delete"]()}function k(a,b){a.addSticker(b)}function l(a,b){b.mediaObject=null;a.removeSticker(b);if(a.hasAssociatedMsgsOrStickers())return;b=a.filehash;b&&delete h[b];b&&d("WAWebMediaStore").LruMediaStore.del(b);a["delete"]()}g.associateMediaWithMsg=a;g.disassociateMediaFromMsg=b;g.delistAndDeleteAllMedia=c;g.getOrCreateMediaObject=e;g.clearMediaForChat=f;g.associateMediaWithStickerPack=i;g.disassociateMediaFromStickerPack=j;g.associateMediaWithSticker=k;g.disassociateMediaFromSticker=l}),98);
__d("WAWebMediaUploadMmsThumbnail",["WAAbortError","WACustomError","WAPromiseRaceAbort","WAPromiseTimeout","WAWebCryptoCalculateFilehash","WAWebMediaCryptoEligibilityUtils","WAWebMediaMmsV4Upload","WAWebMediaObject","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.thumbnail,f=a.mediaType,g=a.mediaKeyInfo,h=a.uploadOrigin,i=a.forwardedFromWeb,j=a.timeout,k=a.signal,l=a.isViewOnce,m=new(d("WAWebMediaObject").MediaObject)();try{return j==null?yield n():yield d("WAPromiseTimeout").promiseTimeout(n(),j)}catch(b){a=b;if(a instanceof d("WACustomError").TimeoutError){d("WAWebMediaMmsV4Upload").cancelUploadMedia(m);return{kind:d("WAWebMediaMmsV4Upload").UploadMediaResultKind.TIMEOUT}}throw a}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield c("WAPromiseRaceAbort")(d("WAWebCryptoCalculateFilehash").calculateFilehashFromBlob(e),k));m.filehash=a;m.mediaBlob=e;var b=d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(f)?d("WAWebMediaMmsV4Upload").uploadMedia:d("WAWebMediaMmsV4Upload").uploadUnencryptedMedia;b=(yield c("WAPromiseRaceAbort")(b({mimetype:"image/jpeg",mediaObject:m,mediaType:f,forwardedFromWeb:i,uploadOrigin:h,mediaKeyInfo:g,isViewOnce:l}),k));return b.kind===d("WAWebMediaMmsV4Upload").UploadMediaResultKind.SUCCESS?babelHelpers["extends"]({},b,{filehash:a}):{kind:b.kind}}catch(b){a=b;if(typeof a==="object"&&(b==null?void 0:b.name)===d("WAAbortError").ABORT_ERROR){d("WAWebMediaMmsV4Upload").cancelUploadMedia(m);return{kind:d("WAWebMediaMmsV4Upload").UploadMediaResultKind.CANCELLATION}}}});return o.apply(this,arguments)}});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebMediaFileTooLargeError",["WACustomError","WAWebMiscErrors"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,"File ("+b.type()+") size = "+b.size())||this;c.opaqueData=b;return c}return b}(d("WACustomError").customError("MediaFileTooLarge",!0,d("WAWebMiscErrors").MediaFileError));g["default"]=a}),98);
__d("WAWebWamEnumDocumentType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:1,IMAGE:2,VIDEO:3,AUDIO:4,DOCUMENT:5,COMPRESSED_FILE:6,EXECUTABLE:7,VCARD:8});f.DOCUMENT_TYPE=a}),66);
__d("WAWebSendDocumentWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDocumentType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({SendDocument:[2172,{documentSize:[1,d("WAWebWamCodegenUtils").TYPES.NUMBER],documentType:[2,d("WAWebWamEnumDocumentType").DOCUMENT_TYPE]},[1,1,1],"regular"]},{SendDocument:[]});g.SendDocumentWamEvent=a}),98);
__d("WAWebProcessRawMediaLogging",["WAWebSendDocumentWamEvent","WAWebWamEnumDocumentType"],(function(a,b,c,d,e,f,g){var h=new Map([["ai",(b=d("WAWebWamEnumDocumentType")).DOCUMENT_TYPE.IMAGE],["ico",b.DOCUMENT_TYPE.IMAGE],["jpeg",b.DOCUMENT_TYPE.IMAGE],["jpg",b.DOCUMENT_TYPE.IMAGE],["png",b.DOCUMENT_TYPE.IMAGE],["ps",b.DOCUMENT_TYPE.IMAGE],["psd",b.DOCUMENT_TYPE.IMAGE],["svg",b.DOCUMENT_TYPE.IMAGE],["tif",b.DOCUMENT_TYPE.IMAGE],["tiff",b.DOCUMENT_TYPE.IMAGE],["3g2",b.DOCUMENT_TYPE.VIDEO],["3gp",b.DOCUMENT_TYPE.VIDEO],["avi",b.DOCUMENT_TYPE.VIDEO],["flv",b.DOCUMENT_TYPE.VIDEO],["h264",b.DOCUMENT_TYPE.VIDEO],["m4v",b.DOCUMENT_TYPE.VIDEO],["mkv",b.DOCUMENT_TYPE.VIDEO],["mov",b.DOCUMENT_TYPE.VIDEO],["mp4",b.DOCUMENT_TYPE.VIDEO],["mpg",b.DOCUMENT_TYPE.VIDEO],["mpeg",b.DOCUMENT_TYPE.VIDEO],["rm",b.DOCUMENT_TYPE.VIDEO],["vob",b.DOCUMENT_TYPE.VIDEO],["wmv",b.DOCUMENT_TYPE.AUDIO],["aif",b.DOCUMENT_TYPE.AUDIO],["cda",b.DOCUMENT_TYPE.AUDIO],["mpa",b.DOCUMENT_TYPE.AUDIO],["opus",b.DOCUMENT_TYPE.AUDIO],["ogg",b.DOCUMENT_TYPE.AUDIO],["wlp",b.DOCUMENT_TYPE.AUDIO],["amr",b.DOCUMENT_TYPE.AUDIO],["mp3",b.DOCUMENT_TYPE.AUDIO],["m4a",b.DOCUMENT_TYPE.AUDIO],["aac",b.DOCUMENT_TYPE.AUDIO],["wav",b.DOCUMENT_TYPE.AUDIO],["wma",b.DOCUMENT_TYPE.AUDIO],["pdf",b.DOCUMENT_TYPE.DOCUMENT],["doc",b.DOCUMENT_TYPE.DOCUMENT],["docx",b.DOCUMENT_TYPE.DOCUMENT],["ppt",b.DOCUMENT_TYPE.DOCUMENT],["pptx",b.DOCUMENT_TYPE.DOCUMENT],["xls",b.DOCUMENT_TYPE.DOCUMENT],["xlsx",b.DOCUMENT_TYPE.DOCUMENT],["txt",b.DOCUMENT_TYPE.DOCUMENT],["rtf",b.DOCUMENT_TYPE.DOCUMENT],["tex",b.DOCUMENT_TYPE.DOCUMENT],["csv",b.DOCUMENT_TYPE.DOCUMENT],["wpd",b.DOCUMENT_TYPE.DOCUMENT],["7z",b.DOCUMENT_TYPE.COMPRESSED_FILE],["arj",b.DOCUMENT_TYPE.COMPRESSED_FILE],["deb",b.DOCUMENT_TYPE.COMPRESSED_FILE],["pkg",b.DOCUMENT_TYPE.COMPRESSED_FILE],["rar",b.DOCUMENT_TYPE.COMPRESSED_FILE],["rpm",b.DOCUMENT_TYPE.COMPRESSED_FILE],["gz",b.DOCUMENT_TYPE.COMPRESSED_FILE],["z",b.DOCUMENT_TYPE.COMPRESSED_FILE],["zip",b.DOCUMENT_TYPE.COMPRESSED_FILE],["apk",b.DOCUMENT_TYPE.EXECUTABLE],["bat",b.DOCUMENT_TYPE.EXECUTABLE],["bin",b.DOCUMENT_TYPE.EXECUTABLE],["cgi",b.DOCUMENT_TYPE.EXECUTABLE],["pl",b.DOCUMENT_TYPE.EXECUTABLE],["com",b.DOCUMENT_TYPE.EXECUTABLE],["exe",b.DOCUMENT_TYPE.EXECUTABLE],["gadget",b.DOCUMENT_TYPE.EXECUTABLE],["jar",b.DOCUMENT_TYPE.EXECUTABLE],["msi",b.DOCUMENT_TYPE.EXECUTABLE],["py",b.DOCUMENT_TYPE.EXECUTABLE],["wsf",b.DOCUMENT_TYPE.EXECUTABLE]]);function a(a,b){a=a!=null?(a=h.get(a.split(".").pop()))!=null?a:d("WAWebWamEnumDocumentType").DOCUMENT_TYPE.OTHER:d("WAWebWamEnumDocumentType").DOCUMENT_TYPE.OTHER;b=new(d("WAWebSendDocumentWamEvent").SendDocumentWamEvent)({documentSize:b,documentType:a});b.commit()}g.logSendDocumentEvent=a}),98);
__d("WAWebProcessRawMedia",["Promise","WAWebABProps","WAWebFileUtils","WAWebMediaDataUtils","WAWebMediaFileTooLargeError","WAWebMediaGatingUtils","WAWebMiscErrors","WAWebProcessRawMediaLogging","err"],(function(a,b,c,d,e,f,g){var h;function a(a,e){var f=(h||(h=b("Promise"))).resolve().then(function(){var b,f=a.size(),g;e.asDocument===!0?g=d("WAWebFileUtils").FILETYPE.DOCUMENT:e.asSticker===!0?g=d("WAWebFileUtils").FILETYPE.STICKER:g=d("WAWebFileUtils").typeFromMimetype(a.type());b=(b=e.isVcardOverMmsDocument)!=null?b:!1;var h=d("WAWebMediaGatingUtils").getUploadLimit(g,b);g==="document"&&d("WAWebProcessRawMediaLogging").logSendDocumentEvent(e.filename,f);if(f>h)throw new(c("WAWebMediaFileTooLargeError"))(a);if(f<=0)throw new(d("WAWebMiscErrors").MediaFileEmpty)();var i;e.gifAttribution!=null?i=e.gifAttribution:e.asGif===!0&&(i=0);switch(g){case"image":return d("WAWebMediaDataUtils").processRawImage(a,{maxDimension:(h=e.maxDimension)!=null?h:d("WAWebABProps").getABPropConfigValue("web_image_max_edge"),minDimension:e.minDimension,transparency:e.transparency});case"sticker":return d("WAWebMediaDataUtils").processRawSticker(a);case"video":case"audio":return d("WAWebMediaDataUtils").processRawAudioVideo(a,!!e.isPtt,e.precomputedFields,e.asGif,i,a.type());case"document":return d("WAWebMediaDataUtils").processRawDocument(a,e.filename,b,e.documentPageCount);default:g;throw c("err")("Received unsupported mediaType: "+g)}});a.retain();a.autoreleaseWhenPromiseCompletes(f);return f}g.processRawMedia=a}),98);
__d("WAWebRequestMediaReuploadManager",["Promise","WALogger","WANullthrows","WAWebMiscErrors","WAWebMmsMediaTypes","WAWebMsgGetters","WAWebSendServerErrorReceiptJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["resolveMediaReupload: msgId (",") is not found in _rmrRequests"]);i=function(){return a};return a}a=function(){var a=this;this._rmrRequests=new Map();this.requestMediaReupload=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=e.id.id;if(d("WAWebMsgGetters").getIsNewsletterMsg(e))throw new(d("WAWebMiscErrors").RMRNotSupportedOnNewsletterMessagesError)(d("WAWebMmsMediaTypes").getMsgMediaType(e));var g=a._rmrRequests.get(f);if(g)return c("WANullthrows")(g.request);g=new(h||(h=b("Promise")))(function(b,c){a._rmrRequests.set(f,{resolve:b,reject:c,msg:e})});c("WANullthrows")(a._rmrRequests.get(f)).request=g;yield c("WAWebSendServerErrorReceiptJob")(e);return g});return function(a){return e.apply(this,arguments)}}();this.resolveMediaReupload=function(b){var c=b.msgId,e=b.result;b=b.directPath;var f=a._rmrRequests.get(c);f!=null?(f.resolve({result:e,directPath:b}),a._rmrRequests["delete"](c)):d("WALogger").WARN(i(),c)};this.getMediaKey=function(b){return(b=a._rmrRequests.get(b))==null?void 0:b.msg.mediaKey}};e=new a();g.RequestMediaReuploadManagerImpl=a;g.RequestMediaReuploadManager=e}),98);
__d("WAWebWebpToRgbaWorkerAdapter",["WAWebWebpToRgbaWorkerResource","WorkerBundleResource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.worker=d("WorkerBundleResource").createDedicatedWebWorker(c("WAWebWebpToRgbaWorkerResource")),this.worker.onmessage=a.onMessage,this.worker.onerror=a.onError,this.worker.onmessageerror=a.onMessageError}var b=a.prototype;b.terminate=function(){this.worker.terminate()};b.postMessage=function(a,b){this.worker.postMessage({type:"message",message:a},b)};return a}();g["default"]=a}),98);
__d("WAWebDecodeWebpToRgba",["Promise","WAWebMiscErrors","WAWebWebpToRgbaWorkerAdapter"],(function(a,b,c,d,e,f,g){var h;function a(a){return new(h||(h=b("Promise")))(function(b,e){var f=new(c("WAWebWebpToRgbaWorkerAdapter"))({onError:function(a){f.terminate(),e(new(d("WAWebMiscErrors").DecodeWebpResultsError)("worker error",a))},onMessageError:function(a){f.terminate(),e(new(d("WAWebMiscErrors").DecodeWebpResultsError)("worker message error",a))},onMessage:function(a){f.terminate();a=a.data;b(a)}});f.postMessage({webpBuffer:a},[a])})}g["default"]=a}),98);
__d("WAXMultiSitePdfWorkerResourceControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker/pdf-worker/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WAWebPDFWorkerSrc",["WAXMultiSitePdfWorkerResourceControllerRouteBuilder"],(function(a,b,c,d,e,f,g){function a(){return c("WAXMultiSitePdfWorkerResourceControllerRouteBuilder").buildUri({}).toString()}g.getWorkerSrc=a}),98);
__d("WAWebPDFUtils",["JSResourceForInteraction","Promise","WABackoffUtils","WAPromiseDelays","WAPromiseLoop","WAPromiseProps","WAWebABProps","WAWebCanvasUtils","WAWebConstantsDeprecated","WAWebImageUtils","WAWebMediaOpaqueData","WAWebMiscErrors","WAWebPDFWorkerSrc","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){return d("WAPromiseLoop").promiseLoop(function(a,b,e){var f=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(e,12e4,0,0)),g;c("gkx")("26255")&&(g=process.versions.nw,process.versions.nw="1.0.0");return c("JSResourceForInteraction")("pdfjs-dist").__setRef("WAWebPDFUtils").load().then(function(b){c("gkx")("26255")&&(process.versions.nw=g),b.GlobalWorkerOptions.workerSrc=d("WAWebPDFWorkerSrc").getWorkerSrc(),a({GlobalWorkerOptions:b.GlobalWorkerOptions,getDocument:b.getDocument})})["catch"](function(){return f})})}function a(a){var b=URL.createObjectURL(a);return i().then(function(a){return a.getDocument(b).promise})}function e(a){return a.destroy()}function f(a,e){var f=document.createElement("canvas");return a.getPage(e).then(function(a){var b=a.getViewport({scale:1}),c=f.getContext("2d");f.height=b.height;f.width=b.width;c={canvasContext:c,viewport:b};return a.render(c).promise}).then(function(){var a;return d("WAPromiseProps").promiseProps({blob:d("WAWebCanvasUtils").canvasToBlob(f),thumbnail:(a=d("WAWebImageUtils")).rotateAndResize(f,c("WAWebConstantsDeprecated").DOC_THUMB_MAX_EDGE,a.DATA_URL|a.CANVAS|a.BLOB),microThumbnail:d("WAWebABProps").getABPropConfigValue("upload_document_thumb_mms_enabled")?d("WAWebCanvasUtils").generateMicroThumb(f,1300,{mimetype:"image/jpeg",maxAttempts:10}):(h||(h=b("Promise"))).resolve(null)})}).then(function(a){return a}).then(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=e.blob,g=e.thumbnail;e=e.microThumbnail;g=g.images;var b=g.canvas,h=g.blob;g=g.dataUrl;if(b==null||h==null||g==null)throw new(d("WAWebMiscErrors").MediaFileFailedLoad)();return{url:URL.createObjectURL(f),thumbUrl:g,width:b.width,height:b.height,fullPreviewData:yield c("WAWebMediaOpaqueData").createFromData(h,"image/jpeg"),fullPreviewSize:{width:b.width,height:b.height},pdfPages:a.numPages,microThumbnail:e}});return function(a){return e.apply(this,arguments)}}())}g.fileToPdf=a;g.releasePdf=e;g.pdfToImg=f}),98);
__d("WAWebDocumentUploadEnrichment",["Promise","WALogger","WAPromiseTimeout","WAWebMimeTypes","WAWebPDFUtils","asyncToGeneratorRuntime","cr:5405","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["document preview generation failed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["pdf preview generation failed"]);j=function(){return a};return a}function a(a,c){var e;switch(d("WAWebMimeTypes").previewType(c)){case"pdf":e=k(a);break;case"msoffice":e=l(a);break;default:e=(h||(h=b("Promise"))).resolve()}return d("WAPromiseTimeout").promiseTimeout(e,3e3,"Document enrichment timeout")["catch"](function(){return null})}function k(a){var b;return d("WAWebPDFUtils").fileToPdf(a).then(function(a){b=a;return d("WAWebPDFUtils").pdfToImg(a,1)})["catch"](function(a){d("WALogger").LOG(j()).devConsole(a);return null})["finally"](function(){b&&d("WAWebPDFUtils").releasePdf(b)})}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("gkx")("26255")&&b("cr:5405"))try{yield b("cr:5405").genPreview(a)}catch(a){d("WALogger").LOG(i()).devConsole(a)}});return m.apply(this,arguments)}g.enrich=a;g.enrichPdf=k}),98);
__d("WAWebSendMessageToMediaWorker",["Promise","WALogger","WAWebMediaWorkerResource","WebWorker"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["(via Milan) ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:sendMessageToMediaWorker"]);j=function(){return a};return a}var k=l();function a(a){var c;return new(h||(h=b("Promise")))(function(b,e){d("WALogger").LOG(j()),c=k&&m(k)?l():k,c.setMessageHandler(function(a){try{a.type==="log"?d("WALogger").LOG(i(),a.msg):b(a)}catch(a){e(a)}}).setErrorHandler(function(a){e(new Error("Milan.onerror = "+((a==null?void 0:a.message)?a.message:a)))}).execute(),c.postMessage(a)})["finally"](function(){c&&(c.terminate(),(!k||!k.isCurrentState("constructed"))&&(k=l()))})}function l(){return new(c("WebWorker"))(c("WAWebMediaWorkerResource")).setAllowCrossPageTransition(!0)}function m(a){return a.isCurrentState("preparing")||a.isCurrentState("executing")}g.sendMessageToMediaWorker=a}),98);
__d("WAWebWebcMediaAnalyzedWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcMediaAnalyzed:[912,{webcMediaAnalyzeT:[3,a.TYPES.TIMER],webcMediaExtensions:[2,a.TYPES.STRING],webcMediaSupported:[1,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{WebcMediaAnalyzed:[]});g.WebcMediaAnalyzedWamEvent=b}),98);
__d("WAWebMediaAnalyzer",["WALogger","WAMediaWasmWorkerClient","WAWebMediaGatingUtils","WAWebSendMessageToMediaWorker","WAWebWebcMediaAnalyzedWamEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[processVideoThroughWasm][error] unrecognised error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[processVideoThroughWasm][error] failed to repair video file"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[processVideoThroughWasm][success]"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[processVideoThroughWasm] start process video through wasm"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got error! ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair rejected file (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got parsing error! ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["trouble parsing file "," (fossil ",") ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair approved file"]);p=function(){return a};return a}function a(a,b){var c=new(d("WAWebWebcMediaAnalyzedWamEvent").WebcMediaAnalyzedWamEvent)(),e=!1;b=d("WAWebMediaGatingUtils").shouldUseWasmMediaWorkerForFile(a)?q(a,b):d("WAWebSendMessageToMediaWorker").sendMessageToMediaWorker({type:"prep",file:a,asGif:b}).then(function(a){var b=a.type,c=a.result,f=a.error,g=a.filename;a=a.file;switch(b){case"result":d("WALogger").LOG(p());e=!!c;return c;case"parsingError":d("WALogger").LOG(o(),a,g,String(f));a&&d("WALogger").ERROR(n(),String(f)).sendLogs("media-parsing-error");d("WALogger").LOG(m(),String(f));return void 0}});return b["catch"](function(a){d("WALogger").ERROR(l(),String(a)).sendLogs("media-detection-error");return void 0})["finally"](function(){if(c){var b=void 0;if(a.name){var d=a.name.split(".");d.length>1&&(b=d[d.length-1])}c.set({webcMediaSupported:e,webcMediaExtensions:b});c.markWebcMediaAnalyzeT();c.commit()}})}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(k());a=(yield a.arrayBuffer());a=(yield d("WAMediaWasmWorkerClient").mp4CheckAndRepairInWorker({input:new Uint8Array(a),eventFlow:null}));if(a.success){d("WALogger").LOG(j()).devConsole(a);return{type:"video/mp4",file:new Blob([a.value],{type:"video/mp4"}),isGif:b}}switch(a.error){case"undefined-operation":case"worker-connection-runtime-error":case"worker-connection-timeout":case"invalid-mp4":case"runtime-error":case"internal-error":d("WALogger").WARN(i()).devConsole(a);break;default:a.error;d("WALogger").ERROR(h(),a.error).sendLogs("media-analyzer-unrecognised-error");break}});return r.apply(this,arguments)}g.checkAndRepair=a;g.processVideoThroughWasm=q}),98);
__d("WAWebWamEnumVideoTranscoderAlgorithmType",[],(function(a,b,c,d,e,f){a=Object.freeze({WA_IPHONE:0,FB_IPHONE:1});f.VIDEO_TRANSCODER_ALGORITHM_TYPE=a}),66);
__d("WAWebWamEnumVideoTranscoderResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,SUCCEEDED:1,FAILED:2,CANCELLED:3});f.VIDEO_TRANSCODER_RESULT_TYPE=a}),66);
__d("WAWebWamEnumVideoTranscoderSourceFormatType",[],(function(a,b,c,d,e,f){a=Object.freeze({SLOMO:0,VIDEO:1,GIF:2});f.VIDEO_TRANSCODER_SOURCE_FORMAT_TYPE=a}),66);
__d("WAWebWamEnumVideoTranscoderTargetFormatType",[],(function(a,b,c,d,e,f){a=Object.freeze({IMAGE:0,VIDEO:1,GIF:2});f.VIDEO_TRANSCODER_TARGET_FORMAT_TYPE=a}),66);
__d("WAWebVideoTranscoderWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumVideoTranscoderAlgorithmType","WAWebWamEnumVideoTranscoderResultType","WAWebWamEnumVideoTranscoderSourceFormatType","WAWebWamEnumVideoTranscoderTargetFormatType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({VideoTranscoder:[1802,{sourceAudioBitRate:[12,a.TYPES.NUMBER],sourceDuration:[8,a.TYPES.TIMER],sourceFileSize:[7,a.TYPES.NUMBER],sourceFormat:[14,d("WAWebWamEnumVideoTranscoderSourceFormatType").VIDEO_TRANSCODER_SOURCE_FORMAT_TYPE],sourceFrameRate:[13,a.TYPES.NUMBER],sourceHeight:[10,a.TYPES.NUMBER],sourceVideoBitRate:[11,a.TYPES.NUMBER],sourceWidth:[9,a.TYPES.NUMBER],targetAudioBitRate:[20,a.TYPES.NUMBER],targetDuration:[16,a.TYPES.TIMER],targetFileSize:[15,a.TYPES.NUMBER],targetFormat:[22,d("WAWebWamEnumVideoTranscoderTargetFormatType").VIDEO_TRANSCODER_TARGET_FORMAT_TYPE],targetFrameRate:[21,a.TYPES.NUMBER],targetHeight:[18,a.TYPES.NUMBER],targetVideoBitRate:[19,a.TYPES.NUMBER],targetWidth:[17,a.TYPES.NUMBER],transcoderAlgorithm:[1,d("WAWebWamEnumVideoTranscoderAlgorithmType").VIDEO_TRANSCODER_ALGORITHM_TYPE],transcoderContainsVideocomposition:[5,a.TYPES.BOOLEAN],transcoderHasEdits:[6,a.TYPES.BOOLEAN],transcoderIsPassthrough:[4,a.TYPES.BOOLEAN],transcoderResult:[2,d("WAWebWamEnumVideoTranscoderResultType").VIDEO_TRANSCODER_RESULT_TYPE],transcoderT:[3,a.TYPES.TIMER]},[1,1,1],"regular"]},{VideoTranscoder:[]});g.VideoTranscoderWamEvent=b}),98);
__d("WAWebWaveformUtils",["WAPttComposerScaleWaveform","WAWebNewsletterGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=64;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebNewsletterGatingUtils").isAudioFileWaveformSenderEnabled())return null;a=(yield a.arrayBuffer());var b=new AudioContext({sampleRate:8e3});b=(yield b.decodeAudioData(a));a=j(b,h);return new Uint8Array(a)});return i.apply(this,arguments)}function j(a,b){a=a.getChannelData(0);return l(k(a,b))}function k(a,b){return c("WAPttComposerScaleWaveform")(Array.from(a,Math.abs),b)}function l(a){var b=Math.pow(Math.max.apply(Math,a),-1);a=a.map(function(a){return a*b});return a.map(function(a){return a*100})}g.computeWaveform=a}),98);
__d("WAWebMediaDataUtils",["Promise","WABase64","WAFilteredCatch","WALogger","WANullthrows","WAPromiseCallSync","WAWebABProps","WAWebCanvasUtils","WAWebConstantsDeprecated","WAWebDecodeWebpToRgba","WAWebDocumentUploadEnrichment","WAWebFileUtils","WAWebImageUtils","WAWebMediaAnalyzer","WAWebMediaCleanFileName","WAWebMediaLoad","WAWebMediaOpaqueData","WAWebMediaTypes","WAWebMimeTypes","WAWebMiscErrors","WAWebMiscGatingUtils","WAWebMmsMediaTypes","WAWebNetworkGetResponseIfOnline","WAWebStickerUtils","WAWebURLUtils","WAWebVcardParsingUtils","WAWebVideoTranscoderWamEvent","WAWebWamEnumVideoTranscoderResultType","WAWebWamEnumVideoTranscoderSourceFormatType","WAWebWamEnumVideoTranscoderTargetFormatType","WAWebWaveformUtils","WAWebWebpParseWebp","WAWebXHR","asyncToGeneratorRuntime","err","file-type"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["object type: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRawAudioVideo bad video file ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRawImage: Failed to reach max thumbnail size, preview will be null"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaUtils error: ",""]);n=function(){return a};return a}var o=2e4;function a(a){return J(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){d(a);var e=new Image();yield new(h||(h=b("Promise")))(function(b,d){e.onload=b,e.onabort=function(){d(c("err")("getImageWidthHeight onabort"))},e.onerror=function(){d(c("err")("getImageWidthHeight onerror"))},e.src=a.url()});return{width:e.naturalWidth,height:e.naturalHeight}});return function(a){return d.apply(this,arguments)}}())}function p(a){return new(h||(h=b("Promise")))(function(b,d){var e=new Image(),f=window.URL.createObjectURL(a);e.onload=function(){var a={width:e.naturalWidth,height:e.naturalHeight};window.URL.revokeObjectURL(f);b(a)};e.onabort=function(){window.URL.revokeObjectURL(f),d(c("err")("getImageWidthHeight onabort"))};e.onerror=function(){window.URL.revokeObjectURL(f),d(c("err")("getImageWidthHeight onerror"))};e.src=f})}function q(a){return d("WAWebFileUtils").blobToArrayBuffer(a)["catch"](function(a){d("WALogger").WARN(n(),a).devConsole(a);throw a})}function e(a){return J(function(b){b(a);b=a.getBlob();if(b)return q(b);b=c("WANullthrows")(a.getBase64(),"b64 should be defined");return d("WABase64").decodeB64(b)})}function f(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield q(a));return c("WAWebDecodeWebpToRgba")(a)});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield q(a));return d("WAWebWebpParseWebp").parseWebp(a)});return t.apply(this,arguments)}function u(a){return J(function(b){b(a);return d("WAWebMediaLoad").videoWidthHeightDuration(a.forceToBlob())})}function v(a){return d("WAWebMediaLoad").videoWidthHeightDuration(a)}function w(a,e){return J(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b(a);var f=(yield d("WAWebMediaLoad").transcode(a.forceToBlob(),e).then(function(a){return c("WAWebMediaOpaqueData").createFromData(a,a.type)}));b(f);f.autorelease();return f});return function(a){return f.apply(this,arguments)}}())}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.transparency,e=b.minDimension;b=b.maxDimension;a=(yield d("WAWebImageUtils").rotateAndResize(a,b,d("WAWebImageUtils").BLOB,{transparency:c,minDimension:e}));b=a.width;c=a.height;e=a.images;if(e==null||e.blob==null)throw new(d("WAWebMiscErrors").MediaFileFailedLoad)();return{width:b,height:c,size:e.blob.size}});return y.apply(this,arguments)}function z(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.transparency,f=b.minDimension;b=b.maxDimension;a=a.forceToBlob();a=(yield d("WAWebImageUtils").rotateAndResize(a,b,d("WAWebImageUtils").BLOB|d("WAWebImageUtils").CANVAS,{transparency:e,minDimension:f}));b=a.width;e=a.height;f=a.images;if(f==null||f.canvas==null)throw new(d("WAWebMiscErrors").MediaFileFailedLoad)();a=(yield d("WAWebImageUtils").rotateAndResize(f.canvas,c("WAWebConstantsDeprecated").IMG_THUMB_MAX_EDGE,d("WAWebImageUtils").DATA_URL|d("WAWebImageUtils").CANVAS));a=a.images;if(a==null||a.canvas==null)throw new(d("WAWebMiscErrors").MediaFileFailedLoad)();a=d("WAWebCanvasUtils").getResizedDataUrl(a.canvas,"image/jpeg",o);a=a!=null&&a!==""?c("WAWebURLUtils").parseDataURL(a).data:null;(a==null||a==="")&&d("WALogger").LOG(m());return{type:d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE,mediaBlob:f.blob,mimetype:(f=f.blob)==null?void 0:f.type,fullWidth:b,fullHeight:e,preview:a}});return A.apply(this,arguments)}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.forceToBlob();a=(yield d("WAWebImageUtils").rotateAndResize(a,d("WAWebABProps").getABPropConfigValue("web_image_max_edge"),d("WAWebImageUtils").BLOB,{transparency:!0}));var b=a.width,e=a.height;a=a.images;if(a==null||a.blob==null)throw new(d("WAWebMiscErrors").MediaFileFailedLoad)();a=(yield d("WAWebImageUtils").toWebpSticker(a.blob));var f=(yield c("WAWebMediaOpaqueData").createFromData(a,a.type));return{type:d("WAWebMediaTypes").OUTWARD_TYPES.STICKER,mediaBlob:f,mimetype:a.type,fullWidth:b,fullHeight:e}});return C.apply(this,arguments)}function D(a,b,c,d,e,f){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){h=a.forceToBlob();a=new(d("WAWebVideoTranscoderWamEvent").VideoTranscoderWamEvent)({sourceHeight:e==null?void 0:e.fullHeight,sourceWidth:e==null?void 0:e.fullWidth,sourceDuration:e==null?void 0:e.duration,sourceFileSize:a.size(),sourceFormat:f===!0?d("WAWebWamEnumVideoTranscoderSourceFormatType").VIDEO_TRANSCODER_SOURCE_FORMAT_TYPE.GIF:d("WAWebWamEnumVideoTranscoderSourceFormatType").VIDEO_TRANSCODER_SOURCE_FORMAT_TYPE.VIDEO});a.startTranscoderT();var i=(yield d("WAWebMediaAnalyzer").checkAndRepair(h,!!f));a.markTranscoderT();if(!i){a.set({transcoderResult:d("WAWebWamEnumVideoTranscoderResultType").VIDEO_TRANSCODER_RESULT_TYPE.FAILED});a.commit();d("WALogger").WARN(l(),h.type).devConsole(h);throw new(d("WAWebMiscErrors").InvalidMediaFileType)()}h=i.type;var m=i.file;a.set({targetFileSize:m.size});f=f===!0||i.isGif===!0;switch(d("WAWebFileUtils").typeFromMimetype(h)){case d("WAWebFileUtils").FILETYPE.VIDEO:if(b){a.set({transcoderResult:d("WAWebWamEnumVideoTranscoderResultType").VIDEO_TRANSCODER_RESULT_TYPE.FAILED});a.commit();d("WALogger").ERROR(k()).sendLogs("media-fault: ptt became video");throw new(d("WAWebMiscErrors").InvalidMediaFileType)()}a.set({targetFormat:d("WAWebWamEnumVideoTranscoderTargetFormatType").VIDEO_TRANSCODER_TARGET_FORMAT_TYPE.VIDEO,transcoderResult:d("WAWebWamEnumVideoTranscoderResultType").VIDEO_TRANSCODER_RESULT_TYPE.SUCCEEDED});i={type:d("WAWebMediaTypes").OUTWARD_TYPES.VIDEO,mediaBlob:m,mimetype:h,isGif:f,gifAttribution:f?g||0:void 0};if(e&&e.duration!=null&&e.fullHeight!=null&&e.fullHeight!==0&&e.fullWidth!=null&&e.fullWidth!==0&&e.preview){f=e.duration;a.set({sourceHeight:e.fullHeight,sourceWidth:e.fullWidth,sourceDuration:f});a.commit();return babelHelpers["extends"]({},i,{fullWidth:e.fullWidth,fullHeight:e.fullHeight,preview:e.preview,duration:f.toString()})}g=(yield d("WAWebImageUtils").generateVideoThumbsAndDuration({file:m,maxDimensions:[c("WAWebConstantsDeprecated").IMG_THUMB_MAX_EDGE,c("WAWebConstantsDeprecated").VIDEO_THUMB_MAX_EDGE],debugHint:"processRawAudioVideo"}));f=g.duration;g=g.thumbs;var n=g[0];g=g[1];g=(yield c("WAWebMediaOpaqueData").createFromBase64Jpeg(c("WAWebURLUtils").parseDataURL(g.url).data));a.set({sourceHeight:n.fullHeight,sourceWidth:n.fullWidth,sourceDuration:f});a.commit();return babelHelpers["extends"]({},i,{fullWidth:n.fullWidth,fullHeight:n.fullHeight,preview:c("WAWebURLUtils").parseDataURL(n.url).data,fullPreviewData:g,duration:f.toString()});case d("WAWebFileUtils").FILETYPE.AUDIO:n=(i=e==null?void 0:e.duration)!=null?i:yield d("WAWebFileUtils").getAudioDuration(m);f=(g=e==null?void 0:e.waveform)!=null?g:yield d("WAWebWaveformUtils").computeWaveform(m);return{type:b?d("WAWebMediaTypes").OUTWARD_TYPES.PTT:d("WAWebMediaTypes").OUTWARD_TYPES.AUDIO,mediaBlob:m,mimetype:h,duration:n.toString(),waveform:f};default:a.set({transcoderResult:d("WAWebWamEnumVideoTranscoderResultType").VIDEO_TRANSCODER_RESULT_TYPE.FAILED});a.commit();d("WALogger").ERROR(j()).sendLogs("media-fault: audio/video became other");throw c("err")("audio/video became "+h)}});return E.apply(this,arguments)}function F(a,b){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.type;if(e){if(d("WAWebMimeTypes").DOC_MIMES==="*"||d("WAWebMimeTypes").DOC_MIMES.includes(e))return e;throw new(d("WAWebMiscErrors").InvalidMediaFileType)("disallowed mimetype "+e)}else{e=Math.min(d("WAWebMimeTypes").MIMETYPE_DETERMINING_LENGTH,a.size);e=(yield q(a.slice(0,e)));e=new Uint8Array(e);if(d("WAWebMimeTypes").isMsCompoundFileBinaryFormat(e.subarray(0,8))){var f;return b!=null?(f=d("WAWebFileUtils").getMimeTypeForFilepath(b))!=null?f:d("WAWebMimeTypes").MSCFB_MIME:d("WAWebMimeTypes").MSCFB_MIME}f=c("file-type")(e);if(f==null?void 0:f.mime){e=d("WAWebMimeTypes").isAllowedDocumentMimetype(f.mime,b,!0);if(e)return e}else if(b){f=d("WAWebFileUtils").getMimeTypeForFilepath(b);if(f)return f}throw new(d("WAWebMiscErrors").InvalidMediaFileType)("type: "+String(a.type)+" name: "+String(b))}});return G.apply(this,arguments)}function H(a,b,c,d){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var i;a=a.forceToBlob();e=d("WAWebMediaCleanFileName").cleanFilename(a.name||e||null);var j=(yield F(a,e)),k=f?d("WAWebFileUtils").blobToText(a):null;k=(yield (h||(h=b("Promise"))).all([d("WAWebDocumentUploadEnrichment").enrich(a,j),k]));var l=k[0];k=k[1];i=(i=l==null?void 0:(i=l.microThumbnail)==null?void 0:i.dataUrl)!=null?i:l==null?void 0:l.thumbUrl;i=i?c("WAWebURLUtils").parseDataURL(i).data:null;return{type:d("WAWebMediaTypes").OUTWARD_TYPES.DOCUMENT,mediaBlob:yield c("WAWebMediaOpaqueData").createFromData(a,j),mimetype:j,filename:e||void 0,documentPreview:l,preview:i,fullPreviewData:l==null?void 0:l.fullPreviewData,fullPreviewSize:l?{width:l.width,height:l.height}:null,pageCount:(a=g)!=null?a:l==null?void 0:l.pdfPages,isVcardOverMmsDocument:f,parsedVcards:k?d("WAWebVcardParsingUtils").parseMultiVcard(k):null}});return I.apply(this,arguments)}function J(a){var b=[];function c(a){a.retain(),b.push(a)}return d("WAPromiseCallSync").promiseCallSync(a,null,c)["finally"](function(){for(var a=0;a<b.length;a++)b[a].autorelease()})}function K(a){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield c("WAWebNetworkGetResponseIfOnline")(a,"GET",null,c("WAWebXHR").RESP_TYPE.ARRAY_BUFFER));return!a?(h||(h=b("Promise"))).resolve(null):(h||(h=b("Promise"))).resolve({result:a.response,status:a.status})});return L.apply(this,arguments)}function M(){return!!d("WAWebMediaLoad").canPlayOgg}function N(a,b){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b.retain();var e,f;try{switch(a.type){case d("WAWebMediaTypes").TYPE.VIDEO:case d("WAWebMediaTypes").TYPE.PTV:var g=b.forceToBlob();g=(yield d("WAWebImageUtils").generateVideoThumbsAndDuration({file:g,maxDimensions:[c("WAWebConstantsDeprecated").VIDEO_THUMB_MAX_EDGE],debugHint:"gatherAndSetMetadata"}));var h=g.thumbs;h=h[0];g=g.duration;var j;d("WAWebMiscGatingUtils").isHighQualityVideoThumbnailsEnabled()&&(j=(yield c("WAWebMediaOpaqueData").createFromBase64Jpeg(c("WAWebURLUtils").parseDataURL(h.url).data)));e={mediaBlob:b,renderableUrl:b.url(),fullWidth:h.fullWidth,fullHeight:h.fullHeight,duration:g!==void 0?""+Math.ceil(g):void 0,durationFloat:g,fullPreviewData:j};break;case d("WAWebMediaTypes").TYPE.AUDIO:var k=(yield w(b));k.retain();e={mediaBlob:k,renderableUrl:k.url()};f=function(){return k.autorelease()};break;default:(a.type===d("WAWebMediaTypes").TYPE.IMAGE||a.type===d("WAWebMediaTypes").TYPE.STICKER)&&d("WALogger").ERROR(i(),a.type||"").sendLogs("Entering gatherAndSetMetadata (with OpaqueData) unexpectedly"),e={mediaBlob:b,renderableUrl:b.url()}}a.consolidate(e)}catch(c){if(c instanceof d("WAWebMiscErrors").MediaUnsupportedError)a.consolidate({mediaBlob:b,renderableUrl:b.url()});else throw c}finally{b.autorelease(),f!=null&&f()}});return O.apply(this,arguments)}function P(a,b){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield (h||(h=b("Promise"))).resolve().then(function(){switch(a.type){case d("WAWebMediaTypes").TYPE.VIDEO:case d("WAWebMediaTypes").TYPE.PTV:return v(c).then(function(a){return{fullWidth:a.width,fullHeight:a.height,duration:a.duration!==void 0?""+Math.ceil(a.duration):void 0,durationFloat:a.duration}});case d("WAWebMediaTypes").TYPE.IMAGE:return a.contentInfo.fullHeight!=null&&a.contentInfo.fullWidth!=null&&a.size===c.size?null:p(c).then(function(a){return{fullWidth:a.width,fullHeight:a.height,size:c.size}});case d("WAWebMediaTypes").TYPE.STICKER:return d("WAWebStickerUtils").parseStickerMetadata(c,a);case d("WAWebMediaTypes").TYPE.AUDIO:return{};default:return{}}})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").MediaUnsupportedError,function(b){a.consolidate({});throw b})));if(e==null)return;a.consolidate(e)});return Q.apply(this,arguments)}function R(a){return a===d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PRODUCT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PTT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_IMAGE||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_PTT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_STICKER||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_AUDIO}function S(a){var b=a===d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_IMAGE||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_STICKER;a=a===d("WAWebMmsMediaTypes").MEDIA_TYPES.AUDIO||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_AUDIO||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.DOCUMENT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.GIF||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_GIF||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PPIC||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PRODUCT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PTT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_PTT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.PTV||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_VIDEO||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.TEMPLATE||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_DOCUMENT||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_IMAGE||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_LINK||a===d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_VIDEO;return b||a}function T(a,c){return new(h||(h=b("Promise")))(function(b){var d=new Image();d.setAttribute("crossorigin","anonymous");d.onload=function(){var a=c.map(function(a){var b=a.width,c=a.height,e=a.minWidth,f=a.minHeight,g=a.imageFormat,h=a.imageFormatOptions;a=a.keepAspectRatio;if(e!=null&&d.width<e||f!=null&&d.height<f)return null;e=document.createElement("canvas");f=e.getContext("2d");var i=0,j=0,k;if(d.height>d.width){var l=d.height/d.width;k=b;l=l*b;j=-(l-c)/2}else{var m=d.width/d.height;l=c;k=m*c;i=-(k-b)/2}a?(e.width=k,e.height=l):(e.width=b,e.height=c);f.drawImage(d,i,j,k,l);return{dataUrl:e.toDataURL(g,h).replace("data:image/jpeg;base64,",""),width:e.width,height:e.height}});b(a)};d.src=a})}function U(a){if(!a)return null;if(a.fullPreviewData)return a.fullPreviewData.url();return a.preview instanceof c("WAWebMediaOpaqueData")?a.preview.url():null}g.getImageWidthHeight=a;g.getImageWidthHeightNoOpaque=p;g.opaqueDataToArrayBuffer=e;g.decodeWebpToRGBANoOpaque=f;g.parseWebpNoOpaque=s;g.videoWidthHeightDuration=u;g.getImageMetadata=x;g.processRawImage=z;g.processRawSticker=B;g.processRawAudioVideo=D;g.getRawDocumentMimetype=F;g.processRawDocument=H;g.fetchMedia=K;g.canPlayOgg=M;g.gatherAndSetMetadata=N;g.gatherAndSetMetadataNoOpaque=P;g.shouldUseMediaCache=R;g.shouldUseLruMediaStore=S;g.getResizedThumbData=T;g.getHighestQualityThumbnailUrl=U}),98);
__d("WAWebLruCacheMap",["WALruCache"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=a.sizeLimit;a=a.getSize;this._lruCache=new(d("WALruCache").LruCache)({sizeLimit:b,getSize:(b=a)!=null?b:function(){return 1}})}var b=a.prototype;b.clear=function(){this._lruCache.clear()};b["delete"]=function(a){var b=this.has(a);if(!b)return!1;this._lruCache["delete"](a);return!0};b.get=function(a){return this._lruCache.get(a)};b.has=function(a){return this._lruCache.has(a)};b.set=function(a,b){this._lruCache.put(a,b);return this};babelHelpers.createClass(a,[{key:"size",get:function(){return this._lruCache.getCurrentSize()}}]);return a}();g.LruCacheMap=a}),98);
__d("WAWebInMemoryLottieStickerCache",["WAWebABProps","WAWebLruCacheMap","WAWebMediaMmsV4Download","WAWebStickerErrorWamEvent","WAWebWamEnumStickerErrorType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){c=5e3;var h=new(d("WAWebLruCacheMap").LruCacheMap)({sizeLimit:c});function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebMediaMmsV4Download").extractLottieJSON(b));if(b==null)return null;try{b=JSON.parse(b);if(!j(b))return null;h.set(a,b);return b}catch(a){d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_logging_enabled")&&new(d("WAWebStickerErrorWamEvent").StickerErrorWamEvent)({stickerErrorType:d("WAWebWamEnumStickerErrorType").STICKER_ERROR_TYPE.RECEIVER_VALIDATION}).commit();return null}});return i.apply(this,arguments)}function j(a){var b=["v","ip","op","layers","fr","w","h"];return b.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})}g.InMemoryLottieStickerCache=h;g.extractAndSetLottieJSONInMemoryCache=a}),98);
__d("WAWebMediaInMemoryBlobCache",["WALogger","WALruCache","WAWebMediaStorage","WAWebMediaTypes","err","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["InMemoryMediaBlobCache: Cannot decrease the usageCount to a negative number."]);h=function(){return a};return a}var i=25e7;a=function(){function a(a){var b=this;a===void 0&&(a=i);this.$4=new Set();this.getOrCreateURL=function(a){if(b.$3[a]){b.touch(a);return b.$3[a]}var d=b.get(a);if(!d)throw c("err")("There is no blob matching filehash: "+a+".");d=window.URL.createObjectURL(d);b.$3[a]=d;return d};this.revokeURL=function(a,d){if(!d)return;if(b.$3[a]!==d)throw c("err")("The url provided does not match the filehash.");delete b.$3[a];window.URL.revokeObjectURL(d)};this.$6=c("lodash").throttle(function(){b.$4.forEach(function(a){window.URL.revokeObjectURL(b.$3[a]),delete b.$3[a]}),b.$4.clear()},0,{leading:!1});if(a!=null&&a<0)throw c("err")("Size limit cannot be a negative number.");this.$2={};this.$3={};this.$1=new(d("WALruCache").LruCache)({sizeLimit:a,getSize:function(a){return a.size},onEvict:function(a,c){b.$3[a]&&b.$5(a)===0&&(b.revokeURL(a,b.$3[a]),d("WAWebMediaStorage").getOrCreateMediaObject(a).consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.INIT,progressiveStage:null}))},shouldEvict:function(a,c){return b.$5(a)===0}})}var b=a.prototype;b.get=function(a){return this.$1.get(a)};b.has=function(a){return this.$1.has(a)};b.touch=function(a){this.get(a)};b.put=function(a,b){this.$1.put(a,b)};b["delete"]=function(a){this.$1["delete"](a)};b.clear=function(){var a=this;this.$6.flush();this.$2={};Object.keys(this.$3).forEach(function(b){a.$3[b]&&a.revokeURL(b,a.$3[b])});this.$3={};this.$1.clear()};b.increaseUsageCount=function(a){this.$2[a]=this.$5(a)+1,this.$4["delete"](a)};b.decreaseUsageCount=function(a){var b=this.$5(a);if(b<=0){d("WALogger").ERROR(h()).tags("media-in-memory-blob-cache").sendLogs("media-blob-cache-usage-count-negative-number");return}this.$2[a]=b-1;this.$2[a]===0&&(delete this.$2[a],this.$4.add(a),this.$6())};b.$5=function(a){return this.$2[a]||0};return a}();b=new a();g.InMemoryMediaBlobCacheImpl=a;g.InMemoryMediaBlobCache=b}),98);
__d("WAWebCheckMediaExistence",["WALogger","WAWebMediaMmsV4Download","WAWebMmsMediaTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["checkExistence msg without mediaObject, id: "," type: ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.waitForPhoneUpload();if(!a.mediaObject){d("WALogger").ERROR(h(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: checkExistence msg without mediaObject");return}yield d("WAWebMediaMmsV4Download").checkExistence({mimetype:a.mimetype,mediaObject:a.mediaObject,mediaType:d("WAWebMmsMediaTypes").getMsgMediaType(a)})});return i.apply(this,arguments)}g.checkMediaExistence=a}),98);
__d("WAWebClearMediaForChat",["WAWebMediaStorage"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebMediaStorage").clearMediaForChat(a)}g.clearMediaForChat=a}),98);
__d("WAWebConsolidateMediaUpdate",["WALogger","WAWebMediaCryptoEligibilityUtils","WAWebMediaGetDownloadOriginForMsg","WAWebMediaMmsV4Download","WAWebMediaObject","WAWebMediaOpaqueData","WAWebMediaStorage","WAWebMediaTypes","WAWebMmsMediaTypes","WAWebMsgGetters","WAWebMsgType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["media:msg "," "," filehash"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);i=function(){return a};return a}function j(a){var b={};d("WAWebMediaTypes").MAPPED_MSG_PROPS.forEach(function(c){var e=a[c];c=d("WAWebMediaTypes").MSG_TO_MEDIA[c];b[c]=e});b.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&(b.type=d("WAWebMediaObject").getInteractiveMsgMediaType(a));return b}function a(a,b){if(a.isUnsentPhoneMsg()){a.mediaObject&&d("WALogger").ERROR(i(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: consolidateMediaUpdate unsent message");var e=j(a);if(Object.prototype.hasOwnProperty.call(e,"preview")){var f=e.preview;delete e.preview;f&&c("WAWebMediaOpaqueData").createFromBase64Jpeg(f).then(function(b){(a==null?void 0:a.mediaData)&&a.isUnsentPhoneMsg()&&(a.mediaData.preview=b)})}a.mediaData.set(babelHelpers["extends"]({},e,{mediaStage:d("WAWebMediaTypes").MediaDataStage.REMOTE_NEED_UPLOAD}))}else k(a,a,b)}function k(a,b,e,f){var g=j(b),i=a.mediaObject,k=b.filehash,l=d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMsg(a);if(!i){k?i=d("WAWebMediaStorage").getOrCreateMediaObject(k):i=new(d("WAWebMediaObject").MediaObject)();var m=a.mediaData;m.aspectRatio!==void 0&&(g.aspectRatio=m.aspectRatio);a.mediaObject=i;d("WAWebMediaStorage").associateMediaWithMsg(i,a)}else k&&k!==i.filehash&&(d("WALogger").LOG(h(),a.id.toString(),i.filehash?"changed":"added"),d("WAWebMediaStorage").disassociateMediaFromMsg(i,a),i=d("WAWebMediaStorage").getOrCreateMediaObject(k),a.mediaObject=i,d("WAWebMediaStorage").associateMediaWithMsg(i,a));m=!1;var n=b.deprecatedMms3Url,o=b.mediaKey,p=b.mediaKeyTimestamp,q=b.encFilehash,r=b.type,s=b.streamingSidecar,t=b.firstFrameSidecar,u=b.directPath,v=b.scansSidecar,w=b.scanLengths,x=b.staticUrl;if(n||q||!l){var y;try{y=d("WAWebMmsMediaTypes").msgToMediaType({type:b.type,isGif:b.isGif,interactiveHeader:b.interactiveHeader,isNewsletter:d("WAWebMsgGetters").getIsNewsletterMsg(b)})}catch(a){y=~d("WAWebMmsMediaTypes").MEDIA_TYPE_VALUES.indexOf(r)?r:null}m=l?!i.entries.has({encFilehash:q,deprecatedMms3Url:n}):!i.entries.hasUnencryptedEntry({filehash:k,directPath:u});var z;!m?l&&o!=null&&o!==""?z=i.entries.updateEntry({deprecatedMms3Url:n,mediaKey:o,mediaKeyTimestamp:p,encFilehash:q,type:y,sidecar:s,directPath:u,firstFrameSidecar:t,scansSidecar:v,scanLengths:w,staticUrl:x}):!l&&k!=null&&(z=i.entries.updateUnencryptedEntry({filehash:k,directPath:u})):y!=null&&(q!=null||!l)?l&&o!=null?z=i.entries.addEntry({deprecatedMms3Url:n,mediaKey:o,mediaKeyTimestamp:p,encFilehash:q,type:y,sidecar:s,directPath:u,firstFrameSidecar:t,scansSidecar:v,scanLengths:w,debugHint:"consolidate",staticUrl:x}):!l&&u!=null&&k!=null&&(z=i.entries.addUnencryptedEntry({debugHint:"consolidate",directPath:u,filehash:k,type:y})):m=!1;z||(m=!1);m&&i.downloadStage===d("WAWebMediaTypes").DownloadStage.ERROR_MISSING&&(g.downloadStage=d("WAWebMediaTypes").DownloadStage.INIT)}i.consolidate(g)||i.notifyMsgsAsync();if(m&&i.downloadStage===d("WAWebMediaTypes").DownloadStage.NEED_POKE){var A;try{A=d("WAWebMmsMediaTypes").getMsgMediaType(a)}catch(c){if(!b.type)throw c;A=d("WAWebMmsMediaTypes").msgToMediaType({type:b.type,isGif:a.isGif,isNewsletter:d("WAWebMsgGetters").getIsNewsletterMsg(a)})}d("WAWebMediaMmsV4Download").downloadMedia({mimetype:b.mimetype,mediaObject:i,downloadEvenIfExpensive:!1,mediaType:A,rmrReason:e,downloadOrigin:c("WAWebMediaGetDownloadOriginForMsg")(a),chatWid:f})}}g.consolidateMediaUpdate=a;g.consolidateMediaUpdateWithValues=k}),98);
__d("WAWebDownloadProgressiveJpegThumbnail",["WAAbortError","WALogger","WANullthrows","WAWebDownloadManager","WAWebMediaOpaqueData","WAWebMmsMediaTypes","WAWebSerializeError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadProgressiveJpegThumbnail: error\n",""],["media.downloadProgressiveJpegThumbnail: error\\n",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadProgressiveJpegThumbnail aborted"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadProgressiveJpegThumbnail: success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadProgressiveJpegThumbnail: start"]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msg,e=a.chat,f=a.isPreload;a=a.signal;d("WALogger").LOG(k());try{var g,l=(g=c("WANullthrows"))(b.scanLengths),m=g(b.scansSidecar),n=g(b.mediaObject);g=g(n.filehash);var o=b.encFilehash,p=b.directPath;p=(yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt({directPath:p,encFilehash:o,filehash:g,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp,type:d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE,signal:a||new AbortController().signal,userDownloadAttemptCount:0,progressiveJpegOpts:{mimetype:"image/jpeg",scansSidecar:m,scanLengths:l,scanCount:1},isPreload:f,chatWid:e==null?void 0:e.id}));n.consolidate({fullPreviewData:yield c("WAWebMediaOpaqueData").createFromData(p,"image/jpeg")});d("WALogger").LOG(j())}catch(a){if(a.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(i());return}d("WALogger").WARN(h(),c("WAWebSerializeError")(a)).sendLogs("download-pjpeg-thumbnail-failed")}});return l.apply(this,arguments)}g.downloadProgressiveJpegThumbnail=a}),98);
__d("WAWebDownloadStatusV3Thumbnail",["WAWebDownloadProgressiveJpegThumbnail","WAWebMediaDownloadMmsThumbnail","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msg,e=a.isPreload;a=a.signal;var f=b.encFilehash,g=b.thumbnailSha256,h=b.thumbnailEncSha256,i=b.thumbnailDirectPath;if(b.type===d("WAWebMsgType").MSG_TYPE.IMAGE&&b.scanLengths&&b.scansSidecar&&f){yield d("WAWebDownloadProgressiveJpegThumbnail").downloadProgressiveJpegThumbnail({msg:b,signal:a,isPreload:e});return}if(g&&h&&i){yield c("WAWebMediaDownloadMmsThumbnail")({msg:b,signal:a,isPreload:e,chat:null});return}});return h.apply(this,arguments)}g.downloadStatusV3Thumbnail=a}),98);
__d("WAWebDownloadVideoThumbnail",["WALogger","WANullthrows","WAWebConstantsDeprecated","WAWebDownloadManager","WAWebImageUtils","WAWebMediaCryptoEligibilityUtils","WAWebMediaOpaqueData","WAWebMmsMediaTypes","WAWebMsgGetters","WAWebMsgModelPropUtils","WAWebSerializeError","WAWebURLUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadVideoThumbnail: error\n",""],["media.downloadVideoThumbnail: error\\n",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadVideoThumbnail: black thumbnail was generated, fallback to blurred thumbnail"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadVideoThumbnail: success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["media.downloadVideoThumbnail: start"]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msg;a=a.chat;if(!d("WAWebMsgModelPropUtils").isTrusted(b.unsafe()))return;if(a.isSuspendedOrTerminated())return;var e=b.encFilehash,f=b.filehash,g=b.directPath;if(!f||!g)return;if(d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMsg(b)&&!e)return;var l=b.mediaData,m=l.fullPreviewData,n=l.fullWidth;l=l.fullHeight;if(m&&n!=null&&l!=null)return;d("WALogger").LOG(k());try{m=Math.max(parseInt(b.mediaData.duration,10),1);n={video:{size:b.mediaData.size,duration:m},secondsToDownload:1};l=(yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt({directPath:g,encFilehash:e,filehash:f,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp,type:d("WAWebMsgGetters").getIsNewsletterMsg(b)?d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_VIDEO:d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO,signal:new AbortController().signal,userDownloadAttemptCount:0,partialVideoOpts:n,isPreload:!0,chatWid:a.id}));m=new Blob([l],{type:"video/mp4"});g=(yield d("WAWebImageUtils").generateVideoThumbsAndDuration({file:m,maxDimensions:[c("WAWebConstantsDeprecated").VIDEO_THUMB_MAX_EDGE],debugHint:"downloadVideoThumbnail",throwOnBlack:!0}));e=g.thumbs;f=e[0];n=(yield c("WAWebMediaOpaqueData").createFromBase64Jpeg(c("WAWebURLUtils").parseDataURL(f.url).data));a=c("WANullthrows")(b.mediaObject,"mediaObject cannot be null for thumbnail download");l={fullPreviewData:n,fullWidth:f.fullWidth,fullHeight:f.fullHeight};a.consolidate(l);d("WALogger").LOG(j())}catch(a){if(a instanceof d("WAWebImageUtils").BlackVideoThumbnailError){d("WALogger").LOG(i());return}d("WALogger").WARN(h(),c("WAWebSerializeError")(a)).verbose()}});return l.apply(this,arguments)}g.downloadVideoThumbnail=a}),98);
__d("WAWebManuallySetMedia",["WAWebMediaGetDownloadOriginForMsg","WAWebMediaMmsV4Download","WAWebMediaOpaqueData","WAWebMmsMediaTypes"],(function(a,b,c,d,e,f,g){function a(a){var b=a.msg,e=a.media,f=a.rmrReason,g=a.chatWid,h=b.mediaObject;if(!h)return;c("WAWebMediaOpaqueData").createFromData(e,b.mimetype).then(function(a){d("WAWebMediaMmsV4Download").manuallySetMedia({mimetype:b.mimetype,mediaObject:h,mediaBlob:a,mediaType:d("WAWebMmsMediaTypes").getMsgMediaType(b),rmrReason:f,downloadOrigin:c("WAWebMediaGetDownloadOriginForMsg")(b),chatWid:g})})}g.manuallySetMedia=a}),98);
__d("WAWebMediaCancelDownloadMsg",["WALogger","WAWebMediaMmsV4Download"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);h=function(){return a};return a}function i(a){d("WAWebMediaMmsV4Download").cancelDownloadMedia(a)}function a(a){a.mediaObject?i(a.mediaObject):a.mediaObject||d("WALogger").ERROR(h(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: cancelDownloadMsg msg without mediaObject")}g.cancelDownloadMedia=i;g.cancelDownloadMsg=a}),98);
__d("WAWebMediaCancelUploadMsg",["WALogger","WAWebMediaMmsV4Upload"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);h=function(){return a};return a}function i(a){d("WAWebMediaMmsV4Upload").cancelUploadMedia(a)}function a(a){a.mediaObject?i(a.mediaObject):d("WALogger").ERROR(h(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: cancelUploadMsg msg without mediaObject")}g.cancelUploadMedia=i;g.cancelUploadMsg=a}),98);
__d("WAWebMediaDownloadMsg",["Promise","WALogger","WAWebMediaGetDownloadOriginForMsg","WAWebMediaMmsV4Download","WAWebMmsMediaTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);i=function(){return a};return a}function a(a){var e=a.msg,f=a.isUserClick,g=a.mode,j=a.downloadEvenIfExpensive,k=a.rmrReason,l=a.rmrData,m=a.isAutoDownload,n=a.chatWid,o=e.mediaObject;if(o){a=o.getPendingProcess("fromDisk");return a.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){f&&o.userDownloadAttemptCount++,yield d("WAWebMediaMmsV4Download").downloadMedia({mimetype:e.mimetype,mediaObject:o,downloadEvenIfExpensive:j,mediaType:d("WAWebMmsMediaTypes").getMsgMediaType(e),rmrReason:k,rmrData:l,downloadOrigin:c("WAWebMediaGetDownloadOriginForMsg")(e),isVcardOverMmsDocument:e.isVcardOverMmsDocument,mode:g,isAutoDownload:m,isViewOnce:Boolean(e.isViewOnce),chatWid:n}),o.userDownloadAttemptCount=0}))}d("WALogger").ERROR(i(),e.id.toString(),e.type).devConsole(e).sendLogs("media-fault: downloadMsg msg without mediaObject");return(h||(h=b("Promise"))).resolve()}g.downloadMsg=a}),98);
__d("WAWebForwardMediaWithCaptionsGatingUtils",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){function a(){return c("gkx")("26261")?d("WAWebABProps").getABPropConfigValue("forward_media_with_caption_desktop_beta_rollout"):d("WAWebABProps").getABPropConfigValue("forward_media_with_captions")}function h(){return d("WAWebABProps").getABPropConfigValue("append_message_when_forwarding_media")||c("gkx")("26261")&&d("WAWebABProps").getABPropConfigValue("append_message_when_forwarding_media_desktop_beta")}function b(){return h()&&d("WAWebABProps").getABPropConfigValue("append_message_when_forwarding_media_without_caption")}g.isForwardMediaWithCaptionsEnabled=a;g.isAppendMessageWhenForwardingMediaWithCaptionEnabled=h;g.isAppendMessageWhenForwardingMediaWithoutCaptionEnabled=b}),98);
__d("WAWebWamEnumStickerSendMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:1,PAYMENTS:2});f.STICKER_SEND_MESSAGE_TYPE=a}),66);
__d("WAWebWamEnumStickerSendOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({STICKER_SEARCH:1,FORWARD:2,STICKER_PICKER_TAB_RECENTS:3,STICKER_PICKER_TAB_FAVORITES:4,STICKER_PICKER_TAB_EMOTION:5,STICKER_PICKER_TAB_PACK:6,STICKER_PICKER_TAB_CONTEXTUAL_SUGGESTIONS:7,STICKER_MAKER:8,STICKER_STORE:9,AI_STICKER_CREATE:10,AI_STICKER_CREATE_TRAY:11,AI_STICKER_CREATE_CHAT:12,STATUS_QUICK_REPLY:13,DISCOVERY_PACK:14,STICKER_FROM_DEVICE_KEYBOARD:15});f.STICKER_SEND_ORIGIN_TYPE=a}),66);
__d("WAWebStickerSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumStickerMakerSourceType","WAWebWamEnumStickerSendMessageType","WAWebWamEnumStickerSendOriginType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({StickerSend:[1840,{stickerIsAi:[7,a.TYPES.BOOLEAN],stickerIsAnimated:[3,a.TYPES.BOOLEAN],stickerIsAvatar:[6,a.TYPES.BOOLEAN],stickerIsFirstParty:[2,a.TYPES.BOOLEAN],stickerIsFromStickerMaker:[5,a.TYPES.BOOLEAN],stickerIsGiphy:[10,a.TYPES.BOOLEAN],stickerIsLottie:[9,a.TYPES.BOOLEAN],stickerIsTenor:[11,a.TYPES.BOOLEAN],stickerMakerSourceType:[8,d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE],stickerSendMessageType:[4,d("WAWebWamEnumStickerSendMessageType").STICKER_SEND_MESSAGE_TYPE],stickerSendOrigin:[1,d("WAWebWamEnumStickerSendOriginType").STICKER_SEND_ORIGIN_TYPE]},[1,1,1],"regular"]},{StickerSend:[]});g.StickerSendWamEvent=b}),98);
__d("WAWebMediaForwardMediaMsg",["Promise","WALogger","WAWebABProps","WAWebForwardMediaWithCaptionsGatingUtils","WAWebGetNewsletterContextForForwardedMsg","WAWebMediaOpaqueData","WAWebMediaPrep","WAWebMediaTypes","WAWebMsgGetters","WAWebStickerSendWamEvent","WAWebWamEnumStickerSendOriginType","WAWebWebpMetadata","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Prepping media msg"]);j=function(){return a};return a}function a(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){f===void 0&&(f=!1);g===void 0&&(g=!1);d("WALogger").LOG(j()).devConsole(a);var k=a.mediaObject;if(!k){d("WALogger").ERROR(i(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: forwardMediaMsg msg without mediaObject");return(h||(h=b("Promise"))).reject(c("err")("non initialized media"))}var l=a.mediaData.toJSON();l.preview!=null&&(l.preview=k.contentInfo._preview);l.mediaBlob instanceof c("WAWebMediaOpaqueData")&&l.mediaBlob.retain();k={mimetype:l.mimetype};k=l.isGif?babelHelpers["extends"]({},k,{isGif:!0}):k;l.type===d("WAWebMediaTypes").OUTWARD_TYPES.PTT&&(l.type=d("WAWebMediaTypes").OUTWARD_TYPES.AUDIO);var m={businessOwnerJid:a.businessOwnerJid,productId:a.productId,currencyCode:a.currencyCode,priceAmount1000:a.priceAmount1000,salePriceAmount1000:a.salePriceAmount1000,retailerId:a.retailerId,url:a.url,productImageCount:a.productImageCount,title:a.title,description:a.description},n=l.type===d("WAWebMediaTypes").OUTWARD_TYPES.DOCUMENT&&(a.isFromTemplate||a.isDynamicReplyButtonsMsg);n=n||l.type===d("WAWebMediaTypes").OUTWARD_TYPES.PRODUCT?a.caption:void 0;d("WAWebForwardMediaWithCaptionsGatingUtils").isForwardMediaWithCaptionsEnabled()&&g&&((l.type===d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE||l.type===d("WAWebMediaTypes").OUTWARD_TYPES.VIDEO)&&(n=a.caption));e=(yield new(d("WAWebMediaPrep").MediaPrep)(l.type,(h||(h=b("Promise"))).resolve(l)).sendToChat(e,{forwardedFromWeb:!0,caption:n,mentionedJidList:a.mentionedJidList,groupMentions:a.groupMentions,footer:l.type===d("WAWebMediaTypes").OUTWARD_TYPES.PRODUCT?a.footer:void 0,addEvenWhilePreparing:!0,placeholderProps:k,isForwarded:d("WAWebMsgGetters").getShouldDisplayAsForwarded(a),forwardingScore:a.getForwardingScoreWhenForwarded(),multicast:f,productMsgOptions:m,isAvatar:(g=a.isAvatar)!=null?g:!1,forwardedNewsletterMessageInfo:d("WAWebGetNewsletterContextForForwardedMsg").getNewsletterContextForForwardedMsg(a)}));if(l.type===d("WAWebMediaTypes").OUTWARD_TYPES.STICKER){m={stickerSendOrigin:d("WAWebWamEnumStickerSendOriginType").STICKER_SEND_ORIGIN_TYPE.FORWARD,stickerIsAnimated:Boolean((n=a.mediaData)==null?void 0:n.isAnimated),stickerIsFirstParty:Boolean((k=a.mediaData)==null?void 0:k.isFirstParty),stickerIsFromStickerMaker:Boolean((f=a.mediaData)==null?void 0:f.isFromStickerMaker)};if(d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_logging_enabled")){m=babelHelpers["extends"]({},m,{stickerIsLottie:Boolean((g=a.mediaData)==null?void 0:g.isLottie)})}l=new(d("WAWebStickerSendWamEvent").StickerSendWamEvent)(m);k=d("WAWebWebpMetadata").getStickerMakerSourceType((n=a.mediaData)==null?void 0:n.stickerMakerSourceType);k!=null&&(l.stickerMakerSourceType=k);l.commit()}return e});return k.apply(this,arguments)}g.forwardMediaMsg=a}),98);
__d("WAWebMediaGetDownloadOriginForMsg",["WAWebFrontendMsgGetters","WAWebMsgGetters","WAWebWamEnumDownloadOriginType"],(function(a,b,c,d,e,f,g){function a(a){if(d("WAWebFrontendMsgGetters").getAsProduct(a))return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.PRODUCT_CATALOG;if(d("WAWebMsgGetters").getIsStatusV3(a))return d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.STATUS_USER;if(d("WAWebMsgGetters").getIsGroupMsg(a)){var b;return((b=d("WAWebFrontendMsgGetters").getChat(a))==null?void 0:b.isCAG)?d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.COMMUNITY:d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP}return d("WAWebMsgGetters").getIsNewsletterMsg(a)?d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHANNEL:d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL}g["default"]=a}),98);
__d("WAWebMediaMsgRegistration",["Promise","WALogger","WAWebConsolidateMediaUpdate","WAWebMediaDataUtils","WAWebMediaOpaqueData","WAWebMediaStorage","WAWebMediaTypes","WAWebWamEnumWebcRmrReasonCode"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);i=function(){return a};return a}var j="change:ack "+d("WAWebMediaTypes").MEDIA_MSG_PROPS.map(function(a){return"change:"+a}).join(" ");function k(a){d("WAWebConsolidateMediaUpdate").consolidateMediaUpdate(a,d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MSG_UPDATE)}function a(a){a.off(null,k);var b=a.mediaObject;b&&d("WAWebMediaStorage").disassociateMediaFromMsg(b,a)}function e(a){!a.mimetype&&a.type===d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE&&(a.mimetype="image/jpeg"),!a.mimetype&&a.type===d("WAWebMediaTypes").OUTWARD_TYPES.STICKER&&(a.mimetype="image/webp"),a.on(j,k),d("WAWebConsolidateMediaUpdate").consolidateMediaUpdate(a,d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MSG_INIT)}function f(a,b){a.isUnsentPhoneMsg()&&d("WALogger").ERROR(i(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: registerMsgEarly msg without mediaObject");var c={};for(var e=0;e<d("WAWebMediaTypes").MEDIA_MSG_PROPS.length;e++){var f=d("WAWebMediaTypes").MEDIA_MSG_PROPS[e],g=b[f];c[f]=g!==void 0?g:a[f]}!c.mimetype&&c.type===d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE&&(b.mimetype=c.mimetype="image/jpeg");a.on(j,k);d("WAWebConsolidateMediaUpdate").consolidateMediaUpdateWithValues(a,c,d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MSG_UPDATE);g={};for(f=0;f<d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS.length;f++){e=d("WAWebMediaTypes").MSG_SPECIFIC_FIELDS[f];g[e]=c[d("WAWebMediaTypes").MEDIA_TO_MSG[e]]}a.mediaData.set(g)}function l(a){var e=a.mediaObject;if(e)return e.resolveWhenConsolidated();e=a.mediaData;var f=e.preview;return f instanceof c("WAWebMediaOpaqueData")&&e.aspectRatio===void 0&&(e.fullWidth===void 0||e.fullHeight===void 0)?d("WAWebMediaDataUtils").getImageWidthHeight(f).then(function(b){var c=b.width;b=b.height;if(a.mediaObject)return;a.mediaData.set({aspectRatio:c/b})}):(h||(h=b("Promise"))).resolve()}g.deregisterMsg=a;g.registerMsg=e;g.registerMsgEarly=f;g.prepareMsg=l}),98);
__d("WAWebMediaResumeUploadMsg",["Promise","WALogger","WAWebAck","WAWebFrontendMsgGetters","WAWebMediaEntry","WAWebMediaGetUploadOriginForChat","WAWebMediaInMemoryKeyCache","WAWebMediaMmsV4Upload","WAWebMediaUpdateMsg","WAWebMmsMediaTypes","WAWebMsgGetters","WAWebNewsletterSendMsgAction","WAWebSendMsgChatAction","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);i=function(){return a};return a}function a(a){var e,f=a.mediaObject;if(!f){d("WALogger").ERROR(i(),a.id.toString(),a.type).devConsole(a).sendLogs("media-fault: resumeUploadMsg msg without mediaObject");return(h||(h=b("Promise"))).resolve()}f.userUploadAttemptCount++;var g=f.filehash;e=d("WAWebMediaInMemoryKeyCache").shouldUseMediaKeyCache()&&g!=null?(e=d("WAWebMediaInMemoryKeyCache").MediaKeyCache.get(g))!=null?e:void 0:void 0;a.ack=d("WAWebAck").ACK.CLOCK;var j=d("WAWebMsgGetters").getIsNewsletterMsg(a)?d("WAWebMediaMmsV4Upload").uploadUnencryptedMedia:d("WAWebMediaMmsV4Upload").uploadMedia,k=j({mimetype:a.mimetype,mediaObject:f,mediaKeyInfo:e,mediaType:d("WAWebMmsMediaTypes").getMsgMediaType(a),forwardedFromWeb:Boolean(a.forwardedFromWeb),uploadOrigin:c("WAWebMediaGetUploadOriginForChat")(d("WAWebFrontendMsgGetters").getChat(a)),isViewOnce:Boolean(a.isViewOnce)}).then(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b.mediaEntry;d("WAWebMediaInMemoryKeyCache").shouldUseMediaKeyCache()&&g!=null&&d("WAWebMediaInMemoryKeyCache").MediaKeyCache["delete"](g);if(!b)throw c("err")("upload failed: media entry was not created");f.userUploadAttemptCount=0;var e={deprecatedMms3Url:b.deprecatedMms3Url,directPath:b.directPath,filehash:f.filehash,size:f.size,streamingSidecar:b.sidecar,firstFrameSidecar:b.firstFrameSidecar};b instanceof d("WAWebMediaEntry").EncryptedMediaEntry?(e.mediaKey=b.mediaKey,e.mediaKeyTimestamp=b.mediaKeyTimestamp,e.encFilehash=b.encFilehash):b instanceof d("WAWebMediaEntry").UnencryptedMediaEntry&&(e.mediaHandle=b.handle);yield c("WAWebMediaUpdateMsg")(a,e);return a});return function(a){return e.apply(this,arguments)}}());j=d("WAWebMsgGetters").getIsNewsletterMsg(a)?b("WAWebNewsletterSendMsgAction").sendNewsletterMediaMsg(d("WAWebFrontendMsgGetters").getChat(a),a,function(){return k}):d("WAWebSendMsgChatAction").resendMsgToChat(d("WAWebFrontendMsgGetters").getChat(a),k);return j["catch"](function(){a.ack=d("WAWebAck").ACK.FAILED})}g.resumeUploadMsg=a}),98);
__d("WAWebMediaStickers",["Promise","WAFilteredCatch","WALogger","WAWebDownloadManager","WAWebMediaEntry","WAWebMediaMmsV4Download","WAWebMediaPrep","WAWebMediaStorage","WAWebMediaTypes","WAWebMiscErrors","WAWebMmsMediaTypes","WAWebRecentStickerCollectionMd","WAWebWamEnumDownloadOriginType","WAWebWamEnumWebcRmrReasonCode","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected RMR error for media type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Prepping sticker"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["encFileHash missing from sticker "," but deprecatedMms3Url exists"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected sticker pack with no filehash"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected sticker with no filehash"]);n=function(){return a};return a}var o=125;function p(a){var b={};d("WAWebMediaTypes").MAPPED_STICKER_PROPS.forEach(function(c){var e=a[c];c=d("WAWebMediaTypes").MSG_TO_MEDIA[c];b[c]=e});return b}function q(a){if(!a.filehash){d("WALogger").ERROR(n()).devConsole(a).sendLogs("sticker-filehash-error");return}var b=d("WAWebMediaStorage").getOrCreateMediaObject(a.filehash);d("WAWebMediaStorage").associateMediaWithSticker(b,a);return b}function r(a){if(!a.filehash){d("WALogger").ERROR(m()).devConsole(a).sendLogs("sticker-pack-filehash-error");return}var b=d("WAWebMediaStorage").getOrCreateMediaObject(a.filehash);d("WAWebMediaStorage").associateMediaWithStickerPack(b,a);return b}function s(a,b,e,f){var g=p(a);a.mediaData.set(g);if(!b)return;a.mediaObject=b;var h=a.deprecatedMms3Url,i=a.encFilehash;!c("gkx")("26258")&&!i&&h&&d("WALogger").ERROR(l(),f?"pack tray icon":"").devConsole(a).sendLogs("sticker-"+(f?"icon-":"")+"missing-upload-hash-but-url-exists");if((i||h)&&!b.entries.has({encFilehash:i,deprecatedMms3Url:h})){f=b.entries.addEntry({deprecatedMms3Url:h,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,encFilehash:i,type:e,directPath:a.directPath,debugHint:"setMediaObjectValues"});f&&b.downloadStage===d("WAWebMediaTypes").DownloadStage.ERROR_MISSING&&(g.downloadStage=d("WAWebMediaTypes").DownloadStage.INIT)}b.consolidate(g)}function a(a){s(a,a.mediaObject||q(a),d("WAWebMmsMediaTypes").MEDIA_TYPES.STICKER,!1)}function e(a){var b=a.mediaObject;b&&d("WAWebMediaStorage").disassociateMediaFromSticker(b,a)}function f(a){s(a,a.mediaObject||r(a),d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE,!0)}function t(a){var b=a.mediaObject;b&&d("WAWebMediaStorage").disassociateMediaFromStickerPack(b,a)}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){f===void 0&&(f=!0);if(a.isPlaceholder||a.isCreateButton){a.mediaData.mediaStage=d("WAWebMediaTypes").MediaDataStage.PREPARING;return(h||(h=b("Promise"))).resolve()}var g=a.mediaObject;if(!g)return(h||(h=b("Promise"))).reject(c("err")("media-fault: downloadStickerOrStickerPackIcon sticker/stickerPack without mediaObject"));var j=e==="STICKER"?d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.STICKER_PANEL_STICKER:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.STICKER_PANEL_ICON;e=!1;yield g.getPendingProcess("fromDisk").then(function(){if(!a.filehash||!a.mediaKey||!a.encFilehash){e=!0;return d("WAWebDownloadManager").downloadManager.rmr({mediaObject:g,signal:new AbortController().signal,rmrReason:j})}}).then(function(){return d("WAWebMediaMmsV4Download").downloadMedia({mimetype:a.mimetype,mediaObject:a.mediaObject,downloadEvenIfExpensive:!0,mediaType:d("WAWebMmsMediaTypes").msgToMediaType({type:a.type,isGif:!1,isNewsletter:!1}),rmrReason:j,downloadOrigin:d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE.STICKER_PICKER,shouldThrow:f})})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").RMRNotSupportedOnNewsletterMessagesError,function(b){if(b.mediaType!==d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_STICKER){d("WALogger").ERROR(i(),b.mediaType).devConsole(a,b).sendLogs("failed-to-download-sticker-rmr");throw b}}));var k=g.entries.getDownloadEntry(!0);e&&k instanceof d("WAWebMediaEntry").EncryptedMediaEntry&&b("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.updateStickerMediaData(a.filehash,k)});return v.apply(this,arguments)}function w(a){d("WALogger").LOG(k()).devConsole(a);var e=a.mediaObject,f=a.mediaData.toJSON();f.fullWidth=o;f.fullHeight=o;if(!e){d("WALogger").ERROR(j(),a.id).sendLogs("media-fault: prepSticker sticker without mediaObject");return new(d("WAWebMediaPrep").MediaPrep)(f.type,(h||(h=b("Promise"))).reject(c("err")("non initialized media")))}return new(d("WAWebMediaPrep").MediaPrep)(f.type,(h||(h=b("Promise"))).resolve(f))}g.registerSticker=a;g.deregisterSticker=e;g.registerStickerPackIcon=f;g.deregisterStickerPackIcon=t;g.downloadStickerOrStickerPackIcon=u;g.prepSticker=w}),98);
__d("WAWebPrepRawMedia",["Promise","WALogger","WAWebMediaPrep","WAWebMediaTypes","WAWebProcessRawMedia"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Prepping raw media"]);i=function(){return a};return a}function a(a,c){d("WALogger").LOG(i());var e;c.isPtt===!0?e=d("WAWebMediaTypes").OUTWARD_TYPES.PTT:c.asDocument===!0?e=d("WAWebMediaTypes").OUTWARD_TYPES.DOCUMENT:c.asGif===!0?e=d("WAWebMediaTypes").OUTWARD_TYPES.VIDEO:c.isAudio===!0?e=d("WAWebMediaTypes").OUTWARD_TYPES.AUDIO:c.asSticker===!0?e=d("WAWebMediaTypes").OUTWARD_TYPES.STICKER:e=d("WAWebMediaTypes").OUTWARD_TYPES.UNKNOWN;var f=(h||(h=b("Promise"))).resolve(a).then(function(a){a.autoreleaseWhenPromiseCompletes(f);return d("WAWebProcessRawMedia").processRawMedia(a,c)});return new(d("WAWebMediaPrep").MediaPrep)(e,f)}g.prepRawMedia=a}),98);
__d("WAWebCryptoCalculateFilehash",["WALogger","WAMediaCalculateFilehash","WAWebFileUtils","WAWebMediaDataUtils","WAWebMediaOpaqueData"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashFromBlob error. Debug:\n",""],["calculateFilehashFromBlob error. Debug:\\n",""]);h=function(){return a};return a}function a(a){var b=a instanceof c("WAWebMediaOpaqueData")?d("WAWebMediaDataUtils").opaqueDataToArrayBuffer(a):d("WAWebFileUtils").blobToArrayBuffer(a);return b.then(function(a){return d("WAMediaCalculateFilehash").calculateFilehash(a)})["catch"](function(b){b={error:""+b,blobSize:a.size,isOpaqueData:a instanceof c("WAWebMediaOpaqueData")};d("WALogger").WARN(h(),JSON.stringify(b,null,2)).sendLogs("calculate-filehash-from-blob-error");return void 0})}g.calculateFilehashFromBlob=a}),98);
__d("WACrypto",["Promise","WAArrayBufferUtils","WABase64","WABinary","WACryptoAesCbc","WACryptoHmac","WAErr","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["crypto:macAndDecrypt HMAC don't match "," vs. ",""]);i=function(){return a};return a}function a(a,b,c){return d("WACryptoAesCbc").aesCbcEncrypt(a,new Uint8Array(c)).then(function(a){return d("WACryptoHmac").hmacSha256(b,a).then(function(b){return d("WABinary").Binary.build(b,a).readBuffer()})})}function e(a,e,f){return(h||(h=b("Promise"))).resolve(new Uint8Array(f)).then(function(b){var f=d("WABase64").encodeB64(b.subarray(0,32)),g=b.subarray(32);return d("WACryptoHmac").hmacSha256(e,g).then(function(b){b=d("WABase64").encodeB64(b);if(f!==b){d("WALogger").WARN(i(),f,b);throw c("WAErr")("macAndDecrypt HMAC mismatch")}return d("WACryptoAesCbc").aesCbcDecryptSplit(a,g)})})}function f(a,b){var c=a.slice(-b.byteLength);return d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(c,b)?a.slice(0,a.byteLength-b.byteLength):a}g.encryptAndMac=a;g.macAndDecrypt=e;g.removeEncryptedPadding=f}),98);
__d("WAWebCryptoImageStreamer",["Promise","WAAlignChunkLengthsToMultipleOfAesBlockSize","WAArrayBufferUtils","WAArrayBuffersConcat","WACrypto","WACryptoAesCbc","WACryptoHmac","WACryptoUtils","WACustomError","WALogger","WANullthrows","WAPromiseQueue","WATypedArraysConcat","WAWebMediaInMemoryBlobCache","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer:handleProgress error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer:handleProgress error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer:chunk validation error"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer:chunk validation error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer:handleProgress error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer: [","] handleProgress not ready to decrypt yet, appending and exiting"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer: [","] Generated progressive image using "," chunks of "," total"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["ImageStreamer: [","] Successfully decrypted chunk "," of "," total"]);p=function(){return a};return a}var q=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"Chunk "+a+" does not match sidecar")||this}return a}(d("WACustomError").customError("ChunkValidationError")),r=10,s=16,t=new Uint8Array([2,2]),u=new Uint8Array([255,217]);e=function(){function a(a){this._alignedScanLengths=[];this._increasingScanLengths=[];this._lastDecryptedChunk=0;this._promiseQueue=new(d("WAPromiseQueue").PromiseQueue)();this._downloadedBytes=new ArrayBuffer(0);var b=a.cryptoKeys,c=a.scanLengths,e=a.scansSidecar,f=a.filehash,g=a.mimetype,h=a.debugString;a=a.onProgressiveUpdate;this._cryptoKeys=b;this._scanLengths=c;this._scansSideCar=e;this._filehash=f;this._mimetype=g;this._nextChunkIV=(b=this._cryptoKeys)==null?void 0:b.iv;this._decryptedChunks=new Array(c.length);this._onProgressiveUpdate=a;this._debugString=h}var e=a.prototype;e.setCryptoKeys=function(a){this._cryptoKeys=a,this._nextChunkIV=a.iv};e._validateSidecar=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b===0&&(this._nextChunkIV=e.iv);e=e.macKey;var f=this._scansSideCar.slice(b*r,b*r+r),g=c("WANullthrows")(this._nextChunkIV);this._nextChunkIV=a.slice(0-s);g=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[new Uint8Array(g),new Uint8Array(a)]);a=(yield d("WACryptoHmac").hmacSha256(e,g,r));if(!d("WACryptoUtils").arrayBuffersEqual(a,f))throw new q(b)});function a(b,c,d){return a.apply(this,arguments)}return a}();e._cleanupCipherTextAndIV=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=a;var e=b===0,f=a.byteLength%s===0,g=!f;if(e)e=c.iv;else{b=this._increasingScanLengths[b-1];e=this._downloadedBytes.slice(b-s,b)}g&&(a=a.slice(0,a.byteLength-r));if(f){b=(yield v(a,c));return{cipherText:d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[new Uint8Array(a),new Uint8Array(b)]),iv:e}}return{cipherText:a,iv:e}});function a(b,c,d){return a.apply(this,arguments)}return a}();e._getLastFullyLoadedChunkIndex=function(a){var b=0;for(var c=0;c<this._alignedScanLengths.length;c++){b+=this._alignedScanLengths[c];if(a<b)return c}return this._alignedScanLengths.length};e._handleChunk=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield this._validateSidecar(a,b,c);a=(yield this._cleanupCipherTextAndIV(a,b,c));var e=a.cipherText;a=a.iv;c=(yield d("WACryptoAesCbc").aesCbcDecrypt(c.encKey,a,e));a=(yield d("WACrypto").removeEncryptedPadding(c,t.buffer));d("WALogger").LOG(p(),this._debugString,b+1,this._scanLengths.length).devConsole({filehash:this._filehash});return a});function a(b,c,d){return a.apply(this,arguments)}return a}();e._generateBlobFromFullyLoadedChunks=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield (h||(h=b("Promise"))).all(this._decryptedChunks.slice(0,a))),e=this._scanLengths.slice(0,a).reduce(function(a,b){return a+b},0);c=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,c.map(function(a){return new Uint8Array(a)})).slice(0,e);e=d("WACryptoUtils").arrayBuffersEqual(u.buffer,c.slice(-u.length).buffer)?c:d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[c,u]);c=[e];c=this._mimetype?new Blob(c,{type:this._mimetype}):new Blob(c);var f=x(this._filehash,a);d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.put(f,c);d("WALogger").LOG(o(),this._debugString,a,this._scanLengths.length).devConsole({filehash:this._filehash});this._onProgressiveUpdate==null?void 0:this._onProgressiveUpdate(a);this._lastDecryptedChunk=a;return e.buffer});function a(b){return a.apply(this,arguments)}return a}();e._decryptFullyLoadedChunks=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){for(var e=0;e<c;e++)if(!this._decryptedChunks[e]){var f=e===0?0:this._increasingScanLengths[e-1];f=a.slice(f,f+this._alignedScanLengths[e]);yield (h||(h=b("Promise"))).all(this._decryptedChunks);this._decryptedChunks[e]||(this._decryptedChunks[e]=this._handleChunk(f,e,d))}});function a(b,c,d){return a.apply(this,arguments)}return a}();e.handleProgress=function(a,c){var e=this;return this._promiseQueue.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!e._alignedScanLengths.length){e._alignedScanLengths=d("WAAlignChunkLengthsToMultipleOfAesBlockSize").alignChunkLengthsToMultipleOfAesBlockSize(e._scanLengths,a);for(var b=0;b<e._alignedScanLengths.length;b++){var f=e._alignedScanLengths[b];f=b===0?f:e._increasingScanLengths[b-1]+f;e._increasingScanLengths.push(f)}}f=typeof c==="string"?c.length:c.byteLength+e._downloadedBytes.byteLength;b=e._getLastFullyLoadedChunkIndex(f);f=e._cryptoKeys;if(b<=e._lastDecryptedChunk||f==null){d("WALogger").LOG(n(),e._debugString);e._downloadedBytes=d("WAArrayBuffersConcat").concatArrayBuffers(e._downloadedBytes,typeof c==="string"?yield d("WAArrayBufferUtils").largeStringToArrayBuffer(c.slice(e._downloadedBytes.byteLength)):c);return null}try{var g=typeof c==="string"?yield d("WAArrayBufferUtils").largeStringToArrayBuffer(c.slice(e._downloadedBytes.byteLength)):c;e._downloadedBytes=d("WAArrayBuffersConcat").concatArrayBuffers(e._downloadedBytes,g);yield e._decryptFullyLoadedChunks(e._downloadedBytes,b,f);return yield e._generateBlobFromFullyLoadedChunks(b)}catch(a){d("WALogger").WARN(m(),a.message).devConsole({error:a,filehash:e._filehash,scanLengths:e._scanLengths,scansSidecar:e._scansSideCar,mimetype:e._mimetype});g=a.message+", ["+e._debugString+"]"+("scanLengths length: "+e._scanLengths.length+", scansSidecar byteLength: "+e._scansSideCar.byteLength+".");a instanceof q?(d("WALogger").LOG(l(),g),d("WALogger").ERROR(k()).devConsole(a).tags("non-sad").sendLogs("ImageStreamer:chunk validation error",.001)):(d("WALogger").LOG(j(),g),d("WALogger").ERROR(i()).devConsole(a).sendLogs("ImageStreamer:handleProgress error"))}}))};return a}();function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.encKey;b=(yield d("WACryptoAesCbc").aesCbcEncrypt(b,t,new Uint8Array(a.slice(0-s))));return b.slice(0-s)});return w.apply(this,arguments)}function x(a,b){return a+"-progressive-"+b}function a(a,b){if(b!=null&&Number.isInteger(b)){b=b;while(b>0)d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache["delete"](x(a,b)),b--}d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache["delete"](a)}g.EOI_TAG=u;g.ImageStreamer=e;g.getProgressiveMediaCacheKey=x;g.deleteFromInMemoryMediaBlobCache=a}),98);
__d("WAWebDownloadAndDecryptCache",["WALogger","WAWebMediaDataUtils","WAWebMediaStore","WAWebSerializeError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.asyncCache.set error:\n",""],["downloadManager.asyncCache.set error:\\n",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.asyncCache.get error:\n",""],["downloadManager.asyncCache.get error:\\n",""]);i=function(){return a};return a}function j(a){var b,c;b=(b=a.progressiveJpegOpts)==null?void 0:b.scanCount;c=(c=a.progressiveJpegOpts)==null?void 0:c.scanLengths;if(b!=null&&!!c)return a.filehash+"-"+b+"/"+c.length+"-scans";else if(a.partialVideoOpts){b=a.partialVideoOpts.secondsToDownload;return a.filehash+"-"+b+"-seconds"}return a.filehash}a=function(){function a(){}var e=a.prototype;e.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebMediaDataUtils").shouldUseLruMediaStore(b.type))return null;try{return yield d("WAWebMediaStore").LruMediaStore.get(j(b))}catch(a){d("WALogger").WARN(i(),c("WAWebSerializeError")(a)).verbose();return null}});function e(b,c){return a.apply(this,arguments)}return e}();e.set=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(!d("WAWebMediaDataUtils").shouldUseLruMediaStore(e.type))return;try{yield d("WAWebMediaStore").LruMediaStore.put(j(e),b)}catch(a){d("WALogger").WARN(h(),c("WAWebSerializeError")(a)).verbose()}});function e(b,c,d){return a.apply(this,arguments)}return e}();return a}();g.getLRUStoreKey=j;g.DownloadAndDecryptCache=a}),98);
__d("WAAsyncCache",["WAAbortError","WAMemoizeConcurrent","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f){return c("WAMemoizeConcurrent")(a,function(c){var g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:if(!c.signal.aborted){j.next=2;break}throw new(d("WAAbortError").AbortError)();case 2:g=a(c);j.next=5;return b("regeneratorRuntime").awrap(e.get(g,c));case 5:h=j.sent;if(!c.signal.aborted){j.next=8;break}throw new(d("WAAbortError").AbortError)();case 8:if(!(h!=null)){j.next=10;break}return j.abrupt("return",h);case 10:j.next=12;return b("regeneratorRuntime").awrap(f(c));case 12:i=j.sent;if(!c.signal.aborted){j.next=15;break}throw new(d("WAAbortError").AbortError)();case 15:j.next=17;return b("regeneratorRuntime").awrap(e.set(g,i,c));case 17:return j.abrupt("return",i);case 18:case"end":return j.stop()}},null,this)})}g["default"]=a}),98);
__d("WAWebWamEnumDownloadQualityType",[],(function(a,b,c,d,e,f){a=Object.freeze({NORMAL_QUALITY:1,MID_QUALITY:2,INELIGIBLE_IMAGE_TOO_SMALL:3,INELIGIBLE_PARTIAL_HASHES_NOT_FOUND:4,ERROR_DETERMINING_ELIGIBILITY:5,NOT_DOWNLOADED_ENOUGH_BYTES_TO_DETERMINE_ELIGIBILITY:6});f.DOWNLOAD_QUALITY_TYPE=a}),66);
__d("WAWebMediaDownload2WamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBackendStoreType","WAWebWamEnumConnectionType","WAWebWamEnumDownloadOriginType","WAWebWamEnumDownloadQualityType","WAWebWamEnumHttpProtocolVersionType","WAWebWamEnumMediaDownloadModeType","WAWebWamEnumMediaDownloadResultType","WAWebWamEnumMediaType","WAWebWamEnumNetworkStackType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MediaDownload2:[1590,{clientMessageId:[50,a.TYPES.STRING],connectionType:[31,d("WAWebWamEnumConnectionType").CONNECTION_TYPE],daysSinceReceive:[46,a.TYPES.INTEGER],debugMediaException:[24,a.TYPES.STRING],debugMediaIp:[22,a.TYPES.STRING],debugUrl:[23,a.TYPES.STRING],deviceCount:[49,a.TYPES.INTEGER],downloadBytesTransferred:[20,a.TYPES.NUMBER],downloadConnectT:[15,a.TYPES.TIMER],downloadHttpCode:[18,a.TYPES.INTEGER],downloadIsReuse:[17,a.TYPES.BOOLEAN],downloadIsStreaming:[19,a.TYPES.BOOLEAN],downloadNetworkT:[16,a.TYPES.TIMER],downloadQuality:[37,d("WAWebWamEnumDownloadQualityType").DOWNLOAD_QUALITY_TYPE],downloadResumePoint:[14,a.TYPES.INTEGER],downloadTimeToFirstByteT:[21,a.TYPES.TIMER],estimatedBandwidth:[36,a.TYPES.NUMBER],expressPathBytesSaved:[42,a.TYPES.NUMBER],expressPathTimeSavedMs:[43,a.TYPES.TIMER],fileHeight:[47,a.TYPES.INTEGER],fileWidth:[48,a.TYPES.INTEGER],hasLeveragedExpressPath:[44,a.TYPES.BOOLEAN],httpProtocolVersionType:[45,d("WAWebWamEnumHttpProtocolVersionType").HTTP_PROTOCOL_VERSION_TYPE],isSenderPlatformCapi:[52,a.TYPES.BOOLEAN],isViewOnce:[41,a.TYPES.BOOLEAN],mediaId:[38,a.TYPES.INTEGER],networkStack:[30,d("WAWebWamEnumNetworkStackType").NETWORK_STACK_TYPE],overallAttemptCount:[4,a.TYPES.INTEGER],overallBackendStore:[39,d("WAWebWamEnumBackendStoreType").BACKEND_STORE_TYPE],overallConnBlockFetchT:[10,a.TYPES.TIMER],overallConnectionClass:[29,a.TYPES.STRING],overallCumT:[27,a.TYPES.TIMER],overallCumV2T:[53,a.TYPES.TIMER],overallDecryptT:[12,a.TYPES.TIMER],overallDomain:[5,a.TYPES.STRING],overallDownloadMode:[11,d("WAWebWamEnumMediaDownloadModeType").MEDIA_DOWNLOAD_MODE_TYPE],overallDownloadOrigin:[35,d("WAWebWamEnumDownloadOriginType").DOWNLOAD_ORIGIN_TYPE],overallDownloadResult:[25,d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE],overallFileValidationT:[13,a.TYPES.TIMER],overallIsEncrypted:[28,a.TYPES.BOOLEAN],overallIsFinal:[26,a.TYPES.BOOLEAN],overallMediaSize:[7,a.TYPES.NUMBER],overallMediaType:[1,d("WAWebWamEnumMediaType").MEDIA_TYPE],overallMmsVersion:[6,a.TYPES.INTEGER],overallQueueT:[9,a.TYPES.TIMER],overallRetryCount:[3,a.TYPES.INTEGER],overallT:[8,a.TYPES.TIMER],sleepModeAffected:[51,a.TYPES.BOOLEAN],usedFallbackHint:[40,a.TYPES.STRING]},[1,1,50],"regular"]},{MediaDownload2:[]});g.MediaDownload2WamEvent=b}),98);
__d("WAWebCreateMediaDownloadMetrics",["WATimeUtils","WAWebABProps","WAWebMediaDownload2WamEvent","WAWebMmsDownloadUploadCrashLogger","WAWebMmsMediaTypes","WAWebWamEnumConnectionType","WAWebWamEnumMediaDownloadResultType","WAWebWamEnumNetworkStackType","WAWebWamGroupMetricCache","WAWebWamMediaMetricUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=d("WAWebWamMediaMetricUtils").generateMediaEventId(),e=new(d("WAWebMediaDownload2WamEvent").MediaDownload2WamEvent)({mediaId:c,connectionType:d("WAWebWamEnumConnectionType").CONNECTION_TYPE.HOSTNAME,overallMediaType:d("WAWebWamMediaMetricUtils").getMetricMediaType(a.type),overallMmsVersion:4,networkStack:d("WAWebWamEnumNetworkStackType").NETWORK_STACK_TYPE.NATIVE,overallDownloadMode:d("WAWebWamMediaMetricUtils").getMetricOverallDownloadModeType(a.type,a.downloadMode,a.isPrefetch),overallAttemptCount:a.userDownloadAttemptCount,overallDownloadOrigin:a.downloadOrigin,overallBackendStore:(b=d("WAWebWamMediaMetricUtils").getMetricBackendStore(a.directPath))!=null?b:void 0,isViewOnce:a.isViewOnce});a.type===d("WAWebMmsMediaTypes").MEDIA_TYPES.IMAGE&&d("WAWebABProps").getABPropConfigValue("hqp_log_enabled")&&e.set(babelHelpers["extends"]({},a.imageDimensions));if(d("WAWebABProps").getABPropConfigValue("enable_days_since_receive_logging")&&a.mediaKeyTimestamp!=null){b=a.mediaKeyTimestamp;b=Math.floor((d("WATimeUtils").unixTime()-b)/(24*60*60));e.set({daysSinceReceive:b})}b=a.chatWid;if(b){a=(yield d("WAWebWamGroupMetricCache").getGroupMetrics(b));(a==null?void 0:a.deviceCount)!=null&&e.set({deviceCount:a.deviceCount})}d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(c,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.DOWNLOAD_STARTED);b=function(a){var b=a.hostName,c=a.hostClass;a=a.failCount;e.set({overallDomain:b,overallConnectionClass:c,overallRetryCount:a})};a=function(a){e.set({overallMediaSize:a,overallDownloadResult:d("WAWebWamEnumMediaDownloadResultType").MEDIA_DOWNLOAD_RESULT_TYPE.OK,overallIsFinal:!0,downloadHttpCode:200}),d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(c,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.DOWNLOAD_FINISHED,{overallMediaSize:a})};var f=function(a,b){e.set({overallDownloadResult:d("WAWebWamMediaMetricUtils").getMetricDownloadErrorResultType(a),overallIsFinal:b});b=d("WAWebWamMediaMetricUtils").getStatusCode(a);b!=null&&(e.downloadHttpCode=b);e.markOverallCumT();e.commit();d("WAWebWamMediaMetricUtils").logErrorUnknownDetails(e,a)},g=function(a){e.set({overallT:a})},h=function(a){var b=a.error,c=a.overallT;a=a.failCount;var f=new(d("WAWebMediaDownload2WamEvent").MediaDownload2WamEvent)(e.all);f.set({mediaId:d("WAWebWamMediaMetricUtils").generateMediaEventId(),overallDownloadResult:d("WAWebWamMediaMetricUtils").getMetricDownloadErrorResultType(b),overallIsFinal:!1,overallT:c,overallRetryCount:a});c=d("WAWebWamMediaMetricUtils").getStatusCode(b);c!=null&&(e.downloadHttpCode=c);e.markOverallCumT();f.commit();d("WAWebWamMediaMetricUtils").logErrorUnknownDetails(f,b)},i=function(){e.startOverallDecryptT()},j=function(){e.markOverallDecryptT()},k=function(){e.markOverallCumT(),e.commit()},l=function(){e.startDownloadNetworkT()},m=function(){e.markDownloadNetworkT()};return{mediaId:c,handleDownloadSuccess:a,handleDownloadHostFound:b,handleDownloadError:f,handleDownloadAttemptSuccess:g,handleDownloadAttemptError:h,handleDownloadAndDecryptSuccess:k,markDecryptionEnd:j,markDecryptionStart:i,startNetworkT:l,markNetworkT:m}});return h.apply(this,arguments)}g.createMediaDownloadMetrics=a}),98);
__d("WAWebCryptoDecryptMedia",["Promise","WACryptoAesCbc","WACryptoHmac","WACryptoUtils","WALogger","WAMediaCalculateFilehash","WATypedArraysCast","WATypedArraysConcat","WAWebMiscErrors","WAWebMmsPerformanceExperimentSwitch","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptMedia: [","] error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptMedia: [","] success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptMedia: [","] start"]);k=function(){return a};return a}var l=10;function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.mediaKeys,e=a.ciphertextHmac,f=a.expectedPlaintextHash,g=a.debugString;yield (h||(h=b("Promise"))).resolve();var m={mediaKeys:c};d("WALogger").LOG(k(),g).devConsole(m);if(e.byteLength<l)throw new(d("WAWebMiscErrors").MediaDecryptionError)("ciphertext too short: "+e.byteLength);var n=c.iv,o=c.encKey;a=c.macKey;var p=d("WATypedArraysCast").castTypedArrays(Uint8Array,e);try{return yield d("WACryptoHmac").hmacSha256(a,d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[new Uint8Array(n),d("WAWebMmsPerformanceExperimentSwitch").isPerformanceExperimentEnabled()?p.subarray(0,0-l):p.slice(0,0-l)]),l).then(function(a){var b=p.buffer.slice(0-l);if(!d("WACryptoUtils").arrayBuffersEqual(a,b))throw new(d("WAWebMiscErrors").MediaDecryptionError)("decryptMedia: hmac mismatch");return d("WACryptoAesCbc").aesCbcDecrypt(o,n,p.subarray(0,0-l))}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(f==null)return a;var b=(yield d("WAMediaCalculateFilehash").calculateFilehash(a));if(b!==f)throw new(d("WAWebMiscErrors").MediaDecryptionError)("decryptMedia: plaintext hash mismatch");d("WALogger").LOG(j(),g).devConsole(m);return a});return function(b){return a.apply(this,arguments)}}())}catch(a){d("WALogger").WARN(i(),g).devConsole(m,a);if(a instanceof d("WAWebMiscErrors").MediaDecryptionError)throw a;throw new(d("WAWebMiscErrors").MediaDecryptionError)("decryption error: "+String(a)+"; stack: "+a.stack)}});return m.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebGetMediaDownloadByterange",["WAAlignChunkLengthsToMultipleOfAesBlockSize","WAWebCryptoDecryptPartialMedia"],(function(a,b,c,d,e,f,g){function a(a){var b=a.partialVideoOpts,c=a.progressiveJpegOpts;a=a.scanCount;if(c&&a!=null)return{start:0,end:d("WAAlignChunkLengthsToMultipleOfAesBlockSize").alignChunkLengthsToMultipleOfAesBlockSize(c.scanLengths).slice(0,a).reduce(function(a,b){return a+b},0)};if(b){c=b.video;a=c.size;c=c.duration;b=b.secondsToDownload;a=a*b/c;b=128*1024;c=Math.max(a,b);a=Math.ceil(c/d("WAWebCryptoDecryptPartialMedia").BLOCK_SIZE);return{start:0,end:a*d("WAWebCryptoDecryptPartialMedia").BLOCK_SIZE-1}}return null}g["default"]=a}),98);
__d("WAWebNetworkType",[],(function(a,b,c,d,e,f){function a(){return navigator.connection&&typeof navigator.connection.effectiveType==="string"?navigator.connection.effectiveType:null}f.getEffectiveNetworkType=a}),66);
__d("WAWebValidateMediaFilehash",["WAMediaCalculateFilehash","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAMediaCalculateFilehash").calculateFilehash(a));return b===a});return h.apply(this,arguments)}g.validateFileash=a}),98);
__d("WAWebWamEnumWebcChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({INDIVIDUAL:0,GROUP:1,BROADCAST_LIST:2,COMMUNITY:3,NEWSLETTER:4});f.WEBC_CHAT_TYPE=a}),66);
__d("WAWebWebcMediaRmrWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumWebcChatType","WAWebWamEnumWebcRmrReasonCode"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcMediaRmr:[1906,{messageMediaType:[10,d("WAWebWamEnumMediaType").MEDIA_TYPE],webcBrowserNetworkType:[2,a.TYPES.STRING],webcBrowserStorageQuotaBytes:[11,a.TYPES.INTEGER],webcBrowserStorageQuotaUsedBytes:[12,a.TYPES.INTEGER],webcChatPosition:[1,a.TYPES.INTEGER],webcChatType:[9,d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE],webcMediaRmrError:[8,a.TYPES.BOOLEAN],webcMediaRmrT:[6,a.TYPES.TIMER],webcMediaSize:[7,a.TYPES.INTEGER],webcMessageIndex:[3,a.TYPES.INTEGER],webcMessageT:[5,a.TYPES.TIMER],webcRmrReason:[14,d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE],webcRmrStatusCode:[13,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcMediaRmr:[]});g.WebcMediaRmrWamEvent=b}),98);
__d("WAWebDownloadManager",["Promise","WAAsyncCache","WAConcurrentPriorityPromiseQueue","WALogger","WAMemoizeConcurrent","WANullthrows","WAWebBackendErrors","WAWebCreateMediaDownloadMetrics","WAWebCryptoCreateMediaKeys","WAWebCryptoDecryptMedia","WAWebCryptoDecryptPartialMedia","WAWebCryptoImageStreamer","WAWebDownloadAndDecryptCache","WAWebDownloadManagerErrors","WAWebFrontendMsgGetters","WAWebGetMediaDownloadByterange","WAWebMediaCryptoEligibilityUtils","WAWebMediaDebugString","WAWebMediaObject","WAWebMediaTypes","WAWebMiscErrors","WAWebMmsClient","WAWebMmsClientErrors","WAWebMmsDownloadUploadCrashLogger","WAWebMmsMediaTypes","WAWebNetworkType","WAWebSerializeError","WAWebValidateMediaFilehash","WAWebWebcMediaRmrWamEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.rmr: [","] error ","\n",""],["downloadManager.rmr: [","] error ","\\n",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.rmr: [","] error MediaNotOnPhone\n",""],["downloadManager.rmr: [","] error MediaNotOnPhone\\n",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.rmr: [","] error RMRNotSupportedOnNewsletterMessagesError","\n",""],["downloadManager.rmr: [","] error RMRNotSupportedOnNewsletterMessagesError","\\n",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.rmr: [","] status ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.rmr: [","] start"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.download: [","] error\n",""],["downloadManager.download: [","] error\\n",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.download: [","] expected error\n",""],["downloadManager.download: [","] expected error\\n",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.download: [","] success"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadManager.download: [","] start"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DownloadManager] expected encFilehash for media type ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DownloadManager] expected media key for media type ",""]);s=function(){return a};return a}var t={PRELOAD_MMS_MEDIA:1,PRELOAD_MMS_THUMBNAIL:2},u=function(a){switch(a){case d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_DOCUMENT:return t.PRELOAD_MMS_THUMBNAIL;case d("WAWebMmsMediaTypes").MEDIA_TYPES.HISTORY_SYNC:case d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO:default:return t.PRELOAD_MMS_MEDIA}};a=function(){var a=this;this.preloader=new(c("WAConcurrentPriorityPromiseQueue"))(10,{thumbnail:4,histSyncChunk:3});this.downloadAndMaybeDecrypt=c("WAAsyncCache")(function(a){return d("WAWebDownloadAndDecryptCache").getLRUStoreKey(a)},new(d("WAWebDownloadAndDecryptCache").DownloadAndDecryptCache)(),function(b){return b.isPreload===!0?a.preloader.enqueue(function(){return v(b)},{priority:-u(b.type),group:b.type===d("WAWebMmsMediaTypes").MEDIA_TYPES.HISTORY_SYNC?"histSyncChunk":"thumbnail",signal:b.signal}):v(b)});this.rmr=c("WAMemoizeConcurrent")(function(a){return a.mediaObject.filehash||""},x);this.checkExistence=c("WAMemoizeConcurrent")(function(a){return a.encFilehash},z);d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.init()};function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.directPath,f=a.encFilehash,g=a.filehash,i=a.mediaKey,j=a.mediaKeyTimestamp,k=a.onDecryptStart,l=a.downloadOrigin,m=a.staticUrl,t=a.type,u=a.mode,v=a.progressiveJpegOpts,w=a.partialVideoOpts,x=a.onProgress,y=a.userDownloadAttemptCount,z=a.isViewOnce,A=a.imageDimensions,C=a.chatWid,D=d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMediaType(t);if(i==null&&D){d("WALogger").ERROR(s(),t).tags("media").sendLogs("missing-media-key-for-media-type-"+t);throw new(d("WAWebMiscErrors").MediaDecryptionError)("decryptMedia: missing key for type "+t)}if(f==null&&D){d("WALogger").ERROR(r(),t).tags("media").sendLogs("missing-encfilehash-for-media-type-"+t);throw new(d("WAWebMiscErrors").MediaDecryptionError)("decryptMedia: missing encFilehash for type "+t)}var E=v==null?void 0:v.scanCount,F=v!=null&&(v.scanCount==null||v.scanCount===v.scanLengths.length);E=F?null:E;l=(yield d("WAWebCreateMediaDownloadMetrics").createMediaDownloadMetrics({directPath:e,downloadOrigin:l,type:t,userDownloadAttemptCount:y,isViewOnce:z,downloadMode:u,isPrefetch:v!=null&&!F,imageDimensions:A,chatWid:C,mediaKeyTimestamp:j}));y=l.handleDownloadSuccess;var G=l.handleDownloadHostFound;z=l.handleDownloadError;var H=l.handleDownloadAttemptSuccess,I=l.handleDownloadAttemptError;F=l.handleDownloadAndDecryptSuccess;A=l.markDecryptionStart;C=l.markDecryptionEnd;var J=l.startNetworkT,K=l.markNetworkT;j=l.mediaId;var L=a.signal||new AbortController().signal,M=d("WAWebMediaDebugString").getDebugString(g);l={directPath:e,encFilehash:f,staticUrl:m,type:t};d("WALogger").LOG(q(),M).devConsole(l);try{var N=B({progressiveJpegOpts:v,filehash:g,debugString:M}),O=function(a){I(a),N!=null&&(N=B({progressiveJpegOpts:v,filehash:g,debugString:M}))},P=c("WAWebGetMediaDownloadByterange")({partialVideoOpts:w,progressiveJpegOpts:v,scanCount:E}),Q=E==null&&v?function(a,b){var c;void ((c=N)==null?void 0:c.handleProgress(a.total,b))}:null;i=D&&i!=null?c("WAWebCryptoCreateMediaKeys")(t,i).then(function(a){var b;(b=N)==null?void 0:b.setCryptoKeys(a);return a}):(h||(h=b("Promise"))).resolve(null);i=(yield (h||(h=b("Promise"))).all([i,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){J();try{return yield c("WAWebMmsClient").download({directPath:e,filehash:D?c("WANullthrows")(f):g,staticUrl:m,type:t,signal:L,mode:u,byteRange:P,onData:Q,onDownloadHostFound:G,onDownloadAttemptSuccess:H,onDownloadAttemptError:O,debugString:M,onProgress:x})}finally{K()}})()]));var R=i[0];i=i[1];y(i.byteLength);y=i;if(R!=null){d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(j,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.DOWNLOAD_DECRYPTION_STARTED);k==null?void 0:k();A();if(E!=null&&P!=null){k=P.end-P.start;return c("WANullthrows")(yield (A=N)==null?void 0:A.handleProgress(k,i))}else w?y=(yield d("WAWebCryptoDecryptPartialMedia").decryptPartialMedia({mediaKeys:R,ciphertext:i})):y=(yield c("WAWebCryptoDecryptMedia")({mediaKeys:R,ciphertextHmac:i,expectedPlaintextHash:g,debugString:M}));C();d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(j,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.DOWNLOAD_DECRYPTION_FINISHED)}else{E=w==null;if(E){A=(yield d("WAWebValidateMediaFilehash").validateFileash(y,g));if(!A)throw new(d("WAWebMiscErrors").MediaHashMismatch)()}}d("WALogger").LOG(p(),M).devConsole(l,y);F();return y}catch(b){b instanceof d("WAWebMmsClientErrors").MediaNotFoundError?(z(b,Boolean(a.isFinalRmrRetry)),d("WALogger").LOG(o(),M,c("WAWebSerializeError")(b)).verbose().devConsole(l)):(z(b,!0),d("WALogger").WARN(n(),M,c("WAWebSerializeError")(b)).verbose().devConsole(l));d("WAWebMmsDownloadUploadCrashLogger").downloadUploadCrashLogger.mark(j,d("WAWebMmsDownloadUploadCrashLogger").ProgressType.DOWNLOAD_ERROR);throw b}});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.mediaObject,e=d("WAWebMediaDebugString").getDebugString(b.filehash),f={filehash:b.filehash,type:b.type};d("WALogger").LOG(m(),e).devConsole(f);b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.REUPLOADING});var g=self.performance.now(),h=new(d("WAWebWebcMediaRmrWamEvent").WebcMediaRmrWamEvent)(babelHelpers["extends"]({},a.rmrData,{webcRmrReason:a.rmrReason}));a=d("WAWebNetworkType").getEffectiveNetworkType();a!=null&&(h.webcBrowserNetworkType=a);b.type&&(h.messageMediaType=d("WAWebMediaObject").webMediaTypeToWamMediaType(b.type));b.size!=null&&(h.webcMediaSize=b.size);function n(a){var b=d("WAWebFrontendMsgGetters").getMaybeChat(a);h.webcChatType==null&&b&&(h.webcChatType=b.getWebcChatType());h.webcMessageT==null&&(h.webcMessageT=a.t);h.messageMediaType=a.getWamMediaType()}try{a=(yield b.rmr({onMsgSelect:n}));h.webcRmrStatusCode=a;d("WALogger").LOG(l(),e,a).devConsole(f);if(a===404)throw new(d("WAWebDownloadManagerErrors").MediaNotOnPhone)();if(a!==200)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a)}catch(a){h.webcMediaRmrError=!0;if(a instanceof d("WAWebMiscErrors").RMRNotSupportedOnNewsletterMessagesError){a.mediaType===d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_STICKER?b.consolidate({downloadStage:d("WAWebMediaTypes").DownloadStage.RESOLVED}):d("WALogger").WARN(k(),e,a.message,a.stack).verbose().devConsole(f);throw a}else if(a instanceof d("WAWebDownloadManagerErrors").MediaNotOnPhone){d("WALogger").LOG(j(),e,c("WAWebSerializeError")(a)).verbose().devConsole(f);throw a}else{d("WALogger").WARN(i(),e,a.status||a.message,a.stack).verbose().devConsole(f);throw new(d("WAWebMiscErrors").MediaNeedsReupload)()}}finally{h.webcMediaRmrT=Math.ceil(self.performance.now()-g),h.commit()}});return y.apply(this,arguments)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.directPath,d=a.encFilehash,e=a.signal;a=a.type;yield c("WAWebMmsClient").checkExistence({directPath:b,encFilehash:d,type:a,signal:e||new AbortController().signal})});return A.apply(this,arguments)}function B(a){var b=a.progressiveJpegOpts,c=a.filehash;a=a.debugString;return b==null?null:new(d("WAWebCryptoImageStreamer").ImageStreamer)({scanLengths:b.scanLengths,scansSidecar:b.scansSidecar,mimetype:b.mimetype,filehash:c,debugString:a,onProgressiveUpdate:b.onProgressiveUpdate})}e=new a();g.downloadManager=e}),98);
__d("WAWebBaseCachePolicy",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a={LOAD:"LOAD",NONE:"NONE"};b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.collection=b;d.id=c;return d}var c=b.prototype;c.enableCaching=function(){};c.disableCaching=function(){};return b}(c("WAWebEventEmitter"));b.policy=a.NONE;g.CACHE_POLICY=a;g.BaseCachePolicy=b}),98);
__d("WAWebLoadCachePolicy",["WAWebBaseCachePolicy","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){b=a.call(this,b,d.id)||this;b.$LoadCachePolicy2=d.trigger||"all";b.$LoadCachePolicy1=d.delay;b.$LoadCachePolicy3=c("lodash").debounce(b.saveToCache,b.$LoadCachePolicy1);return b}var d=b.prototype;d.saveToCache=function(){this.collection.saveToCache()};d.enableCaching=function(){this.listenTo(this.collection,this.$LoadCachePolicy2,this.$LoadCachePolicy3)};d.disableCaching=function(){this.stopListening(this.collection,this.$LoadCachePolicy2,this.$LoadCachePolicy3)};return b}(d("WAWebBaseCachePolicy").BaseCachePolicy);a.policy=d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD;g["default"]=a}),98);
__d("WAWebNoCachePolicy",["WAWebBaseCachePolicy"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){return a.call(this,b,c.id)||this}return b}(d("WAWebBaseCachePolicy").BaseCachePolicy);a.policy=d("WAWebBaseCachePolicy").CACHE_POLICY.NONE;g["default"]=a}),98);
__d("WAWebCachePolicies",["WAWebLoadCachePolicy","WAWebNoCachePolicy"],(function(a,b,c,d,e,f,g){function a(a,b){switch(b.policy){case"LOAD":return new(c("WAWebLoadCachePolicy"))(a,b);case"NONE":return new(c("WAWebNoCachePolicy"))(a,b)}return new(c("WAWebNoCachePolicy"))(a,{id:"none",policy:"NONE"})}g.createCachePolicy=a}),98);
__d("WAArrayMove",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b,c){c=c<0?a.length+c:c;b=a.splice(b,1)[0];a.splice(c,0,b)};a=function(a,b,c){a=a.slice();g(a,b,c);return a};f.arrayMoveMutate=g;f.arrayMove=a}),66);
__d("WAWebCollectionInternalUtils",["$InternalEnum"],(function(a,b,c,d,e,f){var g=b("$InternalEnum").Mirrored(["Aggregate"]),h=function(a){return a!=null&&typeof a==="function"&&"kind"in a&&g.isValid(a.kind)?a:null},i=[];function a(a){var b,c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d];e=h(a[e]);if(e)switch(e.kind){case g.Aggregate:b||(b=[]);b.push(e);break}}return{aggregate:(e=b)!=null?e:i}}f.CollectionMethodKind=g;f.getValidCollectionMethod=h;f.EMPTY_AGGREGATORS=i;f.groupMethodsByKind=a}),66);
__d("WAWebCollection",["WAArrayMove","WALogger","WAWebCollectionInternalUtils","WAWebEventEmitter","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["collection:_prepareModel for model "," exception: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["no model with id ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["collection:set model has no id"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["collection:set called with no models"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){d===void 0&&(d={});b=a.call(this)||this;d.parent&&(b.parent=d.parent);d=b.constructor;var e=d.model;d=d.comparator;if(!e)throw c("err")("Collection initialized without model. It is likely that you have a circular dependency. Set a breakpoint to find it and use inline `require` instead of `import` to avoid it.");b.modelClass=e;d&&(b._comparator=d);b._reset();var f=babelHelpers.assertThisInitialized(b);Object.defineProperty(babelHelpers.assertThisInitialized(b),"length",{get:function(){return f._models.length}});return b}var e=b.prototype;e.add=function(a,b){var c;Array.isArray(a)?c=a.slice():c=a?[a]:[];return this.set(c,babelHelpers["extends"]({merge:!1,add:!0,remove:!1},b))};e.set=function(a,b){var c=this;if(!a){d("WALogger").WARN(l());return[]}var e=babelHelpers["extends"]({add:!0,remove:!0,merge:!0},b),f,g,h,i;b=this._comparator&&e.sort!==!1;var j=[],m=[],n={},o=e.add,p=e.merge,q=e.remove,r=e.at!=null?e.at:void 0,s=!b&&o===!0&&q===!0?[]:null;for(var t=0,u=a.length;t<u;t++){i=a[t];this.isModel(i)&&(g=i);f=i.id;if(!f){d("WALogger").WARN(k());continue}h=this.get(f);if(h)(function(){var b=h;q===!0&&(n[h.id.toString()]=!0);p===!0&&(i=g&&i===g?g.attributes:i,b.set(i,e),c._getAggregators().forEach(function(a){a.add([b])}));a[t]=b})();else if(o===!0){g=a[t]=this._prepareModel(i,e);if(g){f=g;j.push(f);this._addReference(f)}else continue}g=h||g;if(!g)continue;f=g;s&&(!g.id||!n[g.id.toString()])&&s.push(f);n[f.id.toString()]=!0}if(q===!0){for(f=0,o=this.length;f<o;f++){g=this._models[f];u=g;n[g.id.toString()]||m.push(u)}m.length&&this.remove(m,babelHelpers["extends"]({},e))}var v;if(j.length||Boolean(s==null?void 0:s.length)){b&&(v=!0);if(typeof r==="number"){(u=this._models).splice.apply(u,[r,0].concat(j))}else{f=s||j;for(o=0,m=f.length;o<m;o++)this._models.push(f[o])}this._getAggregators().forEach(function(a){a.add(j)})}v&&this.sort({silent:!0});if(!e.silent){for(b=0,u=j.length;b<u;b++)g=j[b],g.trigger?g.trigger("add",g,this,e):this.trigger("add",g,this,e);(v||Boolean(s==null?void 0:s.length))&&this.trigger("sort",this,e)}return a};e.remove=function(a,b){b===void 0&&(b={});var c,d;a=Array.isArray(a)?a.slice():[a];var e=[];for(var f=0,g=a.length;f<g;f++){d=a[f];if(!d)continue;d=d instanceof this.modelClass?d.id:d;d=e[f]=this.get(d);if(d){var h=d;this._deIndex(d);c=this._models.indexOf(d);this._models.splice(c,1);b.silent||(b.index=c,h.trigger?h.trigger("remove",d,this,b):this.trigger("remove",d,this,b));this._removeReference(h)}}this._getAggregators().forEach(function(a){a.remove(e)});return e};e.reset=function(){for(var a=0,b=this._models.length;a<b;a++)this._removeReference(this._models[a]);this._reset();this.trigger("reset",this)};e.sort=function(a){a===void 0&&(a={});if(!this._comparator)throw c("err")("Cannot sort without comparator");this._models.sort(this._comparator.bind(this));a.silent||this.trigger("sort",this,a);return this};e.replaceId=function(a,b){var c=this.get(a);if(!c)return;this._removeFromIndex(a);c.set({id:b});this._addIndex(c)};e.reorderMutate=function(a,b){d("WAArrayMove").arrayMoveMutate(this._models,a,b)};e.get=function(a){return this._index[a]};e.assertGet=function(a){var b=this._index[a];if(!b)if(c("gkx")("26258"))d("WALogger").ERROR(j()).sendLogs("Collection:assertGet no result");else{var e=this.constructor.name+":assertGet";d("WALogger").ERROR(i(),String(a)).sendLogs(e)}return b};e.at=function(a){return this._models[a]};e.serialize=function(){return this.map(function(a){return a.toJSON()})};e.toJSON=function(){return this.serialize()};e.isModel=function(a){return a instanceof this.modelClass};e.includes=function(a,b){b===void 0&&(b=0);return b===0?!(a instanceof this.modelClass)?!1:this.get(a.id)!=null:this._models.includes(a,b)};e.indexOf=function(a,b){return this._models.indexOf(a,b)};e.lastIndexOf=function(a,b){return this._models.lastIndexOf(a,b)};e.every=function(a){return this._models.every(a)};e.some=function(a){return this._models.some(a)};e.forEach=function(a){this._models.forEach(a)};e.map=function(a){return this._models.map(a)};e.filter=function(a){return this._models.filter(a)};e.findFirst=function(a){return this._models.find(a)};e.reduce=function(a,b){return this._models.reduce(a,b)};e.slice=function(a,b){return this._models.slice(a,b)};e.where=function(a){return this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})};e.head=function(){return this._models[0]};e.last=function(){return this._models[this._models.length-1]};e.toArray=function(){return this._models.slice()};e.getModelsArray=function(){return this._models};e.reorder=function(a,b){return d("WAArrayMove").arrayMove(this._models,a,b)};e._reset=function(){this._models=[],this._index={},this._getAggregators(!1).forEach(function(a){a.reset()})};e._prepareModel=function(a,b){if(this.isModel(a)){a.collection||(a.collection=this);return a}b=babelHelpers["extends"]({},b,{collection:this});try{return new this.modelClass(a,b)}catch(c){d("WALogger").ERROR(h(),(b=this==null?void 0:(a=this.modelClass)==null?void 0:a.name)!=null?b:"",c.stack).sendLogs("collection-model-creation-error");return void 0}};e._addReference=function(a){this._addIndex(a),a.collection||(a.collection=this),a.on&&a.on("all",this._handleModelEvent,this)};e._removeReference=function(a){this===a.collection&&delete a.collection,this._deIndex(a),a.off&&a.off("all",this._handleModelEvent,this)};e._addIndex=function(a){this._index[a.id]=a};e._deIndex=function(a){delete this._index[a.id]};e._removeFromIndex=function(a){if(!this.get(a))return;delete this._index[a]};e._handleModelEvent=function(a,b,c,d){var e=a.indexOf(":"),f=e===-1?a:a.slice(0,e);if((f==="add"||f==="remove")&&c!==this)return;f==="destroy"&&this.remove(b,d);this.trigger.apply(this,arguments)};e._getAggregators=function(a){a===void 0&&(a=!0);if(this._aggregators==null){if(!a)return d("WAWebCollectionInternalUtils").EMPTY_AGGREGATORS;this._aggregators=d("WAWebCollectionInternalUtils").groupMethodsByKind(this).aggregate}return this._aggregators};return b}(c("WAWebEventEmitter"));g["default"]=a}),98);
__d("WAWebBaseCollection",["Promise","WAFilteredCatch","WALogger","WATypeUtils","WAWebBackendErrors","WAWebBaseCachePolicy","WAWebCachePolicies","WAWebCollection","WAWebConnModel","WAWebMiscErrors","WAWebSocketConstants","WAWebSocketModel","WAWebUserPrefsStore","asyncToGeneratorRuntime","cr:5292","err","gkx","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["baseCollection:initFromCache load: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["baseCollection:query query promise rejected: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["LogoutDrop error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Called update without an id"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Called find without an id"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Detected UI change inside a transaction in collection ",".\n      This can result in a consistency issue. See https://fburl.com/aleoj4tt item #1 for details."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["baseCollection:saveToCache save: ",""]);o=function(){return a};return a}var p={QUERY:"QUERY",FIND:"FIND",UPDATE:"UPDATE"},q={}.toString(),r={id:"none",policy:d("WAWebBaseCachePolicy").CACHE_POLICY.NONE},s=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="CollectionSilentQueryError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this)||this;b._inflight={};b._cachePolicy=d("WAWebCachePolicies").createCachePolicy(babelHelpers.assertThisInitialized(b),b.constructor.cachePolicy||r);b._staleCollection=b.constructor.staleCollection||!1;b._staleCollection===!0&&b.listenTo(d("WAWebSocketModel").Socket,"change:stream",b._handleStreamChange);b._cachePolicy.enableCaching();b._cachePolicy.constructor.policy===d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD&&(b.listenTo(d("WAWebConnModel").Conn,"me_ready",b._updateFromCache),d("WAWebConnModel").Conn.meReadyTriggered&&b._updateFromCache());return b}var f=e.prototype;f.initializeFromCache=function(a){this.add(a)};f.saveToCache=function(){if(!d("WAWebConnModel").Conn.shouldSaveToCache())return;var a=this._cachePolicy.id;d("WALogger").LOG(o(),String(a));c("WAWebUserPrefsStore").setCollection(a,this.toJSON())};f.add=function(e,f){var g=this;c("gkx")("26258")||(b("cr:5292")==null?void 0:b("cr:5292").currentTransaction)!=null&&d("WALogger").WARN(n(),this.constructor.name);if(e){if(d("WAWebConnModel").Conn.blockStoreAdds)throw new(d("WAWebBackendErrors").LogoutDrop)("adding to store when blocking store adds");var h=Array.isArray(e)?e:[e];if(h.every(function(a){return a==null?void 0:a.isState})){var i=c("lodash").reject(h,function(a){return g.get(a.id)});i.length&&a.prototype.add.call(this,i,f);return h}}return a.prototype.add.call(this,e,f)};f.findQuery=function(a,b){return this._query(p.QUERY,a,b)};f.find=function(a,e){if(a)return this._query(p.FIND,a,e);d("WALogger").ERROR(m()).sendLogs("find-without-id");return(h||(h=b("Promise"))).reject(c("err")("called find without an id"))};f.update=function(a,e){if(a)return this._query(p.UPDATE,a,e);d("WALogger").ERROR(l()).sendLogs("update-without-id");return(h||(h=b("Promise"))).reject(c("err")("called update without an id"))};f.gadd=function(a,b){if(this.modelClass.prototype.isIdType(a)){var d=this.get(a);return d?d:this.add({id:a},b)[0]}if(a.id){d=b?b:{};d.merge=!0;return this.add(a,d)[0]}throw c("err")("gadd called without an id attr (id)")};f.gaddUp=function(a){var b,d=this._staleCollection;if(this.modelClass.prototype.isIdType(a)){var e={stale:d,id:a};b=this.get(a)||this.add(e,{merge:!0})[0]}else a.id&&(this.get(a.id)&&(d=!1),a=babelHelpers["extends"]({stale:d},a),b=this.add(a,{merge:!0})[0]);if(b){e=b;b.stale&&this.find(b.id);return e}throw c("err")(".gaddUp called without an id attr (id)")};f["delete"]=function(){this._inflight={},this.reset()};f._handleResume=function(){switch(d("WAWebSocketModel").Socket.stream){case d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED:if(!this._staleCollection)return;this.forEach(function(a){a&&(a.stale=!0)});break;case d("WAWebSocketConstants").SOCKET_STREAM.RESUMING:case d("WAWebSocketConstants").SOCKET_STREAM.SYNCING:case d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED:break}};f._query=function(a,e,f){var g=this,i=d("WATypeUtils").isString(e)?e:e.toString();i===q&&(i=c("lodash").uniqueId("collection_query_"));var l=a===p.QUERY?void 0:this.get(e),m="force-"+i;(this._inflight[m]&&a===p.FIND||a===p.UPDATE)&&(i=m);if(this._inflight[i])return a===p.FIND&&l&&!l.stale?(h||(h=b("Promise"))).resolve(l):this._inflight[i];return!l||l.stale||a===p.UPDATE?this._inflight[i]=this._serverQuery(a,e,f)["finally"](function(){delete g._inflight[i]})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").LogoutDrop,function(a){d("WALogger").WARN(k(),a.toString()).devConsole(a)}))["catch"](function(a){if(a instanceof s)d("WALogger").LOG(j(),String(a));else throw a}):(h||(h=b("Promise"))).resolve(l)};f._serverQuery=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;a===p.UPDATE?f=this._update(b,e):a===p.FIND?f=this.findImpl(b,e):f=this.findQueryImpl(b);a=(yield f);if(this._staleCollection){b=Array.isArray(a)?a:[a];c("lodash").compact(b).forEach(function(a){typeof a.stale==="undefined"&&(a.stale=!1)})}(e==null?void 0:e.set)?f=this.set(a):f=this.add(a,{merge:!0});if(Array.isArray(a))return f;if(f[0])return f[0];throw new(d("WAWebMiscErrors").ModelCreateError)("Unknown",a)});function a(b,c,d){return a.apply(this,arguments)}return a}();f._update=function(a,b){return this.findImpl(a,b)};f._handleStreamChange=function(){this._handleResume(),this._cachePolicy.constructor.policy===d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD&&this._updateFromCache()};f._updateFromCache=function(){var a=this._cachePolicy.id;this._cachePolicy.disableCaching();if(!d("WAWebConnModel").Conn.shouldSaveToCache())return;d("WALogger").LOG(i(),String(a));this.initializeFromCache(c("WAWebUserPrefsStore").getCollection(a));this._cachePolicy.enableCaching()};return e}(c("WAWebCollection"));g.CollectionSilentQueryError=s;g.BaseCollection=a}),98);
__d("WAWebCollectionUtils",["WAWebCollectionInternalUtils","WAWebSimpleCollection"],(function(a,b,c,d,e,f,g){function h(a){return Array.isArray(a)?JSON.stringify(a.map(h)):String(a)}var i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this)||this;d._isWaitingForCollection=!1;d._rootCollection=a;d._key=c;var e=babelHelpers.assertThisInitialized(d);Object.defineProperty(babelHelpers.assertThisInitialized(d),"_models",{get:function(){var a;return(a=(a=e._getAggregatedCollection())==null?void 0:a._models)!=null?a:[]}});Object.defineProperty(babelHelpers.assertThisInitialized(d),"_index",{get:function(){var a;return(a=(a=e._getAggregatedCollection())==null?void 0:a._index)!=null?a:{}}});return d}var c=a.prototype;c._getAggregatedCollection=function(){var a;return(a=this._rootCollection.get(this._key))==null?void 0:a.collection};c.on=function(a,c,d){b.prototype.on.call(this,a,c,d);this._maybeConnect();return this};c.off=function(a,c,d){b.prototype.off.call(this,a,c,d);this._maybeDisconnect();return this};c._hasListeners=function(){var a=this._events;if(a==null)return!1;for(var b in a)if(a[b]!=null&&a[b].length>0)return!0;return!1};c._maybeConnect=function(){var a=this,b=this._getAggregatedCollection();if(b==null){if(this._isWaitingForCollection)return;this._isWaitingForCollection=!0;this._rootCollection.on("add",this._maybeConnect,this);this._disconnect=function(){a._rootCollection.off("add",a._maybeConnect,a)};return}this._isWaitingForCollection&&(this._disconnect==null?void 0:this._disconnect(),this._isWaitingForCollection=!1);b.on("all",this._relayEvent,this);this._rootCollection.on("remove",this._handleCollectionRemove,this);this._disconnect=function(){b.off("all",a._relayEvent,a),a._rootCollection.off("remove",a._handleCollectionRemove,a)}};c._maybeDisconnect=function(){if(this._hasListeners())return;this._disconnect==null?void 0:this._disconnect();this._disconnect=null};c._handleCollectionRemove=function(a){this._key===a.id&&(this._disconnect==null?void 0:this._disconnect(),this._disconnect=null,this._maybeConnect())};c._relayEvent=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.trigger.apply(this,[a].concat(c))};return a}(d("WAWebSimpleCollection").SimpleCollection);function a(a){var b=new(d("WAWebSimpleCollection").SimpleCollection)(),c=new Map(),e=function(a,d){var e;e=(e=b.get(a))==null?void 0:e.collection;e&&(e.remove(d),e.length===0&&b.remove(a));c["delete"](d.id)},f=function(f){var g=a(f);if(g===void 0)return;var i=c.get(f.id);g=h(g);i!=null&&g!==i&&e(i,f);i=(i=b.get(g))==null?void 0:i.collection;i==null&&(i=new(d("WAWebSimpleCollection").SimpleCollection)(),b.add({id:g,collection:i}));i.add(f);c.set(f.id,g)};return Object.assign(function(a){return new i(b,h(a))},{kind:d("WAWebCollectionInternalUtils").CollectionMethodKind.Aggregate,add:function(a){a.forEach(function(a){f(a)})},remove:function(b){b.filter(Boolean).forEach(function(b){var c=h(a(b));e(c,b)})},reset:function(){b.forEach(function(a){a=a.collection;a.reset()}),b.reset(),c.clear()}})}g.AggregatedProxyView=i;g.aggregated=a}),98);
__d("WAWebSimpleCollection",["WAWebBaseCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=Object;g.SimpleCollection=a}),98);
__d("WAWebMsgModelFromData",["WAWebMsgModel"],(function(a,b,c,d,e,f,g){function h(a){return new(d("WAWebMsgModel").Msg)(babelHelpers["extends"]({},a,{paymentNoteMsg:a.paymentNoteMsg?h(a.paymentNoteMsg):void 0}))}g.msgModelFromMsgData=h}),98);
__d("WAWebUserPrefsInfoStore",["Promise","WAArrayBufferUtils","WABase64","WABinary","WALogger","WAWebCmd","WAWebCryptoCurve25519","WAWebDbEncryptionKey","WAWebL10N","WAWebLockScreenResolver","WAWebLogoutReasonConstants","WAWebMiscGatingUtils","WAWebSocketConstants","WAWebSocketLogoutJob","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["App lock iv array: "," is null"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["App lock iv array: "," is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB ENC CRITICAL ERROR] null returned for local app lock salt"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Removing lock on Noise info failed."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Noise ivArray : "," is null"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Noise Info: "," is null, so there is no lock to remove."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error with decrypting the noise with the passcode derived key: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to lock noise info: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Empty noiseInfo when trying to lock noise info with passcode."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key failed validation."]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error serializing certificate chain: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Noise ivArray : "," is null"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Noise encryptedNoiseInfo: "," is null"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error parsing certificate chain: ",""]);y=function(){return a};return a}a=function(){function a(){this.$1=null}var d=a.prototype;d.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$1==null&&(this.$1=(yield this.getOsRelease()));return{osVersion:this.$1,osBuild:"0.1",hardware:"desktop",manufacturer:"",device:"Desktop",lg:c("WAWebL10N").getLanguage(),lc:c("WAWebL10N").getRegion()||"",mcc:"000",mnc:"000",sim_mnc:"000",sim_mcc:"000"}});function d(){return a.apply(this,arguments)}return d}();d.getOsRelease=function(){var a="0.1";return!c("gkx")("26255")?(h||(h=b("Promise"))).resolve(a):new(h||(h=b("Promise")))(function(a){var b=window.Native.ipcRenderer;b.invoke("get-electron-os-model-and-release").then(function(b){a(b)})})};return a}();e=new a();var z=128,A="AES-GCM",B="PBKDF2",C=6e5;f=function(){function a(){this.cachedPasscodeDerivedKey=null}var c=a.prototype;c.resetCachedPasscodeDerivedKey=function(){this.cachedPasscodeDerivedKey=null};c.getCertficateChain=function(a){a=d("WAArrayBufferUtils").arrayBufferToString(a);try{a=JSON.parse(a);var b=a.intermediate;a=a.leaf;return{intermediate:{key:d("WABase64").decodeB64(b.key),notAfter:Number(b.notAfter),notBefore:Number(b.notBefore)},leaf:{key:d("WABase64").decodeB64(a.key),notAfter:Number(a.notAfter),notBefore:Number(a.notBefore)}}}catch(a){d("WALogger").LOG(y(),a);return null}};c.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMultiDevice").getNoiseInfo();if(!a){d("WALogger").DEV(x(),!a).tags("info-store");return null}var b=this.$1();if(!b){d("WALogger").DEV(w(),!b).tags("info-store");return null}a=(yield this.$2(a,b));if(d("WAWebMiscGatingUtils").screenLockFeatureSupported()&&d("WAWebUserPrefsScreenLock").getScreenLockEnabled()){d("WAWebCmd").Cmd.setSocketState(d("WAWebSocketConstants").SOCKET_STATE.SCREEN_LOCKED);b=(yield this.passcodeUnlockNoiseInfo(a));b&&(a=b)}if(!this.$3(a)){d("WALogger").LOG(v()).tags("info-store");return null}return a});function c(){return a.apply(this,arguments)}return c}();c.setCertificateChain=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this.get());if(!b)return;try{var c=babelHelpers["extends"]({},a.intermediate,{key:d("WABase64").encodeB64(a.intermediate.key)});a=babelHelpers["extends"]({},a.leaf,{key:d("WABase64").encodeB64(a.leaf.key)});c=JSON.stringify({intermediate:c,leaf:a});b.certificateChainBuffer=d("WAArrayBufferUtils").stringToArrayBuffer(c);return this.set(b)}catch(a){d("WALogger").LOG(u(),a).sendLogs("handshake-serialization-failed")}});function c(b){return a.apply(this,arguments)}return c}();c.set=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Uint8Array(16*4);self.crypto.getRandomValues(c);c=this.$4(c);yield this.$5(c);c=(yield (h||(h=b("Promise"))).all([this.$6(a.recoveryToken,c[0]),this.$6(a.staticKeyPair.pubKey,c[1]),this.$6(a.staticKeyPair.privKey,c[2]),a.certificateChainBuffer?this.$6(a.certificateChainBuffer,c[3]):(h||(h=b("Promise"))).resolve(void 0)]));var e=c[0],f=c[1],g=c[2];c=c[3];a.recoveryToken=e;a.staticKeyPair.pubKey=f;a.staticKeyPair.privKey=g;a.certificateChainBuffer=c;return d("WAWebUserPrefsMultiDevice").setNoiseInfo(a)});function c(b){return a.apply(this,arguments)}return c}();c.$5=function(a){return d("WAWebUserPrefsMultiDevice").setNoiseInfoIv(a.map(d("WABase64").encodeB64))};c.$1=function(){var a=d("WAWebUserPrefsMultiDevice").getNoiseInfoIv();return!a?null:a.map(function(a){return new Uint8Array(d("WABase64").decodeB64(a))})};c.$4=function(a){a=new(d("WABinary").Binary)(a);return[a.readByteArray(16),a.readByteArray(16),a.readByteArray(16),a.readByteArray(16)]};c.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0];b=(yield self.crypto.subtle.encrypt({iv:b,name:"AES-CBC"},c.key,a));return b});function c(b,c){return a.apply(this,arguments)}return c}();c.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(yield (h||(h=b("Promise"))).all([this.$7(a.recoveryToken,c[0]),this.$7(a.staticKeyPair.pubKey,c[1]),this.$7(a.staticKeyPair.privKey,c[2]),a.certificateChainBuffer!=null?this.$7(a.certificateChainBuffer,c[3]):(h||(h=b("Promise"))).resolve(void 0)]));var d=c[0],e=c[1],f=c[2];c=c[3];a.certificateChainBuffer=c;a.recoveryToken=d;a.staticKeyPair.pubKey=e;a.staticKeyPair.privKey=f;return a});function c(b,c){return a.apply(this,arguments)}return c}();c.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0];b=(yield self.crypto.subtle.decrypt({iv:b,name:"AES-CBC"},c.key,a));return b});function c(b,c){return a.apply(this,arguments)}return c}();c.$3=function(a){var b=!0;try{var c=new Uint8Array(d("WAWebCryptoCurve25519").keyPair(a.staticKeyPair.privKey).pubKey);a=new Uint8Array(a.staticKeyPair.pubKey);for(var e=0;e<c.length;e++)if(c[e]!==a[e]){b=!1;break}}catch(a){d("WALogger").LOG(t()).tags("info-store"),b=!1}return b};c.lockNoiseInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this,e=(yield this.deriveKeyFromPasscode(a));this.createScreenLockIv();a=(yield this.get());if(!a||!a.staticKeyPair){d("WALogger").DEV(s()).tags("info-store");return!1}var f=a.recoveryToken,g=a.staticKeyPair,i=g.pubKey;g=g.privKey;a=a.certificateChainBuffer;try{f=(yield (h||(h=b("Promise"))).all([f,i,g,a].map(function(a){return c.encryptNoiseWithPasscodeDerivedKey(a,e)})));if(f[0]&&f[1]&&f[2]){yield this.set({recoveryToken:f[0],staticKeyPair:{pubKey:f[1],privKey:f[2]},certificateChainBuffer:f[3]});this.cachedPasscodeDerivedKey=e;return!0}}catch(a){d("WALogger").DEV(r(),a)}return!1});function c(b){return a.apply(this,arguments)}return c}();c.passcodeUnlockNoiseInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);if(this.cachedPasscodeDerivedKey==null){!b?b=(yield d("WAWebLockScreenResolver").LockScreenResolvable.waitForPasscode()):b=(yield d("WAWebLockScreenResolver").LockScreenResolvable.waitForPasscodeAfterIncorrectAttempt());b=(yield this.deriveKeyFromPasscode(b))}else b=this.cachedPasscodeDerivedKey;var c=(yield this.getUnlockedNoiseInfo(a,b));if(!c||!this.$3(c)){d("WALogger").LOG(q()).tags("info-store");return this.passcodeUnlockNoiseInfo(a,!0)}d("WAWebLockScreenResolver").LockScreenResolvable.correctPasscodeEntered(b);d("WAWebCmd").Cmd.setSocketState(d("WAWebSocketConstants").SOCKET_STATE.OPENING);return c});function c(b,c){return a.apply(this,arguments)}return c}();c.getUnlockedNoiseInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=this,f=a.recoveryToken,g=a.staticKeyPair,i=g.pubKey;g=g.privKey;a=a.certificateChainBuffer;try{f=(yield (h||(h=b("Promise"))).all([f,i,g,a].map(function(a){return e.decryptNoiseWithPasscodeDerivedKey(a,c)})));if(f[0]&&f[1]&&f[2]){this.cachedPasscodeDerivedKey=c;return{recoveryToken:f[0],staticKeyPair:{pubKey:f[1],privKey:f[2]},certificateChainBuffer:f[3]}}}catch(a){d("WALogger").DEV(p(),a);return null}});function c(b,c){return a.apply(this,arguments)}return c}();c.removeLockOnNoiseInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsMultiDevice").getNoiseInfo();if(!b){d("WALogger").DEV(o(),!b).tags("info-store");return!1}var c=this.$1();if(!c){d("WALogger").DEV(n(),!c).tags("info-store");return!1}b=(yield this.$2(b,c));c=(yield this.deriveKeyFromPasscode(a));a=(yield this.getUnlockedNoiseInfo(b,c));if(a!=null){if(!this.$3(a)){d("WALogger").LOG(m()).tags("info-store");return!1}yield this.set(a);d("WAWebUserPrefsScreenLock").setScreenLockSalt(null);d("WAWebUserPrefsScreenLock").setScreenLockIvString("");yield d("WAWebUserPrefsScreenLock").setScreenLockIterations(null);this.cachedPasscodeDerivedKey=null;return!0}d("WALogger").DEV(l());return!1});function c(b){return a.apply(this,arguments)}return c}();c.deriveKeyFromPasscode=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new TextEncoder().encode(a);a=(yield self.crypto.subtle.importKey("raw",a,{name:B},!1,["deriveKey"]));var b=(yield this.getOrGenScreenLockSalt());b=(yield self.crypto.subtle.deriveKey({name:B,hash:"SHA-256",salt:b,iterations:yield this.getScreenLockIterationCount()},a,{name:A,length:z},!1,["encrypt","decrypt"]));return b});function c(b){return a.apply(this,arguments)}return c}();c.getOrGenScreenLockSalt=function(){var a=null;d("WAWebUserPrefsScreenLock").getScreenLockEnabled()||(a=new Uint8Array(z),self.crypto.getRandomValues(a),a=btoa(String.fromCharCode.apply(String,Array.from(new Uint8Array(a)))),d("WAWebUserPrefsScreenLock").setScreenLockSalt(a));a=d("WAWebUserPrefsScreenLock").getScreenLockSalt();a==null&&(d("WALogger").DEV(k()),void d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.MissingScreenLockSalt));a=Uint8Array.from(atob(a),function(a){return a.charCodeAt(0)});return(h||(h=b("Promise"))).resolve(a)};c.createScreenLockIv=function(){var a=new Uint8Array(16);self.crypto.getRandomValues(a);a=new(d("WABinary").Binary)(a).readByteArray(16);d("WAWebUserPrefsScreenLock").setScreenLockIvString(d("WABase64").encodeB64(a))};c.getScreenLockIvArray=function(){var a=d("WAWebUserPrefsScreenLock").getScreenLockIvString();return!a?null:new Uint8Array(d("WABase64").decodeB64(a))};c.encryptNoiseWithPasscodeDerivedKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)return null;var c=this.getScreenLockIvArray();if(!c){d("WALogger").DEV(j(),!c).tags("info-store");return null}c=(yield self.crypto.subtle.encrypt({iv:c,name:A},b,a));return c});function c(b,c){return a.apply(this,arguments)}return c}();c.decryptNoiseWithPasscodeDerivedKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)return null;var c=this.getScreenLockIvArray();if(!c){d("WALogger").DEV(i(),!c).tags("info-store");return null}c=(yield self.crypto.subtle.decrypt({iv:c,name:A},b,a));return c});function c(b,c){return a.apply(this,arguments)}return c}();c.calculatePBKDF2Iterations=function(){var a=navigator.hardwareConcurrency;return C*Math.max(1,Number.isNaN(a)?1:a)};c.getScreenLockIterationCount=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsScreenLock").getScreenLockIterations());(!d("WAWebUserPrefsScreenLock").getScreenLockEnabled()||a==null)&&(a=this.calculatePBKDF2Iterations(),yield d("WAWebUserPrefsScreenLock").setScreenLockIterations(a));return a});function c(){return a.apply(this,arguments)}return c}();return a}();a=new f();g.deviceInfo=e;g.waNoiseInfo=a}),98);
__d("WAWebDirectConnectionGatingUtils",["WALogger","WAWebABProps","WAWebBusinessProfileCollection","WAWebBusinessProfileVersioningBridge","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] This web client cannot detect if the product list message recevied is coming from a direct connection business"]);h=function(){return a};return a}function i(){return(d("WAWebBusinessProfileVersioningBridge").getBusinessProfileQueryVersion()&d("WAWebBusinessProfileVersioningBridge").DIRECT_CONNECTION_FLAG)>0}function j(){return!d("WAWebABProps").getABPropConfigValue("web_abprop_direct_connection_md")}function k(a,b){return a===d("WAWebMsgType").MSG_TYPE.LIST&&b===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST}function l(){return d("WAWebABProps").getABPropConfigValue("web_abprop_direct_connection_md")}function a(){return d("WAWebABProps").getABPropConfigValue("web_abprop_direct_connection_md")}function c(){var a=d("WAWebABProps").getABPropConfigValue("direct_connection_business_numbers");return typeof a==="string"&&a.length>0?a.split(","):[]}function e(){return d("WAWebABProps").getABPropConfigValue("dc_edit_postcode_by_default_enabled")}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(j()||!k(a,c)||!e)return!1;if(!i()){d("WALogger").WARN(h());return"unknown"}a=d("WAWebWidFactory").createWid(e);c=b("WAWebBusinessProfileCollection");e=c.BusinessProfileCollection;c=e.get(a);(!c||!c.profileOptions)&&(c=(yield e.find(a)));return c.isBusinessDirectConnection()||!1});return n.apply(this,arguments)}function f(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield m(a,b,c));return a===!0&&!l()?{requiresDirectConnection:a,type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,subtype:"phone_only_feature"}:{requiresDirectConnection:a}});return o.apply(this,arguments)}g.supportsDirectConnection=l;g.enablePostcodeInCatalog=a;g.directConnectionBusinessNumbersFromAbprop=c;g.editPostcodeByDefaultEnabled=e;g.genDirectConnectionMessageModifiers=f}),98);
__d("WAWebBizLabelItemParentType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Chat","Contact","Msg"]);f.LabelItemParentType=a}),66);
__d("WAWebBizLabelUtils",["WALogger","WAWebBizLabelItemParentType","WAWebChatCollection","WAWebChatModel","WAWebContactCollection","WAWebContactModel","WAWebLabelCollection","WAWebMsgCollection","WAWebMsgModel","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["labelItemCollection does not exist for lableId ",""]);h=function(){return a};return a}function a(a){var c=j(a);a.labels=b("WAWebLabelCollection").LabelCollection.getLabelsForModel(a.id.toString(),c)}function e(a,c,e){if(c&&c.length>0){var f=b("WAWebLabelCollection").LabelCollection;c.forEach(function(b){var c=f.gadd({id:b});c.labelItemCollection.gadd({id:k(a,b,e),labelId:b,parentId:a,parentType:e});e===d("WAWebBizLabelItemParentType").LabelItemParentType.Chat&&c.labelItemCollection.gadd({id:k(a,b,d("WAWebBizLabelItemParentType").LabelItemParentType.Contact),labelId:b,parentId:a,parentType:d("WAWebBizLabelItemParentType").LabelItemParentType.Contact})})}}function f(a,c,e){var f=b("WAWebLabelCollection").LabelCollection;f=f.get(c);f=f==null?void 0:f.labelItemCollection;if(!f){d("WALogger").WARN(h(),c);return}f.remove(k(a,c,e));e===d("WAWebBizLabelItemParentType").LabelItemParentType.Chat&&f.remove(k(a,c,d("WAWebBizLabelItemParentType").LabelItemParentType.Contact))}function i(a){switch(a){case d("WAWebBizLabelItemParentType").LabelItemParentType.Chat:return b("WAWebChatCollection").ChatCollection;case d("WAWebBizLabelItemParentType").LabelItemParentType.Contact:return b("WAWebContactCollection").ContactCollection;case d("WAWebBizLabelItemParentType").LabelItemParentType.Msg:return b("WAWebMsgCollection").MsgCollection}}function j(a){if(a instanceof b("WAWebChatModel").Chat)return d("WAWebBizLabelItemParentType").LabelItemParentType.Chat;else if(a instanceof b("WAWebContactModel"))return d("WAWebBizLabelItemParentType").LabelItemParentType.Contact;else if(a instanceof b("WAWebMsgModel").Msg)return d("WAWebBizLabelItemParentType").LabelItemParentType.Msg;throw c("err")("getParentTypeFromModel: model is invalid")}function k(a,b,c){return a+"_"+b+"_"+c}g.initializeLabels=a;g.addToLabelCollection=e;g.removeLabelFromCollection=f;g.getParentCollection=i;g.getParentTypeFromModel=j;g.createLabelItemId=k}),98);
__d("WAArraysShallowEqual",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){return a===b}function a(a,b,c){c===void 0&&(c=g);if(a===b)return!0;return a.length!==b.length?!1:a.every(function(a,d){return c(a,b[d])})}f["default"]=a}),66);
__d("WAWebEmojiDownloadSuggestions",["JSResource","Promise","WAWebL10nGetRenderedLocale","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=new Set(["en_GB",d("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale()]);a=(yield (h||(h=b("Promise"))).all(Array.from(a).map(j)));return a.filter(Boolean)}catch(a){return[]}});return i.apply(this,arguments)}function j(a){switch(a){case"en_GB":case"en_IN":case"en_OP":case"en_PI":case"en_UD":case"en_US":case"en_XA":return c("JSResource")("WAWebLocalesEmojiSuggestionEn").__setRef("WAWebEmojiDownloadSuggestions").load();case"pt_BR":case"pt_PT":return c("JSResource")("WAWebLocalesEmojiSuggestionPt").__setRef("WAWebEmojiDownloadSuggestions").load();case"de_DE":return c("JSResource")("WAWebLocalesEmojiSuggestionDe").__setRef("WAWebEmojiDownloadSuggestions").load();case"es_CL":case"es_CO":case"es_ES":case"es_LA":case"es_MX":case"es_VE":return c("JSResource")("WAWebLocalesEmojiSuggestionEs").__setRef("WAWebEmojiDownloadSuggestions").load();case"it_IT":return c("JSResource")("WAWebLocalesEmojiSuggestionIt").__setRef("WAWebEmojiDownloadSuggestions").load();case"ru_RU":return c("JSResource")("WAWebLocalesEmojiSuggestionRu").__setRef("WAWebEmojiDownloadSuggestions").load();case"ar_AR":return c("JSResource")("WAWebLocalesEmojiSuggestionAr").__setRef("WAWebEmojiDownloadSuggestions").load();case"tr_TR":return c("JSResource")("WAWebLocalesEmojiSuggestionTr").__setRef("WAWebEmojiDownloadSuggestions").load();case"uk_UA":return c("JSResource")("WAWebLocalesEmojiSuggestionUk").__setRef("WAWebEmojiDownloadSuggestions").load();case"bn_IN":return c("JSResource")("WAWebLocalesEmojiSuggestionBn").__setRef("WAWebEmojiDownloadSuggestions").load();case"hi_IN":case"hi_FB":return c("JSResource")("WAWebLocalesEmojiSuggestionHi").__setRef("WAWebEmojiDownloadSuggestions").load();case"hu_HU":return c("JSResource")("WAWebLocalesEmojiSuggestionHu").__setRef("WAWebEmojiDownloadSuggestions").load();case"ms_MY":return c("JSResource")("WAWebLocalesEmojiSuggestionMs").__setRef("WAWebEmojiDownloadSuggestions").load();case"pl_PL":return c("JSResource")("WAWebLocalesEmojiSuggestionPl").__setRef("WAWebEmojiDownloadSuggestions").load();case"ro_RO":return c("JSResource")("WAWebLocalesEmojiSuggestionRo").__setRef("WAWebEmojiDownloadSuggestions").load();case"th_TH":return c("JSResource")("WAWebLocalesEmojiSuggestionTh").__setRef("WAWebEmojiDownloadSuggestions").load();case"ur_PK":return c("JSResource")("WAWebLocalesEmojiSuggestionUr").__setRef("WAWebEmojiDownloadSuggestions").load();case"id_ID":return c("JSResource")("WAWebLocalesEmojiSuggestionId").__setRef("WAWebEmojiDownloadSuggestions").load();case"fa_IR":return c("JSResource")("WAWebLocalesEmojiSuggestionFa").__setRef("WAWebEmojiDownloadSuggestions").load();case"mr_IN":return c("JSResource")("WAWebLocalesEmojiSuggestionMr").__setRef("WAWebEmojiDownloadSuggestions").load();case"gu_IN":return c("JSResource")("WAWebLocalesEmojiSuggestionGu").__setRef("WAWebEmojiDownloadSuggestions").load();case"fr_FR":case"fr_CA":return c("JSResource")("WAWebLocalesEmojiSuggestionFr").__setRef("WAWebEmojiDownloadSuggestions").load();case"zh_TW":return c("JSResource")("WAWebLocalesEmojiSuggestionZhTw").__setRef("WAWebEmojiDownloadSuggestions").load();case"zh_CN":return c("JSResource")("WAWebLocalesEmojiSuggestionZhCn").__setRef("WAWebEmojiDownloadSuggestions").load();case"zh_HK":return c("JSResource")("WAWebLocalesEmojiSuggestionZhHk").__setRef("WAWebEmojiDownloadSuggestions").load();case"nl_NL":case"nl_BE":return c("JSResource")("WAWebLocalesEmojiSuggestionNl").__setRef("WAWebEmojiDownloadSuggestions").load();case"cs_CZ":return c("JSResource")("WAWebLocalesEmojiSuggestionCs").__setRef("WAWebEmojiDownloadSuggestions").load();case"sk_SK":return c("JSResource")("WAWebLocalesEmojiSuggestionSk").__setRef("WAWebEmojiDownloadSuggestions").load();default:return(h||(h=b("Promise"))).resolve(null)}}g.downloadEmojiSuggestions=a}),98);
__d("WAWebEmojiKeywordToUnicode",["WAArraysShallowEqual","WALogger","WAWebEmojiDownloadSuggestions","WAWebEmojiSearch","WAWebEventsWaitForBbEvent","WAWebL10N","WAWebStreamModel","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[emoji-trie] subscription to locale_change failed: ",", stack: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Emoji Trie is not loaded."]);i=function(){return a};return a}var j=null;function a(a){if(j!=null)return d("WAWebEmojiSearch").emojiSearch(a,j);d("WALogger").WARN(i()).sendLogs("Emoji Trie is not loaded");return[]}var k=null,l=[];function m(){o();var a=c("lodash").uniq(["en",c("WAWebL10N").getNormalizedLocale()]);if(c("WAArraysShallowEqual")(l,a))return;l=a;var b=d("WAWebEmojiDownloadSuggestions").downloadEmojiSuggestions().then(function(a){if(k!==b)return;j=d("WAWebEmojiSearch").emojiLocaleDictsToTrie(a)})["catch"](function(){})["finally"](function(){if(k!==b)return;k=null});k=b}var n=!1;function o(){if(n)return;try{c("WAWebL10N").on("locale_change",function(){m()})}catch(a){d("WALogger").WARN(h(),a,a.stack).sendLogs("[emoji-trie] subscription to locale_change failed: "+a.message)}void c("WAWebEventsWaitForBbEvent")(d("WAWebStreamModel").Stream,"change:mode",function(){return d("WAWebStreamModel").Stream.mode===d("WAWebStreamModel").StreamMode.MAIN}).then(function(){m()});n=!0}g.emojiKeywordToUnicodeSearch=a;g.updateEmojiTrie=m;g.initEmojiTrieSubscriptions=o}),98);
__d("WAWebEmojiSearch",["WATrie","WAWebEmoji","WAWebRecentEmojiCollection","lodash"],(function(a,b,c,d,e,f,g){var h=["\ud83d\ude02","\ud83e\udd23","\u2764","\ud83e\udd7a","\ud83e\udd70","\ud83d\ude18","\ud83d\ude2d","\ud83d\ude0d","\ud83d\ude01","\ud83d\ude4f","\ud83d\ude05","\ud83d\ude06","\ud83d\ude0a","\ud83d\ude42","\ud83d\ude14","\ud83e\udd73","\ud83d\ude12","\u263a","\ud83c\udf82","\ud83d\udc4d","\ud83d\udc96","\ud83d\ude22","\ud83d\ude44","\ud83d\ude0f","\ud83d\ude0e","\ud83d\udc8b","\ud83d\ude1e","\ud83d\ude09","\ud83d\udc4f","\ud83d\ude43","\ud83d\ude21","\ud83d\ude00","\ud83d\ude04","\ud83d\ude07","\ud83e\udd29","\ud83d\ude0c","\ud83e\udd14","\ud83c\udf39","\ud83d\ude0b","\ud83d\udc97","\ud83e\udd17","\ud83d\udc95","\ud83d\udc94","\ud83d\ude1a","\u2639","\ud83d\ude03","\ud83c\udf89","\ud83d\udd25","\ud83e\udd74","\ud83d\ude33"],i=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function a(a,b){var d=[];if(a){a=l(a.toLowerCase(),b);d=c("lodash").uniq(a)}return d}function j(a,b){if(!b)return[];if(a.length<=5)return b.getMatches(a);var d=a.substring(0,5).trim();b=b.getMatches(d);b=c("lodash").filter(b,function(b){return b.keyword.startsWith(a)});return b}function k(a){return a.map(d("WAWebEmoji").EmojiUtil.normalizeEmoji).filter(Boolean)}function l(a,b){var e;b=j(a,b);var f=k((e=c("lodash")).flatMap(b,function(a){return a.value}));b=k(e.flatMap(b.filter(function(b){return b.keyword===a}),function(a){return a.value}));var g=e.intersection(k(d("WAWebRecentEmojiCollection").RecentEmojiCollection.map(function(a){return a.id})),f),i=e.intersection(k(h),f),l=e.intersection(e.union(g,i),b);return e.union(l,n(b),g,i,n(f))}var m=c("lodash").once(function(){var a=new Map(),b=0;for(var c=0;c<i.length;c++){var e=i[c];e=d("WAWebEmoji").EmojiUtil.getEmojisInCategory(e);for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;a.set(h,b);b++}}return a});function n(a){var b=m();return a.toSorted(function(a,c){a=(a=b.get(a))!=null?a:Number.MAX_SAFE_INTEGER;c=(c=b.get(c))!=null?c:Number.MAX_SAFE_INTEGER;return a-c})}function b(a){var b=a[0];a.length>1&&(b=babelHelpers["extends"]({},b,a[1]));a=c("lodash").map(b,function(a,b){b=b.toLowerCase();var c=b.substring(0,5);return{value:a,keyword:b,shortKeyword:c}});return o(a,"shortKeyword")}function o(a,b){var d=c("WATrie").fromForwardsStrings(a.map(function(a){return a[b]}),a);return{getMatches:function(a){return d.search(a)}}}g.emojiSearch=a;g.emojiLocaleDictsToTrie=b}),98);
__d("WAWebPrivacyMode_WORKER_INCOMPATIBLE",["WAWebContactCollection","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a){if(!c("WAWebWid").isUser(a))return;var d=b("WAWebContactCollection").ContactCollection;d=d.get(a);return d==null?void 0:d.privacyMode}g.getPrivacyModeFromModel=a}),98);
__d("WAWebWamEnumBlockEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,CHAT:1,PROFILE:2,BLOCK_LIST:3,TRIGGERED_BLOCK:4,ACCOUNT_INFO:5,CALL_LOG:6,OVERFLOW_MENU:7,GROUP_INFO:8,BLOCK_DIALOG:9,MESSAGE_MENU:10,MEDIA_VIEWER:11,OVERFLOW_MENU_BLOCK:12,ONE_TO_ONE_OLD_SPAM_BANNER_BLOCK:13,ONE_TO_ONE_SPAM_BANNER_BLOCK:14,BIZ_SPAM_BANNER_BLOCK:15,BLOCK_HEADER_CHAT:16,OVERFLOW_MENU_REPORT:17,ACCOUNT_INFO_REPORT:18,BIZ_OLD_SPAM_BANNER_BLOCK:19,CHAT_LIST_BLOCK:20,CHAT_LIST_NOINSUB_BLOCK:21,CHAT_LIST_CONTEXT_MENU_BLOCK:22,NOTIFICATION_BLOCK:23,ONE_TO_ONE_SPAM_BANNER_REPORT:24,BIZ_EXTENSION_MENU:25,VIEW_ONCE_VIEWER:26,STATUS_OVERFLOW_MENU_REPORT:27,ALBUM_MEDIA_MENU_REPORT:28,STATUS_POST_REPORT:29,MISSED_CALL_NOTIFICATION_BLOCK:30,CHAT_FMX_CARD_BLOCK:31,CHAT_FMX_CARD_BLOCK_SUSPICIOUS:32,CHAT_FMX_CARD_SAFETY_TOOLS_BLOCK:33,CHAT_FMX_CARD_SAFETY_TOOLS_BLOCK_SUSPICIOUS:34,CHAT_FMX_CARD_SAFETY_TOOLS_REPORT:35,CHAT_FMX_CARD_SAFETY_TOOLS_REPORT_SUSPICIOUS:36,ACCOUNT_INFO_BLOCK:37,CALL_LOG_BLOCK:38,BIZ_BLOCK_HEADER_CHAT:39,BIZ_OVERFLOW_MENU_BLOCK:40,PSA_BANNER_BLOCK:41,COMMENT_ACTIONS_BOTTOM_SHEET:42,CALL_SPAM_DIALOG_REPORT:43,CALL_SPAM_DIALOG_BLOCK:44,BIZ_ACCOUNT_INFO_BLOCK:45,BIZ_BLOCK_LIST:46,BIZ_CALL_LOG_BLOCK:47,ONGOING_CALL_LINK_BLOCK:48,ONE_TO_ONE_BLOCKED_CHAT_COMPOSER:49});f.BLOCK_ENTRY_POINT=a}),66);
__d("WAWebWamEnumBlockEventActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({BLOCK:0,UNBLOCK:1});f.BLOCK_EVENT_ACTION_TYPE=a}),66);
__d("WAWebWamEnumCallResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID:0,CONNECTED:1,REJECTED_BY_USER:2,REJECTED_BY_SERVER:3,MISSED:4,BUSY:5,SETUP_ERROR:6,SERVER_NACK:7,CALL_OFFER_ACK_NOT_RECEIVED:8,MISSED_NO_RECEIPT:9,ACCEPTED_BUT_NOT_CONNECTED:10,CALL_CANCELED_CELLULAR_IN_PROGRESS:11,CALL_CANCELED_AIRPLANE_MODE_ON:12,CALL_CANCELED_NO_NETWORK:13,CALL_OFFER_ACK_CORRUPT:14,CALL_REJECTED_TOS:15,CALL_REJECTED_E2E:16,CALL_REJECTED_UNAVAILABLE:17,CALL_CANCELED_OFFER_NOT_SENT:18,PEER_SETUP_ERROR:19,ACTIVE_ELSEWHERE:20,NO_DECRYPTED_OFFER:21,ACCEPTED_ELSEWHERE:22,REJECTED_ELSEWHERE:23,LONELY:24,CALL_IS_FULL:25,SILENCED:26,CALL_MISSED_SILENCED:27,CALL_DOES_NOT_EXIST_FOR_REJOIN:28});f.CALL_RESULT_TYPE=a}),66);
__d("WAWebBlockEventsFsWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBlockEntryPoint","WAWebWamEnumBlockEventActionType","WAWebWamEnumCallResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({BlockEventsFs:[4288,{blockEntryPoint:[1,d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT],blockEventActionType:[2,d("WAWebWamEnumBlockEventActionType").BLOCK_EVENT_ACTION_TYPE],blockEventIsSuspicious:[3,a.TYPES.BOOLEAN],blockEventIsUnsub:[4,a.TYPES.BOOLEAN],pastCall:[5,a.TYPES.BOOLEAN],pastCallResult:[6,d("WAWebWamEnumCallResultType").CALL_RESULT_TYPE]},[1,1,1],"regular"]},{BlockEventsFs:[]});g.BlockEventsFsWamEvent=b}),98);
__d("WAWebWamBlockEventReporter",["WAWebABProps","WAWebBlockEventsFsWamEvent","WAWebChatCollection","WAWebContactGetters","WAWebWamEnumBlockEventActionType"],(function(a,b,c,d,e,f,g){function a(a){var c=a.contact,e=a.blockEntryPoint;a=a.isBlock;if(d("WAWebABProps").getABPropConfigValue("block_entry_point_logging_enabled")){var f=b("WAWebChatCollection").ChatCollection;f=d("WAWebContactGetters").getIsMyContact(c)||((f=f.get(c.id))==null?void 0:f.isTrusted());new(d("WAWebBlockEventsFsWamEvent").BlockEventsFsWamEvent)({blockEntryPoint:e,blockEventIsSuspicious:!f,blockEventIsUnsub:!d("WAWebContactGetters").getIsMyContact(c),blockEventActionType:a?d("WAWebWamEnumBlockEventActionType").BLOCK_EVENT_ACTION_TYPE.BLOCK:d("WAWebWamEnumBlockEventActionType").BLOCK_EVENT_ACTION_TYPE.UNBLOCK}).commit()}}g.logBlockEvent=a}),98);
__d("WAWamTypes",[],(function(a,b,c,d,e,f){"use strict";a={INT:0,BOOL:1,STRING:2,FLOAT:3};f.TYPES=a}),66);
__d("WAWamBuffer",["WABinary","WAErr","WAWamTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=5,i=47,j=0,k=2,l=1,m=2,n=0,o=4,p=8;e=function(){function a(a,b,c,e){var f=this;this.$5=!1;this.$6=!1;var g=new(d("WABinary").Binary)(void 0,!0);g.writeString("WAM");g.writeUint8(h);g.writeUint8(b);g.writeUint16(c);switch(a){case"regular":g.writeUint8(j);break;default:a,g.writeUint8(k)}this.$1=a;this.$2=g;this.$3=c;this.$4=b;e.forEach(function(a,b){return void f.writeGlobal(b,a)})}var b=a.prototype;b.writeGlobal=function(a,b){if(b==null){t(this.$2,a,n);return}if(typeof b==="string")s(this.$2,a,n,b);else if(typeof b==="number")q(this.$2,a,n,b);else if(typeof b==="boolean")q(this.$2,a,n,b?1:0);else throw c("WAErr")("Incorrect value type "+typeof b)};b.writeEvent=function(a,b,c,e){var f=this.$2;q(f,i,n,Math.floor(a/1e3));a=u(c);var g=a===-1?l|o:l;q(f,b,g,e);for(b=0;b<=a;b+=3){g=c[b+2];if(g!=null){e=c[b];var h=c[b+1],j=b===a?m|o:m;h===d("WAWamTypes").TYPES.INT?q(f,e,j,g):h===d("WAWamTypes").TYPES.BOOL?q(f,e,j,g?1:0):h===d("WAWamTypes").TYPES.STRING?s(f,e,j,g):r(f,e,j,g)}}this.$6=!0};b.getKey=function(){return{streamId:this.$4,sequenceNumber:this.$3,channel:this.$1}};b.getSize=function(){return this.$2.size()};b.peek=function(){return this.$2.peek(function(a){return a.readByteArray()})};b.getBuffer__INTERNAL=function(){return this.$2};b.isFinalized=function(){return this.$5};b.finalize=function(){this.$5=!0};b.hasEvents=function(){return this.$6};return a}();function q(a,b,c,d){d===0?t(a,b,c|1<<4):d===1?t(a,b,c|2<<4):-128<=d&&d<128?(t(a,b,c|3<<4),a.writeInt8(d)):-32768<=d&&d<32768?(t(a,b,c|4<<4),a.writeInt16(d)):-2147483648<=d&&d<2147483648?(t(a,b,c|5<<4),a.writeInt32(d)):(t(a,b,c|6<<4),a.writeInt64(d))}function r(a,b,c,d){t(a,b,c|7<<4),a.writeFloat64(d)}function s(a,b,c,e){var f=d("WABinary").numUtf8Bytes(e);f<256?(t(a,b,c|8<<4),a.writeUint8(f)):f<65536?(t(a,b,c|9<<4),a.writeUint16(f)):(t(a,b,c|10<<4),a.writeUint32(f));a.writeString(e)}function t(a,b,c){b<256?(a.writeUint8(c),a.writeUint8(b)):(a.writeUint8(c|p),a.writeUint16(b))}function u(a){var b=-1;for(var c=0;c<a.length;c+=3)a[c+2]!=null&&(b=c);return b}function a(a){var b=u(a);for(var c=0;c<=b;c+=3){var e=a[c+2];if(e!=null){var f=a[c+1];if(f===d("WAWamTypes").TYPES.INT&&isNaN(e))return!1}}return!0}function b(a){return typeof a==="number"?!isNaN(a):!0}g.WamBuffer=e;g.canWriteEvent=a;g.canWriteGlobal=b}),98);
__d("WAWam",["Promise","WALogger","WAPromiseEach","WAShiftTimer","WAWamBuffer"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to set private stats ids on a non-private channel"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping putting buffer to sink, as it does not contain any events"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["A WAM event in channel "," was dropped before serialization. Event correct: ",", pending attributes correct: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["A WAM event in channel private was dropped before serialization. Reason: missing psIdIntValue in the event payload"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to create a private buffer without setting private stats id"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to create a private buffer without setting private stats ids"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Sequence number generator not initialised for channel ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Initialized with stream id ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Failed to initialize already initialized WAM"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: Enqueued "," attribute keys for update"]);r=function(){return a};return a}var s=64*1024,t=5*60*1e3,u=3e3,v=1,w=2,x=6005;a=113760892;var y=0,z="none",A={putBuffer:function(a,c,d){return(h||(h=b("Promise"))).resolve()}};c=function(){function a(a){var b=this;this.$2=[];this.$3=new Map();this.$4=!1;this.$5=new Map();this.$8=-1;this.$9=A;this.$10=null;this.deinitialize=function(){b.$4=!1,b.$2=[],b.$3.clear(),b.$5=new Map(),b.$8=-1,b.$9=A,b.serializePending.cancel(),b.finalizeBuffers.cancel()};this.enqueueEvent=function(a,c,d,e,f,g){var h=v;b.$2.push({type:h,id:a,commitTime:c,psIdIntValue:d,weight:f,fields:e,resolve:g});b.$4&&b.serializePending.onOrBefore(u)};this.enqueueAttributesUpdate=function(a){var c={type:w,delta:[]};a.forEach(function(a,b){if(a===void 0)return;c.delta.push([b,a])});c.delta.length>0&&(d("WALogger").LOG(r(),c.delta.length),b.$2.push(c))};this.finalizeBuffers=new(d("WAShiftTimer").ShiftTimer)(function(){b.finalizeBuffers__INTERNAL()});this.serializePending=new(d("WAShiftTimer").ShiftTimer)(function(){b.serializePending__INTERNAL()});this.forceSerializePending=function(){if(!b.$4)return;b.$11()&&b.serializePending.forceRunNow()};this.$1=a}var b=a.prototype;b.initialize=function(a,b,c,e){if(this.$4){d("WALogger").ERROR(q()).sendLogs("wam-initialize");return}this.$7=e;this.$8=a;this.$9=c;this.$10=b;this.$11()&&this.serializePending.forceRunNow();this.$4=!0;d("WALogger").LOG(p(),this.$8)};b.finalizeBuffers__INTERNAL=function(){this.$5.forEach(function(a){a.finalize()}),this.$5.size>0&&this.serializePending.onOrBefore(u)};b.$12=function(a){var b;if(!((b=this.$7)==null?void 0:b.multipleSequences))return"regular";return a===y?"null-psid":a};b.$13=function(a){var b=this.$5.get(a);if(b)return b;var c=this.$12(a);if(this.$10==null){d("WALogger").ERROR(o(),this.$1).sendLogs("wam-serializePending");return}c=this.$10(c);b=new(d("WAWamBuffer").WamBuffer)(this.$1,this.$8,c,this.$3);this.$5.set(a,b);if(a!=="regular"){a;if(this.$6==null)d("WALogger").ERROR(n()).sendLogs("wam-serializePending");else{c=a===y?z:this.$6.get(a);c==null?d("WALogger").ERROR(m()).sendLogs("wam-serializePending"):b.writeGlobal(x,c)}}return b};b.serializePending__INTERNAL=function(){var a=this,b=[];this.finalizeBuffers.onOrBefore(t);var c=new Map(),e=-1;this.$2.forEach(function(f,g){if(f.type===v){var h=!0;c.forEach(function(a){d("WAWamBuffer").canWriteGlobal(a)||(h=!1)});var i=d("WAWamBuffer").canWriteEvent(f.fields);if(i&&h){var j;a.$1==="regular"?j=a.$13("regular"):(a.$1,f.psIdIntValue==null?d("WALogger").ERROR(l()).sendLogs("wam-serializePending"):j=a.$13(f.psIdIntValue));j!=null&&(c.forEach(function(c,b){var d=a.$3.get(b);(d===void 0||d!==c)&&(a.$5.forEach(function(a){return a.writeGlobal(b,c)}),a.$3.set(b,c))}),c.clear(),j.writeEvent(f.commitTime,f.id,f.fields,f.weight))}else d("WALogger").WARN(k(),a.$1,i,h).devConsole("pending attributes",c,"pending event action",f);f.resolve!=null&&b.push(f.resolve);e=g}else{f.type;for(i=0;i<f.delta.length;++i){g=f.delta[i];var m=g[0];g=g[1];c.set(m,g)}}});var f=!1;this.$5.forEach(function(a){(a.isFinalized()||a.getSize()>s)&&(f=!0)});var g=[];this.$5.forEach(function(b,c){b.hasEvents()?g.push([b.getKey(),b.peek(),a.$12(c)]):d("WALogger").WARN(j())});var h=d("WAPromiseEach").promiseEach(g,function(b){var c=b[0],d=b[1];b=b[2];return a.$9.putBuffer(c,d,f,b)}).then(function(){b.forEach(function(a){return void a()})});this.$2=this.$2.slice(e+1);f&&(this.$5=new Map(),this.finalizeBuffers.cancel());return h};b.$11=function(){return this.$2.length>0&&this.$2.some(function(a){return a.type===v})};b.isInitialized=function(){return this.$4};b.getStreamId=function(){return this.$8};b.getPendingActions=function(){return this.$2};b.getBuffers__INTERNAL=function(){return this.$5};b.getGlobals__INTERNAL=function(){return this.$3};b.setGlobals__INTERNAL=function(a){this.$3=a};b.getSink__INTERNAL=function(){return this.$9};b.updatePrivateStatsIds=function(a){if(this.$1!=="private"){d("WALogger").ERROR(i()).sendLogs("wam-updatePrivateStatsIds");return}this.$6=a};return a}();g.PRIVATE_STATS_DEFAULT_PS_ID_KEY_HASH_INT=a;g.Wam=c}),98);
__d("WAWamManager",["WALogger","WAWam"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WamManager: Deinitializing WAM Channel ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM instance for channel "," has already been initialized"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["SequenceNumberGenerator::initializeForChannel: Incorrect combination of parameters: "," "," ",""]);j=function(){return a};return a}var k=65535,l=function(){function a(a){this.$1=new Map(),this.$2=a}var b=a.prototype;b.$3=function(a,b){b==null||b===0?this.$1.set(a,"uninitialized"):b<0?this.$1.set(a,"uninitialized"):this.$1.set(a,b)};b.getSequenceNumber__INTERNAL=function(){return this.$1};b.initializeForChannel=function(a,b){var c=this;b.forEach(function(b,e){var f;if(a==="regular"&&e==="regular")c.$3(e,b);else if(a==="private"&&e!=="regular")c.$3(e,b);else if(a==="private"&&!((f=c.$2)==null?void 0:f.multipleSequences))c.$3(e,b);else{d("WALogger").ERROR(j(),a,e,(f=c.$2)==null?void 0:f.multipleSequences)}})};b.next=function(a){var b=this.$1.get(a),c;b==null||b==="uninitialized"?c=1:(c=b+1,c>k&&(c=1));this.$1.set(a,c);return c};return a}();a=function(){function a(){this.$1=new Map(),this.$2=null}var b=a.prototype;b.getWamInstance=function(a){var b=this.$1.get(a);b||(b=new(d("WAWam").Wam)(a),this.$1.set(a,b));return b};b.initialize=function(a,b,c,e,f){var g=this.getWamInstance(a);if(g.isInitialized()){d("WALogger").WARN(i(),a);return}this.$2==null&&(this.$2=new l(f));var h=this.$2;this.$2.initializeForChannel(a,c);g.initialize(b,function(a){return h.next(a)},e,f)};b.deinitialize=function(){this.$1.forEach(function(a,b){a.isInitialized()&&(d("WALogger").LOG(h(),b),a.deinitialize())}),this.$2=null};b.enqueueEvent=function(a,b,c,d,e,f,g){a=this.getWamInstance(a);a.enqueueEvent(b,c,d,e,f,g)};b.enqueueAttributesUpdate=function(a,b){a=this.getWamInstance(a);a.enqueueAttributesUpdate(b)};b.updatePrivateStatsIds=function(a){var b=this.getWamInstance("private");b.updatePrivateStatsIds(a)};b.forceFlushBuffers=function(){this.$1.forEach(function(a){a.forceSerializePending()})};b.rotateBuffers=function(){this.$1.forEach(function(a){a.finalizeBuffers.forceRunNow()})};b.getSequenceNumberGenerator__INTERNAL=function(){return this.$2};return a}();g.WamManager=a}),98);
__d("WAWamUtils",["WABase64","WAErr","WALogger","WAWamTypes"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["logAttributes WAM channel is not an array"]);j=function(){return a};return a}var k=(h={},h[(i=d("WAWamTypes")).TYPES.INT]="number",h[i.TYPES.FLOAT]="number",h[i.TYPES.STRING]="string",h[i.TYPES.BOOL]="boolean",h);function a(a,b){if(b==null||b.length===0)return a;var c=new Map();for(var d=0;d<a.length;d+=3){var e=a[d];c.set(e,d)}for(e=0;e<b.length;++e){d=b[e];var f=d[0],g=d[1];d=d[2];if(d==null)continue;var h=c.get(f);if(h!=null){var i=a[h+2];if(i!==void 0)continue}i=k[g];i===typeof d&&(h==null?(c.set(f,a.length),a.push(f,g,d)):a[h+2]=d)}return a}function b(a){var b=new Map(),e=new Map();for(var f=0;f<a.length;f+=4){var g=a[f],h=a[f+1],i=a[f+2],k=a[f+3];if(i===d("WAWamTypes").TYPES.FLOAT)throw c("WAErr")("Float attributes are currently not supported in runtime");if(!Array.isArray(g)){d("WALogger").ERROR(j()).sendLogs("wam-log-attributes");return}g.includes("regular")&&b.set(h,k);g.includes("private")&&e.set(h,k)}return{deltaRegular:b,deltaPrivate:e}}function e(a,b){var c=[];b.forEach(function(b){var e=b.channel;if(e==null){if(a!=="regular")return}else if(e!==a)return;if(b.finished){e=new Uint8Array(d("WABase64").decodeB64(b.buffer));b=b.key;c.push({key:b,content:e})}});return c}function l(a){return JSON.stringify([a.streamId,a.sequenceNumber,a.channel])}function f(a,b,c,e,f){var g=l(a);return{bufferKey:g,meta:{streamId:a.streamId,sequenceNumber:a.sequenceNumber},bufferRow:{key:g,channel:b,streamId:c,buffer:d("WABase64").encodeB64(e),finished:f}}}function m(a){var b=null;a&&(b=a.sequenceNumber);return b}g.appendRawFields=a;g.getDeltaFromAttributes=b;g.getFinishedBuffers=e;g.asBufferEntry=f;g.getSequenceNumber=m}),98);
__d("WAWamEntrypoint",["Promise","WALogger","WAWamManager","WAWamUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wamEntrypoint: logAttributes"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["wamEntrypoint: logAsync"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["wamEntrypoint: log"]);k=function(){return a};return a}var l=1,m=!1,n=null;function o(){n||(n=new(d("WAWamManager").WamManager)());return n}function a(){m=!0}function c(a,b,c,d,e){o().initialize(c,a,b,d,e)}function e(){o().deinitialize()}function f(a,b,c,e,f,g,h){g===void 0&&(g=l);var i=Date.now();m&&h!=null&&d("WALogger").DEV(k()).devConsole(babelHelpers["extends"]({},h,{id:b,arrayFields:e,rawFields:f,weight:g}));o().enqueueEvent(a,b,i,c,d("WAWamUtils").appendRawFields(e,f),g)}function p(a,c,e,f,g,i,k){i===void 0&&(i=l);var n=Date.now();m&&k!=null&&d("WALogger").DEV(j()).devConsole(babelHelpers["extends"]({},k,{id:c,arrayFields:f,rawFields:g,weight:i}));return new(h||(h=b("Promise")))(function(b){o().enqueueEvent(a,c,n,e,d("WAWamUtils").appendRawFields(f,g),i,b)})}function q(a,b){var c=d("WAWamUtils").getDeltaFromAttributes(a);if(c==null)return;var e=c.deltaRegular;c=c.deltaPrivate;m&&b!=null&&d("WALogger").DEV(i()).devConsole(babelHelpers["extends"]({},b,{attributes:a,deltaRegular:e,deltaPrivate:c}));e.size>0&&o().enqueueAttributesUpdate("regular",e);c.size>0&&o().enqueueAttributesUpdate("private",c)}function r(a){o().updatePrivateStatsIds(a)}function s(){o().forceFlushBuffers()}function t(){o().rotateBuffers()}g.enableDebugMode=a;g.initializeWAM=c;g.deinitializeWAM=e;g.log=f;g.logAsync=p;g.logAttributes=q;g.updatePrivateStatsIds=r;g.forceFlushBuffers=s;g.rotateBuffers=t}),98);
__d("WAWamChannelManager",[],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(){this.$1=new Map(),this.$2=new Map()}var b=a.prototype;b.getChannelInitialized=function(a){return this.$2.get(a)||!1};b.setChannelInitialized=function(a){this.$2.set(a,!0)};b.isSinkBusy=function(a){return this.$1.get(a)||!1};b.setSinkBusy=function(a,b){this.$1.set(a,b)};b.close=function(){var a=this;this.$1.forEach(function(b,c){a.$1.set(c,!1)});this.$2.forEach(function(b,c){a.$2.set(c,!1)})};return a}(),h;function a(){h==null&&(h=new g());return h}function b(){h!=null&&h.close()}f.getChannelManager=a;f.closeChannelManager=b}),66);
__d("WAWamStorage",["Promise","WAErr","WALogger","WATimeUtils","WAWamChannelManager","WAWamEntrypoint","WAWamUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["The private stats token was redeemed maximum number of time. The client shall re-issue a new one"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["The private stats token expired. The client shall re-issue a new one"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Buffer "," is scheduled for send"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Successfully put buffer "," to sink"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Sink flush did not happen within timeout, buffer is not saved"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["startWamStorage: called again"]);n=function(){return a};return a}var o=null,p=null;function q(a){if(p)return p;else throw c("WAErr")("WamStorage::"+a+" called before startWamStorage")}function a(a){p==null?p=a:d("WALogger").WARN(n()).sendLogs("startWamStorage")}function e(){d("WAWamEntrypoint").deinitializeWAM(),d("WAWamChannelManager").closeChannelManager(),p=null,o=null}function f(e,f,g,i){var a=q("initializeWAMSink"),j=d("WAWamChannelManager").getChannelManager();if(j.getChannelInitialized(f))return(h||(h=b("Promise"))).resolve();j.setChannelInitialized(f);var n=a.getStreamId(e),r={putBuffer:function(c,e,i,o){if(j.isSinkBusy(f)){d("WALogger").WARN(m());return(h||(h=b("Promise"))).resolve()}j.setSinkBusy(f,!0);e=d("WAWamUtils").asBufferEntry(c,f,n,e,i);var p=e.bufferKey,q=e.meta;e=e.bufferRow;return a.saveBuffer(q,e,o).then(function(){var a=[c.streamId,c.sequenceNumber];d("WALogger").LOG(l(),a);i&&(g(),d("WALogger").LOG(k(),p))})["finally"](function(){j.setSinkBusy(f,!1)})}};o==null&&(o=a.finishBuffer(n));return o.then(function(){if(a.getStartingSequenceNumbers){a.getStartingSequenceRow;return a.getStartingSequenceNumbers(f,n)}else{a.getStartingSequenceRow;if(i==null?void 0:i.multipleSequences)throw c("WAErr")("getStartingSequenceRow must not used when enabling support for multiple sequences");return a.getStartingSequenceRow(n).then(function(a){a=d("WAWamUtils").getSequenceNumber(a);var b=new Map();b.set("regular",a);return b})}}).then(function(b){d("WAWamEntrypoint").initializeWAM(n,b,f,r,i),f==="private"&&a.updatePrivateStatsIds&&a.updatePrivateStatsIds().then(d("WAWamEntrypoint").updatePrivateStatsIds)})}function r(a){return q("getFinishedStreamBuffers").getBuffers().then(function(b){return d("WAWamUtils").getFinishedBuffers(a,b)})}var s=64,t=function(a,b){var c=(b==null?void 0:b.maxRedeemCount)!=null&&b.maxRedeemCount!==0?b.maxRedeemCount:s;b=(b==null?void 0:b.maxExpirySeconds)!=null&&b.maxExpirySeconds!==0?b.maxExpirySeconds:d("WATimeUtils").DAY_SECONDS;c={maxRedeemCount:c,maxExpirySeconds:b};if(!d("WATimeUtils").happenedWithin(a.creationTs,c.maxExpirySeconds)){d("WALogger").LOG(j());return!1}if(a.redeemCount>=c.maxRedeemCount){d("WALogger").LOG(i());return!1}return!0};function u(){var a=q("getPrivateStatsToken");if(!a.redeemPrivateStatsToken)throw c("WAErr")("redeemPrivateStatsToken not implemented for WAM DB");return a.redeemPrivateStatsToken(t)}function v(b){var a=q("savePrivateStatsToken");if(!a.savePrivateStatsToken)throw c("WAErr")("savePrivateStatsToken not implemented for WAM DB");return a.savePrivateStatsToken(b)}function w(){var a=q("privateStatsKillSwitchGetBlockedToken");if(!a.privateStatsKillSwitchGetBlockedToken)throw c("WAErr")("privateStatsKillSwitchGetBlockedToken not implemented for WAM DB");return a.privateStatsKillSwitchGetBlockedToken()}function x(b){var a=q("privateStatsKillSwitchSet");if(!a.privateStatsKillSwitchSet)throw c("WAErr")("privateStatsKillSwitchSet not implemented for WAM DB");return a.privateStatsKillSwitchSet(b)}function y(a){return q("removeBufferByKey").removeBufferByKey(a)}function z(){return q("nukeMetrics").nukeMetrics()}g.startWamStorage=a;g.closeWamStorage=e;g.initializeWAMSink=f;g.getFinishedStreamBuffers=r;g.redeemPrivateStatsToken=u;g.savePrivateStatsToken=v;g.privateStatsKillSwitchGetBlockedToken=w;g.privateStatsKillSwitchSet=x;g.removeBufferByKey=y;g.nukeMetrics=z}),98);
__d("WAWebWamEnumApplicationState",[],(function(a,b,c,d,e,f){a=Object.freeze({FOREGROUND:1,BACKGROUND:2});f.APPLICATION_STATE=a}),66);
__d("WAWebWamEnumProjectCode",[],(function(a,b,c,d,e,f){a=Object.freeze({DIT:1,DIRECTORY_SEARCH:2});f.PROJECT_CODE=a}),66);
__d("WAWebWamEnumSignCredentialResult",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,ERROR_BAD_REQUEST:2,ERROR_SERVER:3,ERROR_OTHER:4,ERROR_CLIENT_NETWORK:5});f.SIGN_CREDENTIAL_RESULT=a}),66);
__d("WAWebSignCredentialWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumProjectCode","WAWebWamEnumSignCredentialResult"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({SignCredential:[2242,{applicationState:[6,d("WAWebWamEnumApplicationState").APPLICATION_STATE],isFromWameta:[8,a.TYPES.BOOLEAN],overallT:[4,a.TYPES.TIMER],projectCode:[7,d("WAWebWamEnumProjectCode").PROJECT_CODE],retryCount:[2,a.TYPES.INTEGER],signCredentialResult:[1,d("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT],signCredentialT:[3,a.TYPES.TIMER],waConnectedToChatd:[5,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{SignCredential:[]});g.SignCredentialWamEvent=b}),98);
__d("WAWamPrivateStatsToken",["WACryptoEd25519","WACryptoPrimitives"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WACryptoEd25519").runInAllocationScope(function(){var c,e=(c=d("WACryptoEd25519")).p3Element(),f=c.allocate(Uint8Array,32);f.set(b);h(f);d("WACryptoPrimitives").lowlevel.scalarbase(e,f);f=c.hashToPoint(a);var g=d("WACryptoPrimitives").lowlevel.add;g(f,e);g=new Uint8Array(32);c.pack(g,f);return g})}function b(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e=d("WACryptoEd25519").p3Element();if(d("WACryptoEd25519").unpack(e,a))return null;var f=d("WACryptoEd25519").p3Element();if(d("WACryptoEd25519").unpackneg(f,c)!==0)return null;var g=d("WACryptoEd25519").allocate(Uint8Array,32);g.set(b);h(g);var i=d("WACryptoEd25519").p3Element();d("WACryptoPrimitives").lowlevel.scalarmult(i,f,g);f=d("WACryptoPrimitives").lowlevel.add;f(e,i);g=new Uint8Array(32);d("WACryptoEd25519").pack(g,e);return g})}function h(a){a[0]&=248,a[31]&=127,a[31]|=64}g.blindToken=a;g.unblindToken=b}),98);
__d("privateStatsToken",["Promise","WABinary","WACryptoDependencies","WACryptoPrimitives","WADeprecatedSendIq","WADeprecatedWapParser","WAErrors","WALogger","WAPromiseRetryLoop","WATimeUtils","WAWamPrivateStatsToken","WAWamStorage","WAWap"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: Disconnected"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: failed to unblind the signed token"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: failed ",""]);k=function(){return a};return a}var l=3,m=new(c("WADeprecatedWapParser"))("issuePrivateStatsToken",function(a){a=a.child("sign_credential");var b=a.child("signed_credential");b=b.contentBytes();a=a.child("acs_public_key");a=a.contentBytes();return{signedCredential:b,acsPublicKey:a}});function n(a){switch(a.errorCode){case 400:return"bad-request";case 500:return"internal-server-error";case 501:return"feature-not-implemented";case 503:return"service-unavailable";default:return"unknown"}}function o(a){var c=d("WATimeUtils").monotonicTime(),e={overallStartTime:c,retryStartTime:c,retryAttemptsLeft:l},f=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(f);var g=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(g);var o=d("WAWamPrivateStatsToken").blindToken(f,g);c=function(c){e.retryAttemptsLeft<l&&(e.retryStartTime=d("WATimeUtils").monotonicTime());var p=d("WAWap").wap("iq",{xmlns:"privatestats",id:d("WAWap").generateId(),type:"get",to:d("WAWap").S_WHATSAPP_NET},d("WAWap").wap("sign_credential",{version:"1"},d("WAWap").wap("blinded_credential",null,o))),q=a||d("WADeprecatedSendIq").deprecatedSendIqWithoutRetry;return q(p,m).then(function(a){if(!a.success){var b=n(a);d("WALogger").WARN(k(),b);b!=="internal-server-error"||e.retryAttemptsLeft<=0?c({result:null,metric:babelHelpers["extends"]({},e,{result:b})}):e.retryAttemptsLeft--;return}b=a.result;a=b.signedCredential;b=b.acsPublicKey;a=d("WAWamPrivateStatsToken").unblindToken(a,g,b);if(a==null){d("WALogger").WARN(j());c({result:null,metric:babelHelpers["extends"]({},e,{result:"decryption-error"})});return}b=d("WABinary").Binary.build(f,a);a=d("WACryptoPrimitives").hash(b.readByteArray());c({result:{token:f,sharedSecret:a},metric:babelHelpers["extends"]({},e,{result:"success"})})})["catch"](function(a){if(a instanceof d("WAErrors").Disconnected)d("WALogger").WARN(i()),e.retryAttemptsLeft<=0?c({result:null,metric:babelHelpers["extends"]({},e,{result:"disconnected"})}):e.retryAttemptsLeft--;else return(h||(h=b("Promise"))).reject(a)})};c=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"issuePrivateStatsToken",timer:{algo:{type:"exponential",first:250},max:1e3},code:c});c.start();return c.promise()}function a(a){return d("WAWamStorage").redeemPrivateStatsToken().then(function(b){return b?{result:b}:o(a).then(function(a){var b=babelHelpers["extends"]({},a);a=a.result;return a?d("WAWamStorage").savePrivateStatsToken(a).then(function(){return b}):b})})}g.issuePrivateStatsToken=o;g.getToken=a}),98);
__d("WAWebIssuePrivateStatsToken",["WADeprecatedSendIq","WALogger","WASemaphore","WATimeUtils","WAWebSignCredentialWamEvent","WAWebWamEnumApplicationState","WAWebWamEnumSignCredentialResult","asyncToGeneratorRuntime","privateStatsToken"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Couldn't get a private stats token"]);h=function(){return a};return a}var i=3;function j(a){switch(a){case"success":return d("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.SUCCESS;case"bad-request":return d("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_BAD_REQUEST;case"internal-server-error":return d("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_SERVER;case"disconnected":return d("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_CLIENT_NETWORK;default:a;return d("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_OTHER}}function k(a){var b=a.result,c=a.overallStartTime,e=a.retryStartTime;a=a.retryAttemptsLeft;var f=j(b);new(d("WAWebSignCredentialWamEvent").SignCredentialWamEvent)({signCredentialResult:f,overallT:d("WATimeUtils").monotonicTimeSince(c),signCredentialT:d("WATimeUtils").monotonicTimeSince(e),retryCount:i-a,waConnectedToChatd:b!=="disconnected",applicationState:document.visibilityState==="visible"?d("WAWebWamEnumApplicationState").APPLICATION_STATE.FOREGROUND:d("WAWebWamEnumApplicationState").APPLICATION_STATE.BACKGROUND}).commit()}var l=new(d("WASemaphore").Semaphore)(1);function a(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield l.acquire());try{var b=(yield d("privateStatsToken").getToken(d("WADeprecatedSendIq").deprecatedSendIqWithoutRetry)),c=b.result;b=b.metric;b!=null&&k(b);c||d("WALogger").WARN(h());return c}finally{a.release()}});return m.apply(this,arguments)}g.getToken=a}),98);
__d("WAWebWamEnumPsBufferUploadResult",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,ERROR_PARSING:2,ERROR_DECODING:3,ERROR_CREDENTIAL:4,ERROR_OTHER:5,ERROR_CLIENT_NETWORK:6,ERROR_WAIT_FOR_TOKEN:7,ERROR_SERVER_OTHER:8,SKIPPED_NO_NETWORK:9,SKIPPED_NO_DATA:10,ERROR_ACCESS_TOKEN:11});f.PS_BUFFER_UPLOAD_RESULT=a}),66);
__d("WAWebWamEnumPsTokenNotReadyReason",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_REASON:0,REASON_UNKNOWN:1,REASON_WAIT_FOR_FIRST_TOKEN:2,REASON_INVALID_SHARED_KEY:3,REASON_INVALID_FACTOR:4,REASON_GEN_FACTOR_FAILURE:5,REASON_COMPUTE_HMAC_FAILURE:6,REASON_BLIND_FAILURE:7,REASON_UNBLIND_FAILURE:8,REASON_LAST_SIGNREQ_NETWORK_FAILURE:9,REASON_LAST_SIGNREQ_SERVER_ERROR:10,REASON_LAST_SIGNREQ_BAD_REQUEST:11,REASON_LAST_SIGNREQ_OTHER_ERROR:12,REASON_WAIT_FOR_GEN_TOKEN:13,REASON_GEN_SHAREDKEY_FAILURE:14,REASON_WAIT_FOR_GEN_FIRST_TOKEN:15});f.PS_TOKEN_NOT_READY_REASON=a}),66);
__d("WAWebWamEnumPsUploadReason",[],(function(a,b,c,d,e,f){a=Object.freeze({REASON_PS_PINGER:0,REASON_PS_OFFCYCLE:1});f.PS_UPLOAD_REASON=a}),66);
__d("WAWebPsBufferUploadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumPsBufferUploadResult","WAWebWamEnumPsTokenNotReadyReason","WAWebWamEnumPsUploadReason"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PsBufferUpload:[2244,{applicationState:[6,d("WAWebWamEnumApplicationState").APPLICATION_STATE],isFromWamsys:[12,a.TYPES.BOOLEAN],isUserSampled:[14,a.TYPES.BOOLEAN],psBufferSequenceNumber:[13,a.TYPES.INTEGER],psBufferUploadHttpResponseCode:[3,a.TYPES.INTEGER],psBufferUploadResult:[1,d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT],psBufferUploadT:[2,a.TYPES.TIMER],psDitheredT:[11,a.TYPES.INTEGER],psForceUpload:[10,a.TYPES.BOOLEAN],psTokenNotReadyReason:[4,d("WAWebWamEnumPsTokenNotReadyReason").PS_TOKEN_NOT_READY_REASON],psUploadReason:[9,d("WAWebWamEnumPsUploadReason").PS_UPLOAD_REASON],waConnectedToChatd:[5,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{PsBufferUpload:[]});g.PsBufferUploadWamEvent=b}),98);
__d("privateStatsUpload",["Promise","WABase64","WACryptoHmac","WALogger","WAPromiseRetryLoop","WATimeUtils","WAWamStorage","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ran out of available retries for a private stats buffer submission"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported code value in the error response 400 from PrivateStats upload request: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported subcode value in the error response 400 from PrivateStats upload request: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incorrect code or subcode in the error response 400 from PrivateStats upload request"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incorrect or missing error entry in the error response 400 from PrivateStats upload request"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to parse error response 400 from PrivateStats upload request or parsed response is not an object"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported response status code from PrivateStats upload request: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Try to submit metrics without being connected to the VPN. The PrivateStats endpoint seems to reject VPN originating connections at the CORS check level"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Upload of a private stats buffer failed: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Couldn't get token to submit a private stats buffer"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Removing private stats buffer without submitting it (kill switch)"]);s=function(){return a};return a}var t="https://dit.whatsapp.net/deidentified_telemetry",u="245118376424571|3e7d275052f1522bf3200afcf53841a7",v=0,w="WAMEventBuffer.dat",x=3,y=9,z=111e3,A=3067002,B=3067003,C=3067004;function D(a){return{result:a.result,httpResponseCode:a.httpResponseCode,uploadTime:d("WATimeUtils").monotonicTimeSince(a.uploadStartTime)}}function E(a,c,e,f){var g,i,j,k,l,m,n,x,y,z,A,B,C,D,E,G;return b("regeneratorRuntime").async(function(H){while(1)switch(H.prev=H.next){case 0:H.next=2;return b("regeneratorRuntime").awrap(d("WAWamStorage").privateStatsKillSwitchGetBlockedToken());case 2:H.t0=H.sent;H.t1=u;if(!(H.t0===H.t1)){H.next=7;break}d("WALogger").LOG(s());return H.abrupt("return",d("WAWamStorage").removeBufferByKey(e.key).then(function(){a()}));case 7:g=d("WATimeUtils").monotonicTime();H.next=10;return b("regeneratorRuntime").awrap(f());case 10:i=H.sent;if(!(i==null)){H.next=15;break}d("WALogger").ERROR(r());a();return H.abrupt("return");case 15:j=new FormData();j.append("access_token",u);H.next=19;return b("regeneratorRuntime").awrap(d("WACryptoHmac").hmacSha256(i.sharedSecret,e.content));case 19:k=H.sent;l=d("WABase64").encodeB64UrlSafe(i.token,!0);m=d("WABase64").encodeB64UrlSafe(k,!0);n=l+"+"+m;j.append("credential",n);j.append("message",new Blob([e.content],{type:"application/octet-stream"}),w);j.append("meta_data",JSON.stringify({t:d("WATimeUtils").unixTime(),p:v}));x={method:"POST",body:j,"Content-Type":"multipart/form-data"};H.prev=27;H.next=30;return b("regeneratorRuntime").awrap(fetch(t,x));case 30:y=H.sent;H.next=39;break;case 33:H.prev=33;H.t2=H["catch"](27);d("WALogger").WARN(q(),H.t2);d("WALogger").DEV(p());c({uploadStartTime:g,result:"error-other"});return H.abrupt("return");case 39:z=y.status;A=function(b){a({uploadStartTime:g,httpResponseCode:z,result:b})};B=function(a){c({uploadStartTime:g,httpResponseCode:z,result:a})};H.t3=z;H.next=H.t3===200?45:H.t3===429?46:H.t3===401?48:H.t3===400?49:H.t3===500?57:59;break;case 45:return H.abrupt("return",d("WAWamStorage").removeBufferByKey(e.key).then(function(){A("success")}));case 46:A("error-server-other");return H.abrupt("return");case 48:return H.abrupt("return",(h||(h=b("Promise"))).all([d("WAWamStorage").privateStatsKillSwitchSet(u),d("WAWamStorage").removeBufferByKey(e.key)]).then(function(){A("error-access-token")}));case 49:H.next=51;return b("regeneratorRuntime").awrap(F(y));case 51:C=H.sent;D=C.result;E=C.shouldRetry;G={uploadStartTime:g,httpResponseCode:z,result:D};E==="retry"?c(G):a(G);return H.abrupt("return");case 57:B("error-server-other");return H.abrupt("return");case 59:d("WALogger").WARN(o(),z);B("error-other");return H.abrupt("return");case 62:case"end":return H.stop()}},null,this,[[27,33]])}function F(a){var c,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(a.json()["catch"](function(){}));case 2:c=h.sent;if(!(typeof c!=="object")){h.next=6;break}d("WALogger").WARN(n());return h.abrupt("return",{result:"error-other",shouldRetry:"retry"});case 6:e=c.error;if(!(typeof e!=="object")){h.next=10;break}d("WALogger").WARN(m());return h.abrupt("return",{result:"error-other",shouldRetry:"retry"});case 10:f=e.code,g=e.error_subcode;if(!(typeof f!=="number"||typeof g!=="number")){h.next=14;break}d("WALogger").WARN(l());return h.abrupt("return",{result:"error-other",shouldRetry:"retry"});case 14:h.t0=f;h.next=h.t0===y?17:h.t0===z?18:26;break;case 17:return h.abrupt("return",{result:"error-server-other",shouldRetry:"no-retry"});case 18:h.t1=g;h.next=h.t1===A?21:h.t1===B?22:h.t1===C?23:24;break;case 21:return h.abrupt("return",{result:"error-parsing",shouldRetry:"retry"});case 22:return h.abrupt("return",{result:"error-decoding",shouldRetry:"retry"});case 23:return h.abrupt("return",{result:"error-credential",shouldRetry:"retry"});case 24:d("WALogger").WARN(k(),g);return h.abrupt("return",{result:"error-other",shouldRetry:"retry"});case 26:d("WALogger").WARN(j(),f);return h.abrupt("return",{result:"error-other",shouldRetry:"retry"});case 28:case"end":return h.stop()}},null,this)}function G(a,c){a=a.map(function(a){var b=x,e=[],f=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"uploadPrivateStatsBuffer",timer:{algo:{type:"exponential",first:250},max:1e3},code:function(f){return E(f,function(a){a=D(a);e.push(a);b<=0?(d("WALogger").DEV(i()),f()):b--},a,c)}});f.start();return f.promise().then(function(b){if(b!=null){var c=D(b);e.push(c)}return{uploadedBufferKey:(b==null?void 0:b.result)==="success"?a.key:null,metrics:e}})});return(h||(h=b("Promise"))).all(a).then(function(a){var b=a.reduce(function(a,b){a.push.apply(a,b.metrics);return a},[]);a=a.reduce(function(a,b){b.uploadedBufferKey!=null&&a.push(b.uploadedBufferKey);return a},[]);return{uploadedBufferKeys:a,metrics:b}})}function a(a){return d("WAWamStorage").getFinishedStreamBuffers("private").then(function(b){return G(b,a)})}g.upload_UNSAFE_INTERNAL_DO_NOT_USE=G;g.uploadFinishedPrivateStatsBuffers=a}),98);
__d("WAWebUploadPrivateStatsBackend",["Promise","WABackoffUtils","WABase64","WALogger","WAPromiseDelays","WAPromiseLoop","WAWebABProps","WAWebIssuePrivateStatsToken","WAWebNetworkStatus","WAWebPsBufferUploadWamEvent","WAWebWamEnumApplicationState","WAWebWamEnumPsBufferUploadResult","asyncToGeneratorRuntime","privateStatsUpload"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs retry on error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs failure error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs success"]);k=function(){return a};return a}function a(a,c){if(!d("WAWebABProps").getABPropConfigValue("web_ps_v3_enabled"))return(h||(h=b("Promise"))).resolve(c);var e=new Uint8Array(d("WABase64").decodeB64(a));return n(c,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("privateStatsUpload").upload_UNSAFE_INTERNAL_DO_NOT_USE([{key:c,content:e}],d("WAWebIssuePrivateStatsToken").getToken)),f=b.uploadedBufferKeys;b=b.metrics;b.map(m);f.length===0&&a(c);d("WALogger").DEV(k());a(void 0)});return function(b){return a.apply(this,arguments)}}())}function l(a){switch(a){case"success":return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.SUCCESS;case"error-server-other":return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_SERVER_OTHER;case"error-parsing":return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_PARSING;case"error-decoding":return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_DECODING;case"error-credential":return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_CREDENTIAL;case"error-other":return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_OTHER;default:a;return d("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_ACCESS_TOKEN}}function m(a){var b=a.result,c=a.uploadTime;a=a.httpResponseCode;b=l(b);new(d("WAWebPsBufferUploadWamEvent").PsBufferUploadWamEvent)({psBufferUploadResult:b,psBufferUploadT:c,psBufferUploadHttpResponseCode:a,applicationState:document.visibilityState==="visible"?d("WAWebWamEnumApplicationState").APPLICATION_STATE.FOREGROUND:d("WAWebWamEnumApplicationState").APPLICATION_STATE.BACKGROUND}).commit()}function n(a,e){return d("WAPromiseLoop").promiseLoop(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f,g){f=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(g,12e4,1e3,.1));try{yield c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal});return yield e(b)}catch(c){if(g>1){d("WALogger").WARN(j(),String(c)).devConsole(c);return b(a)}d("WALogger").DEV(i(),String(c));return f}});return function(a,b,c){return f.apply(this,arguments)}}())}g["default"]=a}),98);
__d("WASmaxInStatsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInStatsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInStatsIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"field");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"reason");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,reason:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"field",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,field:b.value})}g.parseIQErrorNotAcceptableField=h;g.parseIQErrorNotAcceptableMixin=a}),98);
__d("WASmaxInStatsIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup",["WAResultOrError","WASmaxInStatsIQErrorBadRequestMixin","WASmaxInStatsIQErrorFeatureNotImplementedMixin","WASmaxInStatsIQErrorNotAcceptableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInStatsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInStatsIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:c.value});var e=d("WASmaxInStatsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorNotAcceptable","IQErrorFeatureNotImplemented"],[b,c,e])}g.parseIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup=a}),98);
__d("WASmaxInStatsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInStatsSendBufferResponseErrorNoRetry",["WAResultOrError","WASmaxInStatsIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup","WASmaxInStatsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInStatsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInStatsIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup").parseIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup:b.value}))}g.parseSendBufferResponseErrorNoRetry=a}),98);
__d("WASmaxInStatsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInStatsSendBufferResponseErrorRetry",["WAResultOrError","WASmaxInStatsIQErrorResponseMixin","WASmaxInStatsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInStatsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(c.value);if(!c.success)return c;a=d("WASmaxInStatsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorServiceUnavailableMixin:c.value},a.value))}g.parseSendBufferResponseErrorRetry=a}),98);
__d("WASmaxInStatsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInStatsSendBufferResponseSuccess",["WASmaxInStatsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInStatsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseSendBufferResponseSuccess=a}),98);
__d("WASmaxOutStatsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutStatsSendBufferRequest",["WASmaxJsx","WASmaxOutStatsBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.addT;a=a.addElementValue;b=d("WASmaxOutStatsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"w:stats",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("add",{t:d("WAWap").INT(b)},a)));return b}g.makeSendBufferRequest=a}),98);
__d("WASmaxStatsSendBufferRPC",["WAComms","WASmaxInStatsSendBufferResponseErrorNoRetry","WASmaxInStatsSendBufferResponseErrorRetry","WASmaxInStatsSendBufferResponseSuccess","WASmaxOutStatsSendBufferRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutStatsSendBufferRequest").makeSendBufferRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInStatsSendBufferResponseSuccess").parseSendBufferResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"SendBufferResponseSuccess",value:g.value});case 7:h=d("WASmaxInStatsSendBufferResponseErrorNoRetry").parseSendBufferResponseErrorNoRetry(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"SendBufferResponseErrorNoRetry",value:h.value});case 10:i=d("WASmaxInStatsSendBufferResponseErrorRetry").parseSendBufferResponseErrorRetry(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"SendBufferResponseErrorRetry",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SendBuffer",{Success:g,ErrorNoRetry:h,ErrorRetry:i}));case 14:case"end":return j.stop()}},null,this)}g.sendSendBufferRPC=a}),98);
__d("WAWebStatsUploadJob",["Promise","WALogger","WASmaxStatsSendBufferRPC","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["SendBufferResponseErrorRetry: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["SendBufferResponseErrorNoRetry: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC SendBufferResponseSuccess"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC end"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC start"]);m=function(){return a};return a}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){d("WALogger").LOG(m());c=(yield d("WASmaxStatsSendBufferRPC").sendSendBufferRPC({addT:c,addElementValue:a}));d("WALogger").LOG(l());if(c.name==="SendBufferResponseSuccess"){d("WALogger").LOG(k());return(h||(h=b("Promise"))).resolve()}else c.name==="SendBufferResponseErrorNoRetry"?(a=c.value.errorIQErrorBadRequestOrNotAcceptableOrFeatureNotImplementedMixinGroup.value,d("WALogger").DEV(j(),a.code)):(c.name,a=c.value.errorIQErrorServiceUnavailableMixin,d("WALogger").DEV(i(),a.code));c=a;a=c.code;c=c.text;return{errorCode:parseInt(a,10),errorText:c}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebUploadStatsBackend",["WABackoffUtils","WABase64","WALogger","WAPromiseDelays","WAPromiseLoop","WATimeUtils","WAWebBackendErrors","WAWebNetworkStatus","WAWebStatsUploadJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs retry on error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs failure error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs success"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendLogs b64len:",""]);k=function(){return a};return a}function a(a,e){d("WALogger").DEV(k(),a.length);var f=new Uint8Array(d("WABase64").decodeB64(a)),g=d("WATimeUtils").unixTime();return l(e,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("WAWebStatsUploadJob")(f,g));if(b==null?void 0:b.errorCode)if(b.errorCode>=500)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode,b.errorText);else a(e);d("WALogger").DEV(j());a(void 0)});return function(b){return a.apply(this,arguments)}}())}function l(a,e){return d("WAPromiseLoop").promiseLoop(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f,g){f=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(g,12e4,1e3,.1));try{yield c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal});return yield e(b)}catch(c){if(g>1){d("WALogger").WARN(i(),String(c)).devConsole(c);return b(a)}d("WALogger").DEV(h(),String(c));return f}});return function(a,b,c){return f.apply(this,arguments)}}())}g["default"]=a}),98);
__d("WAWebCoreWamIntegration",["Promise","WABase64","WALogger","WATaskScheduler","WAWamEntrypoint","WAWamStorage","WAWamTypes","WAWebABProps","WAWebEventSampling","WAWebUploadPrivateStatsBackend","WAWebUploadStatsBackend","WAWebWamCodegenUtils","gkx"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core:updatePrivateStatsIds updating psId's in core wam!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core:set Setting attribute in core wam!"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core:commit Committing to core wam!"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core:initializeCoreWam Initializing!"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam: Uploaded regular event with key=",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam: Not able to upload regular event with key=",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core: send regular buffer ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam: Uploaded private event with key=",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam: Not able to upload private event with key=",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core: send private buffer ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core:initializeCoreWam Set global ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core:translateFields = ",", eventID = ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam-core: translateAttribute = ",", name = ",""]);v=function(){return a};return a}var w={name:"console-test",fieldIds:[],fieldTypes:[],fields:[]},x=Object.freeze({integer:(i=d("WAWamTypes")).TYPES.INT,string:i.TYPES.STRING,"boolean":i.TYPES.BOOL,number:i.TYPES.FLOAT,timer:i.TYPES.INT}),y=!1,z=!1,A,B=!1,C=[],D=[];function a(a){var b=Object.keys(a);if(b.length===0)return!1;for(var c=0;c<D.length;c++){var d=D[c],e=0;for(var f=0;f<b.length;f++)if(d[b[f]]===a[b[f]])e++;else break;if(e===b.length)return!0}return!1}function E(){y||(d("WAWamEntrypoint").enableDebugMode(),y=!0)}function F(a){return x[a]===void 0?d("WAWamTypes").TYPES.INT:x[a]}function G(a,b){a=d("WAWebWamCodegenUtils").metrics.getGlobal(a);return H(a,b)}function H(a,b){var c=[];c.push([].concat(a.channels),a.id,F(a.type),(b=b)!=null?b:null);d("WALogger").DEV(v(),JSON.stringify(c),a.name);return c}function I(a){var b=Object.keys(a.all),c=[];for(var e=0;e<b.length;e++){var f=d("WAWebWamCodegenUtils").metrics.getEvent(a.$className,b[e]),g=a.all[b[e]];c.push(f.id,F(f.type),g)}d("WALogger").DEV(u(),JSON.stringify(c),a.id);return c}function J(a){var b;b=(b=d("WAWebEventSampling").getClientEventSamplingWeight(a.id))!=null?b:a.weight;a={id:a.id,channel:a.wamChannel,psIdIntValue:a.privateStatsIdInt,fields:I(a),weight:b,rawFields:[],debug:w};return a}function K(){var a=d("WAWebABProps").getABPropConfigValue("web_abprop_core_wam_runtime");if(!a)return;C.push(d("WAWamStorage").initializeWAMSink("backend","regular",function(){return d("WATaskScheduler").rescheduleNow("sendCoreWamRegularMetrics")}));C.push(d("WAWamStorage").initializeWAMSink("backend","private",function(){return d("WATaskScheduler").rescheduleNow("sendCoreWamPrivateMetrics")}));Object.keys(A).forEach(function(a){d("WALogger").DEV(t(),a),d("WAWamEntrypoint").logAttributes(G(a,A[a]),w)});B=!0}function e(){return d("WAWamStorage").getFinishedStreamBuffers("private").then(function(a){a=a.map(function(a){d("WALogger").DEV(s(),JSON.stringify(d("WABase64").encodeB64(a.content)));return c("WAWebUploadPrivateStatsBackend")(d("WABase64").encodeB64(a.content),a.key).then(function(b){b!==void 0?d("WALogger").DEV(r(),a.key):d("WALogger").DEV(q(),a.key);return})});return(h||(h=b("Promise"))).all(a)}).then(function(){})}function f(){return d("WAWamStorage").getFinishedStreamBuffers("regular").then(function(a){a=a.map(function(a){d("WALogger").DEV(p(),JSON.stringify(d("WABase64").encodeB64(a.content)));return c("WAWebUploadStatsBackend")(d("WABase64").encodeB64(a.content),a.key).then(function(b){b!==void 0?d("WALogger").DEV(o(),a.key):d("WALogger").DEV(n(),a.key);return d("WAWamStorage").removeBufferByKey(a.key)})});return(h||(h=b("Promise"))).all(a)}).then(function(){})}function L(){return C}function M(a){if(z)return;d("WALogger").DEV(m());E();A=a;K();z=!0}function N(){z=!1}function O(){B=!1}function P(a){if(!z)return(h||(h=b("Promise"))).resolve();var e=d("WAWebABProps").getABPropConfigValue("web_abprop_core_wam_runtime");if(!e)return(h||(h=b("Promise"))).resolve();d("WALogger").DEV(l());B||K();e=J(a);c("gkx")("26256")&&D.push(babelHelpers["extends"]({name:a.$className},a.all));return d("WAWamEntrypoint").logAsync(e.channel,e.id,e.psIdIntValue,e.fields,e.rawFields,e.weight,e.debug)}function Q(a,b){if(!z)return;var c=d("WAWebABProps").getABPropConfigValue("web_abprop_core_wam_runtime");if(!c)return;d("WALogger").DEV(k());B||K();d("WAWamEntrypoint").logAttributes(H(a,b),w)}function R(a){if(!z)return;var b=d("WAWebABProps").getABPropConfigValue("web_abprop_core_wam_runtime");if(!b)return;d("WALogger").DEV(j());d("WAWamEntrypoint").updatePrivateStatsIds(a)}g.debugData=w;g.checkE2eDebugEventInCoreWam=a;g.uploadPrivateCoreWamEvents=e;g.uploadRegularCoreWamEvents=f;g.getCoreWamSinkInitPromises=L;g.initializeCoreWam=M;g.deinitializeCoreWam=N;g.doNotUseJustForTestUnloadCoreWamRuntime=O;g.commitToCoreWam=P;g.setToCoreWam=Q;g.updatePrivateStatIdsToCore=R}),98);
__d("WAWebIsOfficialClient",["WALogger","WAWebUA","WAWebWamGlobals","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot set ocVersion ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot analyze UC ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Caller ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Caller ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["A caller is not found ",""]);l=function(){return a};return a}var m=function(){var a;return typeof process!=="undefined"&&((a=process.versions)==null?void 0:a.electron)!=null},n=function(){var a=typeof self!=="undefined"?self.navigator:null;return Boolean(a.webdriver)};a=function(){if(m()||n())return!1;return d("WAWebUA").UA.isChrome&&/HeadlessChrome/.test(window.navigator.userAgent)?!1:!0};var o=function(){try{var a=new Error();a=a.stack;var b=a.split("\n").filter(function(a){return Boolean(a.trim())}).pop();if(b==null){d("WALogger").WARN(l(),a).tags("uc");return!0}if(!b.includes(".whatsapp.com")){!c("gkx")("26258")?d("WALogger").WARN(k(),b).tags("uc").sendLogs("Unexpectedly detected UC"):d("WALogger").WARN(j(),b).tags("uc");return!1}}catch(a){d("WALogger").WARN(i(),a.stack).tags("uc")}return!0};if(!c("gkx")("26255")){b="webpackChunkwhatsapp_web_client";!c("gkx")("26257")&&!(b in window)&&(window[b]=[]);var p=window[b];p!=null&&Object.defineProperty(window,b,{get:function(){if(!o())try{d("WAWebWamGlobals").Global.set({ocVersion:0})}catch(a){d("WALogger").WARN(h(),a.stack).tags("uc")}return p}})}e=d("WAWebUA").UA.isElectron||a();g.isLegitErrorStack=o;g.isOfficialClient=e}),98);
__d("WAWebUserPrefsIsLoggedIn",["WAWebUserPrefsMultiDevice"],(function(a,b,c,d,e,f,g){var h=!1;function a(){return d("WAWebUserPrefsMultiDevice").isRegistered()&&i()}function i(){return h}function b(a){h=a}g.isLoggedIn=a;g.setIsConnectedAsRegistered=b}),98);
__d("WAWebUserPrefsTabMutex",["WANullthrows","WAWebLocalStorage","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h="x"+Math.round(Math.random()*1e9);function i(){return c("WAWebUserPrefsStore").getPSIgnoringCache(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX)}function a(a){a=a?h+":"+a:a;c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX,a,{storage:c("WAWebPermanentStorage")})}function b(){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX,null,{storage:c("WAWebPermanentStorage")})}function e(a){a=a?JSON.parse(a):"";return a?a.toString().split(/:/).pop():a}function f(a){if(a.key!==d("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX)return!1;a=a.newValue||"";return!a.includes(h)?!0:!1}function j(){return(i()||"").includes(h)}function k(){var a={};a.wa_tab_src=h;c("WANullthrows")(c("WAWebLocalStorage")).setItem(d("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK,JSON.stringify(a));c("WANullthrows")(c("WAWebLocalStorage")).removeItem(d("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK)}function l(a){if(a.key!==d("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK)return!1;a=a.newValue||"";return!a.includes(h)?!0:!1}function m(a){c("WAWebUserPrefsStore").setTS(d("WAWebUserPrefsKeys").KEYS.NO_TAKEOVER,a)}function n(){return!!c("WAWebUserPrefsStore").getTS(d("WAWebUserPrefsKeys").KEYS.NO_TAKEOVER)}g.THIS_TAB=h;g.getMutex=i;g.setMutex=a;g.removeMutex=b;g.parseMutex=e;g.mutexFilter=f;g.currentTabHasMutex=j;g.localTakeoverSuccess=k;g.takeoverFilter=l;g.setNoTakeover=m;g.getNoTakeover=n}),98);
__d("WAWebWamEnumWebcWindowNavigatorWebdriverType",[],(function(a,b,c,d,e,f){a=Object.freeze({FALSE:0,TRUE:1,UNDEFINED:2});f.WEBC_WINDOW_NAVIGATOR_WEBDRIVER_TYPE=a}),66);
__d("WAWebWamFingerprint",[],(function(a,b,c,d,e,f){function g(){var a=Object.getOwnPropertyNames(window),b=Object.getOwnPropertyNames(document),c=Array.prototype.slice.call(window.document.documentElement.attributes),d=["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__webdriver_script_func","__webdriver_script_fn","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__driver_evaluate","__selenium_unwrapped","__fxdriver_unwrapped"],e=["_phantom","__nightmare","_selenium","callPhantom","callSelenium","_Selenium_IDE_Recorder"],f=["selenium","webdriver","driver"];function g(a,b){var c={};a.map(function(a){c[a]=!!b.includes(a)});return c}e=g(e,a);a=g(d,b);d=g(f,c);e.wd=window.navigator.webdriver;return{wKeys:e,dKeys:a,dElKeys:d}}a={getAutoToolsProperties:function(){return{data:g()}}};f["default"]=a}),66);
__d("WAWebWebcFingerprintWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcWindowNavigatorWebdriverType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcFingerprint:[1704,{webcCanvasFingerprint:[25,a.TYPES.STRING],webcDocumentDriverEvaluate:[9,a.TYPES.BOOLEAN],webcDocumentDriverUnwrapped:[7,a.TYPES.BOOLEAN],webcDocumentElementAttrDriver:[14,a.TYPES.BOOLEAN],webcDocumentElementAttrSelenium:[12,a.TYPES.BOOLEAN],webcDocumentElementAttrWebdriver:[13,a.TYPES.BOOLEAN],webcDocumentFxdriverEvaluate:[6,a.TYPES.BOOLEAN],webcDocumentFxdriverUnwrapped:[11,a.TYPES.BOOLEAN],webcDocumentSeleniumEvaluate:[2,a.TYPES.BOOLEAN],webcDocumentSeleniumUnwrapped:[10,a.TYPES.BOOLEAN],webcDocumentWebdriverEvaluate:[1,a.TYPES.BOOLEAN],webcDocumentWebdriverScriptFn:[5,a.TYPES.BOOLEAN],webcDocumentWebdriverScriptFunc:[4,a.TYPES.BOOLEAN],webcDocumentWebdriverScriptFunction:[3,a.TYPES.BOOLEAN],webcDocumentWebdriverUnwrapped:[8,a.TYPES.BOOLEAN],webcWebglFingerprint:[24,a.TYPES.STRING],webcWebglRenderer:[23,a.TYPES.STRING],webcWebglVendor:[22,a.TYPES.STRING],webcWindowSeleniumIdeRecorder:[20,a.TYPES.BOOLEAN],webcWindowCallphantom:[18,a.TYPES.BOOLEAN],webcWindowCallselenium:[19,a.TYPES.BOOLEAN],webcWindowNavigatorWebdriver:[21,d("WAWebWamEnumWebcWindowNavigatorWebdriverType").WEBC_WINDOW_NAVIGATOR_WEBDRIVER_TYPE],webcWindowNightmare:[16,a.TYPES.BOOLEAN],webcWindowPhantom:[15,a.TYPES.BOOLEAN],webcWindowSelenium:[17,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{WebcFingerprint:[]});g.WebcFingerprintWamEvent=b}),98);
__d("WAWebWamFingerprintReporter",["WAWebWamEnumWebcWindowNavigatorWebdriverType","WAWebWamFingerprint","WAWebWebcFingerprintWamEvent"],(function(a,b,c,d,e,f,g){function a(){var a=c("WAWebWamFingerprint").getAutoToolsProperties();a={webcDocumentWebdriverEvaluate:a.data.dKeys.__webdriver_evaluate,webcDocumentSeleniumEvaluate:a.data.dKeys.__selenium_evaluate,webcDocumentWebdriverScriptFunction:a.data.dKeys.__webdriver_script_function,webcDocumentWebdriverScriptFunc:a.data.dKeys.__webdriver_script_func,webcDocumentWebdriverScriptFn:a.data.dKeys.__webdriver_script_fn,webcDocumentFxdriverEvaluate:a.data.dKeys.__fxdriver_evaluate,webcDocumentDriverUnwrapped:a.data.dKeys.__driver_unwrapped,webcDocumentWebdriverUnwrapped:a.data.dKeys.__webdriver_unwrapped,webcDocumentDriverEvaluate:a.data.dKeys.__driver_evaluate,webcDocumentSeleniumUnwrapped:a.data.dKeys.__selenium_unwrapped,webcDocumentFxdriverUnwrapped:a.data.dKeys.__fxdriver_unwrapped,webcDocumentElementAttrSelenium:a.data.dElKeys.selenium,webcDocumentElementAttrWebdriver:a.data.dElKeys.webdriver,webcDocumentElementAttrDriver:a.data.dElKeys.driver,webcWindowPhantom:a.data.wKeys._phantom,webcWindowNightmare:a.data.wKeys.__nightmare,webcWindowSelenium:a.data.wKeys._selenium,webcWindowCallphantom:a.data.wKeys.callPhantom,webcWindowCallselenium:a.data.wKeys.callSelenium,webcWindowSeleniumIdeRecorder:a.data.wKeys._Selenium_IDE_Recorder,webcWindowNavigatorWebdriver:a.data.wKeys.wd===!0?d("WAWebWamEnumWebcWindowNavigatorWebdriverType").WEBC_WINDOW_NAVIGATOR_WEBDRIVER_TYPE.TRUE:a.data.wKeys.wd===!1?d("WAWebWamEnumWebcWindowNavigatorWebdriverType").WEBC_WINDOW_NAVIGATOR_WEBDRIVER_TYPE.FALSE:d("WAWebWamEnumWebcWindowNavigatorWebdriverType").WEBC_WINDOW_NAVIGATOR_WEBDRIVER_TYPE.UNDEFINED};a=new(d("WAWebWebcFingerprintWamEvent").WebcFingerprintWamEvent)(a);a.commit()}g.logFingerprintToWam=a}),98);
__d("WAWebWamPrivateStats",["Promise","WAHex","WALogger","WAResolvable","WATimeUtils","WAWebCoreWamIntegration","WAWebWamEnumPsIdAction","WAWebWamGlobals","WAWebWamStorage","WAWebWamUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["privateStats: Web Wam rotated PS IDs, but update not propogated to Core Wam"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while rotating PS ids ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while rotating PS id for key ",""]);k=function(){return a};return a}var l={},m={},n={};d("WAWebWamGlobals").PrivateStatsAllIds.map(function(a){l[a.keyHashInt]=a.key,m[a.key]=a.keyHashInt,n[a.key]={value:a.keyHashInt,rotationPeriodDays:a.rotationPeriodDays}});l[0]="none";m.none=0;n.none={value:"none",rotationPeriodDays:-1};var o=null;function a(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(o!=null)return o.promise;var a=new(d("WAResolvable").Resolvable)();o=a;yield v();var b=[],e=(yield c("WAWebWamStorage").getPsMeta()),f=new Set();e.map(function(a){f.add(a.key),n[a.key]===void 0?b.push(a.key):n[a.key].value=a.value});e=Object.keys(n).filter(function(a){return!f.has(a)}).map(function(a){a!=="none"&&(n[a].value=d("WAHex").randomHex(16));return{key:a,value:n[a].value,rotateInDays:n[a].rotationPeriodDays,creationTs:d("WATimeUtils").unixTime()}});yield c("WAWebWamStorage").addPsMeta(e);yield c("WAWebWamStorage").removePsMeta(b);e.map(function(a){return d("WAWebWamUtils").logPsIdUpdate(d("WAWebWamEnumPsIdAction").PS_ID_ACTION.CREATED,m[a.key],a.rotateInDays)});b.map(function(a){return d("WAWebWamUtils").logPsIdUpdate(d("WAWebWamEnumPsIdAction").PS_ID_ACTION.DELETED,m[a],n[a].rotationPeriodDays)});a.resolve()});return p.apply(this,arguments)}function q(){var a=new Map();d("WAWebWamGlobals").PrivateStatsAllIds.forEach(function(b){a.set(b.keyHashInt,String(n[b.key].value))});return a}function e(a){if(o==null)throw c("err")("can't call getPrivateStatsKeyFromInt without initializing");return l[a]}function f(a){if(a==="regular")throw c("err")("tried to get psId for regular channel event");if(o==null)throw c("err")("can't call getLatestPrivateStatsIdValueFromKey without initializing");return n[a].value}function r(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[];if(o==null)throw c("err")("can't call maybeRotatePsIds without initializing");try{yield o.promise;var e=(yield c("WAWebWamStorage").getPsMeta());yield (h||(h=b("Promise"))).all(e.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{var c=b.key,e=b.rotateInDays,f=b.creationTs;x(f,e)&&(a.push(c),yield t(c))}catch(a){d("WALogger").WARN(k(),b.key)}});return function(a){return c.apply(this,arguments)}}()))}catch(a){d("WALogger").WARN(j(),a)}try{a.length>0&&d("WAWebCoreWamIntegration").updatePrivateStatIdsToCore(q())}catch(a){d("WALogger").DEV(i())}return a});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAHex").randomHex(16);n[a].value=b;yield c("WAWebWamStorage").updatePsMeta({key:a,rotateInDays:n[a].rotationPeriodDays,value:b,creationTs:d("WATimeUtils").unixTime()});d("WAWebWamUtils").logPsIdUpdate(d("WAWebWamEnumPsIdAction").PS_ID_ACTION.ROTATED,m[a],n[a].rotationPeriodDays)});return u.apply(this,arguments)}function v(){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[],b=(yield c("WAWebWamStorage").getPsMeta());b.map(function(b){b.lastRotationTimeUtc!=null&&a.push(b.key)});yield c("WAWebWamStorage").removePsMeta(a)});return w.apply(this,arguments)}function x(a,b){if(b===-1||a==null)return!1;b=b*d("WATimeUtils").DAY_SECONDS;b=Math.floor(d("WATimeUtils").unixTime()/b)*b;return a<b}g.initPrivateStats=a;g.getPrivateStatsIdsForCoreWam=q;g.getPrivateStatsKeyFromInt=e;g.getLatestPrivateStatsIdValueFromKey=f;g.maybeRotatePsIds=r}),98);
__d("WAWebWamInterop",["Promise","WACustomError","WATimeUtils","WAWamStorage","WAWebUserPrefsGeneral","WAWebWamPrivateStats","WAWebWamStorage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=function(a,c){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("saveBuffer not implemented yet"))},j=function(a){return(h||(h=b("Promise"))).resolve()},k=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("getStartingSequenceRow not implemented yet"))},l=function(){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("getBuffers not implemented yet"))},m=function(){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("nukeMetrics not implemented yet"))},n=function(a){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("finishBuffer not implemented yet"))},o=function(){return(h||(h=b("Promise"))).reject(new(d("WACustomError").UnimplementedMethod)("updatePrivateStatsIds not implemented yet"))},p=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=(yield c("WAWebWamStorage").getPsToken());if(!d)return null;return!a({redeemCount:d.redeemCount,creationTs:d.creationTs},{maxExpirySeconds:86400})?(h||(h=b("Promise"))).resolve(null):c("WAWebWamStorage").savePsToken(babelHelpers["extends"]({},d,{redeemCount:d.redeemCount+1})).then(function(){return d.token})});return function(b){return a.apply(this,arguments)}}();function a(a){return c("WAWebWamStorage").savePsToken({key:"token",token:a,creationTs:d("WATimeUtils").unixTime(),redeemCount:1})}function e(){return(h||(h=b("Promise"))).resolve(d("WAWebUserPrefsGeneral").getPsKillSwitchToken())}function f(a){d("WAWebUserPrefsGeneral").setPsKillSwitchToken(a);return(h||(h=b("Promise"))).resolve()}var q={getStreamId:function(){return 1},saveBuffer:i,finishBuffer:n,getStartingSequenceRow:k,getBuffers:l,removeBufferByKey:j,nukeMetrics:m,updatePrivateStatsIds:o,redeemPrivateStatsToken:p,savePrivateStatsToken:a,privateStatsKillSwitchGetBlockedToken:e,privateStatsKillSwitchSet:f};function r(){d("WAWamStorage").startWamStorage(q)}function s(){d("WAWamStorage").closeWamStorage()}g.startWamStore=r;g.closeWamStore=s}),98);
__d("WAWebWamLibProtocol",["WABinary"],(function(a,b,c,d,e,f,g){var h=8,i=0,j=1,k=2,l=4;function a(a,b,c){return m(a,b,c,i)}function b(a,b,c,d){d=d?j:j|l;return m(a,b,c,d)}function c(a,b,c,d){d=d?k:k|l;return m(a,b,c,d)}function m(a,b,c,e){if(c==null)e===i&&n(a,b,e);else if(typeof c==="number"&&c===(c|0))c===0?n(a,b,e|1<<4):c===1?n(a,b,e|2<<4):-128<=c&&c<128?(n(a,b,e|3<<4),a.writeInt8(c)):-32768<=c&&c<32768?(n(a,b,e|4<<4),a.writeInt16(c)):(n(a,b,e|5<<4),a.writeInt32(c));else if(typeof c==="number")n(a,b,e|7<<4),a.writeFloat64(c);else if(typeof c==="string"){var f=d("WABinary").numUtf8Bytes(c);f<256?(n(a,b,e|8<<4),a.writeUint8(f)):f<65536?(n(a,b,e|9<<4),a.writeUint16(f)):(n(a,b,e|10<<4),a.writeUint32(f));a.writeString(c)}}function n(a,b,c){b<256?(a.writeUint8(c),a.writeUint8(b)):(a.writeUint8(c|h),a.writeUint16(b))}g.writeGlobalAttribute=a;g.writeEvent=b;g.writeField=c}),98);
__d("WAWebWamLibContext",["WABase64","WABinary","WALogger","WAWebEventSampling","WAWebWamCodegenUtils","WAWebWamConstants","WAWebWamLibProtocol","WAWebWamPrivateStats"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam: invalid value for timer field ",".",""]);h=function(){return a};return a}var i=47,j=3433,k=6005,l=0,m=2,n=2147483647;a=function(){function a(a,b,c){this.bufferKey=a,this.buffer=new(d("WABinary").Binary)(void 0,!0),this.buffer.writeString("WAM"),this.buffer.writeUint8(d("WAWebWamConstants").WAM_PROTOCOL_VERSION),this.buffer.writeUint8(1),this.buffer.writeUint16(b),this.bufferKey==="regular"?this.buffer.writeUint8(l):this.buffer.writeUint8(m),this.eventsWritten=0,this.prevGlobals={},this.dirtyGlobals={},this.unsavedPortion=null,this.saveKey=String(Math.random()*1e9|0),this.$1(c)}var b=a.prototype;b.size=function(){return this.buffer.size()};b.set=function(a,b){this.dirtyGlobals[String(a)]=b,this.unsavedPortion&&this.unsavedPortion.set(a,b)};b.write=function(a){var b=this.buffer;this.set(i,a.commitTime);this.set(j,a.sequenceNumber);a.wamChannel==="private"&&this.set(k,d("WAWebWamPrivateStats").getLatestPrivateStatsIdValueFromKey(this.bufferKey).toString());this.$2();var c=a.all,e=Object.keys(c),f=-1,g=!1;for(var l=0;l<e.length;l++){var m=c[e[l]];m!=null&&(f=l,g=!0)}l=(m=d("WAWebEventSampling").getClientEventSamplingWeight(a.id))!=null?m:a.weight;d("WAWebWamLibProtocol").writeEvent(b,a.id,-l,g);for(m=0;m<=f;m++){l=e[m];var o=d("WAWebWamCodegenUtils").metrics.getEvent(a.$className,l),p=o.id;o=o.type;var q=c[l];if(q==null)continue;typeof q==="boolean"&&(q=q?1:0);g=m<f;if(o==="timer"&&q>n){d("WALogger").ERROR(h(),a.$className,l).sendLogs("wam-event-validation-error");continue}d("WAWebWamLibProtocol").writeField(b,p,q,g)}this.eventsWritten++;this.unsavedPortion&&this.unsavedPortion.write(a)};b.stringBuffer=function(){return this.eventsWritten>0?d("WABase64").encodeB64(this.buffer.peek(function(a){return a.readByteArray()})):""};b.getBuffer=function(){return this.buffer};b.$1=function(a){var b=this.bufferKey==="regular"?"regular":"private";for(var c in a){var e=a[c],f=d("WAWebWamCodegenUtils").metrics.getGlobal(c);f=f.channels.includes(b);e!==void 0&&f&&this.set(d("WAWebWamCodegenUtils").metrics.getGlobal(c).id,e)}};b.$2=function(){var a=this.dirtyGlobals,b=this.prevGlobals;for(var c in a){var e=a[c];if(typeof e==="boolean")e=e?1:0;else if(e===void 0)e=null;else if(Number.isNaN(e))continue;if(e!==b[c]||c===String(i)||c===String(k)){b[c]=e;var f=parseInt(c,10);d("WAWebWamLibProtocol").writeGlobalAttribute(this.buffer,f,e)}}this.dirtyGlobals={}};return a}();g.WamContext=a}),98);
__d("WAWebWam",["Promise","WALogger","WANullthrows","WAResolvable","WAShiftTimer","WATimeUtils","WAWebBuildConstants","WAWebCoreWamIntegration","WAWebCrashlog","WAWebEventSampling","WAWebIsOfficialClient","WAWebMiscBrowserUtils","WAWebUploadPrivateStatsBackend","WAWebUploadStatsBackend","WAWebUserPrefsIsLoggedIn","WAWebUserPrefsTabMutex","WAWebWamConstants","WAWebWamEnumDeviceClassification","WAWebWamEnumPlatformType","WAWebWamEnumWebcWebPlatformType","WAWebWamFingerprintReporter","WAWebWamGlobals","WAWebWamInterop","WAWebWamLibContext","WAWebWamPlatform","WAWebWamPrivateStats","WAWebWamRuntimeProvider","WAWebWamStorage","WAWebWamUtils","asyncToGeneratorRuntime","gkx","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam dropped "," buffers! ("," bytes)"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: process failures success bufferKey ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: adding to WamStorage failed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: process failures start bufferKey ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: sendLogs success"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: sendLogs start"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:sendAllLogs failed to read because ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:save WamStorage failed to save ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:save successfully saved new entry ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:saveCurrentContext no unsavedPortion WamStorage.update end"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:saveCurrentContext no unsavedPortion WamStorage.update start"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:save other tab claimed buffer, cutting head"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:save successfully updated ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:saveCurrentContext has unsavedPortion WamStorage.update end"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:saveCurrentContext has unsavedPortion WamStorage.update start"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:_executePending error ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:_executePending abandoned current buffer"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:_executePending wam unauthed, didn't send"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:_executePendingForContext drop the rest due to size limit: "," > ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:_executePendingForContext failed to get context ",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:executePending "," jobs"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:initialize"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendLogs: uploadStats"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendLogs: uploadPrivateStats"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam enable processing"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam pause processing"]);H=function(){return a};return a}function aa(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:set "," = ",""]);aa=function(){return a};return a}function ba(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:commit ",""]);ba=function(){return a};return a}function ca(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:commit ",", error: ",""]);ca=function(){return a};return a}function da(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:commit ",", error: ",""]);da=function(){return a};return a}function ea(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:commit redundant commit! ",""]);ea=function(){return a};return a}function fa(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam:this tab is in the background, skipping WAM processing for now"]);fa=function(){return a};return a}var I,ga=[],J=[],ha=!1,ia="1",ja=c("lodash").mapValues({commit:na,set:pa,resumeJobs:ta,initialize:qa},f);function a(){ga=d("WAWebWamGlobals").PrivateStatsAllIds.map(function(a){return a.key});d("WAWebWamPrivateStats").initPrivateStats();d("WAWebWamInterop").startWamStore();d("WAWebWamFingerprintReporter").logFingerprintToWam();I=new(d("WAShiftTimer").ShiftTimer)(function(){if(!c("gkx")("26255")&&!d("WAWebUserPrefsTabMutex").currentTabHasMutex()){d("WALogger").WARN(fa());return}ua()});d("WAWebWamRuntimeProvider").setWamRuntime(ja);while(J.length){var a=J.pop();a()}ha=!0}function e(){I.cancel()}function f(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];if(ha)return a.apply(void 0,c);J.push(function(){a.apply(void 0,c)})}}var K={},ka=0,L=[],M=!1,la=!1,N=null,ma=0,O=new(d("WAResolvable").Resolvable)(),P=!1,Q=!1;function na(a,c){var e;c===void 0&&(c=!1);if(a.commitTime!=null&&a.commitTime!==0){d("WALogger").WARN(ea(),a.$className);return(h||(h=b("Promise"))).resolve()}e=(e=d("WAWebEventSampling").getClientEventSamplingWeight(a.id))!=null?e:a.weight;if(e!==0&&Math.random()*e>1){a.commitTime=d("WATimeUtils").unixTimeWithoutClockSkewCorrection();return(h||(h=b("Promise"))).resolve()}d("WAWebCoreWamIntegration").commitToCoreWam(a)["catch"](function(b){a.$className.includes("CrashLog")?d("WALogger").WARN(da(),a.$className,b):d("WALogger").ERROR(ca(),a.$className,b).tags("wam").sendLogs("failed-wam-commit-to-core")});d("WALogger").DEV(ba(),a.$className).devConsole(a.all);oa(a);d("WAWebWamUtils").maybeForwardWamEventToJestE2e(a);return ra(a,c)}function oa(a,b){a.commitTime=b!=null?b:d("WATimeUtils").unixTimeWithoutClockSkewCorrection(),a.sequenceNumber=ma++}function pa(a,b){d("WALogger").DEV(aa(),a.name,String(b));d("WAWebCoreWamIntegration").setToCoreWam(a,b);d("WAWebWamUtils").maybeForwardWamAttributeToJestE2e(a.name,String(b));return ra([a,b])}function qa(a){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(N&&!a)return(h||(h=b("Promise"))).resolve(N);var e=c("WAWebMiscBrowserUtils").info(),f={appVersion:d("WAWebBuildConstants").VERSION_BASE,appBuild:d("WAWebWamUtils").getAppBuild(),platform:d("WAWebWamEnumPlatformType").PLATFORM_TYPE.WEBCLIENT,appIsBetaRelease:yield d("WAWebWamUtils").getAppIsBetaRelease(),browser:e.name||null,browserVersion:e.ua||null,deviceName:e.os||null,deviceVersion:e.version||null,webcEnv:d("WAWebWamUtils").getWamEnv(),webcTabId:d("WAWebUserPrefsTabMutex").THIS_TAB,webcWebPlatform:d("WAWebWamEnumWebcWebPlatformType").WEBC_WEB_PLATFORM_TYPE[d("WAWebWamPlatform").getWamPlatform()],ocVersion:d("WAWebIsOfficialClient").isOfficialClient?1:0,deviceClassification:d("WAWebWamEnumDeviceClassification").DEVICE_CLASSIFICATION.DESKTOP};N=f;a&&Object.assign(N,a);d("WALogger").DEV(D()).devConsole(N);d("WAWebWamGlobals").Global.commitOnSet=!1;d("WAWebWamGlobals").Global.set(N);d("WAWebWamGlobals").Global.commitOnSet=!0;Object.keys(f).forEach(function(a){return d("WAWebWamUtils").maybeForwardWamAttributeToJestE2e(a,String(f[a]))});d("WAWebCoreWamIntegration").initializeCoreWam(f);return f});return R.apply(this,arguments)}function ra(a,b){b===void 0&&(b=!1);L.push(a);M?b?(P=!1,Q=!0,self.setTimeout(function(){return I.forceRunNow()},1)):I.onOrBefore(d("WAWebWamConstants").PENDING_DELAY_IN_SECONDS*1e3):b&&(I.cancel(),P=!0,Q=!1);return O.promise}function sa(){d("WALogger").DEV(H());M=!1;I.cancel();var a=O;O=new(d("WAResolvable").Resolvable)();return a}function ta(){d("WALogger").DEV(G()),M=!0,Q=!1,L.length>0&&I.onOrBefore(d("WAWebWamConstants").PENDING_DELAY_IN_SECONDS*1e3),P&&(P=!1,Q=!0,I.forceRunNow())}function ua(){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Q,c=sa(),e=[].concat(L);L=[];try{var f=(yield qa()),g=(yield d("WAWebWamPrivateStats").maybeRotatePsIds());yield (h||(h=b("Promise"))).all(g.map(function(a){return va(a,f)}));d("WALogger").DEV(C(),e.length);yield h.all(["regular","none"].concat(ga).map(function(b){return xa(b,e,a,f)}))}finally{c.resolve(),ta()}});return S.apply(this,arguments)}function va(a,b){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield Y(a,b),K[a]=(yield U(a,b))});return T.apply(this,arguments)}function U(a,b){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return new(d("WAWebWamLibContext").WamContext)(a,yield c("WAWebWamStorage").getNextSequenceNumberForStream(ia),b)});return V.apply(this,arguments)}function wa(a,b){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;c=(c=K[a])!=null?c:yield U(a,b);K[a]=c;return c});return W.apply(this,arguments)}function xa(a,b,c,d){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=d("WAWebWamUtils").getChannelFromBufferKey(a),g;try{g=(yield wa(a,e))}catch(a){d("WALogger").WARN(B(),String((a==null?void 0:a.stack)?a.stack:a));return}try{for(var h=0;h<b.length;h++){if(g.size()>d("WAWebWamConstants").WAM_MAX_BUFFER_SIZE){d("WALogger").WARN(A(),g.size(),d("WAWebWamConstants").WAM_MAX_BUFFER_SIZE);break}var i=b[h];if(!Array.isArray(i)){var j=i;(j.wamChannel==="regular"&&j.wamChannel===f||j.wamChannel==="private"&&a===d("WAWebWamPrivateStats").getPrivateStatsKeyFromInt(j.privateStatsIdInt))&&g.write(j)}else{j=i[0];i=i[1];j.channels.includes(f)&&(e[j.name]=i,g.set(j.id,i))}}j=d("WATimeUtils").unixTimeWithoutClockSkewCorrection();if(g.eventsWritten>0&&(c||g.size()>d("WAWebWamConstants").WAM_MAX_BUFFER_SIZE||j>=ka+d("WAWebWamConstants").WAM_ROTATE_INTERVAL_IN_SECONDS||!la)){i=d("WAWebUserPrefsIsLoggedIn").isLoggedIn();if(!i){d("WALogger").DEV(z());g.buffer.size()>d("WAWebWamConstants").WAM_MAX_BUFFER_SIZE?(K[a]=null,d("WALogger").DEV(y())):yield Y(a,e);return}yield ya(a)}else yield Y(a,e)}catch(b){d("WALogger").WARN(x(),String((b==null?void 0:b.stack)?b.stack:b)).devConsole(b),d("WAWebCrashlog").upload({reason:"wam-error"}),K[a]=null}});return X.apply(this,arguments)}function Y(a,b){return Z.apply(this,arguments)}function Z(){Z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!K[a])return;var e=K[a].stringBuffer();if(!e)return;var f=c("WANullthrows")(K[a]).unsavedPortion;if(f&&f.eventsWritten===0)return;var g=c("WANullthrows")(K[a]).saveKey;try{if(f){d("WALogger").DEV(w());f=(yield c("WAWebWamStorage").update(g,a,e));d("WALogger").DEV(v());if(!K[a])return;if(f)d("WALogger").DEV(u(),g),c("WANullthrows")(K[a]).unsavedPortion=(yield U(a,b));else{K[a]=K[a].unsavedPortion;d("WALogger").DEV(t());yield Y(a,b);return}}else{d("WALogger").DEV(s());yield c("WAWebWamStorage").add(g,a,e);d("WALogger").DEV(r());if(!K[a])return;d("WALogger").DEV(q(),g);c("WANullthrows")(K[a]).unsavedPortion=(yield U(a,b))}}catch(a){d("WALogger").WARN(p(),String(a)).devConsole(a)}});return Z.apply(this,arguments)}function ya(a){return $.apply(this,arguments)}function $(){$=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e;try{e=(yield c("WAWebWamStorage").deleteAll(a))}catch(a){e={},d("WALogger").WARN(o(),String(a)).devConsole(a)}var f=e;if(K[a]){K[a].unsavedPortion&&!(K[a].saveKey in f)&&(K[a]=K[a].unsavedPortion);e=c("WANullthrows")(K[a]).saveKey;f[e]=c("WANullthrows")(K[a]).stringBuffer()}d("WALogger").DEV(n());e=(yield (h||(h=b("Promise"))).all(c("lodash").map(f,function(b,c){return za(b,c,d("WAWebWamUtils").getChannelFromBufferKey(a))})));d("WALogger").DEV(m());var g=e.filter(Boolean);g.length!==e.length&&(ka=d("WATimeUtils").unixTimeWithoutClockSkewCorrection(),la=!0);K[a]&&!g.includes(K[a].saveKey)&&(K[a]=null);if(g.length===0)return;e=g.reduce(function(a,b){return a+f[b].length},0);e<d("WAWebWamConstants").WAM_MAX_BUFFER_SIZE?(d("WALogger").DEV(l(),a),yield (h||(h=b("Promise"))).all(c("lodash").map(g,function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{yield c("WAWebWamStorage").add(b,a,f[b])}catch(a){d("WALogger").WARN(k())}});return function(a){return e.apply(this,arguments)}}())),d("WALogger").DEV(j(),a)):(K[a]=null,d("WALogger").WARN(i(),g.length,e).devConsole(f))});return $.apply(this,arguments)}function za(a,e,f){if(a==="")return(h||(h=b("Promise"))).resolve();if(a[0]==="[")return(h||(h=b("Promise"))).resolve();if(d("WAWebWamUtils").isWamBufferTooLong(a))return(h||(h=b("Promise"))).resolve();if(f==="private"){d("WALogger").DEV(F());return c("WAWebUploadPrivateStatsBackend")(a,e)}if(f==="regular"){d("WALogger").DEV(E());return c("WAWebUploadStatsBackend")(a,e)}return(h||(h=b("Promise"))).resolve()}g.Wam=ja;g.initWamRuntime=a;g.doNotUseOnlyForTestStopPendingTimer=e;g.sendAllLogs=ya}),98);
__d("WAWebWebcResourceLoadWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcResourceLoad:[688,{webcResourceCached:[3,a.TYPES.BOOLEAN],webcResourceDuration:[2,a.TYPES.TIMER],webcResourceName:[1,a.TYPES.STRING]},[1,1,1],"regular"]},{WebcResourceLoad:[]});g.WebcResourceLoadWamEvent=b}),98);
__d("WAWebWamResourceLoadReporter",["WALogger","WAWebWebcResourceLoadWamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MetricReporter:logResourceLoads metrics not provided by browser!"]);h=function(){return a};return a}function a(){var a;a=(a=window.performance)==null?void 0:a.timing;if(!(a&&window.performance.getEntriesByType)){d("WALogger").LOG(h()).devConsole("red");return}var b=window.performance.timing.fetchStart===window.performance.timing.domainLookupEnd;a=window.performance.getEntriesByType("resource");var c=document.createElement("a");a.forEach(function(a){a.initiatorType!=="xmlhttprequest"&&(c.href=a.name,new(d("WAWebWebcResourceLoadWamEvent").WebcResourceLoadWamEvent)({webcResourceName:c.pathname+c.search+c.hash,webcResourceDuration:Math.round(a.duration),webcResourceCached:b}).commit())})}g["default"]=a}),98);
__d("WAWebWamEnumWebcAppcacheStatusCode",[],(function(a,b,c,d,e,f){a=Object.freeze({UNCACHED:0,IDLE:1,CHECKING:2,DOWNLOADING:3,UPDATEREADY:4,OBSOLETE:5});f.WEBC_APPCACHE_STATUS_CODE=a}),66);
__d("WAWebWamEnumWebcNavigationType",[],(function(a,b,c,d,e,f){a=Object.freeze({NAVIGATE_NEXT:0,RELOAD:1,BACK_FORWARD:2,UNDEFINED:255});f.WEBC_NAVIGATION_TYPE=a}),66);
__d("WAWebWebcPageLoadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcAppcacheStatusCode","WAWebWamEnumWebcNavigationType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcPageLoad:[642,{webcAppcacheStatus:[29,d("WAWebWamEnumWebcAppcacheStatusCode").WEBC_APPCACHE_STATUS_CODE],webcCached:[30,a.TYPES.BOOLEAN],webcConnectEnd:[10,a.TYPES.TIMER],webcConnectStart:[9,a.TYPES.TIMER],webcDomComplete:[19,a.TYPES.TIMER],webcDomContentLoadedEventEnd:[18,a.TYPES.TIMER],webcDomContentLoadedEventStart:[17,a.TYPES.TIMER],webcDomInteractive:[16,a.TYPES.TIMER],webcDomLoading:[15,a.TYPES.TIMER],webcDomainLookupEnd:[8,a.TYPES.TIMER],webcDomainLookupStart:[7,a.TYPES.TIMER],webcExeDone:[23,a.TYPES.TIMER],webcExeStart:[22,a.TYPES.TIMER],webcFetchStart:[6,a.TYPES.TIMER],webcInitialMountT:[38,a.TYPES.TIMER],webcInitialNavMountT:[39,a.TYPES.TIMER],webcInitialPanel:[42,a.TYPES.STRING],webcInitialPanelMountStartT:[43,a.TYPES.TIMER],webcInitialPanelMountT:[40,a.TYPES.TIMER],webcInitialPanelRenderT:[46,a.TYPES.TIMER],webcJsLoadT:[37,a.TYPES.TIMER],webcLoadEventEnd:[21,a.TYPES.TIMER],webcLoadEventStart:[20,a.TYPES.TIMER],webcLoadInForeground:[53,a.TYPES.BOOLEAN],webcMainScriptEnd:[45,a.TYPES.TIMER],webcMainScriptStart:[44,a.TYPES.TIMER],webcNativeLoadT:[36,a.TYPES.TIMER],webcNavigation:[32,d("WAWebWamEnumWebcNavigationType").WEBC_NAVIGATION_TYPE],webcPageLoadId:[54,a.TYPES.STRING],webcPageLoadT:[34,a.TYPES.TIMER],webcParallellyFetched:[41,a.TYPES.BOOLEAN],webcQrCode:[31,a.TYPES.BOOLEAN],webcRedirectCount:[33,a.TYPES.NUMBER],webcRedirectEnd:[5,a.TYPES.TIMER],webcRedirectStart:[4,a.TYPES.TIMER],webcRequestStart:[12,a.TYPES.TIMER],webcResponseEnd:[14,a.TYPES.TIMER],webcResponseStart:[13,a.TYPES.TIMER],webcSecureConnectionStart:[11,a.TYPES.TIMER],webcUnloadEventEnd:[3,a.TYPES.TIMER],webcUnloadEventStart:[2,a.TYPES.TIMER],webcWsAttempts:[28,a.TYPES.NUMBER],webcWsNormal:[27,a.TYPES.TIMER],webcWsOpening:[24,a.TYPES.TIMER],webcWsPairing:[25,a.TYPES.TIMER],webcWsSyncing:[26,a.TYPES.TIMER]},[1,1,1],"regular"]},{WebcPageLoad:[]});g.WebcPageLoadWamEvent=b}),98);
__d("WAWebWamPageLoadReporter",["Promise","WALogger","WANullthrows","WAWebPageLoadLogging","WAWebStreamModel","WAWebWam","WAWebWamPerfUtils","WAWebWamResourceLoadReporter","WAWebWebcPageLoadWamEvent"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MetricReporter:logPageLoad delayed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MetricReporter:logPageLoad metrics not provided by browser!"]);j=function(){return a};return a}var k=new(d("WAWebWebcPageLoadWamEvent").WebcPageLoadWamEvent)(),l,m={},n,o,p=!1,q=!1;function a(){return{uiTimingComplete:p,wsTimingComplete:q}}b=new(h||(h=b("Promise")))(function(a){return n=function(){p=!0,a()}});var r=new h(function(a){return o=function(){q=!0,a()}}),s=!1,t;function e(a,b,c){u(a);var d=Math.floor(self.performance.now());m[a]=d;c&&(m.socketSequence=b,o())}function u(a){switch(a){case d("WAWebStreamModel").StreamInfo.OPENING:d("WAWebPageLoadLogging").addPageLoadQplPoint("webc_ws_opening");break;case d("WAWebStreamModel").StreamInfo.PAIRING:d("WAWebPageLoadLogging").addPageLoadQplPoint("webc_ws_pairing");break;case d("WAWebStreamModel").StreamInfo.NORMAL:d("WAWebPageLoadLogging").addPageLoadQplPoint("webc_ws_normal");break;default:return}}function f(a){d("WAWebPageLoadLogging").addPageLoadQplPoint("webc_initial_panel_mount_t"),l=a}function v(a){if(k==null)return;k.set({webcInitialPanel:a})}function w(){n()}window.document&&(t=!document.hidden,document.addEventListener("visibilitychange",y));h.all([b,r]).then(function(){z(),c("WAWebWamResourceLoadReporter")(),s||(s=!0,d("WAWebWam").Wam.resumeJobs())});function x(a){return!self.performance||!self.performance.timing||!self.performance.timing.navigationStart?null:a-self.performance.timing.navigationStart}function y(){if(!k)return;document.hidden&&(t=!1)}function z(){var a;if(!(((a=self.performance)==null?void 0:a.timing)&&self.performance.navigation)){d("WALogger").LOG(j()).devConsole("red");return}if(!k)return;a=k;var b=self.performance.timing,c=self.performance.navigation,e=b.navigationStart,f=b.loadEventEnd-e;if(f<=0){d("WALogger").LOG(i()).devConsole("blue");self.setTimeout(z,1e4);return}function g(a){a=b[a];return a&&x(a)}a.set({webcPageLoadT:f,webcUnloadEventStart:g("unloadEventStart"),webcUnloadEventEnd:g("unloadEventEnd"),webcRedirectStart:g("redirectStart"),webcRedirectEnd:g("redirectEnd"),webcFetchStart:g("fetchStart"),webcDomainLookupStart:g("domainLookupStart"),webcDomainLookupEnd:g("domainLookupEnd"),webcConnectStart:g("connectStart"),webcConnectEnd:g("connectEnd"),webcSecureConnectionStart:g("secureConnectionStart"),webcRequestStart:g("requestStart"),webcResponseStart:g("responseStart"),webcResponseEnd:g("responseEnd"),webcDomLoading:g("domLoading"),webcDomInteractive:g("domInteractive"),webcDomContentLoadedEventStart:g("domContentLoadedEventStart"),webcDomContentLoadedEventEnd:g("domContentLoadedEventEnd"),webcDomComplete:g("domComplete"),webcLoadEventStart:g("loadEventStart"),webcLoadEventEnd:g("loadEventEnd"),webcCached:b.fetchStart===b.domainLookupEnd,webcNavigation:c.type,webcRedirectCount:c.redirectCount,webcWsOpening:m.OPENING,webcWsPairing:m.PAIRING,webcWsSyncing:m.SYNCING,webcWsNormal:m.NORMAL,webcWsAttempts:m.socketSequence,webcQrCode:!m.SYNCING,webcInitialPanelMountT:l-e,webcLoadInForeground:t,webcPageLoadId:d("WAWebPageLoadLogging").getPageLoadId()});A(a);a.commit();window.document&&document.removeEventListener("visibilitychange",y);k=null}function A(a){var b;(b=d("WAWebPageLoadLogging")).addPageLoadValidationData("webc_ws_opening",{wam:a.webcWsOpening});b.addPageLoadValidationData("webc_ws_pairing",{wam:a.webcWsPairing});b.addPageLoadValidationData("webc_ws_normal",{wam:a.webcWsNormal});b.addPageLoadValidationData("webc_initial_panel_mount_t",{wam:a.webcInitialPanelMountT});b.addPageLoadValidationData("webc_initial_panel_mount_start_t",{wam:a.webcInitialPanelMountStartT});b.addPageLoadValidationData("webc_initial_panel_render_t",{wam:a.webcInitialPanelRenderT});b.setWamCompleteForValidation()}b=function(){function a(a){this.$4=!1,this.$3=a.label,this.$1=a.startProperty,this.$2=a.endProperty}var b=a.prototype;b.start=function(){var a;this.$4=!0;if(k==null)return;k.set((a={},a[this.$1]=x(Date.now()),a));this.$5=d("WAWebWamPerfUtils").startMeasure(this.$3)};b.end=function(){var a;if(k==null)return;k.set((a={},a[this.$2]=x(Date.now()),a));c("WANullthrows")(this.$5).end()};b.hasStarted=function(){return this.$4};return a}();r=new b({label:"PageLoad.webcExe",startProperty:"webcExeStart",endProperty:"webcExeDone"});var B=new b({label:"PageLoad.webcMainScript",startProperty:"webcMainScriptStart",endProperty:"webcMainScriptEnd"});b=new b({label:"PageLoad.webcInitialPanelRender",startProperty:"webcInitialPanelMountStartT",endProperty:"webcInitialPanelRenderT"});var C=c("WANullthrows")(k);g.getWamPageLoadTimingCompletion=a;g.streamInfoChange=e;g.saveInitialPanelMountTime=f;g.setInitialScreen=v;g.onInitialRenderComplete=w;g.logWamPageLoad=z;g.exeTimer=r;g.mainScriptTimer=B;g.initialScreenTimer=b;g.PageLoad=C}),98);
__d("WAWebEditMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({EditMessageSend:[3990,{editDuration:[1,a.TYPES.INTEGER],editType:[2,d("WAWebWamEnumEditType").EDIT_TYPE],mediaType:[8,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendResultIsTerminal:[3,a.TYPES.BOOLEAN],messageType:[4,d("WAWebWamEnumMessageType").MESSAGE_TYPE],resendCount:[5,a.TYPES.INTEGER],retryCount:[6,a.TYPES.INTEGER],typeOfGroup:[9,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{EditMessageSend:[]});g.EditMessageSendWamEvent=b}),98);
__d("WAWebMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumChatOriginsType","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumMessageSendResultType","WAWebWamEnumMessageType","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWamEnumRevokeType","WAWebWamEnumSizeBucket","WAWebWamEnumStickerMakerSourceType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MessageSend:[854,{agentEngagementType:[49,d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[55,d("WAWebWamEnumBotType").BOT_TYPE],chatOrigins:[58,d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE],deviceCount:[31,a.TYPES.INTEGER],deviceSizeBucket:[25,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],disappearingChatInitiator:[30,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],e2eBackfill:[23,a.TYPES.BOOLEAN],e2eCiphertextType:[10,d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[9,a.TYPES.INTEGER],e2eFailureReason:[46,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],editDuration:[43,a.TYPES.INTEGER],editType:[44,d("WAWebWamEnumEditType").EDIT_TYPE],ephemeralityDuration:[21,a.TYPES.INTEGER],ephemeralityInitiator:[47,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[48,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],excessPayloadKbSize:[40,a.TYPES.INTEGER],fastForwardEnabled:[15,a.TYPES.BOOLEAN],hasUsername:[59,a.TYPES.BOOLEAN],isAComment:[54,a.TYPES.BOOLEAN],isAReply:[35,a.TYPES.BOOLEAN],isFromWamsys:[19,a.TYPES.BOOLEAN],isLid:[39,a.TYPES.BOOLEAN],isViewOnce:[22,a.TYPES.BOOLEAN],localAddressingMode:[53,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],mediaCaptionPresent:[8,a.TYPES.BOOLEAN],messageDistributionType:[41,d("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE],messageForwardAgeT:[14,a.TYPES.TIMER],messageIsFanout:[5,a.TYPES.BOOLEAN],messageIsFastForward:[13,a.TYPES.BOOLEAN],messageIsFirstUserMessage:[26,a.TYPES.BOOLEAN],messageIsForward:[4,a.TYPES.BOOLEAN],messageIsInternational:[7,a.TYPES.BOOLEAN],messageIsInvisible:[29,a.TYPES.BOOLEAN],messageIsRevoke:[24,a.TYPES.BOOLEAN],messageKeyHash:[57,a.TYPES.STRING],messageMediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendOptUploadEnabled:[12,a.TYPES.BOOLEAN],messageSendResult:[1,d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE],messageSendResultIsTerminal:[17,a.TYPES.BOOLEAN],messageSendT:[11,a.TYPES.TIMER],messageType:[2,d("WAWebWamEnumMessageType").MESSAGE_TYPE],networkWasDisconnected:[37,a.TYPES.BOOLEAN],oppositeVisibleIdentification:[60,d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],overallMediaSize:[42,a.TYPES.NUMBER],participantCount:[32,a.TYPES.INTEGER],receiverDefaultDisappearingDuration:[28,a.TYPES.INTEGER],resendCount:[16,a.TYPES.INTEGER],retryCount:[6,a.TYPES.INTEGER],revokeDuration:[33,a.TYPES.INTEGER],revokeType:[34,d("WAWebWamEnumRevokeType").REVOKE_TYPE],sendButtonPressT:[45,a.TYPES.INTEGER],senderDefaultDisappearingDuration:[27,a.TYPES.INTEGER],serverErrorCode:[56,a.TYPES.INTEGER],stickerIsAi:[50,a.TYPES.BOOLEAN],stickerIsAvatar:[38,a.TYPES.BOOLEAN],stickerIsFirstParty:[18,a.TYPES.BOOLEAN],stickerIsFromStickerMaker:[51,a.TYPES.BOOLEAN],stickerMakerSourceType:[52,d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE],thumbSize:[20,a.TYPES.NUMBER],typeOfGroup:[36,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{MessageSend:[]});g.MessageSendWamEvent=b}),98);
__d("WAWebRevokeMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMessageType","WAWebWamEnumRevokeType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({RevokeMessageSend:[3656,{messageSendResultIsTerminal:[1,a.TYPES.BOOLEAN],messageType:[2,d("WAWebWamEnumMessageType").MESSAGE_TYPE],resendCount:[3,a.TYPES.INTEGER],retryCount:[4,a.TYPES.INTEGER],revokeDuration:[5,a.TYPES.INTEGER],revokeType:[6,d("WAWebWamEnumRevokeType").REVOKE_TYPE]},[1,1,1],"regular"]},{RevokeMessageSend:[]});g.RevokeMessageSendWamEvent=b}),98);
__d("WAWebMessageSendReporter",["WALogger","WANullthrows","WAWebABProps","WAWebContactCollection","WAWebEditMessageSendWamEvent","WAWebEphemeralityResolver","WAWebMessageSendWamEvent","WAWebMiscGatingUtils","WAWebMsgGetters","WAWebMsgType","WAWebRevokeMessageSendWamEvent","WAWebWamAddressingModeUtils","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumMessageSendResultType","WAWebWamEnumMessageType","WAWebWamEnumRevokeType","WAWebWamGroupMetricUtils","WAWebWamMsgUtils","WAWebWamNumberToSizeBucket"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter: skip posting, metric has already been posted"]);h=function(){return a};return a}b=function(){function a(a,b){this.$3=!1;this.$4=d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;this.$1=a.to;var e=Boolean(a.caption);d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&a.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&(e=d("WAWebMsgGetters").getIsCaptionByUser(a));this.$2=new(d("WAWebMessageSendWamEvent").MessageSendWamEvent)({messageType:d("WAWebWamMsgUtils").getWamMessageType(a),messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(a),mediaCaptionPresent:e,fastForwardEnabled:!0,messageIsFanout:!0,messageIsForward:Boolean(a.isForwarded),messageIsRevoke:Boolean(d("WAWebMsgGetters").getIsRevoke(a)),isViewOnce:Boolean(a.isViewOnce),isAReply:d("WAWebMsgGetters").getIsReply(a),e2eBackfill:Boolean(b==null?void 0:b.isResend),messageDistributionType:d("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE.REGULAR_MESSAGE,editType:d("WAWebMsgGetters").getWamEditType(a),botType:d("WAWebWamMsgUtils").getWamBotType(this.$1,a.bizBotType)});a.ephemeralDuration!=null&&(this.$2.ephemeralityDuration=a.ephemeralDuration);if(!d("WAWebMsgGetters").getIsGroupMsg(a)&&!d("WAWebMsgGetters").getIsNewsletterMsg(a)){this.$2.isLid=this.$1.isLid();e=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(d("WAWebContactCollection").ContactCollection.getMeContact());e!=null&&(this.$2.senderDefaultDisappearingDuration=e);if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){e=d("WAWebMsgGetters").getWamDisappearingModeTrigger(a);e!=null&&(this.$2.ephemeralityTriggerAction=e);e=d("WAWebMsgGetters").getWamDisappearingModeInitiatedByMe(a);e!=null&&(this.$2.ephemeralityInitiator=e)}e=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(d("WAWebContactCollection").ContactCollection.get(this.$1));e!=null&&(this.$2.receiverDefaultDisappearingDuration=e)}if(d("WAWebMsgGetters").getIsRevoke(a)){this.$2.revokeType=a.subtype==="admin_revoke"?d("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:d("WAWebWamEnumRevokeType").REVOKE_TYPE.SENDER;e=d("WAWebMsgGetters").getRevokeDuration(a);e!=null&&(this.$2.revokeDuration=e)}if(d("WAWebMsgGetters").getIsEditProtocolMsg(a)){e=c("WANullthrows")(b==null?void 0:b.originalMessage);this.$2.editDuration=d("WAWebMsgGetters").getT(a)-d("WAWebMsgGetters").getT(e);this.$4=e.getWamMediaType()}e=d("WAWebMsgGetters").getWamDisappearingModeInitiator(a);e!=null&&(this.$2.disappearingChatInitiator=e);e=d("WAWebWamMsgUtils").getWamAgentEngagementType(a);e!=null&&(this.$2.agentEngagementType=e);(b==null?void 0:b.groupData)!=null&&this.setGroupData(b.groupData)}var b=a.prototype;b.setDeviceCount=function(a){this.$2.deviceCount=d("WAWebWamGroupMetricUtils").capCount(a),this.$2.deviceSizeBucket=c("WAWebWamNumberToSizeBucket")(a)};b.setGroupData=function(a){a.isLid!=null&&(this.$2.isLid=a.isLid),Object.assign(this.$2,d("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(a)),a.wamTypeOfGroup!=null&&(this.$2.typeOfGroup=a.wamTypeOfGroup),a.participantCount!=null&&(this.$2.participantCount=a.participantCount),a.deviceCount!=null&&(this.$2.deviceCount=a.deviceCount),a.deviceSizeBucket!=null&&(this.$2.deviceSizeBucket=a.deviceSizeBucket)};b.setMessageDistributionType=function(a){this.$2.messageDistributionType=a};b.setMessageIsFirstUserMessage=function(a){this.$2.messageIsFirstUserMessage=a};b.postSuccess=function(){this.$2.messageSendResult=d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.OK,this.$2.messageSendResultIsTerminal=!1,this.$5()};b.postFailure=function(a){var b=a.result;a=a.isTerminal;this.$2.messageSendResult=b;this.$2.messageSendResultIsTerminal=a;this.$2.weight=0;this.$5()};b.$6=function(){new(d("WAWebRevokeMessageSendWamEvent").RevokeMessageSendWamEvent)({messageSendResultIsTerminal:this.$2.messageSendResultIsTerminal,messageType:this.$2.messageType,resendCount:this.$2.resendCount,retryCount:this.$2.retryCount,revokeDuration:this.$2.revokeDuration,revokeType:this.$2.revokeType}).commit()};b.$7=function(){new(d("WAWebEditMessageSendWamEvent").EditMessageSendWamEvent)({messageSendResultIsTerminal:this.$2.messageSendResultIsTerminal,messageType:this.$2.messageType,resendCount:this.$2.resendCount,retryCount:this.$2.retryCount,editType:this.$2.editType,editDuration:this.$2.editDuration,typeOfGroup:this.$2.typeOfGroup,mediaType:this.$4}).commit()};b.$5=function(){if(this.$3){d("WALogger").WARN(h());return}this.$3=!0;this.$2.markMessageSendT();this.$2.commit();this.$2.messageIsRevoke&&this.$2.messageType!==d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS&&this.$6();this.$2.editType!==d("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED&&this.$7()};return a}();function a(a){a=a.messageIsInvisible;var b=new(d("WAWebMessageSendWamEvent").MessageSendWamEvent)({messageIsInvisible:a});return{setGroupData:function(a){a.isLid!=null&&(b.isLid=a.isLid),a.wamTypeOfGroup!=null&&(b.typeOfGroup=a.wamTypeOfGroup),a.participantCount!=null&&(b.participantCount=a.participantCount),a.deviceCount!=null&&(b.deviceCount=a.deviceCount),a.deviceSizeBucket!=null&&(b.deviceSizeBucket=a.deviceSizeBucket)},post:function(){b.markMessageSendT(),b.commit()}}}g.MessageSendReporter=b;g.createMessageSendMetricReporter=a}),98);
__d("WAWebCreateBizBotSysMsgAction",["WAWebBotSystemMsg","WAWebBotTypes","WAWebDBProcessMessage","WAWebMsgModelFromData","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.bizBotSystemMsgType===d("WAWebBotTypes").BizBotType.BIZ_1P)return;var b=d("WAWebBotSystemMsg").genBizBot1pDisclosureMessage(a.id);a.msgs.add(d("WAWebMsgModelFromData").msgModelFromMsgData(b));yield d("WAWebDBProcessMessage").storeMessages([b],a.id);yield a.updateBizBotSysMsgCreated(d("WAWebBotTypes").BizBotType.BIZ_1P)});return h.apply(this,arguments)}g.maybeCreateBizBot1pDisclosureSysMsg=a}),98);
__d("WAWebHandleBizBotAutomatedTypeAction",["WALogger","WAWebApiBusinessProfile","WAWebBotGating","WAWebBotSystemMsg","WAWebBotTos","WAWebBotTypes","WAWebChatCollection","WAWebContactSystemMsg","WAWebDBProcessMessage","WAWebMsgModelFromData","WAWebPrivacyModeSystemMsg","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[biz-bot] created generic privacy system message for ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[biz-bot] created 3p system message for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[biz-bot] created 1p system message for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[biz-bot] handle automatedType transition for ",". prev: ",", next: ",""]);k=function(){return a};return a}function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=d("WAWebChatCollection").ChatCollection.get(a);if(!e)return;b=b;if(!b){a=(yield d("WAWebApiBusinessProfile").getBusinessProfileRow(a.toString()));b=(a=d("WAWebBotTypes").BizBotAutomatedType.cast(a==null?void 0:a.automatedType))!=null?a:d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN}c=(a=c)!=null?a:d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN;if(b===c)return;d("WALogger").DEV(k(),e.id.toString(),b,c);b===d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN&&c===d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P?yield m(e):b===d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN&&c===d("WAWebBotTypes").BizBotAutomatedType.FULL_3P?yield o(e):b===d("WAWebBotTypes").BizBotAutomatedType.FULL_3P&&c===d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN&&(yield q(e))});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBotTos").hasAcceptedBizBotTos()||a.bizBotSystemMsgType===d("WAWebBotTypes").BizBotType.BIZ_1P)return;var b=d("WAWebBotSystemMsg").genBizBot1pDisclosureMessage(a.id);yield d("WAWebDBProcessMessage").storeMessages([b],b.id.remote);if(d("WAWebBotGating").isBizBot1pEnabled()){b=d("WAWebMsgModelFromData").msgModelFromMsgData(b);a.msgs.add(b)}yield a.updateBizBotSysMsgCreated(d("WAWebBotTypes").BizBotType.BIZ_1P);d("WALogger").DEV(j(),a.id.toString())});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBotTos").hasAcceptedBizBotTos()||a.bizBotSystemMsgType===d("WAWebBotTypes").BizBotType.BIZ_3P)return;var b=d("WAWebBotSystemMsg").genBizBot3pDisclosureMessage(a.id);yield d("WAWebDBProcessMessage").storeMessages([b],b.id.remote);b=d("WAWebMsgModelFromData").msgModelFromMsgData(b);a.msgs.add(b);yield a.updateBizBotSysMsgCreated(d("WAWebBotTypes").BizBotType.BIZ_3P);d("WALogger").DEV(i(),a.id.toString())});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.bizBotSystemMsgType==null)return;var b=a.id,e,f=d("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(a.contact.privacyMode);switch(f){case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE:e=d("WAWebContactSystemMsg").genEncryptNotificationMsg(b,"encrypt_now");break;case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP:e=d("WAWebContactSystemMsg").genNonE2ENotificationMsg(b,"biz_privacy_mode_to_bsp");break;case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB:e=d("WAWebContactSystemMsg").genNonE2ENotificationMsg(b,"biz_privacy_mode_to_fb");break}if(!e)throw c("err")("Unhandled privacy mode");yield d("WAWebDBProcessMessage").storeMessages([e],e.id.remote);f=d("WAWebMsgModelFromData").msgModelFromMsgData(e);a.msgs.add(f);yield a.updateBizBotSysMsgCreated(null);d("WALogger").DEV(h(),a.id.toString())});return r.apply(this,arguments)}g.handleBizBotAutomatedTypeTransition=a}),98);
__d("WAWebHandleBizBotWelcomeMsgProtocolModeAction",["WALogger","WAWebApiBusinessProfile","WAWebBotGating","WAWebBotTypes","WAWebBotWelcomeRequestSync","WAWebChatCollection","WAWebSyncd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[biz-bot] reset welcome msg request flag to false"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[biz-bot] handle welcomeMsgProtocolMode transition for ",". prev: ",", next: ",""]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(!d("WAWebBotGating").isBizBot3pAvailable())return;var e=d("WAWebChatCollection").ChatCollection.get(a);if(!e)return;b=b;if(!b){a=(yield d("WAWebApiBusinessProfile").getBusinessProfileRow(a.toString()));b=(a=d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.cast(a==null?void 0:a.welcomeMsgProtocolMode))!=null?a:d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.NONE}c=(a=c)!=null?a:d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.NONE;if(b===c)return;d("WALogger").DEV(i(),e.id.toString(),b,c);c===d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.NONE&&(d("WALogger").DEV(h()),yield k(e))});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.hasRequestedWelcomeMsg)return;a.hasRequestedWelcomeMsg=!1;var e=c("WAWebBotWelcomeRequestSync").getBotWelcomeRequestSetMutation(a.id,!1);yield d("WAWebSyncd").lockForSync(["chat"],[e],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];return b.merge(a.id.toString(),{hasRequestedWelcomeMsg:!1})});return function(a){return c.apply(this,arguments)}}())});return l.apply(this,arguments)}g.handleBizBotWelcomeMsgProtocolModeTransition=a}),98);
__d("WAWebBotProfileCollection",["WAWebBaseCollection","WAWebBotProfileModel","WAWebWidFactory","cr:3979"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getDefaultBot=function(){return this.findFirst(function(a){return a.isDefault===!0})};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebBotProfileModel");b=new a();g.BotProfileCollection=b}),98);
__d("WAWebBotProfileModel",["WAWebBaseModel","WAWebContactCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.attrs=d("WAWebBaseModel").prop(function(){return[]}),c.description=d("WAWebBaseModel").prop(),c.category=d("WAWebBaseModel").prop(),c.isDefault=d("WAWebBaseModel").prop(),c.prompts=d("WAWebBaseModel").prop(function(){return[]}),c.personaId=d("WAWebBaseModel").prop(),c.commands=d("WAWebBaseModel").prop(function(){return[]}),c.commandsDescription=d("WAWebBaseModel").prop(),c.contact=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd({id:this.id,name:this.name,verifiedName:this.name,shortName:this.name,pushName:this.name,isBusiness:!0,type:"out"}))};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="botProfile";a.idClass=c("WAWebWid");b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebBizBotHeroIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="biz-bot-hero";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=120;m=240;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 240 120",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsxs("g",{clipPath:"url(#a)",children:[j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m29.7 55.473 3.41.695-.655 3.178c-.423 1.963.859 3.872 2.836 4.281a3.66 3.66 0 0 0 4.336-2.795l.655-3.178 3.204.655a3.66 3.66 0 0 0 4.336-2.796c.423-1.963-.858-3.872-2.836-4.281l-3.204-.655.709-3.368c.423-1.964-.86-3.873-2.837-4.282a3.68 3.68 0 0 0-4.336 2.81l-.709 3.367-3.409-.695a3.68 3.68 0 0 0-4.336 2.81c-.423 1.963.859 3.872 2.836 4.281v-.027Z",fill:"#FCF5EB",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m186 33.355-.914-9.969c-.081-1.022-.736-1.922-1.691-2.372a2.978 2.978 0 0 0-2.918.259l-8.291 5.768a2.867 2.867 0 0 0-1.227 2.618c.082 1.023.736 1.923 1.691 2.373l9.205 4.2a2.924 2.924 0 0 0 2.918-.26A2.867 2.867 0 0 0 186 33.356Z",fill:"#73F793",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{d:"M159.3 22.555c-.655-4.5-4.173-7.814-8.359-7.814H65.754c-4.145 0-7.704 3.3-8.359 7.814L53.837 47.29h.041c0 6.654 2.946 12.368 7.405 16.254V91.95c0 6.86 5.468 12.464 12.273 12.695v.028h69.177c7.009 0 12.723-5.714 12.723-12.723V63.545c4.472-3.886 7.404-9.613 7.404-16.295l-3.56-24.695Z",fill:"white"}),j.jsx("path",{d:"M159.3 22.555c-.655-4.5-4.173-7.814-8.359-7.814H65.754c-4.145 0-7.704 3.3-8.359 7.814L53.837 47.29h.041c0 6.654 2.946 12.368 7.405 16.254V91.95c0 6.86 5.468 12.464 12.273 12.695v.028h69.177c7.009 0 12.723-5.714 12.723-12.723V63.545c4.472-3.886 7.404-9.613 7.404-16.295l-3.56-24.695Z",fill:"#06CF9C",fillOpacity:.2}),j.jsx("path",{d:"M155.455 63.56v28.404c0 7.009-5.714 12.722-12.723 12.722H74.004c-7.009 0-12.722-5.713-12.722-12.722V63.79",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{d:"M95.332 67.486a9.398 9.398 0 0 1 1.636 5.319v31.868m-23.4.013V72.818c0-1.09.546-2.945.886-3.927m68.428-.001v14.046c0 5.196-4.214 9.41-9.409 9.41h-17.741c-5.196 0-9.409-4.214-9.409-9.41V70.964m44.659-56.224H65.768c-4.145 0-7.704 3.3-8.359 7.815L53.85 47.29h109.009L159.3 22.555c-.655-4.5-4.173-7.814-8.359-7.814h.041Z",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{d:"M162.859 47.264c0 15.804-16.418 26.318-30.75 19.663-3.436-1.595-5.577-3.136-5.577-3.136-1.459 1.364-7.882 7.036-17.823 7.173-10.377.136-17.114-5.878-18.505-7.173-.313.218-.831.573-1.5.968a43.912 43.912 0 0 1-4.077 2.168c-14.332 6.655-30.75-3.859-30.75-19.663h109.009M90.218 63.79l2.25-49.035m34.077 49.035-2.14-49.035",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{d:"M55.923 103.8c4.759 0 8.618-3.805 8.618-8.51 0-4.704-3.86-8.508-8.618-8.508-4.76 0-8.618 3.804-8.618 8.509 0 4.704 3.859 8.509 8.618 8.509Z",fill:"#fff",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{d:"m224.605 58.268-18.028-20.74c-2.195-2.196-5.972-.642-5.972 2.468v2.85h-22.132a7.525 7.525 0 0 0-7.528 7.527v20.454c0 4.132 3.341 7.5 7.473 7.528l22.173.272v2.85c0 3.11 3.764 4.678 5.973 2.468l18.027-20.74a3.505 3.505 0 0 0 0-4.95l.014.013Z",fill:"#FCF5EB",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M180.559 88.132h-.027l-10.868-4.596c-.6-.259-1.05-.709-1.282-1.268l-4.664-10.677c-1.077-2.495-3.491-2.714-4.173-2.714-.681 0-3.109.232-4.172 2.741l-4.623 10.623c-.286.614-.736 1.064-1.309 1.295l-10.95 4.623c-2.496 1.036-2.755 3.327-2.755 4.091 0 .71.232 3.055 2.728 4.105l10.5 4.54c.545.246.995.682 1.268 1.241l5.073 11.019c1.104 2.386 3.368 2.618 4.131 2.618.696 0 3.082-.205 4.173-2.687l4.732-10.895c.286-.614.736-1.064 1.295-1.296l10.896-4.595h.027c2.427-1.09 2.7-3.327 2.7-4.105 0-.736-.245-3.027-2.7-4.104h-.014l.014.04Z",fill:"#fff",stroke:"#316474",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}),j.jsx("defs",{children:j.jsx("clipPath",{id:"a",children:j.jsx("path",{fill:"#fff",d:"M0 0h240v120H0z"})})})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.BizBotHeroIcon=a}),98);
__d("WAWebWamEnumBotBizActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_BIZ_CARD_CLICK:1,BOT_BIZ_CARD_MESSAGE_CLICK:2,BOT_BIZ_CARD_VIEW_AI_CLICK:3,BOT_BIZ_DEEPLINK_CLICK:4,BOT_BIZ_NUX_APPEAR:5,BOT_BIZ_NUX_DISMISS:6,BOT_BIZ_NUX_SELECT:7,BOT_BIZ_INFO_CHAT_CLICK:8});f.BOT_BIZ_ACTION_TYPE=a}),66);
__d("WAWebWamEnumBotBizEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({SHARED_BOT_BIZ_CARD:1,SHARED_BOT_BIZ_DEEPLINK:2,BOT_BIZ_CHAT:3});f.BOT_BIZ_ENTRY_POINT=a}),66);
__d("WAWebWamEnumBotBizType",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_BIZ_3P:1,BOT_BIZ_1P:2});f.BOT_BIZ_TYPE=a}),66);
__d("WAWebBotBizJourneyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBotBizActionType","WAWebWamEnumBotBizEntryPoint","WAWebWamEnumBotBizType","WAWebWamEnumBotType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({BotBizJourney:[4868,{appSessionId:[1,d("WAWebWamCodegenUtils").TYPES.STRING],botBizActionType:[5,d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE],botBizEntryPoint:[6,d("WAWebWamEnumBotBizEntryPoint").BOT_BIZ_ENTRY_POINT],botBizType:[7,d("WAWebWamEnumBotBizType").BOT_BIZ_TYPE],botType:[4,d("WAWebWamEnumBotType").BOT_TYPE]},[1,1,1],"regular"]},{BotBizJourney:[]});g.BotBizJourneyWamEvent=a}),98);
__d("WAWebGetSharedSessionId",["WAWebPonyfillsCryptoRandomUUID"],(function(a,b,c,d,e,f,g){var h=c("WAWebPonyfillsCryptoRandomUUID")();function a(){return h}g.getSharedSessionId=a}),98);
__d("WAWebBizBotLogging",["WAWebBotBizJourneyWamEvent","WAWebBotGating","WAWebChatEntryPoint","WAWebGetSharedSessionId","WAWebWamEnumBotBizActionType","WAWebWamEnumBotBizEntryPoint","WAWebWamEnumBotBizType","WAWebWamEnumBotType"],(function(a,b,c,d,e,f,g){function a(a){if(!d("WAWebBotGating").isBizBot3pEnabled())return;a=new(d("WAWebBotBizJourneyWamEvent").BotBizJourneyWamEvent)({appSessionId:d("WAWebGetSharedSessionId").getSharedSessionId(),botBizEntryPoint:d("WAWebWamEnumBotBizEntryPoint").BOT_BIZ_ENTRY_POINT.SHARED_BOT_BIZ_CARD,botBizActionType:j(a),botBizType:h("3p"),botType:i("3p")});a.commit()}function b(){if(!d("WAWebBotGating").isBizBot3pEnabled())return;var a=new(d("WAWebBotBizJourneyWamEvent").BotBizJourneyWamEvent)({appSessionId:d("WAWebGetSharedSessionId").getSharedSessionId(),botBizEntryPoint:d("WAWebWamEnumBotBizEntryPoint").BOT_BIZ_ENTRY_POINT.SHARED_BOT_BIZ_DEEPLINK,botBizActionType:d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_DEEPLINK_CLICK,botBizType:h("3p"),botType:i("3p")});a.commit()}function c(a,b,c){if(a==="3p"&&!d("WAWebBotGating").isBizBot3pEnabled()||a==="1p"&&!d("WAWebBotGating").isBizBot1pEnabled())return;var e;switch(c){case d("WAWebChatEntryPoint").ChatEntryPoint.Vcard:e=d("WAWebWamEnumBotBizEntryPoint").BOT_BIZ_ENTRY_POINT.SHARED_BOT_BIZ_CARD;break;case d("WAWebChatEntryPoint").ChatEntryPoint.Chatlist:e=d("WAWebWamEnumBotBizEntryPoint").BOT_BIZ_ENTRY_POINT.BOT_BIZ_CHAT;break;default:e=void 0}c=new(d("WAWebBotBizJourneyWamEvent").BotBizJourneyWamEvent)({appSessionId:d("WAWebGetSharedSessionId").getSharedSessionId(),botBizActionType:j(b),botBizEntryPoint:e,botBizType:h(a),botType:i(a)});c.commit()}function h(a){switch(a){case"1p":return d("WAWebWamEnumBotBizType").BOT_BIZ_TYPE.BOT_BIZ_1P;case"3p":return d("WAWebWamEnumBotBizType").BOT_BIZ_TYPE.BOT_BIZ_3P}}function i(a){switch(a){case"1p":return d("WAWebWamEnumBotType").BOT_TYPE.BOT_1P_BIZ;case"3p":return d("WAWebWamEnumBotType").BOT_TYPE.BOT_3P_BIZ}}function j(a){switch(a){case"card_click":return d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_CARD_CLICK;case"message_click":return d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_CARD_MESSAGE_CLICK;case"view_ai_click":return d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_CARD_VIEW_AI_CLICK;case"nux_appear":return d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_NUX_APPEAR;case"nux_dismiss":return d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_NUX_DISMISS;case"nux_select":return d("WAWebWamEnumBotBizActionType").BOT_BIZ_ACTION_TYPE.BOT_BIZ_NUX_SELECT}}g.logBizBot3pContactCardJourneyEvent=a;g.logBizBot3pDeepLinkClickEvent=b;g.logBizBotNuxJourneyEvent=c}),98);
__d("WAWebBotLightBulbIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="bot-light-bulb";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M12 22C12.55 22 13.0208 21.8042 13.4125 21.4125C13.8042 21.0208 14 20.55 14 20H10C10 20.55 10.1958 21.0208 10.5875 21.4125C10.9792 21.8042 11.45 22 12 22ZM15 19C15.2833 19 15.5208 18.9042 15.7125 18.7125C15.9042 18.5208 16 18.2833 16 18C16 17.7167 15.9042 17.4792 15.7125 17.2875C15.5208 17.0958 15.2833 17 15 17H9C8.71667 17 8.47917 17.0958 8.2875 17.2875C8.09583 17.4792 8 17.7167 8 18C8 18.2833 8.09583 18.5208 8.2875 18.7125C8.47917 18.9042 8.71667 19 9 19H15ZM15.75 16C16.9 15.3167 17.8125 14.4 18.4875 13.25C19.1625 12.1 19.5 10.85 19.5 9.5C19.5 7.41667 18.7708 5.64583 17.3125 4.1875C15.8542 2.72917 14.0833 2 12 2C9.91667 2 8.14583 2.72917 6.6875 4.1875C5.22917 5.64583 4.5 7.41667 4.5 9.5C4.5 10.85 4.8375 12.1 5.5125 13.25C6.1875 14.4 7.1 15.3167 8.25 16H15.75ZM15.15 14H8.85C8.1 13.4667 7.52083 12.8083 7.1125 12.025C6.70417 11.2417 6.5 10.4 6.5 9.5C6.5 7.96667 7.03333 6.66667 8.1 5.6C9.16667 4.53333 10.4667 4 12 4C13.5333 4 14.8333 4.53333 15.9 5.6C16.9667 6.66667 17.5 7.96667 17.5 9.5C17.5 10.4 17.2958 11.2417 16.8875 12.025C16.4792 12.8083 15.9 13.4667 15.15 14Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.BotLightBulbIcon=a}),98);
__d("WAWebBusinessDataSharingIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="business-data-sharing";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=18;m=20;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 20 18",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M14.3 9.30005C14.1 9.10005 14 8.86238 14 8.58705C14 8.31238 14.0917 8.08338 14.275 7.90005L16.175 6.00005H2.00005C1.71672 6.00005 1.47938 5.90405 1.28805 5.71205C1.09605 5.52072 1.00005 5.28338 1.00005 5.00005C1.00005 4.71672 1.09605 4.47905 1.28805 4.28705C1.47938 4.09572 1.71672 4.00005 2.00005 4.00005H16.175L14.275 2.10005C14.0917 1.91672 14 1.68738 14 1.41205C14 1.13738 14.1 0.900049 14.3 0.700049C14.4834 0.516716 14.7167 0.425049 15 0.425049C15.2834 0.425049 15.5167 0.516716 15.7 0.700049L19.3 4.30005C19.4 4.40005 19.4711 4.50838 19.5131 4.62505C19.5544 4.74172 19.5751 4.86672 19.5751 5.00005C19.5751 5.13338 19.5544 5.25838 19.5131 5.37505C19.4711 5.49172 19.4 5.60005 19.3 5.70005L15.7 9.30005C15.5 9.50005 15.2627 9.59572 14.988 9.58705C14.7127 9.57905 14.4834 9.48338 14.3 9.30005ZM4.30005 17.3L0.700049 13.7C0.600049 13.6 0.529382 13.4917 0.488049 13.375C0.446049 13.2584 0.425049 13.1334 0.425049 13C0.425049 12.8667 0.446049 12.7417 0.488049 12.625C0.529382 12.5084 0.600049 12.4 0.700049 12.3L4.30005 8.70005C4.48338 8.51672 4.71272 8.42071 4.98805 8.41205C5.26272 8.40405 5.50005 8.50005 5.70005 8.70005C5.90005 8.88338 6.00405 9.11238 6.01205 9.38705C6.02072 9.66238 5.92505 9.90005 5.72505 10.1L3.82505 12H18C18.2834 12 18.5207 12.0957 18.712 12.287C18.904 12.479 19 12.7167 19 13C19 13.2834 18.904 13.5207 18.712 13.712C18.5207 13.904 18.2834 14 18 14H3.82505L5.72505 15.9C5.90838 16.0834 6.00405 16.3167 6.01205 16.6C6.02072 16.8834 5.92505 17.1167 5.72505 17.3C5.54172 17.5 5.30838 17.6 5.02505 17.6C4.74172 17.6 4.50005 17.5 4.30005 17.3Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.BusinessDataSharingIcon=a}),98);
__d("WAWebCatalogEntrypointIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="catalog-entrypoint";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",children:[j.jsx("title",{children:"catalog"}),j.jsx("desc",{children:"Created with Sketch."}),j.jsxs("g",{id:"catalog",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",children:[j.jsx("g",{id:"Group",transform:"translate(23.000000, 20.000000)"}),j.jsxs("g",{id:"Group-2",transform:"translate(0.000000, 2.000000)",fill:"currentColor",children:[j.jsx("path",{d:"M19.5231962,0.25 L4.4768038,0.25 C3.24356655,0.25 2.16113263,1.07099996 1.82863822,2.25856957 L0.633237306,6.52818064 C0.372658667,7.45888884 0.915906016,8.42461764 1.84661422,8.68519628 C2.00019949,8.72819691 2.15894223,8.75 2.31843358,8.75 L21.6815664,8.75 C22.6480647,8.75 23.4315664,7.96649831 23.4315664,7 C23.4315664,6.84050865 23.4097633,6.68176591 23.3667627,6.52818064 L22.1713618,2.25856957 C21.8388674,1.07099996 20.7564335,0.25 19.5231962,0.25 Z M19.5231962,1.75 C20.0837586,1.75 20.575774,2.1231818 20.7269078,2.66298617 L21.9223087,6.93259723 C21.9284517,6.95453799 21.9315664,6.97721552 21.9315664,7 C21.9315664,7.13807119 21.8196376,7.25 21.6815664,7.25 L2.31843358,7.25 C2.2956491,7.25 2.27297157,7.24688527 2.25103082,7.24074233 C2.1180725,7.20351681 2.04046574,7.06555555 2.07769126,6.93259723 L3.27309217,2.66298617 C3.424226,2.1231818 3.91624141,1.75 4.4768038,1.75 L19.5231962,1.75 Z",id:"Path",fillRule:"nonzero"}),j.jsx("path",{d:"M23,8 L23,8.39401172 C23,9.28097201 22.0068112,10.5 20.7816587,10.5 C19.6338274,10.5 18.701177,9.36689087 18.5866935,8.55847255 C18.4710113,9.36689087 17.5383609,10.5 16.391129,10.5 C15.2426983,10.5 14.3106473,9.36689087 14.1955645,8.55847255 C14.0804817,9.36689087 13.1478313,10.5 12,10.5 C10.8515693,10.5 9.91951831,9.36689087 9.80443548,8.55847255 C9.68995205,9.36689087 8.75670227,10.5 7.60887097,10.5 C6.46103967,10.5 5.52898867,9.36689087 5.41390584,8.55847255 C5.29882302,9.36689087 4.36557323,10.5 3.21834133,10.5 C1.99318875,10.5 1,9.28097201 1,8.39401172 L1,8 L23,8 Z",id:"Fill-9"}),j.jsx("path",{d:"M2,12.75 L2,17.75 C2,18.7164983 2.78350169,19.5 3.75,19.5 L15.75,19.5 C16.7164983,19.5 17.5,18.7164983 17.5,17.75 L17.5,12.75 C17.5,12.3357864 17.1642136,12 16.75,12 C16.3357864,12 16,12.3357864 16,12.75 L16,17.75 C16,17.8880712 15.8880712,18 15.75,18 L3.75,18 C3.61192881,18 3.5,17.8880712 3.5,17.75 L3.5,12.75 C3.5,12.3357864 3.16421356,12 2.75,12 C2.33578644,12 2,12.3357864 2,12.75 Z",id:"Path-2",fillRule:"nonzero"}),j.jsx("path",{d:"M21.5,18.75 L21.5,12.75 C21.5,12.3357864 21.1642136,12 20.75,12 C20.3357864,12 20,12.3357864 20,12.75 L20,18.75 C20,19.1642136 20.3357864,19.5 20.75,19.5 C21.1642136,19.5 21.5,19.1642136 21.5,18.75 Z",id:"Path-2",fillRule:"nonzero"})]})]})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.CatalogEntrypointIcon=a}),98);
__d("WAWebFocusTracer",["WALogger","WAShiftTimer"],(function(a,b,c,d,e,f,g){function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["Setting focus to:"]);a=function(){return b};return b}function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Focus loop encountered."]);h=function(){return a};return a}var i=5,j=75,k=[],l=!1;function b(){k=[],l=!1}function m(){if(k.length<i)return!1;var a=new Set();for(var b=0;b<k.length;b++){if(a.has(k[b]))return!0;a.add(k[b])}return!1}function n(a){k.length===i&&k.shift(),k.push(a)}var o=new(d("WAShiftTimer").ShiftTimer)(b);document.addEventListener("keydown",function(a){o.forceRunNow()},{capture:!0,passive:!0});function c(a,b){if(!a)return;if(k.length&&a===k[k.length-1])return;l=l||window.event!=null;n(a);if(m()&&!l){d("WALogger").ERROR(h()).sendLogs("focus-loop");return}o.onOrBefore(j);a.focus(b)}e={focus:c};f=e;g["default"]=f}),98);
__d("useWAWebFocusOnMount",["WAWebFocusTracer","react"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(){var a=j();i(function(){c("WAWebFocusTracer").focus(a.current)},[]);return a}g["default"]=a}),98);
__d("WAWebBizBotTos.react",["fbt","WAWebBizBotHeroIcon","WAWebBizBotLogging","WAWebBotLightBulbIcon","WAWebBotTos","WAWebBotTypes","WAWebBox.react","WAWebBusinessDataSharingIcon","WAWebCatalogEntrypointIcon","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebModal.react","WAWebModalManager","WAWebTos","WAWebUISpacing","WAWebWDSText.react","asyncToGeneratorRuntime","react","stylex","useWAWebFocusOnMount","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k;a=k||d("react");var l=i||(i=c("react"));e=a.forwardRef;var m=a.useEffect,n=a.useImperativeHandle,o=a.useState,p={headerText:{textAlign:"x2b8uid",$$css:!0},icon:{color:"xfect85",$$css:!0},sectionIcon:{width:"xvy4d1p",$$css:!0},sectionTitle:{width:"xdzyupr",lineHeight:"x1o2sk6j",$$css:!0},divider:{width:"xw90zxv",height:"xjm9jq1",backgroundColor:"xxnau4b",$$css:!0}};f=e(function(a,e){var f,g=a.onOK,i=a.onCancel,k=a.automatedType,q=a.chatEntryPoint;a=o(!1);var r=a[0],s=a[1],t=k===d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P;d("useWAWebListener").useListener(d("WAWebTos").TosManager,"change",function(){d("WAWebBotTos").hasAcceptedBizBotTos()&&d("WAWebModalManager").ModalManager.close()});n(e,function(){return{close:function(){d("WAWebModalManager").ModalManager.close()}}});a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=!1;s(!0);try{yield d("WAWebBotTos").acceptBizBotTos(),yield g==null?void 0:g(),a=!0}finally{s(!1)}a&&(d("WAWebModalManager").ModalManager.close(),d("WAWebBizBotLogging").logBizBotNuxJourneyEvent(t?"1p":"3p","nux_select",q))});return function(){return a.apply(this,arguments)}}();var u=function(){d("WAWebBotTos").dismissBizBotTos(),d("WAWebModalManager").ModalManager.close(),i==null?void 0:i(),d("WAWebBizBotLogging").logBizBotNuxJourneyEvent(t?"1p":"3p","nux_dismiss",q)};k=function(){u()};e=c("useWAWebFocusOnMount")();m(function(){d("WAWebBizBotLogging").logBizBotNuxJourneyEvent(t?"1p":"3p","nux_appear",q)},[]);var v=l.jsx(d("WAWebFlex.react").FlexItem,{xstyle:(f=d("WAWebUISpacing")).uiPadding.start10,children:l.jsx(d("WAWebBizBotHeroIcon").BizBotHeroIcon,{width:200})}),w=h._("__JHASH__i7DXhnmyR34__JHASH__"),x=[{icon:l.jsx(d("WAWebBotLightBulbIcon").BotLightBulbIcon,{width:24,height:24,iconXstyle:p.icon}),title:h._("__JHASH__HMHCWuhzmBc__JHASH__"),subtitle:h._("__JHASH__LvB9FyGZyAG__JHASH__")},{icon:l.jsx(d("WAWebCatalogEntrypointIcon").CatalogEntrypointIcon,{width:20,height:20,iconXstyle:p.icon}),title:h._("__JHASH__hxzaf0mNKXM__JHASH__"),subtitle:h._("__JHASH__oWQHiqprQlR__JHASH__")},{icon:l.jsx(d("WAWebBusinessDataSharingIcon").BusinessDataSharingIcon,{width:20,height:20,iconXstyle:p.icon}),title:h._("__JHASH__bDdAJ8li-Xu__JHASH__"),subtitle:h._("__JHASH__cOsTwdA4_l5__JHASH__")}],y=h._("__JHASH__6HNDiUZpwuN__JHASH__",[h._implicitParam("=m2",l.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getBotPrivacyPolicyUrl(),children:h._("__JHASH__091aY9BQ8qX__JHASH__")})),h._implicitParam("=m5",l.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getBotTermsUrl(),children:h._("__JHASH__xFyBYD25Dvz__JHASH__")})),h._implicitParam("=m8",l.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getBizBotTosLearnMoreUrl(),children:h._("__JHASH__TmuuDeJGEuH__JHASH__")}))]);return l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{okText:h._("__JHASH__Q0WqZOj894A__JHASH__"),onOK:a,okSpinner:r===!0,cancelText:h._("__JHASH__NpPH2jpgc_j__JHASH__"),onCancel:u,onOverlayClick:k,type:d("WAWebModal.react").ModalTheme.Promote,ref:e,children:l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",xstyle:[f.uiMargin.vertAuto,f.uiPadding.bottom16],children:[v,l.jsx(d("WAWebBox.react").Box,{xstyle:[p.headerText,f.uiMargin.horiz8,f.uiMargin.top16,f.uiMargin.bottom8],children:l.jsx(d("WAWebWDSText.react").WDSTextLarge,{weight:"bold",children:w})}),x.map(function(a,b){var e=a.icon,f=a.title;a=a.subtitle;return l.jsxs(d("WAWebFlex.react").FlexRow,{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.horiz8,d("WAWebUISpacing").uiMargin.vert16),children:[l.jsx(d("WAWebFlex.react").FlexItem,{xstyle:[d("WAWebUISpacing").uiPadding.horiz8,p.sectionIcon],children:e}),l.jsxs(d("WAWebFlex.react").FlexItem,{xstyle:[d("WAWebUISpacing").uiPadding.horiz8,p.sectionTitle],children:[l.jsx(d("WAWebWDSText.react").WDSTextTitle,{children:f}),l.jsx(d("WAWebWDSText.react").WDSTextMuted,{children:a})]})]},b)}),l.jsx("div",{className:(j||(j=c("stylex")))(p.divider,d("WAWebUISpacing").uiMargin.vert16)}),l.jsx(d("WAWebBox.react").Box,{xstyle:[d("WAWebUISpacing").uiMargin.horiz8,d("WAWebUISpacing").uiMargin.vert8],children:l.jsx(d("WAWebWDSText.react").WDSTextMuted,{children:y})})]})})});g.BizBotTos=f}),226);
__d("WAWebBizBotTosUtils",["Promise","WAWebBizBotTos.react","WAWebBotGating","WAWebBotTos","WAWebBotTypes","WAWebChatEntryPoint","WAWebCreateBizBotSysMsgAction","WAWebModalManager","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c;if(!d("WAWebBotGating").isBizBot1pEnabled()||!((c=a.contact.businessProfile)==null?void 0:c.isBizBot1p)||d("WAWebBotTos").hasSeenBizBotTos(d("WAWebBotTypes").BizBotType.BIZ_1P))return;return new(h||(h=b("Promise")))(function(c){var e;d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebBizBotTos.react").BizBotTos,{automatedType:d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P,onOK:b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebCreateBizBotSysMsgAction").maybeCreateBizBot1pDisclosureSysMsg(a),c()}),onCancel:c,chatEntryPoint:(e=a.chatEntryPoint)!=null?e:d("WAWebChatEntryPoint").ChatEntryPoint.Unknown}),{blockClose:!0})})});return k.apply(this,arguments)}g.maybeShowBizBot1pTos=a}),98);
__d("WAWebChatLockUpdateDailyStats",["WAWebDailyAggregatedStatsCollection"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a={});var b=d("WAWebDailyAggregatedStatsCollection").DailyAggregatedStatsCollection.gaddForToday();a.totalFolderChatsCount!=null&&(b.chatLockFolderChatsCount=a.totalFolderChatsCount);a.incFolderOpenCount!=null&&(b.chatLockFolderOpenCount+=a.incFolderOpenCount);a.lockFolderHidden!=null&&(b.chatLockLockFolderHidden=a.lockFolderHidden);a.incNewAddChatCount!=null&&(b.chatLockNewAddChatCount+=a.incNewAddChatCount);a.incNewRemoveChatCount!=null&&(b.chatLockNewRemoveChatCount+=a.incNewRemoveChatCount);a.secretCodeActive!=null&&(b.chatLockSecretCodeActive=a.secretCodeActive)}g.updateChatLockDailyStats=a}),98);
__d("WAWebAddOnModel",["WAWebBaseModel","WAWebModelUtils"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.ack=d("WAWebModelUtils").prop(),c.isSendFailure=d("WAWebModelUtils").session(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);g.AddOnBaseModel=a}),98);
__d("WAWebCommentModel",["WAWebAck","WAWebAddOnModel","WAWebBaseModel","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.parentMsgKey=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.sender=d("WAWebBaseModel").prop(),c.read=d("WAWebBaseModel").prop(),c.ack=d("WAWebBaseModel").prop(),c.body=d("WAWebBaseModel").prop(),c.id=d("WAWebBaseModel").prop(),c.isSendFailure=d("WAWebBaseModel").prop(),c.isFailed=d("WAWebBaseModel").derived(function(){var a=d("WAWebUserPrefsMeUser").isMeAccount(this.sender)&&this.ack!=null&&this.ack<d("WAWebAck").ACK.CLOCK;return a||Boolean(this.isSendFailure)},["ack","isSendFailure"]),c.isNewMsg=d("WAWebBaseModel").session(),c.subtype=d("WAWebBaseModel").prop(),c.protocolMessageKey=d("WAWebBaseModel").prop(),c.revokeTimestamp=d("WAWebBaseModel").prop(),c.isOverwrittenByRevoke=d("WAWebBaseModel").prop(),c.revokeSender=d("WAWebBaseModel").session(),c.startOfDaySkew=d("WAWebBaseModel").session(),c.startOfDay=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebAddOnModel").AddOnBaseModel);a.Proxy="comment";b=d("WAWebBaseModel").defineModel(a);g.Comment=b}),98);
__d("WAWebCommentCollection",["WAWebBaseCollection","WAWebCollectionUtils","WAWebCommentModel"],(function(a,b,c,d,e,f,g){c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.byParent=d("WAWebCollectionUtils").aggregated(function(a){return a.parentMsgKey}),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.getByMsgKey=function(a){return this.findFirst(function(b){return b.id.equals(a)})};return b}(d("WAWebBaseCollection").BaseCollection);c.model=d("WAWebCommentModel").Comment;function a(a){return new(d("WAWebCommentModel").Comment)({ack:a.ack,body:a.body,id:a.id,parentMsgKey:a.parentMsgKey,sender:a.sender,t:a.t,type:"comment",read:a.read})}function b(a){return new(d("WAWebCommentModel").Comment)({t:a.t,parentMsgKey:a.parentMsgKey,id:a.id,subtype:a.subtype,protocolMessageKey:a.protocolMessageKey,revokeTimestamp:a.revokeTimestamp,isOverwrittenByRevoke:!0,type:"revoke",sender:a.revokeSender,revokeSender:a.revokeSender})}e=new c();g.CommentCollectionImpl=c;g.createCommentModel=a;g.createCommentModelFromRevoke=b;g.CommentCollection=e}),98);
__d("WAWebMuteGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createMuteCache});b=a.field;c=a.computed;e=a.unsafeIdentityGetter;f=a.clearCacheFor;d=f;a=e;f=b("callExpiration");e=b("expiration");b=c(function(a){a=a[0];return!!a},[e]);c=c(function(a){a=a[0];return!!a},[f]);g.clearMuteGetterCacheFor=d;g.getMuteUnsafe=a;g.getCallExpiration=f;g.getExpiration=e;g.getIsMuted=b;g.getIsCallMuted=c}),98);
__d("WAWebCommentNotification",["fbt","WAWebABProps","WAWebBaseNotification","WAWebContactCollection","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebGetNotificationStrings","WAWebMsgCollection","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationHelpers","WAWebNotificationIconUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;b=b.commentMsg;c=a.call(this)||this;c.commentMsg=b;b=d("WAWebMsgCollection").MsgCollection.get(c.commentMsg.parentMsgKey);b!=null&&(c.parentMsg=b);return c}var e=c.prototype;e.shouldMute=function(){var a=d("WAWebFrontendMsgGetters").getChat(this.commentMsg);if(this.parentMsg==null)return!0;if(d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute()))return!0;if(d("WAWebABProps").getABPropConfigValue("web_abprop_mute_notifications_on_app_focus")?d("WAWebNotificationHelpers").appIsActive():d("WAWebNotificationHelpers").chatIsActive(a))return!0;if(d("WAWebNotificationHelpers").isMutedAndNotMentioned(this.parentMsg))return!0;if(d("WAWebNotificationHelpers").isArchivedAndNotMentioned(this.parentMsg))return!0;return d("WAWebNotificationHelpers").isOfflineResumeInProgress()?!0:!1};e.shouldPlaySound=function(){var b=d("WAWebFrontendMsgGetters").getChat(this.commentMsg);return a.prototype.shouldPlaySound.call(this)&&!d("WAWebNotificationHelpers").shouldSquelch(b,!1)};e.getBannerOptions=function(){var a=d("WAWebFrontendMsgGetters").getChat(this.commentMsg);return{wid:a.id,title:d("WAWebNotificationHelpers").getNotificationTitle(a),body:d("WAWebGetNotificationStrings").getNotificationBody(babelHelpers["extends"]({},i(this.commentMsg)))}};e.buildKey=function(){return"comment:"+this.commentMsg.id.toString()};e.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebFrontendMsgGetters").getChat(this.commentMsg);return d("WAWebNotificationIconUtils").getChatNotificationIcon(a,this.abortController.signal)});function c(){return a.apply(this,arguments)}return c}();return c}(d("WAWebBaseNotification").WABaseNotification);function i(a){a=d("WAWebContactCollection").ContactCollection.get(a.sender);a=a?d("WAWebFrontendContactGetters").getFormattedUser(a):"";a=h._("__JHASH__e6dfjfD8_tA__JHASH__",[h._param("name",a)]);return{body:a.toString()}}g.WACommentNotification=a}),226);
__d("WAWebConsumerTransparencyInfoIconModel",["WAMd5","WATypeUtils","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h=function(a){var b;b=((b=c("WAWebUserPrefsStore").getMe())!=null?b:"").toString();a=a.toString();return c("WAMd5")(b+"-"+a)};a=function(){function a(){this.chatIds=new Set();var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.CTWA_CONSUMER_TRANSPARENCY_INFO_ICON);a instanceof Array&&(this.chatIds=new Set(a.filter(d("WATypeUtils").isString)))}var b=a.prototype;b.add=function(a){this.chatIds.add(h(a)),c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CTWA_CONSUMER_TRANSPARENCY_INFO_ICON,Array.from(this.chatIds))};b.shouldShowIcon=function(a){return this.chatIds.has(h(a))};return a}();b=new a();g.ConsumerTransparencyInfoIconModel=b}),98);
__d("WAWebCommonCTWAConsumerTransparency",["WAWebBizGatingUtils","WAWebCommonCTWADataSharing","WAWebConsumerTransparencyInfoIconModel"],(function(a,b,c,d,e,f,g){a=function(a){if(!a.contact.isBusiness)return!1;var b=d("WAWebConsumerTransparencyInfoIconModel").ConsumerTransparencyInfoIconModel.shouldShowIcon(a.id);return!b&&c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a)==null?!1:d("WAWebBizGatingUtils").isConsumerTransparencyEnabled()};b=function(a,b,c){if(b==null||c==null)return;if(!a.contact.isBusiness||!d("WAWebBizGatingUtils").isConsumerTransparencyEnabled())return;b=d("WAWebConsumerTransparencyInfoIconModel").ConsumerTransparencyInfoIconModel.shouldShowIcon(a.id);if(b)return;d("WAWebConsumerTransparencyInfoIconModel").ConsumerTransparencyInfoIconModel.add(a.id)};g.shouldShowConsumerTransparencyDisclosure=a;g.handleConsumerTransparencyForNewMsg=b}),98);
__d("WASmaxInBizSettingsEnums",[],(function(a,b,c,d,e,f){a={DISCOVERABLE:"DISCOVERABLE",HIDDEN:"HIDDEN",UNDEFINED:"UNDEFINED"};b={"false":"false",notset:"notset","true":"true"};c={"false":"false","true":"true"};f.ENUM_DISCOVERABLE_HIDDEN_UNDEFINED=a;f.ENUM_FALSE_NOTSET_TRUE=b;f.ENUM_FALSE_TRUE=c}),66);
__d("WASmaxInBizSettingsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBizSettingsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInBizSettingsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBizSettingsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInBizSettingsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInBizSettingsIQErrorBadRequestMixin","WASmaxInBizSettingsIQErrorFeatureNotImplementedMixin","WASmaxInBizSettingsIQErrorInternalServerErrorMixin","WASmaxInBizSettingsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBizSettingsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBizSettingsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:c.value});var e=d("WASmaxInBizSettingsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:e.value});var f=d("WASmaxInBizSettingsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorFeatureNotImplemented","IQErrorServiceUnavailable","IQErrorInternalServerError"],[b,c,e,f])}g.parseIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInBizSettingsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizSettingsGetPrivacySettingResponseError",["WAResultOrError","WASmaxInBizSettingsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup","WASmaxInBizSettingsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBizSettingsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBizSettingsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup").parseIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup:b.value}))}g.parseGetPrivacySettingResponseError=a}),98);
__d("WASmaxInBizSettingsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBizSettingsSmbDataSharingSettingValueMixin",["WAResultOrError","WASmaxInBizSettingsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"value",d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE);return!a.success?a:d("WAResultOrError").makeResult({value:a.value})}g.parseSmbDataSharingSettingValueMixin=a}),98);
__d("WASmaxInBizSettingsSmbDataSharingSettingMixin",["WASmaxInBizSettingsSmbDataSharingSettingValueMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"privacy");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"smb_data_sharing_with_meta_consent");if(!b.success)return b;a=d("WASmaxInBizSettingsSmbDataSharingSettingValueMixin").parseSmbDataSharingSettingValueMixin(b.value);return!a.success?a:a}g.parseSmbDataSharingSettingMixin=a}),98);
__d("WASmaxInBizSettingsGetPrivacySettingResponseSuccess",["WAResultOrError","WASmaxInBizSettingsIQResultResponseMixin","WASmaxInBizSettingsSmbDataSharingSettingMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"privacy");if(!c.success)return c;c=d("WASmaxInBizSettingsSmbDataSharingSettingMixin").parseSmbDataSharingSettingMixin(c.value);if(!c.success)return c;a=d("WASmaxInBizSettingsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({privacySmbDataSharingSettingMixin:c.value},a.value))}g.parseGetPrivacySettingResponseSuccess=a}),98);
__d("WASmaxOutBizSettingsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizSettingsGetPrivacySettingRequest",["WASmaxJsx","WASmaxOutBizSettingsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutBizSettingsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"w:biz",to:d("WAWap").S_WHATSAPP_NET,smax_id:d("WAWap").INT(109)},d("WASmaxJsx").smax("privacy",null)));return a}g.makeGetPrivacySettingRequest=a}),98);
__d("WASmaxBizSettingsGetPrivacySettingRPC",["WAComms","WASmaxInBizSettingsGetPrivacySettingResponseError","WASmaxInBizSettingsGetPrivacySettingResponseSuccess","WASmaxOutBizSettingsGetPrivacySettingRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:c=d("WASmaxOutBizSettingsGetPrivacySettingRequest").makeGetPrivacySettingRequest();h.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=h.sent;f=d("WASmaxInBizSettingsGetPrivacySettingResponseSuccess").parseGetPrivacySettingResponseSuccess(e,c);if(!f.success){h.next=7;break}return h.abrupt("return",{name:"GetPrivacySettingResponseSuccess",value:f.value});case 7:g=d("WASmaxInBizSettingsGetPrivacySettingResponseError").parseGetPrivacySettingResponseError(e,c);if(!g.success){h.next=10;break}return h.abrupt("return",{name:"GetPrivacySettingResponseError",value:g.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetPrivacySetting",{Success:f,Error:g}));case 11:case"end":return h.stop()}},null,this)}g.sendGetPrivacySettingRPC=a}),98);
__d("WASmaxInBizSettingsSetPrivacySettingResponseError",["WAResultOrError","WASmaxInBizSettingsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup","WASmaxInBizSettingsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBizSettingsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBizSettingsIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup").parseIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup:b.value}))}g.parseSetPrivacySettingResponseError=a}),98);
__d("WASmaxInBizSettingsSetPrivacySettingResponseSuccess",["WAResultOrError","WASmaxInBizSettingsIQResultResponseMixin","WASmaxInBizSettingsSmbDataSharingSettingMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"privacy");if(!c.success)return c;c=d("WASmaxInBizSettingsSmbDataSharingSettingMixin").parseSmbDataSharingSettingMixin(c.value);a=d("WASmaxInBizSettingsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({privacySmbDataSharingSettingMixin:c.success?c.value:null},a.value))}g.parseSetPrivacySettingResponseSuccess=a}),98);
__d("WASmaxOutBizSettingsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutBizSettingsSmbDataSharingSettingValueMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyValue;a=d("WASmaxJsx").smax("smax$any",{value:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSmbDataSharingSettingValueMixin=a}),98);
__d("WASmaxOutBizSettingsSmbDataSharingSettingMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutBizSettingsSmbDataSharingSettingValueMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxJsx").smax("privacy",null,d("WASmaxOutBizSettingsSmbDataSharingSettingValueMixin").mergeSmbDataSharingSettingValueMixin(d("WASmaxJsx").smax("smb_data_sharing_with_meta_consent",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSmbDataSharingSettingMixin=a}),98);
__d("WASmaxOutBizSettingsSetPrivacySettingRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutBizSettingsBaseIQSetRequestMixin","WASmaxOutBizSettingsSmbDataSharingSettingMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.smbDataSharingSettingMixinArgs;a=d("WASmaxOutBizSettingsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"w:biz",to:d("WAWap").S_WHATSAPP_NET,smax_id:d("WAWap").INT(110)},d("WASmaxMixins").optionalMerge(d("WASmaxOutBizSettingsSmbDataSharingSettingMixin").mergeSmbDataSharingSettingMixin,d("WASmaxJsx").smax("privacy",null),a)));return a}g.makeSetPrivacySettingRequest=a}),98);
__d("WASmaxBizSettingsSetPrivacySettingRPC",["WAComms","WASmaxInBizSettingsSetPrivacySettingResponseError","WASmaxInBizSettingsSetPrivacySettingResponseSuccess","WASmaxOutBizSettingsSetPrivacySettingRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutBizSettingsSetPrivacySettingRequest").makeSetPrivacySettingRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInBizSettingsSetPrivacySettingResponseSuccess").parseSetPrivacySettingResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"SetPrivacySettingResponseSuccess",value:g.value});case 7:h=d("WASmaxInBizSettingsSetPrivacySettingResponseError").parseSetPrivacySettingResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"SetPrivacySettingResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SetPrivacySetting",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendSetPrivacySettingRPC=a}),98);
__d("WAWebCTWABizDataSharingJob",["WALogger","WASmaxBizSettingsGetPrivacySettingRPC","WASmaxBizSettingsSetPrivacySettingRPC","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][data_sharing] GetPrivacySettingResponseError: changing data sharing setting returned null value"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][data_sharing] SetPrivacySettingResponseError: changing data sharing setting failed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][data_sharing] GetPrivacySettingResponseError: fetch data sharing setting failed"]);j=function(){return a};return a}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WASmaxBizSettingsGetPrivacySettingRPC").sendGetPrivacySettingRPC());switch(a.name){case"GetPrivacySettingResponseError":var b=a.value.errorIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup.value,c=b.code;b=b.text;d("WALogger").ERROR(j()).devConsole("[ctwa][data_sharing] GetPrivacySettingResponseError: fetch data sharing setting failed "+c+", "+b);return null;default:a.name;return a.value.privacySmbDataSharingSettingMixin.value}});return k.apply(this,arguments)}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a={smbDataSharingSettingMixinArgs:{anyValue:a}};a=(yield d("WASmaxBizSettingsSetPrivacySettingRPC").sendSetPrivacySettingRPC(a));switch(a.name){case"SetPrivacySettingResponseError":var b=a.value.errorIQErrorBadRequestOrFeatureNotImplementedOrServiceUnavailableOrInternalServerErrorMixinGroup.value,c=b.code;b=b.text;d("WALogger").ERROR(i()).devConsole("[ctwa][data_sharing] GetPrivacySettingResponseError: changing data sharing setting failed "+c+", "+b);return null;default:a.name;a.value.privacySmbDataSharingSettingMixin==null&&d("WALogger").ERROR(h()).devConsole("[ctwa][data_sharing] GetPrivacySettingResponseError: changing data sharing setting returned null value");return(b=(c=a.value.privacySmbDataSharingSettingMixin)==null?void 0:c.value)!=null?b:null}});return l.apply(this,arguments)}g.getCtwaBizDataSharingSettingJob=a;g.setCtwaBizDataSharingSettingJob=c}),98);
__d("WAWebCTWADataSharingModel",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){var h=null,i=new(c("WAWebEventEmitter"))();a=function(a){h=a,i.trigger("update",h)};b=function(){return h};d=function(a){i.on("update",a)};e=function(a){i.off("update",a)};f={subscribeForUpdates:d,unsubscribeFromUpdates:e,setValue:a,getValue:b};g.CTWADataSharingModel=f}),98);
__d("WAWebDataSharingOptInCoolOffModel",["WATimeUtils","WAWebBizGatingUtils","WAWebUserPrefsKeys","WAWebUserPrefsStore","gkx"],(function(a,b,c,d,e,f,g){var h=null;a=function(){var a=d("WAWebBizGatingUtils").smbDataSharingOptInCoolOffSeconds();if(h==null){var b=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.CTWA_DATA_SHARING_COOL_OFF);h=d("WATimeUtils").castToUnixTime(typeof b==="number"?b:0)}return d("WATimeUtils").isInFuture(d("WATimeUtils").futureUnixTime(a,h))};b=function(){h=d("WATimeUtils").unixTime(),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.CTWA_DATA_SHARING_COOL_OFF,h)};e=function(){c("gkx")("26258")||(h=null)};f={isCoolOffActive:a,startCoolOff:b,resetCoolOffStartTimestamp:e};g.DataSharingOptInCoolOffModel=f}),98);
__d("WAWebDataSharingUpsellModel",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h=null;a=function(){if(h==null){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.CTWA_DATA_SHARING_UPSELL_ACTIVE);h=a===!0}return h};b=function(){h!==!0&&(h=!0,c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.CTWA_DATA_SHARING_UPSELL_ACTIVE,!0))};e={isUpsellEnabled:a,enableUpsell:b};g["default"]=e}),98);
__d("WAWebCommonCTWADataSharing",["WALogger","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWABizDataSharingJob","WAWebCTWADataSharingModel","WAWebChatModel","WAWebConversionTupleCollection","WAWebDataSharingOptInCoolOffModel","WAWebDataSharingUpsellModel","WAWebFrontendMsgGetters","WAWebGetCTWAEligibilityFromConversion","WAWebMsgModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][data_sharing] fetchDataSharingSettingAndUpdateModel: fetch data sharing setting failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][data_sharing] shouldShowLabelDataSharingDialog: target value must be a chat or a message"]);i=function(){return a};return a}var j={CHAT:"CHAT",MESSAGE:"MESSAGE"},k=function(a){a=c("WAWebConversionTupleCollection").get(a.id);if(!a)return null;var b=a.conversionData;a=a.conversionSource;return d("WAWebGetCTWAEligibilityFromConversion").getCTWAEligibilityFromConversion({conversionData:b,conversionSource:a})};a=function(){var a=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue();return(a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]||a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"])&&d("WAWebBizGatingUtils").shouldShowSMBDataSharingSettings()};e=function(a){return k(a)==null||!d("WAWebBizGatingUtils").smbDataSharingConsentEnabled()||d("WAWebDataSharingOptInCoolOffModel").DataSharingOptInCoolOffModel.isCoolOffActive()?!1:d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.notset};f=function(a,b){var c;if(b===j.CHAT)c=d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForChats;else if(b===j.MESSAGE)c=d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForMessages;else{d("WALogger").ERROR(i());return!1}return k(a)==null||!c()||d("WAWebDataSharingOptInCoolOffModel").DataSharingOptInCoolOffModel.isCoolOffActive()?!1:d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.notset};var l=function(a,b,e){if(e<1||!d("WAWebBizGatingUtils").smbDataSharingConsentEnabled()||c("WAWebConversionTupleCollection").get(a.id)==null)return!1;e=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue();a=e===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"];e=e===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]&&b==="order-create"&&c("WAWebDataSharingUpsellModel").isUpsellEnabled();return a||e},m=function(a){if(a.length===0)return!1;var b=[],e=a[0];if(e instanceof d("WAWebMsgModel").Msg){if(!d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForMessages())return!1;b.push(d("WAWebFrontendMsgGetters").getChat(e))}else{if(!d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForChats())return!1;a.forEach(function(a){a instanceof d("WAWebChatModel").Chat&&b.push(a)})}e=b.some(function(a){return k(a)!=null});if(!e)return!1;a=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue();e=a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"];a=a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]&&c("WAWebDataSharingUpsellModel").isUpsellEnabled();return e||a},n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebBizGatingUtils").smbDataSharingConsentEnabled())return null;try{var a=(yield d("WAWebCTWABizDataSharingJob").getCtwaBizDataSharingSettingJob());a&&(d("WAWebCTWADataSharingModel").CTWADataSharingModel.setValue(a),a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]&&c("WAWebDataSharingUpsellModel").enableUpsell());return a}catch(a){d("WALogger").ERROR(h()).devConsole(a);return null}});return function(){return a.apply(this,arguments)}}();a={SMB_DATA_SHARING_ALLOWED_SOURCE:d("WAWebGetCTWAEligibilityFromConversion").SMB_DATA_SHARING_ALLOWED_SOURCE,SmbDataSharingLabelTargetValues:j,getCTWAEligibilityFromChat:k,shouldDisplayDataSharingSetting:a,shouldShowOrderDataSharingDialog:e,shouldShowLabelDataSharingDialog:f,shouldDisplayDataSharingOrderOptOutOrUpsell:l,shouldDisplayDataSharingLabelOptOutOrUpsell:m,fetchDataSharingSettingAndUpdateModel:n};g["default"]=a}),98);
__d("WAWebWamEnumCallInitiatorType",[],(function(a,b,c,d,e,f){a=Object.freeze({BUSINESS:0,CONSUMER:1});f.CALL_INITIATOR_TYPE=a}),66);
__d("WAWebWamEnumCtwaChatCreationMode",[],(function(a,b,c,d,e,f){a=Object.freeze({JID:0,LID:1});f.CTWA_CHAT_CREATION_MODE=a}),66);
__d("WAWebWamEnumCtwaConversionType",[],(function(a,b,c,d,e,f){a=Object.freeze({FIRST_MESSAGE:0,DEEP_CONVERSATION:1,FIRST_BIZ_REPLY:2,FIRST_CALL:3,FIRST_LONG_CALL:4,SECOND_MESSAGE:5,SECOND_BIZ_REPLY:6,THIRD_MESSAGE:7,CART_RECEIVED:8,ORDER_CREATED:9,FIRST_MESSAGE_CONTINUATION:10,FIRST_BIZ_REPLY_CONTINUATION:11,SECOND_MESSAGE_CONTINUATION:12,SECOND_BIZ_REPLY_CONTINUATION:13,THIRD_MESSAGE_CONTINUATION:14});f.CTWA_CONVERSION_TYPE=a}),66);
__d("WAWebWamEnumTrustBannerAction",[],(function(a,b,c,d,e,f){a=Object.freeze({VIEWED:0,DISMISSED:1});f.TRUST_BANNER_ACTION=a}),66);
__d("WAWebDeepLinkConversionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCallInitiatorType","WAWebWamEnumCtwaChatCreationMode","WAWebWamEnumCtwaConversionType","WAWebWamEnumTrustBannerAction"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({DeepLinkConversion:[1432,{callInitiator:[8,d("WAWebWamEnumCallInitiatorType").CALL_INITIATOR_TYPE],ctwaChatCreationMode:[4,d("WAWebWamEnumCtwaChatCreationMode").CTWA_CHAT_CREATION_MODE],ctwaConversionType:[3,d("WAWebWamEnumCtwaConversionType").CTWA_CONVERSION_TYPE],deepLinkConversionData:[2,a.TYPES.STRING],deepLinkConversionSource:[1,a.TYPES.STRING],isPriority:[7,a.TYPES.BOOLEAN],trustBannerAction:[5,d("WAWebWamEnumTrustBannerAction").TRUST_BANNER_ACTION],trustBannerType:[6,a.TYPES.STRING]},[1,1,1],"regular"]},{DeepLinkConversion:[]});g.DeepLinkConversionWamEvent=b}),98);
__d("WAWebCommonCTWALogging",["WAArrayBufferUtils","WALogger","WATimeUtils","WAWebABProps","WAWebConnModel","WAWebConversionTupleModel","WAWebDeepLinkConversionWamEvent","WAWebFrontendMsgGetters","WAWebMsgType","WAWebUserPrefsMeUser","WAWebWamEnumCtwaConversionType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: Cannot get current user"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: THIRD_MESSAGE"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: SECOND_MESSAGE"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: FIRST_MESSAGE"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: DEEP_CONVERSATION"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: SECOND_BIZ_REPLY"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: FIRST_BIZ_REPLY"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["ctwa:dc-logging: Attempted to log a DC with no CTWA conversion data or source"]);o=function(){return a};return a}function p(a){var b=d("WATimeUtils").unixTime()-d("WAWebConversionTupleModel").ConversionTupleExpiry;return a.t<b}function q(a,b){a=b.indexOf(a);return a>=0?b[a-1]:null}function r(a,b){b=q(a,b);return((a=a.from)==null?void 0:a.toString())===(b==null?void 0:(a=b.from)==null?void 0:a.toString())}function s(a){var b=0,c=a[a.length-1];while(c&&b<=6){var e;if(p(c))return[null,b];else if(c.ctwaContext)return[c,b];var f=q(c,a);if(!f)break;var g=!d("WAWebMsgType").SYSTEM_MESSAGE_TYPES.includes(c.type);e=((e=c.from)==null?void 0:e.toString())!==((e=f.from)==null?void 0:e.toString());g&&e&&b++;c=f}return[c,b]}function t(a,b){a=(a=a.ctwaContext)!=null?a:{};var c=a.conversionData;a=a.conversionSource;if(c==null||a==null){d("WALogger").WARN(o());return}b={ctwaConversionType:d("WAWebWamEnumCtwaConversionType").CTWA_CONVERSION_TYPE[b],deepLinkConversionData:d("WAArrayBufferUtils").arrayBufferToString(c),deepLinkConversionSource:a};void new(d("WAWebDeepLinkConversionWamEvent").DeepLinkConversionWamEvent)(b).commitAndWaitForFlush(!0)}function u(a,b){b===1?(d("WALogger").DEV(n()),t(a,"FIRST_BIZ_REPLY")):b===3?(d("WALogger").DEV(m()),t(a,"SECOND_BIZ_REPLY")):b===5&&(d("WALogger").DEV(l()),t(a,"DEEP_CONVERSATION"))}function v(a,b){b===0?(d("WALogger").DEV(k()),t(a,"FIRST_MESSAGE")):b===2?(d("WALogger").DEV(j()),t(a,"SECOND_MESSAGE")):b===4&&(d("WALogger").DEV(i()),t(a,"THIRD_MESSAGE"))}function a(a){var b,c,e;if(!d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_dc_logging_enabled"))return;if(!a||a.isNewMsg!==!0)return;if(!d("WAWebConnModel").Conn.isSMB)return;b=(b=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:b.toString();if(b==null){d("WALogger").WARN(h()).sendLogs("ctwa:dc-logging: Cannot get current user");return}c=(c=(c=d("WAWebFrontendMsgGetters").getChat(a))==null?void 0:c.msgs.toArray())!=null?c:[];if(c.length===0)return;if(a.ctwaContext==null&&r(a,c))return;c=s(c);var f=c[0];c=c[1];if(!f)return;if(c>5)return;b===((e=a.from)==null?void 0:e.toString())?u(f,c):b===((e=a.to)==null?void 0:e.toString())&&v(f,c)}g.logDeepConversation=a}),98);
__d("WAWebAdModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.ad=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="Ad";b=d("WAWebBaseModel").defineModel(a);g.AdModel=b}),98);
__d("WAWebFetchAds",["Promise","WACustomError","WALogger","WAPromiseTimeout","WAQplTypes","WAWebBizGatingUtils","WAWebCTWAConstants","WAWebCommonAdsTypes","WAWebFetchAdAccountToken","WAWebFetchAdsQuery.graphql","WAWebOrchestratorNonPersistedJob","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebRelayClient"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchAdsWithToken: Relay parser error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchAdsWithTimeout: timeout"]);k=function(){return a};return a}var l={type:"error"},m=h!==void 0?h:h=b("WAWebFetchAdsQuery.graphql"),n=90;function a(a){return!d("WAWebBizGatingUtils").adManagementEnabled()?(i||(i=b("Promise"))).resolve({type:"not-enabled"}):d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("fetchAds",function(){return o(a)}).waitUntilCompleted()}function o(a){return d("WAPromiseTimeout").promiseTimeout(p(a),d("WAWebCTWAConstants").MANAGE_ADS_FETCH_TIMEOUT_MS)["catch"](function(a){if(a instanceof d("WACustomError").TimeoutError){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS,"fetch_ads_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS,d("WAQplTypes").QuickLogActionType.ABORTED);d("WALogger").WARN(k());return{type:"timeout"}}throw a})}function p(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS,"fetch_ads_start");return d("WAWebFetchAdAccountToken").fetchToken().then(function(b){if(b.type==="success")return q({token:b.token,pageId:a}).then(function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS,"fetch_ads_end");a.type!=="success"?(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS,d("WAQplTypes").QuickLogActionType.FAIL),a.type==="auth-failure"?d("WAWebFetchAdAccountToken").markTokenAsInvalid():a.type):(a.type,d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_ADS,d("WAQplTypes").QuickLogActionType.SUCCESS));return a});b.type;return b})}function q(a){var b=a.token;a=a.pageId;return d("WAWebRelayClient").fetchQuery(m,{page_id:a,options:{from_n_days_ago:n}},{environmentType:"facebook",accessToken:b}).then(function(a){if(a==null)return l;a=a.ctwa;a=a.all_page_ads;a=a.edges;var b=a.reduce(function(a,b){b=b.node;b=b.wrapper_renderer;var c=b.boosted_component;b=b.async_request;[c,b].forEach(function(b){if(b==null)return;b=r(b);b!=null&&a.push(b)});return a},[]);return b.length<a.length?l:{type:"success",ads:b}})["catch"](function(a){var b;if(d("WAWebFetchAdAccountToken").hasGraphQLAuthError(a))return{type:"auth-failure"};(a==null?void 0:(b=a.message)==null?void 0:b.startsWith("Relay:"))===!0&&d("WALogger").ERROR(j(),a.message).sendLogs("fetch-ads-relay-parser-error");return l})}function r(a){var b,c=a.id,e=a.boosting_info,f=a.spec;a=a.campaign_group;var g=e.thumbnail_image_url;e=e.spent;var h=f.adgroup_spec;f=f.boosting_status;e=e.formatted_for_lwi;var i=a.id;a=s(a);b=(b=a==null?void 0:a.reach)!=null?b:0;a=(a=a==null?void 0:a.conversations)!=null?a:0;g={adId:d("WAWebCommonAdsTypes").asAdId(c),thumbnailUrl:g,boostingStatus:(c=d("WAWebCommonAdsTypes").BoostingStatusEnum.cast(f))!=null?c:d("WAWebCommonAdsTypes").BoostingStatusEnum.UNKNOWN,budget:e,campaignGroupId:d("WAWebCommonAdsTypes").asAdCampaignGroupId(i),conversations:a,reach:b};f=h[0];if(f!=null){c=f.creative;if(c!=null){e=c.body;e!=null&&(g.creativeText=e)}}return g}function s(a){a=a.ad_insights;if(a==null)return;a=a.edges;a=a.reduce(function(a,b){b=b.node;var c=b.reach;b=b.results;a.push({reach:(c=c)!=null?c:0,conversations:(c=b)!=null?c:0});return a},[]);if(a.length===0)return;return a[0]}g.fetchAds=a}),98);
__d("WAWebAdCollection",["WAWebAdModel","WAWebBaseCollection","WAWebFetchAds","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.loadingInfo=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.loadAds=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(this.loadingInfo!=null&&this.loadingInfo.pageId===a)return this.loadingInfo.promise;this.reset();var c=d("WAWebFetchAds").fetchAds(a).then(function(c){var d;c.type==="success"?(b.set(c.ads.map(function(a){return{id:a.adId,ad:a}})),d={result:"success",pageId:a}):c.type==="recovery-required"?d={result:"recovery-required",pageId:a,emailMask:c.emailMask}:(c.type,d={result:c.type,pageId:a});b.trigger("ads-loaded",d)})["finally"](function(){b.loadingInfo=null});this.loadingInfo={promise:c,pageId:a};return c});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebAdModel").AdModel;c=new a();g.AdCollectionImpl=a;g.AdCollection=c}),98);
__d("WAWebBackoff",["err"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.backoffIntervals=[].concat(a),this.cache=new Map()}var b=a.prototype;b.add=function(a){if(this.get(a))throw c("err")("This entry already exists in the backoff cache");this.cache.set(a,{lastAttempt:Date.now(),intervals:[].concat(this.backoffIntervals),attempts:1})};b.remove=function(a){this.cache["delete"](a)};b.get=function(a){return this.cache.get(a)};b.reset=function(a){this.remove(a),this.add(a)};b.shouldBackoff=function(a){a=this.get(a);if(a!=null){var b=a.intervals[0];if(b!=null){a=Date.now()-a.lastAttempt;if(a<b)return!0}}return!1};b.markAttemptAndShiftInterval=function(a){a=this.get(a);a!=null&&(a.lastAttempt=Date.now(),a.intervals.shift(),a.attempts++)};b.test=function(a){var b=this.get(a);if(this.shouldBackoff(a))return!0;else b!=null?this.markAttemptAndShiftInterval(a):this.add(a);return!1};b.getCurrentInterval=function(a){a=this.get(a);if(a!=null)return a.intervals[0]};return a}();g.BackoffCache=a}),98);
__d("WAWebEphemeralGenerateSystemMessage",["WAWebContactSystemMsg","WAWebHandleMsgTypes.flow","WAWebHandleSingleMsg","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=b("WAWebHandleSingleMsg").handleSingleMsg;a=d("WAWebContactSystemMsg").genDisappearingModeUpdateSystemMsg(a.id,c,e);yield f(a.from,a,"ephemeralSystemMsg",d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE,!1)});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebHandleSingleMsg").handleSingleMsg;a=d("WAWebContactSystemMsg").genDisappearingModeUnsupportedSystemMsg(a.id);yield c(a.from,a,"ephemeralUnsupportedSystemMsg",d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE,!1)});return i.apply(this,arguments)}g.generateEphemeralNotificationTemplateSystemMessage=a;g.generateEphemeralUnsupportedNotificationTemplateSystemMessage=c}),98);
__d("WAWebEphemeralIsDurationAllowed",["WAWebServerPropsModel"],(function(a,b,c,d,e,f,g){function a(a){if(a<0)return!1;return a===0?!0:d("WAWebServerPropsModel").ServerProps.getEphemeralMessagesAllowedValues().includes(a)}g.isEphemeralDurationAllowed=a}),98);
__d("WAWebEphemeralOutOfSyncInfoWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumClientGroupSizeBucket"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({EphemeralOutOfSyncInfo:[3892,{groupSizeBucket:[1,d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],incomingMessageEphemeralityDuration:[2,a.TYPES.INTEGER],isAGroup:[3,a.TYPES.BOOLEAN],isNewThreadForUser:[5,a.TYPES.BOOLEAN],otherDefaultModeDuration:[6,a.TYPES.INTEGER],threadEphemeralityDuration:[7,a.TYPES.INTEGER],threadId:[8,a.TYPES.STRING],userDefaultModeDuration:[9,a.TYPES.INTEGER]},[1,1,1],"regular"]},{EphemeralOutOfSyncInfo:[]});g.EphemeralOutOfSyncInfoWamEvent=b}),98);
__d("WAWebWamEnumEsrFailureReasonType",[],(function(a,b,c,d,e,f){a=Object.freeze({ESR_ABPROP_OFF:1,DM_RELIABILITY_ABPROP_OFF:2,INVALID_MESSAGE_TYPE:3,OLDER_EPHEMERAL_SETTING_TIMESTAMP:4,NO_EPHEMERAL_INFO:5,ATTEMPTS_EXHAUSTED:6,NO_USER_INFO:7,NO_CHAT_SESSION:8,INVALID_EPHEMERAL_DURATION:9});f.ESR_FAILURE_REASON_TYPE=a}),66);
__d("WAWebWamEnumEsrSendResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,ERROR:2});f.ESR_SEND_RESULT_TYPE=a}),66);
__d("WAWebEphemeralSyncResponseReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumEsrFailureReasonType","WAWebWamEnumEsrSendResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({EphemeralSyncResponseReceive:[4780,{clientDisappearingModeInitiator:[1,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],clientEphemeralityDuration:[2,a.TYPES.INTEGER],clientEphemeralityInitiator:[3,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],clientEphemeralitySettingTimestamp:[4,a.TYPES.INTEGER],clientEphemeralityTriggerAction:[5,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],esrDisappearingModeInitiator:[6,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],esrEphemeralityDuration:[7,a.TYPES.INTEGER],esrEphemeralityInitiator:[8,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],esrEphemeralitySettingTimestamp:[9,a.TYPES.INTEGER],esrEphemeralityTriggerAction:[10,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],esrFailureReason:[11,d("WAWebWamEnumEsrFailureReasonType").ESR_FAILURE_REASON_TYPE],esrResolveResult:[12,d("WAWebWamEnumEsrSendResultType").ESR_SEND_RESULT_TYPE],isAGroup:[13,a.TYPES.BOOLEAN],threadId:[14,a.TYPES.STRING]},[1,1,1],"regular"]},{EphemeralSyncResponseReceive:[]});g.EphemeralSyncResponseReceiveWamEvent=b}),98);
__d("WAWebEphemeralSyncResponseSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumEsrFailureReasonType","WAWebWamEnumEsrSendResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({EphemeralSyncResponseSend:[4778,{clientDisappearingModeInitiator:[1,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],clientEphemeralityDuration:[2,a.TYPES.INTEGER],clientEphemeralityInitiator:[3,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],clientEphemeralitySettingTimestamp:[4,a.TYPES.INTEGER],clientEphemeralityTriggerAction:[5,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],esrDisappearingModeInitiator:[6,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],esrEphemeralityDuration:[7,a.TYPES.INTEGER],esrEphemeralityInitiator:[8,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],esrEphemeralitySettingTimestamp:[9,a.TYPES.INTEGER],esrEphemeralityTriggerAction:[10,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],esrFailureReason:[11,d("WAWebWamEnumEsrFailureReasonType").ESR_FAILURE_REASON_TYPE],esrSendAttempt:[12,a.TYPES.INTEGER],esrSendResult:[13,d("WAWebWamEnumEsrSendResultType").ESR_SEND_RESULT_TYPE],isAGroup:[14,a.TYPES.BOOLEAN],messageDisappearingModeInitiator:[15,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],messageEphemeralityDuration:[16,a.TYPES.INTEGER],messageEphemeralityInitiator:[17,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],messageEphemeralitySettingTimestamp:[18,a.TYPES.INTEGER],messageEphemeralityTriggerAction:[19,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],threadId:[20,a.TYPES.STRING]},[1,1,1],"regular"]},{EphemeralSyncResponseSend:[]});g.EphemeralSyncResponseSendWamEvent=b}),98);
__d("WAWebEphemeralSyncResponseWAM",["WAWebABProps","WAWebChatThreadLogging","WAWebEphemeralSyncResponseReceiveWamEvent","WAWebEphemeralSyncResponseSendWamEvent","WAWebEphemeralityWAMUtils","WAWebWamEnumEsrSendResultType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebABProps").getABPropConfigValue("dm_reliability_logging")}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.to,c=a.changes,e=a.incomingMsgSettings,f=a.localChatSettings;a=a.attempts;if(!h())return;b=new(d("WAWebEphemeralSyncResponseSendWamEvent").EphemeralSyncResponseSendWamEvent)({threadId:yield d("WAWebChatThreadLogging").getChatThreadID(b.toJid()),esrSendResult:d("WAWebWamEnumEsrSendResultType").ESR_SEND_RESULT_TYPE.SUCCESS,isAGroup:!1,esrDisappearingModeInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiator(c.initiator),esrEphemeralityDuration:c.duration,esrEphemeralityInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiatedByMe(c.initiatedByMe),esrEphemeralitySettingTimestamp:c.settingTimestamp,esrEphemeralityTriggerAction:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeTrigger(c.disappearingModeTrigger)});f!=null&&(f.initiator!=null&&b.set({clientDisappearingModeInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiator(f.initiator)}),f.disappearingModeTrigger!=null&&b.set({clientEphemeralityTriggerAction:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeTrigger(f.disappearingModeTrigger)}),b.set({clientEphemeralityDuration:f.duration,clientEphemeralityInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiatedByMe(f.initiatedByMe),clientEphemeralitySettingTimestamp:f.settingTimestamp}));e!=null&&(e.initiator!=null&&b.set({messageDisappearingModeInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiator(e.initiator)}),e.disappearingModeTrigger!=null&&b.set({messageEphemeralityTriggerAction:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeTrigger(e.disappearingModeTrigger)}),b.set({messageEphemeralityDuration:e.duration,messageEphemeralityInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiatedByMe(e.initiatedByMe),messageEphemeralitySettingTimestamp:e.settingTimestamp}));a!=null&&b.set({esrSendAttempt:a});b.commit()});return i.apply(this,arguments)}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.to,c=a.error;a=a.attempts;if(!h())return;b=new(d("WAWebEphemeralSyncResponseSendWamEvent").EphemeralSyncResponseSendWamEvent)({threadId:yield d("WAWebChatThreadLogging").getChatThreadID(b.toJid()),esrFailureReason:c,esrSendResult:d("WAWebWamEnumEsrSendResultType").ESR_SEND_RESULT_TYPE.ERROR});a!=null&&b.set({esrSendAttempt:a});b.commit()});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chat,c=a.incomingESRSettings,e=a.localChatSettings;a=a.failureReason;if(!h())return;b=new(d("WAWebEphemeralSyncResponseReceiveWamEvent").EphemeralSyncResponseReceiveWamEvent)({threadId:yield d("WAWebChatThreadLogging").getChatThreadID(b.id.toJid()),isAGroup:!1});c!=null&&(c.initiator!=null&&b.set({esrDisappearingModeInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiator(c.initiator)}),c.disappearingModeTrigger!=null&&b.set({esrEphemeralityTriggerAction:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeTrigger(c.disappearingModeTrigger)}),b.set({esrEphemeralityDuration:c.duration,esrEphemeralityInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiatedByMe(c.initiatedByMe),esrEphemeralitySettingTimestamp:c.settingTimestamp}));e!=null&&(e.initiator!=null&&b.set({clientDisappearingModeInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiator(e.initiator)}),e.disappearingModeTrigger!=null&&b.set({clientEphemeralityTriggerAction:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeTrigger(e.disappearingModeTrigger)}),b.set({clientEphemeralityDuration:e.duration,clientEphemeralityInitiator:d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiatedByMe(e.initiatedByMe),clientEphemeralitySettingTimestamp:e.settingTimestamp}));a!=null?b.set({esrResolveResult:d("WAWebWamEnumEsrSendResultType").ESR_SEND_RESULT_TYPE.ERROR,esrFailureReason:a}):b.set({esrResolveResult:d("WAWebWamEnumEsrSendResultType").ESR_SEND_RESULT_TYPE.SUCCESS});b.commit()});return k.apply(this,arguments)}g.sendEphemeralSyncResponseSendWamEvent=a;g.sendEphemeralSyncResponseSendErrorWamEvent=c;g.sendEphemeralSyncResponseReceiveWamEvent=e}),98);
__d("WAWebUpdateEphemeralSettingChatAction",["WALogger","WAWebDBChatEphemeralExemptionData","WAWebDBUpdateChatTable","WAWebEphemeralGenerateSystemMessage","WAWebEphemeralityTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] updateChatEphemeralSettings"]);h=function(){return a};return a}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(h()).devConsole(babelHelpers["extends"]({chat:a.id},b)),yield d("WAWebDBUpdateChatTable").updateChatTable(a.id,babelHelpers["extends"]({},b,{disappearingModeInitiator:b.disappearingModeInitiator,disappearingModeTrigger:b.disappearingModeTrigger!=null?b.disappearingModeTrigger:null})),a.set(b),d("WAWebDBChatEphemeralExemptionData").updateEphemeralDurationCache(a.id,a.ephemeralDuration)});return j.apply(this,arguments)}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield i(a,{ephemeralDuration:0,ephemeralSettingTimestamp:Date.now(),disappearingModeInitiator:d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat}),yield d("WAWebEphemeralGenerateSystemMessage").generateEphemeralUnsupportedNotificationTemplateSystemMessage(a)});return k.apply(this,arguments)}g.updateChatEphemeralSettings=i;g.setChatAsEphemeralityUnsupported=a}),98);
__d("WAWebEphemeralSyncResponse",["WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebABProps","WAWebBackoff","WAWebChatCollection","WAWebChatEphemerality","WAWebChatThreadLogging","WAWebCommonMsgUtils","WAWebContactCollection","WAWebDBChatEphemeralExemptionData","WAWebDBUpdateChatTable","WAWebDBUpdateMessageTable","WAWebEphemeralGenerateSystemMessage","WAWebEphemeralIsDurationAllowed","WAWebEphemeralOutOfSyncInfoWamEvent","WAWebEphemeralSyncResponseWAM","WAWebEphemeralityResolver","WAWebMsgCollection","WAWebMsgEphemerality","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebOrchestratorNonPersistedJob","WAWebSendMsgRecordAction","WAWebUpdateEphemeralSettingChatAction","WAWebUserPrefsMeUser","WAWebWamEnumEsrFailureReasonType","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] other party is out-of-sync, sending EPHEMERAL_SYNC_RESPONSE"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] rendering DM system message as duration has changed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] local is out-of-sync, updating local chat DM settings"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] ESR resolution details: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] neither party is out-of-sync"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] resolving ephemerality using existing chat DM settings:"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] dropping msg from ephemeral sync"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] Sending out EPHEMERAL_SYNC_RESPONSE"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] Not sending ESR to "," due to back off limit"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] Updating chat due to EPHEMERAL_SYNC_RESPONSE"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] Received ESR, but chat and msg settings are already the same"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] processEphemeralSyncResponse called with invalid setting "," seconds for chat ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] processing EPHEMERAL_SYNC_RESPONSE"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] cannot process EPHEMERAL_SYNC_RESPONSE for enterprise contact ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] EPHEMERAL_SYNC_RESPONSE should not be processed for group chats ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] setting ephemeralOutOfSync on msg"]);w=function(){return a};return a}function x(){return d("WAWebABProps").getABPropConfigValue("ephemeral_sync_response")}function y(){d("WAWebABProps").getABPropConfigValue("ephemeral_sync_response"),d("WAWebABProps").getABPropConfigValue("dm_reliability_logging")}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(w()).devConsole({msg:a});var c={ephemeralOutOfSync:!0};x()&&(yield d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,c));a.ephemeralOutOfSync=!0;var e=b("WAWebMsgCollection").MsgCollection;e=e.get(a.id);e&&e.set(c)});return A.apply(this,arguments)}function a(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=b("WAWebChatCollection").ChatCollection;e=e.get(a.id.remote);if(!e)throw c("err")("[DMResolve] chat model not found for ESR message");if(e.isGroup){d("WALogger").ERROR(v(),e.id.toLogString()).sendLogs("handle-ephemeral-sync-response");return}y();if(!x()){void d("WAWebEphemeralSyncResponseWAM").sendEphemeralSyncResponseReceiveWamEvent({chat:e,failureReason:d("WAWebWamEnumEsrFailureReasonType").ESR_FAILURE_REASON_TYPE.ESR_ABPROP_OFF});return}if(e.contact.isEnterprise){d("WALogger").LOG(u(),e.id.toLogString());return}d("WALogger").LOG(t()).devConsole({chat:e,msg:a});a={id:a.id,type:a.type,kind:a.kind,ephemeralDuration:a.ephemeralDuration,ephemeralSettingTimestamp:a.ephemeralSettingTimestamp,disappearingModeInitiator:a.disappearingModeInitiator,disappearingModeTrigger:a.disappearingModeTrigger,disappearingModeInitiatedByMe:a.disappearingModeInitiatedByMe};a=d("WAWebMsgEphemerality").getMsgEphemeralitySettings(a);if(a!=null){if(!d("WAWebEphemeralIsDurationAllowed").isEphemeralDurationAllowed(a.duration)){d("WALogger").LOG(s(),a.duration,e.id.toLogString());void d("WAWebEphemeralSyncResponseWAM").sendEphemeralSyncResponseReceiveWamEvent({chat:e,failureReason:d("WAWebWamEnumEsrFailureReasonType").ESR_FAILURE_REASON_TYPE.INVALID_EPHEMERAL_DURATION});return}var f=d("WAWebChatEphemerality").getChatEphemeralityFields(e);if(d("WAWebEphemeralityResolver").compareEphemeralityFields(f,a)){d("WALogger").LOG(r()).devConsole({originalChatEphemeralSetting:f,msgEphemeralSetting:a});return}d("WALogger").LOG(q()).devConsole({originalChatEphemeralSetting:f,msgEphemeralSetting:a});e.ephemeralDuration=a.duration;e.ephemeralSettingTimestamp=d("WAWebEphemeralityResolver").resolveSettingTimestamp(a.settingTimestamp);var g=d("WAWebEphemeralityResolver").resolveDisappearingModeTrigger(a.disappearingModeTrigger),h=d("WAWebEphemeralityResolver").resolveDisappearingModeInitiator(a.initiator);e.disappearingModeInitiator=h;e.disappearingModeTrigger=g;e.disappearingModeInitiatedByMe=d("WAWebEphemeralityResolver").resolveDisappearingModeInitiatedByMe(a.initiatedByMe,a.initiator);yield d("WAWebDBUpdateChatTable").updateChatTable(e.id,{ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp,disappearingModeInitiator:h,disappearingModeTrigger:g,disappearingModeInitiatedByMe:e.disappearingModeInitiatedByMe});d("WAWebDBChatEphemeralExemptionData").updateEphemeralDurationCache(e.id,e.ephemeralDuration);h=d("WAWebEphemeralityResolver").resolveEphermalityDuration(f==null?void 0:f.duration)!==d("WAWebEphemeralityResolver").resolveEphermalityDuration(a==null?void 0:a.duration);h&&(yield d("WAWebEphemeralGenerateSystemMessage").generateEphemeralNotificationTemplateSystemMessage(e,a.duration,null));void d("WAWebEphemeralSyncResponseWAM").sendEphemeralSyncResponseReceiveWamEvent({chat:e,incomingESRSettings:a,localChatSettings:f})}});return B.apply(this,arguments)}var C=new(d("WAWebBackoff").BackoffCache)([1e3*60*3,1e3*60*15,Infinity]);function D(a,b,c,d){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){y();if(!x()||a.isPSA())return;if(c("gkx")("26256")){var g;window.esrCount=((g=window.esrCount)!=null?g:0)+1}g=a.toString();if(C.test(g)){var h;d("WALogger").LOG(p(),a).devConsole({currentBackoff:C.get(a.toString())});h=(h=C.get(g))==null?void 0:h.attempts;h!=null&&void d("WAWebEphemeralSyncResponseWAM").sendEphemeralSyncResponseSendErrorWamEvent({to:a,error:d("WAWebWamEnumEsrFailureReasonType").ESR_FAILURE_REASON_TYPE.ATTEMPTS_EXHAUSTED,attempts:h});return}h=b.duration;var i=b.settingTimestamp,j=b.initiator,k=d("WAWebUserPrefsMeUser").assertGetMeUser(),l=new(c("WAWebMsgKey"))({fromMe:!0,remote:a,id:yield c("WAWebMsgKey").newId(),participant:void 0});l={id:l,from:k,to:a,t:d("WATimeUtils").unixTime(),type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,subtype:"ephemeral_sync_response",ephemeralDuration:h,ephemeralSettingTimestamp:i,disappearingModeInitiator:j};var m=new(d("WAWebMsgModel").Msg)(l);d("WALogger").LOG(o()).devConsole({messageData:l});void d("WAWebEphemeralSyncResponseWAM").sendEphemeralSyncResponseSendWamEvent({to:a,changes:b,incomingMsgSettings:e,localChatSettings:f,attempts:(k=C.get(g))==null?void 0:k.attempts});return new(d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob)("sendMessage",function(){return d("WAWebSendMsgRecordAction").sendMsgRecord(m)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()});return E.apply(this,arguments)}function F(a,b){return b.isUser&&!b.contact.isEnterprise&&!a.id.fromMe&&d("WAWebMsgEphemerality").messageSupportsEphemerality(a.type)?!0:!1}function G(a,b){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;if(!d("WAWebABProps").getABPropConfigValue("out_of_sync_disappearing_messages_logging"))return;c=(c=d("WAWebChatEphemerality").getEphemeralSetting(b))!=null?c:0;var e=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(d("WAWebContactCollection").ContactCollection.getMeContact()),f=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(b.contact);new(d("WAWebEphemeralOutOfSyncInfoWamEvent").EphemeralOutOfSyncInfoWamEvent)({incomingMessageEphemeralityDuration:(a=a)!=null?a:0,isAGroup:b.isGroup,threadEphemeralityDuration:c,otherDefaultModeDuration:(a=f)!=null?a:0,userDefaultModeDuration:(c=e)!=null?c:0,threadId:yield d("WAWebChatThreadLogging").getChatThreadID(b.id.toJid()),isNewThreadForUser:b.msgs.length===0}).commit()});return H.apply(this,arguments)}function e(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.subtype==="ephemeral_setting";if(!F(a,b)&&!c){d("WALogger").LOG(n()).devConsole({msg:a,chat:b});return}var e=d("WAWebMsgEphemerality").getMsgEphemeralitySettings(a),f=d("WAWebChatEphemerality").getChatEphemeralityFields(b);d("WALogger").LOG(m()).devConsole({incomingMsgSettings:e,localChatSettings:f,msg:a});var g=d("WAWebEphemeralityResolver").resolveExistingChatDMSettings(e,f),o=d("WAWebEphemeralityResolver").compareEphemeralityFields(f,g),p=d("WAWebEphemeralityResolver").compareEphemeralityFields(e,g);if(g==null||o&&p)d("WALogger").LOG(l()).devConsole(g),C.remove(b.id.toString());else{d("WALogger").LOG(k(),JSON.stringify({msgId:a.id.toString(),resolution:g,incomingMsgSettings:e,localChatSettings:f}));if(!o){d("WALogger").LOG(j());yield d("WAWebUpdateEphemeralSettingChatAction").updateChatEphemeralSettings(b,{ephemeralSettingTimestamp:g.settingTimestamp,ephemeralDuration:g.duration,disappearingModeInitiator:g.initiator,disappearingModeTrigger:g.disappearingModeTrigger,disappearingModeInitiatedByMe:g.initiatedByMe});!c&&g.duration!==((o=f==null?void 0:f.duration)!=null?o:0)&&(d("WALogger").LOG(i()),yield d("WAWebEphemeralGenerateSystemMessage").generateEphemeralNotificationTemplateSystemMessage(b,g.duration,null))}if(!p){d("WALogger").LOG(h());if(!d("WAWebCommonMsgUtils").isNotificationType(a.type,a.subtype)){o=(c=e==null?void 0:e.duration)!=null?c:0;g.duration!==o&&(z(a),G(e==null?void 0:e.duration,b));void D(a.from,g,e,f)}}}});return I.apply(this,arguments)}f=D;g.processEphemeralSyncResponse=a;g.syncEphemeralSetting=e;g._sendEphemeralSyncResponse=f}),98);
__d("WAWebEphemeralFbtKic",["fbt","$InternalEnum","WALogger","WAWebContactCollection","WAWebContactGetters","WAWebFrontendContactGetters","WAWebMiscGatingUtils","WAWebWidFormat"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnDaysL10nComponent is given type "," and name ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnHoursL10nComponent is given type "," and name ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnMinutesL10nComponent is given type "," and name ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnSecondsL10nComponent is given type "," and name ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOffL10nComponent is given invalid type ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralString "," is given invalid duration ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnDaysString is given type "," and name ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnHoursString is given type "," and name ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnMinutesString is given type "," and name ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOnSecondsString is given type "," and name ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralOffString is given invalid type ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["getEphemeralString "," is given invalid duration ",""]);t=function(){return a};return a}var u=b("$InternalEnum").Mirrored(["SettingChangeByOthers","SettingChangeByYou","SettingChangeByUnknown","SettingChangeByOthersAsAdmin","SettingChangeByYouAsAdmin","SettingChangeByUnknownAsAdmin","Duration","OutOfSyncInfo","Explanation","ModeChangeByOthers","ModeChangeByYou"]);function a(a,b){a===void 0&&(a=0);return F(u.SettingChangeByOthers,a,b)}function c(a,b){a===void 0&&(a=0);return L(u.SettingChangeByOthers,a,b)}function e(a){a===void 0&&(a=0);return F(u.SettingChangeByYou,a)}function v(a){a===void 0&&(a=0);return F(u.SettingChangeByUnknown,a)}function w(a,b){a===void 0&&(a=0);return F(u.SettingChangeByOthersAsAdmin,a,b)}function x(a,b){a===void 0&&(a=0);return L(u.SettingChangeByOthersAsAdmin,a,b)}function y(a){a===void 0&&(a=0);return F(u.SettingChangeByYouAsAdmin,a)}function z(a){a===void 0&&(a=0);return F(u.SettingChangeByUnknownAsAdmin,a)}function A(a){a===void 0&&(a=0);return F(u.Duration,a)}function B(a){a===void 0&&(a=0);return F(u.OutOfSyncInfo,a)}function C(a){a===void 0&&(a=0);return F(u.Explanation,a)}function D(a,b){a===void 0&&(a=0);return F(u.ModeChangeByOthers,a,b)}function E(a){a===void 0&&(a=0);return F(u.ModeChangeByYou,a)}function F(a,b,c){b===void 0&&(b=0);if(b<0){d("WALogger").ERROR(t(),a,b).sendLogs("invalid-duration");return""}if(b===0)return G(a,c);else if(b<=60)return H(a,b,c);else if(b<=60*60){var e=Math.floor(b/60);return I(a,e,c)}else if(b<=24*60*60){e=Math.floor(b/60/60);return J(a,e,c)}e=Math.floor(b/24/60/60);return K(a,e,c)}function G(a,b){if(a===u.SettingChangeByOthers&&b!=null)return h._("__JHASH__XWbPvNSlQCC__JHASH__",[h._param("person-name",b)]);else if(a===u.SettingChangeByYou)return h._("__JHASH__RRF0AyAKv8N__JHASH__");else if(a===u.SettingChangeByUnknown)return h._("__JHASH__50HV2D2aXA0__JHASH__");else if(a===u.SettingChangeByOthersAsAdmin&&b!=null)return h._("__JHASH__s_ZWObRGdEP__JHASH__",[h._param("person-name",b)]);else if(a===u.SettingChangeByYouAsAdmin)return h._("__JHASH__c44jOyWGfs3__JHASH__");else if(a===u.SettingChangeByUnknownAsAdmin)return h._("__JHASH__mckEto0DfZp__JHASH__");else if(a===u.Duration)return h._("__JHASH__S2-YY9UxuU1__JHASH__");else if(a===u.OutOfSyncInfo)return h._("__JHASH__kUA6z_kYrHc__JHASH__");d("WALogger").ERROR(s(),a).sendLogs("invalid-ephemeral-string-type");return""}function H(a,b,c){var e=d("WAWebMiscGatingUtils").isDefaultDisappearingMessagesEnabled();if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__nZ7ycWZo0Ji__JHASH__",[h._plural(b,"number_of_seconds"),h._param("person-name",c)]);else if(a===u.SettingChangeByYou)return h._("__JHASH__L0v_2ruqOVs__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.SettingChangeByUnknown)return h._("__JHASH__YjAMTi1O3g3__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__taiMLAUangQ__JHASH__",[h._plural(b,"number_of_seconds"),h._param("person-name",c)]);else if(a===u.SettingChangeByYouAsAdmin)return h._("__JHASH__nGzbhtoeWCV__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.SettingChangeByUnknownAsAdmin)return h._("__JHASH__WCGt76eiMmw__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.Duration)return h._("__JHASH__XNqQQETy3nP__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.OutOfSyncInfo)return h._("__JHASH__p3WER9rB99r__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.Explanation)return h._("__JHASH__Xf_H8aZPO1J__JHASH__",[h._plural(b,"number_of_seconds")]);else if(a===u.ModeChangeByOthers)return e?h._("__JHASH__DaOeDCZlt4p__JHASH__",[h._plural(b,"number_of_seconds"),h._param("person-name",c)]):h._("__JHASH__2-D11Ernnq-__JHASH__",[h._plural(b,"number_of_seconds"),h._param("person-name",c)]);else if(a===u.ModeChangeByYou&&e)return h._("__JHASH__qHF3corMRtj__JHASH__",[h._plural(b,"number_of_seconds")]);d("WALogger").ERROR(r(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function I(a,b,c){var e=d("WAWebMiscGatingUtils").isDefaultDisappearingMessagesEnabled();if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__c4YpgAbTxna__JHASH__",[h._plural(b,"number_of_minutes"),h._param("person-name",c)]);else if(a===u.SettingChangeByYou)return h._("__JHASH__u7C72myD4eF__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.SettingChangeByUnknown)return h._("__JHASH__cdRuIP5qYU0__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__QZ1i7_BqFeQ__JHASH__",[h._plural(b,"number_of_minutes"),h._param("person-name",c)]);else if(a===u.SettingChangeByYouAsAdmin)return h._("__JHASH__yYIRKxjNXoR__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.SettingChangeByUnknownAsAdmin)return h._("__JHASH__E9p49DHoq8-__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.Duration)return h._("__JHASH__-uNN6r6Ma2B__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.OutOfSyncInfo)return h._("__JHASH__yJgSN0P5jFG__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.Explanation)return h._("__JHASH__oJuooivv0Is__JHASH__",[h._plural(b,"number_of_minutes")]);else if(a===u.ModeChangeByOthers)return e?h._("__JHASH__W0DCsl1kD7C__JHASH__",[h._plural(b,"number_of_minutes"),h._param("person-name",c)]):h._("__JHASH__ENTLrIb8Qr5__JHASH__",[h._plural(b,"number_of_minutes"),h._param("person-name",c)]);else if(a===u.ModeChangeByYou&&e)return h._("__JHASH__affNmtbqWyp__JHASH__",[h._plural(b,"number_of_minutes")]);d("WALogger").ERROR(q(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function J(a,b,c){var e=d("WAWebMiscGatingUtils").isDefaultDisappearingMessagesEnabled();if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__Joly1kXzpeI__JHASH__",[h._plural(b,"number_of_hours"),h._param("person-name",c)]);else if(a===u.SettingChangeByYou)return h._("__JHASH__MnR6u1x6y0O__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.SettingChangeByUnknown)return h._("__JHASH__iQMXnP9KyEF__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__OZssBN6H8xO__JHASH__",[h._plural(b,"number_of_hours"),h._param("person-name",c)]);else if(a===u.SettingChangeByYouAsAdmin)return h._("__JHASH__BBFnr9AuGXD__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.SettingChangeByUnknownAsAdmin)return h._("__JHASH__9eaDqw8qPJY__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.Duration)return h._("__JHASH__HKCQRs3Kvo9__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.OutOfSyncInfo)return h._("__JHASH__EK94IoBpRcJ__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.Explanation)return h._("__JHASH__DhiaCA2YliP__JHASH__",[h._plural(b,"number_of_hours")]);else if(a===u.ModeChangeByOthers)return e?h._("__JHASH__Qz-4OXPn2zD__JHASH__",[h._plural(b,"number_of_hours"),h._param("person-name",c)]):h._("__JHASH__py-7zWollUg__JHASH__",[h._plural(b,"number_of_hours"),h._param("person-name",c)]);else if(a===u.ModeChangeByYou&&e)return h._("__JHASH__vhWiIEa5KpU__JHASH__",[h._plural(b,"number_of_hours")]);d("WALogger").ERROR(p(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function K(a,b,c){var e=d("WAWebMiscGatingUtils").isDefaultDisappearingMessagesEnabled();if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__LIxtBMA5Z9q__JHASH__",[h._plural(b,"number_of_days"),h._param("person-name",c)]);else if(a===u.SettingChangeByYou)return h._("__JHASH__K5J1wJ2w08S__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.SettingChangeByUnknown)return h._("__JHASH__sJcsckQWHhT__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__ZmrWUXclNg1__JHASH__",[h._plural(b,"number_of_days"),h._param("person-name",c)]);else if(a===u.SettingChangeByYouAsAdmin)return h._("__JHASH__88NGDNM7L5m__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.SettingChangeByUnknownAsAdmin)return h._("__JHASH__R9gaKjd3Z-z__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.Duration)return h._("__JHASH__qLDr_XB1lMU__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.OutOfSyncInfo)return h._("__JHASH__bu1DRVlFPHN__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.Explanation)return h._("__JHASH__0T_GoQ_saZy__JHASH__",[h._plural(b,"number_of_days")]);else if(a===u.ModeChangeByOthers)return e?h._("__JHASH__f3PEPS7N5DB__JHASH__",[h._plural(b,"number_of_days"),h._param("person-name",c)]):h._("__JHASH__3y-hR-lnhGN__JHASH__",[h._plural(b,"number_of_days"),h._param("person-name",c)]);else if(a===u.ModeChangeByYou&&e)return h._("__JHASH__VSUKzBqVmiJ__JHASH__",[h._plural(b,"number_of_days")]);d("WALogger").ERROR(o(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function L(a,b,c){b===void 0&&(b=0);if(b<0){d("WALogger").ERROR(n(),a,b).sendLogs("invalid-duration");return""}if(b===0)return M(a,c);else if(b<=60)return N(a,b,c);else if(b<=60*60){var e=Math.floor(b/60);return O(a,e,c)}else if(b<=24*60*60){e=Math.floor(b/60/60);return P(a,e,c)}e=Math.floor(b/24/60/60);return Q(a,e,c)}function M(a,b){if(a===u.SettingChangeByOthers&&b!=null)return h._("__JHASH__XWbPvNSlQCC__JHASH__",[h._param("person-name",b)]);else if(a===u.SettingChangeByOthersAsAdmin&&b!=null)return h._("__JHASH__s_ZWObRGdEP__JHASH__",[h._param("person-name",b)]);d("WALogger").ERROR(m(),a).sendLogs("invalid-ephemeral-string-type");return""}function N(a,b,c){if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__nZ7ycWZo0Ji__JHASH__",[h._plural(b,"number_of_seconds"),h._param("person-name",c)]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__taiMLAUangQ__JHASH__",[h._plural(b,"number_of_seconds"),h._param("person-name",c)]);d("WALogger").ERROR(l(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function O(a,b,c){if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__c4YpgAbTxna__JHASH__",[h._plural(b,"number_of_minutes"),h._param("person-name",c)]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__QZ1i7_BqFeQ__JHASH__",[h._plural(b,"number_of_minutes"),h._param("person-name",c)]);d("WALogger").ERROR(k(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function P(a,b,c){if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__Joly1kXzpeI__JHASH__",[h._plural(b,"number_of_hours"),h._param("person-name",c)]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__OZssBN6H8xO__JHASH__",[h._plural(b,"number_of_hours"),h._param("person-name",c)]);d("WALogger").ERROR(j(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function Q(a,b,c){if(a===u.SettingChangeByOthers&&c!=null)return h._("__JHASH__LIxtBMA5Z9q__JHASH__",[h._plural(b,"number_of_days"),h._param("person-name",c)]);else if(a===u.SettingChangeByOthersAsAdmin&&c!=null)return h._("__JHASH__ZmrWUXclNg1__JHASH__",[h._plural(b,"number_of_days"),h._param("person-name",c)]);d("WALogger").ERROR(i(),a,c).sendLogs("invalid-ephemeral-string-type");return""}function R(a){var b=d("WAWebContactCollection").ContactCollection.assertGet(a);if(d("WAWebContactGetters").getIsMe(b))return h._("__JHASH__KK00-Kd1ADD__JHASH__");b=d("WAWebContactGetters").getIsMyContact(b)?d("WAWebFrontendContactGetters").getFormattedName(b):d("WAWebWidFormat").widToFormattedUser(a);return h._("__JHASH__XqBDVhnY1eL__JHASH__",[h._param("person-name",b)])}R.displayName=R.name+" [from "+f.id+"]";g.EphemeralStringType=u;g.getDisappearingMessageSettingOthersStringKic=a;g.getDisappearingMessageSettingOthersGroupStringKic=c;g.getDisappearingMessageSettingYouStringKic=e;g.getDisappearingMessageSettingUnknownStringKic=v;g.getDisappearingMessageSettingOthersAsAdminStringKic=w;g.getDisappearingMessageSettingOthersAsAdminGroupStringKic=x;g.getDisappearingMessageSettingYouAsAdminStringKic=y;g.getDisappearingMessageSettingUnknownAsAdminStringKic=z;g.getDisappearingMessageDurationStringKic=A;g.getDisappearingMessageOutOfSyncInfoStringKic=B;g.getDisappearingMessageExplanationStringKic=C;g.getDisappearingModeOtherStringKic=D;g.getDisappearingModeYouStringKic=E;g.getKeptByString=R}),226);
__d("WAWebDBEventInvalidateChatEvents",["WAWebDBMessageUtils","WAWebModelStorageUtils","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.between(["internalId"],d("WAWebDBMessageUtils").beginningOfChat(a),d("WAWebDBMessageUtils").endOfChat(a)));yield b.bulkCreateOrMerge(c.filter(function(a){return a.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION&&!a.eventInvalidated}).map(function(a){return{id:a.id,eventInvalidated:!0}}))});return function(a){return c.apply(this,arguments)}}())}g.invalidateChatEvents=a}),98);
__d("WAWebInvalidateEventsAction",["WALogger","WAWebDBEventInvalidateChatEvents","WAWebFrontendMsgGetters","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[EVENTS] Failed to invalidate events with error: ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebDBEventInvalidateChatEvents").invalidateChatEvents(a.id),a.msgs.filter(function(a){return d("WAWebFrontendMsgGetters").getAsEventCreation(a)&&!a.eventInvalidated}).forEach(function(a){a.eventInvalidated=!0})}catch(a){d("WALogger").ERROR(h(),a).devConsole(a)}});return i.apply(this,arguments)}g.invalidateEventMsgsForChat=a}),98);
__d("WAWebEventResponseGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createEventResponseCache});b=a.field;c=a.unsafeIdentityGetter;e=a.clearCacheFor;f=e;d=c;a=b("parentMsgKey");e=b("sender");c=b("ack");var h=b("t"),i=b("senderTimestampMs");b=b("eventResponse");g.clearEventResponseGetterCacheFor=f;g.getEventResponseUnsafe=d;g.getParentMsgKey=a;g.getSender=e;g.getAck=c;g.getT=h;g.getSenderTimestampMs=i;g.getEventResponse=b}),98);
__d("WAWebFrontendEventResponseGetters",["WAWebAck","WAWebEventResponseGetters","WAWebGetters","WAWebGettersCaches","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({root:d("WAWebEventResponseGetters").getEventResponseUnsafe,createCache:d("WAWebGettersCaches").createFrontendEventResponseCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;a=b("isSendFailure",{"default":!1});e=c(function(a){var b=a[0],c=a[1];a=a[2];b=d("WAWebUserPrefsMeUser").isMeAccount(b)&&c!=null&&c<d("WAWebAck").ACK.CLOCK;return b||Boolean(a)},[d("WAWebEventResponseGetters").getSender,d("WAWebEventResponseGetters").getAck,a]);g.clearFrontendEventResponseGetterCacheFor=f;g.getIsSendFailure=a;g.getIsFailed=e}),98);
__d("WAWebEventResponseModel",["WAWebAddOnModel","WAWebBaseModel","WAWebEventResponseGetters","WAWebFrontendEventResponseGetters"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.parentMsgKey=d("WAWebBaseModel").prop(),c.eventResponse=d("WAWebBaseModel").prop(),c.senderTimestampMs=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.sender=d("WAWebBaseModel").prop(),c.read=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c["delete"]=function(){a.prototype["delete"].call(this),d("WAWebEventResponseGetters").clearEventResponseGetterCacheFor(this),d("WAWebFrontendEventResponseGetters").clearFrontendEventResponseGetterCacheFor(this)};return b}(d("WAWebAddOnModel").AddOnBaseModel);b=d("WAWebBaseModel").defineModel(a);g.EventResponse=b}),98);
__d("WAWebEventResponseCollection",["WANullthrows","WAWebAck","WAWebBaseCollection","WAWebCollectionUtils","WAWebEventResponseModel","WAWebMsgGetters","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.byParent=d("WAWebCollectionUtils").aggregated(function(a){return a.parentMsgKey}),c.byIsFailedByMe=d("WAWebCollectionUtils").aggregated(function(a){return a.isSendFailure===!0||d("WAWebUserPrefsMeUser").isMeAccount(a.sender)&&a.ack!=null&&a.ack<d("WAWebAck").ACK.CLOCK}),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseCollection").BaseCollection);b.model=d("WAWebEventResponseModel").EventResponse;function a(a){return new(d("WAWebEventResponseModel").EventResponse)(babelHelpers["extends"]({},a,{sender:c("WANullthrows")(d("WAWebMsgGetters").getSender(a))}))}e=new b();g.EventResponseCollectionImpl=b;g.createEventResponseModel=a;g.EventResponseCollection=e}),98);
__d("WAWebFavoriteCollection",["WAWebBaseCollection","WAWebFavoriteModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebFavoriteModel").Favorite;b=new a();g.FavoriteCollectionImpl=a;g.FavoriteCollection=b}),98);
__d("WAWebFavoriteModel",["WAWebBaseModel","WAWebFavoriteCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebFavoriteCollection").FavoriteCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="favorite";c=d("WAWebBaseModel").defineModel(a);g.Favorite=c}),98);
__d("WAWebGenerateProtocolMessageEditProto",["WAWebE2EProtoGenerator","WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb","err","gkx"],(function(a,b,c,d,e,f,g){function a(a){var b,e=a.json;a=a.contextInfo;var f=Boolean(e.matchedText||e.canonicalUrl||e.description||e.title),g;b=(b=e.editMsgType)!=null?b:d("WAWebMsgType").MSG_TYPE.CHAT;switch(b){case d("WAWebMsgType").MSG_TYPE.CHAT:f=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.CHAT,subtype:f?"url":void 0});g=d("WAWebE2EProtoGenerator").getProtobufMessage(f,void 0,a);break;case d("WAWebMsgType").MSG_TYPE.IMAGE:g={imageMessage:{caption:e.caption,contextInfo:a}};break;case d("WAWebMsgType").MSG_TYPE.VIDEO:g={videoMessage:{caption:e.caption,contextInfo:a}};break;case d("WAWebMsgType").MSG_TYPE.DOCUMENT:g={documentWithCaptionMessage:{message:{documentMessage:{caption:e.caption,contextInfo:a}}}};break;default:if(!c("gkx")("26258")&&b===d("WAWebMsgType").MSG_TYPE.AUDIO)g={audioMessage:{}};else throw c("err")("Unsupported edit msg type: "+b)}return{protocolMessage:{key:d("WAWebE2EProtoUtils").encodeKey(e.protocolMessageKey),type:d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT,timestampMs:e.latestEditSenderTimestampMs,editedMessage:g}}}g["default"]=a}),98);
__d("WASmaxInNewslettersIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInNewslettersIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersBadRequestIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorBadRequestMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorBadRequestMixin:c.value},a.value))}g.parseBadRequestIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","item-not-found");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",404);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);
__d("WASmaxInNewslettersItemNotFoundIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorItemNotFoundMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorItemNotFoundMixin:c.value},a.value))}g.parseItemNotFoundIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInNewslettersRateLimitedIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorRateOverlimitMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorRateOverlimitMixin:c.value},a.value))}g.parseRateLimitedIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersIQErrorNotAuthorizedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-authorized");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",401);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAuthorizedMixin=a}),98);
__d("WASmaxInNewslettersUnauthorizedIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorNotAuthorizedMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorNotAuthorizedMixin:c.value},a.value))}g.parseUnauthorizedIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersMyAddonsClientErrors",["WAResultOrError","WASmaxInNewslettersBadRequestIQErrorResponseMixin","WASmaxInNewslettersItemNotFoundIQErrorResponseMixin","WASmaxInNewslettersRateLimitedIQErrorResponseMixin","WASmaxInNewslettersUnauthorizedIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxInNewslettersBadRequestIQErrorResponseMixin").parseBadRequestIQErrorResponseMixin(a,b);if(c.success)return d("WAResultOrError").makeResult({name:"BadRequestIQErrorResponse",value:c.value});var e=d("WASmaxInNewslettersUnauthorizedIQErrorResponseMixin").parseUnauthorizedIQErrorResponseMixin(a,b);if(e.success)return d("WAResultOrError").makeResult({name:"UnauthorizedIQErrorResponse",value:e.value});var f=d("WASmaxInNewslettersItemNotFoundIQErrorResponseMixin").parseItemNotFoundIQErrorResponseMixin(a,b);if(f.success)return d("WAResultOrError").makeResult({name:"ItemNotFoundIQErrorResponse",value:f.value});b=d("WASmaxInNewslettersRateLimitedIQErrorResponseMixin").parseRateLimitedIQErrorResponseMixin(a,b);return b.success?d("WAResultOrError").makeResult({name:"RateLimitedIQErrorResponse",value:b.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BadRequestIQErrorResponse","UnauthorizedIQErrorResponse","ItemNotFoundIQErrorResponse","RateLimitedIQErrorResponse"],[c,e,f,b])}g.parseMyAddonsClientErrors=a}),98);
__d("WASmaxInNewslettersMyAddOnsResponseClientError",["WAResultOrError","WASmaxInNewslettersMyAddonsClientErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersMyAddonsClientErrors").parseMyAddonsClientErrors(a,b);return!c.success?c:d("WAResultOrError").makeResult({myAddonsClientErrors:c.value})}g.parseMyAddOnsResponseClientError=a}),98);
__d("WASmaxInNewslettersIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorInternalServerErrorMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseInternalServerErrorIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersMyAddOnsResponseServerError",["WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin").parseInternalServerErrorIQErrorResponseMixin(a,b);return!c.success?c:c}g.parseMyAddOnsResponseServerError=a}),98);
__d("WASmaxInNewslettersIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMyPollVoteMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"vote");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"votes");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"t",0,void 0);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"vote",0,1e3,h);return!b.success?b:d("WAResultOrError").makeResult({votesT:a.value,votesVote:b.value})}g.parseNewsletterMyPollVoteVotesVote=h;g.parseNewsletterMyPollVoteMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMyReactionMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reaction");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"code");if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(b.value,"t",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({reactionCode:a.value,reactionT:b.value})}g.parseNewsletterMyReactionMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMessageMyAddOnsMixin",["WAResultOrError","WASmaxInNewslettersNewsletterMyPollVoteMixin","WASmaxInNewslettersNewsletterMyReactionMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"server_id",99,2147476647);if(!b.success)return b;var c=d("WASmaxInNewslettersNewsletterMyReactionMixin").parseNewsletterMyReactionMixin(a);a=d("WASmaxInNewslettersNewsletterMyPollVoteMixin").parseNewsletterMyPollVoteMixin(a);return d("WAResultOrError").makeResult({serverId:b.value,newsletterMyReactionMixin:c.success?c.value:null,newsletterMyPollVoteMixin:a.success?a.value:null})}g.parseNewsletterMessageMyAddOnsMixin=a}),98);
__d("WASmaxInNewslettersMyAddOnsResponseSuccess",["WAResultOrError","WASmaxInNewslettersIQResultResponseMixin","WASmaxInNewslettersNewsletterMessageMyAddOnsMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterMessageMyAddOnsMixin").parseNewsletterMessageMyAddOnsMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"messages");if(!b.success)return b;b=d("WASmaxParseJid").attrNewsletterJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"message",0,5e3,h);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,message:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"my_addons");if(!c.success)return c;a=d("WASmaxInNewslettersIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"messages",0,5e3,i);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{myAddonsMessages:b.value}))}g.parseMyAddOnsResponseSuccessMyAddonsMessagesMessage=h;g.parseMyAddOnsResponseSuccessMyAddonsMessages=i;g.parseMyAddOnsResponseSuccess=a}),98);
__d("WASmaxOutNewslettersBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutNewslettersSelfIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutNewslettersBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"newsletter"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSelfIQGetRequestMixin=a}),98);
__d("WASmaxOutNewslettersMyAddOnsRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutNewslettersSelfIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.myAddonsLimit;a=a.myAddonsJid;b=d("WASmaxOutNewslettersSelfIQGetRequestMixin").mergeSelfIQGetRequestMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("my_addons",{limit:d("WAWap").INT(b),jid:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,a)})));return b}g.makeMyAddOnsRequest=a}),98);
__d("WASmaxNewslettersMyAddOnsRPC",["WAComms","WASmaxInNewslettersMyAddOnsResponseClientError","WASmaxInNewslettersMyAddOnsResponseServerError","WASmaxInNewslettersMyAddOnsResponseSuccess","WASmaxOutNewslettersMyAddOnsRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutNewslettersMyAddOnsRequest").makeMyAddOnsRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInNewslettersMyAddOnsResponseSuccess").parseMyAddOnsResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"MyAddOnsResponseSuccess",value:g.value});case 7:h=d("WASmaxInNewslettersMyAddOnsResponseClientError").parseMyAddOnsResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"MyAddOnsResponseClientError",value:h.value});case 10:i=d("WASmaxInNewslettersMyAddOnsResponseServerError").parseMyAddOnsResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"MyAddOnsResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("MyAddOns",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendMyAddOnsRPC=a}),98);
__d("WAWebGetMyAddOnsRPC",["WASmaxNewslettersMyAddOnsRPC","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.count;a=a.newsletterJid;b=(yield d("WASmaxNewslettersMyAddOnsRPC").sendMyAddOnsRPC({myAddonsLimit:b,myAddonsJid:a}));switch(b.name){case"MyAddOnsResponseSuccess":return{messagesByNewsletter:b.value.myAddonsMessages};case"MyAddOnsResponseServerError":a=b.value.errorIQErrorInternalServerErrorMixin;var c=a.code;a=a.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a);case"MyAddOnsResponseClientError":c=b.value.myAddonsClientErrors;switch(c.name){case"ItemNotFoundIQErrorResponse":a=c.value.errorIQErrorItemNotFoundMixin;b=a.code;a=a.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(b),a);case"RateLimitedIQErrorResponse":b=c.value.errorIQErrorRateOverlimitMixin;a=b.code;b=b.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),b);case"BadRequestIQErrorResponse":a=c.value.errorIQErrorBadRequestMixin;b=a.code;a=a.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(b),a);case"UnauthorizedIQErrorResponse":b=c.value.errorIQErrorNotAuthorizedMixin;a=b.code;c=b.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),c)}}});return h.apply(this,arguments)}g.getMyNewsletterAddOnsRPC=a}),98);
__d("WAWebNewsletterGetMyAddOnsJob",["Promise","WAJobOrchestratorTypes","WAWebCRUDOperationsNewsletterMyVotes","WAWebDBCreateOrUpdateReactions","WAWebGetMyAddOnsRPC","WAWebNewsletterDBUtils","WAWebNewsletterPollsVotesUtils","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getMyNewsletterAddOns",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebGetMyAddOnsRPC").getMyNewsletterAddOnsRPC(a));b=b.messagesByNewsletter;return i(b,a.newsletterJid)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=a.reduce(function(a,b){var d=b.message;b=b.jid;var e=(b=b)!=null?b:c;d.forEach(function(b){var c=k(b,e);c!=null&&a.reactions.push(c);c=l(b,e);c!=null&&a.pollVotes.push(c)});return a},{reactions:[],pollVotes:[]});yield (h||(h=b("Promise"))).all([d("WAWebDBCreateOrUpdateReactions").createOrUpdateReactions(a.reactions),d("WAWebCRUDOperationsNewsletterMyVotes").bulkCreateOrUpdateMyVotes(a.pollVotes)]);return a});return j.apply(this,arguments)}function k(a,b){var c;b=d("WAWebNewsletterDBUtils").craftNewsletterMsgKeyFromServerId(a.serverId,b).toString();c=a==null?void 0:(c=a.newsletterMyReactionMixin)==null?void 0:c.reactionCode;a=a==null?void 0:(a=a.newsletterMyReactionMixin)==null?void 0:a.reactionT;return c==null||a==null?null:{parentMsgKey:b,senderUserJid:d("WAWebUserPrefsMeUser").getMeUser().toString(),reactionText:c,timestamp:a*1e3,orphan:0,msgKey:b}}function l(a,b){var c=a.newsletterMyPollVoteMixin;if(c==null)return null;var e=c.votesT;c=c.votesVote;return{chatJid:b,msgServerId:a.serverId,serverTimestampMs:e*1e3,t:e,msgKey:d("WAWebNewsletterDBUtils").craftNewsletterMsgKeyFromServerId(a.serverId,b).toString(),votes:c.map(function(a){return d("WAWebNewsletterPollsVotesUtils").bufferToHex(a.elementValue)})}}g.getMyNewsletterAddOnsJob=a}),98);
__d("WAWebNewsletterLoadingStageManager",["$InternalEnum","WAWebBaseModel","WAWebModelUtils"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["None","Loading","Finished","Failed"]);a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.stage=d("WAWebModelUtils").prop(h.None),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.start=function(){this.stage=h.Loading};c.fail=function(){this.stage=h.Failed};c.end=function(){this.stage=h.Finished};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletterLoadingStage";c=d("WAWebBaseModel").defineModel(a);e=new c({id:"1"});g.NewsletterLoadingStage=h;g.NewsletterLoadingStageManager=e}),98);
__d("WAWebBootstrapNewsletter",["WALogger","WAQplTypes","WAWebNewsletterGatingUtils","WAWebNewsletterGetMyAddOnsJob","WAWebNewsletterLoadingStageManager","WAWebPrimaryFeaturesModel","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebQueryAndUpdateNewslettersMetadataAction","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter-bootstrap] Bootstrap failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter-bootstrap] Bootstrap completed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to retrieve my reactions on bootstrap"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter-bootstrap] Bootstrap started"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter-bootstrap] Bootstrap already ongoing, returning"]);l=function(){return a};return a}var m=5e3,n=null;function a(){if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return;if(n!=null){d("WALogger").LOG(l());return n}if(d("WAWebUserPrefsMultiDevice").getNewsletterWasBootstrapped())return;if(d("WAWebNewsletterGatingUtils").isNewsletterEnabledOnPrimary()){n=o();return n}d("WAWebPrimaryFeaturesModel").PrimaryFeatures.on("change:newsletter",function(){if(d("WAWebNewsletterGatingUtils").isNewsletterEnabledOnPrimary()){n=o();return n}})}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(k());var a=d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.NEWSLETTER_BOOSTRAP);d("WAWebNewsletterLoadingStageManager").NewsletterLoadingStageManager.start();try{yield d("WAWebQueryAndUpdateNewslettersMetadataAction").queryAndUpdateAllNewsletterMetadataAction(d("WAWebQueryAndUpdateNewslettersMetadataAction").NewsletterMetadataUpdateEntryPoint.Bootstrap,{messageCount:1,addSystemMsgs:!0,qplEvent:a}),d("WAWebNewsletterGatingUtils").isNewsletterReactionEnabled()&&(yield d("WAWebNewsletterGetMyAddOnsJob").getMyNewsletterAddOnsJob({count:m})["catch"](function(a){d("WALogger").ERROR(j()).tags("newsletter").devConsole(a).sendLogs("newsletter-bootstrap-my-reactions-failed")})),d("WAWebUserPrefsMultiDevice").setNewsletterWasBootstrapped(),d("WAWebNewsletterLoadingStageManager").NewsletterLoadingStageManager.end(),a.end(d("WAQplTypes").QuickLogActionType.SUCCESS),d("WALogger").LOG(i())}catch(b){a.end(d("WAQplTypes").QuickLogActionType.FAIL),d("WAWebNewsletterLoadingStageManager").NewsletterLoadingStageManager.fail(),d("WALogger").ERROR(h()).tags("newsletter").devConsole(b).sendLogs("newsletter-bootstrap-failed")}finally{n=null}});return p.apply(this,arguments)}g.bootstrapNewsletterBackend=a}),98);
__d("WASmaxInNewslettersBadRequestOrRateLimitedIQErrorResponseMixinGroup",["WAResultOrError","WASmaxInNewslettersBadRequestIQErrorResponseMixin","WASmaxInNewslettersRateLimitedIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxInNewslettersBadRequestIQErrorResponseMixin").parseBadRequestIQErrorResponseMixin(a,b);if(c.success)return d("WAResultOrError").makeResult({name:"BadRequestIQErrorResponse",value:c.value});b=d("WASmaxInNewslettersRateLimitedIQErrorResponseMixin").parseRateLimitedIQErrorResponseMixin(a,b);return b.success?d("WAResultOrError").makeResult({name:"RateLimitedIQErrorResponse",value:b.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BadRequestIQErrorResponse","RateLimitedIQErrorResponse"],[c,b])}g.parseBadRequestOrRateLimitedIQErrorResponseMixinGroup=a}),98);
__d("WASmaxInNewslettersCreateResponseClientError",["WAResultOrError","WASmaxInNewslettersBadRequestOrRateLimitedIQErrorResponseMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersBadRequestOrRateLimitedIQErrorResponseMixinGroup").parseBadRequestOrRateLimitedIQErrorResponseMixinGroup(a,b);return!c.success?c:d("WAResultOrError").makeResult({badRequestOrRateLimitedIQErrorResponseMixinGroup:c.value})}g.parseCreateResponseClientError=a}),98);
__d("WASmaxInNewslettersCreateResponseServerError",["WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin").parseInternalServerErrorIQErrorResponseMixin(a,b);return!c.success?c:c}g.parseCreateResponseServerError=a}),98);
__d("WASmaxInNewslettersNewsletterCreationTimeMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"creation_time");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"value",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({creationTimeValue:a.value})}g.parseNewsletterCreationTimeMetadataMixin=a}),98);
__d("WASmaxInNewslettersQueryDescriptionResponseMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"update_time",0,void 0);if(!c.success)return c;a=d("WASmaxParseUtils").contentString(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,updateTime:c.value,elementValue:a.value})}g.parseQueryDescriptionResponseMixin=a}),98);
__d("WASmaxInNewslettersNewsletterDescriptionMetadataMixin",["WAResultOrError","WASmaxInNewslettersQueryDescriptionResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"description");if(!b.success)return b;a=d("WASmaxInNewslettersQueryDescriptionResponseMixin").parseQueryDescriptionResponseMixin(b.value);return d("WAResultOrError").makeResult({descriptionQueryDescriptionResponseMixin:a.success?a.value:null})}g.parseNewsletterDescriptionMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterHandleMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"handle");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");return!a.success?a:d("WAResultOrError").makeResult({handleText:a.value})}g.parseNewsletterHandleMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterInviteLinkMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"invite");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"code");return!a.success?a:d("WAResultOrError").makeResult({inviteCode:a.value})}g.parseNewsletterInviteLinkMetadataMixin=a}),98);
__d("WASmaxInNewslettersLinkedAccountWebsiteMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_accounts");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"linked_account");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"type","website");if(!a.success)return a;b=d("WASmaxParseUtils").attrString(b.value,"url");return!b.success?b:d("WAResultOrError").makeResult({linkedAccountType:a.value,linkedAccountUrl:b.value})}g.parseLinkedAccountWebsiteMixin=a}),98);
__d("WASmaxInNewslettersLinkedAccountsResponseMixin",["WAResultOrError","WASmaxInNewslettersLinkedAccountWebsiteMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_accounts");if(!b.success)return b;b=d("WASmaxInNewslettersLinkedAccountWebsiteMixin").parseLinkedAccountWebsiteMixin(a);return d("WAResultOrError").makeResult({linkedAccountWebsiteMixin:b.success?b.value:null})}g.parseLinkedAccountsResponseMixin=a}),98);
__d("WASmaxInNewslettersNewsletterLinkedAccountsMetadataMixin",["WASmaxInNewslettersLinkedAccountsResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"linked_accounts");if(!b.success)return b;a=d("WASmaxInNewslettersLinkedAccountsResponseMixin").parseLinkedAccountsResponseMixin(b.value);return!a.success?a:a}g.parseNewsletterLinkedAccountsMetadataMixin=a}),98);
__d("WASmaxInNewslettersEnums",[],(function(a,b,c,d,e,f){a={active:"active",geosuspended:"geosuspended",suspended:"suspended"};b={admin:"admin",guest:"guest",owner:"owner",subscriber:"subscriber"};c={all:"all",basic:"basic",none:"none"};d={audio:"audio",avatar_sticker:"avatar_sticker",cataloglink:"cataloglink",document:"document",genai_sticker:"genai_sticker",gif:"gif",image:"image",productlink:"productlink",ptt:"ptt",sticker:"sticker",url:"url",vcard:"vcard",video:"video"};e={image:"image",preview:"preview"};var g={off:"off",on:"on",undefined:"undefined"},h={"private":"private","public":"public"},i={unverified:"unverified",verified:"verified"};f.ENUM_ACTIVE_GEOSUSPENDED_SUSPENDED=a;f.ENUM_ADMIN_GUEST_OWNER_SUBSCRIBER=b;f.ENUM_ALL_BASIC_NONE=c;f.ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO=d;f.ENUM_IMAGE_PREVIEW=e;f.ENUM_OFF_ON_UNDEFINED=g;f.ENUM_PRIVATE_PUBLIC=h;f.ENUM_UNVERIFIED_VERIFIED=i}),66);
__d("WASmaxInNewslettersNewsletterMembershipMetadataMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"membership");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"type",d("WASmaxInNewslettersEnums").ENUM_ADMIN_GUEST_OWNER_SUBSCRIBER);return!a.success?a:d("WAResultOrError").makeResult({membershipType:a.value})}g.parseNewsletterMembershipMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMutedMetadataMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"muted");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"state",d("WASmaxInNewslettersEnums").ENUM_OFF_ON_UNDEFINED);return!a.success?a:d("WAResultOrError").makeResult({mutedState:a.value})}g.parseNewsletterMutedMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterNameMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"id");if(!a.success)return a;var c=d("WASmaxParseUtils").attrIntRange(b.value,"update_time",0,void 0);if(!c.success)return c;b=d("WASmaxParseUtils").contentString(b.value);return!b.success?b:d("WAResultOrError").makeResult({nameId:a.value,nameUpdateTime:c.value,nameElementValue:b.value})}g.parseNewsletterNameMetadataMixin=a}),98);
__d("WASmaxInNewslettersQueryPictureDirectPathResponseMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInNewslettersEnums").ENUM_IMAGE_PREVIEW);if(!c.success)return c;a=d("WASmaxParseUtils").attrString(a,"direct_path");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,type:c.value,directPath:a.value})}g.parseQueryPictureDirectPathResponseMixin=a}),98);
__d("WASmaxInNewslettersQueryPictureEmptyResponseMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInNewslettersEnums").ENUM_IMAGE_PREVIEW);return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseQueryPictureEmptyResponseMixin=a}),98);
__d("WASmaxInNewslettersQueryPictureMatchedResponseMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInNewslettersEnums").ENUM_IMAGE_PREVIEW);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,type:a.value})}g.parseQueryPictureMatchedResponseMixin=a}),98);
__d("WASmaxInNewslettersQueryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup",["WAResultOrError","WASmaxInNewslettersQueryPictureDirectPathResponseMixin","WASmaxInNewslettersQueryPictureEmptyResponseMixin","WASmaxInNewslettersQueryPictureMatchedResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersQueryPictureDirectPathResponseMixin").parseQueryPictureDirectPathResponseMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"QueryPictureDirectPathResponse",value:b.value});var c=d("WASmaxInNewslettersQueryPictureMatchedResponseMixin").parseQueryPictureMatchedResponseMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"QueryPictureMatchedResponse",value:c.value});var e=d("WASmaxInNewslettersQueryPictureEmptyResponseMixin").parseQueryPictureEmptyResponseMixin(a);return e.success?d("WAResultOrError").makeResult({name:"QueryPictureEmptyResponse",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["QueryPictureDirectPathResponse","QueryPictureMatchedResponse","QueryPictureEmptyResponse"],[b,c,e])}g.parseQueryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup=a}),98);
__d("WASmaxInNewslettersNewsletterPictureMetadataMixin",["WAResultOrError","WASmaxInNewslettersQueryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"picture");if(!b.success)return b;b=d("WASmaxInNewslettersQueryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup").parseQueryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({queryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").mapChildrenWithTag(a,"picture",0,2,h);return!b.success?b:d("WAResultOrError").makeResult({picture:b.value})}g.parseNewsletterPictureMetadataPicture=h;g.parseNewsletterPictureMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterPrivacyMetadataMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"privacy");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"type",d("WASmaxInNewslettersEnums").ENUM_PRIVATE_PUBLIC);return!a.success?a:d("WAResultOrError").makeResult({privacyType:a.value})}g.parseNewsletterPrivacyMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterStateMetadataMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"state");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"type",d("WASmaxInNewslettersEnums").ENUM_ACTIVE_GEOSUSPENDED_SUSPENDED);return!a.success?a:d("WAResultOrError").makeResult({stateType:a.value})}g.parseNewsletterStateMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterSubscribersMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"subscribers");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"count",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({subscribersCount:a.value})}g.parseNewsletterSubscribersMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterVerificationMetadataMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"verification");if(!b.success)return b;a=d("WASmaxParseUtils").attrStringEnum(b.value,"state",d("WASmaxInNewslettersEnums").ENUM_UNVERIFIED_VERIFIED);return!a.success?a:d("WAResultOrError").makeResult({verificationState:a.value})}g.parseNewsletterVerificationMetadataMixin=a}),98);
__d("WASmaxInNewslettersCommonNewsletterMetadataMixin",["WAResultOrError","WASmaxInNewslettersNewsletterCreationTimeMetadataMixin","WASmaxInNewslettersNewsletterDescriptionMetadataMixin","WASmaxInNewslettersNewsletterHandleMetadataMixin","WASmaxInNewslettersNewsletterInviteLinkMetadataMixin","WASmaxInNewslettersNewsletterLinkedAccountsMetadataMixin","WASmaxInNewslettersNewsletterMembershipMetadataMixin","WASmaxInNewslettersNewsletterMutedMetadataMixin","WASmaxInNewslettersNewsletterNameMetadataMixin","WASmaxInNewslettersNewsletterPictureMetadataMixin","WASmaxInNewslettersNewsletterPrivacyMetadataMixin","WASmaxInNewslettersNewsletterStateMetadataMixin","WASmaxInNewslettersNewsletterSubscribersMetadataMixin","WASmaxInNewslettersNewsletterVerificationMetadataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterCreationTimeMetadataMixin").parseNewsletterCreationTimeMetadataMixin(a);var c=d("WASmaxInNewslettersNewsletterNameMetadataMixin").parseNewsletterNameMetadataMixin(a),e=d("WASmaxInNewslettersNewsletterPictureMetadataMixin").parseNewsletterPictureMetadataMixin(a),f=d("WASmaxInNewslettersNewsletterDescriptionMetadataMixin").parseNewsletterDescriptionMetadataMixin(a),g=d("WASmaxInNewslettersNewsletterInviteLinkMetadataMixin").parseNewsletterInviteLinkMetadataMixin(a),h=d("WASmaxInNewslettersNewsletterHandleMetadataMixin").parseNewsletterHandleMetadataMixin(a),i=d("WASmaxInNewslettersNewsletterSubscribersMetadataMixin").parseNewsletterSubscribersMetadataMixin(a),j=d("WASmaxInNewslettersNewsletterPrivacyMetadataMixin").parseNewsletterPrivacyMetadataMixin(a),k=d("WASmaxInNewslettersNewsletterVerificationMetadataMixin").parseNewsletterVerificationMetadataMixin(a),l=d("WASmaxInNewslettersNewsletterLinkedAccountsMetadataMixin").parseNewsletterLinkedAccountsMetadataMixin(a),m=d("WASmaxInNewslettersNewsletterMembershipMetadataMixin").parseNewsletterMembershipMetadataMixin(a),n=d("WASmaxInNewslettersNewsletterMutedMetadataMixin").parseNewsletterMutedMetadataMixin(a);a=d("WASmaxInNewslettersNewsletterStateMetadataMixin").parseNewsletterStateMetadataMixin(a);return d("WAResultOrError").makeResult({newsletterCreationTimeMetadataMixin:b.success?b.value:null,newsletterNameMetadataMixin:c.success?c.value:null,newsletterPictureMetadataMixin:e.success?e.value:null,newsletterDescriptionMetadataMixin:f.success?f.value:null,newsletterInviteLinkMetadataMixin:g.success?g.value:null,newsletterHandleMetadataMixin:h.success?h.value:null,newsletterSubscribersMetadataMixin:i.success?i.value:null,newsletterPrivacyMetadataMixin:j.success?j.value:null,newsletterVerificationMetadataMixin:k.success?k.value:null,newsletterLinkedAccountsMetadataMixin:l.success?l.value:null,newsletterMembershipMetadataMixin:m.success?m.value:null,newsletterMutedMetadataMixin:n.success?n.value:null,newsletterStateMetadataMixin:a.success?a.value:null})}g.parseCommonNewsletterMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterIDMetadataMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"id");if(!b.success)return b;a=d("WASmaxParseJid").attrNewsletterJid(b.value,"jid");return!a.success?a:d("WAResultOrError").makeResult({idJid:a.value})}g.parseNewsletterIDMetadataMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMetadataIQResponsePayloadMixin",["WAResultOrError","WASmaxInNewslettersCommonNewsletterMetadataMixin","WASmaxInNewslettersNewsletterIDMetadataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterIDMetadataMixin").parseNewsletterIDMetadataMixin(a);if(!b.success)return b;a=d("WASmaxInNewslettersCommonNewsletterMetadataMixin").parseCommonNewsletterMetadataMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseNewsletterMetadataIQResponsePayloadMixin=a}),98);
__d("WASmaxInNewslettersNewsletterWithMetadataIQResponsePayloadMixin",["WASmaxInNewslettersNewsletterMetadataIQResponsePayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"newsletter");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"metadata");if(!b.success)return b;a=d("WASmaxInNewslettersNewsletterMetadataIQResponsePayloadMixin").parseNewsletterMetadataIQResponsePayloadMixin(b.value);return!a.success?a:a}g.parseNewsletterWithMetadataIQResponsePayloadMixin=a}),98);
__d("WASmaxInNewslettersCreateResponseSuccess",["WAResultOrError","WASmaxInNewslettersIQResultResponseMixin","WASmaxInNewslettersNewsletterWithMetadataIQResponsePayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"newsletter");if(!c.success)return c;c=d("WASmaxInNewslettersNewsletterWithMetadataIQResponsePayloadMixin").parseNewsletterWithMetadataIQResponsePayloadMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({newsletterNewsletterWithMetadataIQResponsePayloadMixin:c.value},a.value))}g.parseCreateResponseSuccess=a}),98);
__d("WASmaxOutNewslettersNewsletterCreationTimeFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("creation_time",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterCreationTimeFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterDescriptionFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("description",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterDescriptionFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterHandleFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("handle",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterHandleFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterIDFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("id",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterIDFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterInviteLinkFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("invite",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterInviteLinkFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterLinkedAccountsFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("linked_accounts",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterLinkedAccountsFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterMembershipFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("membership",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterMembershipFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterMutedFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("muted",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterMutedFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterNameFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("name",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterNameFieldMixin=a}),98);
__d("WASmaxOutNewslettersBaseNewsletterPictureFieldMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.pictureId;a=d("WASmaxJsx").smax("picture",{id:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a),query:"direct_path"});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseNewsletterPictureFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterPictureFieldMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersBaseNewsletterPictureFieldMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.pictureType;b=d("WASmaxOutNewslettersBaseNewsletterPictureFieldMixin").mergeBaseNewsletterPictureFieldMixin(d("WASmaxJsx").smax("picture",{type:d("WAWap").CUSTOM_STRING(b)}),a);return b}function i(a){a=a.pictureArgs;a=d("WASmaxJsx").smax("metadata",null,d("WASmaxChildren").REPEATED_CHILD(h,a,0,2));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeNewsletterPictureFieldPicture=h;g.mergeNewsletterPictureFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterPrivacyFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("privacy",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterPrivacyFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterStateFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("state",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterStateFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterSubscribersFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("subscribers",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterSubscribersFieldMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterVerificationFieldMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("verification",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterVerificationFieldMixin=a}),98);
__d("WASmaxOutNewslettersAllNewsletterMetadataIQRequestPayloadMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersNewsletterCreationTimeFieldMixin","WASmaxOutNewslettersNewsletterDescriptionFieldMixin","WASmaxOutNewslettersNewsletterHandleFieldMixin","WASmaxOutNewslettersNewsletterIDFieldMixin","WASmaxOutNewslettersNewsletterInviteLinkFieldMixin","WASmaxOutNewslettersNewsletterLinkedAccountsFieldMixin","WASmaxOutNewslettersNewsletterMembershipFieldMixin","WASmaxOutNewslettersNewsletterMutedFieldMixin","WASmaxOutNewslettersNewsletterNameFieldMixin","WASmaxOutNewslettersNewsletterPictureFieldMixin","WASmaxOutNewslettersNewsletterPrivacyFieldMixin","WASmaxOutNewslettersNewsletterStateFieldMixin","WASmaxOutNewslettersNewsletterSubscribersFieldMixin","WASmaxOutNewslettersNewsletterVerificationFieldMixin"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.hasNewsletterCreationTimeField,e=a.hasNewsletterNameField,f=a.hasNewsletterDescriptionField,g=a.hasNewsletterInviteLinkField,h=a.hasNewsletterHandleField,i=a.hasNewsletterSubscribersField,j=a.hasNewsletterPrivacyField,k=a.hasNewsletterVerificationField,l=a.hasNewsletterLinkedAccountsField,m=a.hasNewsletterStateField,n=a.newsletterPictureFieldMixinArgs,o=a.hasNewsletterMembershipField;a=a.hasNewsletterMutedField;b=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutNewslettersNewsletterMutedFieldMixin").mergeNewsletterMutedFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterMembershipFieldMixin").mergeNewsletterMembershipFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterPictureFieldMixin").mergeNewsletterPictureFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterStateFieldMixin").mergeNewsletterStateFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterLinkedAccountsFieldMixin").mergeNewsletterLinkedAccountsFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterVerificationFieldMixin").mergeNewsletterVerificationFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterPrivacyFieldMixin").mergeNewsletterPrivacyFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterSubscribersFieldMixin").mergeNewsletterSubscribersFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterHandleFieldMixin").mergeNewsletterHandleFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterInviteLinkFieldMixin").mergeNewsletterInviteLinkFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterDescriptionFieldMixin").mergeNewsletterDescriptionFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterNameFieldMixin").mergeNewsletterNameFieldMixin,b.optionalMerge(d("WASmaxOutNewslettersNewsletterCreationTimeFieldMixin").mergeNewsletterCreationTimeFieldMixin,d("WASmaxOutNewslettersNewsletterIDFieldMixin").mergeNewsletterIDFieldMixin(d("WASmaxJsx").smax("metadata",null)),c),e),f),g),h),i),j),k),l),m),n),o),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAllNewsletterMetadataIQRequestPayloadMixin=a}),98);
__d("WASmaxOutNewslettersSetNameMixinMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.nameElementValue;a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("name",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSetNameMixinMixin=a}),98);
__d("WASmaxOutNewslettersSetNewDescriptionMixinMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.descriptionElementValue;a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("description",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSetNewDescriptionMixinMixin=a}),98);
__d("WASmaxOutNewslettersSetNewPictureMixinMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.pictureElementValue;a=d("WASmaxJsx").smax("metadata",null,d("WASmaxJsx").smax("picture",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSetNewPictureMixinMixin=a}),98);
__d("WASmaxOutNewslettersCreateRequestMixinMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersAllNewsletterMetadataIQRequestPayloadMixin","WASmaxOutNewslettersSetNameMixinMixin","WASmaxOutNewslettersSetNewDescriptionMixinMixin","WASmaxOutNewslettersSetNewPictureMixinMixin"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.setNameMixinMixinArgs,e=a.setNewDescriptionMixinMixinArgs,f=a.setNewPictureMixinMixinArgs;a=a.allNewsletterMetadataIQRequestPayloadMixinArgs;c=(b=d("WASmaxJsx")).smax("create",null,d("WASmaxMixins").optionalMerge(d("WASmaxOutNewslettersSetNewPictureMixinMixin").mergeSetNewPictureMixinMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutNewslettersSetNewDescriptionMixinMixin").mergeSetNewDescriptionMixinMixin,d("WASmaxOutNewslettersSetNameMixinMixin").mergeSetNameMixinMixin(b.smax("metadata",null),c),e),f),b.smax("query",null,d("WASmaxOutNewslettersAllNewsletterMetadataIQRequestPayloadMixin").mergeAllNewsletterMetadataIQRequestPayloadMixin(b.smax("metadata",null),a)));return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeCreateRequestMixinMixin=a}),98);
__d("WASmaxOutNewslettersBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutNewslettersSelfIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutNewslettersBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"newsletter"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSelfIQSetRequestMixin=a}),98);
__d("WASmaxOutNewslettersCreateRequest",["WASmaxJsx","WASmaxOutNewslettersCreateRequestMixinMixin","WASmaxOutNewslettersSelfIQSetRequestMixin"],(function(a,b,c,d,e,f,g){function a(a){a=a.createRequestMixinMixinArgs;a=d("WASmaxOutNewslettersSelfIQSetRequestMixin").mergeSelfIQSetRequestMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxOutNewslettersCreateRequestMixinMixin").mergeCreateRequestMixinMixin(d("WASmaxJsx").smax("create",null),a)));return a}g.makeCreateRequest=a}),98);
__d("WASmaxNewslettersCreateRPC",["WAComms","WASmaxInNewslettersCreateResponseClientError","WASmaxInNewslettersCreateResponseServerError","WASmaxInNewslettersCreateResponseSuccess","WASmaxOutNewslettersCreateRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutNewslettersCreateRequest").makeCreateRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInNewslettersCreateResponseSuccess").parseCreateResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"CreateResponseSuccess",value:g.value});case 7:h=d("WASmaxInNewslettersCreateResponseClientError").parseCreateResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"CreateResponseClientError",value:h.value});case 10:i=d("WASmaxInNewslettersCreateResponseServerError").parseCreateResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"CreateResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Create",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendCreateRPC=a}),98);
__d("WAWebMexCreateNewsletterJob",["WALogger","WAWebMexClient","WAWebMexCreateNewsletterJobMutation.graphql","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] newsletter created via mex"]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=h!==void 0?h:h=b("WAWebMexCreateNewsletterJobMutation.graphql");a={input:{name:a,description:c,picture:e}};c=(yield d("WAWebMexClient").fetchQuery(f,a));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({response:c});return c});return j.apply(this,arguments)}g.mexCreateNewsletter=a}),98);
__d("WAWebMexNewsletterParseUtils",["WAJids","WAWebCommonNewsletterEnums"],(function(a,b,c,d,e,f,g){function a(a){if(a!=null&&(a==null?void 0:a.id)!=null){var b,c,e,f,g,t,u,v,w,x,y,z,A;b=(b=a.thread_metadata)==null?void 0:b.creation_time;c=(c=a.thread_metadata)==null?void 0:c.handle;e=(e=a.thread_metadata)==null?void 0:e.invite;f=(f=a.thread_metadata)==null?void 0:f.name;g=(g=a.thread_metadata)==null?void 0:g.subscribers_count;t=(t=a.viewer_metadata)==null?void 0:t.mute;u=(u=a.thread_metadata)==null?void 0:u.verification;v=(v=a.state)==null?void 0:v.type;w=(w=a.thread_metadata)==null?void 0:w.description;x=(x=a.viewer_metadata)==null?void 0:x.role;y=(y=(y=a.thread_metadata)==null?void 0:y.picture)!=null?y:(y=a.thread_metadata)==null?void 0:y.image;z=(z=a.thread_metadata)==null?void 0:z.preview;A=(A=a.thread_metadata)==null?void 0:(A=A.settings)==null?void 0:(A=A.reaction_codes)==null?void 0:A.value;t=babelHelpers["extends"]({idJid:d("WAJids").toNewsletterJid(a.id),newsletterCreationTimeMetadataMixin:(a=h(b))!=null?a:null,newsletterHandleMetadataMixin:(b=i(c))!=null?b:null,newsletterInviteLinkMetadataMixin:(a=j(e))!=null?a:null,newsletterNameMetadataMixin:(c=k(f))!=null?c:null,newsletterSubscribersMetadataMixin:(b=l(g))!=null?b:null,newsletterMutedMetadataMixin:(e=m(t))!=null?e:null,newsletterVerificationMetadataMixin:(a=n(u))!=null?a:null,newsletterStateMetadataMixin:(f=o(v))!=null?f:null,newsletterDescriptionMetadataMixin:(c=p(w))!=null?c:null,newsletterMembershipMetadataMixin:(g=q(x))!=null?g:null,newsletterPictureMetadataMixin:(b=s([y,z]))!=null?b:null,newsletterLinkedAccountsMetadataMixin:null,newsletterPrivacyMetadataMixin:null},A!=null&&{newsletterReactionCodesSettingMetadataMixin:r(A)});return t}return null}function h(a){if(a!=null)return{creationTimeValue:Number(a)}}function i(a){if(a!=null)return{handleText:a}}function j(a){if(a!=null)return{inviteCode:a}}function k(a){if(a!=null){return{nameId:a.id,nameUpdateTime:Number(a==null?void 0:a.update_time),nameElementValue:(a=a==null?void 0:a.text)!=null?a:""}}}function l(a){if(a!=null)return{subscribersCount:Number(a)}}function m(a){if(a!=null){var b="undefined";a.toLowerCase()==="off"?b="off":a.toLowerCase()==="on"&&(b="on");return{mutedState:b}}}function n(a){if(a!=null){a=a.toLowerCase()==="unverified"?"unverified":"verified";return{verificationState:a}}}function o(a){var b;(a==null?void 0:a.toLowerCase())==="active"?b="active":(a==null?void 0:a.toLowerCase())==="suspended"?b="suspended":(a==null?void 0:a.toLowerCase())==="geosuspended"&&(b="geosuspended");if(b!=null)return{stateType:b}}function p(a){var b=a==null?void 0:a.text,c=a==null?void 0:a.update_time;if(a!=null&&b!=null&&c!=null)return{descriptionQueryDescriptionResponseMixin:{id:a.id,updateTime:Number(c),elementValue:b}}}function q(a){if(a!=null){var b;switch(a.toLowerCase()){case"admin":b="admin";break;case"guest":b="guest";break;case"owner":b="owner";break;case"subscriber":b="subscriber";break}if(b!=null)return{membershipType:b}}}function r(a){switch(a){case"ALL":return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.All;case"BLOCKLIST":return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.Blocklist;case"NONE":return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.None;case"BASIC":return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.Basic;default:return null}}function s(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];if(d==null)continue;else if(d!=null&&d.type!=null){var e=d.type.toLowerCase()==="image"?"image":"preview";d.direct_path!=null&&d.direct_path!==""&&d.id!=null&&d.type!=null?b.push({queryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup:{name:"QueryPictureDirectPathResponse",value:{directPath:d.direct_path,type:e,id:d.id}}}):d.direct_path===""||d.direct_path==null?b.push({queryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup:{name:"QueryPictureEmptyResponse",value:{type:"image"}}}):d.type!=null&&d.id!=null&&b.push({queryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup:{name:"QueryPictureMatchedResponse",value:{id:d.id,type:e}}})}}return{picture:[].concat(b)}}g.parseMexNewsletterResponse=a;g.toReactionCodesSettingMixin=r}),98);
__d("WAWebNewsletterCreateQueryJob",["WASmaxNewslettersCreateRPC","WAWebBackendErrors","WAWebMexCreateNewsletterJob","WAWebMexNewsletterParseUtils","WAWebMexUtils","WAWebNewsletterRpcUtils","WAWebURLUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var b=a.name,c=a.description;a=a.picture;return h(b,c,a)}function e(){e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.name,c=a.description;a=a.picture;var e=[{pictureType:"image"},{pictureType:"preview"}];b=(yield d("WASmaxNewslettersCreateRPC").sendCreateRPC({createRequestMixinMixinArgs:{setNameMixinMixinArgs:{nameElementValue:b},setNewDescriptionMixinMixinArgs:c!=null?{descriptionElementValue:c}:void 0,setNewPictureMixinMixinArgs:a!=null?{pictureElementValue:a}:void 0,allNewsletterMetadataIQRequestPayloadMixinArgs:{hasNewsletterCreationTimeField:!0,hasNewsletterNameField:!0,newsletterPictureFieldMixinArgs:{pictureArgs:e},hasNewsletterDescriptionField:!0,hasNewsletterInviteLinkField:!0,hasNewsletterHandleField:!0,hasNewsletterSubscribersField:!0,hasNewsletterPrivacyField:!0,hasNewsletterVerificationField:!0,hasNewsletterLinkedAccountsField:!0,hasNewsletterMembershipField:!0,hasNewsletterMutedField:!0}}}));switch(b.name){case"CreateResponseSuccess":return b.value.newsletterNewsletterWithMetadataIQResponsePayloadMixin;case"CreateResponseClientError":c=b.value.badRequestOrRateLimitedIQErrorResponseMixinGroup;switch(c.name){case"BadRequestIQErrorResponse":a=c.value.errorIQErrorBadRequestMixin;e=a.code;a=a.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),a);case"RateLimitedIQErrorResponse":e=c.value.errorIQErrorRateOverlimitMixin;a=e.code;c=e.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),c)}break;case"CreateResponseServerError":e=b.value.errorIQErrorInternalServerErrorMixin;a=e.code;c=e.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),c)}});return e.apply(this,arguments)}function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;e!=null&&(f=c("WAWebURLUtils").parseDataURL(e).data);e=(yield d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return d("WAWebMexUtils").runWithErrorHandler(function(){return d("WAWebMexCreateNewsletterJob").mexCreateNewsletter(a,b,f)},d("WAWebMexUtils").MexSupportedFeature.Newsletter)}));return d("WAWebMexNewsletterParseUtils").parseMexNewsletterResponse(e.xwa2_newsletter_create)});return i.apply(this,arguments)}g.createNewsletterQuery=a}),98);
__d("WAWebNewsletterStorageUtils",["WAWebCommonNewsletterEnums","WAWebNewsletterDBConstants"],(function(a,b,c,d,e,f,g){function h(a){switch(a){case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber:return d("WAWebNewsletterDBConstants").NewsletterDBMembership.Subscriber;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin:return d("WAWebNewsletterDBConstants").NewsletterDBMembership.Admin;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest:return d("WAWebNewsletterDBConstants").NewsletterDBMembership.Guest;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner:return d("WAWebNewsletterDBConstants").NewsletterDBMembership.Owner}}function i(a){switch(a){case d("WAWebCommonNewsletterEnums").NewsletterPrivacy.Public:return 0;case d("WAWebCommonNewsletterEnums").NewsletterPrivacy.Private:return 1}}function a(a){var b={id:a.id.toString()};a.creationTime!=null&&(b.creationTime=a.creationTime);a.name!=null&&(b.name=a.name);a.nameUpdateTime!=null&&(b.nameUpdateTime=a.nameUpdateTime);a.description!=null&&(b.description=a.description);a.descriptionUpdateTime!=null&&(b.descriptionUpdateTime=a.descriptionUpdateTime);a.handle!=null&&(b.handle=a.handle);a.inviteCode!=null&&(b.inviteCode=a.inviteCode);a.size!=null&&(b.size=a.size);a.verified!=null&&(b.verified=a.verified);a.membershipType!=null&&(b.membershipType=h(a.membershipType));a.privacy!=null&&(b.privacy=i(a.privacy));if(a.website!=null){var c;b.website=(c=a.website)==null?void 0:c.href}a.reactionCodesSetting!=null&&(b.reactionCodesSetting=a.reactionCodesSetting);a.adminCount!=null&&(b.adminCount=a.adminCount);a.suspended!=null&&(b.suspended=a.suspended);a.geosuspended!=null&&(b.geosuspended=a.geosuspended);a.terminated!=null&&(b.terminated=a.terminated);return b}g.mapNewsletterMembershipTypeForStorage=h;g.createNewsletterMetadataObjectForStorage=a}),98);
__d("WAWebNewsletterUpdateNewslettersRecordsJob",["WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebSchemaChat"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateNewsletterChatRecords",function(){return d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.updateNewsletterChatRecords=a}),98);
__d("WAWebNewsletterCreateJob",["WABase64","WAJobOrchestratorTypes","WALogger","WAWebCreateChat","WAWebNewsletterCreateQueryJob","WAWebNewsletterMetadataJob","WAWebNewsletterModelUtils","WAWebNewsletterStorageUtils","WAWebNewsletterSystemMessages","WAWebNewsletterUpdateMsgsRecordsJob","WAWebNewsletterUpdateNewslettersRecordsJob","WAWebOrchestratorNonPersistedJob","WAWebURLUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][join-notification] Failed to update the db records"]);h=function(){return a};return a}function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("createNewsletter",function(){return d("WAWebNewsletterCreateQueryJob").createNewsletterQuery(a).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return null;var b=d("WAWebNewsletterModelUtils").mapNewsletterToModels(a),c=b.chat;b=b.metadata;try{var e=d("WAWebNewsletterSystemMessages").genNewsletterCreationSystemMessages({id:c.id,name:c.name,t:b.creationTime,role:b.membershipType});yield d("WAWebNewsletterUpdateNewslettersRecordsJob").updateNewsletterChatRecords([d("WAWebCreateChat").createNewsletterObjectForStorage(c)]);yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(e);yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata(d("WAWebNewsletterStorageUtils").createNewsletterMetadataObjectForStorage(b));return{newsletter:a,msgs:e}}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-join-notification-db-fail")}});return function(b){return a.apply(this,arguments)}}())},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function e(a){if(a==null)return null;a=c("WAWebURLUtils").parseDataURL(a).data;a=d("WABase64").decodeB64(a);return new Uint8Array(a)}g.createNewsletter=a;g.encodePicture=e}),98);
__d("WAWebdbCRUDOperationsNewsletterReaction",["WAWebModelStorageUtils","WAWebSchemaNewsletterReactions","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if((yield d("WAWebSchemaNewsletterReactions").getTable().get(a))==null)return;b=c("lodash").pickBy(b,function(a){return Number.isSafeInteger(a)});return d("WAWebSchemaNewsletterReactions").getTable().merge(a,b)});return h.apply(this,arguments)}function e(a){var c=new Map();a.forEach(function(a){var b=a.parentMsgKey;b=b;var d=c.get(b);d?d.serverTimestamp<=a.serverTimestamp&&c.set(b,a):c.set(b,a)});return d("WAWebModelStorageUtils").getStorage().lock(["newsletter-reactions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=Array.from(c.values()).map(function(a){return a.parentMsgKey});b=(yield a.anyOf(["parentMsgKey"],b));b.forEach(function(a){var b=a.parentMsgKey,d=c.get(b);d&&(d.serverTimestamp<=a.serverTimestamp&&c["delete"](b))});yield a.bulkCreateOrReplace(Array.from(c.values()))});return function(b){return a.apply(this,arguments)}}())}function f(a){return d("WAWebModelStorageUtils").getStorage().lock(["newsletter-reactions"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=a.parentMsgKey;c=(yield k(c));if(c)yield b.bulkCreateOrReplace([c]);else{c=babelHelpers["extends"]({emojiCountMap:new Map(),serverTimestamp:0},a);yield b.createOrReplace(c)}});return function(a){return c.apply(this,arguments)}}())}function i(a){return d("WAWebSchemaNewsletterReactions").getTable().remove(a)}function j(a){return d("WAWebSchemaNewsletterReactions").getTable().bulkRemove(a)}function k(a){return d("WAWebSchemaNewsletterReactions").getTable().get(a)}g.updateNewsletterReactionTimestamp=a;g.createOrUpdateNewsletterReactions=e;g.createOrUpdateNewsletterReaction=f;g.removeNewsletterReactionsForParentMsg=i;g.bulkRemoveNewsletterReactionsForParentMsg=j;g.getNewsletterReaction=k}),98);
__d("WAWebNewsletterDeleteMessageAddOns",["Promise","WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebSchemaMessage","WAWebdbCRUDOperationsNewsletterReaction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=[function(a){return d("WAWebdbCRUDOperationsNewsletterReaction").bulkRemoveNewsletterReactionsForParentMsg(a.map(function(a){return a}))}];function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("deleteNewsletterMessageAddOns",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=a.toString();c=(yield d("WAWebSchemaMessage").getMessageTable().startsWithAnyOf(["internalId"],[c]));var e=c.map(function(a){return a.id});yield (h||(h=b("Promise"))).all(i.map(function(a){return a(e)}))}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.deleteNewsletterMessageAddOns=a}),98);
__d("WAWebNewsletterDeleteChatJob",["Promise","WALogger","WAWebChatDeleteBridge","WAWebNewsletterDeleteMessageAddOns","WAWebOrchestratorNonPersistedJob","WAWebSchemaNewsletterMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[deleteNewsletterChat][job] Trying to delete a non-newsletter chat"]);i=function(){return a};return a}function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("deleteNewsletterChat",function(){if(!a.isNewsletter()){d("WALogger").ERROR(i()).tags("newsletter").devConsole(a).sendLogs("delete-non-newsletter-chat");return(h||(h=b("Promise"))).resolve()}return d("WAWebChatDeleteBridge").deleteFromStorage(a)}).waitUntilCompleted()}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.map(function(a){return a.toJid()});yield (h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebNewsletterDeleteMessageAddOns").deleteNewsletterMessageAddOns(a)}));yield h.all(a.map(function(a){return d("WAWebChatDeleteBridge").deleteFromStorage(a)}));yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().bulkRemove(c)});return j.apply(this,arguments)}g.deleteNewsletterChat=a;g.bulkDeleteNewsletterChats=c}),98);
__d("WAWebMexFetchNewsletterAdminCountJob",["WALogger","WAWebMexClient","WAWebMexFetchNewsletterAdminCountJobQuery.graphql","WAWebNewsletterGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched admin count"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[isNewsletterMultiAdminM1ImprovementsEnabled] ABProp not enabled for multiadmin M1"]);j=function(){return a};return a}var k=h!==void 0?h:h=b("WAWebMexFetchNewsletterAdminCountJobQuery.graphql");function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={newsletter_id:a};if(!d("WAWebNewsletterGatingUtils").isNewsletterMultiAdminM1ImprovementsEnabled()){d("WALogger").ERROR(j()).tags("newsletter");return null}b=(yield d("WAWebMexClient").fetchQuery(k,b));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({newsletterJid:a,response:b});return(a=b.xwa2_newsletter_admin)==null?void 0:a.admin_count});return l.apply(this,arguments)}g.mexFetchNewsletterAdminCount=a}),98);
__d("WAWebNewsletterGetAdminCountJob",["WAJobOrchestratorTypes","WALogger","WAWebMexFetchNewsletterAdminCountJob","WAWebNewsletterModelUtils","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[NEWSLETTER][getNewsletterAdminCount] Fetching admin count failed, returning default value of 0"]);h=function(){return a};return a}function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterAdminCount",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var b=(yield d("WAWebMexFetchNewsletterAdminCountJob").mexFetchNewsletterAdminCount(a));return(b=b)!=null?b:d("WAWebNewsletterModelUtils").DEFAULT_NEWSLETTER_ADMIN_COUNT}catch(a){d("WALogger").ERROR(h()).devConsole({e:a});return d("WAWebNewsletterModelUtils").DEFAULT_NEWSLETTER_ADMIN_COUNT}}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getNewsletterAdminCount=a}),98);
__d("WAWebMexFetchNewsletterMessageDeliveryUpdatesJob",["WALogger","WAWebMexClient","WAWebMexFetchNewsletterMessageDeliveryUpdatesJobQuery.graphql","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched message delivery updates for ",""]);i=function(){return a};return a}function j(a){return a==="NONE"?0:1}var k=h!==void 0?h:h=b("WAWebMexFetchNewsletterMessageDeliveryUpdatesJobQuery.graphql");function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={jid:a.toString()};b=(yield d("WAWebMexClient").fetchQuery(k,b));d("WALogger").LOG(i(),a).tags("GQL","MEX").devConsole({response:b});return(a=b.xwa2_newsletter_admin)==null?void 0:(b=a.messages)==null?void 0:b.edges.map(function(a){return{serverId:parseInt(a.node.server_id,10),issueCode:j(a.node.message_delivery_update.issue.code)}})});return l.apply(this,arguments)}g.mapIssueCodeToNumber=j;g.mexFetchMessageDeliveryUpdates=a}),98);
__d("WAWebMexFetchNewsletterIntegrityUpdateJob",["WALogger","WAWebMexFetchNewsletterIntegrityUpdateJobQuery.graphql","WAWebMexFetchNewsletterMessageDeliveryUpdatesJob","WAWebMexRelayClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched geo suspended countries and violating messages for ",""]);i=function(){return a};return a}var j=h!==void 0?h:h=b("WAWebMexFetchNewsletterIntegrityUpdateJobQuery.graphql");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={newsletter_id:a};b=(yield d("WAWebMexRelayClient").deprecatedFetchQuery(j,b));d("WALogger").LOG(i(),a).tags("GQL","MEX").devConsole({response:b});a=(a=b.data.xwa2_newsletter_admin)==null?void 0:(a=a.thread_metadata)==null?void 0:(a=a.geo_states)==null?void 0:a.filter(function(a){return((a=a.state)==null?void 0:a.type)==="GEOSUSPENDED"});var c={};c.geosuspendedCountries=a==null?void 0:a.map(function(a){return a.country_code});c.messageDeliveryUpdates=(a=b.data.xwa2_newsletter_admin)==null?void 0:(b=a.messages)==null?void 0:b.edges.map(function(a){return{serverId:parseInt(a.node.server_id,10),issueCode:d("WAWebMexFetchNewsletterMessageDeliveryUpdatesJob").mapIssueCodeToNumber(a.node.message_delivery_update.issue.code)}});return c});return k.apply(this,arguments)}g.mexFetchIntegrityUpdates=a}),98);
__d("WAWebNewsletterAdminNotificationJob",["Promise","WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebSchemaNewsletterMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,c,e,f){f===void 0&&(f=d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateGeosuspendedCountry",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var f=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().get(a));if(f==null)return(h||(h=b("Promise"))).resolve();var g=f.geosuspendedCountries,i=g===void 0?new Map():g;e?c.forEach(function(a){i==null?void 0:i.set(a,{geosuspended:!0})}):c.forEach(function(a){i==null?void 0:i["delete"](a)});f.geosuspendedCountries=i;return d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().merge(a,f)}),{priority:f}).waitUntilCompleted()}function c(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateProfilePictureDeletion",function(){return d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().merge(a,{id:a,hasProfilePictureDeletionAlerts:!0})},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH}).waitUntilCompleted()}g.updateGeosuspendedCountry=a;g.updateProfilePictureDeletionAlertState=c}),98);
__d("WAWebMexFetchGeoSuspendedCountriesJob",["WALogger","WAWebMexFetchGeoSuspendedCountriesJobQuery.graphql","WAWebMexRelayClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched geo suspended countries"]);i=function(){return a};return a}var j=h!==void 0?h:h=b("WAWebMexFetchGeoSuspendedCountriesJobQuery.graphql");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={newsletter_id:a};b=(yield d("WAWebMexRelayClient").deprecatedFetchQuery(j,b));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({newsletterJid:a,response:b});b=(a=b.data.xwa2_newsletter_admin)==null?void 0:(b=a.thread_metadata)==null?void 0:(a=b.geo_states)==null?void 0:a.filter(function(a){return((a=a.state)==null?void 0:a.type)==="GEOSUSPENDED"});return b==null?void 0:b.map(function(a){return a.country_code})});return k.apply(this,arguments)}g.mexFetchGeosuspendedCountryUpdates=a}),98);
__d("WAWebNewsletterGetGeoSuspendedCountriesUpdatesJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebMexFetchGeoSuspendedCountriesJob","WAWebNewsletterAdminNotificationJob","WAWebOrchestratorNonPersistedJob","WAWebSchemaNewsletterMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] GET geo suspended countries error"]);i=function(){return a};return a}function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterGeoSuspendedCountryUpdates",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var c=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().get(a));if(c==null)return;c=c.geosuspendedCountries;c=c===void 0?new Map():c;var e=(yield d("WAWebMexFetchGeoSuspendedCountriesJob").mexFetchGeosuspendedCountryUpdates(a));e=j(e,c);c=e.countriesToAdd;e=e.countriesToRemove;yield (h||(h=b("Promise"))).all([d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(a,c,!0),d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(a,e,!1)]);return{countriesToAdd:c,countriesToRemove:e}}catch(a){d("WALogger").ERROR(i()).tags("GQL","MEX").devConsole({e:a});throw a}}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH}).waitUntilCompleted()}function j(a,b){var c,d=[];c=(c=a)!=null?c:[];b==null?void 0:b.forEach(function(b,c){(a==null?void 0:a.includes(c))||d.push(c)});return{countriesToAdd:c,countriesToRemove:d}}g.getNewsletterGeosuspendedCountryUpdates=a;g.determineNewsletterGeosuspendedCountryUpdates=j}),98);
__d("WAWebNewsletterGetIntegrityUpdatesJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebMexFetchNewsletterIntegrityUpdateJob","WAWebNewsletterAdminNotificationJob","WAWebNewsletterGetGeoSuspendedCountriesUpdatesJob","WAWebNewsletterGetMessageDeliveryUpdatesJob","WAWebNewsletterMessageDeliveryUpdateToModelUtils","WAWebNewsletterMetadataJob","WAWebOrchestratorNonPersistedJob","WAWebSchemaNewsletterMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] GET integrity updates error"]);i=function(){return a};return a}function a(a,c){c===void 0&&(c=d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterIntegrityUpdates",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e,f=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().get(a));if(f==null)return;var g=f.geosuspendedCountries;g=g===void 0?new Map():g;f=f.messageDeliveryUpdates;f=f===void 0?new Map():f;var j=(yield d("WAWebMexFetchNewsletterIntegrityUpdateJob").mexFetchIntegrityUpdates(a));e=(e=j==null?void 0:j.geosuspendedCountries)!=null?e:[];e=d("WAWebNewsletterGetGeoSuspendedCountriesUpdatesJob").determineNewsletterGeosuspendedCountryUpdates(e,g);g=e.countriesToAdd;e=e.countriesToRemove;j=(j=j==null?void 0:j.messageDeliveryUpdates)!=null?j:[];j=d("WAWebNewsletterGetMessageDeliveryUpdatesJob").determineNewsletterMessageDeliveryUpdates(j,f);yield (h||(h=b("Promise"))).all([d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(a,g,!0,c),d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(a,e,!1,c),j!=null&&d("WAWebNewsletterMetadataJob").updateNewsletterMessageDeliveryUpdates(a,j.updatesToAdd,j.updatesToRemove,c)]);if(j==null)return{geosuspendedCountriesToAdd:g,geosuspendedCountriesToRemove:e,violatingMessagesToAdd:[],violatingMessagesToRemove:[]};f=(yield d("WAWebNewsletterMessageDeliveryUpdateToModelUtils").getMessageDeliveryUpdatesModelToUpdate(a,j.updatesToAdd,j.updatesToRemove));return{geosuspendedCountriesToAdd:g,geosuspendedCountriesToRemove:e,violatingMessagesToAdd:f?f.modelUpdatesToAdd:[],violatingMessagesToRemove:f?f.modelUpdatesToRemove:[]}}catch(a){d("WALogger").ERROR(i()).tags("GQL","MEX").devConsole({e:a});throw a}}),{priority:c}).waitUntilCompleted()}g.getNewsletterIntegrityUpdates=a}),98);
__d("WAWebNewsletterGetMessageDeliveryUpdatesJob",["WAJobOrchestratorTypes","WALogger","WAWebMexFetchNewsletterMessageDeliveryUpdatesJob","WAWebNewsletterMessageDeliveryUpdateToModelUtils","WAWebNewsletterMetadataJob","WAWebOrchestratorNonPersistedJob","WAWebSchemaNewsletterMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] GET message delivery updates error"]);h=function(){return a};return a}function a(a,c){c===void 0&&(c=d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterMessageDeliveryUpdates",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var b=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().get(a));if(b==null)return;var e=(yield d("WAWebMexFetchNewsletterMessageDeliveryUpdatesJob").mexFetchMessageDeliveryUpdates(a));b=b.messageDeliveryUpdates;b=b===void 0?new Map():b;e=i(e,b);if(e==null)return;b=e.updatesToAdd;e=e.updatesToRemove;yield d("WAWebNewsletterMetadataJob").updateNewsletterMessageDeliveryUpdates(a,b,e,c);return d("WAWebNewsletterMessageDeliveryUpdateToModelUtils").getMessageDeliveryUpdatesModelToUpdate(a,b,e)}catch(a){d("WALogger").ERROR(h()).tags("GQL","MEX").devConsole({e:a});throw a}}),{priority:c}).waitUntilCompleted()}function i(a,b){if(a==null)return;var c=new Set(a.map(function(a){return a.serverId})),d=[];b==null?void 0:b.forEach(function(a,b){c.has(b)||d.push(b)});b=a.map(function(a){return{id:a.serverId,code:a.issueCode}});return{updatesToAdd:b,updatesToRemove:d}}g.getNewsletterMessageDeliveryUpdates=a;g.determineNewsletterMessageDeliveryUpdates=i}),98);
__d("WASmaxInNewslettersIQErrorLockedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","locked");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",423);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorLockedMixin=a}),98);
__d("WASmaxInNewslettersSuspendedIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorLockedMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorLockedMixin").parseIQErrorLockedMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorLockedMixin:c.value},a.value))}g.parseSuspendedIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersIQErrorUnavailableForLegalReasonsGenericMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","features-disabled");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",451);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorUnavailableForLegalReasonsGenericMixin=a}),98);
__d("WASmaxInNewslettersUnavailableForLegalReasonsResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorResponseMixin","WASmaxInNewslettersIQErrorUnavailableForLegalReasonsGenericMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorUnavailableForLegalReasonsGenericMixin").parseIQErrorUnavailableForLegalReasonsGenericMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorUnavailableForLegalReasonsGenericMixin:c.value},a.value))}g.parseUnavailableForLegalReasonsResponseMixin=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessageUpdatesClientErrors",["WAResultOrError","WASmaxInNewslettersBadRequestIQErrorResponseMixin","WASmaxInNewslettersItemNotFoundIQErrorResponseMixin","WASmaxInNewslettersRateLimitedIQErrorResponseMixin","WASmaxInNewslettersSuspendedIQErrorResponseMixin","WASmaxInNewslettersUnavailableForLegalReasonsResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxInNewslettersBadRequestIQErrorResponseMixin").parseBadRequestIQErrorResponseMixin(a,b);if(c.success)return d("WAResultOrError").makeResult({name:"BadRequestIQErrorResponse",value:c.value});var e=d("WASmaxInNewslettersUnavailableForLegalReasonsResponseMixin").parseUnavailableForLegalReasonsResponseMixin(a,b);if(e.success)return d("WAResultOrError").makeResult({name:"UnavailableForLegalReasonsResponse",value:e.value});var f=d("WASmaxInNewslettersItemNotFoundIQErrorResponseMixin").parseItemNotFoundIQErrorResponseMixin(a,b);if(f.success)return d("WAResultOrError").makeResult({name:"ItemNotFoundIQErrorResponse",value:f.value});var g=d("WASmaxInNewslettersSuspendedIQErrorResponseMixin").parseSuspendedIQErrorResponseMixin(a,b);if(g.success)return d("WAResultOrError").makeResult({name:"SuspendedIQErrorResponse",value:g.value});b=d("WASmaxInNewslettersRateLimitedIQErrorResponseMixin").parseRateLimitedIQErrorResponseMixin(a,b);return b.success?d("WAResultOrError").makeResult({name:"RateLimitedIQErrorResponse",value:b.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BadRequestIQErrorResponse","UnavailableForLegalReasonsResponse","ItemNotFoundIQErrorResponse","SuspendedIQErrorResponse","RateLimitedIQErrorResponse"],[c,e,f,g,b])}g.parseGetNewsletterMessageUpdatesClientErrors=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessageUpdatesResponseClientError",["WAResultOrError","WASmaxInNewslettersGetNewsletterMessageUpdatesClientErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersGetNewsletterMessageUpdatesClientErrors").parseGetNewsletterMessageUpdatesClientErrors(a,b);return!c.success?c:d("WAResultOrError").makeResult({getNewsletterMessageUpdatesClientErrors:c.value})}g.parseGetNewsletterMessageUpdatesResponseClientError=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessageUpdatesResponseServerError",["WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersInternalServerErrorIQErrorResponseMixin").parseInternalServerErrorIQErrorResponseMixin(a,b);return!c.success?c:c}g.parseGetNewsletterMessageUpdatesResponseServerError=a}),98);
__d("WASmaxInNewslettersAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","3");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAdminEditMixin=a}),98);
__d("WASmaxInNewslettersContentTypeMediaMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","media");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeMediaMixin=a}),98);
__d("WASmaxInNewslettersPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,1048576);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parsePayloadMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMediaMixin",["WAResultOrError","WASmaxInNewslettersContentTypeMediaMixin","WASmaxInNewslettersEnums","WASmaxInNewslettersPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStringEnum(b.value,"mediatype",d("WASmaxInNewslettersEnums").ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO);if(!c.success)return c;b=d("WASmaxInNewslettersPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInNewslettersContentTypeMediaMixin").parseContentTypeMediaMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextMediatype:c.value,plaintextPayloadMixin:b.value},a.value))}g.parseNewsletterMediaMixin=a}),98);
__d("WASmaxInNewslettersContentTypeTextMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","text");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeTextMixin=a}),98);
__d("WASmaxInNewslettersNewsletterTextMixin",["WAResultOrError","WASmaxInNewslettersContentTypeTextMixin","WASmaxInNewslettersPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInNewslettersPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInNewslettersContentTypeTextMixin").parseContentTypeTextMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},a.value))}g.parseNewsletterTextMixin=a}),98);
__d("WASmaxInNewslettersNewsletterTextOrMediaMixinGroup",["WAResultOrError","WASmaxInNewslettersNewsletterMediaMixin","WASmaxInNewslettersNewsletterTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersNewsletterTextMixin").parseNewsletterTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NewsletterText",value:b.value});var c=d("WASmaxInNewslettersNewsletterMediaMixin").parseNewsletterMediaMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NewsletterMedia",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NewsletterText","NewsletterMedia"],[b,c])}g.parseNewsletterTextOrMediaMixinGroup=a}),98);
__d("WASmaxInNewslettersNewsletterEditMixin",["WAResultOrError","WASmaxInNewslettersAdminEditMixin","WASmaxInNewslettersNewsletterTextOrMediaMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInNewslettersAdminEditMixin").parseAdminEditMixin(a);if(!b.success)return b;a=d("WASmaxInNewslettersNewsletterTextOrMediaMixinGroup").parseNewsletterTextOrMediaMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{newsletterTextOrMediaMixinGroup:a.value}))}g.parseNewsletterEditMixin=a}),98);
__d("WASmaxInNewslettersContentTypePollCreationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","poll");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"polltype","creation");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaPolltype:b.value})}g.parseContentTypePollCreationMixin=a}),98);
__d("WASmaxInNewslettersNewsletterPollCreationMixin",["WAResultOrError","WASmaxInNewslettersContentTypePollCreationMixin","WASmaxInNewslettersPayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInNewslettersPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInNewslettersContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},a.value))}g.parseNewsletterPollCreationMixin=a}),98);
__d("WASmaxInNewslettersAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","8");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAdminRevokeMixin=a}),98);
__d("WASmaxInNewslettersNewsletterRevokeMixin",["WAResultOrError","WASmaxInNewslettersAdminRevokeMixin","WASmaxInNewslettersContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInNewslettersAdminRevokeMixin").parseAdminRevokeMixin(a);if(!b.success)return b;a=d("WASmaxInNewslettersContentTypeTextMixin").parseContentTypeTextMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseNewsletterRevokeMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMessageHistoryContent",["WAResultOrError","WASmaxInNewslettersNewsletterEditMixin","WASmaxInNewslettersNewsletterMediaMixin","WASmaxInNewslettersNewsletterPollCreationMixin","WASmaxInNewslettersNewsletterRevokeMixin","WASmaxInNewslettersNewsletterTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersNewsletterEditMixin").parseNewsletterEditMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NewsletterEdit",value:b.value});var c=d("WASmaxInNewslettersNewsletterTextMixin").parseNewsletterTextMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"NewsletterText",value:c.value});var e=d("WASmaxInNewslettersNewsletterMediaMixin").parseNewsletterMediaMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"NewsletterMedia",value:e.value});var f=d("WASmaxInNewslettersNewsletterRevokeMixin").parseNewsletterRevokeMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"NewsletterRevoke",value:f.value});var g=d("WASmaxInNewslettersNewsletterPollCreationMixin").parseNewsletterPollCreationMixin(a);return g.success?d("WAResultOrError").makeResult({name:"NewsletterPollCreation",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NewsletterEdit","NewsletterText","NewsletterMedia","NewsletterRevoke","NewsletterPollCreation"],[b,c,e,f,g])}g.parseNewsletterMessageHistoryContent=a}),98);
__d("WASmaxInNewslettersNewsletterMessageLastEditTimestampMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"msg_edit_t",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({metaMsgEditT:a.value})}g.parseNewsletterMessageLastEditTimestampMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMessageOriginalTimestampMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"original_msg_t",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({metaOriginalMsgT:a.value})}g.parseNewsletterMessageOriginalTimestampMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMessageHistoryMixin",["WAResultOrError","WASmaxInNewslettersNewsletterMessageHistoryContent","WASmaxInNewslettersNewsletterMessageLastEditTimestampMixin","WASmaxInNewslettersNewsletterMessageOriginalTimestampMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStanzaId,a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"server_id",99,2147476647);if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_sender","true");if(!f.success)return f;var g=d("WASmaxInNewslettersNewsletterMessageOriginalTimestampMixin").parseNewsletterMessageOriginalTimestampMixin(a),h=d("WASmaxInNewslettersNewsletterMessageLastEditTimestampMixin").parseNewsletterMessageLastEditTimestampMixin(a);a=d("WASmaxInNewslettersNewsletterMessageHistoryContent").parseNewsletterMessageHistoryContent(a);return d("WAResultOrError").makeResult({id:b.value,serverId:c.value,t:e.value,isSender:f.value,newsletterMessageOriginalTimestampMixin:g.success?g.value:null,newsletterMessageLastEditTimestampMixin:h.success?h.value:null,newsletterMessageHistoryContent:a.success?a.value:null})}g.parseNewsletterMessageHistoryMixin=a}),98);
__d("WASmaxInNewslettersNewsletterPollVotesMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"vote");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"count",1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!a.success?a:d("WAResultOrError").makeResult({count:b.value,elementValue:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"votes");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"vote",0,1e3,h);return!a.success?a:d("WAResultOrError").makeResult({votesVote:a.value})}g.parseNewsletterPollVotesVotesVote=h;g.parseNewsletterPollVotesMixin=a}),98);
__d("WASmaxInNewslettersNewsletterReactionsMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"reaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"code");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"count",1,void 0);return!a.success?a:d("WAResultOrError").makeResult({code:b.value,count:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reactions");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"reaction",0,1e3,h);return!a.success?a:d("WAResultOrError").makeResult({reactionsReaction:a.value})}g.parseNewsletterReactionsReactionsReaction=h;g.parseNewsletterReactionsMixin=a}),98);
__d("WASmaxInNewslettersNewsletterViewsCountMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"views_count");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"count",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({viewsCountCount:a.value})}g.parseNewsletterViewsCountMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMessageHistoryWithAddOnsMixin",["WAResultOrError","WASmaxInNewslettersNewsletterMessageHistoryMixin","WASmaxInNewslettersNewsletterPollVotesMixin","WASmaxInNewslettersNewsletterReactionsMixin","WASmaxInNewslettersNewsletterViewsCountMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterMessageHistoryMixin").parseNewsletterMessageHistoryMixin(a);if(!b.success)return b;var c=d("WASmaxInNewslettersNewsletterReactionsMixin").parseNewsletterReactionsMixin(a),e=d("WASmaxInNewslettersNewsletterViewsCountMixin").parseNewsletterViewsCountMixin(a);a=d("WASmaxInNewslettersNewsletterPollVotesMixin").parseNewsletterPollVotesMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{newsletterReactionsMixin:c.success?c.value:null,newsletterViewsCountMixin:e.success?e.value:null,newsletterPollVotesMixin:a.success?a.value:null}))}g.parseNewsletterMessageHistoryWithAddOnsMixin=a}),98);
__d("WASmaxInNewslettersNewsletterMessageResponsePayloadMixin",["WAResultOrError","WASmaxInNewslettersNewsletterMessageHistoryWithAddOnsMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterMessageHistoryWithAddOnsMixin").parseNewsletterMessageHistoryWithAddOnsMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"messages");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrNewsletterJid,a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"message",0,300,h);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,t:c.value,message:a.value})}g.parseNewsletterMessageResponsePayloadMessage=h;g.parseNewsletterMessageResponsePayloadMixin=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessageUpdatesResponseSuccess",["WAResultOrError","WASmaxInNewslettersIQResultResponseMixin","WASmaxInNewslettersNewsletterMessageResponsePayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"message_updates");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"messages");if(!c.success)return c;c=d("WASmaxInNewslettersNewsletterMessageResponsePayloadMixin").parseNewsletterMessageResponsePayloadMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({messageUpdatesMessagesNewsletterMessageResponsePayloadMixin:c.value},a.value))}g.parseGetNewsletterMessageUpdatesResponseSuccess=a}),98);
__d("WASmaxOutNewslettersMessageUpdatesAfterMixinMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageUpdatesAfter;a=d("WASmaxJsx").smax("message_updates",{after:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageUpdatesAfterMixinMixin=a}),98);
__d("WASmaxOutNewslettersMessageUpdatesBeforeMixinMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageUpdatesBefore;a=d("WASmaxJsx").smax("message_updates",{before:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageUpdatesBeforeMixinMixin=a}),98);
__d("WASmaxOutNewslettersMessageUpdatesBeforeOrAfterMixinMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutNewslettersMessageUpdatesAfterMixinMixin","WASmaxOutNewslettersMessageUpdatesBeforeMixinMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.messageUpdatesBeforeMixin)return d("WASmaxOutNewslettersMessageUpdatesBeforeMixinMixin").mergeMessageUpdatesBeforeMixinMixin(a,b.messageUpdatesBeforeMixin);if(b.messageUpdatesAfterMixin)return d("WASmaxOutNewslettersMessageUpdatesAfterMixinMixin").mergeMessageUpdatesAfterMixinMixin(a,b.messageUpdatesAfterMixin);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeMessageUpdatesBeforeOrAfterMixinMixinGroup=a}),98);
__d("WASmaxOutNewslettersNewsletterIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqTo;a=d("WASmaxOutNewslettersBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").JID(a),xmlns:"newsletter"}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterIQGetRequestMixin=a}),98);
__d("WASmaxOutNewslettersGetNewsletterMessageUpdatesRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutNewslettersMessageUpdatesBeforeOrAfterMixinMixinGroup","WASmaxOutNewslettersNewsletterIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageUpdatesCount,c=a.messageUpdatesSince,e=a.messageUpdatesBeforeOrAfterMixinMixinGroupArgs;b=d("WASmaxOutNewslettersNewsletterIQGetRequestMixin").mergeNewsletterIQGetRequestMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxOutNewslettersMessageUpdatesBeforeOrAfterMixinMixinGroup").mergeMessageUpdatesBeforeOrAfterMixinMixinGroup(d("WASmaxJsx").smax("message_updates",{count:d("WAWap").INT(b),since:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,c)}),e)),a);return b}g.makeGetNewsletterMessageUpdatesRequest=a}),98);
__d("WASmaxNewslettersGetNewsletterMessageUpdatesRPC",["WAComms","WASmaxInNewslettersGetNewsletterMessageUpdatesResponseClientError","WASmaxInNewslettersGetNewsletterMessageUpdatesResponseServerError","WASmaxInNewslettersGetNewsletterMessageUpdatesResponseSuccess","WASmaxOutNewslettersGetNewsletterMessageUpdatesRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutNewslettersGetNewsletterMessageUpdatesRequest").makeGetNewsletterMessageUpdatesRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInNewslettersGetNewsletterMessageUpdatesResponseSuccess").parseGetNewsletterMessageUpdatesResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetNewsletterMessageUpdatesResponseSuccess",value:g.value});case 7:h=d("WASmaxInNewslettersGetNewsletterMessageUpdatesResponseClientError").parseGetNewsletterMessageUpdatesResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetNewsletterMessageUpdatesResponseClientError",value:h.value});case 10:i=d("WASmaxInNewslettersGetNewsletterMessageUpdatesResponseServerError").parseGetNewsletterMessageUpdatesResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetNewsletterMessageUpdatesResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetNewsletterMessageUpdates",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetNewsletterMessageUpdatesRPC=a}),98);
__d("WAWebNewsletterGetMessageUpdatesQuery",["Promise","WANullthrows","WASmaxNewslettersGetNewsletterMessageUpdatesRPC","WATimeUtils","WAWebBackendErrors","WAWebNewsletterRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return i(a,b)})}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=c.since,f=c.count;c=c.cursor;a=(yield d("WASmaxNewslettersGetNewsletterMessageUpdatesRPC").sendGetNewsletterMessageUpdatesRPC({iqTo:a,messageUpdatesCount:f,messageUpdatesSince:e,messageUpdatesBeforeOrAfterMixinMixinGroupArgs:k(c)}));switch(a.name){case"GetNewsletterMessageUpdatesResponseSuccess":f=a.value.messageUpdatesMessagesNewsletterMessageResponsePayloadMixin;return{updates:f.message,timestamp:(e=f.t)!=null?e:d("WATimeUtils").unixTime()};case"GetNewsletterMessageUpdatesResponseServerError":c=a.value.errorIQErrorInternalServerErrorMixin;f=c.code;e=c.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(f),e);case"GetNewsletterMessageUpdatesResponseClientError":c=a.value.getNewsletterMessageUpdatesClientErrors;switch(c.name){case"ItemNotFoundIQErrorResponse":f=c.value.errorIQErrorItemNotFoundMixin;e=f.code;a=f.text;return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),a));case"RateLimitedIQErrorResponse":f=c.value.errorIQErrorRateOverlimitMixin;e=f.code;a=f.text;return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),a));case"BadRequestIQErrorResponse":f=c.value.errorIQErrorBadRequestMixin;e=f.code;a=f.text;return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),a));case"SuspendedIQErrorResponse":f=c.value.errorIQErrorLockedMixin;e=f.code;a=f.text;return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),a));case"UnavailableForLegalReasonsResponse":f=c.value.errorIQErrorUnavailableForLegalReasonsGenericMixin;e=f.code;a=f.text;return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),a))}}});return j.apply(this,arguments)}function k(a){return a.after!=null?{messageUpdatesAfterMixin:{messageUpdatesAfter:a.after}}:{messageUpdatesBeforeMixin:{messageUpdatesBefore:c("WANullthrows")(a.before)}}}g.getNewsletterMessageUpdatesQuery=a}),98);
__d("WAWebNewsletterGetMessageUpdatesJob",["WAJobOrchestratorTypes","WAWebNewsletterBackendAddOnsUtils","WAWebNewsletterGetMessageUpdatesQuery","WAWebOrchestratorNonPersistedJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterMessageUpdates",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=c.ids,e=babelHelpers.objectWithoutPropertiesLoose(c,["ids"]);e=(yield d("WAWebNewsletterGetMessageUpdatesQuery").getNewsletterMessageUpdatesQuery(a,e));var f=e.updates;e=e.timestamp;f=(yield d("WAWebNewsletterBackendAddOnsUtils").getMsgsAndAddOnsFromUpdates(f,d("WAWebWidFactory").createWid(a),e));yield d("WAWebNewsletterBackendAddOnsUtils").updateAddOnDbRecords(babelHelpers["extends"]({},f,{ids:b,timestamp:e}));return babelHelpers["extends"]({},f,{timestamp:e,ids:b})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getNewsletterMessageUpdates=a}),98);
__d("WASmaxInNewslettersIQErrorNotAllowedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-allowed");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",405);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAllowedMixin=a}),98);
__d("WASmaxInNewslettersNotAllowedIQErrorResponseMixin",["WAResultOrError","WASmaxInNewslettersIQErrorNotAllowedMixin","WASmaxInNewslettersIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInNewslettersIQErrorNotAllowedMixin").parseIQErrorNotAllowedMixin(c.value);if(!c.success)return c;a=d("WASmaxInNewslettersIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorNotAllowedMixin:c.value},a.value))}g.parseNotAllowedIQErrorResponseMixin=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessagesClientErrors",["WAResultOrError","WASmaxInNewslettersBadRequestIQErrorResponseMixin","WASmaxInNewslettersItemNotFoundIQErrorResponseMixin","WASmaxInNewslettersNotAllowedIQErrorResponseMixin","WASmaxInNewslettersRateLimitedIQErrorResponseMixin","WASmaxInNewslettersSuspendedIQErrorResponseMixin","WASmaxInNewslettersUnavailableForLegalReasonsResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxInNewslettersBadRequestIQErrorResponseMixin").parseBadRequestIQErrorResponseMixin(a,b);if(c.success)return d("WAResultOrError").makeResult({name:"BadRequestIQErrorResponse",value:c.value});var e=d("WASmaxInNewslettersUnavailableForLegalReasonsResponseMixin").parseUnavailableForLegalReasonsResponseMixin(a,b);if(e.success)return d("WAResultOrError").makeResult({name:"UnavailableForLegalReasonsResponse",value:e.value});var f=d("WASmaxInNewslettersItemNotFoundIQErrorResponseMixin").parseItemNotFoundIQErrorResponseMixin(a,b);if(f.success)return d("WAResultOrError").makeResult({name:"ItemNotFoundIQErrorResponse",value:f.value});var g=d("WASmaxInNewslettersSuspendedIQErrorResponseMixin").parseSuspendedIQErrorResponseMixin(a,b);if(g.success)return d("WAResultOrError").makeResult({name:"SuspendedIQErrorResponse",value:g.value});var h=d("WASmaxInNewslettersRateLimitedIQErrorResponseMixin").parseRateLimitedIQErrorResponseMixin(a,b);if(h.success)return d("WAResultOrError").makeResult({name:"RateLimitedIQErrorResponse",value:h.value});b=d("WASmaxInNewslettersNotAllowedIQErrorResponseMixin").parseNotAllowedIQErrorResponseMixin(a,b);return b.success?d("WAResultOrError").makeResult({name:"NotAllowedIQErrorResponse",value:b.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["BadRequestIQErrorResponse","UnavailableForLegalReasonsResponse","ItemNotFoundIQErrorResponse","SuspendedIQErrorResponse","RateLimitedIQErrorResponse","NotAllowedIQErrorResponse"],[c,e,f,g,h,b])}g.parseGetNewsletterMessagesClientErrors=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessagesResponseClientError",["WAResultOrError","WASmaxInNewslettersGetNewsletterMessagesClientErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInNewslettersGetNewsletterMessagesClientErrors").parseGetNewsletterMessagesClientErrors(a,b);return!c.success?c:d("WAResultOrError").makeResult({getNewsletterMessagesClientErrors:c.value})}g.parseGetNewsletterMessagesResponseClientError=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessagesResponseServerError",["WAResultOrError","WASmaxInNewslettersIQErrorInternalServerErrorMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");if(!a.success)return a;c=d("WASmaxInNewslettersIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);return!c.success?c:d("WAResultOrError").makeResult({from:b.value,type:a.value,errorIQErrorInternalServerErrorMixin:c.value})}g.parseGetNewsletterMessagesResponseServerError=a}),98);
__d("WASmaxInNewslettersGetNewsletterMessagesResponseSuccess",["WAResultOrError","WASmaxInNewslettersNewsletterMessageResponsePayloadMixin","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"messages");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!a.success)return a;c=d("WASmaxInNewslettersNewsletterMessageResponsePayloadMixin").parseNewsletterMessageResponsePayloadMixin(c.value);return!c.success?c:d("WAResultOrError").makeResult({from:b.value,type:a.value,messagesNewsletterMessageResponsePayloadMixin:c.value})}g.parseGetNewsletterMessagesResponseSuccess=a}),98);
__d("WASmaxOutNewslettersAfterMixinMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messagesAfter;a=d("WASmaxJsx").smax("messages",{after:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAfterMixinMixin=a}),98);
__d("WASmaxOutNewslettersBeforeMixinMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messagesBefore;a=d("WASmaxJsx").smax("messages",{before:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBeforeMixinMixin=a}),98);
__d("WASmaxOutNewslettersBeforeOrAfterMixinMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutNewslettersAfterMixinMixin","WASmaxOutNewslettersBeforeMixinMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.beforeMixin)return d("WASmaxOutNewslettersBeforeMixinMixin").mergeBeforeMixinMixin(a,b.beforeMixin);if(b.afterMixin)return d("WASmaxOutNewslettersAfterMixinMixin").mergeAfterMixinMixin(a,b.afterMixin);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeBeforeOrAfterMixinMixinGroup=a}),98);
__d("WASmaxOutNewslettersNewsletterMessageRequestPayloadMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersBeforeOrAfterMixinMixinGroup","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messagesCount;a=a.beforeOrAfterMixinMixinGroupArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutNewslettersBeforeOrAfterMixinMixinGroup").mergeBeforeOrAfterMixinMixinGroup,d("WASmaxJsx").smax("messages",{count:d("WAWap").INT(b)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterMessageRequestPayloadMixin=a}),98);
__d("WASmaxOutNewslettersQueryNewsletterInviteParamsMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.anyKey;a=a.anyViewRole;b=d("WASmaxJsx").smax("smax$any",{type:"invite",key:d("WAWap").CUSTOM_STRING(b),view_role:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeQueryNewsletterInviteParamsMixin=a}),98);
__d("WASmaxOutNewslettersQueryNewsletterJIDParamsMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.anyJid;a=a.anyViewRole;b=d("WASmaxJsx").smax("smax$any",{type:"jid",jid:d("WAWap").JID(b),view_role:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeQueryNewsletterJIDParamsMixin=a}),98);
__d("WASmaxOutNewslettersQueryNewsletterJIDOrInviteParamsMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutNewslettersQueryNewsletterInviteParamsMixin","WASmaxOutNewslettersQueryNewsletterJIDParamsMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.queryNewsletterJIDParams)return d("WASmaxOutNewslettersQueryNewsletterJIDParamsMixin").mergeQueryNewsletterJIDParamsMixin(a,b.queryNewsletterJIDParams);if(b.queryNewsletterInviteParams)return d("WASmaxOutNewslettersQueryNewsletterInviteParamsMixin").mergeQueryNewsletterInviteParamsMixin(a,b.queryNewsletterInviteParams);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeQueryNewsletterJIDOrInviteParamsMixinGroup=a}),98);
__d("WASmaxOutNewslettersQueryNewsletterParamsMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersQueryNewsletterJIDOrInviteParamsMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.queryNewsletterJIDOrInviteParamsMixinGroupArgs;a=d("WASmaxOutNewslettersQueryNewsletterJIDOrInviteParamsMixinGroup").mergeQueryNewsletterJIDOrInviteParamsMixinGroup(d("WASmaxJsx").smax("smax$any",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeQueryNewsletterParamsMixin=a}),98);
__d("WASmaxOutNewslettersNewsletterMessageRequestIQPayloadMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutNewslettersNewsletterMessageRequestPayloadMixin","WASmaxOutNewslettersQueryNewsletterParamsMixin","WASmaxOutNewslettersSelfIQGetRequestMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.queryNewsletterParamsMixinArgs;a=a.newsletterMessageRequestPayloadMixinArgs;b=d("WASmaxOutNewslettersSelfIQGetRequestMixin").mergeSelfIQGetRequestMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxOutNewslettersNewsletterMessageRequestPayloadMixin").mergeNewsletterMessageRequestPayloadMixin(d("WASmaxOutNewslettersQueryNewsletterParamsMixin").mergeQueryNewsletterParamsMixin(d("WASmaxJsx").smax("messages",null),b),a)));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterMessageRequestIQPayloadMixin=a}),98);
__d("WASmaxOutNewslettersGetNewsletterMessagesRequest",["WASmaxJsx","WASmaxOutNewslettersNewsletterMessageRequestIQPayloadMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNewsletterMessageRequestIQPayloadMixin").mergeNewsletterMessageRequestIQPayloadMixin(d("WASmaxJsx").smax("iq",null),a);return a}g.makeGetNewsletterMessagesRequest=a}),98);
__d("WASmaxNewslettersGetNewsletterMessagesRPC",["WAComms","WASmaxInNewslettersGetNewsletterMessagesResponseClientError","WASmaxInNewslettersGetNewsletterMessagesResponseServerError","WASmaxInNewslettersGetNewsletterMessagesResponseSuccess","WASmaxOutNewslettersGetNewsletterMessagesRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutNewslettersGetNewsletterMessagesRequest").makeGetNewsletterMessagesRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInNewslettersGetNewsletterMessagesResponseSuccess").parseGetNewsletterMessagesResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetNewsletterMessagesResponseSuccess",value:g.value});case 7:h=d("WASmaxInNewslettersGetNewsletterMessagesResponseClientError").parseGetNewsletterMessagesResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetNewsletterMessagesResponseClientError",value:h.value});case 10:i=d("WASmaxInNewslettersGetNewsletterMessagesResponseServerError").parseGetNewsletterMessagesResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetNewsletterMessagesResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetNewsletterMessages",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetNewsletterMessagesRPC=a}),98);
__d("WAWebNewsletterQueryUtils",["WAJids","WAWebCommonNewsletterEnums","WAWebWid"],(function(a,b,c,d,e,f,g){function h(a){if(a==null)return"guest";switch(a){case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin:return"admin";case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner:return"owner";case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber:return"subscriber";default:return"guest"}}function a(a,b,e){e=j(e);if(c("WAWebWid").isNewsletter(a))return{jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs:{jidQueryIQPayload:{anyJid:d("WAJids").toNewsletterJid(a),anyViewRole:h(b),allNewsletterMetadataIQRequestPayloadMixinArgs:e}}};e.hasNewsletterMembershipField;e.hasNewsletterMutedField;e.newsletterPictureFieldMixinArgs;e=babelHelpers.objectWithoutPropertiesLoose(e,["hasNewsletterMembershipField","hasNewsletterMutedField","newsletterPictureFieldMixinArgs"]);return{jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs:{inviteQueryIQPayload:babelHelpers["extends"]({anyKey:a,anyViewRole:h(b)},e,{newsletterPreviewTypePictureFieldMixinArgs:{baseNewsletterPictureFieldMixinArgs:{}}})}}}function i(){return{pictureArgs:[{pictureType:"image"},{pictureType:"preview"}]}}function j(a){return a==null?{hasNewsletterCreationTimeField:!0,hasNewsletterNameField:!0,newsletterPictureFieldMixinArgs:i(),hasNewsletterDescriptionField:!0,hasNewsletterInviteLinkField:!0,hasNewsletterHandleField:!0,hasNewsletterSubscribersField:!0,hasNewsletterPrivacyField:!0,hasNewsletterVerificationField:!0,hasNewsletterLinkedAccountsField:!0,hasNewsletterMembershipField:!0,hasNewsletterMutedField:!0,hasNewsletterStateField:!0}:{hasNewsletterCreationTimeField:a.creationTime,hasNewsletterNameField:a.name,newsletterPictureFieldMixinArgs:a.picture===!0?i():void 0,hasNewsletterDescriptionField:a.description,hasNewsletterInviteLinkField:a.inviteLink,hasNewsletterHandleField:a.handle,hasNewsletterSubscribersField:a.subscribers,hasNewsletterPrivacyField:a.privacy,hasNewsletterVerificationField:a.verification,hasNewsletterLinkedAccountsField:a.linkedAccounts,hasNewsletterMembershipField:a.membership,hasNewsletterMutedField:a.membership,hasNewsletterStateField:a.state}}function b(a){return c("WAWebWid").isNewsletter(a)?{queryNewsletterJIDParams:{anyJid:d("WAJids").toNewsletterJid(a)}}:{queryNewsletterInviteParams:{anyKey:a}}}g.getNewsletterMetadataQueryParamArgs=a;g.getNewsletterMetadataArgs=j;g.getNewsletterMessagesQueryParams=b}),98);
__d("WAWebNewsletterGetMessagesQueryJob",["Promise","WALogger","WASmaxNewslettersGetNewsletterMessagesRPC","WATimeUtils","WAWebBackendErrors","WAWebNewsletterGatingUtils","WAWebNewsletterQueryUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[queryNewsletterMessages] "," messages requested"]);i=function(){return a};return a}function j(a){if((a==null?void 0:a.before)!=null)return{beforeMixin:{messagesBefore:a.before}};return(a==null?void 0:a.after)!=null?{afterMixin:{messagesAfter:a.after}}:void 0}function a(a,b,c){a=d("WAWebNewsletterQueryUtils").getNewsletterMessagesQueryParams(a);return k(a,b,c)}function c(a,b,c){a=d("WAWebNewsletterQueryUtils").getNewsletterMessagesQueryParams(a);return k(a,b,c)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e=j(e);c>d("WAWebNewsletterGatingUtils").getMaxMsgCountFromServer()&&d("WALogger").WARN(i(),c).tags("newsletter").sendLogs("newsletter-server-msg-count-exceeded");a=(yield d("WASmaxNewslettersGetNewsletterMessagesRPC").sendGetNewsletterMessagesRPC({queryNewsletterParamsMixinArgs:{queryNewsletterJIDOrInviteParamsMixinGroupArgs:a},newsletterMessageRequestPayloadMixinArgs:{messagesCount:Math.min(c,d("WAWebNewsletterGatingUtils").getMaxMsgCountFromServer()),beforeOrAfterMixinMixinGroupArgs:e}}));switch(a.name){case"GetNewsletterMessagesResponseSuccess":e=a.value.messagesNewsletterMessageResponsePayloadMixin;var f=e.message;e=e.t;return{messages:f,end:f.length<c,timestamp:(f=e)!=null?f:d("WATimeUtils").unixTime()};case"GetNewsletterMessagesResponseClientError":c=a.value.getNewsletterMessagesClientErrors;switch(c.name){case"ItemNotFoundIQErrorResponse":e=c.value.errorIQErrorItemNotFoundMixin;f=e.text;e=e.code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e,f);case"RateLimitedIQErrorResponse":e=c.value.errorIQErrorRateOverlimitMixin;f=e.text;e=e.code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e,f);case"BadRequestIQErrorResponse":e=c.value.errorIQErrorBadRequestMixin;f=e.text;e=e.code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e,f);case"SuspendedIQErrorResponse":e=c.value.errorIQErrorLockedMixin;f=e.text;e=e.code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e,f);case"UnavailableForLegalReasonsResponse":e=c.value.errorIQErrorUnavailableForLegalReasonsGenericMixin;f=e.text;e=e.code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e,f);case"NotAllowedIQErrorResponse":e=c.value.errorIQErrorNotAllowedMixin;f=e.text;c=e.code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(c,f)}break;case"GetNewsletterMessagesResponseServerError":e=a.value.errorIQErrorInternalServerErrorMixin;c=e.code;f=e.text;return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),f))}});return l.apply(this,arguments)}g.queryNewsletterMessagesByJid=a;g.queryNewsletterMessagesByInviteCode=c;g.queryNewsletterMessages=k}),98);
__d("WAWebNewsletterErrors",["WACustomError"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}((a=d("WACustomError")).customError("UnexpectedNonNewsletterJidError"));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnexpectedNonNewsletterJidError"));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("MissingNewsletterServerIdError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("NewsletterMediaUploadError"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnexpectedNewsletterQuotedParticipantMismatchError"));g.UnexpectedNonNewsletterJidError=b;g.UnexpectedNonNewsletterChatError=c;g.MissingNewsletterServerIdError=e;g.NewsletterMediaUploadError=f;g.UnexpectedNewsletterQuotedParticipantMismatchError=d}),98);
__d("WAWebNewsletterValidationUtils",["WAJids","WALogger","WAWebNewsletterErrors"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a valid newsletter JID"]);h=function(){return a};return a}function a(a){i(a);return d("WAJids").toNewsletterJid(a)}function i(a){var b=d("WAJids").validateNewsletterJid(a)!=null;if(!b){d("WALogger").ERROR(h(),a);throw new(d("WAWebNewsletterErrors").UnexpectedNonNewsletterJidError)()}}g.toNewsletterJidOrThrow=a;g.validateNewsletterJidOrThrow=i}),98);
__d("WAWebNewsletterGetMessagesJob",["WAJobOrchestratorTypes","WATimeUtils","WAWebJidToWid","WAWebNewsletterBackendAddOnsUtils","WAWebNewsletterGetMessagesQueryJob","WAWebNewsletterValidationUtils","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c,e){d("WAWebNewsletterValidationUtils").validateNewsletterJidOrThrow(a);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterMessages",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebNewsletterGetMessagesQueryJob").queryNewsletterMessagesByJid(a,c,e)),f=d("WAWebJidToWid").jidWithTypeToWid({jidType:"newsletter",newsletterJid:a});f=(yield d("WAWebNewsletterBackendAddOnsUtils").getMsgsAndAddOnsFromUpdates(b.messages,f,b.timestamp));return babelHelpers["extends"]({},f,{timestamp:d("WATimeUtils").castToUnixTime(b.timestamp)})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getNewsletterMessages=a}),98);
__d("WAWebMexFetchAllNewslettersMetadataJob",["WALogger","WAWebBackendErrors","WAWebMexClient","WAWebMexFetchAllNewslettersMetadataJobQuery.graphql","WAWebMexNewsletterParseUtils","WAWebMexUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched all newsletters job"]);i=function(){return a};return a}function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=h!==void 0?h:h=b("WAWebMexFetchAllNewslettersMetadataJobQuery.graphql");a=(yield d("WAWebMexClient").fetchQuery(a,{}));d("WALogger").LOG(i()).tags("GQL","MEX").devConsole({response:a});return a});return k.apply(this,arguments)}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebMexUtils").runWithErrorHandler(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield j()),b=a==null?void 0:a.xwa2_newsletter_subscribed;if(a==null||b==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"Mex unexpected null response for fetching all metadata");if(b.length===0)return{newsletters:[]};var c=[],e=[];b.filter(function(a){return a!=null}).map(function(a){var b=d("WAWebMexNewsletterParseUtils").parseMexNewsletterResponse(a);if(b!=null){(a==null?void 0:(a=a.state)==null?void 0:a.type)==="DELETED"?b!=null&&e.push({jid:b.idJid}):c.push(b)}});return c.length>0||e.length>0?{newsletters:c,deletedNewsletters:e.length>0?{id:e}:null}:{newsletters:[]}}),d("WAWebMexUtils").MexSupportedFeature.Newsletter)});return l.apply(this,arguments)}g.mexFetchAllNewsletters=j;g.handleMexGetAllNewsletters=a}),98);
__d("WAWebMexFetchNewsletterDehydratedJob",["WALogger","WAWebMexClient","WAWebMexFetchNewsletterDehydratedJobQuery.graphql","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched verification and subscribers count for ",""]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=h!==void 0?h:h=b("WAWebMexFetchNewsletterDehydratedJobQuery.graphql"),g=c("WAWebWid").isNewsletter(a)?"JID":"INVITE";g={input:{key:a,type:g,view_role:e}};e=(yield d("WAWebMexClient").fetchQuery(f,g));d("WALogger").LOG(i(),a).tags("GQL","MEX").devConsole({response:e});return e});return j.apply(this,arguments)}g.mexGetNewsletterDehydrated=a}),98);
__d("WAWebMexFetchNewsletterJob",["WALogger","WAWebMexClient","WAWebMexFetchNewsletterJobQuery.graphql","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] fetched get newsletter job for ",""]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=h!==void 0?h:h=b("WAWebMexFetchNewsletterJobQuery.graphql"),j=c("WAWebWid").isNewsletter(a)?"JID":"INVITE",k=j!=="INVITE";j={input:{key:a,type:j,view_role:e},fetch_viewer_metadata:f.fetchViewerMetadata,fetch_full_image:k,fetch_creation_time:f.fetchCreationTime===!0};e=(yield d("WAWebMexClient").fetchQuery(g,j));d("WALogger").LOG(i(),a).tags("GQL","MEX").devConsole({response:e});return e});return j.apply(this,arguments)}g.mexGetNewsletter=a}),98);
__d("WAWebMexNewsletterUtils",["WAJids","WAWebBackendErrors","WAWebCommonNewsletterEnums","WAWebMexFetchNewsletterDehydratedJob","WAWebMexFetchNewsletterJob","WAWebMexNewsletterParseUtils","WAWebMexUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebMexUtils").runWithErrorHandler(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,c,e;b=(b=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.jidQueryIQPayload)==null?void 0:b.anyJid;c=(c=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.inviteQueryIQPayload)==null?void 0:c.anyKey;e=(e=(e=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.jidQueryIQPayload)==null?void 0:e.anyViewRole)!=null?e:(e=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.inviteQueryIQPayload)==null?void 0:e.anyViewRole;b=b!=null?b:c;if(b!=null){l(a)?c=(yield d("WAWebMexFetchNewsletterDehydratedJob").mexGetNewsletterDehydrated(b,i(e))):c=(yield d("WAWebMexFetchNewsletterJob").mexGetNewsletter(b,i(e),{fetchViewerMetadata:j(a),fetchCreationTime:k("hasNewsletterCreationTimeField",a)}));if(c==null)return;b=d("WAWebMexNewsletterParseUtils").parseMexNewsletterResponse(c.xwa2_newsletter);return b}}),d("WAWebMexUtils").MexSupportedFeature.Newsletter)});return h.apply(this,arguments)}function i(a){if(a==null)return"GUEST";switch(a){case"admin":return"ADMIN";case"owner":return"OWNER";case"subscriber":return"SUBSCRIBER";default:return"GUEST"}}function c(a){switch(a){case"OWNER":return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner;case"SUBSCRIBER":return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber;case"ADMIN":return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin;case"GUEST":return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest}}function e(a){switch(a){case d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.All:return"ALL";case d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.Basic:return"BASIC";case d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.None:return"NONE";case d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.Blocklist:return"BLOCKLIST"}}function f(a){if(a!=null&&a.id!=null){var b,c,e;((b=a.state)==null?void 0:b.type)==="SUSPENDED"&&(e={error:"423"});((b=a.state)==null?void 0:b.type)==="NON_EXISTING"&&(c={error:"404"});return{jid:d("WAJids").toNewsletterJid(a.id),subscriberNotFoundMixin:c,newsletterSuspendedErrorMixin:e}}throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"unexpected_mex_mutation_response")}function j(a){var b,c;b=(b=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.jidQueryIQPayload)==null?void 0:(b=b.allNewsletterMetadataIQRequestPayloadMixinArgs)==null?void 0:b.hasNewsletterMutedField;if(b===!0)return!0;b=(c=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.deprecatedInviteQueryIQPayload)==null?void 0:(c=c.allNewsletterMetadataIQRequestPayloadMixinArgs)==null?void 0:c.hasNewsletterMutedField;if(b===!0)return!0;c=(c=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.jidQueryIQPayload)==null?void 0:(b=c.allNewsletterMetadataIQRequestPayloadMixinArgs)==null?void 0:b.hasNewsletterMembershipField;if(c===!0)return!0;c=(b=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.deprecatedInviteQueryIQPayload)==null?void 0:(a=b.allNewsletterMetadataIQRequestPayloadMixinArgs)==null?void 0:a.hasNewsletterMembershipField;return c===!0?!0:!1}function k(a,b){var c;c=(c=(c=b.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.jidQueryIQPayload)==null?void 0:c.allNewsletterMetadataIQRequestPayloadMixinArgs)!=null?c:b.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.inviteQueryIQPayload;return c==null||((b=Object.getOwnPropertyDescriptor(c,a))==null?void 0:b.value)===!0}function l(a){a=a.jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs.jidQueryIQPayload;if(a!=null){a=a.allNewsletterMetadataIQRequestPayloadMixinArgs;return a.hasNewsletterCreationTimeField!==!0&&a.hasNewsletterNameField!==!0&&a.hasNewsletterDescriptionField!==!0&&a.hasNewsletterInviteLinkField!==!0&&a.hasNewsletterHandleField!==!0&&a.hasNewsletterPrivacyField!==!0&&a.hasNewsletterLinkedAccountsField!==!0&&a.hasNewsletterStateField!==!0&&a.newsletterPictureFieldMixinArgs==null&&a.hasNewsletterMembershipField!==!0&&a.hasNewsletterMutedField!==!0&&a.hasNewsletterVerificationField===!0&&a.hasNewsletterSubscribersField===!0}return!1}g.handleMexGetNewsletter=a;g.mapViewRoleToMexViewRole=i;g.mapRoleToMembership=c;g.mapReactionCodesSettingToMexInput=e;g.convertMutationResponse=f}),98);
__d("WAWebMexUpdateNewsletterJob",["WALogger","WAWebMexClient","WAWebMexNewsletterUtils","WAWebMexUpdateNewsletterJobMutation.graphql","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] newsletter updated via mex"]);i=function(){return a};return a}function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){var j=h!==void 0?h:h=b("WAWebMexUpdateNewsletterJobMutation.graphql");a={newsletter_id:a,updates:{name:c,description:e,picture:f,settings:g!=null?{reaction_codes:{value:d("WAWebMexNewsletterUtils").mapReactionCodesSettingToMexInput(g)}}:null}};c=(yield d("WAWebMexClient").fetchQuery(j,a));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({response:c});return c});return j.apply(this,arguments)}g.mexUpdateNewsletter=a}),98);
__d("WAWebNewsletterMetadataQueryJob",["WABase64","WAWebMexFetchAllNewslettersMetadataJob","WAWebMexNewsletterParseUtils","WAWebMexNewsletterUtils","WAWebMexUpdateNewsletterJob","WAWebMexUtils","WAWebNewsletterQueryUtils","WAWebNewsletterRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){var a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebMexFetchAllNewslettersMetadataJob").handleMexGetAllNewsletters()});return function(){return a.apply(this,arguments)}}();return d("WAWebNewsletterRpcUtils").runWithBackoff(a)}function c(a,b){var c=d("WAWebNewsletterQueryUtils").getNewsletterMetadataQueryParamArgs(a,b,{creationTime:!0,name:!0,picture:!0,description:!0,inviteLink:!0,handle:!0,subscribers:!0,privacy:!0,verification:!0,linkedAccounts:!0,state:!0});return d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return h(c)})}function e(a,b,c){var e=d("WAWebNewsletterQueryUtils").getNewsletterMetadataQueryParamArgs(a,b,c);return d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return h(e)})}function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebMexNewsletterUtils").handleMexGetNewsletter(a)});return i.apply(this,arguments)}function f(a,b,c){return k(a,b,c)}function j(a){return{idJid:a,newsletterMutedMetadataMixin:null,newsletterCreationTimeMetadataMixin:null,newsletterNameMetadataMixin:null,newsletterPictureMetadataMixin:null,newsletterDescriptionMetadataMixin:null,newsletterInviteLinkMetadataMixin:null,newsletterHandleMetadataMixin:null,newsletterSubscribersMetadataMixin:null,newsletterPrivacyMetadataMixin:null,newsletterVerificationMetadataMixin:null,newsletterLinkedAccountsMetadataMixin:null,newsletterMembershipMetadataMixin:null,newsletterStateMetadataMixin:null}}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.editName,f=b.editDescription,g=b.editPicture;b=b.editReactionCodesSetting;var h=c.name,i=c.description,j=c.picture;c=c.reactionCodesSetting;var k;j!=null&&(k=d("WABase64").encodeB64(j));var l=m(g,k),n=m(e,h),o=m(f,i),p=b===!0?c:null;j=(yield d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return d("WAWebMexUtils").runWithErrorHandler(function(){return d("WAWebMexUpdateNewsletterJob").mexUpdateNewsletter(a,n,o,l,p)},d("WAWebMexUtils").MexSupportedFeature.Newsletter)}));return d("WAWebMexNewsletterParseUtils").parseMexNewsletterResponse(j.xwa2_newsletter_update)});return l.apply(this,arguments)}function m(a,b){if(a===!0)return b!=null?b:""}g.queryAllNewslettersMetadata=a;g.queryNewsletterMetadataByInviteCode=c;g.queryNewsletterMetadataByJid=e;g.editNewsletterMetadataQuery=f;g.emptyNewsletterMetadataType=j}),98);
__d("WAWebNewsletterMetadataJob",["Promise","WAJobOrchestratorTypes","WAWebNewsletterCreateJob","WAWebNewsletterMetadataQueryJob","WAWebOrchestratorNonPersistedJob","WAWebSchemaNewsletterMetadata","WAWebSchemaProfilePicThumb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getAllNewslettersMetadata",function(){return d("WAWebNewsletterMetadataQueryJob").queryAllNewslettersMetadata()},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function c(a,b,c){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewsletterMetadata",function(){return d("WAWebNewsletterMetadataQueryJob").queryNewsletterMetadataByJid(a,b,c)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function e(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateNewsletterMetadata",function(){return Array.isArray(a)?d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().bulkCreateOrMerge(a):d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().createOrMerge(a.id,a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function f(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("deleteNewsletterMetadata",function(){return d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().remove(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function i(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("deleteNewsletterPicture",function(){return d("WAWebSchemaProfilePicThumb").getProfilePicThumbTable().remove(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function j(a,b,c){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("editNewsletterMetadata",function(){var e=c.picture;e=d("WAWebNewsletterCreateJob").encodePicture(e);return d("WAWebNewsletterMetadataQueryJob").editNewsletterMetadataQuery(a,b,babelHelpers["extends"]({},c,{picture:e}))},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function k(a,c,e,f){f===void 0&&(f=d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateNewsletterMessageDeliveryUpdates",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var f=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().get(a));if(f==null)return(h||(h=b("Promise"))).resolve();var g=f.messageDeliveryUpdates,i=g===void 0?new Map():g;e.forEach(function(a){i==null?void 0:i["delete"](a)});c.forEach(function(a){var b=a.id;a=babelHelpers.objectWithoutPropertiesLoose(a,["id"]);i==null?void 0:i.set(b,a)});f.messageDeliveryUpdates=i;return d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().merge(a,f)}),{priority:f}).waitUntilCompleted()}function l(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("suspendNewsletter",function(){return d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().merge(a,{id:a,suspended:!0})},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function m(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("geosuspendNewsletter",function(){return d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().merge(a,{id:a,suspended:!0,geosuspended:!0})},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getAllNewslettersMetadata=a;g.getNewsletterMetadata=c;g.updateNewsletterMetadata=e;g.deleteNewsletterMetadata=f;g.deleteNewsletterPicture=i;g.editNewsletterMetadata=j;g.updateNewsletterMessageDeliveryUpdates=k;g.suspendNewsletter=l;g.geosuspendNewsletter=m}),98);
__d("WASmaxInMessagePublishNewsletterResponseNegative",["WASmaxInMessagePublishNegativeAckMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxInMessagePublishNegativeAckMixin").parseNegativeAckMixin(a,b);return!c.success?c:c}g.parseNewsletterResponseNegative=a}),98);
__d("WASmaxInMessagePublishNewsletterResponseSuccess",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"server_id",99,2147476647);if(!c.success)return c;a=d("WASmaxInMessagePublishAckMixin").parseAckMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({serverId:c.value},a.value))}g.parseNewsletterResponseSuccess=a}),98);
__d("WASmaxOutMessagePublishNewsletterPollVoteMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypePollVoteMixin"],(function(a,b,c,d,e,f,g){function h(a){a=a.voteElementValue;a=d("WASmaxJsx").smax("vote",null,a);return a}function i(a){a=a.voteArgs;a=d("WASmaxOutMessagePublishContentTypePollVoteMixin").mergeContentTypePollVoteMixin(d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("votes",null,d("WASmaxChildren").REPEATED_CHILD(h,a,0,1e3))));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeNewsletterPollVoteVotesVote=h;g.mergeNewsletterPollVoteMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterReactionMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeReactionMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.reactionCode;a=d("WASmaxOutMessagePublishContentTypeReactionMixin").mergeContentTypeReactionMixin(d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("reaction",{code:d("WAWap").CUSTOM_STRING(a)})));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterReactionMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterReactionRevokeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeReactionMixin","WASmaxOutMessagePublishRevokeMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutMessagePublishContentTypeReactionMixin").mergeContentTypeReactionMixin(d("WASmaxOutMessagePublishRevokeMixin").mergeRevokeMixin(d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("reaction",null))));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterReactionRevokeMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterReactionOrReactionRevokeOrPollVoteMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishNewsletterPollVoteMixin","WASmaxOutMessagePublishNewsletterReactionMixin","WASmaxOutMessagePublishNewsletterReactionRevokeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.newsletterReaction)return d("WASmaxOutMessagePublishNewsletterReactionMixin").mergeNewsletterReactionMixin(a,b.newsletterReaction);if(b.isNewsletterReactionRevoke)return d("WASmaxOutMessagePublishNewsletterReactionRevokeMixin").mergeNewsletterReactionRevokeMixin(a);if(b.newsletterPollVote)return d("WASmaxOutMessagePublishNewsletterPollVoteMixin").mergeNewsletterPollVoteMixin(a,b.newsletterPollVote);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeNewsletterReactionOrReactionRevokeOrPollVoteMixinGroup=a}),98);
__d("WASmaxOutMessagePublishNewsletterClientAndServerIDMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishNewsletterReactionOrReactionRevokeOrPollVoteMixinGroup","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageId,c=a.messageServerId;a=a.newsletterReactionOrReactionRevokeOrPollVoteMixinGroupArgs;b=d("WASmaxOutMessagePublishNewsletterReactionOrReactionRevokeOrPollVoteMixinGroup").mergeNewsletterReactionOrReactionRevokeOrPollVoteMixinGroup(d("WASmaxJsx").smax("message",{id:d("WAWap").STANZA_ID(b),server_id:d("WAWap").INT(c)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterClientAndServerIDMixin=a}),98);
__d("WASmaxOutMessagePublishAdminEditMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"3"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAdminEditMixin=a}),98);
__d("WASmaxOutMessagePublishPayloadMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.plaintextElementValue;a=d("WASmaxJsx").smax("plaintext",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePayloadMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterMediaMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishPayloadMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.plaintextMediatype;a=a.payloadMixinArgs;b=d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishPayloadMixin").mergePayloadMixin(d("WASmaxJsx").smax("plaintext",{mediatype:d("WAWap").CUSTOM_STRING(b)}),a)));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterMediaMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterTextMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishPayloadMixin"],(function(a,b,c,d,e,f,g){function h(a){a=a.payloadMixinArgs;a=d("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishPayloadMixin").mergePayloadMixin(d("WASmaxJsx").smax("plaintext",null),a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterTextMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterTextOrMediaMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishNewsletterMediaMixin","WASmaxOutMessagePublishNewsletterTextMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.newsletterText)return d("WASmaxOutMessagePublishNewsletterTextMixin").mergeNewsletterTextMixin(a,b.newsletterText);if(b.newsletterMedia)return d("WASmaxOutMessagePublishNewsletterMediaMixin").mergeNewsletterMediaMixin(a,b.newsletterMedia);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeNewsletterTextOrMediaMixinGroup=a}),98);
__d("WASmaxOutMessagePublishNewsletterEditMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAdminEditMixin","WASmaxOutMessagePublishNewsletterTextOrMediaMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.newsletterTextOrMediaMixinGroupArgs;a=d("WASmaxOutMessagePublishNewsletterTextOrMediaMixinGroup").mergeNewsletterTextOrMediaMixinGroup(d("WASmaxOutMessagePublishAdminEditMixin").mergeAdminEditMixin(d("WASmaxJsx").smax("message",null)),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterEditMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterMediaPublishMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishNewsletterMediaMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageMediaId;b=d("WASmaxOutMessagePublishNewsletterMediaMixin").mergeNewsletterMediaMixin(d("WASmaxJsx").smax("message",{media_id:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterMediaPublishMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterPollCreationMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypePollCreationMixin","WASmaxOutMessagePublishPayloadMixin"],(function(a,b,c,d,e,f,g){function h(a){a=a.payloadMixinArgs;a=d("WASmaxOutMessagePublishContentTypePollCreationMixin").mergeContentTypePollCreationMixin(d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishPayloadMixin").mergePayloadMixin(d("WASmaxJsx").smax("plaintext",null),a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterPollCreationMixin=a}),98);
__d("WASmaxOutMessagePublishAdminRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"8"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAdminRevokeMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterRevokeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAdminRevokeMixin","WASmaxOutMessagePublishContentTypeTextMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(d("WASmaxOutMessagePublishAdminRevokeMixin").mergeAdminRevokeMixin(d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("plaintext",null))));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterRevokeMixin=a}),98);
__d("WASmaxOutMessagePublishNewsletterClientIdContent",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishNewsletterEditMixin","WASmaxOutMessagePublishNewsletterMediaPublishMixin","WASmaxOutMessagePublishNewsletterPollCreationMixin","WASmaxOutMessagePublishNewsletterRevokeMixin","WASmaxOutMessagePublishNewsletterTextMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.newsletterEdit)return d("WASmaxOutMessagePublishNewsletterEditMixin").mergeNewsletterEditMixin(a,b.newsletterEdit);if(b.newsletterText)return d("WASmaxOutMessagePublishNewsletterTextMixin").mergeNewsletterTextMixin(a,b.newsletterText);if(b.newsletterMediaPublish)return d("WASmaxOutMessagePublishNewsletterMediaPublishMixin").mergeNewsletterMediaPublishMixin(a,b.newsletterMediaPublish);if(b.isNewsletterRevoke)return d("WASmaxOutMessagePublishNewsletterRevokeMixin").mergeNewsletterRevokeMixin(a);if(b.newsletterPollCreation)return d("WASmaxOutMessagePublishNewsletterPollCreationMixin").mergeNewsletterPollCreationMixin(a,b.newsletterPollCreation);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeNewsletterClientIdContent=a}),98);
__d("WASmaxOutMessagePublishNewsletterClientIDMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishNewsletterClientIdContent","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageId;a=a.newsletterClientIdContentArgs;b=d("WASmaxOutMessagePublishNewsletterClientIdContent").mergeNewsletterClientIdContent(d("WASmaxJsx").smax("message",{id:d("WAWap").STANZA_ID(b)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNewsletterClientIDMixin=a}),98);
__d("WASmaxOutMessagePublishClientNewsletterOrNewsletterAndServerIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishNewsletterClientAndServerIDMixin","WASmaxOutMessagePublishNewsletterClientIDMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.newsletterClientID)return d("WASmaxOutMessagePublishNewsletterClientIDMixin").mergeNewsletterClientIDMixin(a,b.newsletterClientID);if(b.newsletterClientAndServerID)return d("WASmaxOutMessagePublishNewsletterClientAndServerIDMixin").mergeNewsletterClientAndServerIDMixin(a,b.newsletterClientAndServerID);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeClientNewsletterOrNewsletterAndServerIDMixinGroup=a}),98);
__d("WASmaxOutMessagePublishNewsletterRequest",["WASmaxJsx","WASmaxOutMessagePublishClientNewsletterOrNewsletterAndServerIDMixinGroup","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageTo;a=a.clientNewsletterOrNewsletterAndServerIDMixinGroupArgs;b=d("WASmaxOutMessagePublishClientNewsletterOrNewsletterAndServerIDMixinGroup").mergeClientNewsletterOrNewsletterAndServerIDMixinGroup(d("WASmaxJsx").smax("message",{to:d("WAWap").JID(b)}),a);return b}g.makeNewsletterRequest=a}),98);
__d("WASmaxMessagePublishNewsletterRPC",["WAComms","WASmaxInMessagePublishNewsletterResponseNegative","WASmaxInMessagePublishNewsletterResponseSuccess","WASmaxOutMessagePublishNewsletterRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutMessagePublishNewsletterRequest").makeNewsletterRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInMessagePublishNewsletterResponseNegative").parseNewsletterResponseNegative(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"NewsletterResponseNegative",value:g.value});case 7:h=d("WASmaxInMessagePublishNewsletterResponseSuccess").parseNewsletterResponseSuccess(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"NewsletterResponseSuccess",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Newsletter",{Negative:g,Success:h}));case 11:case"end":return i.stop()}},null,this)}g.sendNewsletterRPC=a}),98);
__d("WAWebNewsletterSendMessageQueryJob",["WASmaxMessagePublishNewsletterRPC","WAStanzaUtils","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebNewsletterValidationUtils").validateNewsletterJidOrThrow(a.newsletterJid);a={messageTo:a.newsletterJid,clientNewsletterOrNewsletterAndServerIDMixinGroupArgs:i(a)};a=(yield d("WASmaxMessagePublishNewsletterRPC").sendNewsletterRPC(a));switch(a.name){case"NewsletterResponseSuccess":return{success:!0,ack:{t:a.value.t},serverId:a.value.serverId};case"NewsletterResponseNegative":return{success:!1,ack:{t:a.value.t,error:a.value.error}}}});return h.apply(this,arguments)}function i(a){switch(a.type){case"reaction":return j(a);case"pollVote":return k(a);default:return{newsletterClientID:l(a)}}}function j(a){var b=a.reactionCode;b=b!=null&&b!==""?{newsletterReaction:{reactionCode:b}}:{isNewsletterReactionRevoke:!0};return{newsletterClientAndServerID:{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),messageServerId:a.parentMsgServerId,newsletterReactionOrReactionRevokeOrPollVoteMixinGroupArgs:b}}}function k(a){var b={voteArgs:a.votes.map(function(a){return{voteElementValue:a}})};return{newsletterClientAndServerID:{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),messageServerId:a.parentMsgServerId,newsletterReactionOrReactionRevokeOrPollVoteMixinGroupArgs:{newsletterPollVote:b}}}}function l(a){switch(a.type){case"edit":return{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),newsletterClientIdContentArgs:{newsletterEdit:{newsletterTextOrMediaMixinGroupArgs:{newsletterText:{payloadMixinArgs:{plaintextElementValue:a.payload}}}}}};case"revoke":return{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),newsletterClientIdContentArgs:{isNewsletterRevoke:!0}};case"pollCreation":return{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),newsletterClientIdContentArgs:{newsletterPollCreation:{payloadMixinArgs:{plaintextElementValue:a.payload}}}};case"text":return{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),newsletterClientIdContentArgs:{newsletterText:{payloadMixinArgs:{plaintextElementValue:a.payload}}}};case"audio":case"avatar_sticker":case"document":case"gif":case"image":case"ptt":case"sticker":case"url":case"vcard":case"video":return{messageId:d("WAStanzaUtils").toStanzaId(a.messageId),newsletterClientIdContentArgs:{newsletterMediaPublish:{plaintextMediatype:a.type,payloadMixinArgs:{plaintextElementValue:a.payload},messageMediaId:a.mediaHandle}}};default:a.type;throw c("err")("Wrong code path for "+a.type)}}g.querySendNewsletterMessage=a}),98);
__d("WAWebNewsletterSendMessageJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebNewsletterSendMessageQueryJob","WAWebNewsletterValidationUtils","WAWebOrchestratorNonPersistedJob","WAWebOutgoingMessage","WAWebProtobufsE2E.pb","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Unsupported media type"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to get media type from protobuf"]);j=function(){return a};return a}function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendNewsletterMessage",function(){return k(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function k(a){d("WAWebNewsletterValidationUtils").validateNewsletterJidOrThrow(a.newsletterJid);switch(a.type){case"edit":var e=d("WAWebOutgoingMessage").createOutgoingMsgModelProtobuf(a.msg);e=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,e);return d("WAWebNewsletterSendMessageQueryJob").querySendNewsletterMessage({type:"edit",messageId:a.msg.id.id,newsletterJid:a.newsletterJid,payload:e.readByteArray()});case"pollCreation":case"text":case"media":e=d("WAWebOutgoingMessage").createOutgoingMsgModelProtobuf(a.msg);var f=a.type==="media"?{mediaHandle:a.mediaHandle,type:l(e)}:{type:a.type};return d("WAWebNewsletterSendMessageQueryJob").querySendNewsletterMessage(babelHelpers["extends"]({},f,{messageId:a.msg.id.id,newsletterJid:a.newsletterJid,payload:d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,e).readByteArray()}));case"revoke":return d("WAWebNewsletterSendMessageQueryJob").querySendNewsletterMessage({messageId:a.messageId,newsletterJid:a.newsletterJid,type:"revoke",isContentMedia:a.isContentMedia});case"reaction":return d("WAWebNewsletterSendMessageQueryJob").querySendNewsletterMessage({type:"reaction",newsletterJid:a.newsletterJid,reactionCode:a.reactionCode,messageId:a.msg.id.id,parentMsgServerId:a.parentMsgServerId});case"pollVote":return d("WAWebNewsletterSendMessageQueryJob").querySendNewsletterMessage({type:"pollVote",newsletterJid:a.newsletterJid,votes:a.votes,messageId:a.msg.id.id,parentMsgServerId:a.parentMsgServerId});default:a.type;return(h||(h=b("Promise"))).reject(c("err")("Unexpected message type: "+a.type))}}function l(a){var b=d("WAWebBackendJobsCommon").mediaTypeFromProtobuf(a);if(b==null){d("WALogger").ERROR(j()).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-media-type-from-protobuf");throw c("err")("Failed to get media type from protobuf")}switch(b){case d("WAWebBackendJobs.flow").EncMediaType.Audio:return"audio";case d("WAWebBackendJobs.flow").EncMediaType.Document:return"document";case d("WAWebBackendJobs.flow").EncMediaType.Gif:return"gif";case d("WAWebBackendJobs.flow").EncMediaType.Image:return"image";case d("WAWebBackendJobs.flow").EncMediaType.Ptt:return"ptt";case d("WAWebBackendJobs.flow").EncMediaType.Sticker:return"sticker";case d("WAWebBackendJobs.flow").EncMediaType.Url:return"url";case d("WAWebBackendJobs.flow").EncMediaType.VCard:return"vcard";case d("WAWebBackendJobs.flow").EncMediaType.Video:return"video";default:d("WALogger").ERROR(i()).tags("newsletter").devConsole(a).sendLogs("newsletter-unsupported-media-type-"+b);throw c("err")("Unsupported media type "+b)}}g.sendNewsletterMessageJob=a;g.sendNewsletterMessage=k}),98);
__d("WAWebNewsletterUpdateMsgsRecordsJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebFrontendMsgGetters","WAWebMessageProcessorCache","WAWebMsgDataFromModel","WAWebMsgGetters","WAWebOrchestratorNonPersistedJob","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[updateNewsletterMsgRecord] Msg not found, skipping"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[updateNewsletterMsgRecord] Called on a non-newsletter msg"]);j=function(){return a};return a}function a(a){return k(a).waitUntilCompleted()}function k(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("addNewsletterMsgsRecords",function(){return a.length===0?(h||(h=b("Promise"))).resolve():d("WAWebMessageProcessorCache").messageProcessorCache.addMessages(a.map(function(a){return{msg:a}}),!0)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION})}function c(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateNewsletterMsgRecord",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebMsgGetters").getIsNewsletterMsg(a)){d("WALogger").ERROR(j()).devConsole(a.id);return}if((yield d("WAWebSchemaMessage").getMessageTable().get(a.id.toString()))==null){d("WALogger").WARN(i()).devConsole(a.id);return}var b=a.serverId,c=d("WAWebFrontendMsgGetters").getChat(a),e=l(d("WAWebMsgDataFromModel").msgDataFromMsgModel(a));e=d("WAWebDBMessageSerialization").dbRowFromMessage(e);b!=null&&(e.internalId=d("WAWebDBMessageUtils").craftInternalId(c.id.toJid(),b));yield d("WAWebSchemaMessage").getMessageTable().merge(a.id.toString(),e)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function l(a){delete a.serverId;delete a.rowId;delete a.messageRangeIndex;return a}g.addNewsletterMsgsRecords=a;g.addNewsletterMsgsRecordsJob=k;g.updateNewsletterMsgRecord=c}),98);
__d("WAWebCRUDOperationsNewsletterPollsVotes",["WAWebModelStorageUtils","WAWebSchemaNewsletterPollsVotes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["newsletter-polls-votes"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];b;var c=new Map(a.map(function(a){return[a.parentMsgKey,a]})),d=(yield b.bulkGet(a.map(function(a){return a.parentMsgKey}))).filter(Boolean);d.forEach(function(a){var b=c.get(a.parentMsgKey);b!=null&&b.serverTimestamp<a.serverTimestamp&&c["delete"](a.parentMsgKey)});yield b.bulkCreateOrReplace(Array.from(c.values()))});return function(a){return c.apply(this,arguments)}}())}function c(a){return d("WAWebSchemaNewsletterPollsVotes").getTable().bulkRemove(a)}function e(a){return d("WAWebSchemaNewsletterPollsVotes").getTable().get(a)}g.bulkCreateOrUpdateVotes=a;g.bulkDeleteVotes=c;g.getVote=e}),98);
__d("WAWebNewsletterMapMsgAndAddOns",["Promise","WAWebBackendApi","WAWebNewsletterBackendMsgUtils","WAWebNewsletterDBUtils","WAWebNewsletterPollsVotesUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WAWebBackendApi").frontendSendAndReceive("findMsgKeyFromServerId",{from:a,serverId:c}));if(e!=null)return(h||(h=b("Promise"))).resolve(e);e=(yield d("WAWebNewsletterDBUtils").getMessageByServerId(c,a.toJid()));return e==null?void 0:e.id});return j.apply(this,arguments)}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e,f,g,h;e=(e=a.newsletterReactionsMixin)==null?void 0:e.reactionsReaction;f=(f=a.newsletterPollVotesMixin)==null?void 0:f.votesVote;g=d("WAWebNewsletterBackendMsgUtils").mapNewsletterMsgToMsgData(a,b,((g=e==null?void 0:e.length)!=null?g:0)>0,c);h=(h=g==null?void 0:g.id)!=null?h:yield i(b,a.serverId);a=(b=a.newsletterViewsCountMixin)==null?void 0:b.viewsCountCount;return{msgData:g,reactionData:l(e,h,c),pollVoteData:m(f,h,c),id:h,viewCount:a}});return k.apply(this,arguments)}function l(a,b,c){return b!=null&&a!=null&&a.length>0?{parentMsgKey:b,serverTimestamp:c,emojiCountMap:a.reduce(function(a,b){return a.set(b.code,b.count)},new Map())}:null}function m(a,b,c){return b==null||a==null||a.length===0?null:{parentMsgKey:b,serverTimestamp:c,voteCountMap:a.reduce(function(a,b){return a.set(d("WAWebNewsletterPollsVotesUtils").bufferToHex(b.elementValue),b.count)},new Map())}}g.mapMsgAndAddOns=a}),98);
__d("WAWebNewsletterPollsUtils",["WATimeUtils","WAWebNewsletterGatingUtils"],(function(a,b,c,d,e,f,g){function a(a,b,c){var e,f=new Map();e=Array.from((e=a==null?void 0:(e=a.pollVotesCountMap)==null?void 0:e.values())!=null?e:[]);var g=e.reduce(function(a,b){return a+b},0);e=Math.max.apply(Math,e);var i=a==null?void 0:a.pollVotersMap;for(var b=b,j=Array.isArray(b),k=0,b=j?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l,m,n;if(j){if(k>=b.length)break;n=b[k++]}else{k=b.next();if(k.done)break;n=k.value}n=n;l=Boolean(a==null?void 0:(l=a.myVote)==null?void 0:l.has(n.localId));m=Math.max((m=a==null?void 0:(m=a.pollVotesCountMap)==null?void 0:m.get(n.localId))!=null?m:0,l?1:0);var o=i==null?void 0:i.get(n.localId),p=l?h(c,a==null?void 0:a.myVoteTs):null;p=(p!=null?[p]:[]).concat((p=o==null?void 0:o.contacts)!=null?p:[]);f.set(n,{isVotedForByMe:l,isCurrentLeader:e>0&&m===e,percentageOfAll:g===0?0:m/g,percentageOfMostVotedForOption:e===0?0:m/e,votes:d("WAWebNewsletterGatingUtils").isNewsletterPollsVotersEnabled()?p.concat((n=o==null?void 0:o.others)!=null?n:[]):[],count:m,mode:"newsletter",contactVoters:p,otherVoters:(l=o==null?void 0:o.others)!=null?l:[]})}return f}function b(a){return{parentMsgKey:a.parentMsgKey.toString(),serverTimestamp:a.serverTimestamp,votesMap:a.voteCountMap}}function h(a,b){return a==null?null:{contact:a,id:a.id,time:(a=d("WATimeUtils").castMillisTimeToUnixTime(b))!=null?a:d("WATimeUtils").unixTime()}}g.aggregateNewsletterVotes=a;g.mapNewsletterVoteToDbRecord=b}),98);
__d("WAWebNewsletterBackendAddOnsUtils",["Promise","WAWebCRUDOperationsNewsletterPollsVotes","WAWebDBProcessEditProtocolMsgs","WAWebModelStorageUtils","WAWebNewsletterGatingUtils","WAWebNewsletterMapMsgAndAddOns","WAWebNewsletterMsgEditUtils","WAWebNewsletterPollsUtils","WAWebNewsletterReactionUtils","WAWebSchemaMessage","WAWebdbCRUDOperationsNewsletterReaction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.msgs,e=a.reactions,f=a.reactionIdsToRemove,g=a.timestamp,h=a.ids,i=a.viewCounts;a=a.pollVotes;e.length>0&&(yield d("WAWebdbCRUDOperationsNewsletterReaction").createOrUpdateNewsletterReactions(e.map(d("WAWebNewsletterReactionUtils").mapReactionDataToDbRecord).filter(Boolean)));f.length>0&&(yield d("WAWebdbCRUDOperationsNewsletterReaction").bulkRemoveNewsletterReactionsForParentMsg(f));a.length>0&&(yield d("WAWebCRUDOperationsNewsletterPollsVotes").bulkCreateOrUpdateVotes(a.map(d("WAWebNewsletterPollsUtils").mapNewsletterVoteToDbRecord)));if(d("WAWebNewsletterGatingUtils").isNewsletterBackwardsMessageEditingEnabled()&&c.length>0){var j=new Map(c.map(function(a){return[a.id.toString(),a]})),k=[];e=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(c.map(function(a){return a.id.toString()})));e.forEach(function(a){if(a==null)return;var b=j.get(a.id);(b==null?void 0:b.t)!=null&&b.t>a.t&&k.push(b)});yield d("WAWebDBProcessEditProtocolMsgs").processEditProtocolMsgs(k.map(d("WAWebNewsletterMsgEditUtils").mapMsgToEditProtocolMsgLegacy))}h.length>0&&(yield d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.bulkGet(h.map(function(a){return a.toString()})).then(function(a){return a.filter(Boolean)}));b=b.map(function(a){var b=a.id;a=a.viewCount;return{id:b,lastUpdateFromServerTs:g,viewCount:(b=i==null?void 0:i.get(b))!=null?b:a}});return a.bulkCreateOrMerge(b)});return function(b){return a.apply(this,arguments)}}()))});return i.apply(this,arguments)}function c(a,c,e){return a.reduce(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a);b=(yield d("WAWebNewsletterMapMsgAndAddOns").mapMsgAndAddOns(b,c,e));if(b==null)return a;var f=b.msgData,g=b.reactionData,h=b.id,i=b.viewCount;b=b.pollVoteData;h!=null&&a.ids.push(h);f!=null&&a.msgs.push(f);i!=null&&h!=null&&a.viewCounts.set(h.toString(),i);g==null?h!=null&&a.reactionIdsToRemove.push(h.toString()):a.reactions.push(g);b!=null&&a.pollVotes.push(b);return a});return function(b,c){return a.apply(this,arguments)}}(),(h||(h=b("Promise"))).resolve({ids:[],reactions:[],reactionIdsToRemove:[],msgs:[],viewCounts:new Map(),pollVotes:[]}))}g.updateAddOnDbRecords=a;g.getMsgsAndAddOnsFromUpdates=c}),98);
__d("WAWebNewsletterMessageDeliveryUpdateToModelUtils",["Promise","WALogger","WAWebNewsletterDBUtils","WAWebNewsletterGetMessagesJob","WAWebNewsletterUpdateMsgsRecordsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][getMessageDeliveryUpdatesModelToUpdate] couldn't retrieve message"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][getMessageDeliveryUpdatesModelToUpdate] Local DB doesn't contain message, we fetch from server."]);j=function(){return a};return a}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=(yield d("WAWebNewsletterDBUtils").bulkGetMessagesByServerIds(c.map(function(a){return a.id}),a)),g=[];c=c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.id,e=f.get(b.id);if(e==null){d("WALogger").DEV(j());c=(yield d("WAWebNewsletterGetMessagesJob").getNewsletterMessages(a,1,{after:c-1}));c=c.msgs[0];if(c==null){d("WALogger").DEV(i());return null}e=c;g.push(e)}return babelHelpers["extends"]({},b,{msgData:e,serverId:b.id,id:e.id})});return function(a){return c.apply(this,arguments)}}());g.length>0&&(yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(g));var k=(yield d("WAWebNewsletterDBUtils").bulkGetMessagesByServerIds(e,a));e=e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=k.get(a);return a==null?null:a.id});return function(b){return a.apply(this,arguments)}}());return{modelUpdatesToAdd:(yield (h||(h=b("Promise"))).all(c)).filter(Boolean),modelUpdatesToRemove:(yield h.all(e)).filter(Boolean)}});return k.apply(this,arguments)}g.getMessageDeliveryUpdatesModelToUpdate=a}),98);
__d("WAWebWamEnumChannelUserType",[],(function(a,b,c,d,e,f){a=Object.freeze({OWNER:1,ADMIN:2,FOLLOWER:3,GUEST:4});f.CHANNEL_USER_TYPE=a}),66);
__d("WAWebChannelGapDetectedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChannelUserType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChannelGapDetected:[4768,{channelIsForeground:[1,a.TYPES.BOOLEAN],channelUserType:[2,d("WAWebWamEnumChannelUserType").CHANNEL_USER_TYPE],cid:[3,a.TYPES.STRING],gapSize:[4,a.TYPES.INTEGER]},[1,1,1],"regular"]},{ChannelGapDetected:[]});g.ChannelGapDetectedWamEvent=b}),98);
__d("WAWebNewsletterMsgHistoryLoggingUtils",["WAWebABProps","WAWebBackendApi","WAWebChannelGapDetectedWamEvent","WAWebCommonNewsletterEnums","WAWebWamEnumChannelUserType","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebABProps").getABPropConfigValue("channels_enable_msg_history_metrics"))return;var b=a.newsletterJidOrWid instanceof c("WAWebWid")?a.newsletterJidOrWid:d("WAWebWidFactory").createWid(a.newsletterJidOrWid),e=(yield d("WAWebBackendApi").frontendSendAndReceive("getActiveNewsletter")),f=(yield d("WAWebBackendApi").frontendSendAndReceive("getNewsletterMetadata",{id:b}));new(d("WAWebChannelGapDetectedWamEvent").ChannelGapDetectedWamEvent)({cid:b.user,gapSize:a.gapSize,channelIsForeground:b.equals(e),channelUserType:(a=i(f))!=null?a:void 0}).commit()});return h.apply(this,arguments)}function i(a){a=a==null?void 0:a.membershipType;if(a==null)return null;switch(a){case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin:return d("WAWebWamEnumChannelUserType").CHANNEL_USER_TYPE.ADMIN;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest:return d("WAWebWamEnumChannelUserType").CHANNEL_USER_TYPE.GUEST;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner:return d("WAWebWamEnumChannelUserType").CHANNEL_USER_TYPE.OWNER;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber:return d("WAWebWamEnumChannelUserType").CHANNEL_USER_TYPE.FOLLOWER}}g.logHistoryGap=a;g.getChannelUserTypeFromMembershipType=i}),98);
__d("WAWebNewsletterMsgHistoryUtils",["Promise","WALogger","WAWebBackendApi","WAWebNewsletterBackendAddOnsUtils","WAWebNewsletterDBUtils","WAWebNewsletterGatingUtils","WAWebNewsletterGetMessagesJob","WAWebNewsletterMsgHistoryLoggingUtils","WAWebNewsletterSystemMessages","WAWebNewsletterUpdateMsgsRecordsJob","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[fillMsgHistoryGaps] Gaps filled for ",", "," messages retrieved from server"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[fillMsgHistoryGaps] "," identified for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[fillMsgHistoryGaps] No gaps identified for ",", "," - ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[fillMsgHistoryGaps] Looking for gaps for ",", "," - ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[fillMsgHistoryGaps] No gaps to fill for ",", "," - ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[fillMsgHistoryGaps] Only 1 message for ",""]);n=function(){return a};return a}function o(a){var b=[],e=function(e){var f=a[e-1].serverId;e=a[e].serverId;if(e==null||f==null)return"continue";e=e-f;if(e<=1)return"continue";e=c("lodash").times(e-1,function(a){return a+f+1}).filter(function(a){return a>=d("WAWebNewsletterSystemMessages").EARLIEST_AVAILABLE_MESSAGE_ID});if(e.length<=0)return"continue";while(e.length>0)b.push(e.splice(0,d("WAWebNewsletterGatingUtils").getMaxMsgCountFromServer()))};for(var f=1;f<a.length;f++){var g=e(f);if(g==="continue")continue}return b}function a(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){if(e.length<2&&f==null){d("WALogger").DEV(n(),a);return e}var g=e[0].serverId,p=e[e.length-1].serverId;if(g==null||p==null)return[];if(g>=d("WAWebNewsletterDBUtils").TEMPORARY_SERVER_ID_LOWER_BOUND||p>=d("WAWebNewsletterDBUtils").TEMPORARY_SERVER_ID_LOWER_BOUND)return e;if(p-g+1===e.length&&f==null){d("WALogger").DEV(m(),a,p,g);return e}d("WALogger").DEV(l(),a,p,g);if(f!=null){var q=f.start;f=f.end;var r={serverId:Math.min(q,f)-1};q={serverId:Math.max(q,f)+1};f=o([r].concat(e).concat(q))}else f=o(e);if(f.length===0){d("WALogger").DEV(k(),a,p,g);return e}d("WALogger").DEV(j(),f.length,a).devConsole(f);r=f.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){void d("WAWebNewsletterMsgHistoryLoggingUtils").logHistoryGap({gapSize:b.length,newsletterJidOrWid:a});b=(yield d("WAWebNewsletterGetMessagesJob").getNewsletterMessages(d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(String(a)),b.length,{after:b[0]-1})["catch"](function(){return null}));if(b!=null){d("WAWebBackendApi").frontendFireAndForget("updateNewsletterMessages",b);yield d("WAWebNewsletterBackendAddOnsUtils").updateAddOnDbRecords(b);return b.msgs}});return function(a){return c.apply(this,arguments)}}());q=c("lodash").flatten(yield (h||(h=b("Promise"))).all(r)).filter(Boolean);d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecordsJob(q).fireAndForget();d("WALogger").DEV(i(),a,q.length);return c("lodash").sortBy(e.concat(q),"serverId")});return p.apply(this,arguments)}g.identifyMsgGaps=o;g.fillMsgHistoryGaps=a}),98);
__d("WAWebGetNewsletterContextForForwardedMsg",["WAWebMsgGetters","WAWebNewsletterMetadataCollection","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){if(a.forwardedNewsletterMessageInfo!=null)return a.forwardedNewsletterMessageInfo;if(!d("WAWebMsgGetters").getIsNewsletterMsg(a))return void 0;var b=a.id.remote,e=c("WAWebNewsletterMetadataCollection").get(b);return{newsletterId:d("WAWebWidFactory").toNewsletterWid(b),newsletterName:e==null?void 0:e.name,serverMessageId:(b=a.serverId)!=null?b:void 0}}g.getNewsletterContextForForwardedMsg=a}),98);
__d("WAWebNewsletterModelUtils",["WALinkify","WALogger","WATimeUtils","WAWebCommonNewsletterEnums","WAWebJidToWid","WAWebMsgModelFromData","WAWebNewsletterBackendMsgUtils","WAWebNewsletterMetadataCollection","WAWebWid","WAWebWidFactory","err","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][throwIfNewsletterNotPreview] ",""]);h=function(){return a};return a}var i=1,j=-1,k=0;function l(a){return a==="verified"}function a(a){a=r(a);m(a);return n(a)}function m(a){var b;b=(b=a.newsletterMembershipMetadataMixin)==null?void 0:b.membershipType;b=b==null||b==="guest";if(!b){b="Trying to map an already subscribed newsletter";d("WALogger").ERROR(h(),b).tags("newsletter").devConsole(a).sendLogs("newsletter-converting-already-subscribed-newsletter")}}function n(a){a=p(a);a.muteExpiration=j;a.isReadOnly=!0;return a}function o(a){return a==="admin"||a==="owner"}function p(a){var b,e,f,g;b=(b=a.newsletterNameMetadataMixin)==null?void 0:b.nameElementValue;e=(e=a.newsletterMembershipMetadataMixin)==null?void 0:e.membershipType;f=(f=a.newsletterMutedMetadataMixin)==null?void 0:f.mutedState;var h=f==="on"?j:k;g=(g=a.newsletterCreationTimeMetadataMixin)==null?void 0:g.creationTimeValue;a={id:d("WAWebWidFactory").createWid(a.idJid),name:b!=null?b:void 0,isReadOnly:e!=null?!o(e):void 0,muteExpiration:f!=null&&f!=="undefined"?h:void 0,t:g!=null?d("WATimeUtils").castToUnixTime(g):void 0};return c("lodash").pickBy(a,function(a){return a!=null})}function q(a){a=s(a);a.membershipType=d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest;return a}function r(a){return{idJid:a.idJid,newsletterCreationTimeMetadataMixin:a.newsletterCreationTimeMetadataMixin,newsletterNameMetadataMixin:a.newsletterNameMetadataMixin,newsletterPictureMetadataMixin:a.newsletterPictureMetadataMixin,newsletterDescriptionMetadataMixin:a.newsletterDescriptionMetadataMixin,newsletterInviteLinkMetadataMixin:a.newsletterInviteLinkMetadataMixin,newsletterHandleMetadataMixin:a.newsletterHandleMetadataMixin,newsletterSubscribersMetadataMixin:a.newsletterSubscribersMetadataMixin,newsletterPrivacyMetadataMixin:a.newsletterPrivacyMetadataMixin,newsletterVerificationMetadataMixin:a.newsletterVerificationMetadataMixin,newsletterLinkedAccountsMetadataMixin:null,newsletterMembershipMetadataMixin:null,newsletterMutedMetadataMixin:{mutedState:"undefined"},newsletterStateMetadataMixin:null}}function e(a){a=r(a);m(a);return q(a)}function s(a){var b,e,f,g,h,i;b=(b=a.newsletterVerificationMetadataMixin)==null?void 0:b.verificationState;e=(e=a.newsletterStateMetadataMixin)==null?void 0:e.stateType;f=(f=a.newsletterMembershipMetadataMixin)==null?void 0:f.membershipType;g=(g=a.newsletterPrivacyMetadataMixin)==null?void 0:g.privacyType;h=(h=a.newsletterLinkedAccountsMetadataMixin)==null?void 0:(h=h.linkedAccountWebsiteMixin)==null?void 0:h.linkedAccountUrl;b={id:d("WAWebWidFactory").createWid(a.idJid),creationTime:(i=a.newsletterCreationTimeMetadataMixin)==null?void 0:i.creationTimeValue,name:(i=a.newsletterNameMetadataMixin)==null?void 0:i.nameElementValue,nameUpdateTime:(i=a.newsletterNameMetadataMixin)==null?void 0:i.nameUpdateTime,description:(i=a.newsletterDescriptionMetadataMixin)==null?void 0:(i=i.descriptionQueryDescriptionResponseMixin)==null?void 0:i.elementValue,descriptionUpdateTime:(i=a.newsletterDescriptionMetadataMixin)==null?void 0:(i=i.descriptionQueryDescriptionResponseMixin)==null?void 0:i.updateTime,handle:(i=a.newsletterHandleMetadataMixin)==null?void 0:i.handleText,inviteCode:(i=a.newsletterInviteLinkMetadataMixin)==null?void 0:i.inviteCode,size:(i=a.newsletterSubscribersMetadataMixin)==null?void 0:i.subscribersCount,verified:b!=null?l(b):void 0,membershipType:f!=null?d("WAWebCommonNewsletterEnums").NewsletterMembershipType.cast(f):void 0,reactionCodesSetting:Object.prototype.hasOwnProperty.call(a,"newsletterReactionCodesSettingMetadataMixin")?(i=a==null?void 0:a.newsletterReactionCodesSettingMetadataMixin)!=null?i:d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.All:void 0,privacy:g!=null?d("WAWebCommonNewsletterEnums").NewsletterPrivacy.cast(g):void 0,website:h!=null?d("WALinkify").findLink(h):void 0,suspended:e!=null?d("WAWebCommonNewsletterEnums").NewsletterState.cast(e)===d("WAWebCommonNewsletterEnums").NewsletterState.Suspended||d("WAWebCommonNewsletterEnums").NewsletterState.cast(e)===d("WAWebCommonNewsletterEnums").NewsletterState.GeoSuspended:void 0,geosuspended:e!=null?d("WAWebCommonNewsletterEnums").NewsletterState.cast(e)===d("WAWebCommonNewsletterEnums").NewsletterState.GeoSuspended:void 0};return c("lodash").pickBy(b,function(a){return a!=null})}var t="https://pps.whatsapp.net";function u(a){if(a==null||a==="")return null;a=new URL(a,t);return a.href}function v(a,b){a=d("WAWebWidFactory").createWid(a);if(b.length===0)return{id:a};var e,f;for(var b=b,g=Array.isArray(b),h=0,b=g?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=b.length)break;i=b[h++]}else{h=b.next();if(h.done)break;i=h.value}i=i;i=i.queryPictureDirectPathOrMatchedOrEmptyResponseMixinGroup;if(i.name==="QueryPictureDirectPathResponse")i.value.type==="preview"?f=i.value:i.value.type==="image"&&(e=i.value);else if(i.name==="QueryPictureEmptyResponse")return{id:a,timestamp:Date.now(),eurl:null,previewEurl:null,eurlStale:!1,stale:!1}}g={id:a,timestamp:Date.now(),tag:(h=(i=e)==null?void 0:i.id)!=null?h:(g=f)==null?void 0:g.id,eurl:u((a=(b=e)==null?void 0:b.directPath)!=null?a:(i=f)==null?void 0:i.directPath),previewEurl:u((h=f)==null?void 0:h.directPath),eurlStale:!1,stale:!1};return c("lodash").pickBy(g,function(a){return a!=null})}function f(a){return{chat:p(a),metadata:s(a),pic:v(a.idJid,(a=(a=a.newsletterPictureMetadataMixin)==null?void 0:a.picture)!=null?a:[])}}function w(a,c){if(c==null)return[];var e=b("WAWebMsgModelFromData").msgModelFromMsgData,f=d("WAWebJidToWid").jidWithTypeToWid({jidType:"newsletter",newsletterJid:a});a=c.reduce(function(a,b){b=d("WAWebNewsletterBackendMsgUtils").mapNewsletterMsgToMsgData(b,f);if(b==null)return a;a.push(e(b));return a},[]);return a}function x(a){if(c("WAWebWid").isNewsletter(a)){var b;return(b=c("WAWebNewsletterMetadataCollection").get(a))==null?void 0:b.membershipType}return(b=c("WAWebNewsletterMetadataCollection").filter(function(b){return b.inviteCode===a})[0])==null?void 0:b.membershipType}g.DEFAULT_NEWSLETTER_ADMIN_COUNT=i;g.isVerifiedNewsletter=l;g.mapDirectoryNewsletterToChat=a;g.mapPreviewNewsletterToChat=n;g.isMembershipAdminOrOwner=o;g.mapNewsletterToChat=p;g.mapPreviewNewsletterToMetadata=q;g.convertDirectoryNewsletterMetadataToNewsletterMetadata=r;g.mapDirectoryNewsletterToMetadata=e;g.mapNewsletterToMetadata=s;g.mapPicturesToProfilePicThumb=v;g.mapNewsletterToModels=f;g.mapMessagesToModels=w;g.getRoleByIdentifier=x}),98);
__d("WAWebNewsletterReactionUtils",["WATimeUtils","WAWebContactCollection","WAWebEmoji","WAWebFrontendContactGetters","WAWebProfilePicThumbCollection","WAWebReactionsModels","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a){var b;return{serverTimestamp:(b=a.reactionCountMapTs)!=null?b:d("WATimeUtils").unixTime(),emojiCountMap:(b=a.reactionCountMap)!=null?b:new Map(),parentMsgKey:a.id.toString()}}function b(a){if(a.length===0)return{reactions:[],count:0};a=a.map(i);return h(a)}function h(a){var b=0,c=new Map();for(var d=0;d<a.length;d++){var e=a[d],f=e.reactions;e=e.count;b+=e;for(var e=f.entries(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;var i=h[0];h=h[1];var j=h[0];h=h[1];var k=c.get(i);k!=null?(k.count+=h,k.reaction=babelHelpers["extends"]({},k.reaction,{reactionSenders:k.reaction.reactionSenders.concat(j.reactionSenders)}),c.set(i,k)):c.set(i,{reaction:j,count:h})}}k=Array.from(c.values()).sort(function(a,b){var c=a.count;a=a.reaction;var d=b.reaction;b=b.count;if(a.reactionByMe!=null)return-1;return d.reactionByMe!=null?1:b-c}).map(function(b){var a=b.reaction;b=b.count;return[a,b]});return{count:b,reactions:k}}function i(a){var b=new Map(),c=a.myReaction,e=a.myReactionMsgKey,f=new Map(a.reactionCountMap);c!=null&&c!==""&&!f.has(c)&&f.set(c,1);var g=0;f=j(f);for(var f=f.entries(),h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=f.length)break;k=f[i++]}else{i=f.next();if(i.done)break;k=i.value}k=k;var m=k[0];k=k[1];g+=k.count;b.set(m,[{reactionAggregate:m,reactionSenders:l(m,a),reactionByMe:c!=null&&e!=null&&m===d("WAWebEmoji").EmojiUtil.getEmojiAggregate(c)?{msgKey:e.toString(),orphan:0,parentMsgKey:a.id.toString(),reactionText:d("WAWebEmoji").EmojiUtil.getNormalizedOrTofu(c),senderUserJid:d("WAWebUserPrefsMeUser").getMeUser().toJid(),timestamp:(m=a.myReactionTs)!=null?m:0}:null},k.count])}return{reactions:b,count:g}}function j(a){var b=new Map();for(var a=a.entries(),c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(c){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;var h=g[0];g=g[1];var i=d("WAWebEmoji").EmojiUtil.getEmojiAggregate(h);h=d("WAWebEmoji").EmojiUtil.getNormalizedOrTofu(h);f=(f=b.get(i))!=null?f:{count:0,reactions:new Map()};f.reactions.set(h,g);f.count+=g;b.set(i,f)}return b}function k(a){var b=new Map();a.reactions.map(function(a){var c,e=a.reactionCode;a=a.senderList;e=d("WAWebEmoji").EmojiUtil.getEmojiAggregate(e);c=(c=b.get(e))!=null?c:[];b.set(e,c.concat(a))});return b}function c(a){a=k(a);var b=new Map();for(var a=a.entries(),c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];f=f.sort(function(a,b){a=(a==null?void 0:a.id)!=null?d("WAWebContactCollection").ContactCollection.get(a.id):null;b=(b==null?void 0:b.id)!=null?d("WAWebContactCollection").ContactCollection.get(b.id):null;var c=(a==null?void 0:a.type)==="in",e=(b==null?void 0:b.type)==="in";if(c&&a&&b&&e){a=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.get(a.id)!=null;b=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.get(b.id)!=null;return a===b?0:a?-1:1}else if(!c&&!e)return 0;return c?-1:1}).slice(0,5);f=f.map(function(a){return(a==null?void 0:a.id)!=null?a.id:a==null?void 0:a.profileUrl}).filter(Boolean);b.set(g,f)}return b}function e(a){var b=[];a.reactions.map(function(a){var c=a.reactionCode;a=a.senderList;a.map(function(a){if((a==null?void 0:a.id)==null)return;a=d("WAWebContactCollection").ContactCollection.get(a.id);(a==null?void 0:a.type)==="in"&&b.push({reaction:c,contact:a})})});return b.sort(function(a,b){a=d("WAWebFrontendContactGetters").getFormattedUser(a.contact);b=d("WAWebFrontendContactGetters").getFormattedUser(b.contact);return a.localeCompare(b)})}function l(a,b){var c=b.myReaction,e=c!=null&&a===d("WAWebEmoji").EmojiUtil.getEmojiAggregate(c);return[new(d("WAWebReactionsModels").ReactionsSenders)({id:b.id,reactionText:e?c:a,senderUserJid:e?d("WAWebUserPrefsMeUser").getMeUser().toJid():b.id.remote.toJid(),timestamp:b.reactionCountMapTs})]}function f(a){var b=a.serverTimestamp,c=a.emojiCountMap;a=a.parentMsgKey;if(b==null||c==null)return;return{serverTimestamp:b,emojiCountMap:c,parentMsgKey:a.toString()}}g.mapFrontendReactionToBackend=a;g.aggregateAndSortReactions=b;g.getReactionSendersForFacePile=c;g.getContactReactionSenders=e;g.mapReactionDataToDbRecord=f}),98);
__d("WAWebNewsletterSystemMessages",["Promise","WATimeUtils","WAWebCommonNewsletterEnums","WAWebContactSystemMsg","WAWebMsgKey","WAWebMsgModelFromData","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebNewsletterUpdateMsgsRecordsJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new Map([["newsletter_privacy",10],["newsletter_created",20],["newsletter_admin_context_card",30],["newsletter_deleted",Number.MAX_SAFE_INTEGER]]),j=100;function a(a){a=a.serverId;return a==null?!1:a<j}function e(a){a=a.serverId;if(a==null)return!1;var b=Array.from(i.values());b=Math.min.apply(Math,b);return a===b}function k(a,b){var e=i.get(b.subtype);b=babelHelpers["extends"]({},d("WAWebContactSystemMsg").genNotificationMsg(a,babelHelpers["extends"]({type:d("WAWebMsgType").MSG_TYPE.NEWSLETTER_NOTIFICATION},b,{serverId:e,templateParams:(b=b.templateParams)!=null?b:[]})),{id:new(c("WAWebMsgKey"))({fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a),remote:a,id:e!=null?e.toString(10):c("WAWebMsgKey").newId_DEPRECATED()})});return b}function l(a){var b=a.id,c=a.name,e=a.t;a=a.role;a=(a=a)!=null?a:d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber;e=e!=null?d("WATimeUtils").castToUnixTime(e):d("WATimeUtils").unixTime();var f=k(d("WAWebWidFactory").createWid(b.toString()),{subtype:"newsletter_privacy",templateParams:[a],t:e});c=k(d("WAWebWidFactory").createWid(b.toString()),{subtype:"newsletter_created",templateParams:c!=null?[c,a]:[],t:e});if(d("WAWebNewsletterGatingUtils").isNewsletterAdminContextCardEnabled(a)){a=k(d("WAWebWidFactory").createWid(b.toString()),{subtype:"newsletter_admin_context_card",templateParams:[b.toString()],t:e});return[f,c,a]}return[f,c]}function f(a){var c=b("WAWebMsgModelFromData"),e=c.msgModelFromMsgData;return a.addQueue.enqueue((h||(h=b("Promise"))).resolve().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b;b=l({id:a.id,name:a.name,t:(b=a.newsletterMetadata)==null?void 0:b.creationTime,role:(b=a.newsletterMetadata)==null?void 0:b.membershipType});var c=b.map(e);yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(b);a.msgs.add(c,{at:0});return c})))}function m(a){var b=a.id;a=a.name;b=k(d("WAWebWidFactory").createWid(b.toString()),{subtype:"newsletter_deleted",templateParams:[a],t:d("WATimeUtils").unixTime()});return[b]}g.EARLIEST_AVAILABLE_MESSAGE_ID=j;g.isNewsletterSystemMsg=a;g.isEarliestNewsletterSystemMsg=e;g.genNewsletterSystemMessage=k;g.genNewsletterCreationSystemMessages=l;g.addSystemMessagesToChat=f;g.genNewsletterDeletionSystemMessages=m}),98);
__d("WAWebFetchNewsletterProfilePicAction",["WAJids","WAWebNewsletterMetadataJob","WAWebNewsletterModelUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={id:a},c=d("WAJids").toNewsletterJid(a.toString());a=d("WAWebNewsletterModelUtils").getRoleByIdentifier(a);a=(yield d("WAWebNewsletterMetadataJob").getNewsletterMetadata(c,a,{picture:!0}));a=a==null?void 0:(a=a.newsletterPictureMetadataMixin)==null?void 0:a.picture;if(a==null)return b;c=d("WAWebNewsletterModelUtils").mapPicturesToProfilePicThumb(c,a);return babelHelpers["extends"]({},b,{tag:(a=c.tag)!=null?a:void 0,eurl:(b=c.eurl)!=null?b:void 0,previewEurl:(a=c.previewEurl)!=null?a:void 0,stale:c.stale,eurlStale:!1,timestamp:(b=c.timestamp)!=null?b:Date.now()})});return h.apply(this,arguments)}g.fetchNewsletterProfilePic=a}),98);
__d("WAWebNewsletterGetGeoSuspendedCountriesAction",["WALogger","WAWebNewsletterBridgeApi","WAWebNewsletterGetGeoSuspendedCountriesUpdatesJob","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getGeoSuspendedCountriesAction] Failed to get geo suspended countries: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getGeoSuspendedCountriesAction] End"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getGeoSuspendedCountriesAction] Start"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(j());try{var b=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a.toJid());b=(yield d("WAWebNewsletterGetGeoSuspendedCountriesUpdatesJob").getNewsletterGeosuspendedCountryUpdates(b));if(b==null)return;var c=b.countriesToAdd;b=b.countriesToRemove;void d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.updateGeosuspendedCountry({id:a,countryCodes:c,toAdd:!0});void d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.updateGeosuspendedCountry({id:a,countryCodes:b,toAdd:!1});d("WALogger").DEV(i())}catch(a){d("WALogger").ERROR(h(),a).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-get-geosuspended-countries")}});return k.apply(this,arguments)}g.getGeoSuspendedCountriesAction=a}),98);
__d("WAWebNewsletterGetIntegrityUpdatesAction",["WAJobOrchestratorTypes","WALogger","WAWebNewsletterBridgeApi","WAWebNewsletterGetIntegrityUpdatesJob","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getIntegrityUpdatesAction] Failed to get integrity updates"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getIntegrityUpdatesAction]Geosuspended countries updates End"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getIntegrityUpdatesAction][Message delivery updates] End"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getIntegrityUpdatesAction] Start"]);k=function(){return a};return a}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH);d("WALogger").DEV(k());try{var c=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a.toJid());c=(yield d("WAWebNewsletterGetIntegrityUpdatesJob").getNewsletterIntegrityUpdates(c,b));if(c==null)return;b=c.geosuspendedCountriesToAdd;var e=c.geosuspendedCountriesToRemove,f=c.violatingMessagesToAdd;c=c.violatingMessagesToRemove;void d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.updateNewsletterMessageDeliveryUpdate({id:a,modelUpdatesToAdd:f,modelUpdatesToRemove:c});d("WALogger").DEV(j());void d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.updateGeosuspendedCountry({id:a,countryCodes:b,toAdd:!0});void d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.updateGeosuspendedCountry({id:a,countryCodes:e,toAdd:!1});d("WALogger").DEV(i())}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-get-integrity-updates")}});return l.apply(this,arguments)}g.getIntegrityUpdatesAction=a}),98);
__d("WAWebNewsletterGetMessageDeliveryUpdatesAction",["WAJobOrchestratorTypes","WALogger","WAWebNewsletterBridgeApi","WAWebNewsletterGetMessageDeliveryUpdatesJob","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getMessageDeliveryUpdatesAction] Failed to get message delivery updates"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getMessageDeliveryUpdatesAction] End"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][getMessageDeliveryUpdatesAction] Start"]);j=function(){return a};return a}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH);d("WALogger").DEV(j());try{var c=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a.toJid());c=(yield d("WAWebNewsletterGetMessageDeliveryUpdatesJob").getNewsletterMessageDeliveryUpdates(c,b));if(c==null)return;b=c.modelUpdatesToAdd;c=c.modelUpdatesToRemove;void d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.updateNewsletterMessageDeliveryUpdate({id:a,modelUpdatesToAdd:b,modelUpdatesToRemove:c});d("WALogger").DEV(i())}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-get-message-delivery-updates")}});return k.apply(this,arguments)}g.getMessageDeliveryUpdatesAction=a}),98);
__d("WAWebNewsletterGetMessageUpdatesAction",["Promise","WAJids","WALogger","WATimeUtils","WAWebNewsletterBridgeApi","WAWebNewsletterGatingUtils","WAWebNewsletterGetMessageUpdatesJob","WAWebNewsletterMetadataJob","WAWebNewsletterSystemMessages","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[maybeUpdateMsgsAddOns] Failed to update messages"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][maybeUpdateMsgsAddOns] Failed to geosuspend channel "," on receiving 451 error - ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][maybeUpdateMsgsAddOns] Failed to suspend channel "," on receiving 423 error - ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([""," updated UI, exiting"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([""," updated db records"]);m=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose([""," Couldn't find a message with server id"]);a=function(){return b};return b}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([""," updating, earliest server id in batch ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[maybeUpdateMsgsAddOns] should not update, exiting"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([""," init, earliestMsgUpdateTs=",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([""," no messages, exit"]);q=function(){return a};return a}function c(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e="[maybeUpdateMsgsAddOns]["+c.id.toJid()+"]";if(a.length===0){d("WALogger").DEV(q(),e);return}a=a.filter(function(a){return((a=a.serverId)!=null?a:0)>=d("WAWebNewsletterSystemMessages").EARLIEST_AVAILABLE_MESSAGE_ID});var f=Math.min.apply(Math,a.map(function(a){return(a=a.lastUpdateFromServerTs)!=null?a:0}));d("WALogger").DEV(p(),e,f);if(!s(f)){d("WALogger").DEV(o());return}var g=Math.min.apply(Math,a.map(function(a){return a.serverId}).filter(Boolean));d("WALogger").DEV(n(),e,g);if(!Number.isSafeInteger(g))return;try{g=g-1;var r=0,t=[];while(r<a.length){var u=Math.min(a.length-r,d("WAWebNewsletterGatingUtils").getMaxMsgCountFromServer());t.push(d("WAWebNewsletterGetMessageUpdatesJob").getNewsletterMessageUpdates(d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(c.id.toJid()),{cursor:{after:g},count:u,since:f>0?f:void 0,ids:a.map(function(a){return a.id})}));g+=u;r+=u}u=(yield (h||(h=b("Promise"))).all(t));u.forEach(function(a){d("WALogger").DEV(m(),e).devConsole(a);var c=b("WAWebNewsletterBridgeApi");c=c.NewsletterBridgeApi;void c.updateNewsletterMessages(a);d("WALogger").DEV(l(),e)})}catch(e){if((e==null?void 0:e.status)===423)try{yield d("WAWebNewsletterMetadataJob").suspendNewsletter(d("WAJids").toNewsletterJid(c.id.toJid()));f=b("WAWebNewsletterBridgeApi");r=f.NewsletterBridgeApi;void r.suspendNewsletter({id:c.id})}catch(a){d("WALogger").ERROR(k(),c.id.toString(),a.name).devConsole(a).tags("newsletter").sendLogs("newsletter-maybe-update-msg-addons-suspend-error");return}else if((e==null?void 0:e.status)===451)try{yield d("WAWebNewsletterMetadataJob").geosuspendNewsletter(d("WAJids").toNewsletterJid(c.id.toJid()));g=b("WAWebNewsletterBridgeApi");a=g.NewsletterBridgeApi;void a.geosuspendNewsletter({id:c.id})}catch(a){d("WALogger").ERROR(j(),c.id.toString(),a.name).devConsole(a).tags("newsletter").sendLogs("newsletter-maybe-update-msg-addons-geosuspend-error");return}d("WALogger").ERROR(i()).devConsole(e).tags("newsletter")}});return r.apply(this,arguments)}function s(a){return!Number.isSafeInteger(a)?!1:d("WATimeUtils").unixTime()-a>d("WAWebNewsletterGatingUtils").getPullMessageUpdatesThresholdSeconds()}g.maybeUpdateMsgsAddOns=c}),98);
__d("WAWebNewsletterMessageDeliveryUpdateAction",["WAJids","WAWebNewsletterMetadataJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebNewsletterMetadataJob").updateNewsletterMessageDeliveryUpdates(d("WAJids").toNewsletterJid(a.id.toString()),[],b.map(function(a){return a.serverId}).filter(Boolean));(a=a.newsletterMetadata)==null?void 0:a.messageDeliveryUpdates.remove(b.map(function(a){return a.id}))});return h.apply(this,arguments)}g.removeMessageDeliveryUpdates=a}),98);
__d("WAWebWamEnumChannelMessageHistoryRequestType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,OLDER:1,NEWER:2,LATEST:3,EXACT:4,GAP:5});f.CHANNEL_MESSAGE_HISTORY_REQUEST_TYPE=a}),66);
__d("WAWebChannelMessageHistoryRequestWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChannelMessageHistoryRequestType","WAWebWamEnumChannelUserType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChannelMessageHistoryRequest:[4770,{batchSize:[1,a.TYPES.INTEGER],channelMessageHistoryRequestType:[2,d("WAWebWamEnumChannelMessageHistoryRequestType").CHANNEL_MESSAGE_HISTORY_REQUEST_TYPE],channelUserType:[3,d("WAWebWamEnumChannelUserType").CHANNEL_USER_TYPE],cid:[4,a.TYPES.STRING],processingDurationT:[5,a.TYPES.TIMER],requestDurationT:[6,a.TYPES.TIMER],requestSuccessful:[7,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{ChannelMessageHistoryRequest:[]});g.ChannelMessageHistoryRequestWamEvent=b}),98);
__d("WAWebNewsletterPullMessagesFromServerLogging",["WAWebABProps","WAWebChannelMessageHistoryRequestWamEvent","WAWebNewsletterMsgHistoryLoggingUtils"],(function(a,b,c,d,e,f,g){function a(a){if(!d("WAWebABProps").getABPropConfigValue("channels_enable_msg_history_metrics"))return;var b=a.batchSize;a=a.chat;a=new(d("WAWebChannelMessageHistoryRequestWamEvent").ChannelMessageHistoryRequestWamEvent)({batchSize:b,cid:a.id.user,channelUserType:(b=d("WAWebNewsletterMsgHistoryLoggingUtils").getChannelUserTypeFromMembershipType(a.newsletterMetadata))!=null?b:void 0});return a}g.createMessageHistoryRequestMetrics=a}),98);
__d("WAWebNewsletterPullMessagesFromServerAction",["Promise","WAAbortError","WALogger","WARaceSignal","WAWebApiChat","WAWebChatSeenBridge","WAWebMsgModelFromData","WAWebNewsletterBackendAddOnsUtils","WAWebNewsletterBridgeApi","WAWebNewsletterErrors","WAWebNewsletterGetMessagesJob","WAWebNewsletterPullMessagesFromServerLogging","WAWebNewsletterUpdateMsgsRecordsJob","WAWebNewsletterValidationUtils","WAWebStateUtils","WAWebUpdateUnreadChatAction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[updateNewsletterAddons], updating"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[pullNewsletterMessagesFromServer] failed to pull newsletter messages from server"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([""," no messages retrieved from server, skip models update"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([""," local collections and db updated"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([""," loaded "," messages from server"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([""," early returning loadRecentPromise"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([""," early returning loadEarlierPromise"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([""," start pulling messages"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[pullNewsletterMessagesFromServer] not a newsletter"]);q=function(){return a};return a}function a(a,e){var f=d("WAWebStateUtils").unproxy(a);if(!f.isNewsletter){d("WALogger").ERROR(q());return(h||(h=b("Promise"))).reject(new(d("WAWebNewsletterErrors").UnexpectedNonNewsletterChatError)())}return e.messageCount<0?(h||(h=b("Promise"))).resolve([]):c("WARaceSignal")([e.signal,f.deleteSignal].filter(Boolean),function(a){return v(f,babelHelpers["extends"]({},e,{signal:a}))})}function r(a,b,c){switch(b){case"before":a.msgs.msgLoadState.isLoadingEarlierMsgs=c;break;case"after":a.msgs.msgLoadState.isLoadingRecentMsgs=c;break}}function s(a,c,d){return c.length===0?(h||(h=b("Promise"))).resolve():a.addQueue.enqueue((h||(h=b("Promise"))).resolve().then(function(){a.msgs.add(c,d==="before"?{at:0}:void 0);if(d==="after"){var b,e=Math.max.apply(null,c.map(function(a){return a.t}));a.t=Math.max((b=a.t)!=null?b:0,e)}}))}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("WAWebApiChat").getChatMeta(a.id));c=c.unreadCount;if(!Number.isSafeInteger(b)||c<b)return;c=Math.max(c-b,0);yield d("WAWebChatSeenBridge").markConversationSeen(a.id,c);yield d("WAWebUpdateUnreadChatAction").updateUnreadCountMD(a,0,!1)});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c.signal.aborted)throw new(d("WAAbortError").AbortError)();var e=c.messageCount,f=c.cursor,g=c.shouldUpdateMsg,i=d("WAWebNewsletterPullMessagesFromServerLogging").createMessageHistoryRequestMetrics({batchSize:e,chat:a}),q=f==null||f.after!=null?"after":"before",u="[pullNewsletterMessagesFromServer]["+a.id.toJid()+"]["+q+"]";d("WALogger").DEV(p(),u);var v=a.msgs.msgLoadState,w=v.isLoadingEarlierMsgs;v=v.isLoadingRecentMsgs;if(q==="before"&&w){d("WALogger").DEV(o(),u);return a.msgs.loadEarlierPromise}if(q==="after"&&v){d("WALogger").DEV(n(),u);return a.msgs.loadRecentPromise}r(a,q,!0);try{var y=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a.id.toJid());if(c.signal.aborted)throw new(d("WAAbortError").AbortError)();w=(h||(h=b("Promise"))).resolve().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null?void 0:i.startRequestDurationT();var j=(yield d("WAWebNewsletterGetMessagesJob").getNewsletterMessages(y,e,f));i==null?void 0:i.markRequestDurationT();var n=g!=null?j.msgs.filter(g):j.msgs,o=n.map(d("WAWebMsgModelFromData").msgModelFromMsgData);d("WALogger").DEV(m(),u,o.length);if(c.signal.aborted)throw new(d("WAAbortError").AbortError)();o.length>0?(i==null?void 0:i.startProcessingDurationT(),yield (h||(h=b("Promise"))).all([d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(n),x(j),s(a,o,q)]),i==null?void 0:i.markProcessingDurationT(),c.resetUnreadCount===!0&&(yield t(a,o.length)),d("WALogger").DEV(l(),u)):d("WALogger").DEV(k(),u);r(a,q,!1);i!=null&&(i.requestSuccessful=!0);return j.msgs.map(d("WAWebMsgModelFromData").msgModelFromMsgData)}));q==="before"?a.msgs.loadEarlierPromise=w:q==="after"&&(a.msgs.loadRecentPromise=w);return yield w}catch(a){d("WALogger").ERROR(j()).tags("newsletter").devConsole(a);i!=null&&(i.requestSuccessful=!1);throw a}finally{i==null?void 0:i.commit()}});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.reactions,e=a.pollVotes,f=a.timestamp;d("WALogger").DEV(i()).devConsole(c);yield d("WAWebNewsletterBackendAddOnsUtils").updateAddOnDbRecords(a);a=b("WAWebNewsletterBridgeApi");a=a.NewsletterBridgeApi;var g=c.map(function(a){return a.parentMsgKey});return a.updateNewsletterMessages({reactions:c,ids:g,timestamp:f,pollVotes:e})});return y.apply(this,arguments)}g.pullNewsletterMessagesFromServer=a}),98);
__d("WAWebNewsletterReparseMsgAction",["WAWebBackendApi","WAWebHandleMsgTypes.flow","WAWebNewsletterFutureProofUtils","WAWebNewsletterGatingUtils","WAWebNewsletterUpdateMsgsRecordsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.futureproofBuffer,c=a.futureproofType,e=a.futureproofSubtype;if(b!=null||c==null)return a;if(!d("WAWebNewsletterFutureProofUtils").isMsgSupported(a)||!d("WAWebNewsletterGatingUtils").isNewsletterReparseEnabled())return a;b=babelHelpers["extends"]({},a,{type:c,kind:c,subtype:e,futureproofType:void 0,futureproofSubtype:void 0});yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords([b]);yield d("WAWebBackendApi").frontendSendAndReceive("updateMessageUI",{msg:b,chatId:a.id.remote,messageOverwriteOption:d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY});return b});return h.apply(this,arguments)}g.reparseNewsletterMsg=a}),98);
__d("WAWebMexMuteNewsletterJob",["WALogger","WAWebMexClient","WAWebMexMuteNewsletterJobMutation.graphql","WAWebMexNewsletterUtils","WAWebMexUtils","WAWebNewsletterRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] mute newsletter via mex"]);i=function(){return a};return a}var j=h!==void 0?h:h=b("WAWebMexMuteNewsletterJobMutation.graphql");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=(yield d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return d("WAWebMexUtils").runWithErrorHandler(function(){return l(b)},d("WAWebMexUtils").MexSupportedFeature.Newsletter)}));a=d("WAWebMexNewsletterUtils").convertMutationResponse(a.xwa2_newsletter_mute_v2);return[a]});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a={newsletter_id:a};a=(yield d("WAWebMexClient").fetchQuery(j,a));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({response:a});return a});return m.apply(this,arguments)}g.mexMuteNewsletter=a}),98);
__d("WAWebMexUnmuteNewsletterJob",["WALogger","WAWebMexClient","WAWebMexNewsletterUtils","WAWebMexUnmuteNewsletterJobMutation.graphql","WAWebMexUtils","WAWebNewsletterRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] unmute newsletter via mex"]);i=function(){return a};return a}var j=h!==void 0?h:h=b("WAWebMexUnmuteNewsletterJobMutation.graphql");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=(yield d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return d("WAWebMexUtils").runWithErrorHandler(function(){return l(b)},d("WAWebMexUtils").MexSupportedFeature.Newsletter)}));a=d("WAWebMexNewsletterUtils").convertMutationResponse(a.xwa2_newsletter_unmute_v2);return[a]});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a={newsletter_id:a};a=(yield d("WAWebMexClient").fetchQuery(j,a));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({response:a});return a});return m.apply(this,arguments)}g.mexUnmuteNewsletter=a}),98);
__d("WAWebNewsletterToggleMuteStateJob",["WAJobOrchestratorTypes","WALogger","WAWebMexMuteNewsletterJob","WAWebMexUnmuteNewsletterJob","WAWebMiscErrors","WAWebOrchestratorNonPersistedJob","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][","Newsletter] Failed to persist the mutation on db"]);h=function(){return a};return a}var i=-1,j=0;function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("muteNewsletter",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield k({newsletterJids:a,muteStateMexFunction:d("WAWebMexMuteNewsletterJob").mexMuteNewsletter,muteExpirationValue:i})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function c(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("unmuteNewsletter",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield k({newsletterJids:a,muteStateMexFunction:d("WAWebMexUnmuteNewsletterJob").mexUnmuteNewsletter,muteExpirationValue:j})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.newsletterJids,c=a.muteStateMexFunction,e=a.muteExpirationValue;a=e===i?"mute":"unmute";c=(yield c(b));b=c.filter(function(a){return a.subscriberNotFoundMixin==null}).map(function(a){return a.jid});try{return yield d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(b.map(function(a){return{id:a,muteExpiration:e}}))}catch(b){b instanceof d("WAWebMiscErrors").DbOnLogoutAbort||d("WALogger").ERROR(h(),a).tags("newsletter").devConsole(b).sendLogs("newsletter-"+a+"-db-fail");throw b}});return l.apply(this,arguments)}g.muteNewsletter=a;g.unmuteNewsletter=c}),98);
__d("WAWebWamEnumChannelEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({FOLLOW:1,UNFOLLOW:2,MUTE:3,UNMUTE:4});f.CHANNEL_EVENT_TYPE=a}),66);
__d("WAWebNewsletterToggleMuteStateAction",["WAJids","WALogger","WAWebNewsletterAttributionLogging","WAWebNewsletterBridgeApi","WAWebNewsletterCollection","WAWebNewsletterToggleMuteStateJob","WAWebWamEnumChannelEventType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][unmuteNewsletterAction] failed to unmute the newsletter"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][unmuteNewsletterAction] called with a non-newsletter chat"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][muteNewsletterAction] failed to mute the newsletter"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][muteNewsletterAction] called with a non-newsletter chat"]);k=function(){return a};return a}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.eventSurface;if(!a.isNewsletter()){d("WALogger").ERROR(k()).tags("newsletter").devConsole(a).sendLogs("mute-not-a-newsletter");return}try{d("WAWebNewsletterAttributionLogging").NewsletterCoreEventLogger.log({eventSurface:b,cid:a,channelCoreEventType:d("WAWebWamEnumChannelEventType").CHANNEL_EVENT_TYPE.MUTE});b=c("WAWebNewsletterCollection").get(a);if(b==null)throw c("err")("Failed to retrieve newsletter");b.mute.promises.mute=d("WAWebNewsletterToggleMuteStateJob").muteNewsletter([d("WAJids").toNewsletterJid(a.toJid())]).then(function(){return{status:200}})["catch"](function(){return{status:400}});yield b.mute.promises.mute;yield d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.muteNewsletter({id:a})}catch(a){d("WALogger").ERROR(j()).tags("newsletter").devConsole(a).sendLogs("newsletter-mute-action-failed")}});return l.apply(this,arguments)}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.eventSurface;if(!a.isNewsletter()){d("WALogger").ERROR(i()).tags("newsletter").devConsole(a).sendLogs("mute-not-a-newsletter");return}try{d("WAWebNewsletterAttributionLogging").NewsletterCoreEventLogger.log({eventSurface:b,cid:a,channelCoreEventType:d("WAWebWamEnumChannelEventType").CHANNEL_EVENT_TYPE.UNMUTE});b=c("WAWebNewsletterCollection").get(a);if(b==null)throw c("err")("Failed to retrieve newsletter");b.mute.promises.unmute=d("WAWebNewsletterToggleMuteStateJob").unmuteNewsletter([d("WAJids").toNewsletterJid(a.toJid())]).then(function(){return{status:200}})["catch"](function(){return{status:400}});yield b.mute.promises.unmute;yield d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.unmuteNewsletter({id:a})}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-unmute-action-failed")}});return m.apply(this,arguments)}g.muteNewsletterAction=a;g.unmuteNewsletterAction=e}),98);
__d("WAWebQueryAndUpdateNewslettersMetadataAction",["$InternalEnum","Promise","WAJids","WAJobOrchestratorTypes","WALogger","WAWebBackendErrors","WAWebCommonNewsletterEnums","WAWebContactCollection","WAWebContactProfilePicThumbBridge","WAWebCreateChat","WAWebDBBulkPersistProfilePic","WAWebNewsletterBridgeApi","WAWebNewsletterCollection","WAWebNewsletterDeleteChatJob","WAWebNewsletterGatingUtils","WAWebNewsletterGetAdminCountJob","WAWebNewsletterGetGeoSuspendedCountriesAction","WAWebNewsletterGetIntegrityUpdatesAction","WAWebNewsletterGetMessageDeliveryUpdatesAction","WAWebNewsletterMembershipUtil","WAWebNewsletterMetadataCollection","WAWebNewsletterMetadataJob","WAWebNewsletterModelUtils","WAWebNewsletterPullMessagesFromServerAction","WAWebNewsletterStorageUtils","WAWebNewsletterSystemMessages","WAWebNewsletterUpdateNewslettersRecordsJob","WAWebProfilePicThumbCollection","WAWebSchemaChat","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateAllNewsletterMetadataAction][messages] End"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateAllNewsletterMetadataAction][messages] Start"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateAllNewsletterMetadataAction] Update local model"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][updateCollections][picture] Persist changes to DB"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][updateCollections][metadata] Persist changes to DB"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][updateCollections][chat] Persist changes to DB"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][updateCollections] Start"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][queryAndUpdateNewsletterMetadataAction] Failed to retrieve newsletter metadata"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateNewsletterMetadataAction] End"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateNewsletterMetadataAction] Start"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][queryAndUpdateAllNewsletterMetadataAction] Failed to retrieve the list of newsletters"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateAllNewsletterMetadataAction] End"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateAllNewsletterMetadataAction] Update local model"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletters][queryAndUpdateAllNewsletterMetadataAction] Start"]);v=function(){return a};return a}function w(a){return a!=null&&Number.isInteger(a)&&a>0}var x=b("$InternalEnum").Mirrored(["Bootstrap","DirtyBit","Debug"]);function a(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c={});d("WALogger").LOG(v());c=(c=c)!=null?c:{};var e=c.messageCount,f=c.addSystemMsgs;c=c.qplEvent;try{c==null?void 0:c.annotate({string:{entryPoint:a}});c==null?void 0:c.addPoint("getAllNewslettersMetadata_start");var g=(yield d("WAWebNewsletterMetadataJob").getAllNewslettersMetadata()),i=g.newsletters;g=g.deletedNewsletters;var j=i.reduce(function(a,b){var c;a.chats.push(d("WAWebNewsletterModelUtils").mapNewsletterToChat(b));a.metadata.push(d("WAWebNewsletterModelUtils").mapNewsletterToMetadata(b));c=(c=b.newsletterPictureMetadataMixin)==null?void 0:c.picture;c!=null&&a.pics.push(d("WAWebNewsletterModelUtils").mapPicturesToProfilePicThumb(b.idJid,c));return a},{chats:[],metadata:[],pics:[]}),k=j.chats,l=j.metadata;j=j.pics;c==null?void 0:c.addPoint("getAllNewslettersMetadata_end");c==null?void 0:c.addPoint("processDeletedNewsletters_start");yield C(g);c==null?void 0:c.addPoint("processDeletedNewsletters_end");i=(i=i.map(function(a){return a.idJid})).concat.apply(i,((g==null?void 0:g.id)||[]).map(function(a){return a.jid}));a===x.DirtyBit&&(c==null?void 0:c.addPoint("processUnsubscribedNewsletters_start"),yield E(i),c==null?void 0:c.addPoint("processUnsubscribedNewsletters_end"));d("WAWebNewsletterGatingUtils").isNewsletterMultiAdminM1ImprovementsEnabled()&&(c==null?void 0:c.addPoint("fetchAdminCountsForOwnerNewsletter_start"),yield (h||(h=b("Promise"))).all(l.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebNewsletterMembershipUtil").iAmOwner(a)){var b=(yield d("WAWebNewsletterGetAdminCountJob").getNewsletterAdminCount(d("WAJids").toNewsletterJid(a.id.toString())));a.adminCount=b}});return function(b){return a.apply(this,arguments)}}())),c==null?void 0:c.addPoint("fetchAdminCountsForOwnerNewsletter_start"));d("WALogger").LOG(u());yield A({chats:k,metadata:l,pics:j,messageCount:e,addSystemMsgs:f,qplEvent:c});d("WAWebNewsletterGatingUtils").isNewsletterMessageDeliveryUpdatesEnabled()&&d("WAWebNewsletterGatingUtils").isNewsletterGeosuspendEnabled()&&d("WAWebNewsletterGatingUtils").isNewsletterGeosuspendAdminAlertsEnabled()?(c==null?void 0:c.addPoint("processIntegrityUpdates_start"),yield (h||(h=b("Promise"))).all(l.map(function(a){d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a)&&void d("WAWebNewsletterGetIntegrityUpdatesAction").getIntegrityUpdatesAction(d("WAWebWidFactory").createWid(a.id.toString()),d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION)})),c==null?void 0:c.addPoint("processIntegrityUpdates_end")):d("WAWebNewsletterGatingUtils").isNewsletterMessageDeliveryUpdatesEnabled()?(c==null?void 0:c.addPoint("processDeliveryUpdates_start"),yield (h||(h=b("Promise"))).all(l.map(function(a){d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a)&&void d("WAWebNewsletterGetMessageDeliveryUpdatesAction").getMessageDeliveryUpdatesAction(d("WAWebWidFactory").createWid(a.id.toString()))})),c==null?void 0:c.addPoint("processDeliveryUpdates_end")):d("WAWebNewsletterGatingUtils").isNewsletterGeosuspendEnabled()&&d("WAWebNewsletterGatingUtils").isNewsletterGeosuspendAdminAlertsEnabled()&&(c==null?void 0:c.addPoint("processGeosuspensions_start"),yield (h||(h=b("Promise"))).all(l.map(function(a){d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a)&&void d("WAWebNewsletterGetGeoSuspendedCountriesAction").getGeoSuspendedCountriesAction(d("WAWebWidFactory").createWid(a.id.toString()))})),c==null?void 0:c.addPoint("processGeosuspensions_end"));d("WALogger").LOG(t())}catch(a){d("WALogger").ERROR(s()).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-retrieve-newsletters")}});return y.apply(this,arguments)}function e(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(r());try{var e,f=d("WAWebNewsletterModelUtils").getRoleByIdentifier(a);f=(yield d("WAWebNewsletterMetadataJob").getNewsletterMetadata(a,f,b==null?void 0:b.fields));if(f==null)return;var g=d("WAWebNewsletterModelUtils").mapNewsletterToChat(f),h=d("WAWebNewsletterModelUtils").mapNewsletterToMetadata(f);e=(e=f.newsletterPictureMetadataMixin)==null?void 0:e.picture;e=e?[d("WAWebNewsletterModelUtils").mapPicturesToProfilePicThumb(a,e)]:[];var i=void 0;if(d("WAWebNewsletterGatingUtils").isNewsletterMultiAdminM1ImprovementsEnabled()){var j;j=(j=b==null?void 0:b.adminFields)!=null?j:{};j=j.adminCount;j===!0&&(i=(yield d("WAWebNewsletterGetAdminCountJob").getNewsletterAdminCount(a)))}yield A({chats:[g],metadata:[babelHelpers["extends"]({},h,{adminCount:i})],pics:e,messageCount:b==null?void 0:b.messageCount});d("WALogger").LOG(q());return c("WAWebNewsletterCollection").get(f.idJid)}catch(a){if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===405)return;d("WALogger").ERROR(p()).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-retrieve-newsletter")}});return z.apply(this,arguments)}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chats,f=a.metadata,g=a.pics,p=a.messageCount,q=a.addSystemMsgs;a=a.qplEvent;d("WALogger").LOG(o());var r=G(e,f,g),s=r.filteredChats,t=r.filteredMetadata;r=r.filteredPics;a==null?void 0:a.addPoint("updateNewsletterChatRecords_start");yield d("WAWebNewsletterUpdateNewslettersRecordsJob").updateNewsletterChatRecords(s.map(d("WAWebCreateChat").createNewsletterObjectForStorage));a==null?void 0:a.addPoint("updateNewsletterChatRecords_end");d("WALogger").LOG(n());a==null?void 0:a.addPoint("updateNewsletterMetadata_start");yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata(t.map(d("WAWebNewsletterStorageUtils").createNewsletterMetadataObjectForStorage));a==null?void 0:a.addPoint("updateNewsletterMetadata_end");d("WALogger").LOG(m());a==null?void 0:a.addPoint("bulkPersistProfilePicChanges_start");yield d("WAWebDBBulkPersistProfilePic").bulkPersistProfilePicChanges(r.map(function(a){if(!Object.prototype.hasOwnProperty.call(a,"eurl"))return;var b=d("WAWebWidFactory").createWid(a.id.toString());return d("WAWebContactProfilePicThumbBridge").mapProfilePictureToProfilePicThumbRowType(b,{id:b,tag:(b=a.tag)!=null?b:void 0,eurl:(b=a.eurl)!=null?b:void 0,previewEurl:(b=a.previewEurl)!=null?b:void 0,stale:a.stale,eurlStale:!1,timestamp:(b=a.timestamp)!=null?b:Date.now()})}).filter(Boolean));a==null?void 0:a.addPoint("bulkPersistProfilePicChanges_end");d("WALogger").LOG(l());d("WALogger").LOG(k());c("WAWebNewsletterMetadataCollection").add(f,{merge:!0});d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.add(g,{merge:!0});c("WAWebNewsletterCollection").add(e,{merge:!0});a==null?void 0:a.addPoint("pullNewsletterMessagesFromServer_start");d("WALogger").LOG(j());w(p)&&(yield (h||(h=b("Promise"))).all(c("WAWebNewsletterCollection").filter(function(a){return!((a=a.newsletterMetadata)==null?void 0:a.isSuspendedOrTerminated)}).map(function(a){return d("WAWebNewsletterPullMessagesFromServerAction").pullNewsletterMessagesFromServer(a,{messageCount:p,resetUnreadCount:!0}).then(function(b){if(b.length===0&&q===!0)return d("WAWebNewsletterSystemMessages").addSystemMessagesToChat(a)})["catch"](function(){})})));a==null?void 0:a.addPoint("pullNewsletterMessagesFromServer_end");d("WALogger").LOG(i());a==null?void 0:a.addPoint("contactUpdates_start");s=f.filter(function(a){return a.name}).map(function(a){return{id:a.id,name:a.name}});d("WAWebContactCollection").ContactCollection.add(s,{merge:!0});a==null?void 0:a.addPoint("contactUpdates_end")});return B.apply(this,arguments)}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return;var b=a.id.map(function(a){return{id:a.jid.toString(),terminated:!0}});a=a.id.map(function(a){return{id:d("WAWebWidFactory").createWid(a.jid),terminated:!0}});yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata(b);c("WAWebNewsletterMetadataCollection").add(a,{merge:!0})});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield d("WAWebSchemaChat").getChatTable().all());c=c.map(function(a){return d("WAWebWidFactory").createWid(a.id)}).filter(function(b){return b.isNewsletter()&&!a.includes(b.toJid())});var e=[];c.map(function(a){e.push(d("WAWebNewsletterBridgeApi").NewsletterBridgeApi.deleteNewsletter({id:a,keep:!1})),e.push(d("WAWebNewsletterMetadataJob").deleteNewsletterMetadata(a.toString())),e.push(d("WAWebNewsletterDeleteChatJob").deleteNewsletterChat(a)),e.push(d("WAWebNewsletterMetadataJob").deleteNewsletterPicture(a.toString()))});yield (h||(h=b("Promise"))).all(e)});return F.apply(this,arguments)}function G(a,b,e){var f=b.filter(function(a){if(a.membershipType!=null)return a.membershipType===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest;a=c("WAWebNewsletterMetadataCollection").get(a.id);return a==null?!1:a.membershipType===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest}).map(function(a){return a.id});a=a.filter(function(a){return!f.includes(a.id)});b=b.filter(function(a){return!f.includes(a.id)});e=e.filter(function(a){return!f.includes(a.id)});return{filteredChats:a,filteredMetadata:b,filteredPics:e}}g.NewsletterMetadataUpdateEntryPoint=x;g.queryAndUpdateAllNewsletterMetadataAction=a;g.queryAndUpdateNewsletterMetadataAction=e;g.updateCollections=A;g.processDeletedNewsletters=C;g.processUnsubscribedNewsletters=E}),98);
__d("WAWebUpdateNewsletterMsgUIAction",["Promise","WAAckLevel","WAJids","WATimeUtils","WAWebFrontendMsgGetters","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgType","WAWebNewsletterCollection","WAWebNewsletterDBUtils","WAWebNewsletterDeleteChatJob","WAWebNewsletterMessageDeliveryUpdateAction","WAWebNewsletterPollVotesModelCollection","WAWebNewsletterReactionCollection","WAWebQueryAndUpdateNewslettersMetadataAction","WAWebReactionsMsgAction","WAWebRevokeMsgAction","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=d("WAJids").toNewsletterJid(e.toJid()),g=c("WAWebNewsletterCollection").get(e);g==null&&(g=(yield d("WAWebQueryAndUpdateNewslettersMetadataAction").queryAndUpdateNewsletterMetadataAction(f)),g!=null&&c("WAWebNewsletterCollection").add(g));if(g==null){yield d("WAWebNewsletterDeleteChatJob").deleteNewsletterChat(e);return}if(a.type==="reaction")return j(a);if(a.type==="poll_update"){if(a.subtype==="poll_vote")return l(a);return}if(a.subtype==="admin_revoke")return m(a,e);if(a.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL)return;f=(yield g.addQueue.enqueue((h||(h=b("Promise"))).resolve(a)));g.msgs.add(f)});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebMsgCollection").MsgCollection.get(a.reactionParentKey),c=a.reactionText;if(b==null)return;var e=b.serverId;if(e==null)return;d("WAWebNewsletterReactionCollection").updateOrCreateMessageReaction({parentMsg:b,reactionMsg:a,reactionCode:c});b={msgKey:a.id.toString(),parentMsgKey:d("WAWebNewsletterDBUtils").craftNewsletterMsgKeyFromServerId(e,a.from).toString(),senderUserJid:d("WAWebUserPrefsMeUser").getMeUser().toString(),reactionText:c,timestamp:a.t*1e3,orphan:0,read:!0,ack:d("WAAckLevel").ACK.SENT};yield d("WAWebReactionsMsgAction").addOrUpdateReactionsModelCollection(b,!1)});return k.apply(this,arguments)}function l(a){if(a.pollUpdateParentKey==null)return;var b=d("WAWebMsgCollection").MsgCollection.get(a.pollUpdateParentKey);if(b==null||a.type!==d("WAWebMsgType").MSG_TYPE.POLL_UPDATE)return;var c=a.senderTimestampMs;d("WAWebNewsletterPollVotesModelCollection").updateOrCreatePollVote({msgKey:a.id,parentMsgKey:b.id,selectedOptionLocalIds:new Set(a.selectedOptionLocalIds),timestamp:c!=null?d("WATimeUtils").castToMillisTime(c):d("WATimeUtils").castUnixTimeToMillisTime(d("WATimeUtils").castToUnixTime(a.t))})}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e=(e=c("WAWebNewsletterCollection").get(e))==null?void 0:e.msgs.get(a.protocolMessageKey);if(e==null)return(h||(h=b("Promise"))).resolve();yield d("WAWebNewsletterMessageDeliveryUpdateAction").removeMessageDeliveryUpdates(d("WAWebFrontendMsgGetters").getChat(e),[e]);return(h||(h=b("Promise"))).resolve(d("WAWebRevokeMsgAction").revoke(e,{subtype:a.subtype,msgKey:a.id,sender:d("WAWebMsgGetters").getIsSentByMe(a)?d("WAWebUserPrefsMeUser").getMeUser():a.from,revokeTimestamp:a.t}))});return n.apply(this,arguments)}g.updateNewsletterMessageUI=a}),98);
__d("WAWebNewsletterSubscriberModel",["WAWebBaseModel","WAWebModelUtils","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebModelUtils").prop(),c.membership=d("WAWebModelUtils").prop(),c.isPendingAdmin=d("WAWebModelUtils").prop(),c.contact=d("WAWebModelUtils").session(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletterSubscriber";a.idClass=c("WAWebWid");b=d("WAWebBaseModel").defineModel(a);g.NewsletterSubscriber=b}),98);
__d("WAWebTimedCache",["WATimeUtils"],(function(a,b,c,d,e,f,g){function a(a,b){if(a==null)return null;var c=d("WATimeUtils").unixTimeMs(),e=a.timestamp;a=a.value;c=c-e;return c<b?a:null}function b(a){return{timestamp:d("WATimeUtils").unixTimeMs(),value:a}}g.getTimedCacheItemValue=a;g.createTimedCacheItem=b}),98);
__d("WAWebUserPrefsNewsletter",["$InternalEnum","WAWebApiHydrateWidsUtil","WAWebNewsletterGatingUtils","WAWebTimedCache","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.NEWSLETTER_TAB_LAST_SEEN_TIMESTAMP);a=typeof a==="number"?a:0;return a}function e(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.NEWSLETTER_TAB_LAST_SEEN_TIMESTAMP,a)}function f(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_RECOMMENDED_NEWSLETTERS);return d("WAWebTimedCache").getTimedCacheItemValue(a,d("WAWebNewsletterGatingUtils").getRecommendedNewslettersRefreshInterval())}function h(a){a=d("WAWebTimedCache").createTimedCacheItem(a);return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_RECOMMENDED_NEWSLETTERS,a)}var i=b("$InternalEnum").Mirrored(["FULL","LIMITED"]);function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS);a=JSON.stringify(a);b=b==null?void 0:b.get(a);a=d("WAWebApiHydrateWidsUtil").hydrateWids(b);return d("WAWebTimedCache").getTimedCacheItemValue(a,d("WAWebNewsletterGatingUtils").getNewsletterSubscriberListCacheRefreshInSeconds()*1e3)});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;c=(c=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS))!=null?c:new Map();a=JSON.stringify(a);b=d("WAWebTimedCache").createTimedCacheItem(b);c.set(a,b);yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS,c)});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c={view:i.LIMITED,newsletterJid:a};a={view:i.FULL,newsletterJid:a};b=(b=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS))!=null?b:new Map();c=JSON.stringify(c);a=JSON.stringify(a);var e=d("WAWebTimedCache").createTimedCacheItem(null);b.set(c,e);b.set(a,e);yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS,b)});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTER_DIRECTORY_PAGES);a=JSON.stringify(a);b=b==null?void 0:b.get(a);return d("WAWebTimedCache").getTimedCacheItemValue(b,d("WAWebNewsletterGatingUtils").getNewsletterDirectoryPageRefreshInterval())});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;c=(c=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTER_DIRECTORY_PAGES))!=null?c:new Map();a=JSON.stringify(a);b=d("WAWebTimedCache").createTimedCacheItem(b);c.set(a,b);yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTER_DIRECTORY_PAGES,c)});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTER_DIRECTORY_CATERGORY_PREVIEW);a=JSON.stringify(a);b=b==null?void 0:b.get(a);return d("WAWebTimedCache").getTimedCacheItemValue(b,d("WAWebNewsletterGatingUtils").getNewsletterDirectoryCategoriesPreviewRefreshIntervalMs())});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;c=(c=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTER_DIRECTORY_CATERGORY_PREVIEW))!=null?c:new Map();a=JSON.stringify(a);b=d("WAWebTimedCache").createTimedCacheItem(b);c.set(a,b);yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WA_WEB_CACHED_NEWSLETTER_DIRECTORY_CATERGORY_PREVIEW,c)});return w.apply(this,arguments)}g.getNewsletterTabLastSeenTimestamp=a;g.setNewsletterTabLastSeenTimestamp=e;g.getCachedRecommendedNewsletters=f;g.setCachedRecommendedNewsletters=h;g.ValidCachedNewsletterSubscriberKeys=i;g.getCachedNewsletterSubscribers=j;g.setCachedNewsletterSubscribers=l;g.flushCachedNewsletterSubscribers=n;g.getCachedNewsletterDirectoryPage=p;g.setCachedNewsletterDirectoryPage=r;g.getCachedNewsletterDirectoryCategoriesPreview=t;g.setCachedNewsletterDirectoryCategoriesPreview=v}),98);
__d("WAWebNewsletterBridgeApi",["WALogger","WAWebCommonNewsletterEnums","WAWebContactCollection","WAWebDBUpdateLastAddOnPreviewChat","WAWebLastAddOnDBSerialization","WAWebMexNewsletterUtils","WAWebMsgCollection","WAWebMsgModelFromData","WAWebNewsletterBridgeMsgAddOnsUtils","WAWebNewsletterCollection","WAWebNewsletterGatingUtils","WAWebNewsletterMetadataCollection","WAWebNewsletterReportCollection","WAWebNewsletterSubscriberModel","WAWebNewsletterValidationUtils","WAWebProfilePicThumbCollection","WAWebQueryAndUpdateNewslettersMetadataAction","WAWebShouldUpdateLastAddOnPreview","WAWebShowNewsletterMetadataUpdateNotification","WAWebShowNewsletterRoleChangeNotification","WAWebUpdateLastAddOnPreviewChatAction","WAWebUpdateNewsletterMsgUIAction","WAWebUpdateUnreadChatAction","WAWebUserPrefsNewsletter","WAWebWidFactory","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[updateNewsletterMembershipRole] called with newsletterMetadata = null"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[updateNewsletterMembershipRole] called with newsletterMetadata = null"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[subscribeToNewsletter] called with newsletterMetadata = null"]);j=function(){return a};return a}var k=-1,l=0;function m(a,b){a=c("WAWebNewsletterCollection").get(a);void (a==null?void 0:a.mute.setMute(b,!1,!0))}a={updateNewsletterMessageUI:function(a){var b=a.msg,c=a.chatID;a=a.isOrphan;if(a)return;a=d("WAWebMsgModelFromData").msgModelFromMsgData(b);return d("WAWebUpdateNewsletterMsgUIAction").updateNewsletterMessageUI(a,c)},deleteNewsletter:function(a){var b=a.id;a=a.keep;var e=c("WAWebNewsletterCollection")==null?void 0:c("WAWebNewsletterCollection").get(b),f=e==null?void 0:e.newsletterMetadata;if(a){f!=null&&(f.membershipType=d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest);return}a=e==null?void 0:e.msgs;a!=null&&d("WAWebMsgCollection").MsgCollection.remove(a);e==null?void 0:e["delete"]();e==null?void 0:(f=e.newsletterMetadata)==null?void 0:f["delete"]();d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.remove(b)},joinNewsletter:function(a){var b=a.newsletter,e=a.metadata,f=a.pic,g=a.msgs;a=a.noEarlierMsgs;b=c("WAWebNewsletterCollection").gadd(b,{merge:!0});g!=null&&b.msgs.add(g,{merge:!0,at:0});a===!0&&(b.msgs.msgLoadState.noEarlierMsgs=!0);d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.add(f,{merge:!0});c("WAWebNewsletterMetadataCollection").add(e,{merge:!0})},updateNewsletterMetadata:function(a){var b=a.metadata,e=a.newsletter;a=a.pic;var f=b.id;b=babelHelpers.objectWithoutPropertiesLoose(b,["id"]);e.id;e=babelHelpers.objectWithoutPropertiesLoose(e,["id"]);a.id;a=babelHelpers.objectWithoutPropertiesLoose(a,["id"]);c("WAWebNewsletterCollection").gadd(f).set(c("lodash").pickBy(e,function(a){return a!=null}),{merge:!0});c("WAWebNewsletterMetadataCollection").gadd(f).set(c("lodash").pickBy(b,function(a){return a!=null}),{merge:!0});d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(f).set(a,{merge:!0});b.name!=null&&d("WAWebContactCollection").ContactCollection.gadd(f).set({name:b.name},{merge:!0})},muteNewsletter:function(a){a=a.id;m(a,k)},unmuteNewsletter:function(a){a=a.id;m(a,l)},updateNewsletterSubscriberCount:function(a){var b,d=a.id;a=a.update;d=c("WAWebNewsletterCollection")==null?void 0:(d=c("WAWebNewsletterCollection").get(d))==null?void 0:d.newsletterMetadata;if(d==null)return;var e=d.size;b=(b=a.newSubscriberCount)!=null?b:Number(a.increment)+e;d.set("size",b)},updateNewsletterUnreadMsgCount:function(a){a=a.id;a=c("WAWebNewsletterCollection").get(a);a!=null&&d("WAWebUpdateUnreadChatAction").updateUnreadCountMD(a,0,!1)},subscribeToNewsletter:function(a){a=a.newsletter;var b=a.newsletterMetadata;if(b==null){d("WALogger").ERROR(j());return}b.membershipType=d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber;c("WAWebNewsletterCollection").add(a,{merge:!0})},loadNewsletterPreviewChat:function(a){var b=a.metadata,e=a.pic,f=a.newsletter;a=a.messages;var g=b.id,h=babelHelpers.objectWithoutPropertiesLoose(b,["id"]);c("WAWebNewsletterMetadataCollection").gadd(g).set(h,{merge:!0});if(e!=null){e.id;h=babelHelpers.objectWithoutPropertiesLoose(e,["id"]);d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(g).set(h,{merge:!0})}d("WAWebContactCollection").ContactCollection.add({id:g,name:b.name},{merge:!0});c("WAWebNewsletterCollection").add(f,{merge:!0});e=c("WAWebNewsletterCollection").get(g);e!=null&&a!=null&&e.msgs.add(a,{merge:!0});return e},terminateNewsletter:function(a){var b=a.id;a=a.msgs;c("WAWebNewsletterMetadataCollection")==null?void 0:c("WAWebNewsletterMetadataCollection").gadd(b).set({terminated:!0},{merge:!0});if(a!=null){(b=c("WAWebNewsletterCollection").get(b))==null?void 0:b.msgs.add(a)}},updateNewsletterPicture:function(a){a=a.pic;var b=a.id;a=babelHelpers.objectWithoutPropertiesLoose(a,["id"]);d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(b).set(a,{merge:!0})},updateNewsletterMessages:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=a.reactions,e=a.reactionIdsToRemove,f=a.timestamp,g=a.ids,h=a.viewCounts;a=a.pollVotes;yield (b=d("WAWebNewsletterBridgeMsgAddOnsUtils")).updateReactions({ids:g,reactions:c,reactionIdsToRemove:e});yield b.updatePollVotes({ids:g,pollVotes:a});b.updateViewCounts(h);b.updateLastUpdateTs(g,f)});function c(b){return a.apply(this,arguments)}return c}(),updateNewsletterMessageDeliveryUpdate:function(a){var b,e=a.id,f=a.modelUpdatesToAdd;a=a.modelUpdatesToRemove;e=c("WAWebNewsletterCollection").get(e);if(e==null)return;(b=e.newsletterMetadata)==null?void 0:b.messageDeliveryUpdates.remove(a);(b=e.newsletterMetadata)==null?void 0:b.messageDeliveryUpdates.add(f.map(function(a){var b=d("WAWebMsgModelFromData").msgModelFromMsgData(a.msgData);d("WAWebMsgCollection").MsgCollection.add(b,{merge:!0});return babelHelpers["extends"]({},a,{msgModel:b})}),{merge:!0})},findMsgKeyFromServerId:function(a){var b=a.from,d=a.serverId;a=c("WAWebNewsletterCollection").get(b);return a==null?void 0:(b=a.msgs)==null?void 0:(a=b.findFirst(function(a){return a.serverId===d}))==null?void 0:a.id},updateMsgsViewed:function(a){a=a.ids;a.forEach(function(a){(a=d("WAWebMsgCollection").MsgCollection.get(a))==null?void 0:a.set("viewed",!0)})},updateGeosuspendedCountry:function(a){var b=a.id,d=a.countryCodes;a=a.toAdd;b=c("WAWebNewsletterCollection").get(b);if(b==null)return;if(a){(a=b.newsletterMetadata)==null?void 0:a.geosuspendedCountries.add(d.map(function(a){return{id:a,geosuspended:!0}}))}else{(a=b.newsletterMetadata)==null?void 0:a.geosuspendedCountries.remove(d.map(function(a){return a}))}},suspendNewsletter:function(a){a=a.id;c("WAWebNewsletterMetadataCollection").gadd(a).set({suspended:!0},{merge:!0})},geosuspendNewsletter:function(a){a=a.id;c("WAWebNewsletterMetadataCollection").gadd(a).set({suspended:!0,geosuspended:!0},{merge:!0})},updateProfilePictureDeletionAlertState:function(a){a=a.newsletterWid;c("WAWebNewsletterMetadataCollection").gadd(a).set({hasProfilePictureDeletionAlerts:!0},{merge:!0})},getActiveNewsletter:function(){var a;return(a=c("WAWebNewsletterCollection").getActive())==null?void 0:a.id},getNewsletterMetadata:function(a){a=a.id;return(a=c("WAWebNewsletterCollection").get(a))==null?void 0:a.newsletterMetadata},handleMyRoleChangeNotification:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.jid;var e=d("WAWebWidFactory").createWid(a);e=c("WAWebNewsletterCollection").get(e);e==null?void 0:(b=e.newsletterMetadata)==null?void 0:(b=b.subscribers)==null?void 0:b.reset();b=e!=null;yield d("WAWebQueryAndUpdateNewslettersMetadataAction").queryAndUpdateNewsletterMetadataAction(a,{messageCount:b?void 0:1,fields:{membership:!0,state:!0,creationTime:b?void 0:!0,description:b?void 0:!0,handle:b?void 0:!0,inviteLink:b?void 0:!0,linkedAccounts:b?void 0:!0,muted:b?void 0:!0,name:b?void 0:!0,picture:b?void 0:!0,privacy:b?void 0:!0,subscribers:b?void 0:!0,verification:b?void 0:!0}})});function e(b){return a.apply(this,arguments)}return e}(),displayRoleChangeDesktopNotification:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e;a=a.notification;var f=a.xwa2_notify_newsletter_admin_promote!=null?"promote":"demote";b=(b=a.xwa2_notify_newsletter_admin_promote)!=null?b:a.xwa2_notify_newsletter_admin_demote;if(b==null)return;a=b!=null?c("WAWebNewsletterCollection").get(b==null?void 0:b.id):null;var g=b.user.pn;e=d("WAWebNewsletterGatingUtils").isNewsletterTransferOwnershipNotificationReceiverEnabed()?(e=b.actor)==null?void 0:e.pn:(e=b.admin)==null?void 0:e.pn;b=d("WAWebMexNewsletterUtils").mapRoleToMembership(b.user_new_role);if(g==null||a==null||b==null)return;g=d("WAWebWidFactory").createWid(g);e=e==null?null:d("WAWebWidFactory").createWid(e);a=a;yield d("WAWebShowNewsletterRoleChangeNotification").showNewsletterRoleChangeNotification({mode:f,user:g,admin:e,chat:a,newRole:b})});function e(b){return a.apply(this,arguments)}return e}(),handleOtherUserRoleChangeNotification:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=a.jid,f=a.userId;a=a.newRole;e=d("WAWebWidFactory").createWid(e);e=c("WAWebNewsletterCollection").get(e);b=e==null?void 0:(b=e.newsletterMetadata)==null?void 0:(b=b.subscribers)==null?void 0:b.get(f);if(b!=null)b.membership=a;else{b=d("WAWebContactCollection").ContactCollection.get(f);if(a===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin&&b!=null){var g;e==null?void 0:(g=e.newsletterMetadata)==null?void 0:(g=g.subscribers)==null?void 0:g.add(new(d("WAWebNewsletterSubscriberModel").NewsletterSubscriber)({id:f,membership:a,isPendingAdmin:!1,contact:b}),{silent:!0})}}e==null?void 0:(g=e.newsletterMetadata)==null?void 0:(b=g.subscribers)==null?void 0:b.sort();if(a===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin){e==null?void 0:(g=e.newsletterMetadata)==null?void 0:(b=g.pendingAdmins)==null?void 0:b.remove(f)}});function e(b){return a.apply(this,arguments)}return e}(),updateChatPreviewFromReaction:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.reactionMsgObj;a=a.parentMsgKey;b=(yield d("WAWebShouldUpdateLastAddOnPreview").filterChatsWithAddOnPreviewUpdates([d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromReactionRowType(babelHelpers["extends"]({},b,{parentMsgKey:a.toString()}))]));b.size>0&&(yield d("WAWebDBUpdateLastAddOnPreviewChat").updateDatabaseForLastAddOnPreview(b),d("WAWebUpdateLastAddOnPreviewChatAction").updateModelsForLastAddOnPreview(b))});function c(b){return a.apply(this,arguments)}return c}(),updateChatPreviewFromVote:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.voteMsgObj;a=a.parentMsgKey;b=(yield d("WAWebShouldUpdateLastAddOnPreview").filterChatsWithAddOnPreviewUpdates([d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromVoteData(babelHelpers["extends"]({},b,{parentMsgKey:a}),!1)]));b.size>0&&(yield d("WAWebDBUpdateLastAddOnPreviewChat").updateDatabaseForLastAddOnPreview(b),d("WAWebUpdateLastAddOnPreviewChatAction").updateModelsForLastAddOnPreview(b))});function c(b){return a.apply(this,arguments)}return c}(),updateNewsletterReports:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.reports;d("WAWebNewsletterReportCollection").NewsletterReportCollection.reset();d("WAWebNewsletterReportCollection").NewsletterReportCollection.add(a)});function c(b){return a.apply(this,arguments)}return c}(),updateNewsletterReport:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.report;d("WAWebNewsletterReportCollection").NewsletterReportCollection.add(a,{merge:!0})});function c(b){return a.apply(this,arguments)}return c}(),updateMyNewsletterMembershipRole:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.newsletter;a=a.newRole;var e=b.newsletterMetadata;if(e==null){d("WALogger").ERROR(i());return}e.membershipType=a;c("WAWebNewsletterCollection").add(b,{merge:!0})});function e(b){return a.apply(this,arguments)}return e}(),updateNewsletterMemberRole:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.newsletter,c=a.member;a=a.newRole;var e=b.newsletterMetadata;if(e==null){d("WALogger").ERROR(h());return}e=(e=e.subscribers)==null?void 0:e.get(c.id);if(e!=null){e.membership=a;(c=b.newsletterMetadata)==null?void 0:(e=c.subscribers)==null?void 0:e.sort();a=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(b.id.toJid());yield d("WAWebUserPrefsNewsletter").flushCachedNewsletterSubscribers(a)}});function c(b){return a.apply(this,arguments)}return c}(),displayNewsletterMetadataUpdateNotification:function(a){a=a.notification;var b=a.newsletterId,e=a.actorId;a=a.updates;b=c("WAWebNewsletterCollection").get(b);if(b==null)return;void d("WAWebShowNewsletterMetadataUpdateNotification").showNewsletterMetadataUpdateNotification({chat:b,user:e,updates:a})},expireNewsletterAdminInvites:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.expiredMsgData;a.forEach(function(a){var b=a.id;a=a.newsletterAdminInviteInfo;(b=d("WAWebMsgCollection").MsgCollection.get(b))==null?void 0:b.set({newsletterAdminInviteInfo:a})})});function c(b){return a.apply(this,arguments)}return c}()};g.NewsletterBridgeApi=a}),98);
__d("WAWebNewsletterBridgeMsgAddOnsUtils",["Promise","WAWebMsgCollection","WAWebNewsletterPollVotesModelCollection","WAWebNewsletterReactionCollection","WAWebPollsCreateOptionLocalIdMap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){if(a!=null&&a.size>0)for(a of a.entries()){var b=a[0],c=a[1];b=d("WAWebMsgCollection").MsgCollection.get(b);b==null?void 0:b.set("viewCount",c)}}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.reactions,e=a.ids;a=a.reactionIdsToRemove;a!=null&&d("WAWebNewsletterReactionCollection").NewsletterMessageReactionsCollection.remove(a);yield (h||(h=b("Promise"))).all((a=e.map(function(a){return d("WAWebNewsletterReactionCollection").NewsletterMessageReactionsCollection.find(a.toString())["catch"](function(){})}))!=null?a:[]);d("WAWebNewsletterReactionCollection").NewsletterMessageReactionsCollection.add(c.map(function(a){return{id:a.parentMsgKey,reactionCountMap:a.emojiCountMap,reactionCountMapTs:a.serverTimestamp}}),{merge:!0})});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.pollVotes;a=a.ids;yield (h||(h=b("Promise"))).all((a=a.map(function(a){return d("WAWebNewsletterPollVotesModelCollection").NewsletterPollVotesModelCollection.find(a)["catch"](function(){})}))!=null?a:[]);a=(yield h.all(c.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebMsgCollection").MsgCollection.get(a.parentMsgKey);b=b==null?void 0:b.pollOptions;if(b==null)return;b=(yield d("WAWebPollsCreateOptionLocalIdMap").createOptionLocalIdMap(b));return{id:a.parentMsgKey,pollVotesCountMap:k(a.voteCountMap,b),pollVotesCountMapTs:a.serverTimestamp}});return function(b){return a.apply(this,arguments)}}())));d("WAWebNewsletterPollVotesModelCollection").NewsletterPollVotesModelCollection.add(a.filter(Boolean),{merge:!0})});return j.apply(this,arguments)}function k(a,b){var c=new Map();for(a of a.entries()){var d=a[0],e=a[1];c.set(b.getLocalIdForHexHash(d),e)}return c}function f(a,b){b!=null&&a.forEach(function(a){a=d("WAWebMsgCollection").MsgCollection.get(a);a==null?void 0:a.set("lastUpdateFromServerTs",b)})}g.updateViewCounts=a;g.updateReactions=c;g.updatePollVotes=e;g.updateLastUpdateTs=f}),98);
__d("WAWebGetEphemeralFieldsMsgActionsUtils",["WAWebABProps","WAWebChatEphemerality"],(function(a,b,c,d,e,f,g){function a(a){var b={};d("WAWebChatEphemerality").isEphemeralSettingOn(a)&&(b.ephemeralDuration=d("WAWebChatEphemerality").getEphemeralSetting(a));var c=d("WAWebChatEphemerality").getEphemeralSettingTimestamp(a);c!=null&&(b.ephemeralSettingTimestamp=c);c=d("WAWebChatEphemerality").getDisappearingModeInitiator(a);c!=null&&(b.disappearingModeInitiator=c);if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){c=d("WAWebChatEphemerality").getDisappearingModeTrigger(a);c!=null&&(b.disappearingModeTrigger=c);c=d("WAWebChatEphemerality").getDisappearingModeInitiatedByMe(a);c!=null&&(b.disappearingModeInitiatedByMe=c)}return babelHelpers["extends"]({},b)}g.getEphemeralFields=a}),98);
__d("WAWebMexCreateNewsletterAdminInviteJob",["WANullthrows","WATimeUtils","WAWebApiContact","WAWebMexClient","WAWebMexCreateNewsletterAdminInviteJobMutation.graphql","WAWebMexUtils","WAWebNewsletterRpcUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i=h!==void 0?h:h=b("WAWebMexCreateNewsletterAdminInviteJobMutation.graphql");function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return k(a,b)})});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){return d("WAWebMexUtils").runWithErrorHandler(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=e.isLid()?e:d("WAWebApiContact").getCurrentLid(e);if(b==null)throw c("err")("No LID for user");b=(yield d("WAWebMexClient").fetchQuery(i,{newsletter_id:a,user_id:b.toString()}));b=b.xwa2_newsletter_admin_invite_create;b=c("WANullthrows")(b==null?void 0:b.invite_expiration_time);return{inviteExpiration:d("WATimeUtils").castToUnixTime(Number.parseInt(b,10))}}),d("WAWebMexUtils").MexSupportedFeature.Newsletter)});return l.apply(this,arguments)}g.createNewsletterAdminInvite=a}),98);
__d("WAWebNewsletterSendMsgAction",["Promise","WAAckLevel","WALogger","WANullthrows","WATimeUtils","WAWebDBProcessEditProtocolMsgs","WAWebFrontendMsgGetters","WAWebGetEphemeralFieldsMsgActionsUtils","WAWebMessageSendPerfReporter","WAWebMessageSendReporter","WAWebMexCreateNewsletterAdminInviteJob","WAWebMsgDataFromModel","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModel","WAWebMsgModelFromData","WAWebNewsletterCollection","WAWebNewsletterErrors","WAWebNewsletterGatingUtils","WAWebNewsletterSendMessageJob","WAWebNewsletterSendMsgActionUtils","WAWebNewsletterUpdateMsgsRecordsJob","WAWebNewsletterValidationUtils","WAWebSendMsgChatAction","WAWebSendMsgResultAction","WAWebSendTextMsgChatAction","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebWamEnumMessageSendResultType","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sendNewsletterAdminInviteMessage] Failed to send message ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to send message"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Empty serverId returned from server"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to send message, "," from server"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to persist sent message on db"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Sent message "," -> ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Sending message "," -> ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Forwarding MMS messages is not supported"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Poll creation is not enabled"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to edit message"]);r=function(){return a};return a}function a(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=d("WAWebStateUtils").unproxy(a);if(!a.isNewsletter)throw new(d("WAWebNewsletterErrors").UnexpectedNonNewsletterChatError)();b=(yield d("WAWebSendTextMsgChatAction").createTextMsgData(a,b,e));if(b==null)throw c("err")("Failed to generate MsgData");d("WAWebNewsletterSendMsgActionUtils").validateMsgDataForMsgSend(b,a);e=new(d("WAWebMsgModel").Msg)(b);return A({chat:a,msg:e,type:"text"})});return s.apply(this,arguments)}function e(a){var c=d("WAWebFrontendMsgGetters").getChat(a);return d("WAWebFrontendMsgGetters").getAsMms(a)?(h||(h=b("Promise"))).resolve():A({chat:c,msg:a,type:"text"})}function f(a,c,e){if(!a.isNewsletter)return(h||(h=b("Promise"))).reject(new(d("WAWebNewsletterErrors").UnexpectedNonNewsletterChatError)());c=c instanceof d("WAWebMsgModel").Msg?c:new(d("WAWebMsgModel").Msg)(c);c.local=!0;return A({chat:a,msg:c,type:"media",uploadMediaMsg:e})}function t(a){a.wamMessageSendReporter=new(d("WAWebMessageSendReporter").MessageSendReporter)(a),a.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:a.to,mediaType:a.getWamMediaType(),messageType:a.getWamMessageType()})}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var c=d("WAWebDBProcessEditProtocolMsgs").generateMessageEdit(d("WAWebMsgDataFromModel").msgDataFromMsgModel(a),d("WAWebMsgDataFromModel").msgDataFromMsgModel(b));c=c.editedMsgData;a.set(c);c=(yield d("WAWebNewsletterSendMessageJob").sendNewsletterMessageJob({type:"edit",editType:d("WAWebMsgGetters").getIsMedia(a)?"media":"text",msg:a,newsletterJid:d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a.id.remote.toJid())}));b.updateAck(d("WAAckLevel").ACK.SENT);return{t:c.ack.t,messageSendResult:c.success===!0?d("WAWebSendMsgResultAction").SendMsgResult.OK:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_NETWORK}}catch(a){d("WALogger").ERROR(r()).devConsole(a).tags("newsletter").sendLogs("newsletter-edit-fail");return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}});return v.apply(this,arguments)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgData;a=a.chat;if(!d("WAWebNewsletterGatingUtils").isNewsletterPollsCreationEnabled()){d("WALogger").ERROR(q()).tags("newsletter").sendLogs("poll-creation-not-enabled");throw c("err")("Poll creation is not enabled")}b=new(d("WAWebMsgModel").Msg)(b);a=(yield A({chat:a,msg:b,type:"pollCreation"}));return[b,a]});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebFrontendMsgGetters").getIsMms(b)){d("WALogger").ERROR(p()).devConsole("Forwarding MMS messages must be done via MediaPrep");return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}b=(yield d("WAWebNewsletterSendMsgActionUtils").prepMsgDataForForward(b));return A({chat:a,msg:d("WAWebMsgModelFromData").msgModelFromMsgData(b),type:"text"})});return z.apply(this,arguments)}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chat,f=a.type,g=a.uploadMediaMsg,i=a.msg;t(i);d("WALogger").DEV(o(),(a=i)==null?void 0:a.id,e.id.toJid());(a=i.wamMessageSendPerfReporter)==null?void 0:a.startRenderedStage();yield e.addQueue.enqueue((h||(h=b("Promise"))).resolve(i)).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords([d("WAWebMsgDataFromModel").msgDataFromMsgModel(i)]),e.msgs.add(a),e.t=i.t});return function(b){return a.apply(this,arguments)}}());(a=i.wamMessageSendPerfReporter)==null?void 0:a.postRenderedStage();try{try{g!=null&&(i=(yield g(i)))}catch(a){throw new(d("WAWebNewsletterErrors").NewsletterMediaUploadError)()}(a=i.wamMessageSendPerfReporter)==null?void 0:a.startReadyToSendStage();g=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(e.id.toJid());a=f==="media"?{msg:i,type:f,newsletterJid:g,mediaHandle:c("WANullthrows")(i.mediaHandle,"Unexpected null mediaHandle")}:{msg:i,type:f,newsletterJid:g};(f=i.wamMessageSendPerfReporter)==null?void 0:f.postReadyToSendStage();(g=i.wamMessageSendPerfReporter)==null?void 0:g.startWrittenWireStage();f=(yield e.sendQueue.enqueue(d("WAWebNewsletterSendMessageJob").sendNewsletterMessageJob(a)));(g=i.wamMessageSendPerfReporter)==null?void 0:g.postWrittenWireStage();switch(f.success){case!0:d("WALogger").DEV(n(),(a=i)==null?void 0:a.id,e.id.toJid());g=f.serverId;if(g==null)throw new(d("WAWebNewsletterErrors").MissingNewsletterServerIdError)();i.serverId=f.serverId;i.t=f.ack.t;i.updateAck(d("WAAckLevel").ACK.SENT,!0);try{(a=i.wamMessageSendPerfReporter)==null?void 0:a.startSavedStage();yield d("WAWebNewsletterUpdateMsgsRecordsJob").updateNewsletterMsgRecord(i);(g=i.wamMessageSendPerfReporter)==null?void 0:g.postSavedStage()}catch(a){d("WALogger").ERROR(m()).tags("newsletter").devConsole(a).sendLogs("newsletter-send-message-db-fail")}(a=i.wamMessageSendReporter)==null?void 0:a.postSuccess();return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.OK};case!1:d("WALogger").ERROR(l(),f.ack.error).tags("newsletter").devConsole(f.ack.error).sendLogs("newsletter-send-message-fail-server");i.updateAck(d("WAAckLevel").ACK.FAILED,!0);(g=i.wamMessageSendReporter)==null?void 0:g.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_NETWORK,isTerminal:!1});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_NETWORK}}}catch(b){b instanceof d("WAWebNewsletterErrors").MissingNewsletterServerIdError?d("WALogger").ERROR(k()).tags("newsletter").sendLogs("newsletter-empty-server-id"):d("WALogger").WARN(j()).tags("newsletter").devConsole(b);i.updateAck(d("WAAckLevel").ACK.FAILED,!0);(a=i.wamMessageSendReporter)==null?void 0:a.postFailure({result:b instanceof d("WAWebNewsletterErrors").NewsletterMediaUploadError?d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UPLOAD:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!1});return b instanceof d("WAWebNewsletterErrors").NewsletterMediaUploadError?{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UPLOAD}:{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}finally{i.wamMessageSendReporter=null,i.wamMessageSendPerfReporter=null}});return B.apply(this,arguments)}function C(a,b){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.newsletterWid,f=b.invitee,g=b.inviteMessage;b=b.base64Thumb;try{a=d("WAWebStateUtils").unproxy(a);f=(yield d("WAWebMexCreateNewsletterAdminInviteJob").createNewsletterAdminInvite(d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(e.toJid()),f));f=f.inviteExpiration;var h=c("WANullthrows")(c("WAWebNewsletterCollection").get(e)),j=d("WAWebUserPrefsMeUser").assertGetMeUser();j=babelHelpers["extends"]({ack:d("WAAckLevel").ACK.CLOCK,from:j,id:new(c("WAWebMsgKey"))({from:j,to:a.id,id:yield c("WAWebMsgKey").newId(),participant:void 0,selfDir:"out"}),local:!0,t:d("WATimeUtils").unixTime(),to:a.id,type:"newsletter_admin_invite",kind:"newsletterAdminInvite",isNewMsg:!0,newsletterAdminInviteInfo:{newsletterId:d("WAWebWidFactory").toNewsletterWid(e),newsletterName:h==null?void 0:h.name,inviteExpiration:c("WANullthrows")(f),inviteMessage:g,pictureThumbnail:b}},d("WAWebGetEphemeralFieldsMsgActionsUtils").getEphemeralFields(a));return d("WAWebSendMsgChatAction").addAndSendMsgToChat(a,j)[1]}catch(a){d("WALogger").ERROR(i(),a).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-send-admin-invite");return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}});return D.apply(this,arguments)}g.sendNewsletterTextMsg=a;g.resendNewsletterMsg=e;g.sendNewsletterMediaMsg=f;g.sendNewsletterEditMsg=u;g.sendNewsletterPollCreationMsg=w;g.forwardNewsletterMessage=y;g.sendNewsletterAdminInviteMessage=C}),98);
__d("WAWebNewsletterSendMsgActionUtils",["WAWebConstantsDeprecated","WAWebFrontendMsgGetters","WAWebMediaGetUploadOriginForChat","WAWebMediaOpaqueData","WAWebMediaUploadMmsThumbnail","WAWebMmsMediaTypes","WAWebMsgModelFromData","WAWebMsgModelUtils","WAWebNewsletterErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebMsgModelUtils").typeIsUrl(a)?i(a):a});return h.apply(this,arguments)}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebFrontendMsgGetters").getAsUrl(d("WAWebMsgModelFromData").msgModelFromMsgData(a));if(b==null)return a;var e=b.thumbnailHQ;if(e==null)return a;e=(yield c("WAWebMediaUploadMmsThumbnail")({thumbnail:yield c("WAWebMediaOpaqueData").createFromBase64Jpeg(e),mediaType:d("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK,uploadOrigin:c("WAWebMediaGetUploadOriginForChat")(d("WAWebFrontendMsgGetters").getChat(b.unsafe())),forwardedFromWeb:!0,timeout:c("WAWebConstantsDeprecated").MMS_THUMBNAIL_UPLOAD_TIMEOUT,isViewOnce:!1}));b=e.filehash;e=e.mediaEntry;return babelHelpers["extends"]({},a,{thumbnailDirectPath:e==null?void 0:e.directPath,thumbnailSha256:b,thumbnailEncSha256:void 0,mediaKey:void 0,mediaKeyTimestamp:void 0})});return j.apply(this,arguments)}function e(a,b){if(a.quotedParticipant!=null&&a.quotedParticipant!==b.id)throw new(d("WAWebNewsletterErrors").UnexpectedNewsletterQuotedParticipantMismatchError)()}g.prepMsgDataForForward=a;g.validateMsgDataForMsgSend=e}),98);
__d("WAWebChatFlowTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({Group:"group",Broadcast:"broadcast",Chat:"chat",Community:"community",Newsletter:"newsletter"});f.ChatKindType=a}),66);
__d("WAWebFbtIntlList",["fbt","invariant","err","react"],(function(a,b,c,d,e,f,g,h,i){var j;a=j||c("react");var k={AND:"AND",NONE:"NONE",OR:"OR"},l={BULLET:"BULLET",COMMA:"COMMA",SEMICOLON:"SEMICOLON"},m=500;b=function(a,b,c){var d=a.length;if(d===0)return"";else if(d===1)return a[0];var e=a[d-1],f=a[0],g=0;for(var i=1;i<d-1;++i){if(i>=m){g=d-i;break}switch(c){case l.SEMICOLON:f=h._("__JHASH__SCmuCOVb_Pg__JHASH__",[h._param("previous-items",f),h._param("following-items",a[i])]);break;case l.BULLET:f=h._("__JHASH__f9RdP7tdSf8__JHASH__",[h._param("previous-items",f),h._param("following-items",a[i])]);break;default:f=h._("__JHASH__4dM6sWMFHmU__JHASH__",[h._param("previous-items",f),h._param("following-items",a[i])])}}return g>0?n(f,g,b||k.AND,c||l.COMMA):o(f,e,b||k.AND,c||l.COMMA)};function n(a,b,c,d){if(d===l.COMMA)switch(c){case k.AND:return h._("__JHASH__bssoxwHUctk__JHASH__",[h._param("previous-items",a),h._param("overflow-item-count",b)]);case k.OR:return h._("__JHASH__FSmQmayqZTe__JHASH__",[h._param("previous-items",a),h._param("overflow-item-count",b)]);case k.NONE:return h._("__JHASH__3D3R4jwPOsr__JHASH__",[h._param("previous-items",a),h._param("overflow-item-count",b)])}return h._("__JHASH__0aBoHroKdnE__JHASH__",[h._param("previous-items",a)])}n.displayName=n.name+" [from "+f.id+"]";function o(a,b,d,e){switch(d){case k.AND:return h._("__JHASH__2IRcYgoR_v3__JHASH__",[h._param("list-of-items",a),h._param("last-item",b)]);case k.OR:return h._("__JHASH__3MgsQlJW7aL__JHASH__",[h._param("list-of-items",a),h._param("last-item",b)]);case k.NONE:switch(e){case l.SEMICOLON:return h._("__JHASH__zUPNb-ryNTf__JHASH__",[h._param("previous-items",a),h._param("last-item",b)]);case l.BULLET:return h._("__JHASH__Io9fLDWOknA__JHASH__",[h._param("list-of-items",a),h._param("last-item",b)]);default:return h._("__JHASH__slIwsyEaO8M__JHASH__",[h._param("list-of-items",a),h._param("last-item",b)])}default:throw c("err")("[intlList] Invalid conjunction "+d+" provided to intlList")}}b.DELIMITERS=l;b.CONJUNCTIONS=k;d=b;e=d;g["default"]=e}),226);
__d("WAWebInfoFlowStep",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["GroupInfo","BroadcastInfo","ContactInfo","NewsletterInfo","DeleteNewsletter","NewsletterAdminCenter","NewsletterLink","NewsletterSettings","NewsletterTransferOwnershipSelection","NewsletterTransferOwnership","ProductDetail","ProductCollection","ProductLink","ProductInfo","CatalogLink","Cart","Catalog","ProductList","Starred","Kept","GroupSettings","MediaGallery","GroupInviteLink","PendingParticipants","Verification","DefaultEphemerality","Ephemeral","SentForAdminReview","SaveContactFlow","EventInfo","AllEvents"]);f.InfoFlowStep=a}),66);
__d("WAWebParticipantListUtils",["fbt","WAWebABProps","WAWebAlphaRegex","WAWebContactGetters","WAWebFbtIntlList","WAWebFrontendContactGetters","WAWebMiscGatingUtils"],(function(a,b,c,d,e,f,g,h){function a(a){if(a.participants.length===0)return h._("__JHASH__f2bYp_rOxbz__JHASH__").toString();if(a.participants.length===1){var b;b=(b=a.participants.head())==null?void 0:b.contact;if(b!=null&&d("WAWebContactGetters").getIsMe(b))return h._("__JHASH__Luh7m2vnFeR__JHASH__").toString()}b=i(a,!0);if(b.length===1)return b[0];else if(b.length<=3)return c("WAWebFbtIntlList")(b,c("WAWebFbtIntlList").CONJUNCTIONS.AND,c("WAWebFbtIntlList").DELIMITERS.COMMA).toString();if(b.length>=4){a=b[0];var e=h._("__JHASH__pcQ3aTbuxc8__JHASH__",[h._plural(b.length-1,"other_participants")]).toString();return c("WAWebFbtIntlList")([a,e],c("WAWebFbtIntlList").CONJUNCTIONS.AND).toString()}return b.join()}function b(a,b){b===void 0&&(b=!1);if(a.participants.length===0)return h._("__JHASH__f2bYp_rOxbz__JHASH__").toString();if(a.participants.length===1){var e;e=(e=a.participants.head())==null?void 0:e.contact;if(e!=null&&d("WAWebContactGetters").getIsMe(e))return h._("__JHASH__Luh7m2vnFeR__JHASH__").toString()}e=i(a,b);if(e.length===1)return e.pop();a=c("WAWebFbtIntlList")(e,c("WAWebFbtIntlList").CONJUNCTIONS.AND,c("WAWebFbtIntlList").DELIMITERS.COMMA);return a.toString()}function i(a,b){b===void 0&&(b=!1);var e=a.participants.length;b?b=a.participants.filter(function(a){return!d("WAWebContactGetters").getIsMe(a.contact)}):b=a.participants;var f=b.filter(function(a){return d("WAWebContactGetters").getIsMyContact(a.contact)});b=b.filter(function(a){return!d("WAWebContactGetters").getIsMyContact(a.contact)});var g=[];d("WAWebABProps").getABPropConfigValue("elevated_push_names_v2_m2_enabled")&&e>=3&&(g=b.filter(function(a){return d("WAWebContactGetters").getNotifyName(a.contact)!=null}));e=b.filter(function(a){return!g.includes(a)});b=e;e=[];d("WAWebMiscGatingUtils").isDropLastNameEnabled()?e=f.filter(function(a){return!a.contact.id.isLid()}).map(function(b){b=b.contact;return a.hasUniqueShortNameMention(b)?d("WAWebFrontendContactGetters").getFormattedShortNameWithNonBreakingSpaces(b):d("WAWebFrontendContactGetters").getFormattedName(b).replace(/\s/g," ")}):e=f.filter(function(a){return!a.contact.id.isLid()}).map(function(a){a=d("WAWebFrontendContactGetters").getFormattedShortNameWithNonBreakingSpaces(a.contact);var b=a.split(/\s/);b=b[0];return c("WAWebAlphaRegex").exec(b)?b:a});f=[];d("WAWebMiscGatingUtils").isDropLastNameEnabled()?f=g.filter(function(a){return!a.contact.id.isLid()}).map(function(a){a=a.contact;var b=d("WAWebContactGetters").getNotifyName(a);b=b!=null?b:d("WAWebFrontendContactGetters").getFormattedName(a);return"~"+b.replace(/\s/g," ")}):f=g.filter(function(a){return!a.contact.id.isLid()}).map(function(a){var b=d("WAWebContactGetters").getNotifyName(a.contact);b=b!=null?b:d("WAWebFrontendContactGetters").getFormattedShortNameWithNonBreakingSpaces(a.contact);a=b.split(/\s/);a=a[0];return"~"+(c("WAWebAlphaRegex").exec(a)?a:b)});b=b.filter(function(a){return!a.contact.id.isLid()}).map(function(a){return d("WAWebFrontendContactGetters").getFormattedName(a.contact)});return e.sort().concat(f.sort().concat(b.sort()))}function j(a){a=d("WAWebFrontendContactGetters").getFormattedShortNameWithNonBreakingSpaces(a);var b=a.split(/\s/);b=b[0];return c("WAWebAlphaRegex").exec(b)?b:a}function k(a,b){var c;a=a.filter(function(a){if(d("WAWebContactGetters").getIsMe(a.contact)){c=a;return!1}return!0});c&&a.push(c);return d("WAWebMiscGatingUtils").isDropLastNameEnabled()?a.filter(function(a){return!a.contact.id.isLid()}).map(function(a){a=a.contact;return b.hasUniqueShortNameMention(a)?d("WAWebFrontendContactGetters").getFormattedShortNameWithNonBreakingSpaces(a):d("WAWebFrontendContactGetters").getFormattedName(a).replace(/\s/g," ")}).filter(Boolean):a.filter(function(a){return!a.contact.id.isLid()}).map(function(a){return j(a.contact)}).filter(Boolean)}function e(a){return k(a.participants.toArray(),a)}function f(a){return k(a.participants.getAdmins(),a)}g.calculateUnnamedGroupParticipantsList=a;g.calculateUnnamedGroupFullParticipantsList=b;g.getUnnamedGroupParticipantNames=i;g.getFirstNameForContact=j;g.calculateParticipantsList=e;g.calculateAdminsList=f}),226);
__d("WAWebNotificationsNewsletterMetadataUpdateNotification",["fbt","WATimeUtils","WAWebBaseNotification","WAWebChatFlowTypes","WAWebCmd","WAWebContactCollection","WAWebFbtIntlList","WAWebInfoFlowStep","WAWebNotificationIconUtils","WAWebParticipantListUtils","WAWebWid","WAWebWidFormat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var c;c=a.call(this)||this;c.updates=b.updates;c.user=b.user;c.chat=b.chat;return c}var f=e.prototype;f.buildKey=function(){return"newslowner:"+this.chat.id.toString()+":"+this.user.toString()+":"+d("WATimeUtils").unixTime().toString()};f.getBannerOptions=function(){var a=this,b=this.updates.some(function(a){a=a.item;return a==="reaction_setting"})?d("WAWebInfoFlowStep").InfoFlowStep.NewsletterSettings:d("WAWebInfoFlowStep").InfoFlowStep.NewsletterInfo;return{wid:this.chat.id,title:this.chat.name,body:this.getNotificationBody(),onClick:function(){d("WAWebCmd").Cmd.openNewsletterProfile(a.chat,b)}}};f.getNotificationBody=function(){var a=this.getActor();return j(a,this.updates).toString()};f.getActor=function(){var a=d("WAWebContactCollection").ContactCollection.get(this.user);return a!=null?d("WAWebParticipantListUtils").getFirstNameForContact(a):d("WAWebWidFormat").widToFormattedUser(this.user)};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebNotificationIconUtils").getChatNotificationIcon(this.chat,this.abortController.signal)});function c(){return a.apply(this,arguments)}return c}();f.matchesChat=function(a){return c("WAWebWid").equals(this.chat.id,a)};f.getChatKind=function(){return d("WAWebChatFlowTypes").ChatKindType.Newsletter};return e}(d("WAWebBaseNotification").WABaseNotification);function i(a){switch(a){case"name":return h._("__JHASH__chuXZ2MBd5e__JHASH__");case"description":return h._("__JHASH__EENgGuwy_Yj__JHASH__");case"profile_picture":return h._("__JHASH__SKz8ZoqdmyT__JHASH__");case"reaction_setting":return h._("__JHASH__0yDyy80Z5Ng__JHASH__")}}function j(a,b){if(b.length===1&&b[0].item==="name"){var d=b[0].value;return h._("__JHASH__ZkCBwqi0GZN__JHASH__",[h._param("actor",a),h._param("updateValue",d)])}d=b.map(function(a){a=a.item;return i(a)});b=c("WAWebFbtIntlList")(d,c("WAWebFbtIntlList").CONJUNCTIONS.AND,c("WAWebFbtIntlList").DELIMITERS.COMMA);return h._("__JHASH__96GebINn0Vh__JHASH__",[h._param("actor",a),h._param("update",b.toString())])}g.WANewsletterMetadataUpdateNotification=a}),226);
__d("WAWebNotificationsNewsletterRoleChangeNotification",["fbt","WAWebBaseNotification","WAWebChatFlowTypes","WAWebContactCollection","WAWebNotificationIconUtils","WAWebParticipantListUtils","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFormat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var c;c=a.call(this)||this;c.mode=b.mode;c.admin=b.admin;c.user=b.user;c.chat=b.chat;return c}var f=e.prototype;f.buildKey=function(){return"newsladmin:"+this.chat.id.toString()+":"+this.mode+":"+this.user.toString()};f.getBannerOptions=function(){var a=this.getNotificationUser(),b=d("WAWebUserPrefsMeUser").isMeAccount(this.user);return{wid:this.chat.id,title:this.chat.name,body:i[this.mode](a,b).toString()}};f.getNotificationUser=function(){var a=this.mode==="ownership"?this.admin:this.user;if(a==null)return null;a=d("WAWebContactCollection").ContactCollection.get(a);return a!=null?d("WAWebParticipantListUtils").getFirstNameForContact(a):d("WAWebWidFormat").widToFormattedUser(this.user)};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebNotificationIconUtils").getChatNotificationIcon(this.chat,this.abortController.signal)});function c(){return a.apply(this,arguments)}return c}();f.matchesChat=function(a){return c("WAWebWid").equals(this.chat.id,a)};f.getChatKind=function(){return d("WAWebChatFlowTypes").ChatKindType.Newsletter};return e}(d("WAWebBaseNotification").WABaseNotification);var i={promote:function(a,b){return b?h._("__JHASH__bL7J4CLU6em__JHASH__"):h._("__JHASH__XENtrn6pxP6__JHASH__",[h._param("who",a)])},demote:function(a,b){return b?h._("__JHASH__byyywj9BtKc__JHASH__"):h._("__JHASH__4ctKkNCDLaB__JHASH__",[h._param("who",a)])},ownership:function(a){return a==null?h._("__JHASH__7n5JI-F32Et__JHASH__"):h._("__JHASH__uhWTxssj4Ey__JHASH__",[h._param("who",a)])}};g.WANewsletterRoleChangeNotification=a}),226);
__d("WAWebShowNewsletterMetadataUpdateNotification",["WAWebNewsletterMembershipUtil","WAWebNotificationController","WAWebNotificationsNewsletterMetadataUpdateNotification","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chat,c=a.user;a=a.updates;var e=b.newsletterMetadata;if(e==null)return;if(!d("WAWebNewsletterMembershipUtil").iAmOwner(e))return;if(d("WAWebUserPrefsMeUser").isMeAccount(c))return;if(a.length===0)return;return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsNewsletterMetadataUpdateNotification").WANewsletterMetadataUpdateNotification)({chat:b,user:c,updates:a}))});return h.apply(this,arguments)}g.showNewsletterMetadataUpdateNotification=a}),98);
__d("WAWebShowNewsletterRoleChangeNotification",["Promise","WAWebCommonNewsletterEnums","WAWebNewsletterMembershipUtil","WAWebNotificationController","WAWebNotificationsNewsletterRoleChangeNotification","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){var h;function a(a){var c=a.newRole,e=a.mode,f=a.chat,g=a.admin;a=a.user;var i=f.newsletterMetadata;if(i==null)return(h||(h=b("Promise"))).resolve();var j=e==="promote"&&d("WAWebUserPrefsMeUser").isMeAccount(a)&&c===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner;if(j)return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsNewsletterRoleChangeNotification").WANewsletterRoleChangeNotification)({mode:"ownership",chat:f,admin:g,user:a}));j=d("WAWebNewsletterMembershipUtil").iAmOwner(i)&&e==="promote"&&c===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin&&!d("WAWebUserPrefsMeUser").isMeAccount(a);i=e==="demote"&&c===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber&&!d("WAWebUserPrefsMeUser").isMeAccount(a)&&a.toJid()===(g==null?void 0:g.toJid());c=e==="demote"&&d("WAWebUserPrefsMeUser").isMeAccount(a)&&a.toJid()!==(g==null?void 0:g.toJid());return j||i||c?d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsNewsletterRoleChangeNotification").WANewsletterRoleChangeNotification)({mode:e,chat:f,admin:g,user:a})):(h||(h=b("Promise"))).resolve()}g.showNewsletterRoleChangeNotification=a}),98);
__d("WAWebWamEnumChannelEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UPDATES_TAB:1,DIRECTORY:2,LINK:3,DEEPLINK:4,FORWARDED_MESSAGE:5,DIRECTORY_SEARCH:6,RECOMMENDED_LIST:7,NOTIFICATION:8,UPDATES_TAB_SEARCH:9,STATUS:10,ADMIN_INVITE_MESSAGE:11,MEDIA_BROWSER:12,SIMILAR_CHANNEL:13});f.CHANNEL_ENTRY_POINT=a}),66);
__d("WAWebWamEnumChannelEntryPointApp",[],(function(a,b,c,d,e,f){a=Object.freeze({EXTERNAL_UNKNOWN:1,WHATSAPP:2});f.CHANNEL_ENTRY_POINT_APP=a}),66);
__d("WAWebWamEnumChannelEntryPointMetadata",[],(function(a,b,c,d,e,f){a=Object.freeze({STATUS_HEADER:1,LINK_TOOLTIP:2,LINK_BUTTON:3,POST_TOOLTIP:4});f.CHANNEL_ENTRY_POINT_METADATA=a}),66);
__d("WAWebWamEnumChannelEventSurface",[],(function(a,b,c,d,e,f){a=Object.freeze({CHANNEL_UPDATES_HOME:1,CHANNEL_THREAD:2,CHANNEL_DIRECTORY:3,CHANNEL_DIRECTORY_SEARCH:4,CHANNEL_PROFILE:5,CHANNEL_UPDATES_HOME_SEARCH:6});f.CHANNEL_EVENT_SURFACE=a}),66);
__d("WAWebWamEnumChannelEventUnit",[],(function(a,b,c,d,e,f){a=Object.freeze({RECOMMENDED_CHANNELS:1,SIMILAR_CHANNELS:2});f.CHANNEL_EVENT_UNIT=a}),66);
__d("WAWebChannelCoreEventWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChannelEntryPoint","WAWebWamEnumChannelEntryPointApp","WAWebWamEnumChannelEntryPointMetadata","WAWebWamEnumChannelEventSurface","WAWebWamEnumChannelEventType","WAWebWamEnumChannelEventUnit"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChannelCoreEvent:[4692,{channelCoreEventSequenceNumber:[8,a.TYPES.INTEGER],channelCoreEventType:[1,d("WAWebWamEnumChannelEventType").CHANNEL_EVENT_TYPE],channelDirectorySessionId:[7,a.TYPES.INTEGER],channelEntryPoint:[2,d("WAWebWamEnumChannelEntryPoint").CHANNEL_ENTRY_POINT],channelEntryPointApp:[3,d("WAWebWamEnumChannelEntryPointApp").CHANNEL_ENTRY_POINT_APP],channelEntryPointMetadata:[10,d("WAWebWamEnumChannelEntryPointMetadata").CHANNEL_ENTRY_POINT_METADATA],channelEventUnit:[12,d("WAWebWamEnumChannelEventUnit").CHANNEL_EVENT_UNIT],cid:[4,a.TYPES.STRING],directoryChannelIndex:[9,a.TYPES.INTEGER],entryPointMetadata:[5,a.TYPES.STRING],eventSurface:[6,d("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE],similarChannelsSessionId:[13,a.TYPES.INTEGER]},[1,1,1],"regular"]},{ChannelCoreEvent:[]});g.ChannelCoreEventWamEvent=b}),98);
__d("WAWebSimilarNewsletterSessionId",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useRef;function j(){return 1+Math.floor(Number.MAX_SAFE_INTEGER*Math.random())}function a(){var a=i(null);a.current==null&&(a.current=j());return a.current}function b(a){return a}g.useSimilarNewslettersSessionId=a;g.newsletterSessionIdToInt=b}),98);
__d("WAWebNewsletterAttributionLogging",["WAWebABProps","WAWebChannelCoreEventWamEvent","WAWebCommonNewsletterEnums","WAWebNewsletterCollection","WAWebNewsletterDirectoryFilterUtils","WAWebSimilarNewsletterSessionId","WAWebWamEnumChannelEntryPointApp"],(function(a,b,c,d,e,f,g){function h(){return c("WAWebNewsletterCollection").some(function(a){return((a=a.newsletterMetadata)==null?void 0:a.membershipType)===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber})?1:0}a=function(){function a(){}var b=a.prototype;b.setChannelEntryPoint=function(a){this.$1=a};b.setChannelEntryPointMetadata=function(a){this.$4=a};b.setSimilarChannelsSessionId=function(a){this.$5=a};b.getSimilarChannelsSessionId=function(){return this.$5};b.getIsSimilarUnitMountedForChat=function(a){return a.equals(this.$6)};b.setIsSimilarUnitMountedForChat=function(a){this.$6=a};b.getSimilarChannelsSessionIdForLogging=function(){var a=this.$5;if(a==null)return;return d("WAWebSimilarNewsletterSessionId").newsletterSessionIdToInt(a)};b.setDirectorySessionId=function(a){this.$2=a};b.setDirectoryFilter=function(a){if(a==null){this.$3=null;return}switch(a){case d("WAWebNewsletterDirectoryFilterUtils").NewsletterDirectoryFilterType.Recommended:return this.$3="all";case d("WAWebNewsletterDirectoryFilterUtils").NewsletterDirectoryFilterType.New:return this.$3="new";case d("WAWebNewsletterDirectoryFilterUtils").NewsletterDirectoryFilterType.Popular:return this.$3="popular";case d("WAWebNewsletterDirectoryFilterUtils").NewsletterDirectoryFilterType.Featured:return this.$3="featured";case d("WAWebNewsletterDirectoryFilterUtils").NewsletterDirectoryFilterType.Trending:return this.$3="most_active";default:return this.$3=null}};b.log=function(a){var b,c=a.cid,e=a.eventSurface,f=a.channelCoreEventType,g=a.similarChannelSessionId,i=a.eventUnit;a=a.entryPoint;if(!d("WAWebABProps").getABPropConfigValue("channel_core_event_logging_enabled"))return;b=JSON.stringify({has_followed_channels:h(),pill_type:(b=this.$3)!=null?b:void 0});new(d("WAWebChannelCoreEventWamEvent").ChannelCoreEventWamEvent)({cid:c.user,eventSurface:e,channelCoreEventType:f,channelEntryPointApp:d("WAWebWamEnumChannelEntryPointApp").CHANNEL_ENTRY_POINT_APP.WHATSAPP,channelEntryPoint:(e=(c=a)!=null?c:this.$1)!=null?e:void 0,channelDirectorySessionId:(f=this.$2)!=null?f:void 0,entryPointMetadata:b,similarChannelsSessionId:g!=null?d("WAWebSimilarNewsletterSessionId").newsletterSessionIdToInt(g):void 0,channelEntryPointMetadata:this.$4,channelEventUnit:(a=i)!=null?a:void 0}).commit()};return a}();b=new a();g.NewsletterCoreEventLogger=b}),98);
__d("WAWebNewsletterCollection",["WAWebChatCollection"],(function(a,b,c,d,e,f,g){a=new(d("WAWebChatCollection").ChatCollectionImpl)();g["default"]=a}),98);
__d("WAWebNewsletterGeosuspendedCountryModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.geosuspended=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this)};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletter_geosuspended_country";b=d("WAWebBaseModel").defineModel(a);g.GeosuspendedCountry=b}),98);
__d("WAWebNewsletterGeosuspendedCountryCollection",["WAWebBaseCollection","WAWebNewsletterGeosuspendedCountryModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebNewsletterGeosuspendedCountryModel").GeosuspendedCountry;g["default"]=a}),98);
__d("WAWebNewsletterMessageDeliveryUpdateModel",["WAWebBaseModel","WAWebMsgKey"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.serverId=d("WAWebBaseModel").prop(),c.msgModel=d("WAWebBaseModel").prop(),c.code=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this)};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletter_message_update";a.idClass=c("WAWebMsgKey");b=d("WAWebBaseModel").defineModel(a);g.NewsletterMessageDeliveryUpdate=b}),98);
__d("WAWebNewsletterMessageDeliveryUpdateCollection",["WAWebBaseCollection","WAWebNewsletterMessageDeliveryUpdateModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebNewsletterMessageDeliveryUpdateModel").NewsletterMessageDeliveryUpdate;g["default"]=a}),98);
__d("WAWebNewsletterMetadataCollection",["Promise","WALogger","WAWebBaseCollection","WAWebCollectionUtils","WAWebNewsletterMetadataModel","WAWebWid","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["newsletterMetadata:find trying to fetch non-newsletter wid ",""]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,j=new Array(g),k=0;k<g;k++)j[k]=arguments[k];return(e=f=a.call.apply(a,[this].concat(j))||this,f.byInviteCode=d("WAWebCollectionUtils").aggregated(function(a){return a.inviteCode}),f.findImpl=function(a){if(c("WAWebWid").isNewsletter(a))return(h||(h=b("Promise"))).resolve({id:a});d("WALogger").LOG(i(),a.toString());return(h||(h=b("Promise"))).reject(c("err")("newsletterMetadata:find trying to fetch non-newsletter  wid "+a.toString()))},e)||babelHelpers.assertThisInitialized(f)}return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebNewsletterMetadataModel").NewsletterMetadata;a.staleCollection=!0;e=new a();g["default"]=e}),98);
__d("WAWebNewsletterMetadataModel",["WAWebBaseModel","WAWebCommonNewsletterEnums","WAWebModelUtils","WAWebNewsletterGeosuspendedCountryCollection","WAWebNewsletterMembershipUtil","WAWebNewsletterMessageDeliveryUpdateCollection","WAWebNewsletterMetadataCollection","WAWebNewsletterPendingAdminsCollection","WAWebNewsletterSubscribersCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebModelUtils").prop(),e.creationTime=d("WAWebModelUtils").prop(),e.name=d("WAWebModelUtils").prop(),e.nameUpdateTime=d("WAWebModelUtils").prop(),e.description=d("WAWebModelUtils").prop(),e.descriptionUpdateTime=d("WAWebModelUtils").prop(),e.handle=d("WAWebModelUtils").prop(),e.inviteCode=d("WAWebModelUtils").prop(),e.size=d("WAWebModelUtils").prop(),e.verified=d("WAWebModelUtils").prop(),e.membershipType=d("WAWebModelUtils").prop(),e.privacy=d("WAWebModelUtils").prop(),e.website=d("WAWebModelUtils").prop(),e.messageDeliveryUpdates=d("WAWebModelUtils").collection(c("WAWebNewsletterMessageDeliveryUpdateCollection")),e.reactionCodesSetting=d("WAWebModelUtils").prop(),e.suspended=d("WAWebModelUtils").prop(!1),e.geosuspended=d("WAWebModelUtils").prop(!1),e.hasProfilePictureDeletionAlerts=d("WAWebModelUtils").prop(!1),e.geosuspendedCountries=d("WAWebModelUtils").collection(c("WAWebNewsletterGeosuspendedCountryCollection")),e.adminCount=d("WAWebModelUtils").prop(1),e.pendingAdmins=d("WAWebModelUtils").collection(c("WAWebNewsletterPendingAdminsCollection")),e.subscribers=d("WAWebModelUtils").collection(c("WAWebNewsletterSubscribersCollection")),e.terminated=d("WAWebModelUtils").prop(!1),e.similarNewsletters=d("WAWebModelUtils").session(function(){return[]}),e.recentlyFollowedFrom=d("WAWebModelUtils").session(),e.isSuspendedOrTerminated=d("WAWebModelUtils").derived(function(){return this.suspended||this.terminated},["suspended","terminated"]),e.canBeMuted=d("WAWebModelUtils").derived(function(){return d("WAWebNewsletterMembershipUtil").iAmOwner(this)&&this.adminCount>1||d("WAWebNewsletterMembershipUtil").iAmAdmin(this)||d("WAWebNewsletterMembershipUtil").iAmSubscriber(this)},["adminCount","membershipType"]),e.isSubscribedOrOwned=d("WAWebModelUtils").derived(function(){return d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(this)||d("WAWebNewsletterMembershipUtil").iAmSubscriber(this)},["membershipType"]),e.isPreview=d("WAWebModelUtils").derived(function(){return this.membershipType===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest},["membershipType"]),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.getCollection=function(){return b("WAWebNewsletterMetadataCollection")};f.resetRecentlyFollowedFrom=function(){this.recentlyFollowedFrom=null};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletterMetadata";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g.NewsletterMetadata=e}),98);
__d("WAWebNewsletterPendingAdminsCollection",["WAWebBaseCollection","WAWebNewsletterSubscriberModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebNewsletterSubscriberModel").NewsletterSubscriber;g["default"]=a}),98);
__d("WAWebNewsletterPollVotesGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createNewsletterPollVotesCache});b=a.field;c=a.unsafeIdentityGetter;e=a.clearCacheFor;f=e;d=c;a=b("ack");g.clearNewsletterPollVotesGetterCacheFor=f;g.getNewsletterPollVotesUnsafe=d;g.getAck=a}),98);
__d("WAWebFrontendNewsletterPollVotesGetters",["WAWebAck","WAWebGetters","WAWebGettersCaches","WAWebNewsletterPollVotesGetters"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({root:d("WAWebNewsletterPollVotesGetters").getNewsletterPollVotesUnsafe,createCache:d("WAWebGettersCaches").createFrontendNewsletterPollVotesCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;a=b("isSendFailure",{"default":!1});e=c(function(a){var b=a[0];a=a[1];b=b!=null&&b<d("WAWebAck").ACK.CLOCK;return b||Boolean(a)},[d("WAWebNewsletterPollVotesGetters").getAck,a]);g.clearFrontendNewsletterPollVotesGetterCacheFor=f;g.getIsSendFailure=a;g.getIsFailed=e}),98);
__d("WAWebNewsletterPollVotesModel",["WATimeUtils","WAWebAddOnModel","WAWebBaseModel","WAWebFrontendNewsletterPollVotesGetters","WAWebModelUtils","WAWebMsgKey","WAWebNewsletterPollVotesGetters"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebModelUtils").prop(),c.pollVotesCountMap=d("WAWebModelUtils").prop(function(){return new Map()}),c.pollVotesCountMapTs=d("WAWebModelUtils").prop(),c.myVote=d("WAWebModelUtils").prop(function(){return new Set()}),c.myVoteTs=d("WAWebModelUtils").prop(),c.isUnvote=d("WAWebModelUtils").prop(!1),c.msgKey=d("WAWebModelUtils").prop(),c.pollVotersMap=d("WAWebModelUtils").prop(function(){return new Map()}),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c["delete"]=function(){a.prototype["delete"].call(this),d("WAWebNewsletterPollVotesGetters").clearNewsletterPollVotesGetterCacheFor(this),d("WAWebFrontendNewsletterPollVotesGetters").clearFrontendNewsletterPollVotesGetterCacheFor(this)};c.updateMyVote=function(a,b,c){var e,f;if(b<((e=this.myVoteTs)!=null?e:0))return;e=(e=this.myVote)!=null?e:new Set();var g=(f=this.pollVotesCountMap)!=null?f:new Map();Array.from(e).forEach(function(a){var b;b=(b=g.get(a))!=null?b:0;g.set(a,Math.max(b-1,0))});Array.from(a).forEach(function(a){var b;b=(b=g.get(a))!=null?b:0;g.set(a,b+1)});this.msgKey=c;this.pollVotesCountMap=g;this.myVote=a;this.myVoteTs=d("WATimeUtils").castToMillisTime(b)};c.updatePollVotersMap=function(a,b){if(b==null){this.pollVotersMap=a;return}a=a.get(b);if(a!=null){var c=new Map(this.pollVotersMap);c.set(b,a);this.pollVotersMap=c}};return b}(d("WAWebAddOnModel").AddOnBaseModel);a.Proxy="newsletterPollVote";a.idClass=c("WAWebMsgKey");b=d("WAWebBaseModel").defineModel(a);g.NewsletterPollVotes=b}),98);
__d("WAWebNewsletterPollVotesModelCollection",["WATimeUtils","WAWebBaseCollection","WAWebCRUDOperationsNewsletterMyVotes","WAWebCRUDOperationsNewsletterPollsVotes","WAWebMiscErrors","WAWebMsgCollection","WAWebMsgKey","WAWebNewsletterPollVotesModel","WAWebPollsCreateOptionLocalIdMap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];return(e=f=a.call.apply(a,[this].concat(h))||this,f.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.toString();var e=(yield d("WAWebCRUDOperationsNewsletterPollsVotes").getVote(a)),f=b("WAWebMsgCollection").MsgCollection;f=(yield f.hydrateOrGetMessages([a]));f=f[0];if(f==null)throw new(d("WAWebMiscErrors").NotFoundError)("No votes found");var g=f.id.remote.toJid(),h=f.serverId;f=f.pollOptions;g=h!=null?yield d("WAWebCRUDOperationsNewsletterMyVotes").getMyVote(g,h):null;if(f==null)throw new(d("WAWebMiscErrors").NotFoundError)("No pollOptions found");if(e==null&&g==null)throw new(d("WAWebMiscErrors").NotFoundError)("No polls to display");h={id:c("WAWebMsgKey").fromString(a),pollVotesCountMap:new Map()};var i=(yield d("WAWebPollsCreateOptionLocalIdMap").createOptionLocalIdMap(f));e!=null&&(h.pollVotesCountMap=new Map(Array.from(e.votesMap.entries()).map(function(a){var b=a[0];a=a[1];return[i.getLocalIdForHexHash(b),a]})),h.pollVotesCountMapTs=d("WATimeUtils").castToUnixTime(e.serverTimestamp));if(g!=null){h.myVote=new Set(g.votes.map(function(a){return i.getLocalIdForHexHash(a)}));var j=h.pollVotesCountMap;h.myVote.forEach(function(a){j!=null&&!j.has(a)&&j.set(a,1)});h.myVoteTs=d("WATimeUtils").castToMillisTime(g.serverTimestampMs);h.ack=g.ack}return h});return function(b){return a.apply(this,arguments)}}(),e)||babelHelpers.assertThisInitialized(f)}return e}(d("WAWebBaseCollection").BaseCollection);e.model=d("WAWebNewsletterPollVotesModel").NewsletterPollVotes;function a(a){var b=a.msgKey,c=a.parentMsgKey,d=a.selectedOptionLocalIds;a=a.timestamp;c=h.gadd({id:c});c.updateMyVote(d,a,b);return c}var h=new e();g.updateOrCreatePollVote=a;g.NewsletterPollVotesModelCollection=h}),98);
__d("WAWebNewsletterReactionModel",["WATimeUtils","WAWebBaseModel","WAWebModelUtils","WAWebMsgKey","WAWebReactionsBEUtils"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebModelUtils").prop(),c.parentMsgServerId=d("WAWebModelUtils").prop(),c.myReactionMsgKey=d("WAWebModelUtils").prop(),c.reactionCountMap=d("WAWebModelUtils").prop(),c.reactionCountMapTs=d("WAWebModelUtils").prop(),c.myReaction=d("WAWebModelUtils").prop(),c.myReactionTs=d("WAWebModelUtils").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){var b;a.prototype.initialize.call(this);this.reactionCountMap=(b=this.reactionCountMap)!=null?b:new Map()};c.updateMyReaction=function(a){return a===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT?this.$NewsletterMessageReactionsImpl1():this.$NewsletterMessageReactionsImpl2(a)};c.$NewsletterMessageReactionsImpl2=function(a){var b,c=this.myReaction;this.reactionCountMap=(b=this.reactionCountMap)!=null?b:new Map();b=this.reactionCountMap;var d=b.get(a);b.set(a,((d=d)!=null?d:0)+1);d=c!=null?b.get(c):null;if(d!=null&&c!=null){d=d-1;d>0?b.set(c,d):b["delete"](c)}this.$NewsletterMessageReactionsImpl3(a)};c.$NewsletterMessageReactionsImpl1=function(){var a,b=this.myReaction;if(b==null)return;this.reactionCountMap=(a=this.reactionCountMap)!=null?a:new Map();a=this.reactionCountMap;var c=a.get(b);if(c==null)return;c>1?a.set(b,c-1):a["delete"](b);this.$NewsletterMessageReactionsImpl3(null)};c.$NewsletterMessageReactionsImpl3=function(a){this.myReactionTs=d("WATimeUtils").unixTime(),this.myReaction=a};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletterReaction";a.idClass=c("WAWebMsgKey");b=d("WAWebBaseModel").defineModel(a);g.NewsletterMessageReactions=b}),98);
__d("WAWebNewsletterReactionCollection",["WATimeUtils","WAWebBaseCollection","WAWebDBGetReactions","WAWebMiscErrors","WAWebMsgCollection","WAWebMsgKey","WAWebNewsletterDBUtils","WAWebNewsletterReactionModel","WAWebReactionsBEUtils","WAWebUserPrefsMeUser","WAWebdbCRUDOperationsNewsletterReaction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];return(e=f=a.call.apply(a,[this].concat(h))||this,f.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("WAWebdbCRUDOperationsNewsletterReaction").getNewsletterReaction(a)),f=b("WAWebMsgCollection").MsgCollection;f=(yield f.hydrateOrGetMessages([a]));f=f[0];if(f==null)throw new(d("WAWebMiscErrors").NotFoundError)("No reactions found");var g=f.id.remote.toJid();f=f.serverId;g=f!=null?yield d("WAWebNewsletterDBUtils").craftNewsletterMsgKeyFromServerId(f,g):null;g=g!=null?yield d("WAWebDBGetReactions").existsReactionAddressingModeInsensitive({parentMsgKey:g.toString(),senderUserJid:d("WAWebUserPrefsMeUser").getMeUser().toString()}):null;if(e==null&&g==null)throw new(d("WAWebMiscErrors").NotFoundError)("No reactions to display");a={id:c("WAWebMsgKey").fromString(a)};f!=null&&(a.parentMsgServerId=f);e!=null&&(a.reactionCountMap=e.emojiCountMap,a.reactionCountMapTs=d("WATimeUtils").castToUnixTime(e.serverTimestamp));g!=null&&g.reactionText!==d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT&&(a.myReactionMsgKey=c("WAWebMsgKey").from(g.msgKey),a.myReaction=g.reactionText,a.myReactionTs=d("WATimeUtils").castToUnixTime(g.timestamp));return a});return function(b){return a.apply(this,arguments)}}(),e)||babelHelpers.assertThisInitialized(f)}return e}(d("WAWebBaseCollection").BaseCollection);e.model=d("WAWebNewsletterReactionModel").NewsletterMessageReactions;var h=new e();function a(a){var b=a.parentMsg,c=a.reactionCode;a=a.reactionMsg;b=h.gadd({id:b.id,myReactionMsgKey:a.id});b.updateMyReaction(c);return b}g.NewsletterMessageReactionsCollection=h;g.updateOrCreateMessageReaction=a}),98);
__d("WAWebNewsletterReportModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.reportStatus=d("WAWebBaseModel").prop(),c.creationTime=d("WAWebBaseModel").prop(),c.newsletterName=d("WAWebBaseModel").prop(),c.newsletterId=d("WAWebBaseModel").prop(),c.serverMsgId=d("WAWebBaseModel").prop(),c.appeal=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="newsletter_report";b=d("WAWebBaseModel").defineModel(a);g.NewsletterReport=b}),98);
__d("WAWebNewsletterReportCollection",["WAWebBaseCollection","WAWebNewsletterReportModel"],(function(a,b,c,d,e,f,g){a=function(a,b){var c;c=((c=b.appeal.creationTime)!=null?c:0)-((c=a.appeal.creationTime)!=null?c:0);return c!==0?c:b.creationTime-a.creationTime};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);b.model=d("WAWebNewsletterReportModel").NewsletterReport;b.comparator=a;c=new b();g.NewsletterReportCollection=c}),98);
__d("WAWebNewsletterSubscribersCollection",["WAWebBaseCollection","WAWebCommonNewsletterEnums","WAWebContactGetters","WAWebFrontendContactGetters","WAWebNewsletterSubscriberModel"],(function(a,b,c,d,e,f,g){a=function(a,b){if(a.membership===b.membership){if(!d("WAWebContactGetters").getIsMyContact(a.contact))return 1;if(!d("WAWebContactGetters").getIsMyContact(b.contact))return-1;var c=d("WAWebFrontendContactGetters").getFormattedUser(a.contact),e=d("WAWebFrontendContactGetters").getFormattedUser(b.contact);return c.localeCompare(e)}if(a.membership===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner)return-1;return b.membership===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner?1:a.membership===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin?-1:1};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);b.model=d("WAWebNewsletterSubscriberModel").NewsletterSubscriber;b.comparator=a;g["default"]=b}),98);
__d("WAWebName.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={verified:"_aj_h",disableGrow:"_aou8",psa:"_aj_i",icon:"_aj_j",newsletterIcon:"_anew",hasLabels:"_aj_k",labels:"_aj_l",chatAssignmentIcon:"_aj_m",chatAssignmentIconAssignedToOthers:"_aj_n",chatAssignmentIconAssignedToYou:"_aj_o",lidDebugLabel:"_amdo"};b=a;g["default"]=b}),98);
__d("WAWebPsaVerifiedBlueIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="psa-verified-blue";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=20;m=20;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 20 20",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.595 8.23978L17.7696 9.43025L17.7615 9.42221C18.0795 9.74022 18.0795 10.2538 17.7614 10.5718L16.5868 11.7623L17.011 13.3849C17.117 13.817 16.8641 14.2655 16.4318 14.3797L14.8167 14.82L14.3762 16.4345C14.2539 16.8666 13.8134 17.1275 13.3811 17.0134L11.7578 16.5894L10.5669 17.7635C10.4119 17.9185 10.1998 18 9.99592 18C9.792 18 9.57991 17.9185 9.42493 17.7635L8.234 16.5894L6.61076 17.0134C6.17844 17.1275 5.7298 16.8666 5.6156 16.4345L5.17512 14.82L3.56003 14.3797C3.13587 14.2574 2.87484 13.817 2.98904 13.3849L3.4132 11.7623L2.23859 10.5718C1.92047 10.2538 1.92047 9.74009 2.23859 9.42209L3.4132 8.23162L2.98904 6.60899C2.87484 6.17684 3.12771 5.72837 3.56003 5.61422L5.17512 5.17391L5.6156 3.55943C5.73796 3.13543 6.17844 2.87451 6.61076 2.98866L8.234 3.41266L9.42493 2.2385C9.74305 1.9205 10.2569 1.9205 10.5751 2.2385L11.766 3.41266L13.3892 2.98866C13.8216 2.88266 14.2702 3.13543 14.3844 3.56759L14.8249 5.18206L16.44 5.62237C16.8723 5.74468 17.1333 6.18499 17.0191 6.61715L16.595 8.23978ZM9.37506 12.7678C9.21482 12.9279 9.01452 13 8.80621 13C8.5979 13 8.3976 12.9199 8.23736 12.7678L6.23435 10.7658C5.92188 10.4535 5.92188 9.94895 6.23435 9.63664C6.54682 9.32432 7.05158 9.32432 7.36405 9.63664L8.7982 11.0701L12.636 7.23423C12.9484 6.92192 13.4532 6.92192 13.7656 7.23423C14.0781 7.54655 14.0781 8.05105 13.7656 8.36336L11.5784 10.5656L9.37506 12.7678Z",fill:"#007BFC",style:{fill:"#007BFC",fillOpacity:1}})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.PsaVerifiedBlueIcon=a}),98);
__d("WAWebPsaVerifiedIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="psa-verified";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=18;m=18;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 18 18",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 18 18",children:[j.jsx("title",{children:k}),j.jsx("polygon",{id:"Star-2",fill:"#00DA60",points:"9,16 7.1,16.9 5.8,15.2 3.7,15.1 3.4,13 1.5,12 2.2,9.9 1.1,8.2 2.6,6.7 2.4,4.6 4.5,4 5.3,2 7.4,2.4 9,1.1 10.7,2.4 12.7,2 13.6,4 15.6,4.6 15.5,6.7 17,8.2 15.9,9.9 16.5,12 14.7,13 14.3,15.1 12.2,15.2 10.9,16.9 "}),j.jsx("polygon",{id:"Check-Icon",fill:"#FFFFFF",points:"13.1,7.3 12.2,6.5 8.1,10.6 5.9,8.5 5,9.4 8,12.4 "})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.PsaVerifiedIcon=a}),98);
__d("WAWebNewsletterName.react",["fbt","WALogger","WAWebEmojiText.react","WAWebFbtCommon","WAWebFormatConfiguration","WAWebMiscGatingUtils","WAWebName.scss","WAWebPsaVerifiedBlueIcon","WAWebPsaVerifiedIcon","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][NewsletterName] undefined name"]);j=function(){return a};return a}var k=i||d("react");function a(a){var b=a.chat,c=a.element,e=a.highlightText,f=a.titlify,g=a.ellipsify,h=a.breakWord,i=a.onClick,j=a.className,n=a.xstyle,o=a.testid;o=a.showNewsletterCheckmark;o=o===void 0?!0:o;a=a.checkmarkLarge;a=a===void 0?!1:a;var p=d("useWAWebModelValues").useModelValues(b,["id","newsletterMetadata"]);p=d("useWAWebModelValues").useOptionalModelValues(p.newsletterMetadata,["verified"]);b=m(b);e=e!=null&&e!==""?d("WAWebFormatConfiguration").SearchName({terms:[e]}):void 0;b=k.jsx(d("WAWebEmojiText.react").EmojiText,{text:b,element:c,className:j,xstyle:n,formatters:e,titlify:f,ellipsify:g,breakWord:h,direction:"auto",inlineblock:!0,onClick:i,testid:void 0});c=(p==null?void 0:p.verified)===!0&&o;return k.jsx(l,{verified:c,checkmarkLarge:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function l(a){var b=a.checkmarkLarge,e=a.children;a=a.verified;b=b?24:20;if(a){a=h._("__JHASH__3IUSQ66sfH4__JHASH__");return k.jsxs("span",{className:c("WAWebName.scss").verified,children:[e,k.jsx("div",{className:c("WAWebName.scss").newsletterIcon,children:d("WAWebMiscGatingUtils").isBlueEnabled()?k.jsx(d("WAWebPsaVerifiedBlueIcon").PsaVerifiedBlueIcon,{"aria-label":a,width:b,height:b}):k.jsx(d("WAWebPsaVerifiedIcon").PsaVerifiedIcon,{"aria-label":a})})]})}return e}l.displayName=l.name+" [from "+f.id+"]";function m(a){a=d("useWAWebModelValues").useModelValues(a,["id","newsletterMetadata","formattedTitle"]);var b=d("useWAWebModelValues").useOptionalModelValues(a.newsletterMetadata,["name","verified"]);if((b==null?void 0:b.name)!=null)return b.name;if(a.formattedTitle!=null)return a.formattedTitle;d("WALogger").ERROR(j()).tags("newsletter").devConsole("Undefined newsletter metadata name or chat.formattedTitle for "+a.id.toString()+" ").sendLogs("newsletter-undefined-name");return c("WAWebFbtCommon")("Untitled Channel")}g.NewsletterName=a}),226);
__d("WAWebGenerateRequestPaymentMessageProto",["WAWebPaymentsProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;var b=d("WAWebPaymentsProtoUtils").generatePaymentsNoteMessage(a);return{requestPaymentMessage:{amount1000:a.amount1000,expiryTimestamp:a._paymentExpiryTimestamp,requestFrom:a._paymentRequestFrom,currencyCodeIso4217:a._currencyCodeIso4217,noteMessage:b}}}g["default"]=a}),98);
__d("WAWebGenerateSendPaymentMessageProto",["WAWebE2EProtoUtils","WAWebPaymentsProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){a=a.json;var b=a.paymentRequestMessageKey?{fromMe:a.paymentRequestMessageKey.fromMe,remoteJid:d("WAWebE2EProtoUtils").encodeJid(a.paymentRequestMessageKey.remote),id:a.paymentRequestMessageKey.id,participant:d("WAWebE2EProtoUtils").encodeJid(a.paymentRequestMessageKey.participant)}:void 0;return{sendPaymentMessage:{requestMessageKey:b,noteMessage:d("WAWebPaymentsProtoUtils").generatePaymentsNoteMessage(a)}}}g["default"]=a}),98);
__d("WAWebPaymentsProtoUtils",["WAWebE2EProtoGenerator","WAWebE2EProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){if(a.paymentNoteMsg==null)return;var b={stanzaId:a.quotedStanzaID,mentionedJid:a.mentionedJidList&&a.mentionedJidList.map(d("WAWebE2EProtoUtils").encodeJid),isForwarded:a.isForwarded,forwardingScore:a.forwardingScore,groupMentions:[]},c=d("WAWebE2EProtoUtils").encodeJid(a.quotedParticipant);c!=null&&(b.participant=c);if(a.quotedMsg){c=d("WAWebE2EProtoGenerator").getProtobufMessage(a.quotedMsg,void 0,void 0,void 0,"quoted");b.quotedMessage=d("WAWebE2EProtoUtils").getMutableMessageProtobuf(c)}return d("WAWebE2EProtoGenerator").getProtobufMessage(Object.assign(a.paymentNoteMsg,{_isPaymentNoteMsg:!0}),void 0,b)}g.generatePaymentsNoteMessage=a}),98);
__d("WAWebPaymentRequestMsgAction",["WAWebDBProcessPaymentMessages","WAWebMsgCollection","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebMsgCollection").MsgCollection,e=new c.constructor.model(a);e=(yield d("WAWebDBProcessPaymentMessages").processPaymentMessages([e]));e&&e.forEach(function(b){var d=c.get(b.id);d?d.set(b,{merge:!0}):b.id===a.id.toString()&&(a.type=b.type,a.templateParams=b.templateParams)})});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebMsgCollection").MsgCollection;a=new c.constructor.model(a);a=(yield d("WAWebDBProcessPaymentMessages").processPaymentMessages([a]));a&&a.forEach(function(a){var b=c.get(a.id);b&&b.set(a,{merge:!0})})});return i.apply(this,arguments)}g.cancelOrDeclinePaymentRequest=a;g.fulfillPaymentRequest=c}),98);
__d("WAWebFormatPaymentMsg",["fbt","WAWebWidToFormattedNameOrNumber"],(function(a,b,c,d,e,f,g,h){function a(a){var b=c("WAWebWidToFormattedNameOrNumber")(a.remote);return a.fromMe?h._("__JHASH__Q3aJQv8wfXg__JHASH__",[h._param("otherUser",b)]):h._("__JHASH__rxqsRnpSp0V__JHASH__",[h._param("otherUser",b)])}g.formatPaymentInviteMessageText=a}),226);
__d("WAWebPinInChatGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createPinInChatsCache});b=a.field;c=a.unsafeIdentityGetter;e=a.clearCacheFor;f=e;d=c;a=b("id");e=b("sender");c=b("ack");g.clearPinInChatGetterCacheFor=f;g.getPinInChatUnsafe=d;g.getId=a;g.getSender=e;g.getAck=c}),98);
__d("WAWebFrontendPinInChatGetters",["WAWebAck","WAWebGetters","WAWebGettersCaches","WAWebPinInChatGetters","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({root:d("WAWebPinInChatGetters").getPinInChatUnsafe,createCache:d("WAWebGettersCaches").createFrontendPinInChatsCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;a=b("isSendFailure",{"default":!1});e=c(function(a){var b=a[0],c=a[1];a=a[2];b=d("WAWebUserPrefsMeUser").isMeAccount(b)&&c!=null&&c<d("WAWebAck").ACK.CLOCK;return b||Boolean(a)},[d("WAWebPinInChatGetters").getSender,d("WAWebPinInChatGetters").getAck,a]);g.clearFrontendPinInChatGetterCacheFor=f;g.getIsSendFailure=a;g.getIsFailed=e}),98);
__d("WAWebPinInChatModel",["WATimeUtils","WAWebAddOnModel","WAWebBaseModel","WAWebFrontendPinInChatGetters","WAWebPinInChatGetters"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.msgKey=d("WAWebBaseModel").prop(),c.parentMsgKey=d("WAWebBaseModel").prop(),c.senderTimestampMs=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.sender=d("WAWebBaseModel").prop(),c.chatId=d("WAWebBaseModel").prop(),c.pinType=d("WAWebBaseModel").prop(),c.pinExpiryDuration=d("WAWebBaseModel").prop(),c.id=d("WAWebBaseModel").prop(),c.read=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c["delete"]=function(){a.prototype["delete"].call(this),d("WAWebPinInChatGetters").clearPinInChatGetterCacheFor(this),d("WAWebFrontendPinInChatGetters").clearFrontendPinInChatGetterCacheFor(this)};c.leftExpirationTime=function(){var a;a=((a=this.t)!=null?a:Math.floor(this.senderTimestampMs/1e3))+((a=this.pinExpiryDuration)!=null?a:0);return a-d("WATimeUtils").unixTime()};return b}(d("WAWebAddOnModel").AddOnBaseModel);b=d("WAWebBaseModel").defineModel(a);g.PinInChat=b}),98);
__d("WAWebPinInChatCollection",["WATimeUtils","WAWebBaseCollection","WAWebCollectionUtils","WAWebFrontendPinInChatGetters","WAWebPinInChatModel","WAWebPinMsgConstants","WAWebPinMsgGatingUtils","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c=b.call.apply(b,[this].concat(f))||this,c.byChatId=d("WAWebCollectionUtils").aggregated(function(a){return a.chatId}),c.byIsFailedByMe=d("WAWebCollectionUtils").aggregated(function(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeUser();return d("WAWebFrontendPinInChatGetters").getIsFailed(a)&&a.sender.equals(b)}),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.deleteByParentMessageKey=function(a){this.remove(i(a))};c.getByMsgKey=function(a){return this.findFirst(function(b){return b.msgKey.equals(a)})};c.getByParentMsgKey=function(a){return this.get(i(a))};return a}(d("WAWebBaseCollection").BaseCollection);h.model=d("WAWebPinInChatModel").PinInChat;h.comparator=function(a,b){return Number(b.t)-Number(a.t)};function a(a){return!d("WAWebPinMsgGatingUtils").isPinnedMessagesM1ReceiverEnabled()?[]:a.filter(function(a){return a.pinType===d("WAWebPinMsgConstants").PIN_STATE.PIN&&a.parentMsgKey!=null&&!j(a)}).sort(h.comparator).slice(0,d("WAWebPinMsgGatingUtils").getMaxPins())}function b(a){return new(d("WAWebPinInChatModel").PinInChat)(babelHelpers["extends"]({id:i(a.parentMsgKey)},a))}function i(a){return"!!"+a.toString()}function j(a){var b;if(a.senderTimestampMs==null)return!1;var c=a.pinExpiryDuration!=null;a=((b=a.t)!=null?b:Math.floor(a.senderTimestampMs/1e3))+((b=a.pinExpiryDuration)!=null?b:0);return c&&a<d("WATimeUtils").unixTime()}function c(a){return a.pinType===d("WAWebPinMsgConstants").PIN_STATE.PIN&&a.parentMsgKey!=null&&!j(a)}e=new h();g.PinInChatCollectionImpl=h;g.filterValidPins=a;g.createPinInChatModel=b;g.getPinInChatId=i;g.isPinExpired=j;g.isPinValid=c;g.PinInChatCollection=e}),98);
__d("WAWebDBPollsInvalidateChatPolls",["WAWebDBMessageUtils","WAWebModelStorageUtils","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.between(["internalId"],d("WAWebDBMessageUtils").beginningOfChat(a),d("WAWebDBMessageUtils").endOfChat(a)));yield b.bulkCreateOrMerge(c.filter(function(a){return a.type===d("WAWebMsgType").MSG_TYPE.POLL_CREATION&&!a.pollInvalidated}).map(function(a){return{id:a.id,pollInvalidated:!0}}))});return function(a){return c.apply(this,arguments)}}())}g.invalidateChatPolls=a}),98);
__d("WAWebPollsInvalidateChatPollMsgsAction",["WALogger","WAWebDBPollsInvalidateChatPolls","WAWebFrontendMsgGetters","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[POLLS] Failed to invalidate polls with error: ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebDBPollsInvalidateChatPolls").invalidateChatPolls(a.id),a.msgs.filter(function(a){return d("WAWebFrontendMsgGetters").getAsPollCreation(a)&&!a.pollInvalidated}).forEach(function(a){a.pollInvalidated=!0})}catch(a){d("WALogger").ERROR(h(),a).devConsole(a)}});return i.apply(this,arguments)}g.invalidateChatPollMsgs=a}),98);
__d("WAWebPollsPollVoteCollection",["WANullthrows","WAWebApiContact","WAWebBaseCollection","WAWebLidMigrationUtils","WAWebMaybe","WAWebPollsPollVoteModel","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getVoteFromSenderAddressingModeInsensitive=function(a){var b=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));return this.findFirst(function(c){return c.sender.equals(a)||c.sender.equals(b)})};c.getUnreadCount=function(){return this.filter(function(a){return a.selectedOptionLocalIds.length>0&&!a.read&&!d("WAWebUserPrefsMeUser").isMeAccount(a.sender)}).length};c.getVoteCount=function(){return this.filter(function(a){return a.selectedOptionLocalIds.length>0}).length};return a}(d("WAWebBaseCollection").BaseCollection);h.model=d("WAWebPollsPollVoteModel").PollVote;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$PollVoteCollectionImpl1=new Map(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.add=function(b,c){b=a.prototype.add.call(this,b,c);c=j(b.filter(Boolean));for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];g=this.getForParentAddressingModeInsensitive([g]);g=g[0];g.add(f)}return b};c.remove=function(b,c){b=a.prototype.remove.call(this,b,c);c=j(b.filter(Boolean));for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];this.getForParentAddressingModeInsensitive([g])[0].remove(f)}return b};c.reset=function(){a.prototype.reset.call(this);for(var b=this.$PollVoteCollectionImpl1.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.reset()}this.$PollVoteCollectionImpl1.clear()};c.getForParentAddressingModeInsensitive=function(a){var b=this;return a.map(function(a){return b.$PollVoteCollectionImpl2(a)})};c.$PollVoteCollectionImpl2=function(a){var b,c=this;b=(b=this.$PollVoteCollectionImpl1.get(a.toString()))!=null?b:d("WAWebMaybe").ifSome(d("WAWebLidMigrationUtils").getAlternateMsgKey(a),function(a){return c.$PollVoteCollectionImpl1.get(a.toString())});b==null&&(b=new h(),b.add(this.filter(function(b){return b.parentMsgKey.equals(a)})),this.$PollVoteCollectionImpl1.set(a.toString(),b));return b};c.getByMsgKey=function(a){return this.get(i(a))};return b}(d("WAWebBaseCollection").BaseCollection);b.model=d("WAWebPollsPollVoteModel").PollVote;function i(a){return"!!"+a.toString()}function a(a){return new(d("WAWebPollsPollVoteModel").PollVote)(babelHelpers["extends"]({id:i(a.msgKey)},a))}e=new b();function j(a){var b=new Map();if(!a)return b;a.forEach(function(a){var d=a.parentMsgKey;b.has(d)||b.set(d,[]);c("WANullthrows")(b.get(d)).push(a)});return b}g.GroupedPollVoteCollection=h;g.PollVoteCollectionImpl=b;g.createPollVoteModel=a;g.PollVoteCollection=e}),98);
__d("WAWebPollVoteGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createPollVotesCache});b=a.field;c=a.computed;e=a.unsafeIdentityGetter;f=a.clearCacheFor;d=f;a=e;f=b("parentMsgKey");e=b("sender");var h=b("ack"),i=b("t"),j=b("senderTimestampMs");b=b("selectedOptionLocalIds");var k=c(function(a){a=a[0];return a.length===0},[b]);c=c(function(a){var b=a[0];a=a[1];return b==null?a:b*1e3},[i,j]);g.clearPollVoteGetterCacheFor=d;g.getPollVoteUnsafe=a;g.getParentMsgKey=f;g.getSender=e;g.getAck=h;g.getT=i;g.getSenderTimestampMs=j;g.getSelectedOptionLocalIds=b;g.getIsUnvote=k;g.getTimestamp=c}),98);
__d("WAWebPollsPollVoteModel",["WAWebAddOnModel","WAWebBaseModel","WAWebFrontendPollVoteGetters","WAWebPollVoteGetters"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.msgKey=d("WAWebBaseModel").prop(),c.parentMsgKey=d("WAWebBaseModel").prop(),c.selectedOptionLocalIds=d("WAWebBaseModel").prop(),c.senderTimestampMs=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.sender=d("WAWebBaseModel").prop(),c.read=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c["delete"]=function(){a.prototype["delete"].call(this),d("WAWebPollVoteGetters").clearPollVoteGetterCacheFor(this),d("WAWebFrontendPollVoteGetters").clearFrontendPollVoteGetterCacheFor(this)};c.getData=function(){return{msgKey:this.msgKey,parentMsgKey:this.parentMsgKey,selectedOptionLocalIds:this.selectedOptionLocalIds,senderTimestampMs:this.senderTimestampMs,t:this.t,sender:this.sender,ack:this.ack,read:this.read}};return b}(d("WAWebAddOnModel").AddOnBaseModel);a.Proxy="poll_vote";b=d("WAWebBaseModel").defineModel(a);g.PollVote=b}),98);
__d("WAWebPollsVoteNotification",["fbt","WAWebABProps","WAWebBaseNotification","WAWebFrontendMsgGetters","WAWebGetNotificationStrings","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationController","WAWebNotificationHelpers","WAWebNotificationIconUtils","WAWebPollsPollVoteCollection","WAWebWid","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var c;b=b.creationMsg;c=a.call(this)||this;c.$PollVoteNotification3=function(){c.$PollVoteNotification2.getUnreadCount()===0&&c.closeBanner()};c.$PollVoteNotification1=b;c.$PollVoteNotification2=d("WAWebPollsPollVoteCollection").PollVoteCollection.getForParentAddressingModeInsensitive([b.id])[0];c.bodyText=i({unreadCount:c.$PollVoteNotification2.getUnreadCount(),pollName:c.$PollVoteNotification1.pollName});return c}var f=e.prototype;f.shouldPlaySound=function(){var b=d("WAWebFrontendMsgGetters").getChat(this.$PollVoteNotification1.unsafe());return a.prototype.shouldPlaySound.call(this)&&!d("WAWebNotificationHelpers").shouldSquelch(b,!1)};f.shouldMute=function(){var a=d("WAWebFrontendMsgGetters").getChat(this.$PollVoteNotification1.unsafe());if(d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute()))return!0;if(d("WAWebABProps").getABPropConfigValue("web_abprop_mute_notifications_on_app_focus")?d("WAWebNotificationHelpers").appIsActive():d("WAWebNotificationHelpers").chatIsActive(a))return!0;if(d("WAWebNotificationHelpers").isMutedAndNotMentioned(this.$PollVoteNotification1.unsafe()))return!0;if(d("WAWebNotificationHelpers").isArchivedAndNotMentioned(this.$PollVoteNotification1.unsafe()))return!0;if(!c("gkx")("26258")&&d("WAWebNotificationHelpers").shouldIgnoreGroupMsg(this.$PollVoteNotification1.unsafe()))return!0;return d("WAWebNotificationHelpers").isOfflineResumeInProgress()?!0:!1};f.shouldSquelch=function(){if(d("WAWebNotificationController").WANotificationController.notificationExists(this.buildKey()))return!1;var a=d("WAWebFrontendMsgGetters").getChat(this.$PollVoteNotification1.unsafe());return d("WAWebNotificationHelpers").shouldSquelch(a,!1)?!0:!1};f.afterBannerShown=function(a){var b=this;this.$PollVoteNotification2.on("change add remove reset",this.$PollVoteNotification3);a.waitForClose().then(function(){b.$PollVoteNotification2.off("change add remove reset",b.$PollVoteNotification3)})};f.buildKey=function(){return"vote:"+this.$PollVoteNotification1.id.toString()};f.matchesChat=function(a){return c("WAWebWid").equals(d("WAWebFrontendMsgGetters").getChat(this.$PollVoteNotification1.unsafe()).id,a)};f.getChatKind=function(){return d("WAWebFrontendMsgGetters").getChat(this.$PollVoteNotification1.unsafe()).kind};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebFrontendMsgGetters").getChat(this.$PollVoteNotification1.unsafe());return d("WAWebNotificationIconUtils").getChatNotificationIcon(a,this.abortController.signal)});function c(){return a.apply(this,arguments)}return c}();f.getBannerOptions=function(){var a=this.$PollVoteNotification1,b=d("WAWebFrontendMsgGetters").getChat(a.unsafe());return{wid:b.id,msgId:a.id.toString(),tag:this.buildKey(),title:d("WAWebNotificationHelpers").getNotificationTitle(b),body:d("WAWebGetNotificationStrings").getNotificationBody(babelHelpers["extends"]({},this.$PollVoteNotification4(),{msgDir:d("WAWebFrontendMsgGetters").getDir(a)})),canReply:!1,canMarkAsRead:!1}};f.$PollVoteNotification4=function(){return{body:this.bodyText}};return e}(d("WAWebBaseNotification").WABaseNotification);function i(a){var b=a.unreadCount;a=a.pollName;return h._("__JHASH__1i4EGFAFtrA__JHASH__",[h._plural(b,"number_of_votes"),h._param("pollName",a)]).toString()}g.PollVoteNotification=a}),226);
__d("WAWebPremiumMessageHydrateMessageAction",["WASyncAction.pb","WAWebContactCollection","WAWebContactGetters","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WAWebContactCollection").ContactCollection.get(a.id.remote);if(c==null)return;switch(b.type){case d("WASyncAction.pb").SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType.PERSONALIZED:b=h(b,c);a.mediaData==null?a.set("body",b):a.set("caption",b);break;default:a.type=d("WAWebMsgType").MSG_TYPE.UNKNOWN;break}}function h(a,b){a=i(a,b);return a}function i(a,b){b=d("WAWebContactGetters").getPremiumMessageName(b);return b===""?a.message.replaceAll(/ ?<<customer_name>>/g,""):a.message.replace(/<<customer_name>>/g,b)}g.hydratePremiumMessage=a}),98);
__d("WAWebPremiumMessageCollection",["WAWebBaseCollection","WAWebPremiumMessageModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebPremiumMessageModel").PremiumMessage;b=new a();g.PremiumMessageCollection=b}),98);
__d("WAWebPremiumMessageModel",["WAWebBaseModel","WAWebMsgCollection","WAWebPremiumMessageHydrateMessageAction"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop(),c.message=d("WAWebBaseModel").prop(),c.isDeleted=d("WAWebBaseModel").prop(),c.sentMessageIds=d("WAWebBaseModel").prop(),c.mediaId=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.listenTo(this,"change:message change:sentMessageIds change:type",this.hydrateMessages)};c.hydrateMessages=function(){var a=this;d("WAWebMsgCollection").MsgCollection.getModelsArray().filter(function(b){return b.smbClientCampaignId===a.id}).forEach(function(b){d("WAWebPremiumMessageHydrateMessageAction").hydratePremiumMessage(b,a)})};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="premium_message";b=d("WAWebBaseModel").defineModel(a);g.PremiumMessage=b}),98);
__d("WAWebGetUserDisclosuresContentsJob",["WAJobOrchestratorTypes","WAWebGetUserDisclosuresContentsQueryJob","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getDisclosuresContentsJob",function(){return d("WAWebGetUserDisclosuresContentsQueryJob").getUserDisclosureContentsQueryJob(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getDisclosuresContentsJob=a}),98);
__d("WACcToIso",[],(function(a,b,c,d,e,f){"use strict";a=[];a[34]="ES";a[49]="DE";a[52]="MX";a[44]="GB";a[966]="SA";a[39]="IT";a[93]="AF";a[355]="AL";a[213]="DZ";a[376]="AD";a[244]="AO";a[54]="AR";a[374]="AM";a[297]="AW";a[61]="AU";a[43]="AT";a[994]="AZ";a[973]="BH";a[880]="BD";a[375]="BY";a[32]="BE";a[501]="BZ";a[229]="BJ";a[975]="BT";a[591]="BO";a[387]="BA";a[267]="BW";a[55]="BR";a[246]="IO";a[673]="BN";a[359]="BG";a[226]="BF";a[257]="BI";a[225]="CI";a[855]="KH";a[237]="CM";a[238]="CV";a[236]="CF";a[235]="TD";a[56]="CL";a[86]="CN";a[57]="CO";a[269]="KM";a[242]="CG";a[243]="CD";a[682]="CK";a[506]="CR";a[385]="HR";a[53]="CU";a[599]="CW";a[357]="CY";a[420]="CZ";a[45]="DK";a[253]="DJ";a[593]="EC";a[20]="EG";a[503]="SV";a[240]="GQ";a[291]="ER";a[372]="EE";a[251]="ET";a[298]="FO";a[679]="FJ";a[358]="FI";a[33]="FR";a[594]="GF";a[689]="PF";a[241]="GA";a[220]="GM";a[995]="GE";a[233]="GH";a[350]="GI";a[30]="GR";a[299]="GL";a[590]="GP";a[502]="GT";a[224]="GN";a[245]="GW";a[592]="GY";a[509]="HT";a[504]="HN";a[852]="HK";a[36]="HU";a[354]="IS";a[91]="IN";a[62]="ID";a[98]="IR";a[964]="IQ";a[353]="IE";a[972]="IL";a[81]="JP";a[962]="JO";a[254]="KE";a[965]="KW";a[996]="KG";a[856]="LA";a[371]="LV";a[961]="LB";a[266]="LS";a[231]="LR";a[218]="LY";a[423]="LI";a[370]="LT";a[352]="LU";a[853]="MO";a[389]="MK";a[261]="MG";a[265]="MW";a[60]="MY";a[960]="MV";a[223]="ML";a[356]="MT";a[692]="MH";a[596]="MQ";a[222]="MR";a[230]="MU";a[691]="FM";a[373]="MD";a[377]="MC";a[976]="MN";a[382]="ME";a[212]="MA";a[258]="MZ";a[95]="MM";a[264]="NA";a[674]="NR";a[977]="NP";a[31]="NL";a[687]="NC";a[64]="NZ";a[505]="NI";a[227]="NE";a[234]="NG";a[672]="NF";a[850]="KP";a[47]="NO";a[968]="OM";a[92]="PK";a[680]="PW";a[970]="PS";a[507]="PA";a[675]="PG";a[595]="PY";a[51]="PE";a[63]="PH";a[48]="PL";a[351]="PT";a[974]="QA";a[40]="RO";a[7]="RU";a[250]="RW";a[262]="RE";a[508]="PM";a[685]="WS";a[378]="SM";a[221]="SN";a[381]="RS";a[248]="SC";a[232]="SL";a[65]="SG";a[421]="SK";a[386]="SI";a[677]="SB";a[252]="SO";a[27]="ZA";a[82]="KR";a[211]="SS";a[94]="LK";a[249]="SD";a[597]="SR";a[268]="SZ";a[46]="SE";a[41]="CH";a[963]="SY";a[239]="ST";a[886]="TW";a[992]="TJ";a[255]="TZ";a[66]="TH";a[670]="TL";a[228]="TG";a[676]="TO";a[216]="TN";a[90]="TR";a[993]="TM";a[256]="UG";a[380]="UA";a[971]="AE";a[1]="US";a[598]="UY";a[998]="UZ";a[678]="VU";a[58]="VE";a[84]="VN";a[681]="WF";a[967]="YE";a[260]="ZM";a[263]="ZW";a[383]="XK";b=a;f["default"]=b}),66);
__d("WAWebWamEnumNoticeType",[],(function(a,b,c,d,e,f){a=Object.freeze({LEGACY_USER_NOTICE:0,BADGED_USER_NOTICE:1,PDFN_DISCLOSURE:2});f.NOTICE_TYPE=a}),66);
__d("WAWebWamEnumUserNoticeErrorEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_STANZA:1,JSON_FETCH:2,JSON_PARSE:3,IMAGE_FETCH:4,NO_ELIGIBLE_DISCLOSURE:5,DISCLOSURE_STAGE_FETCH:6,UI_TEMPLATE_MISMATCHED:7,ERROR_UNKNOWN:8,SYNC_STAGE_MISMATCH:9,IMAGE_FETCH_400:10,JSON_FETCH_400:11,JSON_FETCH_REDIRECT:12,IMAGE_FETCH_REDIRECT:13,IMAGE_FETCH_FORBIDDEN:14,JSON_FETCH_FORBIDDEN:15});f.USER_NOTICE_ERROR_EVENT=a}),66);
__d("WAWebUserNoticeErrorWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumNoticeType","WAWebWamEnumUserNoticeErrorEvent"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({UserNoticeError:[2474,{noticeType:[4,d("WAWebWamEnumNoticeType").NOTICE_TYPE],userNoticeContentVersion:[2,d("WAWebWamCodegenUtils").TYPES.INTEGER],userNoticeErrorEvent:[3,d("WAWebWamEnumUserNoticeErrorEvent").USER_NOTICE_ERROR_EVENT],userNoticeId:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{UserNoticeError:[]});g.UserNoticeErrorWamEvent=a}),98);
__d("isNonZeroNumber",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null&&a!==0&&!isNaN(a)}f.isNonZeroNumber=a}),66);
__d("WAWebGetUserDisclosuresContentsQueryJob",["Promise","WAAbortError","WACcToIso","WALogger","WANullthrows","WAPhoneUtils","WAWebConnModel","WAWebHttpErrors","WAWebPonyfillsFetch","WAWebURLUtils","WAWebUserNoticeErrorWamEvent","WAWebUserPrefsInfoStore","WAWebUserPrefsMeUser","WAWebWamEnumUserNoticeErrorEvent","asyncToGeneratorRuntime","err","isNonZeroNumber"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notice: Icon fetch error : ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notice:fetchNoticeData successful for policyVersion ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notice: Error Message : ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notice: Unknown action type ",""]);l=function(){return a};return a}var m="https://www.whatsapp.com/user-notice/v1/",n=new Set(["ACCEPT","OK"]),o="zz",p="ZZ";function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("isNonZeroNumber").isNonZeroNumber(a)){var e,f=d("WAWebUserPrefsMeUser").getMeUser();f=d("WAPhoneUtils").findCC(f.user);f=r(f);var g=(yield d("WAWebUserPrefsInfoStore").deviceInfo.get());g=c("WAWebURLUtils").build(m,{id:a,lg:(e=g.lg)!=null?e:o,lc:(e=g.lc)!=null?e:p,cc:f,platform:d("WAWebConnModel").Conn.isSMB?"smbweb":"web"});return s(g,a)}return(h||(h=b("Promise"))).resolve({disclosureId:a})});return q.apply(this,arguments)}function r(a){a=parseInt(a,10);a=c("WACcToIso")[a];return c("WANullthrows")(a)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield u(a));try{if(a!=null){a=JSON.parse(a);if(a!=null)return w(a,b)}}catch(c){a=new(d("WAWebUserNoticeErrorWamEvent").UserNoticeErrorWamEvent)({userNoticeId:b,userNoticeContentVersion:1,userNoticeErrorEvent:d("WAWebWamEnumUserNoticeErrorEvent").USER_NOTICE_ERROR_EVENT.JSON_PARSE});a.commit()}}catch(a){if(a.name===d("WAAbortError").ABORT_ERROR)return;d("WALogger").ERROR(k(),a.message).sendLogs("pdfn-notice-content-error");throw new(d("WAWebHttpErrors").HttpNetworkError)()}});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new AbortController();b=b.signal;a=(yield c("WAWebPonyfillsFetch")(a,{signal:b}));return a.text()});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=a.policyVersion;if(f==null)throw c("err")("Missing field policyVersion in notice content.");d("WALogger").LOG(j(),f);var g=z(a);a=y(a);f=parseInt(f,10);var k;try{k=(yield E(g))}catch(a){var l=new(d("WAWebUserNoticeErrorWamEvent").UserNoticeErrorWamEvent)({userNoticeId:e,userNoticeContentVersion:f,userNoticeErrorEvent:d("WAWebWamEnumUserNoticeErrorEvent").USER_NOTICE_ERROR_EVENT.IMAGE_FETCH});l.commit();d("WALogger").ERROR(i(),a.message).sendLogs("notice-icon-fetch-error")}return(h||(h=b("Promise"))).resolve({disclosureId:e,policyVersion:f,privacyDisclosureModal:(l=k)!=null?l:g,endDate:a})});return x.apply(this,arguments)}function y(a){a=a["privacy-disclosure"]&&a["privacy-disclosure"].timing.end.time;return a==null?null:new Date(a)}function z(a){a=a["privacy-disclosure"]&&A(a["privacy-disclosure"].prompts[0]);return a==null?null:D(a)}function A(a){if(!a)return;B(["icon","iconDescription","title","bullets","primaryButton","nav"],a);B(["light","dark","type"],a.icon);B(["dismissButton","backButton"],a.nav);for(var b=0;b<a.bullets.length;b++)B(["icon","text"],a.bullets[b]);b=a.footer!=null?{footer:a.footer}:{};return babelHelpers["extends"]({icon:{light:a.icon.light,dark:a.icon.dark,type:a.icon.type},iconSvg:{light:"",dark:""},iconDescription:a.iconDescription,title:a.title,bullets:a.bullets,primaryButton:a.primaryButton,nav:{dismissButton:a.nav.dismissButton,backButton:a.nav.backButton}},b)}function B(a,b){a.forEach(function(a){if(!(a in b))throw c("err")("Missing field "+a+" in notice content.")})}var C=function(a){if(!a)return null;var b=a.action;if(b){if(n.has(b))return a;d("WALogger").WARN(l(),b)}return null};function D(a){if(!a)return null;a.primaryButton=C(a.primaryButton);return a}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[a==null?void 0:a.icon.light,a==null?void 0:a.icon.dark];for(var d=0;d<((e=a==null?void 0:a.bullets.length)!=null?e:0);d++){var e;e=a==null?void 0:a.bullets[d];e!=null&&(c.push(e.icon.light),c.push(e.icon.dark))}e=c.map(function(a){return a!=null?u(a):(h||(h=b("Promise"))).resolve(null)});d=a;c=(yield (h||(h=b("Promise"))).all(e));e=c[0];var f=c[1];c=c.slice(2);var g=[];for(var i=0;i<((j=a==null?void 0:a.bullets.length)!=null?j:0);i++){var j;j=a==null?void 0:a.bullets[i];if(j!=null){var k=c[i*2],l=c[i*2+1];k!=null&&l!=null?g.push(babelHelpers["extends"]({},j,{iconSvg:{light:k,dark:l}})):g.push(j)}}a&&e!=null&&f!=null&&(d=babelHelpers["extends"]({},a,{bullets:g,iconSvg:{light:e,dark:f}}));return d});return F.apply(this,arguments)}g.getUserDisclosureContentsQueryJob=a}),98);
__d("WAWebGetUserDisclosuresContentsAction",["WAWebGetUserDisclosuresContentsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebGetUserDisclosuresContentsJob").getDisclosuresContentsJob(a));return a});return h.apply(this,arguments)}g.getDisclosuresContentAction=a}),98);
__d("WAWebFrontendConstants",[],(function(a,b,c,d,e,f){a=100;b=1024;c=264;f.SCROLL_FUDGE=a;f.LAYOUT_2COLUMNS_MAX_WIDTH=b;f.QR_EDGE=c}),66);
__d("WAWebBizCatalogUtils",["Promise","WATypeUtils","WAWebCatalogCollection","WAWebFrontendConstants","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=3;function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.getData().length||0;c=!a.getCanLoadMore()||!m(c,a.listItemHeight);var e=d("WAWebUserPrefsMeUser").getMaybeMeUser();b&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(b,{bool:{IsCached:c,IsConsumer:!e.equals(a.catalog.id)}});if(c)return!0;yield a.loadMore(!0);b=a.getData().length||0;return m(b,a.listItemHeight)?a.loadInitialItems():!0});return k.apply(this,arguments)}c=function(){function a(a,b,c,d){this.loading=null;this.catalog=a;this.collectionId=b;this.forCatalogManager=c;this.listItemHeight=d;if(b){this.canLoadMoreCollectionItems=a.collections.length>0?((c=this.catalog.collections.get(b))==null?void 0:c.afterCursor)!=="":!0}else this.canLoadMoreAllItems=a.productCollection.length>0?!!this.catalog.afterCursor:!0}var c=a.prototype;c.loadMore=function(a){var c=this;if(this.loading)return this.loading;if(!this.getCanLoadMore())return(h||(h=b("Promise"))).resolve();var e=this.collectionId;if(e){a=a?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL:void 0;this.loading=this.catalog.collections.findCollectionProducts(this.catalog.id,e,!1,a).then(function(){var a;c.canLoadMoreCollectionItems=!!((a=c.catalog.collections.get(e))==null?void 0:a.afterCursor);c.loading=null})}else this.loading=d("WAWebCatalogCollection").CatalogCollection.update(this.catalog.id).then(function(){c.canLoadMoreAllItems=!!c.catalog.afterCursor,c.loading=null});return this.loading};c.loadInitialItems=function(){var a=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL;return j(this,a)};c.getCanLoadMore=function(){return this.canLoadMoreCollectionItems||this.canLoadMoreAllItems};c.getData=function(){var a=this.collectionId;if(a){a=((a=this.catalog.collections.get(a))==null?void 0:a.productCollection.getProductModels(this.forCatalogManager))||[]}else a=this.catalog.productCollection.getProductModels(this.forCatalogManager)||[];return a.map(function(a){return{product:a,collection:void 0}})};return a}();e=function(){function a(a,b,c,d){this.loading=null,this.catalog=a,this.forCatalogManager=b,this.listItemHeight=c,this.canLoadMoreCollections=a.collections.length>0?!!this.catalog.collections.afterCursor:!0,this.canLoadMoreCatalog=a.productCollection.length>0?!!this.catalog.afterCursor:!0,this.canLogQpl=d}var c=a.prototype;c.loadMore=function(a){var c=this;if(this.loading)return this.loading;if(!this.getCanLoadMore())return(h||(h=b("Promise"))).resolve();if(this.canLoadMoreCollections){a=this.canLogQpl&&a===!0?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW:void 0;this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,i,this.forCatalogManager,a).then(function(){c.canLoadMoreCollections=!!c.catalog.collections.afterCursor,c.loading=null})}else this.loading=d("WAWebCatalogCollection").CatalogCollection.update(this.catalog.id).then(function(){c.canLoadMoreCatalog=!!c.catalog.afterCursor,c.loading=null});return this.loading};c.loadInitialItems=function(){var a=this.canLogQpl?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW:void 0;return j(this,a)};c.getCanLoadMore=function(){return this.canLoadMoreCollections||this.canLoadMoreCatalog};c.getData=function(){var a=this,b=this.catalog.collections.getCollectionModels(this.forCatalogManager),c=b.length>0;b=b.reduce(function(b,c){var d;b===void 0&&(b=[]);b.push({collection:c,product:void 0});var e=c.productCollection.getProductModels(a.forCatalogManager)||[];e.length>i&&(e.length=i);(d=b).push.apply(d,e.map(function(a){return{product:a,collection:c}}));return b},[]);if(this.canLoadMoreCollections)return b;c&&b.push({allItems:{totalItemsCount:b.length}});c=this.catalog.productCollection.getProductModels(this.forCatalogManager).map(function(a){return{product:a,collection:void 0}});b.push.apply(b,c);return b};return a}();f=function(){function a(a,b,c,d){this.loading=null,this.canLoadMoreCollections=!0,this.catalog=a,this.forCatalogManager=b,this.listItemHeight=c,this.canLogQpl=d}var c=a.prototype;c.loadMore=function(a){var c=this;if(this.loading)return this.loading;if(!this.getCanLoadMore())return(h||(h=b("Promise"))).resolve();if(this.canLoadMoreCollections){a=this.canLogQpl&&a===!0?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW:void 0;this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,i,this.forCatalogManager,a).then(function(){c.canLoadMoreCollections=!!c.catalog.collections.afterCursor,c.loading=null})}return this.loading||(h||(h=b("Promise"))).resolve()};c.loadInitialItems=function(){var a=this.canLogQpl?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW:void 0;return j(this,a)};c.getCanLoadMore=function(){return this.canLoadMoreCollections};c.resetData=function(){var a;((a=this.catalog)==null?void 0:a.collections)&&(this.catalog.collections.reset(),this.catalog.collections.afterCursor="");this.canLoadMoreCollections=!0};c.getData=function(){return this.catalog.collections.getCollectionModels(this.forCatalogManager).map(function(a){return{collection:a,product:void 0}})};return a}();var l=function(){function a(a,b,c){this.loading=null,this.canLoadMore=!0,this.catalog=a,this.catalog.stale=!0,this.catalog.markProductCollectionOld(),this.catalog.productCollection.reset(),this.listItemHeight=b,this.collectionId=c}var c=a.prototype;c.loadMore=function(){var a=this;if(this.loading)return this.loading;if(!this.getCanLoadMore())return(h||(h=b("Promise"))).resolve();this.canLoadMore&&(!this.collectionId?this.loading=d("WAWebCatalogCollection").CatalogCollection.update(this.catalog.id).then(function(){a.canLoadMore=!!a.catalog.afterCursor,a.loading=null}):this.loading=d("WAWebCatalogCollection").CatalogCollection.findCollectionMembership(this.catalog.id,this.collectionId).then(function(){a.canLoadMore=!!a.catalog.afterCursor,a.loading=null}));return this.loading||(h||(h=b("Promise"))).resolve()};c.loadInitialItems=function(){return j(this)};c.getCanLoadMore=function(){return this.canLoadMore};c.getData=function(){return this.catalog.productCollection.getProductModels(!0).map(function(a){return{product:a,collection:void 0}})};return a}();function m(a,b){return a*b<window.innerHeight}var n=function(){function a(a){this.dataSource=a}var c=a.prototype;c.isScrollAtBottom=function(a){return a.scrollTop+d("WAWebFrontendConstants").SCROLL_FUDGE>=a.scrollHeight-a.clientHeight};c.willLoadMore=function(a){return Boolean(this.dataSource.loading||this.isScrollAtBottom(a))};c.onScroll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(this.dataSource.loading){yield this.dataSource.loading;return!0}if(this.isScrollAtBottom(b)){yield this.dataSource.loadMore();return!0}return!1});function c(b,c){return a.apply(this,arguments)}return c}();return a}();function a(a,b,c){a=d("WAWebCatalogCollection").CatalogCollection.get(a);var e,f;if(!a)return void 0;if(!b&&c){var g=a.productCollection.get(c.id);e=g&&a.productCollection.indexOf(g);return{productId:c.id.toString(),productIndex:d("WATypeUtils").isNumber(e)&&e>-1?e.toString():void 0}}if(b){g=b&&a.collections.get(b);f=g&&a.collections.indexOf(g);a=c&&(g==null?void 0:g.productCollection.get(c.id));e=a&&(g==null?void 0:g.productCollection.indexOf(a))}return{collectionId:b||"",productId:c==null?void 0:c.id.toString(),collectionIndex:d("WATypeUtils").isNumber(f)&&f>-1?f.toString():void 0,productIndex:d("WATypeUtils").isNumber(e)&&e>-1?e.toString():void 0}}g.SingleCollectionDataSource=c;g.CatalogWithCollectionsDataSource=e;g.CollectionsDataSource=f;g.CollectionsContentDataSource=l;g.CatalogListItemScrollHelper=n;g.getProductStatsInFetched=a}),98);
__d("WAWebChangeProfilePicThumb",["Promise","WAWebApiContact","WAWebBackendApi","WAWebContactProfilePicThumbBridge","WAWebProfilePicConstants","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[j(a,c)];if(a.isLid()){a=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a));a!=null&&e.push(j(a,c))}yield (h||(h=b("Promise"))).all(e)});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b===d("WAWebProfilePicConstants").ProfilePicCommand.Remove)yield d("WAWebContactProfilePicThumbBridge").persistProfilePicToDB(a),d("WAWebBackendApi").frontendFireAndForget("removeProfilePicThumb",{wid:a});else return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("setProfilePicThumb",{wid:a})});return k.apply(this,arguments)}g.changeProfilePicThumb=a}),98);
__d("WAWebActionToast.react",["WAAbortError","WAPromiseDelays","WAWebToast.react","WAWebToastManager","err","lodash","react","useWAWebPrevious"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=b.useState,n=5e3,o={LEFT:"LEFT",RIGHT:"RIGHT"};e=function(a,b){if(!a)throw c("err")("ActionType must have text!");this.text=a;b&&(this.action=b.actionText,this.handler=b.actionHandler)};function p(a){return c("lodash").uniqueId(a||"action_toast")}function a(a){var b=a.settleDuration,e=b===void 0?n:b;b=a.toastPosition;b=b===void 0?o.LEFT:b;var f=a.initialAction,g=a.pendingAction;a=a.id;var h=a===void 0?p():a;a=m(f);var i=a[0],q=a[1];a=m(f);var r=a[0],s=a[1];a=m(!0);var t=a[0],u=a[1],v=c("useWAWebPrevious")(i),w=l(null);a=function(){if(!r)return;if(!r.handler)return;r.handler()["catch"](function(){})};k(function(){f!==v&&(q(f),s(f),u(!0))},[f,v]);i=function(){d("WAWebToastManager").ToastManager.close(h)};var x=function(a){w.current&&w.current.controller.abort();var b=new AbortController(),c=b.signal;a=a.then(function(a){if(c.aborted)throw new(d("WAAbortError").AbortError)();s(a);u(!1)})["catch"](function(a){if(a.name!==d("WAAbortError").ABORT_ERROR)s(a),u(!1);else throw a}).then(function(){return d("WAPromiseDelays").delayMs(e)}).then(function(){if(c.aborted)throw new(d("WAAbortError").AbortError)();d("WAWebToastManager").ToastManager.close(h)})["catch"](d("WAAbortError").catchAbort(function(){}));w.current={promise:a,controller:b}};k(function(){x(g)},[g]);if(!r)return null;var y;r.action&&r.handler&&(y=j.jsx(d("WAWebToast.react").ToastActionBtn,{buttonText:r.action,onClick:a}));var z;t||(z=j.jsx(d("WAWebToast.react").ToastDismissBtn,{onClick:i}));return j.jsx(d("WAWebToast.react").ToastBody,{toastPosition:b,actionText:r.text,actionButtons:y,dismissButton:z})}a.displayName=a.name+" [from "+f.id+"]";g.ToastPosition=o;g.ActionType=e;g.genId=p;g.ActionToast=a}),98);
__d("WAWebProfilePicThumbAction",["fbt","Promise","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebContactProfilePicThumbBridge","WAWebMiscErrors","WAWebStateUtils","WAWebToastManager","WAWebUserPrefsMeUser","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:ProfilePicThumb:deletePicture dropped"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:ProfilePicThumb:setPicture dropped"]);l=function(){return a};return a}var m=j||c("react");function a(a,b,c){return n(d("WAWebStateUtils").unproxy(a),b,c)}function e(a){return o(d("WAWebStateUtils").unproxy(a))}function n(a,c,e,f){f===void 0&&(f=d("WAWebActionToast.react").genId());var g=a.id;if(!a.canSet())return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());var j=d("WAWebContactProfilePicThumbBridge").sendSetPicture(g,c,e);a.pendingPic=c;var k=d("WAWebUserPrefsMeUser").getMaybeMeUser(),o=g.equals(k)?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__dfAnswjHmPe__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH___fOOhlOJTHO__JHASH__")),p=j["catch"](function(a){d("WALogger").WARN(l()).devConsole(a);throw g.equals(k)?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__DxNont7go9L__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__WjFcAnGgX9p__JHASH__"))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(b){if(b.status>=400){b=g.equals(k)?h._("__JHASH__DxNont7go9L__JHASH__"):h._("__JHASH__WjFcAnGgX9p__JHASH__");return new(d("WAWebActionToast.react").ActionType)(b,{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return n(a,c,e,f)}})}})).then(function(){return g.equals(k)?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__DhFc1OMXgBF__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__DjZqQ6mVCUf__JHASH__"))});d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebActionToast.react").ActionToast,{id:f,initialAction:o,pendingAction:p}));return j.then(function(b){a.set({tag:b.tag,eurl:b.eurl})})["finally"](function(){a.pendingPic=void 0})}function o(a,c){c===void 0&&(c=d("WAWebActionToast.react").genId());var e=a.id;if(!a.canDelete())return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());var f=d("WAWebContactProfilePicThumbBridge").requestDeletePicture(e);a.pendingPic=a.fallbackType;var g=d("WAWebUserPrefsMeUser").getMaybeMeUser(),j=e.equals(g)?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__QT9IovJxNUu__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__m18duotvm_r__JHASH__")),l=f["catch"](function(a){d("WALogger").WARN(k()).devConsole(a);throw e.equals(g)?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__405_zmbBZ_5__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__XmaQtT11tB___JHASH__"))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(b){if(b.status>=400){b=e.equals(g)?h._("__JHASH__405_zmbBZ_5__JHASH__"):h._("__JHASH__XmaQtT11tB___JHASH__");return new(d("WAWebActionToast.react").ActionType)(b,{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return o(a,c)}})}})).then(function(){return e.equals(g)?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__5SFLzE2XdHI__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__BUaNHHLyzTl__JHASH__"))});d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebActionToast.react").ActionToast,{id:c,initialAction:j,pendingAction:l}));return f.then(function(){a.set({tag:void 0,eurl:void 0})})["finally"](function(){a.pendingPic=void 0})}g.setProfilePic=a;g.deleteProfilePic=e}),226);
__d("WAWebProfilePicThumbCollection",["Promise","WAFilteredCatch","WALogger","WATimeUtils","WAWebBackendErrors","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebChatCollection","WAWebContactProfilePicThumbBridge","WAWebGroupType","WAWebNewsletterCollection","WAWebProfilePicThumbModel","WAWebUnjoinedSubgroupMetadataCollection","WAWebUserPrefsKeys","WAWebVcardParsingUtils","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumbStore:resyncPictures dropped: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumbStore:resyncPictures dropped: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumbStore:resyncPictures blocked ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumbStore:resyncPictures success"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumbStore:resyncMyProfilePicture failed: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProfilePicThumbStore:resyncPictures success"]);n=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,i=new Array(g),j=0;j<g;j++)i[j]=arguments[j];return(e=f=a.call.apply(a,[this].concat(i))||this,f.findImpl=function(a){var e,f,g=a.isNewsletter()?b("WAWebNewsletterCollection"):b("WAWebChatCollection").ChatCollection;g=g.get(a);e=(g==null?void 0:(e=g.groupMetadata)==null?void 0:e.groupType)===d("WAWebGroupType").GroupType.COMMUNITY;var i=b("WAWebUnjoinedSubgroupMetadataCollection");i=i.get(a.toString());if((g==null?void 0:g.isReadOnly)&&!e&&!(g==null?void 0:g.isNewsletter)&&i==null||(g==null?void 0:(f=g.groupMetadata)==null?void 0:f.terminated)||(g==null?void 0:(f=g.newsletterMetadata)==null?void 0:f.terminated)||(g==null?void 0:(f=g.newsletterMetadata)==null?void 0:f.isPreview))return(h||(h=b("Promise"))).resolve({id:a,stale:!0});else if((c("WAWebWid").isUser(a)||c("WAWebWid").isGroup(a)||c("WAWebWid").isNewsletter(a))&&!c("WAWebWid").isPSA(a)){e=e?a:g==null?void 0:(f=g.groupMetadata)==null?void 0:f.parentGroup;i!=null&&(e=i.parentGroupId);return d("WAWebContactProfilePicThumbBridge").requestProfilePicFromServer(a,e)}return(h||(h=b("Promise"))).resolve({id:a,tag:null})},f._getUpdatedProfilePicModel=function(a){return{tag:a.tag,raw:void 0,stale:!1,eurl:a.eurl,eurlStale:!1,previewEurl:a.previewEurl,previewDirectPath:a.previewDirectPath,fullDirectPath:a.fullDirectPath,filehash:a.filehash,timestamp:Date.now()}},e)||babelHelpers.assertThisInitialized(f)}var f=e.prototype;f.get=function(b){var c=a.prototype.get.call(this,b);this.isProfilePicRefreshNeeded(c==null?void 0:c.timestamp,c==null?void 0:c.eurlStale)&&(c==null?void 0:c.markStale({eurl:!0}));return!this.modelClass.prototype.isIdType(b)?c:c};f.resyncPicturesByWid=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;try{a=(yield d("WAWebContactProfilePicThumbBridge").profilePicResync(a.map(function(a){return{id:a}})));d("WALogger").LOG(n());a.forEach(function(a){var c=b._getUpdatedProfilePicModel(a),d=b.get(a.id);d?d.set(c):b.add(babelHelpers["extends"]({id:a.id},c))})}catch(a){d("WALogger").WARN(m(),a)}});function c(b){return a.apply(this,arguments)}return c}();f.resyncPictures=function(a){var c=this;return a.length===0?(h||(h=b("Promise"))).resolve():d("WAWebContactProfilePicThumbBridge").profilePicResync(a.map(function(a){return{id:a.id,tag:a.tag}})).then(function(b){d("WALogger").LOG(l()),b.forEach(function(a){var b=c.get(a.id);b&&b.set(c._getUpdatedProfilePicModel(a))}),a.forEach(function(a){a.eurlStale&&c.update(a.id),a.stale=!1})})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status===423||a.status===429?d("WALogger").WARN(k(),a.status):a.status>=400&&d("WALogger").WARN(j(),String(a))}))["catch"](function(a){d("WALogger").WARN(i(),String(a))})};f.findThumbnailWid=function(a){var b=this;return a.find(function(a){return(a=b.get(a))==null?void 0:a.img})};f.getThumbnailWidFromVcard=function(a){if(!a)return null;a=d("WAWebVcardParsingUtils").vcardWids(a);if(!a)return;var b=this.findThumbnailWid(a);return b?b:a.length?a[0]:null};f.isProfilePicRefreshNeeded=function(a,b){b===void 0&&(b=!1);if(a==null||b)return!0;b=Date.now()-a;return b>d("WATimeUtils").WEEK_MILLISECONDS};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebProfilePicThumbModel").ProfilePicThumb;a.staleCollection=!0;a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.PROFILE_PIC_THUMB_COLLECTION,trigger:"change:tag",policy:d("WAWebBaseCachePolicy").CACHE_POLICY.NONE,delay:5e3};e=new a();g.ProfilePicThumbCollectionImpl=a;g.ProfilePicThumbCollection=e}),98);
__d("WAWebProfilePicThumbModel",["WALogger","WAWebBaseModel","WAWebChatCollection","WAWebMediaHosts","WAWebMediaHostsRouteSelection","WAWebMmsClientSelectHost","WAWebMmsMediaTypes","WAWebProfilePicThumbCollection","WAWebUserPrefsMeUser","WAWebWid"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Using mms4 download url for profile-pic with host name ","."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to resolve mms4 hostname for profile-pic, falling back to static host. Error : ","."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["increased mms4 retry count: ",""]);j=function(){return a};return a}var k={SINGLE:"SINGLE",GROUP:"GROUP"},l="pps.whatsapp.net";a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.tag=d("WAWebBaseModel").prop(),e.raw=d("WAWebBaseModel").prop(),e.eurl=d("WAWebBaseModel").prop(),e.previewEurl=d("WAWebBaseModel").prop(),e.fullDirectPath=d("WAWebBaseModel").prop(),e.previewDirectPath=d("WAWebBaseModel").prop(),e.filehash=d("WAWebBaseModel").prop(),e.stale=d("WAWebBaseModel").session(!0),e.eurlStale=d("WAWebBaseModel").session(!1),e.pendingPic=d("WAWebBaseModel").session(),e.timestamp=d("WAWebBaseModel").session(),e.hostRetryCount=d("WAWebBaseModel").session(0),e.lastHostUsed=d("WAWebBaseModel").session(),e.img=d("WAWebBaseModel").derived(function(){if(this.raw)return"data:image/jpeg;base64,"+this.raw;if(!this.tag&&this.stale)return null;return!this.tag?void 0:this.previewDirectPath!=null?this.$ProfilePicThumbImpl1(this.previewDirectPath,this.filehash):this.previewEurl},["tag","raw","stale","eurl","eurlStale","previewEurl","previewDirectPath","hostRetryCount"]),e.imgFull=d("WAWebBaseModel").derived(function(){if((this.raw||!this.tag)&&this.stale)return null;if(this.raw)return void 0;return!this.tag?void 0:this.fullDirectPath!=null?this.$ProfilePicThumbImpl1(this.fullDirectPath,this.filehash):this.eurl},["tag","raw","stale","eurl","eurlStale","fullDirectPath","hostRetryCount"]),e.fallbackType=d("WAWebBaseModel").derived(function(){if(c("WAWebWid").isUser(this.id))return k.SINGLE;else if(c("WAWebWid").isGroup(this.id))return k.GROUP;return k.GROUP},["id"]),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.markStale=function(a){this.stale=!0,(a==null?void 0:a.eurl)===!0&&(this.eurlStale=!0)};f.markMms4HostSuccess=function(){this.hostRetryCount=0};f.markMms4HostFailure=function(){this.hostRetryCount++,d("WALogger").DEV(j(),this.hostRetryCount).tags("mms4")};f.validate=function(){if(!this.stale&&!this.eurlStale)return;return this.getCollection().update(this.id)};f.canSet=function(){if(c("WAWebWid").isGroup(this.id)){var a=b("WAWebChatCollection").ChatCollection.get(this.id);a=a==null?void 0:(a=a.groupMetadata)==null?void 0:a.participants.iAmRestrictedMember();return!a}return this.id.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser())?!0:!1};f.canDelete=function(){if(c("WAWebWid").isGroup(this.id)&&!!this.tag){var a=b("WAWebChatCollection").ChatCollection.get(this.id);a=a==null?void 0:(a=a.groupMetadata)==null?void 0:a.participants.iAmRestrictedMember();return!a}return this.id.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser())&&!!this.tag?!0:!1};f.getCollection=function(){return b("WAWebProfilePicThumbCollection").ProfilePicThumbCollection};f.$ProfilePicThumbImpl1=function(a,b){var c=l;try{c=this.$ProfilePicThumbImpl2(a,b).hostname}catch(a){d("WALogger").WARN(i(),a).tags("mms4")}d("WALogger").DEV(h(),c).tags("mms4");return"https://"+c+a};f.$ProfilePicThumbImpl2=function(a,b){a=d("WAWebMediaHosts").mediaHosts.getCachedHostsInfo({directPath:a,encFilehash:b,operation:d("WAWebMediaHostsRouteSelection").OPERATIONS.DOWNLOAD,type:d("WAWebMmsMediaTypes").MEDIA_TYPES.PPIC});b=a.selectedHost;a=a.fallbackHost;b=c("WAWebMmsClientSelectHost")({selectedHost:b,fallbackHost:a,attemptCount:this.hostRetryCount,lastHostUsed:this.lastHostUsed,lastFetchMadeProgress:this.hostRetryCount===0});this.lastHostUsed=b;return b};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="profilePicThumb";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g.FALLBACK=k;g.ProfilePicThumb=e}),98);
__d("WAWebQuickReplyEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({TEXT:"text",ADDRESS_SMART_DEFAULT:"address_smart_default",HOURS_SMART_DEFAULT:"hours_smart_default",PROFILE_SMART_DEFAULT:"profile_smart_default",PIX_KEY_SMART_DEFAULT:"pix_key_smart_default"});f.QuickReplyTypes=a}),66);
__d("WAWebQuickReplyGetters",["WAWebGetters","WAWebGettersCaches","WAWebQuickReplyEnum"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createQuickReplyCache});b=a.field;c=a.computed;e=a.unsafeIdentityGetter;f=a.clearCacheFor;a=f;f=e;e=b("id");b=b("count");c=c(function(a){a=a[0];a=(a=d("WAWebQuickReplyEnum").QuickReplyTypes.cast(a))!=null?a:d("WAWebQuickReplyEnum").QuickReplyTypes.TEXT;switch(a){case d("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT:return d("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT;case d("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT:return d("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT;case d("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT:return d("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT;case d("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT:return d("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT;default:return d("WAWebQuickReplyEnum").QuickReplyTypes.TEXT}},[e]);g.clearQuickReplyGetterCacheFor=a;g.getQuickReplyUnsafe=f;g.getId=e;g.getCount=b;g.getType=c}),98);
__d("WAWebFrontendQuickReplyGetters",["WAWebGetters","WAWebGettersCaches","WAWebQuickReplyGetters"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({root:d("WAWebQuickReplyGetters").getQuickReplyUnsafe,createCache:d("WAWebGettersCaches").createFrontendQuickReplyCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;a=b("pendingCount");e=c(function(a){var b=a[0];a=a[1];return b+a},[d("WAWebQuickReplyGetters").getCount,a]);g.clearFrontendQuickReplyGetterCacheFor=f;g.getPendingCount=a;g.getTotalCount=e}),98);
__d("WAWebBizQuickReplyBridge",["Promise","WAWebSchemaQuickReply"],(function(a,b,c,d,e,f,g){var h;function a(a){(h||(h=b("Promise"))).resolve();var c=a.id,e=a.shortcut,f=a.count,g=a.message;a=a.keywords;c={id:c,shortcut:e,count:f,message:g,keywords:a};e=d("WAWebSchemaQuickReply").getQuickReplyTable().createOrReplace(c);return e}g.updateQuickReply=a}),98);
__d("WAWebQuickReplyModel",["WAWebBaseModel","WAWebBizQuickReplyBridge","WAWebFrontendQuickReplyGetters","WAWebQuickReplyEnum","WAWebQuickReplyGetters"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.shortcut=d("WAWebBaseModel").prop(),c.message=d("WAWebBaseModel").prop(),c.count=d("WAWebBaseModel").prop(),c.keywords=d("WAWebBaseModel").prop(),c.pendingCount=d("WAWebBaseModel").session(0),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.useOnce=function(){this.isSmartDefault()?(this.count+=1,void d("WAWebBizQuickReplyBridge").updateQuickReply(this)):this.pendingCount+=1};c.isSmartDefault=function(){switch(d("WAWebQuickReplyGetters").getType(this)){case d("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT:case d("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT:case d("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT:return!0;default:return!1}};c["delete"]=function(){a.prototype["delete"].call(this),d("WAWebQuickReplyGetters").clearQuickReplyGetterCacheFor(this),d("WAWebFrontendQuickReplyGetters").clearFrontendQuickReplyGetterCacheFor(this)};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="quickReply";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebQuickReplyCollection",["WAWebBaseCollection","WAWebFrontendQuickReplyGetters","WAWebQuickReplyModel","WAWebQuickReplySmartDefaults"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.smartDefaultsAdded=!1,c.sortQuickReply=function(a,b){var c=d("WAWebFrontendQuickReplyGetters").getTotalCount(a),e=d("WAWebFrontendQuickReplyGetters").getTotalCount(b);return c===e?a.id<b.id?-1:1:c>e?-1:1},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.addSmartDefaultsIfNeeded=function(){this.smartDefaultsAdded===!1&&(d("WAWebQuickReplySmartDefaults").addSmartDefaults(),this.smartDefaultsAdded=!0)};c.filterShortcuts=function(a){var b=this.filter(function(b){b=b.shortcut;return b.toLowerCase().startsWith(a.toLowerCase())});return b.sort(this.sortQuickReply)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebQuickReplyModel");b=new a();g.QuickReplyCollectionImpl=a;g.QuickReplyCollection=b}),98);
__d("WAWebBizFrontendGatingUtils",["WAWebABProps","WAWebMobilePlatforms","WAWebPrimaryFeaturesModel"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebPrimaryFeaturesModel").PrimaryFeatures.paymentInfoSyncSupport&&d("WAWebABProps").getABPropConfigValue("order_details_payment_instructions_sync_enabled")}function b(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebPrimaryFeaturesModel").PrimaryFeatures.customPaymentMethodsSyncSupport&&d("WAWebABProps").getABPropConfigValue("payments_br_pix_phase_1_seller_sync_enabled")}function c(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebPrimaryFeaturesModel").PrimaryFeatures.customPaymentMethodsSyncSupport&&d("WAWebABProps").getABPropConfigValue("payments_br_pix_quick_reply_enabled")}g.isOrderDetailsPaymentInstructionsSyncEnabled=a;g.isCustomPaymentMethodsSyncEnabled=b;g.isPixInQuickReplyEnabled=c}),98);
__d("WAWebBrazilPixKeyFormattingUtils",["WAWebUserPrefsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=/^(\d{3})(\d{3})(\d{3})(\d{2})$/g,i="$1.$2.$3-$4",j=/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/g,k="$1.$2.$3/$4-$5",l=/^(\+\d{2})(\d{2})(\d{4,5})(\d{4})$/g,m="$1 $2 $3-$4";function a(a,b){if(b==null)return a;switch(b){case d("WAWebUserPrefsTypes").PixKeyType.CPF:return n(a);case d("WAWebUserPrefsTypes").PixKeyType.CNPJ:return o(a);case d("WAWebUserPrefsTypes").PixKeyType.PHONE:return p(a);case d("WAWebUserPrefsTypes").PixKeyType.EMAIL:case d("WAWebUserPrefsTypes").PixKeyType.EVP:return a}}function n(a){return a.replace(h,i)}function o(a){return a.replace(j,k)}function p(a){return a.replace(l,m)}g.getFormattedPixKey=a}),98);
__d("WAWebUserPrefsCustomPaymentMethods",["WALogger","WAWebUserPrefsKeys","WAWebUserPrefsLocalStorage","WAWebUserPrefsTypes"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["pix_display_name is null"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["pix_key_type is invalid"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["pix_key_type is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["pix_key is null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid custom payment method type: ",""]);l=function(){return a};return a}function m(a){return a!=null&&o(a.display_name)&&o(a.credentialId)&&o(a.key)&&o(a.key_type)&&d("WAWebUserPrefsTypes").PixKeyType.cast(a.key_type)!=null&&o(a.country)}function a(){var a;a=(a=n())==null?void 0:a.pix;return m(a)&&a?a:null}function n(){var a=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.CUSTOM_PAYMENT_METHODS);return a}function b(a){var b={};a.forEach(function(a){var c=d("WAWebUserPrefsTypes").WACustomPaymentMethodType.cast(a.type);if(c==null){d("WALogger").ERROR(l(),a.type).sendLogs("monitor-errors");return}switch(c){case d("WAWebUserPrefsTypes").WACustomPaymentMethodType.PIX_KEY:var e,f;c=(c=a.metadata.filter(function(a){return a.key==="pix_key"}))==null?void 0:(c=c.at(0))==null?void 0:c.value;if(c==null){d("WALogger").ERROR(k()).sendLogs("monitor-errors");return}e=(e=a.metadata.filter(function(a){return a.key==="pix_key_type"}))==null?void 0:(e=e.at(0))==null?void 0:e.value;if(e==null){d("WALogger").ERROR(j()).sendLogs("monitor-errors");return}e=d("WAWebUserPrefsTypes").PixKeyType.cast(e.toUpperCase());if(e==null){d("WALogger").ERROR(i()).sendLogs("monitor-errors");return}f=(f=a.metadata.filter(function(a){return a.key==="pix_display_name"}))==null?void 0:(f=f.at(0))==null?void 0:f.value;if(f==null){d("WALogger").ERROR(h()).sendLogs("monitor-errors");return}b.pix={credentialId:a.credentialId,key:c,key_type:e,display_name:f,country:a.country};break}});c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").KEYS.CUSTOM_PAYMENT_METHODS,b)}function e(){var a;a=(a=n())==null?void 0:a.pix;return m(a)}function o(a){return typeof a==="string"&&a.trim().length>0}f={getPIX:a,setCustomPaymentMethods:b,isPIXValid:e};g["default"]=f}),98);
__d("WAWebQuickReplySmartDefaults",["fbt","WAWebBizFrontendGatingUtils","WAWebBrazilPixKeyFormattingUtils","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebContactCollection","WAWebFrontendContactGetters","WAWebQuickReplyCollection","WAWebQuickReplyEnum","WAWebQuickReplyModel","WAWebUserPrefsCustomPaymentMethods","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g,h){function a(){o(),i(),j(),k()}function i(){var a=d("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT,c=m(),e=b("WAWebQuickReplyCollection").QuickReplyCollection;!e.get(a)?c&&e.add(c,{merge:!0}):c&&e.add({id:a,message:c.message},{merge:!0})}function j(){var a=d("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT,c=n(),e=b("WAWebQuickReplyCollection").QuickReplyCollection;!e.get(a)?c&&e.add(c,{merge:!0}):c&&e.add({id:a,message:c.message},{merge:!0})}function k(){var a=d("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT,c=l(),e=b("WAWebQuickReplyCollection").QuickReplyCollection;!e.get(a)?c&&e.add(c,{merge:!0}):c&&e.add({id:a,message:c.message},{merge:!0})}function l(){var a,e=b("WAWebBusinessProfileCollection").BusinessProfileCollection,f=b("WAWebBusinessProfileUtils").quickReplyHoursStr;e=e.get(d("WAWebUserPrefsMeUser").getMaybeMeUser());if(e==null?void 0:(a=e.businessHours)==null?void 0:a.config){a=d("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT;f=f(e.businessHours);return new(c("WAWebQuickReplyModel"))({id:a,shortcut:h._("__JHASH__bJUomZQhnPj__JHASH__").toString(),message:f,count:-1,keywords:[]})}}function m(){var a=d("WAWebContactCollection").ContactCollection.getMeContact();if(a){var b=d("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT;return new(c("WAWebQuickReplyModel"))({id:b,shortcut:h._("__JHASH__k9t4CrKiWk___JHASH__").toString(),message:d("WAWebFrontendContactGetters").getDisplayName(a),count:-1,keywords:[]})}}function n(){var a=b("WAWebBusinessProfileCollection").BusinessProfileCollection;a=a.get(d("WAWebUserPrefsMeUser").getMaybeMeUser());if((a==null?void 0:a.latitude)||(a==null?void 0:a.longitude)||(a==null?void 0:a.address)){var e=d("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT;a=a.address||h._("__JHASH__opR7fK9qdoa__JHASH__");var f="\ud83d\udccd";return new(c("WAWebQuickReplyModel"))({id:e,shortcut:h._("__JHASH__KWQcryoUjlr__JHASH__").toString(),message:h._("__JHASH__uZ8pOhpkEw5__JHASH__",[h._param("pinEmoji",f),h._param("address",a)]).toString(),count:-1,keywords:[]})}}function o(){var a=d("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT,c=p(),e=b("WAWebQuickReplyCollection").QuickReplyCollection;e.get(a)?c?e.add({id:a,message:c.message},{merge:!0}):e.remove(a):c&&e.add(c,{merge:!0})}function p(){if(d("WAWebBizFrontendGatingUtils").isPixInQuickReplyEnabled()){var a=c("WAWebUserPrefsCustomPaymentMethods").getPIX();if(a){var b=d("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT;return new(c("WAWebQuickReplyModel"))({id:b,shortcut:h._("__JHASH__Kk4dLLCbdjt__JHASH__").toString(),message:d("WAWebBrazilPixKeyFormattingUtils").getFormattedPixKey(a.key,a.key_type),count:-1,keywords:[]})}}}g.addSmartDefaults=a;g.getOrUpdatePixKeySmartDefault=o}),226);
__d("WAWebFlattenedReactionsActions",["WAWebAck","WAWebDBGetReactions","WAWebFlattenedReactionCollection","WAWebReactionTypeConversion","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebFlattenedReactionCollection").FlattenedReactionsCollection.byParent(a).toArray();if(b.length!==0)return b;b=(yield d("WAWebDBGetReactions").getReactions(a));a=(a=[]).concat.apply(a,b.reactions.map(function(a){return a.senders}));b=a.map(function(a){return d("WAWebReactionTypeConversion").convertReactionRowToFlattenedReaction(a,a.ack!=null&&a.ack<=d("WAWebAck").ACK.CLOCK)});d("WAWebFlattenedReactionCollection").FlattenedReactionsCollection.addOrUpdateReaction(b);return b});return h.apply(this,arguments)}g.hydrateOrGetReaction=a}),98);
__d("WAWebFlattenedReactionGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("flattened_reactions_collection")}g.isFlattenedReactionsEnabled=a}),98);
__d("WAWebReactionsMsgAction",["WAJobOrchestratorTypes","WALogger","WAWebAck","WAWebAddOnsUpdateSendStatesAction","WAWebAddonGatingUtils","WAWebDBCreateOrUpdateReactions","WAWebFlattenedReactionCollection","WAWebFlattenedReactionGatingUtils","WAWebFlattenedReactionsActions","WAWebLidMigrationUtils","WAWebMaybe","WAWebMessageAddOnType","WAWebMsgCollection","WAWebMsgKey","WAWebMsgModel","WAWebMsgReactionsBridge","WAWebMsgType","WAWebNotificationBackend","WAWebNotificationsReactionNotification","WAWebOrchestratorNonPersistedJob","WAWebReactionTypeConversion","WAWebReactionsBEUtils","WAWebReactionsCollection","WAWebReactionsModels","WAWebReactionsMsgActionUtils","WAWebSendAddonMsgChatAction","WAWebSendMsgRecordAction","WAWebSendMsgResultAction","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebReactionsUtils:resendUpdateFailedPropsForSentReactionsDBAndModel Reactions model not found for this message id"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["actions:addOrUpdateReactions reaction was not added or updated in the DB"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["actions:addOrUpdateReactions Notify for this reaction"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["actions:addOrUpdateReactions Reaction Model does not exist for this parentMsg"]);k=function(){return a};return a}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=a.parentMsgKey,f=a.ack,g=b("WAWebNotificationsReactionNotification");g=g.nonHydratedShouldMuteReactionNotification;c=c&&!g(a);if(d("WAWebFlattenedReactionGatingUtils").isFlattenedReactionsEnabled()){c?g=(yield d("WAWebFlattenedReactionsActions").hydrateOrGetReaction(e)):g=d("WAWebFlattenedReactionCollection").FlattenedReactionsCollection.byParent(e).toArray();d("WAWebFlattenedReactionCollection").FlattenedReactionsCollection.addOrUpdateReaction([d("WAWebReactionTypeConversion").convertReactionRowToFlattenedReaction(a,f!=null&&f<d("WAWebAck").ACK.CLOCK)]);g.length>0&&a.reactionText!==d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT&&(yield d("WAWebMsgReactionsBridge").updateHasReactionInParent(e,!0))}else{c?f=(yield d("WAWebReactionsCollection").ReactionsCollection.find(e)):f=d("WAWebReactionsCollection").ReactionsCollection.getAddressingModeInsensitive(e);if(f){d("WAWebReactionsCollection").ReactionsCollection.addOrUpdateReaction(a);g=f.reactions.length>0;yield d("WAWebMsgReactionsBridge").updateHasReactionInParent(e,g)}else a.reactionText!==d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT&&(yield d("WAWebMsgReactionsBridge").updateHasReactionInParent(e,!0)),d("WALogger").DEV(k())}c&&(d("WALogger").DEV(j()),d("WAWebNotificationBackend").showReactionNotification(a))});return m.apply(this,arguments)}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebDBCreateOrUpdateReactions").createOrUpdateReactions([a]));a=a[0];if(!a){d("WALogger").DEV(i());return}l(a,b);return a});return n.apply(this,arguments)}function e(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a.senderUserJid;var c=babelHelpers.objectWithoutPropertiesLoose(a,["senderUserJid"]);b=(b=d("WAWebReactionsCollection").ReactionsCollection.getExistingSenderModelFromReactionDetails(c))!=null?b:d("WAWebMaybe").ifSome(d("WAWebLidMigrationUtils").getAlternateMsgKey(c.msgKey),function(a){return d("WAWebReactionsCollection").ReactionsCollection.getExistingSenderModelFromReactionDetails(babelHelpers["extends"]({},c,{msgKey:a}))});if(b==null){d("WALogger").ERROR(h());return}yield p(a,b.timestamp)});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=b("WAWebMsgCollection");f=f.MsgCollection;f=f.get(a.parentMsgKey);var g=a instanceof d("WAWebReactionsModels").FlattenedReaction?c("WAWebMsgKey").from(a.parentMsgKey):a.parentMsgKey,h=a instanceof d("WAWebReactionsModels").FlattenedReaction?c("WAWebMsgKey").from(a.msgKey):a.msgKey;if(f){g=g.remote;var i=d("WAWebReactionsMsgActionUtils").getFromForReactionMessage(f);f=(yield d("WAWebReactionsMsgActionUtils").getReactionMsgData(f,a.reactionText,i,h,Math.floor(e/1e3),g,e));if(d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.REACTION)){i=(yield d("WAWebSendAddonMsgChatAction").addAndSendAddonToChat(f));if(i.messageSendResult!==d("WAWebSendMsgResultAction").SendMsgResult.OK)throw c("err")("Reaction send error");return}h=b("WAWebMsgModel");g=h.Msg;var j=new g(f);yield d("WAWebAddOnsUpdateSendStatesAction").updateAddOnSendStatesAction(new Map([[d("WAWebMessageAddOnType").MessageAddOnType.Reaction,[{msgKey:a.msgKey.toString(),ack:d("WAWebAck").ACK.CLOCK,isSendFailure:!1}]]]));e=b("WAWebSendMsgRecordAction");var k=e.sendMsgRecord;return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendMessage",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return k(j)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}});return q.apply(this,arguments)}g.addOrUpdateReactionsModelCollection=l;g.addOrUpdateReactions=a;g.resendUpdateFailedPropsForSentReactionsDBAndModel=e;g.sendReaction=p}),98);
__d("WAWebReactionsMsgActionUtils",["WALogger","WANullthrows","WAWebAck","WAWebAddOnEncryption","WAWebE2EProtoUtils","WAWebFrontendMsgGetters","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgModelUtils","WAWebMsgType","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["create reaction: "," and "," do not match"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["create reaction: "," and "," do not match"]);i=function(){return a};return a}function a(a){a=Boolean((a=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata)==null?void 0:a.isIncognitoCag);var b=d("WAWebUserPrefsMeUser").getMaybeMeLidUser();return a&&b!=null?b:d("WAWebUserPrefsMeUser").getMeUser()}function e(a,b,c,d,e,f,g){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k){var l,m=d("WAWebMsgKeyUtils").msgKeyToTargetInfo(f,d("WAWebE2EProtoUtils").TranslateMsgKeyType.Addon);e.equals(m.from)||d("WALogger").WARN(i(),e.toLogString(),m.from.toLogString()).tags("messaging").sendLogs("reactionMsgData: from is not matching",.01);j.equals(m.to)||d("WALogger").WARN(h(),j.toLogString(),m.to.toLogString()).tags("messaging").sendLogs("reactionMsgData: to is not matching",.01);if((l=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata)==null?void 0:l.isIncognitoCag){l=self.crypto.getRandomValues(new Uint8Array(12));var n={type:"reaction",encode:{text:b,senderTimestampMs:k}};n=(yield d("WAWebAddOnEncryption").encryptAddOn(n,{messageSecret:c("WANullthrows")(a.messageSecret,"Parent message missing message secret"),iv:l,stanzaId:a.id.id,originalMessageSender:d("WAWebMsgGetters").getOriginalSender(a.unsafe()),addOnSender:d("WAWebWidFactory").toUserWid(e)}));return{id:f,type:d("WAWebMsgType").MSG_TYPE.REACTION_ENC,kind:d("WAWebMsgType").MsgKind.ReactionEncrypted,t:g,from:e,to:j,author:m.author,ack:d("WAWebAck").ACK.CLOCK,targetMessageKey:d("WAWebMsgModelUtils").getReferentialKey(a),encPayload:n,encIv:l.buffer}}return{id:f,reactionParentKey:d("WAWebMsgModelUtils").getReferentialKey(a),type:d("WAWebMsgType").MSG_TYPE.REACTION,kind:d("WAWebMsgType").MsgKind.ReactionDecrypted,t:g,from:e,to:j,author:m.author,ack:d("WAWebAck").ACK.CLOCK,reactionText:b,reactionTimestamp:k}});return j.apply(this,arguments)}g.getFromForReactionMessage=a;g.getReactionMsgData=e}),98);
__d("WAWebChatContactUtils",["fbt"],(function(a,b,c,d,e,f,g,h){function a(a,b){b===void 0&&(b=!0);return a==null||a===""?"":h._("__JHASH__sE_s0c9kyFX__JHASH__",[h._param("spacing",b?"\u202f":""),h._param("notifyName",a)])}function b(a){return a==null||a===""?"":h._("__JHASH__i57tYcHhpTl__JHASH__",[h._param("notifyName",a)])}g.getFormattedNotifyName=a;g.getAccessibleNotifyName=b}),226);
__d("WAWebElevatedPushNamesFlag",["WAWebABProps","WAWebContactGetters","WAWebFrontendContactGetters","WAWebStateUtils"],(function(a,b,c,d,e,f,g){function a(a){return!a?!1:a.isGroup&&a.getParticipantCount()>2}function b(a){return!a?!1:a.isGroup&&a.getParticipantCount()>2&&d("WAWebABProps").getABPropConfigValue("elevated_push_names_v2_m2_enabled")}function c(a){if(a==null)return!1;a=d("WAWebStateUtils").unproxy(a);var b=d("WAWebContactGetters").getNotifyName(a);return d("WAWebFrontendContactGetters").getFormattedName(a)===d("WAWebFrontendContactGetters").getFormattedPhone(a)&&b!=null&&b!==""}g.elevatedPushNamesEnabled=a;g.elevatedPushNamesM2Enabled=b;g.pushNameCanBeUsed=c}),98);
__d("WAWebNotificationsReactionNotification",["fbt","WALogger","WAWebABProps","WAWebBaseNotification","WAWebChatContactUtils","WAWebConstantsDeprecated","WAWebContactCollection","WAWebContactGetters","WAWebElevatedPushNamesFlag","WAWebEmoji","WAWebFrontendMsgGetters","WAWebGetNotificationStrings","WAWebGroupMetadataCollection","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationController","WAWebNotificationHelpers","WAWebNotificationIconUtils","WAWebReactionsBEUtils","WAWebReactionsCollection","WAWebSettingsGetters","WAWebSettingsModel","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","WAWebWidFormat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAReactionNotification: cleaning up reaction notification"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAReactionNotification: Reaction model not found"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAReactionNotification: parentMsg is not present in the MsgCollection. It may need to be hydrated."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAReactionNotification: constructor"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;b=b.reactionMsg;e=a.call(this)||this;e.$WAReactionNotification1=function(){d("WAWebFrontendMsgGetters").getChat(e.parentMsg)!=null&&e.parentMsg!=null&&d("WAWebFrontendMsgGetters").getChat(e.parentMsg).reactionSquelch===c("WAWebConstantsDeprecated").SQUELCH_RESET_VALUE&&(e.parentMsg.squelch=c("WAWebConstantsDeprecated").SQUELCH_RESET_VALUE)};d("WALogger").LOG(l()).devConsole({reactionMsg:b});e.reactionMsg=b;b=d("WAWebMsgCollection").MsgCollection.get(e.reactionMsg.parentMsgKey);if(b==null){d("WALogger").WARN(k()).devConsole(babelHelpers.assertThisInitialized(e));return babelHelpers.assertThisInitialized(e)}e.parentMsg=b;return e}var f=e.prototype;f.beforeBannerShown=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.parentMsg==null)return;var a=(yield d("WAWebReactionsCollection").ReactionsCollection.findAddressingModeInsensitive(this.parentMsg.id.toString()));if(a){a=d("WAWebReactionsCollection").ReactionsCollection.getAggregateEmojiAndSender(a,this.reactionMsg.senderUserJid);a=a.reactionSenderModel;this.reactionSender=a}else d("WALogger").WARN(j())});function c(){return a.apply(this,arguments)}return c}();f.afterBannerShown=function(a){var b=this;if(this.reactionSender!=null){var c=this.reactionSender,e=d("WAWebFrontendMsgGetters").getChat(this.parentMsg);c.on("revoked change:read",this.closeBanner);e.on("change:reactionSquelch",this.$WAReactionNotification1);a.waitForClose().then(function(){d("WALogger").LOG(i()),c.off("revoked change:read",b.closeBanner),e.off("change:reactionSquelch",b.$WAReactionNotification1)})}};f.shouldMute=function(){if(m(this.reactionMsg))return!0;if(this.parentMsg==null)return!0;if(d("WAWebABProps").getABPropConfigValue("web_abprop_mute_notifications_on_app_focus")?d("WAWebNotificationHelpers").appIsActive():d("WAWebNotificationHelpers").chatIsActive(d("WAWebFrontendMsgGetters").getChat(this.parentMsg)))return!0;if(d("WAWebMuteGetters").getIsMuted(d("WAWebFrontendMsgGetters").getChat(this.parentMsg).mute))return!0;return o(d("WAWebFrontendMsgGetters").getChat(this.parentMsg))?!0:!1};f.shouldSquelch=function(){var a=d("WAWebNotificationController").WANotificationController.notificationExists(this.buildKey());if(a)return!1;a=d("WAWebFrontendMsgGetters").getChat(this.parentMsg);if(d("WAWebNotificationHelpers").shouldSquelch(a,!1))return!0;return n(a,this.parentMsg)?!0:!1};f.buildKey=function(){return"reaction:"+this.parentMsg.id.toString()+"-"+this.reactionMsg.senderUserJid};f.matchesChat=function(a){return c("WAWebWid").equals(d("WAWebFrontendMsgGetters").getChat(this.parentMsg).id,a)};f.getChatKind=function(){return d("WAWebFrontendMsgGetters").getChat(this.parentMsg).kind};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebFrontendMsgGetters").getChat(this.parentMsg);return d("WAWebNotificationIconUtils").getChatNotificationIcon(a,this.abortController.signal)});function c(){return a.apply(this,arguments)}return c}();f.getBannerOptions=function(){var a=this.parentMsg,b=d("WAWebFrontendMsgGetters").getChat(a),c=d("WAWebGetNotificationStrings").getNotificationBody(babelHelpers["extends"]({},p(a,this.reactionMsg),{msgDir:d("WAWebFrontendMsgGetters").getDir(a)}));return{wid:b.id,msgId:a.id.toString(),tag:a.id.toString(),title:d("WAWebNotificationHelpers").getNotificationTitle(b),body:c,canReply:!1,canMarkAsRead:!1}};return e}(d("WAWebBaseNotification").WABaseNotification);function m(a){var b=a.orphan,e=a.read,f=a.senderUserJid,g=a.parentMsgKey;a=a.reactionText;if(b===1)return!0;if(e===!0)return!0;if(d("WAWebUserPrefsMeUser").isSerializedWidMe(f))return!0;b=c("WAWebMsgKey").fromString(g);if(!b.fromMe)return!0;if(a===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT)return!0;if(d("WAWebNotificationHelpers").isOfflineResumeInProgress())return!0;if(d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute()))return!0;return d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalReactionsMute())?!0:!1}function n(a,b){if(!a.isGroup)return!1;var e=Date.now(),f=b.squelch||0;if(e>f){c("WAWebGroupMetadataCollection").find(a.id).then(function(e){if(e!=null){e=d("WAWebNotificationHelpers")._calculateTimeoutFromGroupMetadata(a.id,e);e=Date.now()+e;b.squelch=e;a.reactionSquelch===c("WAWebConstantsDeprecated").SQUELCH_RESET_VALUE&&(a.reactionSquelch=e)}});return!1}return!0}function o(a){if(!d("WAWebSettingsGetters").getShowArchiveV2(c("WAWebSettingsModel")))return!1;return!a.archive?!1:!0}function p(a,b){var c;if(d("WAWebMsgGetters").getIsGroupMsg(a)){var e=d("WAWebWidFactory").createUserWid(b.senderUserJid),f=d("WAWebContactCollection").ContactCollection.gadd(e),g=d("WAWebFrontendMsgGetters").getChat(a);g=d("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(g);if(e.isLid()&&f.phoneNumber){e=d("WAWebContactCollection").ContactCollection.get(f.phoneNumber);var i=d("WAWebElevatedPushNamesFlag").pushNameCanBeUsed(e)&&g,j=e!=null?d("WAWebContactGetters").getNotifyName(e):null;c=(e=e==null?void 0:e.name)!=null?e:i&&j!=null?d("WAWebChatContactUtils").getFormattedNotifyName(j).toString():d("WAWebWidFormat").widToFormattedUser(f.phoneNumber)}else{e=d("WAWebElevatedPushNamesFlag").pushNameCanBeUsed(f)&&g;c=(i=f.name)!=null?i:e&&d("WAWebContactGetters").getNotifyName(f)!=null?d("WAWebChatContactUtils").getFormattedNotifyName(d("WAWebContactGetters").getNotifyName(f)).toString():d("WAWebWidFormat").widToFormattedUser(f.id)}}g=(j=d("WAWebEmoji").EmojiUtil.normalizeEmojiFromString(b.reactionText))!=null?j:d("WAWebEmoji").OPEN_BOX_CHAR;i=h._("__JHASH__7BEwPDyKwtY__JHASH__",[h._param("emoji",g)]);a.type===d("WAWebMsgType").MSG_TYPE.CHAT&&!a.shouldShowNotificationPreview()?e=h._("__JHASH__e4C3EbDka6R__JHASH__"):(e=d("WAWebGetNotificationStrings").getNotificationMessageBody(a),e=h._("__JHASH__jdTh_Py1bBb__JHASH__",[h._param("originalMessageBody",e)]));return{body:e.toString(),author:c,action:i.toString()}}g.WAReactionNotification=a;g.nonHydratedShouldMuteReactionNotification=m}),226);
__d("WAWebReactionTypeConversion",["WAWebFlattenedReactionCollection","WAWebMsgKey"],(function(a,b,c,d,e,f,g){function a(a,b){var e;b=c("WAWebMsgKey").from(a.msgKey).fromMe&&b;e=d("WAWebFlattenedReactionCollection").createFlattenedReactionModel({msgKey:a.msgKey,orphan:a.orphan,parentMsgKey:a.parentMsgKey,reactionText:a.reactionText,read:(e=a.read)!=null?e:!1,senderUserJid:a.senderUserJid,timestamp:a.timestamp,ack:a.ack,isSendFailure:b});return e}g.convertReactionRowToFlattenedReaction=a}),98);
__d("WAWebFlattenedReactionCollection",["WAWebBaseCollection","WAWebCollectionUtils","WAWebEmoji","WAWebLidMigrationUtils","WAWebMsgKey","WAWebReactionsBEUtils","WAWebReactionsModels"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.byParentAndSender=d("WAWebCollectionUtils").aggregated(function(a){return[a.parentMsgKey,a.senderUserJid]}),c.byParent=d("WAWebCollectionUtils").aggregated(function(a){return a.parentMsgKey}),c.byParents=d("WAWebCollectionUtils").aggregated(function(a){return[a.parentMsgKey]}),c.hydratedReactions=new Set(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.existingReactionAddressingModeInsensitive=function(a,b){var c=this.byParentAndSender([a,b]).head();if(c!=null)return c;c=d("WAWebLidMigrationUtils").getAlternateJid(b);if(c!=null)return this.byParentAndSender([a,c]).head()};c.addOrUpdateReaction=function(a){for(var b=0;b<a.length;b++){var c=a[b],e=this.existingReactionAddressingModeInsensitive(c.parentMsgKey,c.senderUserJid);if(e!=null)if(c.timestamp>=e.timestamp)this.remove(e);else continue;c.reactionText!==d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT&&this.add(c)}};c.getReactionsByMsgKeys=function(a){if(a.length===0)return[];var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=this.get(e);e!=null&&b.push(e)}return b};c.deleteReactionsByParentMessageKey=function(a){a=this.byParent(a.toString()).toArray();for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.remove(d)}};c.getReactionsByParentMsgKeys=function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b=b.concat(this.byParent(d.toString()).toArray())}return b};return b}(d("WAWebBaseCollection").BaseCollection);b.model=d("WAWebReactionsModels").FlattenedReaction;function a(a){return new(d("WAWebReactionsModels").FlattenedReaction)(babelHelpers["extends"]({id:c("WAWebMsgKey").fromString(a.msgKey),aggregatedEmoji:d("WAWebEmoji").EmojiUtil.getEmojiAggregate(a.reactionText)},a))}e=new b();g.FlattenedReactionsCollectionImpl=b;g.createFlattenedReactionModel=a;g.FlattenedReactionsCollection=e}),98);
__d("WAWebReactionsCollection",["WALogger","WATypeUtils","WAWebAck","WAWebApiContact","WAWebBaseCollection","WAWebEmoji","WAWebLidGroupsGatingUtils","WAWebLidMigrationUtils","WAWebMsgCollection","WAWebMsgKey","WAWebMsgReactionsBridge","WAWebReactionsBEUtils","WAWebReactionsModels","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:shouldUpdateAck Reaction sender model not found"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:getExistingSenderModelFromReactionDetails Reactions sender model not found for this message id"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:markReactionsAsRead Reaction sender model not found"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:removeReaction no reactions model found"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:removeReaction"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:addOrUpdateReaction Reactions model not found for this message id"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:addOrUpdateReaction Did not update because timestamp was smaller than previous reaction"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["reactions_collection:addOrUpdateReaction Removing previous reaction"]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var c,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=e=a.call.apply(a,[this].concat(g))||this,e.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebMsgCollection").MsgCollection;c=(yield c.hydrateOrGetMessages([a]));a=c[0];return d("WAWebMsgReactionsBridge").sendQueryReactions(a)});return function(b){return a.apply(this,arguments)}}(),c)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.findAddressingModeInsensitive=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield this.find(a,b));if(e!=null)return e;if(d("WAWebLidGroupsGatingUtils").allowReferenceByAltJid()){e=d("WAWebLidMigrationUtils").getAlternateMsgKey(c("WAWebMsgKey").fromString(String(a)));if(e!=null)return this.find(e,b)}});function e(b,c){return a.apply(this,arguments)}return e}();f.getAddressingModeInsensitive=function(a){var b;return(b=this.get(a))!=null?b:this._getByAltId(a)};f._getByAltId=function(b){b=b instanceof c("WAWebMsgKey")?b:c("WAWebMsgKey").from(String(b));b=d("WAWebLidMigrationUtils").getAlternateMsgKey(b);if(b!=null)return a.prototype.get.call(this,b)};f.addOrUpdateReaction=function(a){if(a.reactionText===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT)return this.removeReaction(a);var b=this.getAddressingModeInsensitive(a.parentMsgKey);if(b){var c=this.getAggregateEmojiAndSender(b,a.senderUserJid),e=c.reactionSenderModel;c=c.reactionAggregateWithSender;if(c&&e){if(e.id.toString()===a.msgKey&&e.ack!==a.ack){e.ack=a.ack;e.trigger("change:ack");return}else if(a.timestamp>e.timestamp){d("WALogger").DEV(o());d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid)&&(e.trigger("revoked"),c.set({hasReactionByMe:!1}));this._addNewReactionToAggregate(a,b);c.aggregateEmoji===d("WAWebEmoji").EmojiUtil.getEmojiAggregate(a.reactionText)?(c.senders.remove(e.id),b.reactions.trigger("change:senders")):this._removeAggregateEmojiAndSender(b,e,c);return}d("WALogger").DEV(n());return}this._addNewReactionToAggregate(a,b)}else d("WALogger").DEV(m())};f.removeReaction=function(a){if(d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid))return this._removeSelfReaction(a);var b=this.get(a.parentMsgKey);if(b){a=this.getAggregateEmojiAndSender(b,a.senderUserJid);var c=a.reactionAggregateWithSender;a=a.reactionSenderModel;c&&a&&(this._removeAggregateEmojiAndSender(b,a,c),a.trigger("revoked"),d("WALogger").DEV(l()))}else d("WALogger").WARN(k())};f._addNewReactionToAggregate=function(a,b){var e=d("WAWebEmoji").EmojiUtil.getEmojiAggregate(a.reactionText),f=b.reactions.get(e),g=c("WAWebMsgKey").fromString(a.msgKey);g=babelHelpers["extends"]({},a,{id:g});var h=d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid);f?(h&&(f.set({hasReactionByMe:!0}),b.set({reactionByMe:a})),f.senders.add(g),b.reactions.sort(),f.trigger("change:senders")):(h&&b.set({reactionByMe:a}),b.reactions.add({aggregateEmoji:e,hasReactionByMe:h,id:e,senders:[g]}))};f._removeAggregateEmojiAndSender=function(a,b,c){c.senders.remove(b.id),c.senders.length===0?a.reactions.remove(c.id):a.reactions.sort(),c.trigger("change:senders")};f.getAggregateEmojiAndSender=function(a,b){var c=null,e=null,f=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").createUserWid(b));for(var g=0;g<a.reactions.length;g++){var h=a.reactions.at(g),i=h==null?void 0:h.senders.findFirst(function(a){return a.senderUserJid===b||f!=null&&a.senderUserJid===f.toString()});if(i){c=i;e=h;break}}return{reactionSenderModel:c,reactionAggregateWithSender:e}};f._removeSelfReaction=function(a){var b=this.get(a.parentMsgKey);b==null?void 0:b.set({reactionByMe:null});if(b){a=this.getAggregateEmojiAndSender(b,a.senderUserJid);var c=a.reactionAggregateWithSender;a=a.reactionSenderModel;c==null?void 0:c.set({hasReactionByMe:!1});c&&a&&(this._removeAggregateEmojiAndSender(b,a,c),a.trigger("revoked"))}};f.markReactionsAsRead=function(a){for(a of this._getSendersByMsgKeys(a))a.read=!0};f._getSendersByMsgKeys=function(a){if(a.length===0)return[];a=new Set(a);var b=[];for(var c of this.toArray())for(var e of c.reactions.toArray())for(var f of a){var g=e.senders.get(f);if(g!=null){b.push(g);a["delete"](f);if(a.size===0)return b}}d("WALogger").WARN(j());return b};f.getSenderByMsgKey=function(a){for(var b of this.toArray())for(var c of b.reactions.toArray()){var d=c.senders.get(a);if(d!=null)return d}};f.getExistingSenderModelFromReactionDetails=function(a){var b=a.parentMsgKey,c=a.msgKey;a=a.reactionText;a=d("WAWebEmoji").EmojiUtil.getEmojiAggregate(a);b=this.get(b);if(b){b=b.reactions.get(a);a=b==null?void 0:b.senders.get(c);return a}d("WALogger").WARN(i());return};f.shouldUpdateAck=function(a,b){a=this.getExistingSenderModelFromReactionDetails(a);if(a){a=a.ack;return d("WATypeUtils").isNumber(b)&&(a===void 0||a==null||b>a||b===d("WAWebAck").ACK.FAILED)?!0:!1}d("WALogger").WARN(h());return!1};f.deleteReactionsByParentMessageKey=function(a){this.remove(a)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebReactionsModels").Reactions;e=new a();g.ReactionsCollectionImpl=a;g.ReactionsCollection=e}),98);
__d("WAWebReactionsModels",["WAWebAck","WAWebAddOnModel","WAWebBaseModel","WAWebCollection","WAWebContactCollection","WAWebMsgCollection","WAWebMsgKey","WAWebReactionsCollection","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.msgKey=d("WAWebBaseModel").prop(),c.parentMsgKey=d("WAWebBaseModel").prop(),c.reactionText=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(),c.senderUserJid=d("WAWebBaseModel").prop(),c.read=d("WAWebBaseModel").prop(),c.orphan=d("WAWebBaseModel").prop(),c.isFailed=d("WAWebBaseModel").derived(function(){if(this.id.remote.isNewsletter())return!1;var a=d("WAWebUserPrefsMeUser").isSerializedWidMe(this.senderUserJid)&&this.ack!=null&&this.ack<d("WAWebAck").ACK.CLOCK;return a||Boolean(this.isSendFailure)},["ack","isSendFailure"]),c.senderObj=d("WAWebBaseModel").session(),c.parentMsg=d("WAWebBaseModel").derived(function(){return this.$ReactionsSendersSkeleton1().assertGet(this.parentMsgKey)}),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this);if(c("WAWebWid").isNewsletter(this.senderUserJid))return;var b=d("WAWebContactCollection").ContactCollection.gadd(d("WAWebWidFactory").createUserWid(this.senderUserJid));this.addChild("senderObj",b)};f.$ReactionsSendersSkeleton1=function(){return b("WAWebMsgCollection").MsgCollection};f.isEqual=function(a){return this.id.equals(a.id)};return e}(d("WAWebAddOnModel").AddOnBaseModel);a.Proxy="reactionsSenders";a.idClass=c("WAWebMsgKey");f=(e=d("WAWebBaseModel")).defineModel(a);var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(c("WAWebCollection"));h.model=f;h.comparator=function(a,b){if(d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid))return-1;else if(d("WAWebUserPrefsMeUser").isSerializedWidMe(b.senderUserJid))return 1;return b.timestamp-a.timestamp};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.aggregateEmoji=d("WAWebBaseModel").prop(),c.hasReactionByMe=d("WAWebBaseModel").prop(),c.senders=d("WAWebBaseModel").collection(h),b)||babelHelpers.assertThisInitialized(c)}return b}(e.BaseModel);a.Proxy="aggReactions";a=e.defineModel(a);var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(c("WAWebCollection"));i.model=a;i.comparator=function(a,b){var c=b.senders.length-a.senders.length;if(a.hasReactionByMe)return-1;else if(b.hasReactionByMe)return 1;if(c===0){b=b.senders.at(0);a=a.senders.at(0);if(b&&a)return b.timestamp-a.timestamp}return c};var j=function(e){babelHelpers.inheritsLoose(a,e);function a(){var a,b;for(var c=arguments.length,f=new Array(c),g=0;g<c;g++)f[g]=arguments[g];return(a=b=e.call.apply(e,[this].concat(f))||this,b.id=d("WAWebBaseModel").prop(),b.reactionByMe=d("WAWebBaseModel").prop(),b.reactions=d("WAWebBaseModel").collection(i),a)||babelHelpers.assertThisInitialized(b)}var f=a.prototype;f.unreadSenders=function(){return c("lodash").flatMap(this.reactions.toArray(),function(a){return a.senders.toArray()}).filter(function(a){return!a.read&&!d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid)})};f.getReactionSenderModel=function(a,b){a=this.reactions.get(a);a=a==null?void 0:a.senders.findFirst(function(a){return a.senderUserJid===b});return a};f.getCollection=function(){return b("WAWebReactionsCollection").ReactionsCollection};return a}(e.BaseModel);j.Proxy="reactions";j.idClass=c("WAWebMsgKey");j=e.defineModel(j);var k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c=b.call.apply(b,[this].concat(f))||this,c.msgKey=d("WAWebBaseModel").prop(),c.parentMsgKey=d("WAWebBaseModel").prop(),c.reactionText=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(),c.senderUserJid=d("WAWebBaseModel").prop(),c.read=d("WAWebBaseModel").prop(),c.orphan=d("WAWebBaseModel").prop(),c.id=d("WAWebBaseModel").prop(),c.aggregatedEmoji=d("WAWebBaseModel").prop(),c.isFailed=d("WAWebBaseModel").derived(function(){var a=d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createUserWid(this.senderUserJid))&&this.ack!=null&&this.ack<d("WAWebAck").ACK.CLOCK;return a||Boolean(this.isSendFailure)},["sender","ack","isSendFailure"]),c.senderObj=d("WAWebBaseModel").session(),a)||babelHelpers.assertThisInitialized(c)}var e=a.prototype;e.isEqual=function(a){return this.id.equals(a.id)};e.initialize=function(){b.prototype.initialize.call(this);if(c("WAWebWid").isNewsletter(this.senderUserJid))return;d("WAWebContactCollection").ContactCollection.gadd(d("WAWebWidFactory").createUserWid(this.senderUserJid))};return a}(d("WAWebAddOnModel").AddOnBaseModel);e=e.defineModel(k);g.ReactionsSenders=f;g.ReactionsSendersCollection=h;g.AggReactions=a;g.AggReactionsCollection=i;g.Reactions=j;g.FlattenedReaction=e}),98);
__d("WAWebRecentReactionModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.reactionText=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="recentReaction";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebRecentReactionsCollection",["Promise","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebRecentReactionModel","WAWebUserPrefsKeys","lodash"],(function(a,b,c,d,e,f,g){var h,i=16,j=100;a=function(a){babelHelpers.inheritsLoose(d,a);function d(){var d;d=a.call(this)||this;d.findImpl=function(a){return(h||(h=b("Promise"))).resolve({id:a})};d.listenTo(babelHelpers.assertThisInitialized(d),"add",c("lodash").debounce(d._sortTrim,j));return d}var e=d.prototype;e._sortTrim=function(){var a=this.length;if(!a)return;this.sort();a>i&&this.remove(this.slice(i))};return d}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebRecentReactionModel");a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.RECENT_REACTIONS_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:2e3};a.comparator=function(a,b){return b.timestamp-a.timestamp};e=new a();g.RECENT_REACTIONS_LIMIT=i;g.LISTENER_DEBOUNCE_WAIT=j;g.RecentReactionsCollectionImpl=a;g.RecentReactionsCollection=e}),98);
__d("WAWebPostSendStatusFailure",["WAErrors","WALogger","WAWebBackendErrors","WAWebHandleMsgError","WAWebSendMsgResultAction","WAWebWamEnumMessageSendResultType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[status] failed to send status message"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[status] failed to send status message, get error ack"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[status] failed to send status message, get error ack"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[status] failed to send status message"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[status] failed to send status message"]);l=function(){return a};return a}function a(a,b){if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError){var c;d("WALogger").ERROR(l()).sendLogs("status-send-server-error");(c=b.sendReporter)==null?void 0:c.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_NETWORK,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_NETWORK}}else if(a instanceof d("WAWebHandleMsgError").MessageValidationError){d("WALogger").ERROR(k()).sendLogs("status-send-validation-error");(c=b.sendReporter)==null?void 0:c.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_INVALID_PROTOBUF,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}else if(a instanceof d("WAWebHandleMsgError").MessageSentAckError){d("WALogger").ERROR(j()).sendLogs("status-send-ack-error");(c=b.sendReporter)==null?void 0:c.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}else if(a instanceof d("WAErrors").BufferTooLargeError){d("WALogger").ERROR(i()).sendLogs("status-send-too-large-error");(c=b.sendReporter)==null?void 0:c.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_PAYLOAD_TOO_BIG,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}d("WALogger").ERROR(h()).sendLogs("status-send-fail");(a=b.sendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}g.postStatusSendFailure=a}),98);
__d("WAWebSendStatusMsgAction",["invariant","WAJids","WALogger","WATimeUtils","WAWebAck","WAWebEncryptAndSendStatusMsg","WAWebMessageSendPerfReporter","WAWebMessageStore","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebOutgoingMessage","WAWebPostSendStatusFailure","WAWebSendMsgMetricReporter","WAWebSendMsgResultAction","WAWebSendMsgTypes","WAWebStatusV3Collection","WAWebUserPrefsMeUser","WAWebWamEnumMessageSendResultType","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendStatusMessage: failed with ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendStatusMessage: done"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendStatusMessage: generate protobuf"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendStatusMessage: send status messege ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendStatusMediaMsgAction: media prep done for status messege"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[status] failed to send status message with ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendStatusMediaMsgAction: store media messege"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendStatusMediaMsgAction: start to send status messege"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendStatusTextMsgAction: store text messege"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendStatusTextMsgAction: start to send text messege"]);r=function(){return a};return a}var s=4286237861;function a(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;d("WALogger").LOG(r());a=(yield x(a));a!=null||h(0,73062);var c=new(d("WAWebMsgModel").Msg)(a);c.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:c.to,mediaType:c.getWamMediaType(),messageType:c.getWamMessageType()});var e=d("WAWebSendMsgMetricReporter").createMsgModelMetricReporter(c);e.sendReporter=(b=e.sendReporter)!=null?b:e.createSendReporter();(b=e.sendPerfReporter)==null?void 0:b.startRenderedStage();yield d("WAWebStatusV3Collection").StatusV3Collection.addStatusMessages(c.author,[c]);d("WAWebStatusV3Collection").StatusV3Collection.handleUpdate(a,null,!1);(b=e.sendPerfReporter)==null?void 0:b.postRenderedStage();(b=e.sendPerfReporter)==null?void 0:b.startSavedStage();yield d("WAWebMessageStore").storeMessages([a],c.to);d("WALogger").LOG(q());(b=e.sendPerfReporter)==null?void 0:b.postSavedStage();return v(c,a,e)});return t.apply(this,arguments)}function e(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;d("WALogger").LOG(p());a=babelHelpers["extends"]({},a,{author:d("WAWebUserPrefsMeUser").assertGetMeUser()});var e=new(d("WAWebMsgModel").Msg)(a);e.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:e.to,mediaType:e.getWamMediaType(),messageType:e.getWamMessageType()});var f=d("WAWebSendMsgMetricReporter").createMsgModelMetricReporter(e);f.sendReporter=(c=f.sendReporter)!=null?c:f.createSendReporter();(c=f.sendPerfReporter)==null?void 0:c.startRenderedStage();yield d("WAWebStatusV3Collection").StatusV3Collection.addStatusMessages(e.author,[e]);d("WAWebStatusV3Collection").StatusV3Collection.handleUpdate(a,null,!1);(c=f.sendPerfReporter)==null?void 0:c.postRenderedStage();(c=f.sendPerfReporter)==null?void 0:c.startSavedStage();yield d("WAWebMessageStore").storeMessages([a],e.to);d("WALogger").LOG(o());(c=f.sendPerfReporter)==null?void 0:c.postSavedStage();(c=f.sendPerfReporter)==null?void 0:c.startReadyToSendStage();yield e.waitForPrep();try{yield b(e)}catch(a){d("WALogger").ERROR(n(),a).sendLogs("status-send-media-error");(c=f.sendReporter)==null?void 0:c.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UPLOAD,isTerminal:!0});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UPLOAD}}(b=f.sendPerfReporter)==null?void 0:b.postReadyToSendStage();d("WALogger").LOG(m()).devConsole(a);return v(e,a,f)});return u.apply(this,arguments)}function v(a,b,c){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(l(),a.id).devConsole(b);b={type:d("WAWebSendMsgTypes").SendMessageRecordType.Message,data:a};var e=d("WAWebOutgoingMessage").createOutgoingMessageProtobuf(b);d("WALogger").LOG(k()).devConsole(e);try{yield d("WAWebEncryptAndSendStatusMsg").encryptAndSendStatusMsg(b,e,c);(b=c.sendReporter)==null?void 0:b.postSuccess();a.updateAck(d("WAWebAck").ACK.SENT);d("WALogger").LOG(j());return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.OK}}catch(b){a.updateAck(d("WAWebAck").ACK.FAILED);d("WALogger").LOG(i(),b);return d("WAWebPostSendStatusFailure").postStatusSendFailure(b,c)}});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(a.text||"").trim();if(b==="")return null;var e=d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID),f=d("WAWebUserPrefsMeUser").assertGetMeUser(),g=f;g=new(c("WAWebMsgKey"))({from:f,to:e,id:yield c("WAWebMsgKey").newId(),participant:g,selfDir:"out"});g={id:g,body:b,author:f,backgroundColor:(g=a.color)!=null?g:s,type:"chat",kind:d("WAWebMsgType").MsgKind.Chat,subtype:void 0,t:d("WATimeUtils").unixTime(),from:f,to:e,isNewMsg:!0,local:!0,ack:d("WAWebAck").ACK.CLOCK,font:(b=a.font)!=null?b:void 0};return g});return y.apply(this,arguments)}g.sendStatusTextMsgAction=a;g.sendStatusMediaMsgAction=e}),98);
__d("WAWebHistorySyncStickers",["WABase64","WALogger","WALongInt","WATimeUtils","WAWebABProps","WAWebHistorySyncNotificationUtils","WAWebMediaTypes","WAWebRecentStickerCollectionMd","WAWebUserPrefsAppStateSync","WAWebUserPrefsTypes"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Recent Stickers completed, ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: "," stickers need to be added after sticker construction."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: Got an empty fileEncSha256 or mediaKey from initial sticker history with filehash ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: Got an empty fileEncSha256 or mediaKey from initial sticker history"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: Got an empty filehash from initial sticker history"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: processing recent stickers from history. total of "," stickers received."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: received empty recentStickers protobuf"]);n=function(){return a};return a}function a(a,c){if(a.recentStickers==null){d("WALogger").WARN(n());return}if(d("WAWebABProps").getABPropConfigValue("recent_sticker_rollout_phase")<3){var e;d("WAWebUserPrefsAppStateSync").setNonCriticalDataSyncStatus((e={},e[d("WAWebUserPrefsTypes").NonCriticalDataSyncStatusType.RECENT_STICKER_INITIALIZED]=d("WAWebUserPrefsTypes").RecentStickerInitializedStatusType.NEED_REQUEST_BOOTSTRAP,e));return}d("WALogger").LOG(m(),a.recentStickers.length);e=a.recentStickers.map(function(a){var b=a.fileSha256;if(b==null){d("WALogger").WARN(l());return null}var c=a.fileEncSha256,e=a.mediaKey;(c==null||e==null)&&(d("WALogger").LOG(k()),d("WALogger").DEV(j(),d("WABase64").encodeB64(b)));return[{id:d("WABase64").encodeB64(b),directPath:a.directPath,filehash:d("WABase64").encodeB64(b),encFilehash:c!=null?d("WABase64").encodeB64(c):null,mediaKey:e!=null?d("WABase64").encodeB64(e):"",mediaKeyTimestamp:d("WATimeUtils").unixTime(),width:a.width,height:a.height,mimetype:a.mimetype,type:d("WAWebMediaTypes").OUTWARD_TYPES.STICKER,index:0,weight:a.weight},(b=d("WALongInt").maybeNumberOrThrowIfTooLarge(a.lastStickerSentTs))!=null?b:0,null]}).filter(Boolean);d("WALogger").LOG(i(),e.length);a=b("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd;a.replaceAndEnqueue(e,!0);d("WAWebUserPrefsAppStateSync").setNonCriticalDataSyncStatus((a={},a[d("WAWebUserPrefsTypes").NonCriticalDataSyncStatusType.RECENT_STICKER_INITIALIZED]=d("WAWebUserPrefsTypes").RecentStickerInitializedStatusType.SUCCESS,a));d("WALogger").LOG(h(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(c))}g.processRecentStickers=a}),98);
__d("WAWebStickerUtils",["$InternalEnum","Promise","WACryptoSha256","WALogger","WAPromiseProps","WAWebABProps","WAWebFeatureDetectionDetectWebpSupport","WAWebInMemoryLottieStickerCache","WAWebLottieStickersGatingUtils","WAWebMediaDataUtils","WAWebMediaMmsV4Download","WAWebStickerMetadataParsing","WAWebStickerMimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["extractMetaDataFromLottieSticker: Failed to parse metadata out of lottie sticker, returning default metadata."]);i=function(){return a};return a}var j="metadata",k="customProps",l=512,m=512,n=b("$InternalEnum").Mirrored(["WEBP","LOTTIE"]);function o(a){return d("WAWebStickerMimeUtils").WhatsAppLottieStickerMimeType===a?n.LOTTIE:n.WEBP}function p(a){if(a==null)return d("WAWebStickerMetadataParsing").DEFAULT_STICKER_METADATA;try{a=(a=(a=a[j])==null?void 0:a[k])!=null?a:{};return d("WAWebStickerMetadataParsing").toStickerMetadata(a)}catch(a){d("WALogger").LOG(i()).devConsole(a);return d("WAWebStickerMetadataParsing").DEFAULT_STICKER_METADATA}}function a(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(o(a.type)===n.LOTTIE){if(!d("WAWebLottieStickersGatingUtils").isLottieStickerReceivingEnabled())return(h||(h=b("Promise"))).reject(c("err")("lottie sticker not supported yet"));e=e.filehash;if(e!=null){var f=d("WAWebInMemoryLottieStickerCache").InMemoryLottieStickerCache.get(e);f==null&&(f=(yield d("WAWebInMemoryLottieStickerCache").extractAndSetLottieJSONInMemoryCache(e,a)));e=p(f);return(h||(h=b("Promise"))).resolve(babelHelpers["extends"]({},e,{size:a.size,fullWidth:l,fullHeight:m}))}}return d("WAWebFeatureDetectionDetectWebpSupport").detectWebpSupport().then(function(c){return c?d("WAPromiseProps").promiseProps({widthHeight:d("WAWebMediaDataUtils").getImageWidthHeightNoOpaque(a),webpData:d("WAWebMediaDataUtils").parseWebpNoOpaque(a)}).then(function(b){return{fullWidth:b.widthHeight.width,fullHeight:b.widthHeight.height,animationDuration:b.webpData.animationDuration,firstFrameLength:b.webpData.firstFrameLength,singleLoopDuration:b.webpData.singleLoopDuration,emojis:b.webpData.emojis,isAnimated:b.webpData.animationDuration>0,size:a.size,isFirstParty:b.webpData.isFirstParty,isFromStickerMaker:b.webpData.isFromStickerMaker,stickerPackId:b.webpData.stickerPackId,stickerPackName:b.webpData.stickerPackName,stickerPackPublisher:b.webpData.stickerPackPublisher,isAvatar:b.webpData.isAvatar,isAiSticker:b.webpData.isAiSticker,stickerMakerSourceType:b.webpData.stickerMakerSourceType}}):d("WAWebMediaDataUtils").parseWebpNoOpaque(a).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.animationDuration,e=b.firstFrameLength,f=b.singleLoopDuration,g=b.emojis,h=b.isFirstParty,i=b.isFromStickerMaker,j=b.stickerPackId,k=b.stickerPackName,l=b.stickerPackPublisher,m=b.isAvatar,n=b.isAiSticker;b=b.stickerMakerSourceType;if(c>0)return{animationDuration:c,firstFrameLength:e,singleLoopDuration:f,emojis:g,isAnimated:!0,size:a.size,isFirstParty:h,isFromStickerMaker:i,stickerPackId:j,stickerPackName:k,stickerPackPublisher:l,isAvatar:m,isAiSticker:n,stickerMakerSourceType:b};e=(yield d("WAWebMediaDataUtils").decodeWebpToRGBANoOpaque(a));return{animationDuration:c,rgbaBuffer:e.rgbaBuffer,rgbaWidth:e.width,rgbaHeight:e.height,emojis:g,isAnimated:!1,size:a.size,isFirstParty:h,isFromStickerMaker:i,stickerPackId:j,stickerPackName:k,stickerPackPublisher:l,isAvatar:m,isAiSticker:n,stickerMakerSourceType:b}});return function(a){return c.apply(this,arguments)}}())})});return q.apply(this,arguments)}function r(a){return a.replaceAll(/\s+/g,"")}function e(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new Blob([a],{type:d("WAWebStickerMimeUtils").WhatsAppLottieStickerMimeType});a=(yield d("WAWebMediaMmsV4Download").extractLottieJSON(a));if(a==null)throw c("err")("Failed to extract lottie json from zipped sticker");return t(a)});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=v(a,j);var b=new TextEncoder();b=b.encode(a).buffer;a=(yield d("WACryptoSha256").sha256Base64(b));return a});return u.apply(this,arguments)}function v(a,b){a=r(a);try{a=JSON.parse(a);delete a[b];return JSON.stringify(a)}catch(a){throw c("err")("removeKeyFromString: Failed to parse lottie json "+a)}}function f(){var a={};if(!d("WAWebLottieStickersGatingUtils").isLottieStickerReceivingEnabled())return a;var b=d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_data_suffix");b=new URLSearchParams(b);b.forEach(function(b,c){a[c]=b});return a}g.METADATA_OBJECT=j;g.LOTTIE_STICKER_FULL_WIDTH=l;g.LOTTIE_STICKER_FULL_HEIGHT=m;g.StickerFileType=n;g.getStickerFileType=o;g.extractMetaDataFromLottieSticker=p;g.parseStickerMetadata=a;g.removeSpacesAndEmptyLines=r;g.getLottieStickerFilehashFromZippedStickerBuffer=e;g.calculateLottieStickerFilehash=t;g.removeKeyFromString=v;g.getStickerFetchParamsFromABConfig=f}),98);
__d("WAWebWamEnumQueryType",[],(function(a,b,c,d,e,f){a=Object.freeze({STICKER_STORE_DATA:0,PREVIEW_IMAGE_DOWNLOAD:1,STICKER_PACK_DATA:2,STICKER_SEARCH:3,DISCOVERY_PACK:4});f.QUERY_TYPE=a}),66);
__d("WAWebStickerCommonQueryToStaticServerWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumQueryType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({StickerCommonQueryToStaticServer:[2740,{httpResponseCode:[2,a.TYPES.INTEGER],params:[3,a.TYPES.STRING],queryLatencyMs:[4,a.TYPES.TIMER],queryType:[1,d("WAWebWamEnumQueryType").QUERY_TYPE]},[1,1,1],"regular"]},{StickerCommonQueryToStaticServer:[]});g.StickerCommonQueryToStaticServerWamEvent=b}),98);
__d("WAWebFetchFirstPartyStickerPacksAction",["WAWebL10N","WAWebL10NCountryCodes","WAWebMiscErrors","WAWebPonyfillsFetch","WAWebPonyfillsUrlSearchParams","WAWebStickerCommonQueryToStaticServerWamEvent","WAWebStickerUtils","WAWebURLUtils","WAWebUserPrefsMeUser","WAWebWamEnumQueryType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h="https://static.whatsapp.net/sticker";function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=d("WAWebStickerUtils").getStickerFetchParamsFromABConfig();e=babelHelpers["extends"]({},e,a);a=c("WAWebURLUtils").build(h,e);var f=new(d("WAWebStickerCommonQueryToStaticServerWamEvent").StickerCommonQueryToStaticServerWamEvent)();f.startQueryLatencyMs();b=(yield c("WAWebPonyfillsFetch")(a,{signal:b.signal}));f.markQueryLatencyMs();f.set({httpResponseCode:b.status,params:new(c("WAWebPonyfillsUrlSearchParams"))(e).toString(),queryType:d("WAWebWamEnumQueryType").QUERY_TYPE.STICKER_PACK_DATA});f.commit();if(!b.ok)throw new(d("WAWebMiscErrors").InvalidServerResponseError)(a,b.status.toString(),"Invalid response from WhatsApp stickers endpoint");e=(yield b.json());if(e==null||e.length===0)throw new(d("WAWebMiscErrors").InvalidServerResponseError)(a,b.status.toString(),"Invalid response from WhatsApp stickers endpoint: "+JSON.stringify(e));return e});return j.apply(this,arguments)}function k(a,b){b={id:a["sticker-pack-id"],name:a.name,publisher:a.publisher,description:a.description,fileSize:Number(a["file-size"]),imageDataHash:a["image-data-hash"],animated:a.animated===1,previewImageIds:a["preview-image-ids"],trayImageId:a["tray-image-id"],trayImagePreview:a["tray-image-preview"],index:(a=b)!=null?a:0};return b}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=c("WAWebL10N").getNormalizedLocale();b=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone((b=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:b.user)||"default";e={cat:"sticker_store_data",id:"all",lg:e,country:b};b=(yield i(e,{signal:a.signal}));return b.map(function(a,b){return k(a,b)})});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c("WAWebL10N").getNormalizedLocale();b={cat:"sticker_pack_data",id:a.id,lg:b};b=(yield i(b,{signal:a.signal}));a=b[0];return k(a)});return m.apply(this,arguments)}g.fetchFirstPartyStickerPacks=a;g.fetchFirstPartyStickerPack=e}),98);
__d("WAWebFetchFirstPartyStickersAction",["WAWebL10N","WAWebMiscErrors","WAWebPonyfillsFetch","WAWebPonyfillsUrlSearchParams","WAWebStickerCommonQueryToStaticServerWamEvent","WAWebStickerUtils","WAWebURLUtils","WAWebWamEnumQueryType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h="https://static.whatsapp.net/sticker";function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=d("WAWebStickerUtils").getStickerFetchParamsFromABConfig();e=babelHelpers["extends"]({},e,{cat:"sticker_pack_data",id:a,lg:c("WAWebL10N").getNormalizedLocale()});a=c("WAWebURLUtils").build(h,e);var f=new(d("WAWebStickerCommonQueryToStaticServerWamEvent").StickerCommonQueryToStaticServerWamEvent)();f.startQueryLatencyMs();b=(yield c("WAWebPonyfillsFetch")(a,{signal:b==null?void 0:b.signal}));f.markQueryLatencyMs();f.set({httpResponseCode:b.status,params:new(c("WAWebPonyfillsUrlSearchParams"))(e).toString(),queryType:d("WAWebWamEnumQueryType").QUERY_TYPE.STICKER_PACK_DATA});f.commit();if(!b.ok)throw new(d("WAWebMiscErrors").InvalidServerResponseError)(a,b.status.toString(),"Invalid response from WhatsApp stickers endpoint");e=(yield b.json());if(e==null||e.length===0)throw new(d("WAWebMiscErrors").InvalidServerResponseError)(a,b.status.toString(),"Invalid response from WhatsApp stickers endpoint: "+JSON.stringify(e));return e[0].stickers.map(function(a,b){return{mimetype:a.mimetype,width:a.width,height:a.height,index:b,filehash:a["file-hash"],directPath:a["direct-path"],mediaKey:a["media-key"],id:a["file-hash"],deprecatedMms3Url:a.url,encFilehash:a["enc-file-hash"],mediaKeyTimestamp:0}})});return i.apply(this,arguments)}g.fetchFirstPartyStickers=a}),98);
__d("WAWebMediaHostsUtil",["WAWebMediaHosts","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h="https://static.whatsapp.net";a=c("lodash").memoize(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebMediaHosts").mediaHosts.getHostsInfoByBucket({preferredBuckets:[1]}));a=a.selectedHost;return a!=null?"https://"+a.hostname:h}));g.getStaticMediaHostName=a}),98);
__d("WAWebSearchFirstPartyStickersAction",["WAWebL10NCountryCodes","WAWebMediaHostsUtil","WAWebMiscErrors","WAWebPonyfillsFetch","WAWebPonyfillsUrlSearchParams","WAWebStickerCommonQueryToStaticServerWamEvent","WAWebStickerModel","WAWebStickerUtils","WAWebURLUtils","WAWebUserPrefsMeUser","WAWebWamEnumQueryType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=250,i="https://static.whatsapp.net",j="/sticker",k="/wa/static/sticker";function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;e=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone((e=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:e.user)||"default";var f=0,g=0;while(f<=h)f+=3+encodeURIComponent(a[g++]).length;f=a.slice(0,g-1).join(",");a={country:e};g=(yield d("WAWebMediaHostsUtil").getStaticMediaHostName());e=g===i?""+g+j:""+g+k;g=d("WAWebStickerUtils").getStickerFetchParamsFromABConfig();e=c("WAWebURLUtils").build(e,babelHelpers["extends"]({},g,{cat:"sticker_search",terms:f,_nc_cat:1},a));g=new(d("WAWebStickerCommonQueryToStaticServerWamEvent").StickerCommonQueryToStaticServerWamEvent)();g.startQueryLatencyMs();f=(yield c("WAWebPonyfillsFetch")(e,{signal:b==null?void 0:b.signal}));g.markQueryLatencyMs();g.set({httpResponseCode:f.status,params:new(c("WAWebPonyfillsUrlSearchParams"))(a).toString(),queryType:d("WAWebWamEnumQueryType").QUERY_TYPE.STICKER_SEARCH});g.commit();if(!f.ok)throw new(d("WAWebMiscErrors").InvalidServerResponseError)(e,f.status.toString(),"Invalid response from WhatsApp stickers endpoint");b=(yield f.json());if(b==null)throw new(d("WAWebMiscErrors").InvalidServerResponseError)(e,f.status.toString(),"Invalid response from WhatsApp stickers endpoint: "+JSON.stringify(b));return b.map(function(a,b){return new(d("WAWebStickerModel").StickerModel)({mimetype:a.mimetype,width:a.width,height:a.height,filehash:a["file-hash"],directPath:a["direct-path"],mediaKey:a["media-key"],id:a["file-hash"],encFilehash:a["enc-file-hash"],mediaKeyTimestamp:0,index:b})})});return l.apply(this,arguments)}g.searchFirstPartyStickers=a}),98);
__d("WAWebFavoriteStickerModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.sticker=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(),c.stickerHashWithoutMeta=d("WAWebBaseModel").prop(),c.isFavorite=d("WAWebBaseModel").prop(),c.deviceId=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="favoriteSticker";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebWebpCalculateWebpFilehashWithoutMetadata",["WACryptoSha256","WAWebWebp"],(function(a,b,c,d,e,f,g){function a(a){var b,c=new Uint8Array(a);b=(b=d("WAWebWebp").findWebpChunk(c,d("WAWebWebp").Chunk.EXIF))!=null?b:d("WAWebWebp").findWebpChunk(c,d("WAWebWebp").Chunk.XMP);if(b==null)return d("WACryptoSha256").sha256Base64(a);a=c.slice(0,b.position);c=a.byteLength-d("WAWebWebp").CHUNK_HEADER_SIZE;a.set(d("WAWebWebp").numberToLittleEndian(c),d("WAWebWebp").FOUR);return d("WACryptoSha256").sha256Base64(a)}g["default"]=a}),98);
__d("WAWebFavoriteStickerCollection",["Promise","WABaseGlobals","WAJids","WALogger","WAWebABProps","WAWebBaseCollection","WAWebFavoriteStickerModel","WAWebIdleTaskRunner","WAWebMediaAutoDownloadQueue","WAWebMediaStore","WAWebSchemaFavoriteStickers","WAWebStickerModel","WAWebStickerUtils","WAWebWebpCalculateWebpFilehashWithoutMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: need to initialize stickers from DB with length: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: length of stickers will be removed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: need to save collection to DB."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: length of stickers will be enqueued: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["FavoriteStickerCollection attempt to save to database failed"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: after save, stickers in DB with length: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: before save, stickers in DB with length: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Favorite Stickers: need to save stickers in DB with length: ",""]);p=function(){return a};return a}function q(a,b){return a.timestamp<b.timestamp?1:-1}var r=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c._comparator=function(a,b){return q(a,b)},a)||babelHelpers.assertThisInitialized(c)}return a}(d("WAWebBaseCollection").BaseCollection);r.model=c("WAWebFavoriteStickerModel");a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c._comparator=function(a,b){return q(a,b)},c._emojiToCollection=new Map(),c._hasInitializedFromCache=!1,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f._updateEmojiToCollection=function(a){var b,c=this;if(this.get(a.id)==null)return;b=a==null?void 0:(b=a.sticker)==null?void 0:(b=b.mediaData)==null?void 0:b.emojis;b==null?void 0:b.forEach(function(b){var d;d=(d=c._emojiToCollection.get(b))!=null?d:new r();d.add(a,{sort:!0});c._emojiToCollection.set(b,d)})};f.add=function(b,c){b=a.prototype.add.call(this,b,c);c=d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable");var e=d("WAWebABProps").getABPropConfigValue("web_autodownload_stickers");if(c||e)for(var f of b){if(!f)break;var g=c&&this._maybeUpdateEmojiToCollection(f);!g&&e&&this._enqueueStickerAutoDownload(f)}return b};f._maybeUpdateEmojiToCollection=function(a){var b,c=this;if(((b=a.sticker)==null?void 0:(b=b.mediaData)==null?void 0:b.emojis)!=null){this._updateEmojiToCollection(a);return!1}this.listenToOnce(a.sticker,"sticker_mediaData_emojis_updated",function(){c._updateEmojiToCollection(a)});this._enqueueStickerAutoDownload(a);return!0};f._enqueueStickerAutoDownload=function(a){void d("WAWebMediaAutoDownloadQueue").AutoDownloadQueue.enqueue(a.sticker,d("WAWebMediaAutoDownloadQueue").AutoDownloadTypes.MEDIA)};f.remove=function(b,c){var e=this;b=a.prototype.remove.call(this,b,c);d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable")&&b.forEach(function(a){var b;b=a==null?void 0:(b=a.sticker)==null?void 0:(b=b.mediaData)==null?void 0:b.emojis;b==null?void 0:b.forEach(function(b){b=e._emojiToCollection.get(b);a!=null&&(b==null?void 0:b.remove(a))})});return b};f.reset=function(){a.prototype.reset.call(this),d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable")&&(this._emojiToCollection.forEach(function(a,b){a.reset()}),this._emojiToCollection.clear())};f._addSaveTask=function(){var a=this;(!this._idleTaskId||!d("WAWebIdleTaskRunner").IdleCallbackTasks.isInQueue(this._idleTaskId))&&(this._idleTaskId=d("WAWebIdleTaskRunner").IdleCallbackTasks.enqueue(function(){a._saveToDb()}))};f._saveToDb=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this.toArray().map(function(a){var b=a.sticker.toDbData();return{id:a.id,timestamp:a.timestamp,sticker:{index:b.index,width:b.width,height:b.height,size:b.size,mimetype:b.mimetype,filehash:b.filehash,directPath:b.directPath,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp,encFilehash:b.encFilehash,deprecatedMms3Url:b.deprecatedMms3Url,type:"sticker"},stickerHashWithoutMeta:a.stickerHashWithoutMeta,isFavorite:a.isFavorite,deviceId:a.deviceId}});d("WALogger").LOG(p(),a.length);try{var b=d("WAWebSchemaFavoriteStickers").getFavoriteStickersTable(),c=(yield b.count());d("WALogger").LOG(o(),c);yield b.clear();yield b.bulkCreateOrReplace(a);c=(yield b.count());d("WALogger").LOG(n(),c)}catch(a){d("WALogger").ERROR(m()).devConsole(a).sendLogs(a)}});function a(){return a.apply(this,arguments)}return a}();f._dbDataToModel=function(a){return new(c("WAWebFavoriteStickerModel"))({id:a.id,timestamp:a.timestamp,stickerHashWithoutMeta:a.stickerHashWithoutMeta,sticker:new(d("WAWebStickerModel").StickerModel)(a.sticker)})};f._getStickerHashWithoutMeta=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("WAWebMediaStore").LruMediaStore.get(a));if(e==null)return a;a=d("WAWebStickerUtils").getStickerFileType(b);return a===d("WAWebStickerUtils").StickerFileType.LOTTIE?d("WAWebStickerUtils").getLottieStickerFilehashFromZippedStickerBuffer(e):c("WAWebWebpCalculateWebpFilehashWithoutMetadata")(e)});function a(b,c){return a.apply(this,arguments)}return a}();f.addOrUpdateStickers=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=this;f===void 0&&(f=d("WAJids").interpretAsNumber(d("WAJids").extractDeviceId(d("WABaseGlobals").getMyDeviceJid())));var i=a.filter(function(a){return!g.get(a.id)});d("WALogger").LOG(l(),a.length);if(i.length===0)return;a=(yield (h||(h=b("Promise"))).all(i.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return new(c("WAWebFavoriteStickerModel"))({id:a.filehash,sticker:a,stickerHashWithoutMeta:yield g._getStickerHashWithoutMeta(a.filehash,a.mimetype),timestamp:e,isFavorite:!0,deviceId:f})});return function(b){return a.apply(this,arguments)}}())));this.addAndSort(a);this._hasInitializedFromCache&&(d("WALogger").LOG(k()),this._addSaveTask())});function e(b,c,d){return a.apply(this,arguments)}return e}();f.addAndSort=function(a){this.add(a),this.sort()};f.removeAndSave=function(a,b){b===void 0&&(b={});a=this.remove(a,b);a.length&&(d("WALogger").LOG(j(),a.length),this._addSaveTask());return a};f.initializeFromCache=function(a){var b=this;d("WALogger").LOG(i(),a.length);a=a.map(function(a){return b._dbDataToModel(a)});this.addAndSort(a);var c=this.toArray();if(c.length>0){var e=new Set(a.map(function(a){return a.id}));c.some(function(a){return!e.has(a.id)})&&this._addSaveTask()}this._hasInitializedFromCache=!0};f.updateFavoriteStickerWithNewSticker=function(a,b){a=this.get(a);if(a==null)return;a.sticker=new(d("WAWebStickerModel").StickerModel)(b);this.set([a],{remove:!1,add:!1,silent:!0,sort:!1});this._addSaveTask()};f.getSuggestionsFromEmoji=function(a){return(a=this._emojiToCollection.get(a))==null?void 0:a.map(function(a){return a.sticker})};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebFavoriteStickerModel");e=new a();g.FavoriteStickerCollection=e}),98);
__d("WAWebRecentStickerModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.sticker=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(),c.msgId=d("WAWebBaseModel").prop(),c.weight=d("WAWebBaseModel").prop(),c.isNewSticker=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="recentSticker";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebGroupedRecentStickerCollectionMd",["WAWebBaseCollection","WAWebRecentStickerModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c._comparator=function(a,b){return a.weight!==b.weight?a.weight<b.weight?1:-1:a.timestamp<b.timestamp?1:-1};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebRecentStickerModel");b=new a();g.GroupedRecentStickerCollection=a;g.RecentStickerReverseCollectionMd=b}),98);
__d("WAWebRecentStickerCollection",["WALogger","WANullthrows","WAWebBaseCollection","WAWebConnModel","WAWebMobilePlatforms","WAWebStickerModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["collection:recent_sticker:_sync error "]);h=function(){return a};return a}var i=32;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e._comparator=function(a,b){return d("WAWebConnModel").Conn.platform===d("WAWebMobilePlatforms").PLATFORMS.ANDROID?e._getWeight(b)-e._getWeight(a):a.index>b.index?1:-1},e._checksum="",e._syncStatus="NONE",e._weightMap=new Map(),e._sortTrimScale=function(){var a=e.length;if(!a)return;e.sort();if(a>i){for(var b=i;b<a;b++)e._weightMap["delete"](c("WANullthrows")(e.at(b)).id);e.remove(e.slice(i))}b=e.head();var d=e.last();if(b&&d&&e._getWeight(b)<10&&e._getWeight(d)>.01)return;e.forEach(function(b,c){e._weightMap.set(b.id,1+3*((a-c)/a))})},b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f._getWeight=function(a){return c("WANullthrows")(this._weightMap.get(a.id))};f.enqueue=function(a){if(a.length===0)return;d("WAWebConnModel").Conn.platform===d("WAWebMobilePlatforms").PLATFORMS.ANDROID?this._enqueueAndroid(a):this._enqueueiOS(a)};f.addStickerWithMediaData=function(a){a=new(d("WAWebStickerModel").StickerModel)(a);a.id||(a.id=a.filehash);this.enqueue([a])};f._enqueueAndroid=function(a){var b=this;a.forEach(function(a){b.get(a.id)||(b._weightMap.set(a.id,0),b.add(a)),b.forEach(function(c){var d=b._getWeight(c);c.id===a.id?d+=1:d*=.9;b._weightMap.set(c.id,Math.round(1e3*d)/1e3)})});this._sortTrimScale()};f._enqueueiOS=function(a){var b=this;this.forEach(function(a,b){a.index=i+b});var c=new Set(a.map(function(a){return a.id}));a=a.reduce(function(a,b){if(c.has(b.id)){c["delete"](b.id);return[b].concat(a)}return a},[]).slice(0,i);a.forEach(function(a,c){var d=b.get(a.id);d?d.index=c:b.add({id:a.id,deprecatedMms3Url:a.deprecatedMms3Url,directPath:a.directPath,filehash:a.filehash,encFilehash:a.encFilehash,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,width:a.width,height:a.height,size:a.size,mimetype:a.mimetype,type:a.type,index:c})});this.sort();this.remove(this.slice(i))};f.setChecksum=function(a){this._checksum=a};f.sync=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){(a==null||a!==this._checksum)&&(yield this._sync())});function c(b){return a.apply(this,arguments)}return c}();f._sync=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this._syncStatus==="INPROGRESS")return;this._syncStatus="INPROGRESS";try{yield this.findQuery({},{set:!0}),this.sort(),this._syncStatus="SUCCESS"}catch(a){d("WALogger").WARN(h()).devConsole(a),this._syncStatus="FAILURE"}});function c(){return a.apply(this,arguments)}return c}();f.isSynced=function(){return this._syncStatus==="SUCCESS"||this._syncStatus==="FAILURE"};f.reset=function(){this._syncStatus="NONE";this._weightMap.clear();return a.prototype.reset.call(this)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebStickerModel").StickerModel;e=new a();g.RECENT_STICKERS_LIMIT=i;g.RecentStickerCollectionImpl=a;g.RecentStickerCollection=e}),98);
__d("WAWebRecentStickerCollectionMd",["WALogger","WATimeUtils","WAWebABProps","WAWebBaseCollection","WAWebGroupedRecentStickerCollectionMd","WAWebIdleTaskRunner","WAWebMediaAutoDownloadQueue","WAWebMediaStorage","WAWebMsgCollection","WAWebRecentStickerModel","WAWebSchemaRecentStickers","WAWebStickerModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: stickers length "," after remove."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: stickers length "," is over the limit."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDirectPaths called with a stickerId that doesn't match any in the collection"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: need to save collection to DB."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: adjust weight and resort stickers."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: length of stickers will be enqueued: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["RecentStickerCollection attempt to save to database failed"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: after save, stickers in DB with length: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: before save, stickers in DB with length: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: need to save stickers in DB with length: ",""]);q=function(){return a};return a}var r=32;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c._emojiToCollection=new Map(),c._hasInitializedFromCache=!1,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f._updateEmojiToCollection=function(a){var b,c=this;if(this.get(a.id)==null)return;b=a==null?void 0:(b=a.sticker)==null?void 0:(b=b.mediaData)==null?void 0:b.emojis;b==null?void 0:b.forEach(function(b){var e;e=(e=c._emojiToCollection.get(b))!=null?e:new(d("WAWebGroupedRecentStickerCollectionMd").GroupedRecentStickerCollection)();e.add(a,{sort:!0});c._emojiToCollection.set(b,e)})};f.remove=function(b,c){var e=this;b=a.prototype.remove.call(this,b,c);d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable")&&b.forEach(function(a){var b;b=a==null?void 0:(b=a.sticker)==null?void 0:(b=b.mediaData)==null?void 0:b.emojis;b==null?void 0:b.forEach(function(b){b=e._emojiToCollection.get(b);a!=null&&(b==null?void 0:b.remove(a))})});return b};f.add=function(b,c){b=a.prototype.add.call(this,b,c);c=d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable");var e=d("WAWebABProps").getABPropConfigValue("web_autodownload_stickers");if(c||e)for(var f of b){if(!f)break;var g=c&&this._maybeUpdateEmojiToCollection(f);!g&&e&&this._enqueueStickerAutoDownload(f)}return b};f._maybeUpdateEmojiToCollection=function(a){var b,c=this;if(((b=a.sticker)==null?void 0:(b=b.mediaData)==null?void 0:b.emojis)!=null){this._updateEmojiToCollection(a);return!1}this.listenToOnce(a.sticker,"sticker_mediaData_emojis_updated",function(){c._updateEmojiToCollection(a)});this._enqueueStickerAutoDownload(a);return!0};f._enqueueStickerAutoDownload=function(a){void d("WAWebMediaAutoDownloadQueue").AutoDownloadQueue.enqueue(a.sticker,d("WAWebMediaAutoDownloadQueue").AutoDownloadTypes.MEDIA)};f.reset=function(){a.prototype.reset.call(this),d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable")&&(this._emojiToCollection.forEach(function(a,b){a.reset()}),this._emojiToCollection.clear())};f._comparator=function(a,b){return a.weight!==b.weight?a.weight<b.weight?1:-1:a.timestamp<b.timestamp?1:-1};f._dbDataToModel=function(a){var b;return new(c("WAWebRecentStickerModel"))({id:a.id,timestamp:a.timestamp,msgId:a.msgId,sticker:new(d("WAWebStickerModel").StickerModel)(a.sticker),weight:(b=a.weight)!=null?b:1,isNewSticker:a.isNewSticker})};f._addSaveTask=function(){var a=this;(!this._idleTaskId||!d("WAWebIdleTaskRunner").IdleCallbackTasks.isInQueue(this._idleTaskId))&&(this._idleTaskId=d("WAWebIdleTaskRunner").IdleCallbackTasks.enqueue(function(){a._saveToDb()}))};f._saveToDb=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this.toArray().map(function(a){var b=a.sticker.toDbData();return{id:a.id,timestamp:a.timestamp,msgId:a.msgId,weight:a.weight,sticker:{id:b.id,index:b.index,width:b.width,height:b.height,size:b.size,mimetype:b.mimetype,filehash:b.filehash,directPath:b.directPath,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp,encFilehash:b.encFilehash,deprecatedMms3Url:b.deprecatedMms3Url,type:"sticker"}}});d("WALogger").LOG(q(),a.length);try{var b=d("WAWebSchemaRecentStickers").getRecentStickersTable(),c=(yield b.count());d("WALogger").LOG(p(),c);yield b.clear();yield b.bulkCreateOrReplace(a);c=(yield b.count());d("WALogger").LOG(o(),c)}catch(a){d("WALogger").ERROR(n()).sendLogs(a)}});function a(){return a.apply(this,arguments)}return a}();f.addStickerWithMediaData=function(a){var b=a.mediaKey,c=a.mediaData,e=a.encFilehash,f=a.id;a=a.stickerSentTs;this.addNewSticker(new(d("WAWebStickerModel").StickerModel)(babelHelpers["extends"]({},c,{mediaKey:b,encFilehash:e})),f.toString(),a)};f.addNewSticker=function(a,b,c){a.id||(a.id=a.filehash);var e=this.get(a.id)==null;this.addStickersAndPersistToDB([[a,(a=c)!=null?a:d("WATimeUtils").unixTimeMs(),b]],e)};f.addStickersAndPersistToDB=function(a,b){var c=this;b===void 0&&(b=!1);d("WALogger").LOG(m(),a.length);if(a.length===0)return;var e=new Set(a.map(function(a){return a[0].id}));a=a.reduce(function(a,b){var c=b[0],d=b[1];b=b[2];if(e.has(c.id)){e["delete"](c.id);c=[[c,d,b]];return c.concat(a)}return a},[]);var f=[],g=[];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];var h=c.get(d.id);if(h)h.timestamp<=e&&(h.timestamp=e),g.push(h);else{h=c._dbDataToModel({id:d.id,timestamp:e,sticker:{id:d.id,index:d.index,width:d.width,height:d.height,size:d.size,mimetype:d.mimetype,filehash:d.filehash,directPath:d.directPath,mediaKey:d.mediaKey,mediaKeyTimestamp:d.mediaKeyTimestamp,encFilehash:d.encFilehash,deprecatedMms3Url:d.deprecatedMms3Url,type:"sticker"},msgId:a,weight:d.weight!=null?Number(d.weight.toFixed(2)):1,isNewSticker:b});f.push(h);g.push(h)}});g.length>0&&(d("WALogger").LOG(l()),this.adjustWeight(g),this.addAndSort(f),this._hasInitializedFromCache&&(d("WALogger").LOG(k()),this._addSaveTask()))};f.replaceAndEnqueue=function(a,b){b===void 0&&(b=!1);if(this.length>0){var c=this.map(function(a){return a.id});this.remove(c)}if(a.length===0){this._addSaveTask();return}this.addStickersAndPersistToDB(a,b)};f.updateDirectPath=function(a,b){a=this.get(a);(a==null?void 0:a.sticker)?(a.sticker.directPath=b,this.set([a],{remove:!1,add:!1,silent:!0,sort:!1}),this._addSaveTask()):d("WALogger").ERROR(j())};f.updateStickerMediaData=function(a,b){a=this.get(a);if(b==null||a==null)return;b.directPath!=null&&(a.sticker.directPath=b.directPath);b.encFilehash!=null&&(a.sticker.encFilehash=b.encFilehash);b.mediaKey&&(a.sticker.mediaKey=b.mediaKey);b.mediaKeyTimestamp&&(a.sticker.mediaKeyTimestamp=b.mediaKeyTimestamp);this.set([a],{remove:!1,add:!1,silent:!0,sort:!1});this._addSaveTask()};f.updateRecentStickerWithNewSticker=function(a,b){a=this.get(a);if(a==null)return;a.sticker=new(d("WAWebStickerModel").StickerModel)(b);this.set([a],{remove:!1,add:!1,silent:!0,sort:!1});this._addSaveTask()};f.associateStickerWithMsg=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;b=(yield d("WAWebMsgCollection").MsgCollection.getMessagesById([b]));b=b.messages;var e=((c=a.mediaObject)==null?void 0:c.associatedMsgs())||[];a.mediaObject&&(e.length===0||!b.some(function(a){return e.includes(a)}))&&d("WAWebMediaStorage").associateMediaWithMsg(a.mediaObject,b[b.length-1])});function c(b,c){return a.apply(this,arguments)}return c}();f.initializeFromCache=function(a){var b=this;this._hasInitializedFromCache=!0;a=a.map(function(a){a=b._dbDataToModel(a);a.msgId!=null&&b.associateStickerWithMsg(a.sticker,a.msgId);return a});var c=this.toArray();c.length>0&&a.forEach(function(a){return a.weight=Number((a.weight*Math.pow(.9,c.length)).toFixed(2))});this.addAndSort(a);if(c.length){var d=new Set(a.map(function(a){return a.id}));c.some(function(a){return!d.has(a)})&&this._addSaveTask()}};f.addAndSort=function(a){this.add(a),this.sort(),this.length>r&&this._hasInitializedFromCache&&(d("WALogger").LOG(i(),this.length),this.set(this.toArray().slice(0,r)))};f.removeAndSave=function(a,b){b===void 0&&(b={});a=this.remove(a,b);a.length&&this._addSaveTask();d("WALogger").LOG(h(),this.length);return a};f.adjustWeight=function(a){var b=new Set(a.map(function(a){return a.id}));this.filter(function(a){return!b.has(a.id)}).forEach(function(a){return a.weight=Number((a.weight*.9).toFixed(2))});a.forEach(function(a){a.isNewSticker===!0?a.isNewSticker=void 0:a.weight=Number((a.weight+1).toFixed(2))})};f.getSuggestionsFromEmoji=function(a){return(a=this._emojiToCollection.get(a))==null?void 0:a.map(function(a){return a.sticker})};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebRecentStickerModel");e=new a();g.RECENT_STICKERS_LIMIT=r;g.RecentStickerCollection=a;g.RecentStickerCollectionMd=e}),98);
__d("WAWebStickerCollection",["WAWebBaseCollection","WAWebStickerModel","err"],(function(a,b,c,d,e,f,g){a={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.fetch=function(a){throw c("err")(this.constructor.name+".fetch is not implemented")};return b}(d("WAWebBaseCollection").BaseCollection);b.model=d("WAWebStickerModel").StickerModel;e=new b();g.FETCH_STATE=a;g.StickerCollectionImpl=b;g.StickerCollection=e}),98);
__d("WAWebStickerModel",["WALogger","WATimeUtils","WAWebABProps","WAWebBaseModel","WAWebMedia","WAWebMediaData","WAWebMediaTypes","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: ",", error: ",""]);h=function(){return a};return a}a=c("lodash").once(function(){return new i({id:"placeholder",isPlaceholder:!0})});b=c("lodash").once(function(){return new i({id:"createButton",isCreateButton:!0})});e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.mediaData=d("WAWebBaseModel").session(),c.mediaObject=d("WAWebBaseModel").prop(),c.deprecatedMms3Url=d("WAWebBaseModel").prop(),c.directPath=d("WAWebBaseModel").prop(),c.filehash=d("WAWebBaseModel").prop(),c.height=d("WAWebBaseModel").prop(),c.index=d("WAWebBaseModel").prop(),c.mediaKey=d("WAWebBaseModel").prop(),c.mediaKeyTimestamp=d("WAWebBaseModel").prop(),c.mimetype=d("WAWebBaseModel").prop(),c.size=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop(d("WAWebMediaTypes").OUTWARD_TYPES.STICKER),c.encFilehash=d("WAWebBaseModel").prop(),c.width=d("WAWebBaseModel").prop(),c.weight=d("WAWebBaseModel").prop(),c.stickerPackId=d("WAWebBaseModel").prop(),c.stickerPackName=d("WAWebBaseModel").prop(),c.stickerPackPublisher=d("WAWebBaseModel").prop(),c.isPlaceholder=d("WAWebBaseModel").prop(),c.isCreateButton=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.initialize=function(){var b=this;a.prototype.initialize.call(this);var e=new(c("WAWebMediaData"))();this.addChild("mediaData",e);d("WAWebABProps").getABPropConfigValue("web_sticker_suggestions_enable")&&this.listenTo(e,"change:emojis",function(a){a.emojis!=null&&(a.emojis.length&&b.trigger("sticker_mediaData_emojis_updated"),b.stopListening(e,"change:emojis"))});!this.isPlaceholder&&!this.isCreateButton&&d("WAWebMedia").registerSticker(this)};e.downloadMedia=function(a){var b=this;return d("WAWebMedia").downloadStickerOrStickerPackIcon(this,"STICKER",a)["catch"](function(a){d("WALogger").ERROR(h(),b.id,String(a.stack||a)).tags("non-sad").sendLogs("sticker-panel:sticker download failed")})};e.toDbData=function(){return{id:this.id||this.filehash,index:this.index||0,width:this.width,height:this.height,size:this.size,mimetype:this.mimetype,filehash:this.filehash,directPath:this.directPath,mediaKey:this.mediaKey,mediaKeyTimestamp:this.mediaKeyTimestamp!=null?this.mediaKeyTimestamp:d("WATimeUtils").unixTime(),encFilehash:this.encFilehash,deprecatedMms3Url:this.deprecatedMms3Url,type:d("WAWebMediaTypes").OUTWARD_TYPES.STICKER,weight:this.weight}};e["delete"]=function(){a.prototype["delete"].call(this),d("WAWebMedia").deregisterSticker(this)};return b}(d("WAWebBaseModel").BaseModel);e.Proxy="sticker";e.getPlaceholder=a;e.getCreateButton=b;var i=d("WAWebBaseModel").defineModel(e);i.getPlaceholder=a;g.Sticker=e;g.StickerModel=i}),98);
__d("WAWebStickerPackCollectionMd",["$InternalEnum","WAAbortError","WALogger","WATimeUtils","WAWebBaseCollection","WAWebFetchFirstPartyStickerPacksAction","WAWebL10N","WAWebStickerConstants","WAWebStickerPackModelMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["First party sticker pack request failed: error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["First party sticker pack request cancelled"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["First party sticker packs request failed: error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["First party sticker packs request cancelled"]);k=function(){return a};return a}var l=b("$InternalEnum").Mirrored(["INITIAL","PENDING","SUCCESS","ERROR"]);a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this)||this;b.fetchState=l.INITIAL;b.packFetchState=new Map();b.$StickerPackCollection1=null;b.$StickerPackCollection2=new Map();b.$StickerPackCollection3=null;b.$StickerPackCollection4=new Map();b.listenTo(c("WAWebL10N"),"locale_change",function(){return b.$StickerPackCollection5()});return b}var f=e.prototype;f.$StickerPackCollection5=function(){this.$StickerPackCollection6(),this.reset()};f.$StickerPackCollection6=function(){var a;(a=this.$StickerPackCollection3)==null?void 0:a.abort();this.$StickerPackCollection3=null;this.$StickerPackCollection4.forEach(function(a){return a.abort()});this.$StickerPackCollection4.clear();this.$StickerPackCollection7();this.$StickerPackCollection8();this.$StickerPackCollection1=null;this.$StickerPackCollection2.clear()};f.$StickerPackCollection9=function(a){if(a===this.fetchState)return;this.fetchState=a;this.trigger("change:fetchState",a)};f.$StickerPackCollection7=function(){this.$StickerPackCollection9(l.INITIAL)};f.$StickerPackCollection10=function(a,b){if(b===this.packFetchState.get(a))return;this.packFetchState.set(a,b);this.trigger("change:packFetchState",a,b)};f.$StickerPackCollection8=function(){this.packFetchState.clear(),this.trigger("change:packFetchState")};f.$StickerPackCollection11=function(a,b,c){var d=this;this.$StickerPackCollection12(a,b,function(b,e){var f=c[e-a];if(!b)f&&d.add(f);else if(!f){var g=b;while(g)d.remove(g),g=d.at(e)}else b.id===f.id&&(b.imageDataHash!==f.imageDataHash||b.index!==f.index)?(d.remove(b,{silent:!0}),d.add(f)):(d.remove(b),d.add(f))});this.$StickerPackCollection8();this.$StickerPackCollection2.clear()};f.$StickerPackCollection12=function(a,b,c){for(a=a;a<b;a++){var d=this.at(a);c(d,a)}};f.fetch=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;if(this.fetchState===l.PENDING||this.fetchState===l.SUCCESS&&d("WATimeUtils").unixTime()-((a=this.$StickerPackCollection1)!=null?a:0)<d("WAWebStickerConstants").STICKER_PACK_FETCH_TIMEOUT)return;this.$StickerPackCollection9(l.PENDING);this.$StickerPackCollection1=d("WATimeUtils").unixTime();this.$StickerPackCollection3=new AbortController();try{a=(yield d("WAWebFetchFirstPartyStickerPacksAction").fetchFirstPartyStickerPacks({signal:this.$StickerPackCollection3.signal}));var b=Math.max(this.length,a.length);this.$StickerPackCollection11(0,b,a);this.$StickerPackCollection9(l.SUCCESS)}catch(a){this.$StickerPackCollection9(l.ERROR);if(a.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(k());return}d("WALogger").WARN(j(),a).sendLogs("sticker-packs-fetch-request-failed")}});function c(){return a.apply(this,arguments)}return c}();f.fetchStickerPack=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(!a)return;if(this.get(a))return;var c=this.packFetchState.get(a);b=(b=this.$StickerPackCollection2.get(a))!=null?b:0;if(c===l.PENDING||c===l.SUCCESS&&d("WATimeUtils").unixTime()-b<d("WAWebStickerConstants").STICKER_PACK_FETCH_TIMEOUT)return;this.$StickerPackCollection10(a,l.PENDING);this.$StickerPackCollection2.set(a,d("WATimeUtils").unixTime());c=new AbortController();this.$StickerPackCollection4.set(a,c);try{b=(yield d("WAWebFetchFirstPartyStickerPacksAction").fetchFirstPartyStickerPack({id:a,signal:c.signal}));this.$StickerPackCollection10(a,l.SUCCESS);this.add(b)}catch(b){this.$StickerPackCollection10(a,l.ERROR);if(b.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(i());return}d("WALogger").WARN(h(),b).sendLogs("sticker-packs-fetch-request-failed")}});function c(b){return a.apply(this,arguments)}return c}();f["delete"]=function(){a.prototype["delete"].call(this),this.stopListening(),this.$StickerPackCollection6()};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebStickerPackModelMd").StickerPackModel;a.comparator=function(a,b){if(a.index<b.index)return-1;return a.index>b.index?1:0};e=new a();g.FetchState=l;g.StickerPackCollection=a;g.StickerPackCollectionMd=e}),98);
__d("WAWebStickerPackModel",["Promise","WALogger","WAWebBaseModel","WAWebMedia","WAWebMediaData","WAWebMediaTypes","WAWebStickerPackStickerCollection"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: ",", error: ",""]);i=function(){return a};return a}var j="placeholder:",k="image/png";a=function(a){var b=a.index;a=a.page;return new l({id:""+j+b,index:b,page:a})};e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,f;for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];return(b=f=a.call.apply(a,[this].concat(h))||this,f.id=d("WAWebBaseModel").prop(),f.index=d("WAWebBaseModel").prop(),f.name=d("WAWebBaseModel").prop(),f.page=d("WAWebBaseModel").prop(),f.url=d("WAWebBaseModel").prop(),f.mimetype=d("WAWebBaseModel").prop(k),f.mediaData=d("WAWebBaseModel").session(),f.mediaObject=d("WAWebBaseModel").prop(),f.directPath=d("WAWebBaseModel").prop(),f.filehash=d("WAWebBaseModel").prop(),f.mediaKey=d("WAWebBaseModel").prop(),f.mediaKeyTimestamp=d("WAWebBaseModel").prop(),f.size=d("WAWebBaseModel").prop(),f.type=d("WAWebBaseModel").prop(d("WAWebMediaTypes").OUTWARD_TYPES.IMAGE),f.encFilehash=d("WAWebBaseModel").prop(),f.deprecatedMms3Url=d("WAWebBaseModel").derived(function(){return this.isFirstParty?"":this.url},["url","isFirstParty"]),f.stickers=d("WAWebBaseModel").derived(function(){this.$StickerPack1=this.$StickerPack1||new(c("WAWebStickerPackStickerCollection"))(this.id.split("#")[0],this.isFirstParty);return this.$StickerPack1},["id"]),f.isPlaceholder=d("WAWebBaseModel").derived(function(){return e.isPlaceholderId(this.id)},["id"]),f.isFirstParty=d("WAWebBaseModel").derived(function(){return Boolean(this.url)&&!this.mediaKey},["url","mediaKey"]),b)||babelHelpers.assertThisInitialized(f)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this),!this.isPlaceholder&&!this.isFirstParty&&(this.addChild("mediaData",new(c("WAWebMediaData"))({renderableUrl:""})),b("WAWebMedia").registerStickerPackIcon(this))};f.downloadMedia=function(){var a=this;return this.isPlaceholder||this.isFirstParty?(h||(h=b("Promise"))).resolve():b("WAWebMedia").downloadStickerOrStickerPackIcon(this,"STICKER_PACK")["catch"](function(b){d("WALogger").ERROR(i(),a.id,String(b.stack||b)).sendLogs("sticker-panel:sticker-pack download failed")})};f["delete"]=function(){a.prototype["delete"].call(this),b("WAWebMedia").deregisterStickerPackIcon(this)};return e}(d("WAWebBaseModel").BaseModel);e.Proxy="stickerPack";e.createPlaceholder=a;e.isPlaceholderId=function(a){return new RegExp("^"+j).test(a)};var l=d("WAWebBaseModel").defineModel(e);l.createPlaceholder=a;l.isPlaceholderId=e.isPlaceholderId;g.PRE_PLACEHOLDER_ID=j;g.StickerPack=e;g.StickerPackModel=l}),98);
__d("WAWebStickerPackModelMd",["WAWebBaseModel","WAWebStickerPackStickerCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.index=d("WAWebBaseModel").prop(),c.id=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.publisher=d("WAWebBaseModel").prop(),c.description=d("WAWebBaseModel").prop(),c.fileSize=d("WAWebBaseModel").prop(),c.imageDataHash=d("WAWebBaseModel").prop(),c.animated=d("WAWebBaseModel").prop(),c.previewImageIds=d("WAWebBaseModel").prop(),c.trayImageId=d("WAWebBaseModel").prop(),c.trayImagePreview=d("WAWebBaseModel").prop(),c.stickers=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.initialize=function(){a.prototype.initialize.call(this);var b=!0;this.stickers=new(c("WAWebStickerPackStickerCollection"))(this.id,b)};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="stickerPackMd";b=d("WAWebBaseModel").defineModel(a);g.StickerPack=a;g.StickerPackModel=b}),98);
__d("WAWebStickerPackStickerCollection",["Promise","WATimeUtils","WAWebFetchFirstPartyStickersAction","WAWebStickerCollection","WAWebStickerConstants","WAWebStickerPackModel","err","lodash"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,d){var f;f=a.call(this)||this;f._parseStickersRes=function(a){if(a.status!==200||!a.data)throw c("err")("sticker pack stickers query error");return a.data.map(function(a,b){return babelHelpers["extends"]({},c("lodash").pick(a,["directPath","mimetype","mediaKey","filehash","width","height"]),{index:b,id:a.filehash,deprecatedMms3Url:a.url,encFilehash:a.encFilehash,mediaKeyTimestamp:0})})};f.stickerPackId=b;f.isFirstParty=d;f._firstPartyFetchTimestamp=null;b=e._cache[f.stickerPackId];if(b)return b||babelHelpers.assertThisInitialized(f);var g,h=babelHelpers.assertThisInitialized(f);Object.defineProperty(babelHelpers.assertThisInitialized(f),"fetchState",{get:function(){return g},set:function(a){g!==a&&(g=a,h.trigger("change:fetchState",a))}});return f}var f=e.prototype;f.fetch=function(a){var c,e=this;c=this.isFirstParty&&d("WATimeUtils").unixTime()-((c=this._firstPartyFetchTimestamp)!=null?c:0)>=d("WAWebStickerConstants").STICKER_PACK_FETCH_TIMEOUT;(a||c)&&this.fetchState!==d("WAWebStickerCollection").FETCH_STATE.PENDING&&delete this._fetchPromise;if(this._fetchPromise)return this._fetchPromise;this.fetchState=d("WAWebStickerCollection").FETCH_STATE.PENDING;a=b("WAWebStickerPackModel").StickerPackModel;if(a.isPlaceholderId(this.stickerPackId)){this._fetchPromise=new(h||(h=b("Promise")))(function(){});return this._fetchPromise}if(this.isFirstParty)this._firstPartyFetchTimestamp=d("WATimeUtils").unixTime(),c=d("WAWebFetchFirstPartyStickersAction").fetchFirstPartyStickers(this.stickerPackId);else return(h||(h=b("Promise"))).resolve();this._fetchPromise=c.then(function(a){var b=Math.max(e.length||a.length);e._resetRange(0,b,a);e.fetchState=d("WAWebStickerCollection").FETCH_STATE.SUCCESS})["catch"](function(){e.fetchState=d("WAWebStickerCollection").FETCH_STATE.ERROR});return this._fetchPromise};f._resetRange=function(a,b,c){var d=this;this._forEachInRange(a,b,function(b,e){e=c[e-a];!b?e&&d.add(e):!e?d.remove(b):b.id===e.id?b.set(e):(d.remove(b),d.add(e))})};f._forEachInRange=function(a,b,c){for(a=a;a<b;a++){var d=this.at(a);c(d,a)}};return e}(d("WAWebStickerCollection").StickerCollectionImpl);a._cache={};a.comparator=function(a,b){if(a.index<b.index)return-1;return a.index>b.index?1:0};g["default"]=a}),98);
__d("WAWebStickerSearchCollection",["WALogger","WAWebBaseCollection","WAWebEmoji","WAWebEmojiKeywordToUnicode","WAWebSearchFirstPartyStickersAction","WAWebStickerModel","WAWebStickerSuggestions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker search request failed: error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["StickerMoodCollection cache was invalid, re-searching."]);i=function(){return a};return a}var j={HAPPY:["\ud83d\ude02","\ud83e\udd23","\ud83d\ude00","\ud83d\ude01","\ud83d\ude06","\ud83d\ude42","\ud83d\ude07","\u263a\ufe0f","\ud83d\ude04","\ud83d\ude03"],LOVE:["\ud83d\ude0d","\ud83d\ude18","\u2764\ufe0f","\ud83d\udc95","\ud83e\udd70","\ud83d\ude17","\ud83d\ude19","\ud83d\ude3b","\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69","\ud83d\udc90","\ud83d\udc8c","\ud83d\udc9b","\ud83d\udc9a","\ud83d\udc99","\ud83d\udc9c","\ud83d\udc93","\ud83d\udc98","\ud83d\udc8f","\ud83d\udc91","\ud83c\udf39","\ud83e\udd1f","\ud83c\udfe9"],GREETINGS:["\ud83d\udc4b","\ud83d\ude02","\ud83e\udd23","\ud83d\ude4f","\u270b","\ud83e\uddd5","\ud83d\udeb6\u200d\u2640\ufe0f","\ud83d\udeb6","\ud83d\udc60","\ud83e\udd7e","\ud83d\ude48","\ud83e\udd9b","\ud83c\udf3a","\u26a1","\ud83c\udfaf","\ud83d\ude84","\ud83d\ude85","\ud83d\udc92","\ud83d\uded5","\ud83d\udee3\ufe0f","\ud83d\udd49\ufe0f","\ud83d\udd0a"],SAD:["\ud83d\ude2d","\ud83d\ude14","\ud83d\ude22","\ud83d\ude1e","\ud83d\ude1f","\ud83d\ude15","\ud83d\ude41","\u2639\ufe0f","\ud83d\ude16","\ud83d\ude2b","\ud83d\ude29","\ud83e\udd7a","\ud83d\ude25","\ud83d\ude13","\ud83d\ude2a","\ud83d\ude3f","\ud83d\udca7","\ud83d\udc94"],ANGRY:["\ud83d\ude20","\ud83d\ude21","\ud83d\ude24","\ud83d\udc7a","\ud83d\udca2","\ud83d\uddef\ufe0f","\ud83d\udc7f"],CELEBRATE:["\ud83e\udd73","\ud83e\udd42","\ud83c\udf88","\ud83c\udf8a","\ud83c\udf89"]};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$StickerSearchCollectionImpl1=new Map(),c.$StickerSearchCollectionImpl2=!1,c.$StickerSearchCollectionImpl4=!0,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.isFetchingData=function(){return this.$StickerSearchCollectionImpl4};e.hasFetchedData=function(){return this.$StickerSearchCollectionImpl2};e.setStartFetching=function(){this.$StickerSearchCollectionImpl4=!0,this.trigger("start_fetching")};e.setStopFetching=function(){this.$StickerSearchCollectionImpl4=!1,this.trigger("stop_fetching")};e.search=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){this.$StickerSearchCollectionImpl3!==b&&this.$StickerSearchCollectionImpl2&&a.prototype["delete"].call(this);var c=b.trim().toUpperCase();if(this.$StickerSearchCollectionImpl1.has(b)){var e=this.$StickerSearchCollectionImpl1.get(b);if(e!=null){this.add(e);this.$StickerSearchCollectionImpl3=b;return}d("WALogger").LOG(i())}e=[];if(Object.prototype.hasOwnProperty.call(j,c))e.push.apply(e,j[c]);else{c=d("WAWebEmoji").EmojiUtil.containsOnlyEmoji(c)?d("WAWebEmoji").EmojiUtil.splitEmojis(c):d("WAWebEmojiKeywordToUnicode").emojiKeywordToUnicodeSearch(c);if(c==null||c.length===0){this.$StickerSearchCollectionImpl3=b;this.setStopFetching();a.prototype["delete"].call(this);return}e.push.apply(e,c)}this.setStartFetching();c=[];try{c=(yield d("WAWebSearchFirstPartyStickersAction").searchFirstPartyStickers(e))}catch(a){d("WALogger").WARN(h(),a).sendLogs("sticker-search-request-failed");this.setStopFetching();return}this.$StickerSearchCollectionImpl1.set(b,c);this.$StickerSearchCollectionImpl2=!0;this.$StickerSearchCollectionImpl3=b;this.add(c);this.setStopFetching()});function e(a){return c.apply(this,arguments)}return e}();e.searchMood=function(a){return this.search(a)};e["delete"]=function(){a.prototype["delete"].call(this),this.$StickerSearchCollectionImpl1=new Map(),this.$StickerSearchCollectionImpl2=!1,this.$StickerSearchCollectionImpl4=!1};e.getSuggestionsFromEmoji=function(a){var b=[];this.$StickerSearchCollectionImpl1.forEach(function(c){c.forEach(function(c){d("WAWebStickerSuggestions").stickerMatchEmoji(c,a)&&b.push(c)})});if(this.$StickerSearchCollectionImpl1.has(a)){var c;b.push.apply(b,(c=this.$StickerSearchCollectionImpl1.get(a))!=null?c:[])}c=this.filter(function(b){return(b=b.mediaData.emojis)==null?void 0:b.includes(a)});return[].concat(c,b)};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebStickerModel").StickerModel;c=new a();g.StickerSearchCollectionImpl=a;g.StickerSearchCollection=c}),98);
__d("WAWebStickerSuggestions",["WAWebFavoriteStickerCollection","WAWebRecentStickerCollectionMd","WAWebStickerSearchCollection"],(function(a,b,c,d,e,f,g){function a(a,b){return(a=a.mediaData)==null?void 0:(a=a.emojis)==null?void 0:a.includes(b)}function b(a){var b=new Map();[d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd,d("WAWebFavoriteStickerCollection").FavoriteStickerCollection,d("WAWebStickerSearchCollection").StickerSearchCollection].forEach(function(c){c=(c=c.getSuggestionsFromEmoji(a))!=null?c:[];c.forEach(function(a){var c=b.has(a.filehash);c||b.set(a.filehash,a)})});return Array.from(b.values())}g.stickerMatchEmoji=a;g.getStickerSuggestionsFromEmoji=b}),98);
__d("WAWebWamEnumMultideviceActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({LOGIN:0,LOGOUT:1,CUSTOM_AGENT_NAME:2,MESSAGE_INFO:3,ACTIVE:4,DELETE:5});f.MULTIDEVICE_ACTION_TYPE=a}),66);
__d("WAWebMdExpansionAgentBrowserMdIdWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMultideviceActionType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdExpansionAgentBrowserMdId:[3390,{agentId:[1,a.TYPES.STRING],browserId:[2,a.TYPES.STRING],companionMdId:[5,a.TYPES.INTEGER],isCustomAgentName:[6,a.TYPES.BOOLEAN],isNewAgent:[9,a.TYPES.BOOLEAN],loginTimestamp:[3,a.TYPES.INTEGER],logoutTimestamp:[4,a.TYPES.INTEGER],mdLinkedCount:[8,a.TYPES.INTEGER],multideviceAction:[7,d("WAWebWamEnumMultideviceActionType").MULTIDEVICE_ACTION_TYPE]},[1,1,1],"regular"]},{MdExpansionAgentBrowserMdId:[]});g.MdExpansionAgentBrowserMdIdWamEvent=b}),98);
__d("WAWebBizAgentAction",["WALogger","WATimeUtils","WAWebAgentCollection","WAWebAgentModelUtils","WAWebBizGatingUtils","WAWebCmd","WAWebMdExpansionAgentBrowserMdIdWamEvent","WAWebMiscBrowserUtils","WAWebMsgCollection","WAWebSchemaMessage","WAWebUnattributedMessageCollection","WAWebUserPrefsMeUser","WAWebWamEnumMultideviceActionType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["agent: unknown agent with device id::",", delaying attribution of message id::",""]);h=function(){return a};return a}function i(a){return a.author.user!==((a=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:a.user)?!0:!1}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){if(i(b)||!d("WAWebAgentModelUtils").canUserSeeMessageAttribution())return;var e=b.author.getDeviceId();b=d("WAWebAgentCollection").AgentCollection.getByDeviceId(e);if(b==null){var f=c.map(function(a){return{id:a.id.toString(),deviceId:e}});d("WAWebUnattributedMessageCollection").UnattributedMessageCollection.add(f);f.forEach(function(a){d("WALogger").DEV(h(),e,a.id)});return}f=c.map(function(a){return d("WAWebMsgCollection").MsgCollection.get(a.id)}).filter(Boolean).filter(function(a){return a.agentId==null});var a=String(b.id);f.forEach(function(b){b.agentId=a});c=f.map(function(b){b=b.id.toString();return{id:b,agentId:a}});yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(c)});return j.apply(this,arguments)}function e(a){if(a.agentId!=null||!d("WAWebAgentModelUtils").canUserSeeMessageAttribution())return a.agentId;a=d("WAWebUserPrefsMeUser").getMe();if(a!=null){a=d("WAWebAgentCollection").AgentCollection.getByDeviceId(a.getDeviceId());if(a!=null)return a.id}}var k,l;function f(a){l=a}function m(a,b){b===void 0&&(b=!1);if(!d("WAWebBizGatingUtils").isMultiDeviceAgentsLoggingEnabled())return;new(d("WAWebMdExpansionAgentBrowserMdIdWamEvent").MdExpansionAgentBrowserMdIdWamEvent)(babelHelpers["extends"]({agentId:k},a)).commitAndWaitForFlush(b)}function n(a){l!=null&&m(babelHelpers["extends"]({},a,l,{multideviceAction:d("WAWebWamEnumMultideviceActionType").MULTIDEVICE_ACTION_TYPE.LOGIN}))}function o(){if(!d("WAWebBizGatingUtils").isMultiDeviceAgentsLoggingEnabled())return;var a=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId(),b=c("WAWebMiscBrowserUtils").persistentExpiringId();d("WAWebCmd").Cmd.on("logout",function(){m({browserId:b,companionMdId:a,logoutTimestamp:d("WATimeUtils").unixTimeWithoutClockSkewCorrection(),multideviceAction:d("WAWebWamEnumMultideviceActionType").MULTIDEVICE_ACTION_TYPE.LOGOUT},!0)});document.addEventListener("visibilitychange",function(){document.hidden||m({browserId:b,companionMdId:a,multideviceAction:d("WAWebWamEnumMultideviceActionType").MULTIDEVICE_ACTION_TYPE.ACTIVE})});var e=d("WAWebAgentCollection").AgentCollection.getByDeviceId(a);e!=null?(k=e.id,n({browserId:b,companionMdId:a})):d("WAWebCmd").Cmd.on(d("WAWebCmd").APP_STATE_SYNC_COMPLETED,function(){var c=d("WAWebAgentCollection").AgentCollection.getByDeviceId(a);(c==null?void 0:c.id)!=null&&k==null&&(k=c.id,n({browserId:b,companionMdId:a}))})}function p(a){a=a!=null?d("WAWebAgentCollection").AgentCollection.get(a):void 0;var b=c("WAWebMiscBrowserUtils").persistentExpiringId();m({browserId:b,agentId:a==null?void 0:a.id,companionMdId:a==null?void 0:a.deviceId,multideviceAction:d("WAWebWamEnumMultideviceActionType").MULTIDEVICE_ACTION_TYPE.MESSAGE_INFO})}g.updateUnattributedMessages=a;g.getAgentId=e;g.setShouldLogAgentLogin=f;g.initializeAgentLog=o;g.logMessageInfo=p}),98);
__d("WAWebBizBusinessChangeAction",["WAWebBusinessProfileCollection","WAWebConnModel","WAWebContactGetters","WAWebStateUtils"],(function(a,b,c,d,e,f,g){a=function(a){a=d("WAWebStateUtils").unproxy(a);var c=a.businessProfile,e=a.id,f=a.isBusiness||d("WAWebContactGetters").getIsMe(a)&&d("WAWebConnModel").Conn.isSMB;f&&!c?a.addChild("businessProfile",b("WAWebBusinessProfileCollection").BusinessProfileCollection.gadd(e)):!f&&c&&(a.stopListening(c),a.businessProfile=void 0,c["delete"]())};g.handleBusinessChange=a}),98);
__d("WAWebQueryBusinessCategoriesJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("businessCategoriesResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("response");var b=[],c="";try{var d=a.maybeChild("not_a_biz");d==null?void 0:d.forEachChildWithTag("category",function(a){c=a.attrString("id")});d=a.child("categories");d.forEachChildWithTag("category",function(a){var d=a.attrString("id");a=a.contentString();b.push({id:d,localized_display_name:a,not_a_biz:c.length?d===c:!1})})}catch(a){}return{categories:b,notABizId:c}});function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c="profile_typeahead";c=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,xmlns:"fb:thrift_iq",id:b.generateId(),type:"get"},b.wap("request",{op:b.CUSTOM_STRING(c),type:"catkit",v:"1"},b.wap("query",null,a)));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(c,h));if(!b.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode);else return b.result});return i.apply(this,arguments)}g.queryBusinessCategories=a}),98);
__d("WAWebBusinessProfileCategoriesBridge",["WAWebBizLogQplEvents","WAWebQueryBusinessCategoriesJob"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebBizLogQplEvents").qplPointProfileCatsView("datasource_start");return d("WAWebQueryBusinessCategoriesJob").queryBusinessCategories(a).then(function(a){d("WAWebBizLogQplEvents").qplPointProfileCatsView("datasource_end");return a})}g.queryBusinessCategories=a}),98);
__d("WAWebBusinessProfileJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("businessProfileResponse",function(a){a.assertTag("iq"),a.assertFromServer()}),i=new(c("WADeprecatedWapParser"))("commerceSettingsResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("commerce_settings");a=a.child("cart").attrString("enabled");return a==="true"});function j(a){var b=a.note,c=a.timezone;a=a.config;var e=[];for(var f in a){var g=a[f],h=g.mode;g=g.hours;if(g)for(g of g){var i=g[0],j=g[1];e.push({day_of_week:f,mode:h,open_time:i,close_time:j})}else e.push({day_of_week:f,mode:h})}i=[];b&&i.push(d("WAWap").wap("business_hours_note",null,b));i.push.apply(i,e.map(function(a){a=d("WAWap").wap("business_hours_config",{day_of_week:d("WAWap").CUSTOM_STRING(a.day_of_week),mode:a.mode,open_time:a.open_time?d("WAWap").CUSTOM_STRING(a.open_time.toString()):d("WAWap").DROP_ATTR,close_time:a.close_time?d("WAWap").CUSTOM_STRING(a.close_time.toString()):d("WAWap").DROP_ATTR});return a}));return d("WAWap").wap("business_hours",{timezone:c?d("WAWap").CUSTOM_STRING(c):d("WAWap").DROP_ATTR},i)}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,smax_id:b.SMAX_ID(c("WAWapDeprecatedSmaxID").CommerceSettingsSet),xmlns:"fb:thrift_iq",id:b.generateId(),type:"set"},b.wap("commerce_settings",null,b.wap("cart",{enabled:b.CUSTOM_STRING(a.toString())})));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,i));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode);else return a.result});return k.apply(this,arguments)}function e(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=a.address,e=a.description,f=a.categories,g=a.email,i=a.website;a=a.businessHours;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,xmlns:"w:biz",id:b.generateId(),type:"set"},b.wap("business_profile",{v:"3",mutation_type:"delta"},c!==void 0?d("WAWap").wap("address",null,c):null,e!==void 0?d("WAWap").wap("description",null,e):null,g!==void 0?d("WAWap").wap("email",null,g):null,i&&i.length===0?d("WAWap").wap("website",null):null,i&&i.length>0?d("WAWap").wap("website",null,i[0]):null,i&&i.length>1?d("WAWap").wap("website",null,i[1]):null,f?d("WAWap").wap("categories",null,f.map(function(a){return d("WAWap").wap("category",{id:d("WAWap").CUSTOM_STRING(a.id)})})):null,a?j(a):null));c=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));if(!c.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(c.errorCode)});return l.apply(this,arguments)}function f(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;a=(e=d("WAWap")).wap("iq",{to:e.S_WHATSAPP_NET,xmlns:"w:biz",id:e.generateId(),type:"set"},e.wap("business_profile",{v:"3",mutation_type:"delta"},e.wap("cover_photo",{op:"update",id:e.CUSTOM_STRING(a.toString()),ts:e.CUSTOM_STRING(b.toString()),token:e.CUSTOM_STRING(c)})));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!b.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode)});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,xmlns:"w:biz",id:b.generateId(),type:"set"},b.wap("business_profile",{v:"3",mutation_type:"delta"},b.wap("cover_photo",{op:"delete",id:b.CUSTOM_STRING(a.toString())})));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode)});return o.apply(this,arguments)}g.updateCartEnabled=a;g.editBusinessProfile=e;g.sendCoverPhoto=f;g.deleteCoverPhoto=n}),98);
__d("WAWebBizBusinessProfileAction",["WALogger","WAPromiseDelays","WAWebBusinessCategoriesResultModel","WAWebBusinessProfileCategoriesBridge","WAWebBusinessProfileCollection","WAWebBusinessProfileJob","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebQueryBusinessProfile","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","cr:3128","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] fetching signed user info from server"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[queryBusinessProfile] merging mock payload to the busines profile"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[queryBusinessProfile] delaying "," seconds before querying business profile"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] fetching business public key certificate from server"]);k=function(){return a};return a}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(!c("gkx")("26258")){var f;f=(f=b("cr:3128")==null?void 0:b("cr:3128").debugSmbConfigs.delayBusinessProfileQuery)!=null?f:0;f&&(d("WALogger").DEV(j(),f),yield d("WAPromiseDelays").delayMs(f*1e3))}f=(yield d("WAWebQueryBusinessProfile").queryBusinessProfile(a,e));if(!c("gkx")("26258")){a=b("cr:3128")==null?void 0:b("cr:3128").debugSmbConfigs.mockBusinessProfileId;e=b("cr:3128")==null?void 0:(e=b("cr:3128").debugSmbConfigs)==null?void 0:e.mockBusinessProfileQueryPayload;e&&f[0].wid.equals(a)&&(d("WALogger").DEV(i()).devConsole({response:f,mockPayload:e}),f[0].profile=babelHelpers["extends"]({},f[0].profile,e))}return f});return l.apply(this,arguments)}function e(a){return a===d("WAWebBusinessCategoriesResultModel").BUSINESS_CATEGORY_EMPTY_STR_ID?d("WAWebBusinessProfileCategoriesBridge").queryBusinessCategories(""):d("WAWebBusinessProfileCategoriesBridge").queryBusinessCategories(a)}function f(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebBusinessProfileCollection").BusinessProfileCollection;a=(yield d("WAWebBusinessProfileJob").updateCartEnabled(a));var e=c.getValid(d("WAWebUserPrefsMeUser").getMeUser()),f=e==null?void 0:e.profileOptions;e&&f&&(f.cartEnabled=a,c.add(e,{merge:!0}))});return m.apply(this,arguments)}function n(a){d("WALogger").DEV(k());var c=b("WAWebPersistedJobManager").getJobManager;return c().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.getPublicKey(a))}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(h());var e=b("WAWebPersistedJobManager").getJobManager;e=(yield e().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.getSignedUserInfo(a)));a=e.phoneNumber;var f=e.phoneNumberSignature,g=e.phoneNumberSignatureExpiration;e=e.businessDomain;if(a==null||g==null||f==null||e==null)throw c("err")("Unexpected null or undefined");return{phoneNumber:a,phoneNumberSignature:f,phoneNumberSignatureExpiration:g,businessDomain:e}});return p.apply(this,arguments)}g.queryBusinessProfile=a;g.queryBusinessCategories=e;g.updateCartEnabled=f;g.queryBusinessPublicKey=n;g.querySignedUserInfo=o}),98);
__d("WAWebChatAssignmentLogEvents.flow",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["CONTACT_INFO_SCREEN","CONVERSATION_MENU","MULTI_SELECT","SYSTEM_MESSAGE"]);f.ChatAssignmentEntryPointType=a}),66);
__d("WAWebChatAssignmentSystemMsg",["WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a,b,e){var f=d("WAWebUserPrefsMeUser").getMeUser(),g=c("WAWebMsgKey").newId_DEPRECATED();g=new(c("WAWebMsgKey"))({fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a),remote:a,id:g});return{id:g,t:e,type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:b==null?"chat_assignment_unassign":"chat_assignment",from:a,to:f,templateParams:b==null?[]:[b.name]}}g.genChatAssignmentNotificationTemplateMsg=a}),98);
__d("WAWebBizChatAssignmentAction",["Promise","WAServerSync.pb","WASyncdActionUtils","WASyncdConst","WASyncdOrphan","WATimeUtils","WAWebAgentCollection","WAWebBizChatAssignmentOpenedAction","WAWebBizGatingUtils","WAWebChatAssignmentCollection","WAWebChatAssignmentLogEvents","WAWebChatAssignmentLogEvents.flow","WAWebChatAssignmentModel","WAWebChatAssignmentSystemMsg","WAWebChatAssignmentUtils","WAWebChatCollection","WAWebCmd","WAWebHandleSingleMsg","WAWebMobilePlatforms","WAWebNotificationController","WAWebNotificationsChatAssignmentNotification","WAWebSchemaChatAssignment","WAWebSyncd","WAWebUserPrefsMeUser","WAWebUserPrefsStore","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebChatAssignmentUtils").canAssignChats())return;var e=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId(),f=a.map(function(a){var c=a.chat.id.toString({legacy:!0});a=a.agentId;var f=d("WAWebAgentCollection").AgentCollection.getByDeviceId(e);f=(f==null?void 0:f.deviceId)===e&&b!==d("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.MULTI_SELECT&&b!==d("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.CONTACT_INFO_SCREEN;return{id:c+"_"+(a||""),chatId:c,agentId:(c=a)!=null?c:"",chatOpenedByAgent:f}}),g=a.map(function(a){return a.chat.assignedAgent!=null});yield d("WAWebSyncd").lockForSync(["chat-assignment"],m(f),function(){return k(f)});a.forEach(function(c,e){d("WAWebChatAssignmentLogEvents").logChatAssignment(c.chat,(c=c.agentId)!=null?c:"",g[e],b,a.length)});n(a.map(function(a){var b=a.chat;a=a.agentId;a=d("WAWebAgentCollection").AgentCollection.get((a=a)!=null?a:"");return{chatId:b.id,agent:a,timestamp:d("WATimeUtils").unixTime()}}));c("WAWebUserPrefsStore").setUser("chat_assignment_agent_has_assigned_chats",!0);f.filter(function(a){a=a.chatOpenedByAgent;return a===!0}).forEach(function(a){a=d("WAWebChatCollection").ChatCollection.get(a.chatId);a!=null&&d("WAWebBizChatAssignmentOpenedAction").markChatAsOpened(a,!0)})});return i.apply(this,arguments)}function j(a){return d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getModelsArray().filter(function(b){b=b.chatId;return a.includes(b)}).map(function(a){return a.id})}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=j(a.map(function(a){a=a.chatId;return a})),e=a.map(function(a){var b=a.id,c=a.chatId,e=a.agentId;a=a.chatOpenedByAgent;return new(d("WAWebChatAssignmentModel").ChatAssignment)({id:b,chatId:c,agentId:e,chatOpenedByAgent:a,agent:d("WAWebAgentCollection").AgentCollection.get(e)})});d("WAWebChatAssignmentCollection").ChatAssignmentCollection.remove(c);d("WAWebChatAssignmentCollection").ChatAssignmentCollection.add(e);e=d("WAWebSchemaChatAssignment").getChatAssignmentTable();yield (h||(h=b("Promise"))).all([e.bulkRemove(c),e.bulkCreateOrMerge(a)])});return l.apply(this,arguments)}function m(a){var b=d("WATimeUtils").unixTimeMs();a=a.map(function(a){var c=a.chatId;a=a.agentId;a={chatAssignment:{deviceAgentID:a}};return d("WASyncdActionUtils").buildPendingMutation({timestamp:b,collection:d("WASyncdConst").CollectionName.Regular,operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,indexArgs:[c],value:a,action:d("WASyncdConst").Actions.ChatAssignment,version:d("WASyncdConst").CHAT_ASSIGNMENT_SYNC_VERSION})});return a}function n(a){if(!d("WAWebBizGatingUtils").chatAssignmentSystemMessagesEnabled())return;a.forEach(function(a){var b=a.chatId,c=a.agent;a=a.timestamp;var e=d("WAWebChatCollection").ChatCollection.get(b);d("WAWebHandleSingleMsg").handleSingleMsg(b,d("WAWebChatAssignmentSystemMsg").genChatAssignmentNotificationTemplateMsg(b,c,a),"chatAssignmentSystemMsg").then(function(){e!=null&&d("WAWebChatAssignmentLogEvents").logSystemMessageGeneratedFromCompanion(e)})["catch"](function(){e!=null&&d("WAWebChatAssignmentLogEvents").logSystemMessageFailedToGenerate(e)})})}function e(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMobilePlatforms").isSMB())return;a=j([a.toString({legacy:!0})]);yield d("WAWebSchemaChatAssignment").getChatAssignmentTable().bulkRemove(a);d("WAWebChatAssignmentCollection").ChatAssignmentCollection.remove(a)});return o.apply(this,arguments)}function f(){d("WAWebCmd").Cmd.once(d("WAWebCmd").APP_STATE_SYNC_COMPLETED,function(){d("WASyncdOrphan").checkOrphanAgents(d("WAWebAgentCollection").AgentCollection.getModelsArray().map(function(a){a=a.id;return a})),d("WASyncdOrphan").checkOrphanChatAssignments(d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getModelsArray().map(function(a){a=a.id;return a}))})}function p(a,b){if(!d("WAWebBizGatingUtils").chatAssignmentNotificationsEnabled()||!d("WAWebChatAssignmentUtils").canAssignChats())return;var c=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId();a=a.filter(function(a){a=d("WAWebAgentCollection").AgentCollection.get(a.agentId);return(a==null?void 0:a.deviceId)===c});if(a.length===0)return;d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsChatAssignmentNotification").WAWebNotificationsChatAssignmentNotification)({chats:a.map(function(a){return d("WAWebWidFactory").createWid(a.chatId)}),assignmentTimestamps:b}))}g.changeChatAssignment=a;g.createChatAssignmentSystemMsgs=n;g.removeChatAssignmentsForChat=e;g.checkOrphanAssignments=f;g.triggerChatAssignmentNotification=p}),98);
__d("WAWebBizChatAssignmentOpenedAction",["WAServerSync.pb","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebAgentCollection","WAWebChatAssignmentCollection","WAWebChatAssignmentUtils","WAWebSchemaChatAssignment","WAWebSyncd","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.forEach(function(a){var b=a.id;a=a.chatOpenedByAgent;b=d("WAWebChatAssignmentCollection").ChatAssignmentCollection.get(b);b&&b.set("chatOpenedByAgent",a)});var b=d("WAWebSchemaChatAssignment").getChatAssignmentTable();yield b.bulkCreateOrMerge(a)});return i.apply(this,arguments)}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebChatAssignmentUtils").canAssignChats())return;var c=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId();a=a.id;var e=(c=d("WAWebAgentCollection").AgentCollection.getByDeviceId(c))==null?void 0:c.id;if(e==null)return;c=[{chatId:a,agentId:e,chatOpened:b}];var f=c.map(function(a){a=a.chatId.toString({legacy:!0});return{id:a+"_"+e,chatId:a,agentId:e,chatOpenedByAgent:b}});yield d("WAWebSyncd").lockForSync(["chat-assignment"],k(f),function(){return h(f)})});return j.apply(this,arguments)}function k(a){var b=d("WATimeUtils").unixTimeMs();a=a.map(function(a){var c=a.chatId,e=a.agentId;a=a.chatOpenedByAgent;a={chatAssignmentOpenedStatus:{chatOpened:a}};return d("WASyncdActionUtils").buildPendingMutation({timestamp:b,collection:d("WASyncdConst").CollectionName.Regular,operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,indexArgs:[c,e],value:a,action:d("WASyncdConst").Actions.ChatAssignmentOpenedStatus,version:d("WASyncdConst").CHAT_ASSIGNMENT_SYNC_VERSION})});return a}g.updateLocalOpenedState=h;g.markChatAsOpened=a}),98);
__d("WAWebBizInteractiveMessageQuickReplyAction",["WANullthrows","WAWebCarouselMsgUtils","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.isCarouselCard)return i(a,b);b=k(a,b);var c=d("WAWebSchemaMessage").getMessageTable();c=(yield c.get(a.id.toString()));yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge([{id:c==null?void 0:c.id,interactivePayload:b}]);a.set("interactivePayload",b)});return h.apply(this,arguments)}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=k(a.interactivePayload,b);var e=c("WANullthrows")(d("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(a)),f=c("WANullthrows")(e.carouselCardsParsed).slice(),g=f.findIndex(function(b){return b.id.toString()===a.id.toString()});f[g]=babelHelpers["extends"]({},f[g],{interactivePayload:b});g=d("WAWebSchemaMessage").getMessageTable();var h=(yield g.get(e.id.toString()));yield g.bulkCreateOrMerge([{id:h==null?void 0:h.id,carouselCardsParsed:f}]);e.set("carouselCardsParsed",f);a.set("interactivePayload",b)});return j.apply(this,arguments)}function k(a,b){return babelHelpers["extends"]({},a,{buttons:a==null?void 0:(a=a.buttons)==null?void 0:a.map(function(a,c){if(a.buttonParamsJson===void 0)return a;var d=JSON.parse(a.buttonParamsJson);b===c&&(d.disabled=!0);return{name:a.name,buttonParamsJson:JSON.stringify(d)}})})}g.markInteractiveButtonClicked=a;g.rebuildInteractivePayloadWithDisabledButton=k}),98);
__d("WAWebComposeBoxActions",["WAWebEventEmitter","WAWebStateUtils"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.focus=function(a){a=d("WAWebStateUtils").unproxy(a);a?this.trigger("focus_"+a.id.toString()):this.trigger("focus")};c.send=function(a){a=d("WAWebStateUtils").unproxy(a);this.trigger("send_"+a.id.toString())};c.paste=function(a,b,c){if(a){a=d("WAWebStateUtils").unproxy(a);this.trigger("paste_"+a.id.toString(),b,c)}else this.trigger("paste",b,c)};c.sendPaste=function(a,b){a=d("WAWebStateUtils").unproxy(a);this.trigger("send_paste_"+a.id.toString(),b)};c.toggleQuickReplies=function(){this.trigger("toggle_quick_replies")};c.addMsgSendingLogAttributes=function(a,b){this.trigger("add_sending_log_attributes_"+a.id.toString(),b)};c.setCtwaContextLinkData=function(a,b){this.trigger("set_ctwa_context_link_data_"+a.id.toString(),b)};return b}(c("WAWebEventEmitter"));b=new a();g.ComposeBoxActions=b}),98);
__d("WAWebDrawerManager",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.setDrawerContext=function(a,b){this.trigger("update_context_"+a,b)};c.openDrawerRight=function(a,b){this.trigger("open_drawer_right",a,b)};c.openDrawerMid=function(a,b){this.trigger("open_drawer_mid",a,b)};c.openDrawerLeft=function(a,b){this.trigger("open_drawer_left",a,b)};c.existsDrawerRight=function(a){this.trigger("exists_drawer_right",a)};c.existsDrawerMid=function(a){this.trigger("exists_drawer_mid",a)};c.existsDrawerLeft=function(a){this.trigger("exists_drawer_left",a)};c.closeDrawerRight=function(){this.trigger("close_drawer_right")};c.closeDrawerMid=function(){this.trigger("close_drawer_mid")};c.closeDrawerLeft=function(){this.trigger("close_drawer_left")};return b}(c("WAWebEventEmitter"));b=new a();g.DrawerManager=b}),98);
__d("WAWebBizProductCatalogAction",["WAWebBizCreateProductInquiry","WAWebBizProductCatalogBridge","WAWebCmd","WAWebComposeBoxActions","WAWebDrawerManager","WAWebFindChatAction","WAWebFrontendConstants","WAWebMsgCollection","WAWebStateUtils"],(function(a,b,c,d,e,f,g){function a(a,b,c,e,f,g){c===void 0&&(c=100);e===void 0&&(e=100);return d("WAWebBizProductCatalogBridge").queryProduct(a,b,c,e,f,g)}function b(a,b,c,e,f,g,h){c===void 0&&(c=5);e===void 0&&(e=100);f===void 0&&(f=100);h===void 0&&(h=!1);return d("WAWebBizProductCatalogBridge").queryCatalog(a,b,c,e,f,g,h)}function c(a,b,c,e,f){c===void 0&&(c=100);e===void 0&&(e=100);return d("WAWebBizProductCatalogBridge").queryProductList(a,b,c,e,f)}function e(a,b){return d("WAWebBizProductCatalogBridge").appealProduct(a,b)}function f(a,b,c){return d("WAWebBizProductCatalogBridge").reportProduct(a,b,c)}function h(){return d("WAWebBizProductCatalogBridge").createCatalog()}function i(a,b,c){b===void 0&&(b=100);c===void 0&&(c=100);return d("WAWebBizProductCatalogBridge").addProduct(a,b,c)}function j(a,b,c){b===void 0&&(b=100);c===void 0&&(c=100);return d("WAWebBizProductCatalogBridge").editProduct(a,b,c)}function k(a){return d("WAWebBizProductCatalogBridge").deleteProducts(a)}function l(a,b,c){var e=a.catalogWid;if(!b)return;b=b.productCollection.get(a.id);var f=b?d("WAWebStateUtils").unproxy(b):d("WAWebStateUtils").unproxy(a);if(!f)return;b=f.getProductImageCollectionHead();var g=b==null?void 0:b.mediaData;if(!g)return;d("WAWebFindChatAction").findChat(e,"bizProductCatalogAction").then(function(a){d("WAWebCmd").Cmd.openChatFromUnread(a).then(function(b){if(b){b=d("WAWebStateUtils").unproxy(d("WAWebBizCreateProductInquiry").createProductInquiry(f,e,g,c==null?void 0:c.session.toString()));d("WAWebMsgCollection").MsgCollection.add(b);a.composeQuotedMsg=b;d("WAWebComposeBoxActions").ComposeBoxActions.focus(a);window.innerWidth<=d("WAWebFrontendConstants").LAYOUT_2COLUMNS_MAX_WIDTH&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight()}})})}g.queryProduct=a;g.queryCatalog=b;g.queryProductList=c;g.appealProduct=e;g.reportProduct=f;g.createBusinessCatalog=h;g.addProduct=i;g.editProduct=j;g.deleteProducts=k;g.sendProductToChat=l}),98);
__d("WAWebBizProductMessageListAction",["WAWebMsgCollection"],(function(a,b,c,d,e,f,g){function a(a,b){var c;b=d("WAWebMsgCollection").MsgCollection.get(b);c=b==null?void 0:(c=b.list)==null?void 0:(c=c.productListInfo)==null?void 0:(c=c.headerImage)==null?void 0:c.productId;a.id===c&&b!=null&&(b.productHeaderImageRejected=!0)}g.updateProductListHeaderImageRejected=a}),98);
__d("WAWebBizUpdateContactsWithVerifiedNamesAction",["WANullthrows","WAWebApiVerifiedBusinessName","WAWebBusinessProfileTypes","WAWebContactCollection","WAWebHandleMsgTypes.flow","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){var c={};for(a of a){var e=a.id;c[e.user]=a}for(a of b){var e=a.id;if(e.isBot())continue;b=c[e.user];var f=Boolean(b);b=b||{};var g=b.level,h=b.name,i=b.isApi,j=b.isSmb;b=b.privacyMode;i=Boolean(i);f={isBusiness:f,isEnterprise:i,isSmb:Boolean(j),verifiedLevel:d("WAWebBusinessProfileTypes").convertLevel(g),verifiedName:h,privacyMode:b};a.set(f)}}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebApiVerifiedBusinessName").getAllVerifiedNames()).map(function(a){var b=a.id,e=a.name,f=a.level,g=a.isApi,h=a.isSmb;a=a.privacyMode;return{id:d("WAWebWidFactory").createUserWid(b),name:e,level:f,isApi:g,isSmb:h,privacyMode:a?{actualActors:c("WANullthrows")(d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(a.actualActors)),hostStorage:c("WANullthrows")(d("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(a.hostStorage)),privacyModeTs:a.privacyModeTs}:null}});h(a,d("WAWebContactCollection").ContactCollection.toArray())});return function(){return a.apply(this,arguments)}}();g.updateContactsWithVerifiedNames=h;g.applyContactBusinessProps=a}),98);
__d("WAWebBizVerifiedNameAction",["Promise","WAWebBizUpdateContactsWithVerifiedNamesAction","WAWebChatCollection","WAWebHandlePrivacyModeUpdateMsgAction","WAWebSchemaVerifiedBusinessName","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;yield (h||(h=b("Promise"))).all(a.map(function(a){var c=a.id;a=a.verifiedName.privacyMode;if(a==null)return;var e=b("WAWebChatCollection").ChatCollection;e=e.get(c);if(e==null)return;if(e.shouldAppearInList===!0)return;return d("WAWebHandlePrivacyModeUpdateMsgAction").handlePrivacyModeTransition(c,a,{chat:e,bypassVerifiedNameUpdate:!0})}));a=a.map(function(a){var b=a.id;a=a.verifiedName;var c=a.level,d=a.serial,e=a.name,f=a.isApi,g=a.isSmb;a=a.privacyMode;return{id:b.isLid()?b.toString():b.user,level:c,serial:d,name:e,isApi:f,isSmb:g,privacyMode:a?{actualActors:a.actualActors,hostStorage:a.hostStorage,privacyModeTs:a.privacyModeTs}:null}});yield d("WAWebSchemaVerifiedBusinessName").getVerifiedBusinessNameTable().bulkCreateOrReplace(a);yield d("WAWebBizUpdateContactsWithVerifiedNamesAction").applyContactBusinessProps()});return i.apply(this,arguments)}g.handleVerifiedNameSync=a}),98);
__d("WAWebBizOrderAction",["WAWebBizOrderBridge"],(function(a,b,c,d,e,f,g){function a(a,b,c,e,f){return d("WAWebBizOrderBridge").queryOrder(a,b,c,e,f)}function b(a,b){return d("WAWebBizOrderBridge").createOrder(a,b)}g.queryOrder=a;g.createOrder=b}),98);
__d("WAWebFindChatAction",["WAAbortError","WALogger","WAWebApiContact","WAWebChatGetExistingBridge","WAWebCreateChat","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebFindChatAction: creating lid chat with ",", origin ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebFindChatAction: creating username chat with ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebFindChatAction: creating pn chat with ",""]);j=function(){return a};return a}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=a;e=(e=e)!=null?e:{};var f=e.forceUsync,g=e.isGroupJoin,k=e.signal;e=e.nextPrivacyMode;if(k==null?void 0:k.aborted)throw new(d("WAAbortError").AbortError)();k=(yield d("WAWebChatGetExistingBridge").getExisting(a));if(k)return k;k={createdLocally:!0};g===!0&&(k.notSpam=!0);if(a.isUser()){g=a.isLid()?d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a)):d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a));if(g!=null){var l=(yield d("WAWebChatGetExistingBridge").getExisting(g));if(l!=null)return l}a.isLid()&&(b==="username_contactless_search"?g!=null?(a=g,d("WALogger").LOG(j(),a.toLogString())):(k.lidOriginType="username",d("WALogger").LOG(i(),a.toLogString())):d("WALogger").LOG(h(),a.toLogString(),b))}yield d("WAWebCreateChat").createChat(a,b,k,{forceUsync:f,nextPrivacyMode:e});l=(yield d("WAWebChatGetExistingBridge").getExisting(a));if(l==null)throw c("err")("findChat: new chat not found");return l});return k.apply(this,arguments)}g.findChat=a}),98);
__d("WAWebCollectionConstants",[],(function(a,b,c,d,e,f){a="collection_has_synced";b=50;c=20;f.COLLECTION_HAS_SYNCED=a;f.PAGE_SIZE=b;f.MSG_PRELOAD_THRESHOLD=c}),66);
__d("WAWebSetArchiveChatActionUtils",["WALogger","WAWebSettingsGetters","WAWebSettingsModel"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["archive:shouldUnarchiveChat unarchive chat"]);h=function(){return a};return a}function a(a){if(d("WAWebSettingsGetters").getShowArchiveV2(c("WAWebSettingsModel")))return!1;d("WALogger").DEV(h());return!0}function b(){return!1}g.shouldUnarchiveChat=a;g.shouldEnableArchiveV2=b}),98);
__d("WAWebWamEnumWebcQueryTriggerType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,USER_SCROLL:1,NEW_MESSAGE_PREFETCH:2,SEARCH_RESULT_CLICK:3});f.WEBC_QUERY_TRIGGER_TYPE=a}),66);
__d("WAWebHandleNewMsgAction",["Promise","WAFilteredCatch","WALogger","WATimeUtils","WAWebApiChat","WAWebBackendErrors","WAWebBotGenTypingIndicatorMsg","WAWebChangePresenceHandlerAction","WAWebChatLoadMessages","WAWebCmd","WAWebCollectionConstants","WAWebCommonCTWAConsumerTransparency","WAWebCommonMsgUtils","WAWebConversionTupleCollection","WAWebDBUpdateChatTable","WAWebFrontendMsgGetters","WAWebGroupUnreadMessageType","WAWebHandleMsgReceiptCommon","WAWebMsgGetters","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebSendSpamChatAction","WAWebSetArchiveChatActionUtils","WAWebUnreadMentionModel","WAWebUserPrefsMeUser","WAWebWamEnumWebcQueryTriggerType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:onNewMsg failed\n",""],["chat:onNewMsg failed\\n",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["onNewMsg: unable to find metadata from chat table for id:",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat model: unarchiving chat"]);k=function(){return a};return a}function l(){return!d("WAWebCmd").Cmd.isOfflineDeliveryEnd}function a(a,e){if(a.isNewsletter&&!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return(h||(h=b("Promise"))).resolve();if(!e)return(h||(h=b("Promise"))).resolve();var f=(h||(h=b("Promise"))).resolve();d("WAWebMsgGetters").getIsSentByMe(e)&&!a.notSpam&&!a.isNewsletter&&(f=d("WAWebSendSpamChatAction").sendNotSpam(a,!1));return d("WAWebFrontendMsgGetters").getEventType(e)===d("WAWebCommonMsgUtils").EventType.IGNORE?(h||(h=b("Promise"))).resolve():f.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b={};a.promises.updateSortTime&&a.promises.updateSortTime.abortController.abort();d("WAWebMsgGetters").getIsSentByMeFromWeb(e)&&(a.archive&&(d("WAWebSetArchiveChatActionUtils").shouldUnarchiveChat(d("WAWebMsgGetters").getIsSentByMe(e))&&(d("WALogger").DEV(k()),b.archive=!1)));a.promises.setArchive&&a.promises.setArchive.abortController.abort();!a.isNewsletter&&e.subtype!==d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE&&(!d("WAWebMsgGetters").getIsSentByMe(e)?c("WAWebChangePresenceHandlerAction")({id:a.id,participant:e.author,type:"idle"},!1):a.markedUnread=!1);yield d("WAWebDBUpdateChatTable").updateChatTable(a.id,b);b=babelHelpers["extends"]({},b);try{if(l())b.t=e.t,(d("WAWebFrontendMsgGetters").getEventType(e)===d("WAWebCommonMsgUtils").EventType.AMBIENT||d("WAWebFrontendMsgGetters").getEventType(e)===d("WAWebCommonMsgUtils").EventType.DEFAULT)&&!e.id.fromMe&&(b.unreadCount=a.unreadCount+1||1,a.activeUnreadCount>0&&(b.activeUnreadCount=a.activeUnreadCount+1));else{var f=(yield d("WAWebApiChat").getChatMeta(a.id)),g=f.unreadCount;f=f.timestamp;b.unreadCount=g;b.t=f;a.activeUnreadCount>0&&(b.activeUnreadCount=a.activeUnreadCount+1)}b.unreadDividerOffset=0}catch(b){d("WALogger").ERROR(j(),a.id.toLogString())}return b})).then(function(b){a.set(b);e.ctwaContext!=null&&d("WAWebCommonCTWAConsumerTransparency").handleConsumerTransparencyForNewMsg(a,e.ctwaContext.conversionData,e.ctwaContext.conversionSource);var f=c("WAWebConversionTupleCollection").get(a.id);if(f)f.timestamp=d("WATimeUtils").unixTime();else if(e.ctwaContext!=null){f=e.ctwaContext;var g=f.conversionSource;f=f.conversionData;c("WAWebConversionTupleCollection").add({conversionSource:g,conversionData:f,id:a.id,timestamp:d("WATimeUtils").unixTime()},{merge:!0})}e.type==="gp2"&&(e.subtype==="add"||e.subtype==="create")&&a.getGroupMetadataCollection().trigger("group_participant_change_"+d("WAWebUserPrefsMeUser").getMaybeMeUser().toString(),a.id);if(!d("WAWebMsgGetters").getIsSentByMe(e)){switch(d("WAWebFrontendMsgGetters").getEventType(e)){case d("WAWebCommonMsgUtils").EventType.DEFAULT:case d("WAWebCommonMsgUtils").EventType.AMBIENT:d("WAWebFrontendMsgGetters").getEventType(e)===d("WAWebCommonMsgUtils").EventType.DEFAULT&&d("WAWebCmd").Cmd.alertNewMsg(e);a.msgs.length<d("WAWebCollectionConstants").MSG_PRELOAD_THRESHOLD&&!a.isNewsletter&&d("WAWebChatLoadMessages").loadEarlierMsgs(a,void 0,d("WAWebWamEnumWebcQueryTriggerType").WEBC_QUERY_TRIGGER_TYPE.NEW_MESSAGE_PREFETCH)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){}))["catch"](function(a){d("WALogger").LOG(i(),a)});break;case d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:(e.type===d("WAWebMsgType").MSG_TYPE.CALL_LOG||e.subtype==="sender_invite")&&d("WAWebCmd").Cmd.alertNewMsg(e);break;case d("WAWebCommonMsgUtils").EventType.SIGNIFICANT:if(e.type==="gp2"&&e.subtype==="add"&&d("WAWebUserPrefsMeUser").getMaybeMeUser().equals(e.recipients[0])&&!a.contact.name)return;d("WAWebCmd").Cmd.alertNewMsg(e);g=a.getGroupMetadataCollection();g.trigger("group_participant_change_"+d("WAWebUserPrefsMeUser").getMaybeMeUser().toString(),a.id);break;default:break}f=e.mediaData;f&&(f.type==="image"||f.type==="video")&&d("WAWebCmd").Cmd.newMediaMsg(e);b.unreadCount!=null&&b.unreadCount>0&&!l()&&d("WAWebHandleMsgReceiptCommon").processOrphanPeerReceipt(e.id);if(d("WAWebMsgGetters").getIsImportantMessage(e)){g=new(c("WAWebUnreadMentionModel"))({id:e.id.toString(),timestamp:e.t});(f=a.groupMetadata)==null?void 0:f.unreadMentionMetadata.addUnreadMentions(g,d("WAWebGroupUnreadMessageType").UnreadMessageType.NEW_MESSAGE);if(a.archiveAtMentionViewedInDrawer){b=new Map();b.set(a.id.toString(),!1);d("WAWebApiChat").updateChatArchiveDrawer(b);a.archiveAtMentionViewedInDrawer=!1}}}})}g.handleNewMsgForChat=a}),98);
__d("WAWebSendAddonMsgChatAction",["WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebSendMsgRecordAction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendMessage",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebSendMsgRecordAction").sendAddonRecord(a)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.addAndSendAddonToChat=a}),98);
__d("WAWebSendClearChatAction",["fbt","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebChatClearBridge","WAWebChatConstants","WAWebStateUtils","WAWebToastManager","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat:sendClear dropped"]);j=function(){return a};return a}var k=i||c("react");function a(a,b){return l(d("WAWebStateUtils").unproxy(a),b)}function l(a,c){var e=a.promises;if(e.sendClear)return e.sendClear;var f=a.getLastMsgKeyForAction();f=e.sendClear=d("WAWebChatClearBridge").sendClear(a,f,c);var g=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH___FX9j9by1V2__JHASH__")),i=f.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=b("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType;a.endOfHistoryTransferType=c.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY;return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__CpLIkkKTdUu__JHASH__"))}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){if(a.status>=400)return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__6uDz5kqblli__JHASH__"))}))["catch"](function(b){d("WALogger").WARN(j()).devConsole(b);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__6uDz5kqblli__JHASH__"),{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return l(a,c)}})});d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:g,pendingAction:i}));return f.then(function(b){b.result&&m(a,b.result)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(){}))["finally"](function(){e.sendClear=null})}function e(a,b){if(a){var c=a.getLastMsgKeyForAction();c=c?a.msgs.get(c):void 0;a.deleteMsgsBeforeMsgInclusive(c,b)}}function m(a,b){a&&b&&a.deleteMessages(b)}g.sendClear=a;g.clearChat=e}),226);
__d("WAWebBizShowOrderEphemeralSystemAction",["WAWebBizGatingUtils","WAWebDBChatEphemeralExemptionData","WAWebDBEphemeralDisplayedExemptions","WAWebOrderEphemeralExemptionUtil","WAWebOrderSystemMsg"],(function(a,b,c,d,e,f,g){function a(a,b){if(!d("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled())return null;var c=a.safe(),e=a.interactiveType;a=a.nativeFlowName;if(!d("WAWebOrderEphemeralExemptionUtil").isMessageTypeExemptedFromDisappearing(c.type,e,a))return null;c={id:b.id.toString(),ephemeralDuration:b.ephemeralDuration,ephemeralDisplayedExemptions:b.ephemeralDisplayedExemptions};if(d("WAWebOrderEphemeralExemptionUtil").shouldShowOrderExemptionSystemMessage(c)){b.ephemeralDisplayedExemptions=d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS;d("WAWebDBChatEphemeralExemptionData").persistsEphemeralDisplayedExemptions(b.id,b.ephemeralDuration,d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS);return d("WAWebOrderSystemMsg").getOrderEphemeralExemptionSystemMsg(b.id)}else d("WAWebOrderEphemeralExemptionUtil").shouldUnsetChatEphemeralDisplayedExemption(c)&&(b.ephemeralDisplayedExemptions=d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.UNSET,d("WAWebDBChatEphemeralExemptionData").persistsEphemeralDisplayedExemptions(b.id,b.ephemeralDuration,d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.UNSET));return null}g.getMaybeSystemMsgForOrderEphemeralExemption=a}),98);
__d("WAWebEmptyChatSystemMsg",["WAWebInitialSystemMsg","WAWebMsgGetters","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebMsgGetters").getIsGroupMsg(a)&&b.msgs.length===0){return c("WAWebInitialSystemMsg")(b.id,b.contact.privacyMode,(a=b.contact.businessProfile)==null?void 0:a.automatedType)}return null});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebSendMsgChatAction",["Promise","WAJobOrchestratorTypes","WATimeUtils","WAWebApiGroupInviteV4Store","WAWebBizAgentAction","WAWebBizShowOrderEphemeralSystemAction","WAWebDBRevokeInviteV4","WAWebEmptyChatSystemMsg","WAWebMessageSendPerfReporter","WAWebMessageSendReporter","WAWebMessageStore","WAWebMiscErrors","WAWebMsgCollection","WAWebMsgType","WAWebOrchestratorNonPersistedJob","WAWebPrivacyMode_WORKER_INCOMPATIBLE","WAWebSendMsgRecordAction","WAWebStateUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c){return i(d("WAWebStateUtils").unproxy(a),b,c)}function e(a,b){return j(d("WAWebStateUtils").unproxy(a),b)}function i(a,e,f){f===void 0&&(f=void 0);var g;e=(h||(h=b("Promise"))).resolve(e).then(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=b("WAWebMsgCollection").MsgCollection;e=babelHelpers["extends"]({},e);var h=d("WAWebPrivacyMode_WORKER_INCOMPATIBLE").getPrivacyModeFromModel(a.id);h!=null&&(e.privacyModeWhenSent=h);h=b("WAWebBizAgentAction");h=h.getAgentId;e.agentId=h(e);var i=f.add(e)[0];if(i){i.wamMessageSendReporter=new(d("WAWebMessageSendReporter").MessageSendReporter)(i);i.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:i.to,mediaType:i.getWamMediaType(),messageType:i.getWamMessageType()});g=(yield c("WAWebEmptyChatSystemMsg")(i,a));if(!g){h=d("WAWebBizShowOrderEphemeralSystemAction").getMaybeSystemMsgForOrderEphemeralExemption(i,a);h&&(g=[h])}f=g?[].concat(g,[e]):[e];(h=i.wamMessageSendPerfReporter)==null?void 0:h.startSavedStage();return d("WAWebMessageStore").storeMessages(f,a.id).then(function(a){(a=i.wamMessageSendPerfReporter)==null?void 0:a.postSavedStage();if(i.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE){var c=parseInt(i.inviteCodeExp,10);a=b("WAWebDBRevokeInviteV4").revokeGroupInviteV4;return a(i.from.toString(),i.to.toString(),i.inviteGrp,c).then(function(){return d("WAWebApiGroupInviteV4Store").persistGroupInviteV4Msg(i.id.toString(),{id:i.id.toString(),from:i.from.toString(),to:i.to.toString(),groupId:i.inviteGrp,expiration:c,expired:d("WATimeUtils").unixTime()>=c})})}}).then(function(){return i.waitForPrep().then(function(){return i})})}throw new(d("WAWebMiscErrors").ModelCreateError)("Msg",e)});return function(a){return e.apply(this,arguments)}}());var i=a.addQueue.enqueue(e).then(function(b){var c;(c=b.wamMessageSendPerfReporter)==null?void 0:c.startRenderedStage();g&&a.msgs.add(g);return a.msgs.add(b)[0]}).then(function(a){var b;(b=a.wamMessageSendPerfReporter)==null?void 0:b.postRenderedStage();return a});e=f?i.then(f).then(function(){return i}):i;f=j(a,e);return[i,f]}function j(a,c){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendMessage",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a.sendQueue.enqueue(c));return d("WAWebSendMsgRecordAction").sendMsgRecord(b)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.addAndSendMsgToChat=a;g.resendMsgToChat=e}),98);
__d("WAWebBlockContants",[],(function(a,b,c,d,e,f){a=Object.freeze({OneToOneOldSpamBannerBlock:"1_1_old_spam_banner_block",OneToOneSpamBannerBlock:"1_1_spam_banner_block",AccountInfo:"account_info",AccountInfoReport:"account_info_report",BizOldSpamBannerBlock:"biz_old_spam_banner_block",BizSpamBannerBlock:"biz_spam_banner_block",BlockHeaderChat:"block_header_chat",CallLog:"call_log",Chat:"chat",ChatListBlock:"chat_list_block",ChatListContextMenuBlock:"chat_list_context_menu_block",ChatListNoInsubBlock:"chat_list_noinsub_block",NotificationBlock:"notification_block",OverflowMenuBlock:"overflow_menu_block",OverflowMenuReport:"overflow_menu_report",Profile:"profile",TriggeredBlock:"triggered_block",BlockList:"block_list",MediaViewer:"media_viewer",MessageMenu:"message_menu",OneToOneChatSpamBannerReport:"1_1_spam_banner_report",StatusPostReport:"status_post_report",ChatFmxCardBlock:"chat_fmx_card_block",ChatFmxCardBlockSuspicious:"chat_fmx_card_block_suspicious",ChatFmxCardSafetyToolsBlock:"chat_fmx_card_safety_tools_block",ChatFmxCardSafetyToolsBlockSuspicious:"chat_fmx_card_safety_tools_block_suspicious",ChatFmxCardSafetyToolsReport:"chat_fmx_card_safety_tools_report",ChatFmxCardSafetyToolsReportSuspicious:"chat_fmx_card_safety_tools_report_suspicious",OneToOneBlockedChatComposer:"one_to_one_blocked_chat_composer"});b=Object.freeze({NoLongerNeeded:"no_longer_needed",NoSignUp:"no_sign_up",OffensiveMessages:"offensive_messages",Spam:"spam",Other:"other"});c=Object.freeze({False:"false",True:"true",None:"none"});d=Object.freeze({CatalogLink:"catalog_link",ClickToChatLink:"click_to_chat_link",Ctwa:"ctwa",MessageShortLink:"message_short_link",ProductLink:"product_link",QrCode:"qr_code"});f.BlockEntryPoint=a;f.BizOptOutReason=b;f.BizOptOutFirstMessage=c;f.BizOptOutBusinessDiscoveryEntryPoint=d}),66);
__d("WAWebBlocklistUtils",["WAWebABProps","WAWebBlockContants","WAWebSpamConstants","WAWebWamEnumBlockEntryPoint"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("rbi_show_consistent_block_dialog_all_entry_points")}function b(){return d("WAWebABProps").getABPropConfigValue("rbi_revamped_block_report_dialog_design")}function c(){return d("WAWebABProps").getABPropConfigValue("rbi_change_delete_behavior_block_report_flows")}function e(){return d("WAWebABProps").getABPropConfigValue("report_block_improvements_for_groups_enabled")}function f(a){switch(a){case d("WAWebBlockContants").BlockEntryPoint.OneToOneOldSpamBannerBlock:case d("WAWebBlockContants").BlockEntryPoint.BizOldSpamBannerBlock:return d("WAWebSpamConstants").SpamFlow.OneToOneOldSpamBannerBlock;case d("WAWebBlockContants").BlockEntryPoint.BizSpamBannerBlock:return d("WAWebSpamConstants").SpamFlow.BizSpamBannerBlock;case d("WAWebBlockContants").BlockEntryPoint.ChatListBlock:return d("WAWebSpamConstants").SpamFlow.ChatListBlock;case d("WAWebBlockContants").BlockEntryPoint.ChatListNoInsubBlock:return d("WAWebSpamConstants").SpamFlow.ChatListNoInsubBlock;case d("WAWebBlockContants").BlockEntryPoint.NotificationBlock:return d("WAWebSpamConstants").SpamFlow.NotificationBlock;case d("WAWebBlockContants").BlockEntryPoint.OverflowMenuBlock:return d("WAWebSpamConstants").SpamFlow.OverflowMenuBlock;default:return d("WAWebSpamConstants").SpamFlow.Block}}function h(a){switch(a){case d("WAWebSpamConstants").SpamFlow.OverflowMenuReport:return d("WAWebBlockContants").BlockEntryPoint.OverflowMenuReport;case d("WAWebSpamConstants").SpamFlow.MediaViewer:return d("WAWebBlockContants").BlockEntryPoint.MediaViewer;case d("WAWebSpamConstants").SpamFlow.MessageMenu:return d("WAWebBlockContants").BlockEntryPoint.MessageMenu;case d("WAWebSpamConstants").SpamFlow.AccountInfoReport:return d("WAWebBlockContants").BlockEntryPoint.AccountInfoReport;case d("WAWebSpamConstants").SpamFlow.OneToOneChatSpamBannerReport:return d("WAWebBlockContants").BlockEntryPoint.OneToOneChatSpamBannerReport;case d("WAWebSpamConstants").SpamFlow.ChatFmxCardSafetyToolsReport:return d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardSafetyToolsReport;case d("WAWebSpamConstants").SpamFlow.ChatFmxCardSafetyToolsReportSuspicious:return d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardSafetyToolsReportSuspicious;default:return null}}function i(a){if(a==null)return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.OTHER;switch(a){case d("WAWebBlockContants").BlockEntryPoint.OneToOneOldSpamBannerBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.ONE_TO_ONE_OLD_SPAM_BANNER_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.OneToOneSpamBannerBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.ONE_TO_ONE_SPAM_BANNER_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.AccountInfo:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.ACCOUNT_INFO;case d("WAWebBlockContants").BlockEntryPoint.AccountInfoReport:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.ACCOUNT_INFO_REPORT;case d("WAWebBlockContants").BlockEntryPoint.BizOldSpamBannerBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.BIZ_OLD_SPAM_BANNER_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.BizSpamBannerBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.BIZ_SPAM_BANNER_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.BlockHeaderChat:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.BLOCK_HEADER_CHAT;case d("WAWebBlockContants").BlockEntryPoint.CallLog:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CALL_LOG;case d("WAWebBlockContants").BlockEntryPoint.Chat:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT;case d("WAWebBlockContants").BlockEntryPoint.ChatListBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_LIST_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.ChatListContextMenuBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_LIST_CONTEXT_MENU_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.ChatListNoInsubBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_LIST_NOINSUB_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.NotificationBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.NOTIFICATION_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.OverflowMenuBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.OVERFLOW_MENU_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.OverflowMenuReport:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.OVERFLOW_MENU_REPORT;case d("WAWebBlockContants").BlockEntryPoint.Profile:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.PROFILE;case d("WAWebBlockContants").BlockEntryPoint.TriggeredBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.TRIGGERED_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.BlockList:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.BLOCK_LIST;case d("WAWebBlockContants").BlockEntryPoint.MediaViewer:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.MEDIA_VIEWER;case d("WAWebBlockContants").BlockEntryPoint.MessageMenu:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.MESSAGE_MENU;case d("WAWebBlockContants").BlockEntryPoint.OneToOneChatSpamBannerReport:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.ONE_TO_ONE_SPAM_BANNER_REPORT;case d("WAWebBlockContants").BlockEntryPoint.StatusPostReport:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.STATUS_POST_REPORT;case d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_FMX_CARD_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardBlockSuspicious:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_FMX_CARD_BLOCK_SUSPICIOUS;case d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardSafetyToolsBlock:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_FMX_CARD_SAFETY_TOOLS_BLOCK;case d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardSafetyToolsBlockSuspicious:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_FMX_CARD_SAFETY_TOOLS_BLOCK_SUSPICIOUS;case d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardSafetyToolsReport:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_FMX_CARD_SAFETY_TOOLS_REPORT;case d("WAWebBlockContants").BlockEntryPoint.ChatFmxCardSafetyToolsReportSuspicious:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.CHAT_FMX_CARD_SAFETY_TOOLS_REPORT_SUSPICIOUS;case d("WAWebBlockContants").BlockEntryPoint.OneToOneBlockedChatComposer:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.ONE_TO_ONE_BLOCKED_CHAT_COMPOSER;default:return d("WAWebWamEnumBlockEntryPoint").BLOCK_ENTRY_POINT.OTHER}}function j(a){switch(a){case d("WAWebBlockContants").BlockEntryPoint.Profile:return 1;case d("WAWebBlockContants").BlockEntryPoint.ChatListBlock:return 2;case d("WAWebBlockContants").BlockEntryPoint.BlockList:return 1;default:return null}}function k(a){switch(a){case d("WAWebBlockContants").BlockEntryPoint.Profile:return 3;case d("WAWebBlockContants").BlockEntryPoint.ChatListBlock:return 4;case d("WAWebBlockContants").BlockEntryPoint.BlockList:return 5;default:return null}}g.isRBIShowConsistentBlockDialogEnabled=a;g.isRBIRevampedBlockReportDesignEnabled=b;g.isRBIChangeDeleteBehaviorBlockReportFlowsEnabled=c;g.isRBIForGroupsEnabled=e;g.getSpamFlowFromBlockEntryPoint=f;g.getBlockEntryPointFromSpamFlow=h;g.getBlockEventMetricFromBlockEntryPoint=i;g.getBlockPsaRemoveEntryPointFromBlockEntryPoint=j;g.getUnblockPsaRemoveEntryPointFromBlockEntryPoint=k}),98);
__d("WAWebSendSpamChatAction",["fbt","Promise","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebBlockContactAction","WAWebBlocklistUtils","WAWebExitGroupAction","WAWebFrontendMsgGetters","WAWebMiscErrors","WAWebMsgModel","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebReportSpamJob","WAWebSendClearChatAction","WAWebSpamConstants","WAWebStateUtils","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat:sendNotSpam dropped"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["reportSpam dropped"]);l=function(){return a};return a}var m=j||c("react");function a(a){var b=a.spamFlow,c=a.chat,d=a.msg;a=a.msgType;return t({chat:c,spamFlow:b,msg:d,msgType:a})}function e(a,b){return u(d("WAWebStateUtils").unproxy(a),b)}function n(a,b){b===void 0&&(b=d("WAWebSpamConstants").SpamFlow.MessageMenu);a=d("WAWebStateUtils").unproxy(a);return t({chat:d("WAWebFrontendMsgGetters").getChat(a),spamFlow:b,msg:a})}function f(a,b){b===void 0&&(b=d("WAWebSpamConstants").SpamFlow.MessageMenu);a=new(d("WAWebMsgModel").Msg)(babelHelpers["extends"]({},d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(a),{type:d("WAWebMsgType").MSG_TYPE.CHAT,body:a.body}));return n(a,b)}function o(a,b){b===void 0&&(b=d("WAWebSpamConstants").SpamFlow.MessageMenu);return x(d("WAWebStateUtils").unproxy(a),b)}function p(a){var b=a.chat;a=a.spamFlow;return v(d("WAWebStateUtils").unproxy(b),a,!1)}function q(a,b){return v(d("WAWebStateUtils").unproxy(a),b)}function r(a,b){return w(d("WAWebStateUtils").unproxy(a),b)}function s(){return{couldntSendReportMsg:h._("__JHASH__FKNp-z_fTUk__JHASH__"),sendingReportMsg:h._("__JHASH__XvWts3hWJAU__JHASH__"),reportSentMsg:h._("__JHASH__oqeTG7jzPn7__JHASH__"),reportSentMsgV2:h._("__JHASH__oK0zzcV2WAZ__JHASH__"),reportNotSentMsg:h._("__JHASH__tCXjPjMAYH3__JHASH__"),tryAgainMsg:h._("__JHASH__QmNO2-eE5iu__JHASH__")}}function t(a){var c=a.spamFlow,e=a.chat,f=a.msg,g=a.toastId,h=g===void 0?d("WAWebActionToast.react").genId():g,j=a.msgType;g=s();a=g.sendingReportMsg;var k=g.couldntSendReportMsg,n=g.tryAgainMsg,o=g.reportSentMsg,p=g.reportSentMsgV2,q=g.reportNotSentMsg,r=(g=e==null?void 0:e.promises)!=null?g:null;if(r==null?void 0:r.sendSpamReport)return r.sendSpamReport;var u;if(j===d("WAWebMsgType").MSG_TYPE.STATUS_V3&&f!=null)u=d("WAWebReportSpamJob").reportStatus(c,f).then(function(a){if((a==null?void 0:a.errorCode)!=null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)});else{if(!r)return new(i||(i=b("Promise")))(function(){});f!=null?u=r.sendSpamReport=d("WAWebReportSpamJob").reportSpam(d("WAWebFrontendMsgGetters").getChat(f),c,f).then(function(a){if((a==null?void 0:a.errorCode)!=null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)}):e!=null&&(u=r.sendSpamReport=d("WAWebReportSpamJob").reportSpam(e,c).then(function(a){if((a==null?void 0:a.errorCode)!=null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)}))}if(!u)return new(i||(i=b("Promise")))(function(){});g=new(d("WAWebActionToast.react").ActionType)(a);a=u.then(function(){return new(d("WAWebActionToast.react").ActionType)(d("WAWebBlocklistUtils").isRBIRevampedBlockReportDesignEnabled()?p:o)},function(){return new(d("WAWebActionToast.react").ActionType)(q)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(){return new(d("WAWebActionToast.react").ActionType)(k)}))["catch"](function(a){d("WALogger").WARN(l()).devConsole(a);return new(d("WAWebActionToast.react").ActionType)(k,{actionText:n,actionHandler:function(){return t({chat:e,spamFlow:c,msg:f,toastId:h,msgType:j})}})});d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebActionToast.react").ActionToast,{id:h,initialAction:g,pendingAction:a}));return u["finally"](function(){(r==null?void 0:r.sendSpamReport)&&(r.sendSpamReport=null)})}function u(a,c,e){c===void 0&&(c=!1);e===void 0&&(e=d("WAWebActionToast.react").genId());var f=a.promises,g=a.notSpam;if(g)return(i||(i=b("Promise"))).resolve();if(f.sendNotSpam)return f.sendNotSpam;g=f.sendNotSpam=d("WAWebReportSpamJob").sendNotSpamJob(a);if(c){var j=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__awzjT8tsfpR__JHASH__")),l=g.then(function(){return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__2fekmmcZrTF__JHASH__"))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(){return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__bGQ0h7k3uA8__JHASH__"))}))["catch"](function(b){d("WALogger").WARN(k()).devConsole(b);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__bGQ0h7k3uA8__JHASH__"),{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return u(a,c,e)}})});d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebActionToast.react").ActionToast,{id:e,initialAction:j,pendingAction:l}))}return g.then(function(){a.set({notSpam:!0})})["finally"](function(){a.isTrusted(),f.sendNotSpam=null})}function v(a,c,e){e===void 0&&(e=!0);var f=a.promises,g=a.isGroup,h=a.contact;if(f.reportSpamBlockClear)return f.reportSpamBlockClear;if(g)return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());var j=d("WAWebBlocklistUtils").getBlockEntryPointFromSpamFlow(c);g=t({chat:a,spamFlow:c});f.reportSpamBlockClear=g.then(function(){return d("WAWebBlockContactAction").blockContact({contact:h,blockEntryPoint:j})}).then(function(){if(!e||d("WAWebBlocklistUtils").isRBIChangeDeleteBehaviorBlockReportFlowsEnabled())return;return d("WAWebSendClearChatAction").sendClear(a,!1)})["catch"](function(){})["finally"](function(){f.reportSpamBlockClear=null});return f.reportSpamBlockClear}function w(a,c){var e=a.promises,f=a.isGroup,g=a.isReadOnly;if(e.reportSpamExitClear)return e.reportSpamExitClear;if(!f)return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());f=t({chat:a,spamFlow:c});if(g)c=f;else{g=d("WAWebExitGroupAction").sendExitGroup(a);c=(i||(i=b("Promise"))).all([f,g])}e.reportSpamExitClear=c.then(function(){return d("WAWebSendClearChatAction").sendClear(a,!1)})["catch"](function(){})["finally"](function(){e.reportSpamExitClear=null});return e.reportSpamExitClear}function x(a,b){var c=a.senderObj,e=d("WAWebFrontendMsgGetters").getChat(a),f=e.promises;if(f.reportMessageBlock)return f.reportMessageBlock;var g=d("WAWebBlocklistUtils").getBlockEntryPointFromSpamFlow(b);e=t({chat:e,spamFlow:b,msg:a});f.reportMessageBlock=e.then(function(){return d("WAWebBlockContactAction").blockContact({contact:c,blockEntryPoint:g})})["catch"](function(){})["finally"](function(){f.reportMessageBlock=null});return f.reportMessageBlock}g.sendReport=a;g.sendNotSpam=e;g.sendMessageReport=n;g.sendCommentReport=f;g.sendMessageReportBlock=o;g.sendReportBlock=p;g.sendSpamBlockClear=q;g.sendSpamExitClear=r}),226);
__d("WAWebSendTcTokenChatAction",["WALogger","WATimeUtils","WAWebChatCollection","WAWebSchemaChat","WAWebSetPrivacyTokensJob","WAWebTrustedContactsUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendTcToken failed - ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isUserNotPSA()||a.isBot())return;var b=d("WAWebChatCollection").ChatCollection.get(a);if(b==null)return;if(!d("WAWebTrustedContactsUtils").shouldSendNewToken(b.tcTokenSenderTimestamp))return;try{var c=d("WATimeUtils").unixTime();yield d("WAWebSetPrivacyTokensJob").setPrivacyTokens(a,[d("WAWebSetPrivacyTokensJob").TokenType.TrustedContact],c);c={tcTokenSenderTimestamp:c};b.set(c);yield d("WAWebSchemaChat").getChatTable().merge(a.toString(),c)}catch(a){d("WALogger").WARN(h(),a).verbose().devConsole(a).sendLogs("send-tc-token-failed")}});return i.apply(this,arguments)}g.sendTcToken=a}),98);
__d("WAWebSendTextMsgChatAction",["WAJobOrchestratorTypes","WAWebABProps","WAWebBizAgentAction","WAWebBizBotTosUtils","WAWebBotGating","WAWebBotMessageSecret","WAWebBotProfileCollection","WAWebBotSystemMsg","WAWebEmptyChatSystemMsg","WAWebGetEphemeralFieldsMsgActionsUtils","WAWebMessagePluginGenerateReportingTokenContent","WAWebMessageSendPerfReporter","WAWebMessageSendReporter","WAWebMessageStore","WAWebMessagingGatingUtils","WAWebMsgDataUtils","WAWebMsgModel","WAWebMsgType","WAWebOrchestratorNonPersistedJob","WAWebPresenceChatAction","WAWebPrivacyMode_WORKER_INCOMPATIBLE","WAWebProductCatalogLogEvents","WAWebSendMsgRecordAction","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebValidateMediaKeyTimestamp","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c={});a=d("WAWebStateUtils").unproxy(a);b=(yield i(a,b,c));if(!b)return;yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(a);return k(a,b)});return h.apply(this,arguments)}function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e={});b=(b||"").trim();if(b==="")return null;var f=e,g=f.linkPreview,h=f.quotedMsg,i=f.mentionedJidList,j=f.groupMentions,k=f.quotedMsgAdminGroupJid,l=f.quotedMsgAdminGroupSubject,m=f.quotedMsgAdminParentGroupJid,n=f.selectedId,o=f.selectedIndex,p=f.selectedCarouselCardIndex,q=f.ctwaContext;f=f.encryptedCommentFields;d("WAWebPresenceChatAction").clearPresence(a);var r;h?r=h.msgContextInfo(a.id):k!=null&&l!=null&&m!=null?r={quotedRemoteJid:k,quotedGroupSubject:l,quotedParentGroupJid:m}:k!=null&&(r={quotedRemoteJid:k});l=g!=null&&g.mediaKeyTimestamp!=null&&!c("WAWebValidateMediaKeyTimestamp")(g.mediaKeyTimestamp)?c("lodash").omit(g,["mediaKey","mediaKeyTimestamp","thumbnailHQ","thumbnailDirectPath","thumbnailSha256","thumbnailEncSha256","thumbnailHeight","thumbnailWidth"]):g;m=c("lodash").defaults(yield d("WAWebMsgDataUtils").genOutgoingMsgData(a,"chat"),{body:b,subtype:l&&!c("lodash").isEmpty(l)?"url":null,urlText:a.urlText,urlNumber:a.urlNumber,botMsgBodyType:e.botMsgBodyType},l||{},r||{},{mentionedJidList:i},{groupMentions:j},{ctwaContext:q});a.urlText&&(a.urlText=void 0);a.urlNumber&&(a.urlNumber=void 0);o!=null&&(m.type="template_button_reply",m.selectedId=n,m.selectedIndex=o,m.selectedCarouselCardIndex=p);m.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL&&Object.assign(m,d("WAWebGetEphemeralFieldsMsgActionsUtils").getEphemeralFields(a));k=d("WAWebPrivacyMode_WORKER_INCOMPATIBLE").getPrivacyModeFromModel(a.id);k!=null&&(m.privacyModeWhenSent=k);m.agentId=d("WAWebBizAgentAction").getAgentId(m);if(d("WAWebBotGating").isBotEnabled()){g=i==null?void 0:i.find(function(a){return a.isBot()});if(g==null?void 0:g.isBot()){m.invokedBotWid=g;b=h==null?void 0:h.botTargetSenderJid;b!=null&&!d("WAWebUserPrefsMeUser").isMeAccount(b)&&(m.botTargetSenderJid=h==null?void 0:h.botTargetSenderJid)}}e=a.isCAGAdmin();l=m.subtype==="url"&&d("WAWebABProps").getABPropConfigValue("web_youtube_rcat_chat_generation_enabled");q=Boolean(d("WAWebBotGating").isBotEnabled()&&((j=m.invokedBotWid)==null?void 0:j.isBot()));n=Boolean(d("WAWebBotGating").isBotEnabled()&&m.to.isBot());o=d("WAWebMessagingGatingUtils").isReportingTokenSendingEnabled()&&d("WAWebMessagePluginGenerateReportingTokenContent").isMsgTypeReportingTokenCompatible(m.type,m.subtype);(e||l||q||n||o)&&(m.messageSecret=self.crypto.getRandomValues(new Uint8Array(32)));q&&(m.botMessageSecret=(yield d("WAWebBotMessageSecret").genBotMsgSecretFromMsgSecret(m.messageSecret)));if(q||n){var s;q?s=m.invokedBotWid:n&&(s=m.to);if(s!=null){k=(p=d("WAWebBotProfileCollection").BotProfileCollection.get(s))==null?void 0:p.personaId;k!=null&&(m.botPersonaId=k)}}h&&h.type===d("WAWebMsgType").MSG_TYPE.PRODUCT&&d("WAWebProductCatalogLogEvents").logProductMessageBusinessSend(h,h.sessionId);f&&(m.type=d("WAWebMsgType").MSG_TYPE.COMMENT,m.encIv=f==null?void 0:f.encIv,m.encPayload=f==null?void 0:f.encPayload,m.targetMessageKey=f==null?void 0:f.targetMessageKey);return m});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f,g,h=new(d("WAWebMsgModel").Msg)(e),i=d("WAWebBotSystemMsg").getMaybeSysMsgForBotInvoke(h,a);f=[].concat((f=(yield c("WAWebEmptyChatSystemMsg")(h,a)))!=null?f:[],[i]).filter(Boolean);h.wamMessageSendReporter=new(d("WAWebMessageSendReporter").MessageSendReporter)(h);h.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:h.to,mediaType:h.getWamMediaType(),messageType:h.getWamMessageType()});(g=h.wamMessageSendPerfReporter)==null?void 0:g.startRenderedStage();f.length>0&&a.msgs.add(f);a.msgs.add(h);(g=h.wamMessageSendPerfReporter)==null?void 0:g.postRenderedStage();var j=f.length>0?[].concat(f,[e]):[e];return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendMessage",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b;(b=h.wamMessageSendPerfReporter)==null?void 0:b.startSavedStage();yield d("WAWebMessageStore").storeMessages(j,a.id);i&&(yield a.updateBotInvokeSystemMsgCreated());(b=h.wamMessageSendPerfReporter)==null?void 0:b.postSavedStage();b=(yield d("WAWebSendMsgRecordAction").sendMsgRecord(h));return b}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()});return l.apply(this,arguments)}g.sendTextMsgToChat=a;g.createTextMsgData=i;g.addAndSendTextMsg=k}),98);
__d("WAWebSendUnstarAllChatAction",["fbt","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebChatCollection","WAWebChatSendStarMsgsBridge","WAWebStarredMsgCollection","WAWebStateUtils","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat:sendUnstarAll dropped"]);j=function(){return a};return a}var k=i||c("react");function a(a,b){return l(a,b?d("WAWebStateUtils").unproxy(b):b)}function l(a,c){var e=b("WAWebChatCollection").ChatCollection,f=c?c.promises:e.promises,g=c?c.id:void 0;if(f.sendUnstarAll)return f.sendUnstarAll;g=f.sendUnstarAll=d("WAWebChatSendStarMsgsBridge").sendUnstarAll(a,g);var i=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__V6xylXkMOyw__JHASH__")),m=g.then(function(){return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__kz5Q7OxqYRl__JHASH__"))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){if(a.statusCode>=400)return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__a9OzUiPQ54A__JHASH__"))}))["catch"](function(b){d("WALogger").WARN(j()).devConsole(b);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__a9OzUiPQ54A__JHASH__"),{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return l(a,c)}})});d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:i,pendingAction:m}));return g.then(function(){a.forEach(function(a){a.set("star",!1)}),c?d("WAWebStarredMsgCollection").removeStarredMsgs(a):(d("WAWebStarredMsgCollection").AllStarredMsgsCollection.reset(),e.forEach(function(a){a.starredMsgs&&a.starredMsgs.reset()}))})["finally"](function(){f.sendUnstarAll=null})}g.unstarAllMessages=a}),226);
__d("WAWebDraftMessageChatGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("web_draft_message_enabled")}g.draftMessageEnabled=a}),98);
__d("WAWebUpdateDraftMessageChatJob",["WAAbortError","WAJobOrchestratorTypes","WAWebDBChatSerialization","WAWebDBUpdateChatTable","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatId,c=a.draftMessage;a=a.abortSignal;b=d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateDraftMessageChat",function(a){if(a.abortSignal.aborted)throw new(d("WAAbortError").AbortError)();return d("WAWebDBUpdateChatTable").updateChatTable(a.chatId,d("WAWebDBChatSerialization").serializeChat({draftMessage:a.draftMessage}))},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({chatId:b,draftMessage:c,abortSignal:a});yield b});return h.apply(this,arguments)}g.updateDraftMessageChat=a}),98);
__d("WAWebUpdateDraftMessageChatAction",["Promise","WALogger","WAWebChatCollection","WAWebDraftMessageChatGatingUtils","WAWebNewsletterCollection","WAWebUpdateDraftMessageChatJob","WAWebWid"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[draft-message] update is disabled, "," draft message cannot be updated"]);i=function(){return a};return a}function a(a,e){if(!d("WAWebDraftMessageChatGatingUtils").draftMessageEnabled()){d("WALogger").DEV(i(),a.toString());return(h||(h=b("Promise"))).resolve()}var f=b("WAWebChatCollection");f=f.ChatCollection;var g=b("WAWebNewsletterCollection"),j=c("WAWebWid").isNewsletter(a)?g.get(a):f.get(a);g=new AbortController();var k=d("WAWebUpdateDraftMessageChatJob").updateDraftMessageChat({chatId:a,draftMessage:e,abortSignal:g.signal});k["finally"](function(){if(j){var a;(j==null?void 0:(a=j.promises.updateDraftMessage)==null?void 0:a.promise)===k&&(j.promises.updateDraftMessage=null)}});if(j){f=j.promises;f.updateDraftMessage!=null&&f.updateDraftMessage.abortController.abort();j.draftMessage=e;j.promises.updateDraftMessage={promise:k,abortController:g}}return k}g.updateDraftMessageChat=a}),98);
__d("WAWebUpdateLastAddOnPreviewChatAction",["WAWebChatCollection","WAWebMsgKey","WAWebNewsletterCollection","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a){var d=b("WAWebChatCollection").ChatCollection,e=b("WAWebNewsletterCollection");a.forEach(function(a,b){b=c("WAWebWid").isNewsletter(b)?e.get(b):d.get(b);if(b==null)return;b.set({chatlistPreview:a,lastReactionPreview:void 0})})}function d(a){var d=new Set(a.map(function(a){return c("WAWebMsgKey").fromString(a).remote.toString()})),e=b("WAWebChatCollection").ChatCollection;d.forEach(function(b){var c;b=e.get(b);if(b==null)return;a.includes((c=b.chatlistPreview)==null?void 0:c.parentMsgKey)&&b.unset(["chatlistPreview","lastReactionPreview"])})}g.updateModelsForLastAddOnPreview=a;g.deleteModelsForLastAddOnPreview=d}),98);
__d("WAWebUpdateUnreadChatAction",["fbt","Promise","WAFilteredCatch","WALogger","WAPromiseQueue","WAShiftTimer","WAWebABProps","WAWebActionToast.react","WAWebApiChat","WAWebBackendErrors","WAWebChatSeenBridge","WAWebCmd","WAWebConstantsDeprecated","WAWebDBUpdateChatTable","WAWebSendReadReceiptJob","WAWebStateUtils","WAWebStreamModel","WAWebToastManager","asyncToGeneratorRuntime","err","gkx","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendSeen: got status ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/send-seen] ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chat:sendSeen unread "," pending: "," delta: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[update-unread]: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["markUnread: got status ",""]);o=function(){return a};return a}var p=j||c("react");function a(a,b,c){c===void 0&&(c=!0);return u(d("WAWebStateUtils").unproxy(a),b,c)}function e(){var a=null,c=new(d("WAShiftTimer").ShiftTimer)(function(b){var c=b.chat_;b=b.afterAvailable;void r(c,b);a=null});return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){if(a!=null){var f=a,g=f[0];f=f[1];var h=g.id.toString(),i=b.id.toString();h!==i&&(c.cancel(),void r(g,f),a=null)}if(!c.isScheduled()){h=d("WAWebABProps").getABPropConfigValue("web_resume_optimized_read_receipt_send_interval");c.onOrAfter(h,{chat_:b,afterAvailable:e})}a=[b,e]});return function(a,b){return e.apply(this,arguments)}}()}var q=e();e=function(a,b){b===void 0&&(b=!0);return!d("WAWebCmd").Cmd.isOfflineDeliveryEnd?q(a,b):r(a,b)};function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=!0);a=d("WAWebStateUtils").unproxy(a);yield (i||(i=b("Promise"))).all([w(a,c),H(a,c)])["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){d("WALogger").WARN(k(),a.status)}))});return s.apply(this,arguments)}function f(a,b,c){return z(d("WAWebStateUtils").unproxy(a),b,c)}function t(a){B(d("WAWebStateUtils").unproxy(a))}function u(a,e,f,g){g===void 0&&(g=d("WAWebActionToast.react").genId());!e?a.markedUnread=!1:a.active&&(a.markedUnread=!0);var j=a.promises;if(j.markUnread)return j.markUnread;var k=j.markUnread=e?x(a):(i||(i=b("Promise"))).all([w(a),H(a)]),l=e?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__sLYL8wRHKTT__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__TXAeK3_flMj__JHASH__")),m=k.then(function(){var b=e?h._("__JHASH__Rs6rZ_F_Rtu__JHASH__"):h._("__JHASH__X-XSG5EW21V__JHASH__");return!f?new(d("WAWebActionToast.react").ActionType)(b):new(d("WAWebActionToast.react").ActionType)(b,{actionText:h._("__JHASH__mpD8GydGn1Q__JHASH__"),actionHandler:function(){return u(a,!e,f,g)}})})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){if(a.status>=400)return e?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__b6TQJf-tGrq__JHASH__")):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__9SBZLQI4bQu__JHASH__"));throw c("err")("invalid response status")}))["catch"](function(){var b=e?h._("__JHASH__b6TQJf-tGrq__JHASH__"):h._("__JHASH__9SBZLQI4bQu__JHASH__");return!f?new(d("WAWebActionToast.react").ActionType)(b):new(d("WAWebActionToast.react").ActionType)(b,{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return u(a,e,f,g)}})});d("WAWebToastManager").ToastManager.open(p.jsx(d("WAWebActionToast.react").ActionToast,{id:g,initialAction:l,pendingAction:m}));return k.then(function(){})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){d("WALogger").WARN(o(),a.status)}))["finally"](function(){j.markUnread=null})}function v(a){c("gkx")("26258")||d("WALogger").LOG(n(),a)}function w(a,e){e===void 0&&(e=!0);v("sendSeen: start");if(a.markedUnread||a.unreadCount===0){v("markedUnread: "+String(a.markedUnread));v("unreadCount: "+a.unreadCount);v("sendSeen: end-1");return(i||(i=b("Promise"))).resolve()}if(!d("WAWebStreamModel").Stream.available&&e){v("stream unavailable");a.listenToOnce(d("WAWebStreamModel").Stream,"change:available",function(){return w(a)});v("sendSeen: end-2");return(i||(i=b("Promise"))).resolve()}v("stream available");v("unreadCount: "+a.unreadCount);v("pendingSeenCount: "+a.pendingSeenCount);var f=a.unreadCount-a.pendingSeenCount;v("unreadCountDelta: "+f);e=a.unreadCount===-1&&f===-1;if(f<=0&&!e){v("sendSeen: end-3");return(i||(i=b("Promise"))).resolve()}a.disableUnreadAnchor=!0;a.pendingSeenCount=a.unreadCount;v("pendingSeenCount set to: "+a.unreadCount);var g=function(){a.pendingSeenCount-=f,v("pendingSeenCount set to "+a.pendingSeenCount),a.pendingSeenCount<0&&(d("WALogger").WARN(m(),a.unreadCount,a.pendingSeenCount,f),a.pendingSeenCount=0)};e=c("gkx")("26258")?a.getLastMsgKeyForAction():a.lastReceivedKey;return d("WAWebChatSeenBridge").sendConversationSeen(a,e,f).then(function(){C(a,f)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){g();return(i||(i=b("Promise"))).reject(a)})).then(function(){v("sendSeen: end-4")})}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.getLastMsgKeyForAction();try{yield d("WAWebChatSeenBridge").sendConversationUnseen(a.id,c),t(a)}catch(c){return d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(c){a.markedUnread=!1;return(i||(i=b("Promise"))).reject(c)})(c)}});return y.apply(this,arguments)}function z(a,b,c){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e===void 0&&(e=!1);v("markSeen: start - "+String(c));var f=null;c!=null?c>0&&c<=a.unreadCount?f=a.unreadCount-c:c===-1&&(a.unreadCount<=0&&(f=0)):f=0;var g=f==null?(i||(i=b("Promise"))).resolve():d("WAWebChatSeenBridge").markConversationSeen(a.id,f);yield g;if(c!=null&&e){g=a.pendingSeenCount-c;a.pendingSeenCount=Math.max(0,g);v("pendingSeenCount set to "+a.pendingSeenCount)}f!=null&&(a.unreadCount=f,v("unreadCount set to "+f));a.unreadMsgAnchor=void 0;a.markedUnread=!1;a.unreadDividerOffset=0;v("markSeen: end")});return A.apply(this,arguments)}function B(a){(a.unreadCount===0||a.unreadCount===c("WAWebConstantsDeprecated").MARKED_AS_UNREAD)&&(a.active&&(a.markedUnread=!0),d("WAWebChatSeenBridge").markConversationUnseen(a.id).then(function(){a.unreadCount=c("WAWebConstantsDeprecated").MARKED_AS_UNREAD}))}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=!0);var e=(yield d("WAWebApiChat").getChatMeta(a.id));e=e.unreadCount;v("updateUnreadCount: old "+a.unreadCount+", new "+e);a.unreadCount=e;a.unreadDividerOffset=0;a.unreadMsgAnchor=void 0;a.markedUnread=!1;if(c){e=a.pendingSeenCount-b;a.pendingSeenCount=Math.max(0,e)}});return D.apply(this,arguments)}function E(a){if(a.isGroup){(a=a.groupMetadata)==null?void 0:a.unreadMentionMetadata.reset()}}function F(a){c("gkx")("26258")||d("WALogger").LOG(l(),a)}var G=new(d("WAPromiseQueue").PromiseQueue)();function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=!0);if(a.unreadEditTimestampMs==null)return;F("sendSeen: start - "+String(a.unreadEditTimestampMs));if(!d("WAWebStreamModel").Stream.available&&c){a.listenToOnce(d("WAWebStreamModel").Stream,"change:available",function(){return H(a)});F("sendSeen: end - stream unavailable");return}var e=a.unreadEditTimestampMs;yield G.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(a.unreadEditTimestampMs==null){F("sendSeen: end - no unread edits");return}yield d("WAWebSendReadReceiptJob").markEditedMsgsRead(a.id,{trusted:a.trusted});F("sendSeen: marked edit as read");if(e!==a.unreadEditTimestampMs){F("sendSeen: end - has new unread edits");return}a.unreadEditTimestampMs=null;d("WAWebDBUpdateChatTable").updateChatTable(a.id,{unreadEditTimestampMs:null});F("sendSeen: end - all edits are marked as read")}))});return I.apply(this,arguments)}g.markUnread=a;g.sendSeenDebounced=e;g.sendSeen=r;g.markSeen=f;g.markUnseen=t;g.updateUnreadCountMD=C;g.clearUnreadMentions=E}),226);
__d("WAWebCommunityActionsCircularDependencyBreaker",["WAWebChatCollection","WAWebGroupMetadataCollection","WAWebUnjoinedSubgroupMetadataCollection"],(function(a,b,c,d,e,f){function a(){return b("WAWebChatCollection").ChatCollection}function c(){return b("WAWebGroupMetadataCollection")}function d(){return b("WAWebUnjoinedSubgroupMetadataCollection")}f.chatCollection=a;f.groupMetaDataCollection=c;f.unjoinedSubgroupMetaDataCollection=d}),66);
__d("WAWebUpdateSubgroupsCommunityAction",["WAWebApiUnjoinedSubgroupMetadataStore","WAWebCommunityActionsCircularDependencyBreaker","WAWebGroupQueryBridge","WAWebGroupUnjoinedSubgroupJob"],(function(a,b,c,d,e,f,g){function h(a){a.joinedSubgroups=d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().filter(function(b){var c;return((c=b.parentGroup)==null?void 0:c.equals(a.id))&&b.participants.iAmMember()}).map(function(a){return a.id})}function i(a){a.unjoinedSubgroups=d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().filter(function(b){return b.parentGroupId.equals(a.id)}).map(function(a){return a.id})}function a(a,b){d("WAWebApiUnjoinedSubgroupMetadataStore").removeUnjoinedSubgroupMetadataFromStorage(b),j(b),i(a),h(a)}function b(a,b){d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().add({id:b,parentGroup:null},{merge:!0}),h(a)}function c(a,b){var c=d("WAWebCommunityActionsCircularDependencyBreaker").chatCollection().get(b.toString()),e=c==null?void 0:c.groupMetadata;if(c==null||e==null)return;h(a);if(e.participants.length===0)return;if(!a.hasJoined())return;b={id:b,subject:c.formattedTitle,defaultSubgroup:!!e.defaultSubgroup,generalSubgroup:!!e.generalSubgroup,parentGroupId:a.id};d("WAWebGroupUnjoinedSubgroupJob").updateUnjoinedSubgroupsJob([b],a.id);k([b],a.id)}function j(a){d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().remove(a.toString())}function k(a,b,c){c===void 0&&(c=!0);a.forEach(function(a){if(!c){j(a.id);return}var e=a.subject,f=a.subjectTime,g=d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().get(a.id.toString());g&&(g.subjectTime||0)>(f||0)&&(e=g.subject,f=g.subjectTime);d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().add(babelHelpers["extends"]({},a,{parentGroupId:b,subject:e,subjectTime:f}),{merge:!0})});a=d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().get(b.toString());a&&i(a)}function e(a,b){var c=d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().filter(function(a){return a.parentGroupId.equals(b)}).map(function(a){return a.id});c=c.filter(function(b){return!a.includes(b)});d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().remove(c)}function f(a,b,c){c===void 0&&(c=!0),a.forEach(function(a){var e=a.id,f=a.subject;f!=null&&d("WAWebGroupQueryBridge").updateSubject(e,f);d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().add(babelHelpers["extends"]({},a,{parentGroup:c?b:null,generalSubgroup:c?a.generalSubgroup:null}),{merge:!0})}),h(d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().assertGet(b.toString()))}function l(a){a=d("WAWebCommunityActionsCircularDependencyBreaker").chatCollection().get(a.toString());return a==null||!((a=a.groupMetadata)==null?void 0:a.participants.iAmMember())}function m(a){return a.filter(function(a){return l(a)})}function n(a){var b=m(a.map(function(a){a=a.id;return a}));return a.filter(function(a){return b.includes(a.id)})}g.updateJoinedSubgroups=h;g.updateUnjoinedSubgroups=i;g.subgroupUnjoinedToJoined=a;g.unlinkParentGroup=b;g.subgroupJoinedToUnjoined=c;g.updateUnjoinedSubgroupsInCollection=k;g.cleanUnjoinedSubgroupsInCollection=e;g.updateJoinedSubgroupsInCollection=f;g.determineUnjoined=l;g.getUnjoinedSubgroups=n}),98);
__d("WASmaxInBlocklistsIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"field");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"reason");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,reason:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"field",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,field:b.value})}g.parseIQErrorNotAcceptableField=h;g.parseIQErrorNotAcceptableMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup",["WAResultOrError","WASmaxInBlocklistsIQErrorBadRequestMixin","WASmaxInBlocklistsIQErrorForbiddenMixin","WASmaxInBlocklistsIQErrorNotAcceptableMixin","WASmaxInBlocklistsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBlocklistsIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:b.value});var c=d("WASmaxInBlocklistsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value});var e=d("WASmaxInBlocklistsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:e.value});var f=d("WASmaxInBlocklistsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorNotAcceptable","IQErrorBadRequest","IQErrorForbidden","IQErrorRateOverlimit"],[b,c,e,f])}g.parseIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup=a}),98);
__d("WASmaxInBlocklistsUpdateBlockListResponseInvalidRequest",["WAResultOrError","WASmaxInBlocklistsIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup","WASmaxInBlocklistsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBlocklistsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBlocklistsIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup").parseIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup:b.value}))}g.parseUpdateBlockListResponseInvalidRequest=a}),98);
__d("WASmaxInBlocklistsUpdateBlockListResponseServerError",["WAResultOrError","WASmaxInBlocklistsIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup","WASmaxInBlocklistsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBlocklistsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBlocklistsIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup").parseIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup:b.value}))}g.parseUpdateBlockListResponseServerError=a}),98);
__d("WASmaxInBlocklistsUpdateBlockListResponseSuccessWithMatch",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"matched","true");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(c.value,"dhash");return!a.success?a:d("WAResultOrError").makeResult({type:e.value,listMatched:b.value,listDhash:a.value})}g.parseUpdateBlockListResponseSuccessWithMatch=a}),98);
__d("WASmaxInBlocklistsUpdateBlockListResponseSuccessWithMismatch",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"item");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;var f=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!f.success)return f;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",f.value);if(!a.success)return a;f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"matched","false");if(!f.success)return f;a=d("WASmaxParseReference").optionalAttrStringFromReference(b,["item","dhash"]);if(!a.success)return a;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,c.value,"c_dhash",a.value);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(c.value,"dhash");if(!a.success)return a;c=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"item",0,64e3,h);return!c.success?c:d("WAResultOrError").makeResult({type:e.value,listMatched:f.value,hasListCDhash:b.value!=null,listDhash:a.value,listItem:c.value})}g.parseUpdateBlockListResponseSuccessWithMismatchListItem=h;g.parseUpdateBlockListResponseSuccessWithMismatch=a}),98);
__d("WASmaxOutBlocklistsUpdateBlockListReportBlockEntryPointMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.entryPointSource;a=d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("entry_point",{source:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeUpdateBlockListReportBlockEntryPointMixin=a}),98);
__d("WASmaxOutBlocklistsUpdateBlockListRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutBlocklistsUpdateBlockListReportBlockEntryPointMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.bizOptOutReason,f=a.bizOptOutReasonDescription,g=a.bizOptOutEntryPoint,h=a.bizOptOutFirstMessage,i=a.bizOptOutBusinessDiscoveryEntryPoint,j=a.bizOptOutBusinessDiscoveryTimestamp;a=a.bizOptOutBusinessDiscoveryId;e=d("WASmaxJsx").smax("biz_opt_out",{reason:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,e),reason_description:b.OPTIONAL(c.CUSTOM_STRING,f),entry_point:b.OPTIONAL(c.CUSTOM_STRING,g),first_message:b.OPTIONAL(c.CUSTOM_STRING,h),business_discovery_entry_point:b.OPTIONAL(c.CUSTOM_STRING,i),business_discovery_timestamp:b.OPTIONAL(c.INT,j),business_discovery_id:b.OPTIONAL(c.CUSTOM_STRING,a)});return e}function a(a){var b,c=a.bizOptOutArgs,e=a.updateBlockListReportBlockEntryPointMixinArgs,f=a.itemAction,g=a.itemJid;a=a.itemDhash;f=d("WASmaxMixins").optionalMerge(d("WASmaxOutBlocklistsUpdateBlockListReportBlockEntryPointMixin").mergeUpdateBlockListReportBlockEntryPointMixin,d("WASmaxJsx").smax("iq",{to:(b=d("WAWap")).S_WHATSAPP_NET,xmlns:"blocklist",type:"set",id:b.generateId()},d("WASmaxJsx").smax("item",{action:b.CUSTOM_STRING(f),jid:b.USER_JID(g),dhash:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,a)},d("WASmaxChildren").OPTIONAL_CHILD(h,c))),e);return f}g.makeUpdateBlockListRequestItemBizOptOut=h;g.makeUpdateBlockListRequest=a}),98);
__d("WASmaxBlocklistsUpdateBlockListRPC",["WAComms","WASmaxInBlocklistsUpdateBlockListResponseInvalidRequest","WASmaxInBlocklistsUpdateBlockListResponseServerError","WASmaxInBlocklistsUpdateBlockListResponseSuccessWithMatch","WASmaxInBlocklistsUpdateBlockListResponseSuccessWithMismatch","WASmaxOutBlocklistsUpdateBlockListRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d("WASmaxOutBlocklistsUpdateBlockListRequest").makeUpdateBlockListRequest(a);k.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=k.sent;g=d("WASmaxInBlocklistsUpdateBlockListResponseSuccessWithMatch").parseUpdateBlockListResponseSuccessWithMatch(f,e);if(!g.success){k.next=7;break}return k.abrupt("return",{name:"UpdateBlockListResponseSuccessWithMatch",value:g.value});case 7:h=d("WASmaxInBlocklistsUpdateBlockListResponseSuccessWithMismatch").parseUpdateBlockListResponseSuccessWithMismatch(f,e);if(!h.success){k.next=10;break}return k.abrupt("return",{name:"UpdateBlockListResponseSuccessWithMismatch",value:h.value});case 10:i=d("WASmaxInBlocklistsUpdateBlockListResponseInvalidRequest").parseUpdateBlockListResponseInvalidRequest(f,e);if(!i.success){k.next=13;break}return k.abrupt("return",{name:"UpdateBlockListResponseInvalidRequest",value:i.value});case 13:j=d("WASmaxInBlocklistsUpdateBlockListResponseServerError").parseUpdateBlockListResponseServerError(f,e);if(!j.success){k.next=16;break}return k.abrupt("return",{name:"UpdateBlockListResponseServerError",value:j.value});case 16:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("UpdateBlockList",{SuccessWithMatch:g,SuccessWithMismatch:h,InvalidRequest:i,ServerError:j}));case 17:case"end":return k.stop()}},null,this)}g.sendUpdateBlockListRPC=a}),98);
__d("WASmaxInPsaIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup",["WAResultOrError","WASmaxInPsaIQErrorInternalServerErrorMixin","WASmaxInPsaIQErrorRequestTimeoutMixin","WASmaxInPsaIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPsaIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInPsaIQErrorRequestTimeoutMixin").parseIQErrorRequestTimeoutMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorRequestTimeout",value:c.value});var e=d("WASmaxInPsaIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorRequestTimeout","IQErrorServiceUnavailable"],[b,c,e])}g.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup=a}),98);
__d("WASmaxInPsaChatBlockSetResponseServerError",["WAResultOrError","WASmaxInPsaIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup","WASmaxInPsaIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPsaIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPsaIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup").parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup:b.value}))}g.parseChatBlockSetResponseServerError=a}),98);
__d("WASmaxInPsaChatBlockSetResponseSuccess",["WAResultOrError","WASmaxInPsaEnums","WASmaxInPsaIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"blocking");if(!c.success)return c;c=d("WASmaxParseUtils").attrStringEnum(c.value,"status",d("WASmaxInPsaEnums").ENUM_BLOCKED_UNBLOCKED);if(!c.success)return c;a=d("WASmaxInPsaIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({blockingStatus:c.value},a.value))}g.parseChatBlockSetResponseSuccess=a}),98);
__d("WASmaxOutPsaBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutPsaChatBlockSetRequest",["WASmaxJsx","WASmaxOutPsaBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.blockingAction;a=d("WASmaxOutPsaBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"w:comms:chat"},d("WASmaxJsx").smax("blocking",{action:d("WAWap").CUSTOM_STRING(a)})));return a}g.makeChatBlockSetRequest=a}),98);
__d("WASmaxPsaChatBlockSetRPC",["WAComms","WASmaxInPsaChatBlockSetResponseServerError","WASmaxInPsaChatBlockSetResponseSuccess","WASmaxOutPsaChatBlockSetRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutPsaChatBlockSetRequest").makeChatBlockSetRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInPsaChatBlockSetResponseSuccess").parseChatBlockSetResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"ChatBlockSetResponseSuccess",value:g.value});case 7:h=d("WASmaxInPsaChatBlockSetResponseServerError").parseChatBlockSetResponseServerError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"ChatBlockSetResponseServerError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ChatBlockSet",{Success:g,ServerError:h}));case 11:case"end":return i.stop()}},null,this)}g.sendChatBlockSetRPC=a}),98);
__d("WAWebBlockUserJob",["WALogger","WASmaxBlocklistsUpdateBlockListRPC","WASmaxPsaChatBlockSetRPC","WAWebUserPrefsMultiDevice","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["block/unblock ",": success"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["blockUnblockUser: server response with ",", ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["blockUnblockUser: server response with ",", ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["blockUnblockPSAUser: server response with ",", ",""]);k=function(){return a};return a}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a={blockingAction:a?"block":"unblock"};a=(yield d("WASmaxPsaChatBlockSetRPC").sendChatBlockSetRPC(a));switch(a.name){case"ChatBlockSetResponseServerError":var b=a.value.errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup.value,c=b.code;b=b.text;d("WALogger").WARN(k(),c,b);return{errorCode:Number(c),errorText:b};default:a.name}});return m.apply(this,arguments)}function n(a){return a==null?null:{bizOptOutReason:a.reason,bizOptOutReasonDescription:a.reasonDescription,bizOptOutEntryPoint:a.entryPoint,bizOptOutFirstMessage:a.firstMessage,bizOptOutBusinessDiscoveryEntryPoint:a.businessDiscoveryEntryPoint,bizOptOutBusinessDiscoveryTimestamp:a.businessDiscoveryTimestamp,bizOptOutBusinessDiscoveryId:a.businessDiscoveryId}}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAWebUserPrefsMultiDevice").getBlocklistHash()),f=n(c);f={bizOptOutArgs:f!=null?f:null,itemAction:b?"block":"unblock",itemJid:d("WAWebWidToJid").widToUserJid(a),itemDhash:e!=null?e:null};b=(yield d("WASmaxBlocklistsUpdateBlockListRPC").sendUpdateBlockListRPC(f));switch(b.name){case"UpdateBlockListResponseInvalidRequest":a=b.value.errorIQErrorNotAcceptableOrBadRequestOrForbiddenOrRateOverlimitMixinGroup.value;e=a.code;f=a.text;d("WALogger").WARN(j(),e,f);return{errorCode:Number(e),errorText:f};case"UpdateBlockListResponseServerError":a=b.value.errorIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup.value;e=a.code;f=a.text;d("WALogger").WARN(i(),e,f);return{errorCode:Number(e),errorText:f};default:b.name,d("WALogger").LOG(h(),c!=null?"biz":"user")}});return p.apply(this,arguments)}function a(a,b){return a.isPSA()?l(!0):o(a,!0,b)}function c(a){return a.isPSA()?l(!1):o(a,!1)}g.blockUser=a;g.unblockUser=c}),98);
__d("WAWebUpdateBlocklistDbJob",["WALogger","WAWebQueryBlockListJob","WAWebSchemaBlocklist","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateBlocklistDbJob failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to update blocking status of psa user"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebQueryBlockListJob").getBlockingStatusForPSAUser());try{if(b){yield k(a,!0);return!0}yield k(a,!1);return!1}catch(a){d("WALogger").ERROR(i()).verbose().devConsole(a).sendLogs("Failed to update blocking status of psa user");throw c("err")("failed to update blocking status of psa user")}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.toString();try{b?yield d("WAWebSchemaBlocklist").getBlocklistTable().createOrReplace({id:a}):yield d("WAWebSchemaBlocklist").getBlocklistTable().remove(a)}catch(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to update blocklist db");throw c("err")("updateBlocklistDbJob failed")}});return l.apply(this,arguments)}g.updateBlockingStatusForPSAUser=a;g.updateBlocklistDbJob=k}),98);
__d("WAWebBlockContactAction",["fbt","Promise","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebBlockUserJob","WAWebBlocklistCollection","WAWebBlocklistUtils","WAWebFrontendContactGetters","WAWebStateUtils","WAWebToastManager","WAWebUpdateBlocklistDbJob","WAWebWamBlockEventReporter","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["action:setBlock dropped"]);k=function(){return a};return a}var l=j||c("react");function a(a){var b=a.contact,c=a.blockEntryPoint;a=a.bizOptOutArgs;c=d("WAWebBlocklistUtils").getBlockEventMetricFromBlockEntryPoint(c);d("WAWebWamBlockEventReporter").logBlockEvent({contact:b,blockEntryPoint:c,isBlock:!0});return n(d("WAWebStateUtils").unproxy(b),!0,a)}function e(a,b){b=d("WAWebBlocklistUtils").getBlockEventMetricFromBlockEntryPoint(b);d("WAWebWamBlockEventReporter").logBlockEvent({contact:a,blockEntryPoint:b,isBlock:!1});return n(d("WAWebStateUtils").unproxy(a),!1)}function f(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebUpdateBlocklistDbJob").updateBlockingStatusForPSAUser(a));a=a;b?d("WAWebBlocklistCollection").BlocklistCollection.add({id:a}):d("WAWebBlocklistCollection").BlocklistCollection.remove(a)});return m.apply(this,arguments)}function n(a,c,e,f){var g=a.id,h=a.phoneNumber,j=c&&g.isLid(),k=j&&h!=null?h:g;j=a.isContactBlocked;h=c&&j;g=!c&&!j;if(h||g)return(i||(i=b("Promise"))).resolve();j=c?d("WAWebBlockUserJob").blockUser(k,e):d("WAWebBlockUserJob").unblockUser(k);h=j.then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a&&a.errorCode!=null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText);yield d("WAWebUpdateBlocklistDbJob").updateBlocklistDbJob(k,c);c?d("WAWebBlocklistCollection").BlocklistCollection.add({id:k}):d("WAWebBlocklistCollection").BlocklistCollection.remove(k)});return function(b){return a.apply(this,arguments)}}());o(a,h,c,e,f);return h}function o(a,b,c,e,f){f===void 0&&(f=d("WAWebActionToast.react").genId());var g=d("WAWebFrontendContactGetters").getFormattedName(a),i=c?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__WAyLOogeTK2__JHASH__",[h._param("member",g)])):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__XrLTyll-03G__JHASH__",[h._param("member",g)]));b=b.then(function(){var b=c?h._("__JHASH__K_KheXg8w78__JHASH__",[h._param("member",g)]):h._("__JHASH__Mk8ZcJs69o-__JHASH__",[h._param("member",g)]);return new(d("WAWebActionToast.react").ActionType)(b,{actionText:h._("__JHASH__mpD8GydGn1Q__JHASH__"),actionHandler:function(){return n(a,!c,e,f)}})})["catch"](function(b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError){if(b.statusCode>=400)throw c?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__GJ9jrserFqo__JHASH__",[h._param("member",g)])):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__2vgSyVBr8Fh__JHASH__",[h._param("member",g)]))}else{d("WALogger").WARN(k()).devConsole(b);b=c?h._("__JHASH__GJ9jrserFqo__JHASH__",[h._param("member",g)]):h._("__JHASH__2vgSyVBr8Fh__JHASH__",[h._param("member",g)]);throw new(d("WAWebActionToast.react").ActionType)(b,{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return n(a,c,e,f)}})}});d("WAWebToastManager").ToastManager.open(l.jsx(d("WAWebActionToast.react").ActionToast,{id:f,initialAction:i,pendingAction:b}))}g.blockContact=a;g.unblockContact=e;g.updatePSAUserBlockingStatus=f}),226);
__d("WAWebBizVerifiedLevelToString",["WAWebBusinessProfileTypes"],(function(a,b,c,d,e,f,g){function a(a){switch(a){case d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH:return"high";case d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.LOW:return"low";case d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.UNKNOWN:default:return"unknown"}}g["default"]=a}),98);
__d("WAWebGetOrQueryUsyncInfoContactAction",["Promise","WALogger","WAPromiseCache","WAWebBackendErrors","WAWebBizUpdateVerifiedInfoAction","WAWebBizVerifiedLevelToString","WAWebChatCollection","WAWebContactCollection","WAWebQueryExistsJob","WAWebUpdateDisappearingModeForContact","WAWebUsync","WAWebUsyncUser","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[usync] biz info response"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[usync] querying for biz info"]);j=function(){return a};return a}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e=e===void 0?{forceUsync:!1}:e;e=e.forceUsync;var f=d("WAWebContactCollection").ContactCollection.get(a);if(e!==!0&&f!=null&&(f.name!=null||d("WAWebChatCollection").ChatCollection.get(a)!=null)){return{wid:a,biz:f.isBusiness,bizInfo:f.isBusiness?{verifiedName:{level:c("WAWebBizVerifiedLevelToString")(f.verifiedLevel),serial:null,name:f.verifiedName,isApi:Boolean(f.isEnterprise),isSmb:Boolean(f.isSmb),privacyMode:f.privacyMode}}:null,disappearingMode:{duration:(e=f.disappearingModeDuration)!=null?e:0,settingTimestamp:(e=f.disappearingModeSettingTimestamp)!=null?e:0}}}e=(yield d("WAWebQueryExistsJob").queryWidExists(a));if(e){var g=e.biz,i=e.bizInfo,j=e.disappearingMode;g&&i!=null&&(yield d("WAWebBizUpdateVerifiedInfoAction").updateVerifiedInfo(a,i.verifiedName));j&&f!=null&&(yield d("WAWebUpdateDisappearingModeForContact").updateDisappearingModeForContact(a,j.duration,j.settingTimestamp));return e}return(h||(h=b("Promise"))).reject(c("err")("Invalid number"))});return k.apply(this,arguments)}function e(){var a=new(c("WAPromiseCache"))(d("WAWebQueryExistsJob").queryPhoneExists,{maxCached:100,maxAge:36e4,shouldCache:function(a){return!!a}});return a}function f(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(j()).devConsole({wid:a});var b=new(d("WAWebUsyncUser").USyncUser)(),c=new(d("WAWebUsync").USyncQuery)();a.isLid()?b.withId(a):(c.withContactProtocol(),b.withPhone(a.toString()));c.withUser(b);c.withBusinessProtocol();b=(yield c.execute());c=b.error.all||b.error.contact;d("WALogger").LOG(i()).devConsole({res:b,error:c});if(c)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(c.errorCode,c.errorText);c=b.list;if(c.length!==1)return null;b=c[0];c=b.id;b=b.business;b!=null&&(yield d("WAWebBizUpdateVerifiedInfoAction").updateVerifiedInfo(a,b.verifiedName));a={wid:c,biz:b!=null,bizInfo:b};return a});return l.apply(this,arguments)}g.getOrQueryUsyncInfo=a;g.usyncContactCached=e;g.queryUsyncBusiness=f}),98);
__d("WAWebWamEnumPhoneNumHyperlinkActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({PHONE_NUM_HYPERLINK_MSG_RECEIVED:1,LONG_PRESS_PHONE_NUM_HYPERLINK:2,CLICK_PHONE_NUM_HYPERLINK:3,CLICK_CALL:4,CLICK_ADD_TO_CONTACTS:5,CLICK_MESSAGE_ON_WHATSAPP:6,CLICK_COPY_PHONE_NUMBER:7,CLOSE_DIALOG_BOX:8,MESSAGE_SENT:9,CLICK_CALL_ON_WHATSAPP:10});f.PHONE_NUM_HYPERLINK_ACTION_TYPE=a}),66);
__d("WAWebPsPhoneNumberHyperlinkWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPhoneNumHyperlinkActionType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PsPhoneNumberHyperlink:[3266,{isPhoneNumHyperlinkOwner:[1,a.TYPES.BOOLEAN],phoneNumHyperlinkAction:[2,d("WAWebWamEnumPhoneNumHyperlinkActionType").PHONE_NUM_HYPERLINK_ACTION_TYPE],phoneNumberStatusOnWa:[3,a.TYPES.BOOLEAN],sequenceNumber:[4,a.TYPES.INTEGER]},[1,1,1],"private",113760892]},{PsPhoneNumberHyperlink:[]});g.PsPhoneNumberHyperlinkWamEvent=b}),98);
__d("WAWebPhoneNumberContactAction",["fbt","WAWebComposeBoxActions","WAWebCopyToClipboard","WAWebModalManager","WAWebOpenChatFlow.react","WAWebPsPhoneNumberHyperlinkWamEvent","WAWebToast.react","WAWebToastManager","WAWebUserPrefsMeUser","WAWebWamEnumPhoneNumHyperlinkActionType","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a,b,c){d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebOpenChatFlow.react").OpenChatFlow,{chatId:b,onSuccess:function(a){k(a,c)},msgText:null}),{transition:"modal-flow"}),new(d("WAWebPsPhoneNumberHyperlinkWamEvent").PsPhoneNumberHyperlinkWamEvent)({phoneNumHyperlinkAction:d("WAWebWamEnumPhoneNumHyperlinkActionType").PHONE_NUM_HYPERLINK_ACTION_TYPE.CLICK_MESSAGE_ON_WHATSAPP,isPhoneNumHyperlinkOwner:d("WAWebUserPrefsMeUser").isMeAccount(b),phoneNumberStatusOnWa:!0}).commit()}function b(a,b,c){void d("WAWebCopyToClipboard").copyTextToClipboard(a),d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__wn768q8V76a__JHASH__")})),new(d("WAWebPsPhoneNumberHyperlinkWamEvent").PsPhoneNumberHyperlinkWamEvent)({phoneNumHyperlinkAction:d("WAWebWamEnumPhoneNumHyperlinkActionType").PHONE_NUM_HYPERLINK_ACTION_TYPE.CLICK_COPY_PHONE_NUMBER,isPhoneNumHyperlinkOwner:c,phoneNumberStatusOnWa:Boolean(b)}).commit()}function e(a,b){new(d("WAWebPsPhoneNumberHyperlinkWamEvent").PsPhoneNumberHyperlinkWamEvent)({phoneNumHyperlinkAction:d("WAWebWamEnumPhoneNumHyperlinkActionType").PHONE_NUM_HYPERLINK_ACTION_TYPE.CLICK_PHONE_NUM_HYPERLINK,isPhoneNumHyperlinkOwner:b,phoneNumberStatusOnWa:Boolean(a)}).commit()}function f(a,b){new(d("WAWebPsPhoneNumberHyperlinkWamEvent").PsPhoneNumberHyperlinkWamEvent)({phoneNumHyperlinkAction:d("WAWebWamEnumPhoneNumHyperlinkActionType").PHONE_NUM_HYPERLINK_ACTION_TYPE.CLOSE_DIALOG_BOX,isPhoneNumHyperlinkOwner:b,phoneNumberStatusOnWa:Boolean(a)}).commit()}function k(a,b){if(!a)return;d("WAWebComposeBoxActions").ComposeBoxActions.addMsgSendingLogAttributes(a,{handleOnce:function(){new(d("WAWebPsPhoneNumberHyperlinkWamEvent").PsPhoneNumberHyperlinkWamEvent)({phoneNumHyperlinkAction:d("WAWebWamEnumPhoneNumHyperlinkActionType").PHONE_NUM_HYPERLINK_ACTION_TYPE.MESSAGE_SENT,isPhoneNumHyperlinkOwner:b,phoneNumberStatusOnWa:!0}).commit()}})}g.handleOpenChat=a;g.handleCopyPhoneNumber=b;g.logClickOnPhoneNumber=e;g.logCloseDialog=f}),226);
__d("WAWebStatusContactAction",["fbt","Promise","WALogger","WAWebActionToast.react","WAWebContactStatusBridge","WAWebMiscErrors","WAWebStatusCollection","WAWebToastManager","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:statusCollection:setMyStatus dropped"]);k=function(){return a};return a}var l=j||c("react");function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield d("WAWebContactStatusBridge").getStatus(a));if(c.stale===!0){var e=b("WAWebStatusCollection").StatusCollection.get(a);if(e)return{id:a,status:e.status}}c=(e=c.status)!=null?e:d("WAWebStatusCollection").getDefaultStatus();return{id:a,status:c}});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){c===void 0&&(c=d("WAWebActionToast.react").genId());e===void 0&&(e=!1);var f=a.trim();if(!f)return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());f=d("WAWebContactStatusBridge").setMyStatus(f);var g=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__c3Hd87JDAev__JHASH__")),j=d("WAWebUserPrefsMeUser").getMaybeMeUser(),m=b("WAWebStatusCollection").StatusCollection,o=m.assertGet(j).status,p=f.then(function(a){if(a.status===200){var b=e?void 0:{actionText:h._("__JHASH__mpD8GydGn1Q__JHASH__"),actionHandler:function(){return n(o,c,!0)}};return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__rQQ0PSR-K8V__JHASH__"),b)}else if(a.status>=400)return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__ZzY5RtG8Bmg__JHASH__"))})["catch"](function(b){d("WALogger").WARN(k()).devConsole(b);throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__ZzY5RtG8Bmg__JHASH__"),{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return n(a,c)}})});d("WAWebToastManager").ToastManager.open(l.jsx(d("WAWebActionToast.react").ActionToast,{id:c,initialAction:g,pendingAction:p}));g=(yield f);g.status===200&&(m.assertGet(j).status=a)});return o.apply(this,arguments)}g.getStatus=a;g.setMyStatus=n}),226);
__d("WAWebGroupCreateCWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({GroupCreateC:[156,{},[1,1,1],"regular"]},{GroupCreateC:[]});g.GroupCreateCWamEvent=a}),98);
__d("WAWebGroupCreateJob",["Promise","WADeprecatedSendIq","WADeprecatedWapParser","WAHex","WAWap","WAWebBackendErrors","WAWebCommsWapMd","WAWebGroupApiConst","WAWebGroupCreateCWamEvent","WAWebJidToWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i=new(c("WADeprecatedWapParser"))("createGroupReplyParser",function(a){a=a.child("group");var b;try{b=d("WAWebWidFactory").createWid(a.attrString("id")+"@g.us")}catch(a){}if(b==null)throw c("err")("createGroupReplyParser: invalid group id");return{wid:b,subject:a.hasAttr("subject")?a.attrString("subject"):"",creator:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("creator")),ts:a.attrTime("creation"),participants:a.mapChildrenWithTag("participant",function(a){var b=a.maybeChild("add_request");return{wid:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid")),error:a.hasAttr("error")?a.attrInt("error"):null,invite_code:b&&b.attrString("code"),invite_code_exp:b&&b.attrString("expiration"),type:a.attrEnumOrDefault("type",d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES,"participant")}})}});function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=d("WAHex").randomHex(8);c=c.map(function(a){return d("WAWap").wap("participant",{jid:d("WAWebCommsWapMd").USER_JID(a)})});e!=null&&e!==0&&c.unshift(d("WAWap").wap("ephemeral",{expiration:d("WAWap").INT(e)}));f!=null&&c.unshift(d("WAWap").wap("linked_parent",{jid:d("WAWebCommsWapMd").GROUP_JID(f)}));if(a===""){f=(e=d("WAWap")).wap("iq",{to:e.G_US,type:"set",xmlns:"w:g2",id:e.generateId()},e.wap("create",{key:e.CUSTOM_STRING(g)},c))}else{f=(e=d("WAWap")).wap("iq",{to:e.G_US,type:"set",xmlns:"w:g2",id:e.generateId()},e.wap("create",{subject:e.CUSTOM_STRING(a),key:e.CUSTOM_STRING(g)},c))}a=(yield d("WADeprecatedSendIq").deprecatedSendIq(f,i));if(a.success){new(d("WAWebGroupCreateCWamEvent").GroupCreateCWamEvent)().commit();return a.result}return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText))});return j.apply(this,arguments)}g.createGroup=a}),98);
__d("WAWebCreateGroupAction",["fbt","WAFilteredCatch","WALogger","WAWebABProps","WAWebActionToast.react","WAWebApiContact","WAWebBackendErrors","WAWebCmd","WAWebComposeBoxActions","WAWebContactCollection","WAWebFindChatAction","WAWebGroupCreateJob","WAWebGroupQueryBridge","WAWebProfilePicThumbAction","WAWebProfilePicThumbCollection","WAWebToastManager","WAWebWidFactory","fbs","gkx","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:chatCollection:createGroup dropped"]);k=function(){return a};return a}var l=i||c("react");function a(a,b,c,d,e,f){e===void 0&&(e=0);return m(a,b,c,d,void 0,e,f)}function m(a,b,e,f,g,i,j){g===void 0&&(g=d("WAWebActionToast.react").genId());var o=f.map(function(a){return a.id});if(d("WAWebABProps").getABPropConfigValue("lid_groups_new_group_creation")){var p=new Map();o.forEach(function(a){p.set(a,d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a)))});var q=[];p.forEach(function(a,b){a==null&&q.push(b)});q.length>0||(o=Array.from(p.values()).filter(Boolean))}o=d("WAWebGroupCreateJob").createGroup(a,o,i,j).then(function(a){var b=d("WAWebWidFactory").toGroupWid(a.wid);a=a.participants.map(function(a){return{userWid:a.wid,code:a.error!=null?a.error.toString():"200",invite_code:a.invite_code,invite_code_exp:a.invite_code_exp}});return{gid:b,participants:a}});var r=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__vr2xAkS8V2V__JHASH__")),s=o.then(function(b){n(b,a,void 0);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__MIm9jS0zv3G__JHASH__"))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){if(!c("gkx")("26258")&&a.status===400)return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__gvmsDcEftBm__JHASH__"));if(a.status===406)return new(d("WAWebActionToast.react").ActionType)(c("fbs")._("__JHASH__gvmsDcEftBm__JHASH__").toString()+" "+c("fbs")._("__JHASH__tlzt9CVODkV__JHASH__").toString());else if(a.status===412)return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__R6BarrxjM6z__JHASH__"));else if(a.status===429)return new(d("WAWebActionToast.react").ActionType)(c("fbs")._("__JHASH__gvmsDcEftBm__JHASH__").toString()+" "+c("fbs")._("__JHASH__8ZXE5OMH7Ah__JHASH__").toString());return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__gvmsDcEftBm__JHASH__"))}))["catch"](function(c){d("WALogger").WARN(k()).devConsole(c);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__gvmsDcEftBm__JHASH__"),{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return m(a,b,e,f,g,i)}})});d("WAWebToastManager").ToastManager.open(l.jsx(d("WAWebActionToast.react").ActionToast,{id:g,initialAction:r,pendingAction:s}));return o.then(function(c){j==null&&c.gid&&d("WAWebFindChatAction").findChat(c.gid,"createGroupAction").then(function(b){d("WAWebCmd").Cmd.openChatBottom(b).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)}),a===""&&d("WAWebGroupQueryBridge").sendQueryGroup(c.gid)["finally"](function(a){})});if(b!=null&&e!=null){var f=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(c.gid);return d("WAWebProfilePicThumbAction").setProfilePic(f,b,e).then(function(){return c.gid})}return c.gid})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(){}))}function n(a,b,c,e){if(!a.participants)return;e=e||a.gid;e||d("WALogger").ERROR(j()).sendLogs("Group add request was provided with undefined gid");var f=[];a.participants.forEach(function(a){if(a.code!=="403")return;var b=d("WAWebContactCollection").ContactCollection.gadd(a.userWid,{silent:!0});f.push(babelHelpers["extends"]({},a,{contact:b}))});f.length>0&&e&&d("WAWebCmd").Cmd.openGroupsV4InviteRequestFlow(f,e,b,c)}g.createGroup=a;g.sendForNeededAddRequest=n}),226);
__d("WAWebCommunityLeaveErrorModals.react",["fbt","WAWebConfirmPopup.react","WAWebModalManager","WAWebText_DONOTUSE.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(){d("WAWebModalManager").ModalManager.close()}function a(a){a.onOK;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:k,children:j.jsx(d("WAWebText_DONOTUSE.react").TextParagraph,{size:"16",children:h._("__JHASH__2JB9vNpN39T__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.onOK;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:a,okText:h._("__JHASH__-n_KaKwEY0d__JHASH__"),onCancel:k,children:j.jsx(d("WAWebText_DONOTUSE.react").TextParagraph,{size:"16",children:h._("__JHASH__RPMYuBI373E__JHASH__")})})}b.displayName=b.name+" [from "+f.id+"]";function e(a){a.onOK;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:k,children:j.jsx(d("WAWebText_DONOTUSE.react").TextParagraph,{size:"16",children:h._("__JHASH__p1Gqzo6g941__JHASH__")})})}e.displayName=e.name+" [from "+f.id+"]";g.CommunityLeaveTryAgainLaterError=a;g.CommunityLeaveRetryError=b;g.CommunityLeaveStandardError=e}),226);
__d("WAWebGroupExitJob",["Promise","WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebCommsWapMd","WAWebJidToWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new(c("WADeprecatedWapParser"))("leaveGroupsResultParser",function(a){a.assertAttr("type","result");a=a.child("leave");a=a.mapChildren(function(a){return{id:d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("id")),code:a.hasAttr("error")?a.attrInt("error"):200}});return a}),j=new(c("WADeprecatedWapParser"))("leaveCommunitiesResultParser",function(a){a.assertAttr("type","result");a=a.child("leave");a=a.mapChildren(function(a){return{id:d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("parent_group_jid")),code:a.hasAttr("error")?a.attrInt("error"):200}});return a});function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c;a=a.map(function(a){return d("WAWap").wap("group",{id:d("WAWebCommsWapMd").GROUP_JID(a)})});c=(c=d("WAWap")).wap("iq",{to:c.G_US,type:"set",xmlns:"w:g2",id:c.generateId()},c.wap("leave",null,a));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(c,i));return a.success?a.result:(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText))});return l.apply(this,arguments)}function a(a){return k([a]).then(function(a){return a[0]})}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c;a=a.map(function(a){return d("WAWap").wap("linked_groups",{parent_group_jid:d("WAWebCommsWapMd").GROUP_JID(a)})});c=(c=d("WAWap")).wap("iq",{to:c.G_US,type:"set",xmlns:"w:g2",id:c.generateId()},c.wap("leave",null,a));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(c,j));return a.success?a.result:(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText))});return n.apply(this,arguments)}function e(a){return m([a]).then(function(a){return a[0]})}g.leaveGroups=k;g.leaveGroup=a;g.leaveCommunities=m;g.leaveCommunity=e}),98);
__d("WAWebExitGroupAction",["fbt","Promise","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebCommunityLeaveErrorModals.react","WAWebGroupExitJob","WAWebInvalidateEventsAction","WAWebMiscErrors","WAWebModalManager","WAWebName.react","WAWebPollsInvalidateChatPollMsgsAction","WAWebSchemaChat","WAWebStateUtils","WAWebToastManager","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:groupMetadata:participantCollection:exitCommunity dropped"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to merge chat table"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["actions:chat:sendExit dropped"]);m=function(){return a};return a}var n=j||c("react");function a(a){return o(d("WAWebStateUtils").unproxy(a))}function e(a){return p(d("WAWebStateUtils").unproxy(a))}function o(a){var c=a.isGroup,e=a.promises;if(!c)return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());if(e.sendExit)return e.sendExit;c=e.sendExit=d("WAWebGroupExitJob").leaveGroup(a.id).then(function(a){if(a.code!==200)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.code)});var f=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__GZuRzekWpPT__JHASH__")),g=c.then(function(){return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__JrkJpRZ_-th__JHASH__"))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){if(a.status>=400)return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__Q9ghZy2BLs___JHASH__"))}))["catch"](function(b){d("WALogger").WARN(m()).devConsole(b);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__Q9ghZy2BLs___JHASH__"),{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return o(a)}})});d("WAWebToastManager").ToastManager.open(n.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:f,pendingAction:g}));return c.then(function(){r(a);return!0})["finally"](function(){e.sendExit=null})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(){return!1}))}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.isGroup,e=a.promises;if(!c)return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)());if(e.sendExit)return e.sendExit;c=e.sendExit=d("WAWebGroupExitJob").leaveCommunity(a.id);var f=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__1kxUhg4IpQt__JHASH__")),g=c.then(function(c){var e=b("WAWebName.react");e=e.Name;e=a.formattedTitle!=null?h._("__JHASH__FcwQ2qMpdJ-__JHASH__",[h._param("community",n.jsx(e,{chat:a}))]):h._("__JHASH__8PuGE-RwpJ___JHASH__");var f=function(){d("WAWebModalManager").ModalManager.close(),p(a)};if(c.code===200)return new(d("WAWebActionToast.react").ActionType)(e);else c.code===500?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebCommunityLeaveErrorModals.react").CommunityLeaveRetryError,{onOK:f})):d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebCommunityLeaveErrorModals.react").CommunityLeaveStandardError,{}))})["catch"](function(a){d("WALogger").WARN(k()).devConsole(a),a.statusCode===429||a.statusCode===500?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebCommunityLeaveErrorModals.react").CommunityLeaveTryAgainLaterError,{})):d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebCommunityLeaveErrorModals.react").CommunityLeaveStandardError,{}))})["finally"](function(){e.sendExit=null});d("WAWebToastManager").ToastManager.open(n.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:f,pendingAction:g}));yield c});return q.apply(this,arguments)}function r(a){var b;if(!a.isGroup)return;(b=a.groupMetadata)==null?void 0:b.participants.remove(d("WAWebUserPrefsMeUser").getMaybeMeUser());d("WAWebSchemaChat").getChatTable().merge(a.id.toString(),{isReadOnly:!0}).then(function(){a.isReadOnly=!0,void d("WAWebPollsInvalidateChatPollMsgsAction").invalidateChatPollMsgs(a),void d("WAWebInvalidateEventsAction").invalidateEventMsgsForChat(a)})["catch"](function(a){d("WALogger").ERROR(l()).verbose().devConsole(a).sendLogs("failed to merge chat table when exiting group: "+a);throw c("err")("failed to merge chat table")})}g.sendExitGroup=a;g.sendExitCommunity=e;g.localExitGroup=r}),226);
__d("WAWebFindGroupMetadataAction",["Promise","WALogger","WAWebDBParticipantTypes","WAWebGroupDatabaseJob","WAWebGroupMetadataCollection","WAWebGroupQueryBridge","WAWebWamNumberToSizeBucket","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["findGroupMetadata: end find group metadata for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["findGroupMetadata: "," - query stale group participant"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["findGroupMetadata: "," - query missing group participant"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["findGroupMetadata: "," - pending participant query"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["findGroupMetadata: "," - query missing group participant"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["findGroupMetadata: start find group metadata for ",""]);n=function(){return a};return a}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(n(),a);var e=null,f=null,g=function(){return void 0},o=b("WAWebGroupMetadataCollection");o=o.get(a);if(!o){e=(yield d("WAWebGroupDatabaseJob").getGroupMetadataJob(a));if(!e){d("WALogger").LOG(m(),a);return d("WAWebGroupQueryBridge").sendQueryGroup(a)}e.subject!=null&&d("WAWebGroupQueryBridge").updateSubject(a,e.subject)}else{if(o.participantQueryPromise){d("WALogger").LOG(l(),a);return o.participantQueryPromise.then(function(){return{id:a}})}o.participantQueryPromise=new(h||(h=b("Promise")))(function(a){g=a})}try{if(!o||o.stale){f=(yield d("WAWebGroupDatabaseJob").getGroupParticipantJob(a));if(!f){d("WALogger").LOG(k(),a);return d("WAWebGroupQueryBridge").sendQueryGroup(a)}}e=babelHelpers["extends"]({id:a},e,{participants:(e=f)==null?void 0:e.participants,pastParticipants:(e=f)==null?void 0:e.pastParticipants,deviceStale:f?f.staleType===d("WAWebDBParticipantTypes").STALE_TYPES.DEVICE:void 0,cachedDeviceCount:(e=f)==null?void 0:e.deviceCount,cachedDeviceSizeBucket:((e=f)==null?void 0:e.deviceCount)?c("WAWebWamNumberToSizeBucket")(f.deviceCount):null});if(((f=f)==null?void 0:f.staleType)===d("WAWebDBParticipantTypes").STALE_TYPES.PARTICIPANT){d("WALogger").LOG(j(),a);f=(yield d("WAWebGroupQueryBridge").sendQueryGroup(a));(f==null?void 0:f.participants)!=null&&(e.participants=f.participants)}d("WALogger").DEV(i(),a);return e}finally{g(),o&&(o.participantQueryPromise=null)}});return o.apply(this,arguments)}g.findGroupMetadata=a}),98);
__d("WASmaxInGroupsIQErrorAlreadyExistsMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","already-exists");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",304);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorAlreadyExistsMixin=a}),98);
__d("WASmaxInGroupsIQErrorConflictMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","conflict");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",409);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorConflictMixin=a}),98);
__d("WASmaxInGroupsIQErrorParentLinkedGroupsParticipantsResourceLimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","linked-groups-participants-resource-limit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",412);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorParentLinkedGroupsParticipantsResourceLimitMixin=a}),98);
__d("WASmaxInGroupsIQErrorResourceConstraintMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","resource-constraint");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorResourceConstraintMixin=a}),98);
__d("WASmaxInGroupsIQErrorResourceLimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","resource-limit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",419);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorResourceLimitMixin=a}),98);
__d("WASmaxInGroupsAcceptGroupAddClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorAlreadyExistsMixin","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorConflictMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorForbiddenMixin","WASmaxInGroupsIQErrorGoneMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorLockedMixin","WASmaxInGroupsIQErrorNotAllowedMixin","WASmaxInGroupsIQErrorNotAuthorizedMixin","WASmaxInGroupsIQErrorParentLinkedGroupsParticipantsResourceLimitMixin","WASmaxInGroupsIQErrorResourceConstraintMixin","WASmaxInGroupsIQErrorResourceLimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorAlreadyExistsMixin").parseIQErrorAlreadyExistsMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorAlreadyExists",value:b.value});var c=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value});var e=d("WASmaxInGroupsIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:e.value});var f=d("WASmaxInGroupsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:f.value});var g=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:g.value});var h=d("WASmaxInGroupsIQErrorConflictMixin").parseIQErrorConflictMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"IQErrorConflict",value:h.value});var i=d("WASmaxInGroupsIQErrorGoneMixin").parseIQErrorGoneMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"IQErrorGone",value:i.value});var j=d("WASmaxInGroupsIQErrorResourceLimitMixin").parseIQErrorResourceLimitMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"IQErrorResourceLimit",value:j.value});var k=d("WASmaxInGroupsIQErrorLockedMixin").parseIQErrorLockedMixin(a);if(k.success)return d("WAResultOrError").makeResult({name:"IQErrorLocked",value:k.value});var l=d("WASmaxInGroupsIQErrorResourceConstraintMixin").parseIQErrorResourceConstraintMixin(a);if(l.success)return d("WAResultOrError").makeResult({name:"IQErrorResourceConstraint",value:l.value});var m=d("WASmaxInGroupsIQErrorNotAllowedMixin").parseIQErrorNotAllowedMixin(a);if(m.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAllowed",value:m.value});var n=d("WASmaxInGroupsIQErrorParentLinkedGroupsParticipantsResourceLimitMixin").parseIQErrorParentLinkedGroupsParticipantsResourceLimitMixin(a);if(n.success)return d("WAResultOrError").makeResult({name:"IQErrorParentLinkedGroupsParticipantsResourceLimit",value:n.value});var o=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return o.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:o.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorAlreadyExists","IQErrorBadRequest","IQErrorNotAuthorized","IQErrorForbidden","IQErrorItemNotFound","IQErrorConflict","IQErrorGone","IQErrorResourceLimit","IQErrorLocked","IQErrorResourceConstraint","IQErrorNotAllowed","IQErrorParentLinkedGroupsParticipantsResourceLimit","IQErrorFallbackClient"],[b,c,e,f,g,h,i,j,k,l,m,n,o])}g.parseAcceptGroupAddClientErrors=a}),98);
__d("WASmaxInGroupsAcceptGroupAddResponseClientError",["WAResultOrError","WASmaxInGroupsAcceptGroupAddClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsAcceptGroupAddClientErrors").parseAcceptGroupAddClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorAcceptGroupAddClientErrors:b.value}))}g.parseAcceptGroupAddResponseClientError=a}),98);
__d("WASmaxInGroupsAcceptGroupAddResponseGroupJoinRequestSuccess",["WASmaxInGroupsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"membership_approval_request");if(!c.success)return c;c=d("WASmaxInGroupsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseAcceptGroupAddResponseGroupJoinRequestSuccess=a}),98);
__d("WASmaxInGroupsAcceptGroupAddResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseAcceptGroupAddResponseServerError=a}),98);
__d("WASmaxInGroupsAcceptGroupAddResponseSuccess",["WASmaxInGroupsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseAcceptGroupAddResponseSuccess=a}),98);
__d("WASmaxOutGroupsAcceptGroupAddRequest",["WASmaxJsx","WASmaxOutGroupsBaseSetGroupMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.acceptCode,c=a.acceptExpiration,e=a.acceptAdmin;b=d("WASmaxOutGroupsBaseSetGroupMixin").mergeBaseSetGroupMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("accept",{code:d("WAWap").CUSTOM_STRING(b),expiration:d("WAWap").INT(c),admin:d("WAWap").USER_JID(e)})),a);return b}g.makeAcceptGroupAddRequest=a}),98);
__d("WASmaxGroupsAcceptGroupAddRPC",["WAComms","WASmaxInGroupsAcceptGroupAddResponseClientError","WASmaxInGroupsAcceptGroupAddResponseGroupJoinRequestSuccess","WASmaxInGroupsAcceptGroupAddResponseServerError","WASmaxInGroupsAcceptGroupAddResponseSuccess","WASmaxOutGroupsAcceptGroupAddRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d("WASmaxOutGroupsAcceptGroupAddRequest").makeAcceptGroupAddRequest(a);k.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=k.sent;g=d("WASmaxInGroupsAcceptGroupAddResponseGroupJoinRequestSuccess").parseAcceptGroupAddResponseGroupJoinRequestSuccess(f,e);if(!g.success){k.next=7;break}return k.abrupt("return",{name:"AcceptGroupAddResponseGroupJoinRequestSuccess",value:g.value});case 7:h=d("WASmaxInGroupsAcceptGroupAddResponseSuccess").parseAcceptGroupAddResponseSuccess(f,e);if(!h.success){k.next=10;break}return k.abrupt("return",{name:"AcceptGroupAddResponseSuccess",value:h.value});case 10:i=d("WASmaxInGroupsAcceptGroupAddResponseClientError").parseAcceptGroupAddResponseClientError(f,e);if(!i.success){k.next=13;break}return k.abrupt("return",{name:"AcceptGroupAddResponseClientError",value:i.value});case 13:j=d("WASmaxInGroupsAcceptGroupAddResponseServerError").parseAcceptGroupAddResponseServerError(f,e);if(!j.success){k.next=16;break}return k.abrupt("return",{name:"AcceptGroupAddResponseServerError",value:j.value});case 16:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("AcceptGroupAdd",{GroupJoinRequestSuccess:g,Success:h,ClientError:i,ServerError:j}));case 17:case"end":return k.stop()}},null,this)}g.sendAcceptGroupAddRPC=a}),98);
__d("WASmaxInGroupsGetGroupInfoClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorForbiddenMixin","WASmaxInGroupsIQErrorGoneMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorGoneMixin").parseIQErrorGoneMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorGone",value:b.value});var c=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value});var e=d("WASmaxInGroupsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:e.value});var f=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:f.value});var g=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:g.value});var h=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return h.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorGone","IQErrorBadRequest","IQErrorForbidden","IQErrorItemNotFound","IQErrorRateOverlimit","IQErrorFallbackClient"],[b,c,e,f,g,h])}g.parseGetGroupInfoClientErrors=a}),98);
__d("WASmaxInGroupsGetGroupInfoResponseClientError",["WAResultOrError","WASmaxInGroupsGetGroupInfoClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsGetGroupInfoClientErrors").parseGetGroupInfoClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorGetGroupInfoClientErrors:b.value}))}g.parseGetGroupInfoResponseClientError=a}),98);
__d("WASmaxInGroupsGetGroupInfoResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetGroupInfoResponseServerError=a}),98);
__d("WASmaxInGroupsGetGroupInfoResponseSuccess",["WAResultOrError","WASmaxInGroupsDedupAttrsMixin","WASmaxInGroupsGroupInfoMixin","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"size",0,19999);if(!b.success)return b;var c=d("WASmaxInGroupsGroupInfoMixin").parseGroupInfoMixin(a);if(!c.success)return c;a=d("WASmaxInGroupsDedupAttrsMixin").parseDedupAttrsMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({size:b.value},c.value,{dedupAttrsMixin:a.success?a.value:null}))}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optionalChildWithTag(a,"group",h);if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);return!a.success?a:d("WAResultOrError").makeResult({type:e.value,group:c.value})}g.parseGetGroupInfoResponseSuccessGroup=h;g.parseGetGroupInfoResponseSuccess=a}),98);
__d("WASmaxOutGroupsAddRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.addRequestAdmin;a=d("WASmaxJsx").smax("add_request",{admin:d("WAWap").USER_JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAddRequestMixin=a}),98);
__d("WASmaxOutGroupsCodeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.addRequestCode;a=d("WASmaxJsx").smax("add_request",{code:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeCodeMixin=a}),98);
__d("WASmaxOutGroupsGetGroupInfoRequestTypeAttributeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyRequest;a=d("WASmaxJsx").smax("smax$any",{request:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGetGroupInfoRequestTypeAttributeMixin=a}),98);
__d("WASmaxOutGroupsGetGroupInfoRequestTypeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsGetGroupInfoRequestTypeAttributeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutGroupsGetGroupInfoRequestTypeAttributeMixin").mergeGetGroupInfoRequestTypeAttributeMixin(d("WASmaxJsx").smax("query",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGetGroupInfoRequestTypeMixin=a}),98);
__d("WASmaxOutGroupsGetGroupInfoRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutGroupsAddRequestMixin","WASmaxOutGroupsBaseGetGroupMixin","WASmaxOutGroupsCodeMixin","WASmaxOutGroupsGetGroupInfoRequestTypeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.addRequestExpiration;b=d("WASmaxOutGroupsCodeMixin").mergeCodeMixin(d("WASmaxOutGroupsAddRequestMixin").mergeAddRequestMixin(d("WASmaxJsx").smax("add_request",{expiration:d("WAWap").INT(b)}),a),a);return b}function a(a){var b=a.addRequestArgs,c=a.queryPhash,e=a.getGroupInfoRequestTypeMixinArgs;c=d("WASmaxOutGroupsBaseGetGroupMixin").mergeBaseGetGroupMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsGetGroupInfoRequestTypeMixin").mergeGetGroupInfoRequestTypeMixin,d("WASmaxJsx").smax("query",{phash:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c)},d("WASmaxChildren").OPTIONAL_CHILD(h,b)),e)),a);return c}g.makeGetGroupInfoRequestQueryAddRequest=h;g.makeGetGroupInfoRequest=a}),98);
__d("WASmaxGroupsGetGroupInfoRPC",["WAComms","WASmaxInGroupsGetGroupInfoResponseClientError","WASmaxInGroupsGetGroupInfoResponseServerError","WASmaxInGroupsGetGroupInfoResponseSuccess","WASmaxOutGroupsGetGroupInfoRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsGetGroupInfoRequest").makeGetGroupInfoRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsGetGroupInfoResponseSuccess").parseGetGroupInfoResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetGroupInfoResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsGetGroupInfoResponseClientError").parseGetGroupInfoResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetGroupInfoResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsGetGroupInfoResponseServerError").parseGetGroupInfoResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetGroupInfoResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetGroupInfo",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetGroupInfoRPC=a}),98);
__d("WASmaxInGroupsClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorForbiddenMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorLockedMixin","WASmaxInGroupsIQErrorNotAuthorizedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value});var e=d("WASmaxInGroupsIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:e.value});var f=d("WASmaxInGroupsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:f.value});var g=d("WASmaxInGroupsIQErrorLockedMixin").parseIQErrorLockedMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorLocked",value:g.value});var h=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return h.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorNotAuthorized","IQErrorForbidden","IQErrorLocked","IQErrorFallbackClient"],[b,c,e,f,g,h])}g.parseClientErrors=a}),98);
__d("WASmaxInGroupsRevokeRequestCodeResponseClientError",["WAResultOrError","WASmaxInGroupsClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsClientErrors").parseClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorClientErrors:b.value}))}g.parseRevokeRequestCodeResponseClientError=a}),98);
__d("WASmaxInGroupsRevokeRequestCodeResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseRevokeRequestCodeResponseServerError=a}),98);
__d("WASmaxInGroupsRevokeRequestCodeResponseSuccess",["WAResultOrError","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsIQResultResponseMixin","WASmaxInGroupsPhoneNumberMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"error","404");if(!c.success)return c;a=d("WASmaxInGroupsPhoneNumberMixin").parsePhoneNumberMixin(a);return d("WAResultOrError").makeResult({jid:b.value,error:c.value,phoneNumberMixin:a.success?a.value:null})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"revoke");if(!c.success)return c;b=d("WASmaxInGroupsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);c=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"participant",1,1e3,h);return!c.success?c:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{groupAddressingModeMixin:a.success?a.value:null,revokeParticipant:c.value}))}g.parseRevokeRequestCodeResponseSuccessRevokeParticipant=h;g.parseRevokeRequestCodeResponseSuccess=a}),98);
__d("WASmaxOutGroupsRevokeRequestCodeRequest",["WASmaxChildren","WASmaxJsx","WASmaxOutGroupsBaseSetGroupMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.participantJid;a=d("WASmaxJsx").smax("participant",{jid:d("WAWap").USER_JID(a)});return a}function a(a){var b=a.participantArgs;b=d("WASmaxOutGroupsBaseSetGroupMixin").mergeBaseSetGroupMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("revoke",null,d("WASmaxChildren").REPEATED_CHILD(h,b,1,1e3))),a);return b}g.makeRevokeRequestCodeRequestRevokeParticipant=h;g.makeRevokeRequestCodeRequest=a}),98);
__d("WASmaxGroupsRevokeRequestCodeRPC",["WAComms","WASmaxInGroupsRevokeRequestCodeResponseClientError","WASmaxInGroupsRevokeRequestCodeResponseServerError","WASmaxInGroupsRevokeRequestCodeResponseSuccess","WASmaxOutGroupsRevokeRequestCodeRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsRevokeRequestCodeRequest").makeRevokeRequestCodeRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsRevokeRequestCodeResponseSuccess").parseRevokeRequestCodeResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"RevokeRequestCodeResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsRevokeRequestCodeResponseClientError").parseRevokeRequestCodeResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"RevokeRequestCodeResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsRevokeRequestCodeResponseServerError").parseRevokeRequestCodeResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"RevokeRequestCodeResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RevokeRequestCode",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendRevokeRequestCodeRPC=a}),98);
__d("WAWebGroupInviteV4Job",["WALogger","WASmaxGroupsAcceptGroupAddRPC","WASmaxGroupsGetGroupInfoRPC","WASmaxGroupsRevokeRequestCodeRPC","WAWebGroupsQueryApi","WAWebJidToWid","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["revokeGroupInviteV4: failed ",":",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["revokeGroupInviteV4: failed ",":",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["joinGroupViaInviteV4: failed ",":",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["joinGroupViaInviteV4: failed ",":",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupInviteV4: failed ",":",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupInviteV4: failed ",":",""]);m=function(){return a};return a}function a(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){b=(yield d("WASmaxGroupsGetGroupInfoRPC").sendGetGroupInfoRPC({addRequestArgs:{addRequestExpiration:parseInt(b,10),addRequestAdmin:d("WAWebWidToJid").widToUserJid(e),addRequestCode:a},iqTo:c,queryPhash:f}));switch(b.name){case"GetGroupInfoResponseSuccess":if(b.value.group==null)return{status:200,phashMatch:!0};e=d("WAWebGroupsQueryApi").parseGroupSmax(b.value.group);return{status:200,groupMetadata:e};case"GetGroupInfoResponseClientError":a=b.value.errorGetGroupInfoClientErrors.value;c=a.code;f=a.text;d("WALogger").LOG(m(),Number(c),f);return{status:Number(c)};case"GetGroupInfoResponseServerError":e=b.value.errorServerErrors.value;a=e.code;f=e.text;d("WALogger").LOG(l(),a,f);return{status:Number(a)}}});return n.apply(this,arguments)}function c(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield d("WASmaxGroupsAcceptGroupAddRPC").sendAcceptGroupAddRPC({iqTo:c,acceptCode:a,acceptExpiration:parseInt(b,10),acceptAdmin:d("WAWebWidToJid").widToUserJid(e)}));switch(a.name){case"AcceptGroupAddResponseSuccess":return{status:200,gid:d("WAWebJidToWid").groupJidToWid(c)};case"AcceptGroupAddResponseGroupJoinRequestSuccess":return{status:200,gid:d("WAWebJidToWid").groupJidToWid(c)};case"AcceptGroupAddResponseClientError":b=a.value.errorAcceptGroupAddClientErrors.value;e=b.code;c=b.text;d("WALogger").LOG(k(),e,c);return{status:Number(e)};case"AcceptGroupAddResponseServerError":b=a.value.errorServerErrors.value;c=b.code;e=b.text;d("WALogger").LOG(j(),c,e);return{status:Number(c)}}});return o.apply(this,arguments)}function e(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WASmaxGroupsRevokeRequestCodeRPC").sendRevokeRequestCodeRPC({participantArgs:a.map(function(a){return{participantJid:d("WAWebWidToJid").widToUserJid(a)}}),iqTo:b}));switch(a.name){case"RevokeRequestCodeResponseSuccess":return{status:200};case"RevokeRequestCodeResponseClientError":b=a.value.errorClientErrors.value;var c=b.code;b=b.text;d("WALogger").LOG(i(),c,b);return{status:Number(c)};case"RevokeRequestCodeResponseServerError":b=a.value.errorServerErrors.value;c=b.code;a=b.text;d("WALogger").LOG(h(),c,a);return{status:Number(c)}}});return p.apply(this,arguments)}g.queryGroupInviteV4=a;g.joinGroupViaInviteV4=c;g.revokeGroupInviteV4=e}),98);
__d("WAWebInviteV4QueryGroupAction",["WAWebApiGroupInviteV4Store","WAWebChatCollection","WAWebContactCollection","WAWebGroupInviteV4Job","WAWebGroupMetadataCollection","WAWebPhashUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=null,h=b("WAWebGroupMetadataCollection").get(e);h&&(g=(yield d("WAWebPhashUtils").phashV1(h.participants.map(function(a){return a.id}))));return d("WAWebGroupInviteV4Job").queryGroupInviteV4(a,c,e,f,g).then(function(a){if(a.phashMatch===!0)return{status:200,phashMatch:!0};return a.groupMetadata!=null?babelHelpers["extends"]({},a.groupMetadata):{status:a.status}}).then(function(a){if(a.status!=null&&a.status>0)return a;if(a.id!=null){d("WAWebContactCollection").ContactCollection.gadd(a.id);return a}a=b("WAWebGroupMetadataCollection").assertGet(d("WAWebWidFactory").createWidFromWidLike(e));var c=d("WAWebChatCollection").ChatCollection.assertGet(a.id).contact.name;return{id:a.id,owner:a.owner,creation:a.creation,desc:a.desc,descId:a.descId,descOwner:a.descOwner,descTime:a.descTime,restrict:a.restrict,announce:a.announce,ephemeralDuration:a.ephemeralDuration,membershipApprovalMode:a.membershipApprovalMode,reportToAdminMode:a.reportToAdminMode,growthLockExpiration:a.growthLockExpiration,growthLockType:a.growthLockType,noFrequentlyForwarded:a.noFrequentlyForwarded,subject:c,participants:a.participants.map(function(a){return{id:a.id,isAdmin:a.isAdmin,isSuperAdmin:a.isSuperAdmin}})}})});return h.apply(this,arguments)}function c(a,b,c,e){return d("WAWebGroupInviteV4Job").joinGroupViaInviteV4(a,b,c,e)}function e(a,b){return d("WAWebGroupInviteV4Job").revokeGroupInviteV4(a,b)}function f(a){return d("WAWebApiGroupInviteV4Store").getPendingParticipants(a)}g.queryGroupInviteV4Info=a;g.joinGroupViaInviteV4=c;g.revokeGroupInviteV4=e;g.getPendingParticipants=f}),98);
__d("WAWebChangePresenceHandlerAction",["Promise","WAWebApiChat","WAWebApiContact","WAWebChatCollection","WAWebPnhGatingUtils","WAWebPresenceCollection","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=25e3;function j(a,b){var c=a.type;(c==="typing"||c==="recording_audio")&&(a.type=b.isOnline?"available":"unavailable")}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=!0);var e=a.id;if(e.isUser()&&d("WAWebPnhGatingUtils").isMatFullyEnabled()){var f=(yield d("WAWebApiChat").getMatChatIncomingMessage(e));e=d("WAWebWidFactory").toUserWid(f)}if(!d("WAWebUserPrefsMeUser").isMeAccount(e)){f=d("WAWebPresenceCollection").PresenceCollection.get(e);f&&(l(f,a),c&&f.set({stale:!1}))}return(h||(h=b("Promise"))).resolve()});return k.apply(this,arguments)}function l(a,c){var e=!1;typeof c.type==="undefined"?c.type=a.chatstate.type||"unavailable":c.type==="idle"&&(e=!0,c.type=a.isOnline?"available":"unavailable");a.isGroup&&c.type!=="available"&&!e&&(c.updateTime=Date.now());var f;if(a.isGroup){var g=c.participant;if(g==null)return;var h=c.id,k=b("WAWebChatCollection").ChatCollection;k=k.get(h);if(k==null)return;if(g.isLid()&&d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(g))==null)return;c.id=g;c.participant=void 0;f=a.chatstates.gadd(c.id)}else f=a.chatstate;(!e||f.type==="typing"||f.type==="recording_audio")&&f.set(c);f.expireTimerId&&self.clearTimeout(f.expireTimerId);f.type==="typing"||f.type==="recording_audio"?f.expireTimerId=self.setTimeout(function(){return j(f,a)},i):f.expireTimerId=void 0;h=a.forceDisplay||a.isOnline||a.isUser&&!a.chatstate.deny;a.set({hasData:!0,isSubscribed:!0,forceDisplay:h})}g["default"]=a}),98);
__d("WAWebAddOnsUpdateAddOnAcksApi",["Promise","WAAckLevel","WANullthrows","WATypeUtils","WAWebBackendApi","WAWebDBAddOnProviders","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).allSettled(Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];b=c("WANullthrows")(d("WAWebDBAddOnProviders").getProviderForAddOnType(b));return b.updateAcks==null?void 0:b.updateAcks(a,function(){return!0})})));for(a of a)if(a.status==="rejected")throw a.reason});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).allSettled(Array.from(a).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var e=c("WANullthrows")(d("WAWebDBAddOnProviders").getProviderForAddOnType(b));e=(yield e.updateAcks==null?void 0:e.updateAcks(a,function(a,b){return k(a.ack,b.ack)}));if(e==null||e.length===0)return;return[b,e]});return function(b){return a.apply(this,arguments)}}())));var e=new Map(a.map(function(a){return a.value}).filter(Boolean));d("WAWebBackendApi").frontendFireAndForget("updateAddOnCollectionAcks",{updatesByType:e});for(e of a)if(e.status==="rejected")throw e.reason});return j.apply(this,arguments)}function k(a,b){return d("WATypeUtils").isNumber(b)&&(a==null||b>a||b===d("WAAckLevel").ACK.FAILED)}g.updateAddOnAcks=a;g.maybeUpdateAddOnAcks=e}),98);
__d("WAWebAddOnsUpdateSendStatesAction",["Promise","WAWebAddOnsUpdateAddOnAcksApi","WAWebCommentCollection","WAWebFlattenedReactionCollection","WAWebFlattenedReactionGatingUtils","WAWebMessageAddOnType","WAWebMsgKey","WAWebMsgType","WAWebPinInChatCollection","WAWebPollsPollVoteCollection","WAWebReactionsCollection","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){var c=l(a);if(c==null)return;d("WAWebAddOnsUpdateAddOnAcksApi").maybeUpdateAddOnAcks(new Map([[c,[{msgKey:a.id.toString(),ack:b}]]]))}function e(a,c){var d=l(a);return d==null?(h||(h=b("Promise"))).resolve():i(new Map([[d,[babelHelpers["extends"]({msgKey:a.id.toString()},c)]]]))}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map();for(var c of a){var e=c[0],f=c[1];f=f.map(function(a){return a.ack==null?null:{msgKey:a.msgKey,ack:a.ack}}).filter(Boolean);b.set(e,f)}yield d("WAWebAddOnsUpdateAddOnAcksApi").updateAddOnAcks(b);k(a)});return j.apply(this,arguments)}function k(a){for(a of a){var b=a[0],d=a[1];for(d of d){var e=m(b,c("WAWebMsgKey").from(d.msgKey));if(e==null)continue;d.ack!=null&&(e.ack=d.ack);d.isSendFailure!=null&&(e.isSendFailure=d.isSendFailure)}}}function l(a){switch(a.type){case d("WAWebMsgType").MSG_TYPE.REACTION:case d("WAWebMsgType").MSG_TYPE.REACTION_ENC:return d("WAWebMessageAddOnType").MessageAddOnType.Reaction;case d("WAWebMsgType").MSG_TYPE.POLL_UPDATE:if(a.subtype==="poll_vote")return d("WAWebMessageAddOnType").MessageAddOnType.PollVote;break;case d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE:return d("WAWebMessageAddOnType").MessageAddOnType.PinMessage;case d("WAWebMsgType").MSG_TYPE.COMMENT:return d("WAWebMessageAddOnType").MessageAddOnType.Comment}return null}function m(a,b){switch(a){case d("WAWebMessageAddOnType").MessageAddOnType.Reaction:return d("WAWebFlattenedReactionGatingUtils").isFlattenedReactionsEnabled()?d("WAWebFlattenedReactionCollection").FlattenedReactionsCollection.get(b):d("WAWebReactionsCollection").ReactionsCollection.getSenderByMsgKey(b);case d("WAWebMessageAddOnType").MessageAddOnType.PollVote:return d("WAWebPollsPollVoteCollection").PollVoteCollection.getByMsgKey(b);case d("WAWebMessageAddOnType").MessageAddOnType.PinMessage:return d("WAWebPinInChatCollection").PinInChatCollection.getByMsgKey(b);case d("WAWebMessageAddOnType").MessageAddOnType.Comment:return d("WAWebCommentCollection").CommentCollection.getByMsgKey(b);case d("WAWebMessageAddOnType").MessageAddOnType.KeepInChat:case d("WAWebMessageAddOnType").MessageAddOnType.MessageEdit:case d("WAWebMessageAddOnType").MessageAddOnType.ReactionEnc:case d("WAWebMessageAddOnType").MessageAddOnType.Unknown:return null}}g.maybeUpdateAddOnAckForMsgAction=a;g.updateAddOnSendStatesForMsgAction=e;g.updateAddOnSendStatesAction=i;g.updateAddOnCollectionsSendStatesAction=k}),98);
__d("WAWebFutureproofReparseMsgsAction",["Promise","WALogger","WAWebAddonGatingUtils","WAWebDBAddOnProviders","WAWebDBMessageSerialization","WAWebHandleMsgProcess","WAWebMsgGetters","WAWebMsgType","WAWebNewsletterReparseMsgAction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["reparseFutureproof: processFutureproof error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["reparseFutureproof: reparse error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["reparseFutureproof: No futureproof buffer"]);k=function(){return a};return a}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=a.futureproofBuffer,c=a.futureproofParams;if(d("WAWebMsgGetters").getIsNewsletterMsg(a))return yield d("WAWebNewsletterReparseMsgAction").reparseNewsletterMsg(a);if(b!=null){c&&(yield d("WAWebHandleMsgProcess").processDecryptedMessageProto(babelHelpers["extends"]({},c,{decrypted:b,reparsing:!0})));return a}d("WALogger").DEV(k());return null}catch(a){d("WALogger").ERROR(j(),a);return null}});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var c=b("WAWebDBAddOnProviders"),e=c.getAddOnProviderForFutureproofMsg,f=[],g=[];a.forEach(function(a){var b=d("WAWebDBMessageSerialization").messageFromDbRow(a),c=d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(a.type)||Boolean(e(b));c?f.push(b):a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&g.push(b)});yield (h||(h=b("Promise"))).all(g.map(function(a){return l(a)}));yield h.all(f.map(function(a){return l(a)}))}catch(a){d("WALogger").ERROR(i())}});return n.apply(this,arguments)}g.reparseFutureproof=l;g.processFutureproof=a}),98);
__d("WAWebDisplayType",[],(function(a,b,c,d,e,f){var g={CONVERSATION:"CONVERSATION",MSG_INFO:"MSG_INFO",STARRED_MSGS:"STARRED_MSGS",KEPT_MSGS:"KEPT_MSGS",GALLERY:"GALLERY",GALLERY_LINKS:"GALLERY_LINKS",REPLY_STAGE:"REPLY_STAGE",QUOTED_MSG:"QUOTED_MSG",CONTACT_CARD:"CONTACT_CARD",ORDER:"ORDER",STATUS:"STATUS",EDITING:"EDITING",ANNOUNCEMENT:"ANNOUNCEMENT",NEWSLETTER:"NEWSLETTER",NEWSLETTER_PREVIEW:"NEWSLETTER_PREVIEW",CHANNEL_ALERTS_MSGS:"CHANNEL_ALERTS_MSGS",REPORTED_MSG:"REPORTED_MSG",BOT_INVOKE_RESPONSE:"BOT_INVOKE_RESPONSE",ALL_REPLIES:"ALL_REPLIES",BOT_REELS_PLUGIN:"BOT_REELS_PLUGIN"};function a(a){return a===g.ANNOUNCEMENT||a===g.NEWSLETTER}var h=[g.CONVERSATION,g.ANNOUNCEMENT,g.NEWSLETTER,g.BOT_INVOKE_RESPONSE,g.ALL_REPLIES];function b(a){return i.includes(a)}var i=[g.STARRED_MSGS,g.REPORTED_MSG,g.CONTACT_CARD,g.GALLERY,g.GALLERY_LINKS];function c(a){return h.includes(a)}f.DISPLAY_TYPE=g;f.isWideDisplay=a;f.isMsgGalleryDisplay=b;f.isConversationDisplay=c}),66);
__d("WAWebMediaLinkPreviewUtils",["WATimeUtils","WAWebDisplayType"],(function(a,b,c,d,e,f,g){var h=30*24*60*60;function i(a){a=d("WATimeUtils").unixTime()-a>h;return a}var j=7/5;function a(a,b){var c=Boolean(a.thumbnailDirectPath||a.thumbnailHQ)&&a.thumbnailHeight!=null&&a.thumbnailWidth!=null;if(!c)return!1;c=i(a.t);if(c)return!1;c=b===d("WAWebDisplayType").DISPLAY_TYPE.GALLERY;if(c)return!1;return b===d("WAWebDisplayType").DISPLAY_TYPE.STATUS&&a.thumbnailHeight!=null&&a.thumbnailWidth!=null?a.thumbnailWidth/a.thumbnailHeight>=j:!0}g.HQ_PREVIEW_LIFESPAN=h;g.hqLinkPreviewExpired=i;g.STATUS_IMAGE_RATIO_THRESHOLD=j;g.displayHighQualityLinkPreview=a}),98);
__d("WAWebProcessMultipleMsgsAction",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebAddAndReorderMsgsActionsUtils","WAWebBotGenTypingIndicatorMsg","WAWebBotTypes","WAWebChatCollection","WAWebFindChatAction","WAWebFrontendMsgGetters","WAWebGetMsgUpdatesActionsUtils","WAWebMedia","WAWebMediaAutoDownloadQueue","WAWebMediaDownloadMmsThumbnail","WAWebMediaLinkPreviewUtils","WAWebMediaTypes","WAWebMiscGatingUtils","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgModelUtils","WAWebMsgType","WAWebRecentStickerCollection","WAWebRecentStickerCollectionMd","WAWebStatusV3Collection","WAWebStickerModel","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Get empty message with id ","."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sticker] Unexpected null media key"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processed "," recent sticker messages"]);l=function(){return a};return a}function a(a,b,c,d,e){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){var j,m=(yield c("WAWebGetMsgUpdatesActionsUtils")(a,e,f,i)),o=m.filteredRecs,p=m.reorderRecs;m=m.updates;yield (h||(h=b("Promise"))).all(m);m=b("WAWebChatCollection").ChatCollection;var q=b("WAWebFindChatAction").findChat,r=b("WAWebMsgCollection").MsgCollection;if(o.length===0&&p.length===0){if(a&&f.pendingMsgsDone===!0){m=m.get(a);m&&(m.pendingMsgs=!1)}return e.map(function(a){return r.get(a.id)}).filter(Boolean)}if(!a)return n(o).then(function(){return e.reduce(function(a,b){b=r.get(b.id);b!=null&&d("WAWebFrontendMsgGetters").getChat(b)!=null&&a.push(b);return a},[])});m=e[0];if(c("WAWebWid").isStatusV3(a)){m=m.id.fromMe?d("WAWebUserPrefsMeUser").getMaybeMeUser():m.author;m=b("WAWebStatusV3Collection").StatusV3Collection.find(m)}else m=q(a,g);var s=(yield m);q=(yield n(o));g=f.add==="after"||f.add==="last";m=!f.isHistory;var t;o=!1;var u=s.id.isBot();j=((j=s.contact.businessProfile)==null?void 0:j.isBizBot3p)===!0;if((u||j)&&f.isHistory===!1){u=s.msgs.last();(u==null?void 0:u.subtype)===d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE&&(u==null?void 0:u["delete"]({skipUpdatingSortTime:!0}))}q.forEach(function(a){a.subtype==="biz_bot_1p_disclosure"?s.set({bizBotSystemMsgType:d("WAWebBotTypes").BizBotType.BIZ_1P}):a.subtype==="biz_bot_3p_disclosure"&&s.set({bizBotSystemMsgType:d("WAWebBotTypes").BizBotType.BIZ_3P})});f.add==="unread"?(j=i,s.msgChunks.push(j),t=f.firstUnreadKey):f.add==="last"&&f.resume===!0?(j=i,o=!0):j=typeof i==="function"?i():i;c("WAWebAddAndReorderMsgsActionsUtils")(e,q,p,s,g,j||s.msgs,t,o);f.pendingMsgsDone===!0&&(s.pendingMsgs=!1);m&&c("WAWebWid").isBroadcast(a)&&!c("WAWebWid").isStatusV3(a)&&q.forEach(function(a){if(!a)return;a.recvFresh&&!d("WAWebMsgGetters").getIsNotification(a)&&d("WAWebMsgModelUtils").broadcastFanout(a)});if(!((u=f.isHistory)!=null?u:!1)){i=q.map(function(a){var b,c=d("WAWebMsgGetters").getIsSentByMe(a)&&a.type===d("WAWebMsgType").MSG_TYPE.STICKER;if(!c||a.isAvatar===!0)return;c=a.mediaData;var e=a.mediaObject,f=a.id.toString();e=e==null?void 0:e.entries.entries[0];return{sticker:new(d("WAWebStickerModel").StickerModel)({id:c.filehash,directPath:c.directPath,filehash:c.filehash,encFilehash:(b=e==null?void 0:e.getEncfilehash())!=null?b:c.encFilehash,mediaKey:(b=e==null?void 0:e.getMediaKey())!=null?b:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp!=null?c.mediaKeyTimestamp:d("WATimeUtils").unixTime(),width:c.fullWidth,height:c.fullHeight,size:c.size,mimetype:c.mimetype,type:d("WAWebMediaTypes").OUTWARD_TYPES.STICKER,index:0}),timestamp:(e=a.stickerSentTs)!=null?e:0,msgId:f}}).filter(Boolean);var v=b("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd;d("WALogger").LOG(l(),i.length);i.forEach(function(a){return v.addNewSticker(a.sticker,a.msgId,a.timestamp)})}p=q.map(function(a){var b=a.isNewMsg&&d("WAWebMsgGetters").getIsSentByMe(a)&&a.type===d("WAWebMsgType").MSG_TYPE.STICKER,c=a.mediaData;if(!b)return;b=a.mediaKey;if(b==null){d("WALogger").ERROR(k()).sendLogs("sticker-unexpected-null-media-key");return}return{id:c.filehash,directPath:c.directPath,filehash:c.filehash,encFilehash:c.encFilehash,mediaKey:b,mediaKeyTimestamp:c.mediaKeyTimestamp!=null?c.mediaKeyTimestamp:d("WATimeUtils").unixTime(),width:c.fullWidth,height:c.fullHeight,size:c.size,mimetype:c.mimetype,type:d("WAWebMediaTypes").OUTWARD_TYPES.STICKER,index:0}}).filter(Boolean);d("WAWebRecentStickerCollection").RecentStickerCollection.enqueue(p);d("WAWebMiscGatingUtils").webMediaAutoDownloadEnabled()&&!c("WAWebWid").isStatusV3(a)&&q.map(function(a){return d("WAWebFrontendMsgGetters").getAsAutoDownloadableMedia(a)}).filter(Boolean).forEach(function(a){d("WAWebMediaAutoDownloadQueue").AutoDownloadQueue.enqueue(a,d("WAWebMediaAutoDownloadQueue").AutoDownloadTypes.MEDIA)});d("WAWebABProps").getABPropConfigValue("download_document_thumb_mms_enabled")&&q.map(function(a){return d("WAWebFrontendMsgGetters").getAsDoc(a)}).filter(Boolean).forEach(function(a){d("WAWebMiscGatingUtils").webMediaAutoDownloadEnabled()?d("WAWebMediaAutoDownloadQueue").AutoDownloadQueue.enqueue(a,d("WAWebMediaAutoDownloadQueue").AutoDownloadTypes.MMS_THUMBNAIL):void c("WAWebMediaDownloadMmsThumbnail")({chat:null,msg:a,isPreload:!0})});q.map(function(a){return d("WAWebFrontendMsgGetters").getAsUrl(a)}).filter(Boolean).forEach(function(a){if(d("WAWebMediaLinkPreviewUtils").hqLinkPreviewExpired(a.t))return;d("WAWebMiscGatingUtils").webMediaAutoDownloadEnabled()?d("WAWebMediaAutoDownloadQueue").AutoDownloadQueue.enqueue(a,d("WAWebMediaAutoDownloadQueue").AutoDownloadTypes.MMS_THUMBNAIL,null):void c("WAWebMediaDownloadMmsThumbnail")({msg:a,isPreload:!0,chat:null})});if(d("WAWebABProps").getABPropConfigValue("download_status_thumb_mms_enabled")&&c("WAWebWid").isStatusV3(a)){g=d("WAWebUserPrefsGeneral").getLastStatusUsage();j=1e3*60*60*24;(g==null||Date.now()-g<14*j)&&q.map(function(a){return d("WAWebFrontendMsgGetters").getAsImage(a)||d("WAWebFrontendMsgGetters").getAsVideo(a)}).filter(Boolean).forEach(function(a){d("WAWebMiscGatingUtils").webMediaAutoDownloadEnabled()?d("WAWebMediaAutoDownloadQueue").AutoDownloadQueue.enqueue(a,d("WAWebMediaAutoDownloadQueue").AutoDownloadTypes.MMS_THUMBNAIL):void d("WAWebMedia").downloadStatusV3Thumbnail({msg:a,isPreload:!0})})}return e.map(function(a){return r.get(a.id)}).filter(Boolean)});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebMsgCollection").MsgCollection;c=c.add(a,{merge:!0});c=c.reduce(function(b,c,e){c==null&&d("WALogger").ERROR(j(),a[e].id).sendLogs("msgPrepWork-empty-message");c!=null&&b.push(c);return b},[]);yield (h||(h=b("Promise"))).all(c.map(function(a){return a.waitForPrep()["catch"](function(a){d("WALogger").ERROR(i(),String(a)).devConsole(a).sendLogs("bad-msg-prep")})}));return c});return o.apply(this,arguments)}g._processMultipleMessages=a}),98);
__d("WAWebErrorType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NoError","EditWindowExpired"]);f.SendFailureErrorCode=a}),66);
__d("WAWebRevokeMsgConstants",["WATimeUtils"],(function(a,b,c,d,e,f,g){a=2.5*d("WATimeUtils").DAY_SECONDS;b=12*d("WATimeUtils").HOUR_SECONDS;c=30*d("WATimeUtils").DAY_SECONDS;g.REVOKE_WINDOW=a;g.REVOKE_WINDOW_RECEIVER_MARGIN=b;g.NEWSLETTER_REVOKE_WINDOW=c}),98);
__d("WAWebSendRevokeMessageWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({SendRevokeMessage:[1348,{messageMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[1,d("WAWebWamEnumMessageType").MESSAGE_TYPE],revokeSendDelay:[3,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{SendRevokeMessage:[]});g.SendRevokeMessageWamEvent=a}),98);
__d("WAWebRevokeMsgAction",["Promise","WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebApiChat","WAWebBotGating","WAWebCmd","WAWebDBStoreRevokeMsgs","WAWebErrorType","WAWebFrontendMsgGetters","WAWebFtsClient","WAWebLabelCollection","WAWebMedia","WAWebMessageSendPerfReporter","WAWebMessageStore","WAWebMsgActionCapability","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModel","WAWebMsgModelUtils","WAWebMsgType","WAWebOrchestratorNonPersistedJob","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebRevokeMsgConstants","WAWebSendMsgRecordAction","WAWebSendMsgResultAction","WAWebSendRevokeMessageWamEvent","WAWebStateUtils","WAWebUpdateLastAddOnPreviewChatAction","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime","err","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendRevoke path for associated with bot plugin msg"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["_sendRevoke: failed to storeMessages into storage"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot fanout revoke: "," ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["revoke: outside of revoke window, "," has not been revoked"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot revoke] sendAssociatedBotPluginRevoke: ",""]);m=function(){return a};return a}function a(a,b,c){return o(d("WAWebStateUtils").unproxy(a),b,c)}function n(a,b){return r(d("WAWebStateUtils").unproxy(a),b)}function o(a,b,c,d){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var k;g===void 0&&(g=!1);if(e===d("WAWebCmd").Revoke.Sender&&!a.id.fromMe&&!d("WAWebMsgActionCapability").canBotResponseBeRevokeByInvoker(a))return(h||(h=b("Promise"))).reject(c("err")("revoking received message"));k=a.id.remote.isGroup()&&((k=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata)==null?void 0:k.isLidAddressingMode);var l=void 0;a.id.remote.isGroup()&&(l=k===!0?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").getMeUser());var m=new(c("WAWebMsgKey"))({id:yield c("WAWebMsgKey").newId(),remote:a.id.remote,fromMe:!0,participant:l}),o=q(e),p=d("WATimeUtils").unixTime(),r={id:m,from:k===!0?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").getMeUser(),to:a.id.remote,t:p,type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:o,protocolMessageKey:a.id,clearMedia:!!f,local:!0,revokeDuration:p-a.t,revokeTimestamp:p};if(d("WAWebBotGating").isBotEnabled()){l=null;k=(e=a.mentionedJidList)==null?void 0:e.find(function(a){return a.isBot()});f=d("WAWebMsgGetters").getSender(a);f&&f.isBot()?l=f:k!=null&&a.isForwarded!==!0&&(l=k);r.botRespOrInvocationRevokeBotWid=l;a.botTargetSenderJid instanceof c("WAWebWid")&&(r.botTargetSenderJid=a.botTargetSenderJid)}var s=new(d("WAWebMsgModel").Msg)(r);s.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:s.to,mediaType:s.getWamMediaType(),messageType:s.getWamMessageType()});s.wamMessageSendPerfReporter.setIsRevokeMessage(!0);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendMessage",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e;(e=s.wamMessageSendPerfReporter)==null?void 0:e.startSavedStage();yield d("WAWebMessageStore").storeMessages([r],d("WAWebFrontendMsgGetters").getChat(a).id);(e=s.wamMessageSendPerfReporter)==null?void 0:e.postSavedStage()}catch(a){d("WALogger").ERROR(j()).verbose().devConsole(a).sendLogs("storeMessages failed");throw a}e=(yield d("WAWebSendMsgRecordAction").sendMsgRecord(s));e=e.messageSendResult;if(g){d("WALogger").LOG(i());throw c("err")("Expected exit for associated with bot plugin msg")}if(e===d("WAWebSendMsgResultAction").SendMsgResult.OK){new(d("WAWebSendRevokeMessageWamEvent").SendRevokeMessageWamEvent)({messageType:a.getWamMessageType(),messageMediaType:a.getWamMediaType(),revokeSendDelay:s.revokeDuration}).commit();return d("WAWebDBStoreRevokeMsgs").processRevokeMsgs([{revokeMsgKey:a.id,newMsgKey:m,timestamp:a.t,revokeTimestamp:p,subtype:o,sender:d("WAWebUserPrefsMeUser").getMeUser(),disappearingModeInitiator:a.disappearingModeInitiator,ephemeralDuration:a.ephemeralDuration,ephemeralSettingTimestamp:a.ephemeralSettingTimestamp}]).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=b("WAWebPersistedJobManager").getJobManager;d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview([a.id.toString()]);yield c().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(d("WAWebFrontendMsgGetters").getChat(a).id.toString(),[a.id.toString()]));n(a,{msgKey:m,subtype:o,sender:d("WAWebUserPrefsMeUser").getMeUser(),revokeTimestamp:p});return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.OK}}))}return(h||(h=b("Promise"))).resolve({messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()});return p.apply(this,arguments)}function e(a,b){void o(d("WAWebStateUtils").unproxy(a),b,!1,!0)["catch"](function(a){d("WALogger").LOG(m(),a.message)})}function q(a){switch(a){case d("WAWebCmd").Revoke.Sender:return"sender_revoke";case d("WAWebCmd").Revoke.Admin:return"admin_revoke"}}function r(a,e){var f,g,h=d("WAWebFrontendMsgGetters").getMaybeChat(a),i=(h==null?void 0:h.isNewsletter)?d("WAWebRevokeMsgConstants").NEWSLETTER_REVOKE_WINDOW:d("WAWebRevokeMsgConstants").REVOKE_WINDOW;i=i+d("WAWebRevokeMsgConstants").REVOKE_WINDOW_RECEIVER_MARGIN;i=d("WATimeUtils").unixTime()-a.t<=i;if(!i){d("WALogger").LOG(l(),a.id.toString());return}b("WAWebLabelCollection").LabelCollection.removeAllLabelsMD(a);d("WAWebMsgModelUtils").typeIsMms(a)&&d("WAWebMedia").deregisterMsg(a);h==null?void 0:h.removeFromCollection(a);a.trigger("revoked");d("WAWebMsgGetters").clearMsgGetterCacheFor(a);d("WAWebFrontendMsgGetters").clearFrontendMsgGetterCacheFor(a);var j=a.getCollection();i=a.id;a.msgChunk&&a.msgChunk.replaceId(i,e.msgKey);j.replaceId(i,e.msgKey);f=(f=h==null?void 0:h.isUnreadMsg(a))!=null?f:!1;g=(g=h==null?void 0:h.isActiveUnreadMsg(a))!=null?g:!1;var m={isOverwrittenByRevoke:!0,id:e.msgKey,type:d("WAWebMsgType").MSG_TYPE.REVOKED,subtype:e.subtype==="admin_revoke"?"admin":"sender",revokeSender:e.sender,revokeTimestamp:e.revokeTimestamp,protocolMessageKey:i,body:void 0,caption:void 0,clientUrl:void 0,deprecatedMms3Url:void 0,loc:void 0,lat:void 0,lng:void 0,isLive:void 0,accuracy:void 0,speed:void 0,degrees:void 0,comment:void 0,sequence:void 0,shareDuration:void 0,finalLat:void 0,finalLng:void 0,finalAccuracy:void 0,finalThumbnail:void 0,finalSpeed:void 0,finalDegrees:void 0,finalTimeOffset:void 0,title:void 0,description:void 0,canonicalUrl:void 0,matchedText:void 0,thumbnail:void 0,richPreviewType:void 0,doNotPlayInline:void 0,quotedMsg:void 0,quotedStanzaID:void 0,quotedRemoteJid:void 0,quotedParticipant:void 0,mediaData:void 0,mentionedJidList:void 0,groupMentions:void 0,vcardList:void 0,star:!1,kicState:void 0,kicTimestampMs:void 0,kicKey:void 0,errorCode:d("WAWebErrorType").SendFailureErrorCode.NoError,isSendFailure:!1};a.set(m);a.trigger("change:msgKey",{newKey:e.msgKey,oldKey:i});h&&(i.equals(h.lastReceivedKey)&&(h.lastReceivedKey=e.msgKey),h.composeQuotedMsg===a&&(h.composeQuotedMsg=null),f&&(h.unreadCount=Math.max(h.unreadCount-1,0),h.unreadDividerOffset+=1,d("WAWebApiChat").reduceChatUnreadCount(h.id.toString())),g&&(h.activeUnreadCount=Math.max(h.activeUnreadCount-1,0)));if(c("WAWebWid").isBroadcast(i.remote)){m=d("WAWebMsgModelUtils").getBroadcastFanoutKeys(i);f=d("WAWebMsgModelUtils").getBroadcastFanoutKeys(e.msgKey);if(!m||!f||m.length!==f.length){d("WALogger").LOG(k(),String(m),String(f)).devConsole(m,f);return}c("lodash").zip(m,f).forEach(function(a){var b=j.get(a[0]);b&&n(b,{msgKey:a[1],subtype:e.subtype,sender:e.sender})});d("WAWebFtsClient").ftsClient.purge([String(a.rowId)])["catch"](function(){});g=b("WAWebPersistedJobManager").getJobManager;m=h?h.id.toString():a.id.remote.toString();d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview([i.toString()]);g().fireAndForget(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(m.toString(),[i.toString()]))}}g.sendRevoke=a;g.revoke=n;g.sendAssociatedBotPluginRevoke=e}),98);
__d("WAWebProcessAddonsJob",["WAJobOrchestratorTypes","WAWebDBProcessEditProtocolMsgs","WAWebDBProcessPollUpdateMsgs","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("processPollUpdateMsgs",function(a){return d("WAWebDBProcessPollUpdateMsgs").processPollUpdateMsgs(a.msgs)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({msgs:a});yield a});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("processEditProtocolMsgs",function(a){return d("WAWebDBProcessEditProtocolMsgs").processEditProtocolMsgs(a.msgs)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({msgs:a});yield a});return i.apply(this,arguments)}g.processPollUpdatesMsgsJob=a;g.processEditProtocolMsgsJob=c}),98);
__d("WAWebSendMessageEditAction",["Promise","WAErr","WAJobOrchestratorTypes","WALogger","WANullthrows","WATimeUtils","WAWebDBMessageDelete","WAWebDBMsgUtils","WAWebDBUpdateMessageTable","WAWebErrorType","WAWebFrontendMsgGetters","WAWebGroupMsgSendUtils","WAWebMessageEditGatingUtils","WAWebMessageEditUtils","WAWebMessageSendPerfReporter","WAWebMessageSendReporter","WAWebMessageStore","WAWebMsgActionCapability","WAWebMsgDataFromModel","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModel","WAWebMsgModelFromData","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebNewsletterSendMsgAction","WAWebOrchestratorNonPersistedJob","WAWebProcessAddonsJob","WAWebSendMsgRecordAction","WAWebSendMsgResultAction","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit][sendMsgEditRecord] parent msg status to send edit protocol message"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit][sendMsgEditRecord] failed to send edit protocol message"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit][sendMsgEditRecord] edit protocol msg sent with result"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit][sendMessageEdit] failed to store protocol msg data in message table"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] handle send message edit"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] send is disabled, "," will not be edited"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit][resendLatestEdit] re-sending edit protocol message failed, the last edited msg was not found"]);o=function(){return a};return a}function p(a,b,c){d("WAWebMessageEditUtils").isParentWithinEditProcessingWindow({parentTsInSeconds:a.t,editTsInSeconds:c,msgKey:a.id})?b.updateErrorCode(d("WAWebErrorType").SendFailureErrorCode.NoError):(a.updateErrorCode(d("WAWebErrorType").SendFailureErrorCode.EditWindowExpired),b.updateErrorCode(d("WAWebErrorType").SendFailureErrorCode.EditWindowExpired))}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b!=null&&(yield d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,{count:b}))});return r.apply(this,arguments)}function a(a){var c=d("WAWebMsgGetters").getLatestEditMsgKey(a);return c==null||!d("WAWebMsgActionCapability").canEditText(a)?(h||(h=b("Promise"))).resolve():d("WAWebDBMsgUtils").getMsgByMsgKey(c).then(function(b){if(b)return v(d("WAWebStateUtils").unproxy(a),d("WAWebMsgModelFromData").msgModelFromMsgData(b))})["catch"](function(a){d("WALogger").DEV(o()).devConsole({error:a})})}function e(a,e,f){if(d("WAWebMsgGetters").getIsNewsletterMsg(a)?!d("WAWebNewsletterGatingUtils").isNewsletterMessageEditingEnabled():!d("WAWebMessageEditGatingUtils").sendTextEditEnabled()){d("WALogger").DEV(n(),a.id.toString());return(h||(h=b("Promise"))).resolve()}d("WALogger").DEV(m()).devConsole({msg:a,text:e,options:f});if(!d("WAWebMsgActionCapability").canEditText(a)&&!d("WAWebMsgActionCapability").canEditCaption(a))return(h||(h=b("Promise"))).reject(c("WAErr")("Cannot edit message"));e=s(d("WAWebStateUtils").unproxy(a),e,f);return x(d("WAWebStateUtils").unproxy(a),e)}function s(a,b,e){var f,g=d("WAWebFrontendMsgGetters").getChat(a);f=g.id.isLid()||g.isGroup&&Boolean((f=g.groupMetadata)==null?void 0:f.isLidAddressingMode)?c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLidUser()):d("WAWebUserPrefsMeUser").getMeUser();g=g.isGroup?d("WAWebWidFactory").toUserWid(f):void 0;g=new(c("WAWebMsgKey"))({id:c("WAWebMsgKey").newId_DEPRECATED(),remote:a.id.remote,fromMe:!0,participant:g});var h=e.linkPreview,i=e.mentionedJidList;e=e.groupMentions;f={id:g,from:f,to:a.id.remote,type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"message_edit",protocolMessageKey:a.id,local:!0,t:d("WATimeUtils").unixTime(),mentionedJidList:i,groupMentions:e,latestEditMsgKey:g,latestEditSenderTimestampMs:d("WATimeUtils").unixTimeMs(),editMsgType:a.type,errorCode:d("WAWebErrorType").SendFailureErrorCode.NoError};switch(c("WANullthrows")(d("WAWebMessageEditUtils").getMsgEditType(a.type))){case d("WAWebMessageEditUtils").MsgEditType.TextEdit:f=babelHelpers["extends"]({},f,{body:b.trim(),title:(i=h==null?void 0:h.title)!=null?i:void 0,canonicalUrl:(e=h==null?void 0:h.canonicalUrl)!=null?e:void 0,matchedText:(g=h==null?void 0:h.matchedText)!=null?g:void 0,description:h==null?void 0:h.description,thumbnail:(a=h==null?void 0:h.thumbnail)!=null?a:void 0,richPreviewType:h==null?void 0:h.richPreviewType,doNotPlayInline:h==null?void 0:h.doNotPlayInline,inviteGrpType:h==null?void 0:h.inviteGrpType,thumbnailDirectPath:h==null?void 0:h.thumbnailDirectPath,thumbnailSha256:h==null?void 0:h.thumbnailSha256,thumbnailEncSha256:h==null?void 0:h.thumbnailEncSha256,thumbnailHeight:h==null?void 0:h.thumbnailHeight,thumbnailWidth:h==null?void 0:h.thumbnailWidth,mediaKey:(i=h==null?void 0:h.mediaKey)!=null?i:void 0,mediaKeyTimestamp:(e=h==null?void 0:h.mediaKeyTimestamp)!=null?e:void 0});break;case d("WAWebMessageEditUtils").MsgEditType.CaptionEdit:f=babelHelpers["extends"]({},f,{caption:b.trim()});break;case d("WAWebMessageEditUtils").MsgEditType.EventEdit:break}return f}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a.latestEditMsgKey&&(yield d("WAWebDBMessageDelete").removeMessagesFromHistory([a.latestEditMsgKey.toString()]));try{e.startSavedStage(),yield d("WAWebMessageStore").storeMessages([b],c),e.postSavedStage()}catch(a){d("WALogger").ERROR(l()).verbose().devConsole(a).sendLogs("storeSentMessageEdit failed");throw a}e.startRenderedStage();yield d("WAWebProcessAddonsJob").processEditProtocolMsgsJob([b]);e.postRenderedStage()});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("WAWebMsgGetters").getIsNewsletterMsg(a)?yield b("WAWebNewsletterSendMsgAction").sendNewsletterEditMsg(a,c):yield d("WAWebSendMsgRecordAction").sendMsgRecord(c),f=e.messageSendResult,g=e.t;e=e.count;d("WALogger").DEV(k()).devConsole({messageSendResult:f,t:g});if(f!==d("WAWebSendMsgResultAction").SendMsgResult.OK){d("WALogger").DEV(j()).devConsole({editProtocolMsg:c});return}p(a,c,g);yield q(a,e);a.updateAck(c.ack);a.isSendFailure=c.isSendFailure===!0||c.errorCode===d("WAWebErrorType").SendFailureErrorCode.EditWindowExpired;d("WALogger").DEV(i()).devConsole({msg:a})});return w.apply(this,arguments)}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=new(d("WAWebMsgModel").Msg)(c),f;if(a.to.isGroup()){var g=a.to.toString(),h=(yield d("WAWebGroupMsgSendUtils").getParticipantRecord(g));f=(yield d("WAWebGroupMsgSendUtils").getGroupData(g,h,!1))}e.wamMessageSendReporter=new(d("WAWebMessageSendReporter").MessageSendReporter)(e,{originalMessage:a,groupData:f});e.wamMessageSendPerfReporter=new(d("WAWebMessageSendPerfReporter").MessageSendPerfReporter)({chatWid:e.to,mediaType:e.getWamMediaType(),messageType:e.getWamMessageType()});var i=e.wamMessageSendPerfReporter;yield d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("sendMessageEdit",function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=b.msgData;b=b.chatId;yield t(d,c,b,i);yield v(a,e)});return function(a){return d.apply(this,arguments)}}(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({msgData:d("WAWebMsgDataFromModel").msgDataFromMsgModel(a),chatId:d("WAWebFrontendMsgGetters").getChat(a).id})});return y.apply(this,arguments)}g.resendLatestEdit=a;g.sendMessageEdit=e;g.createEditMsgData=s;g.sendMsgEditRecord=v;g.addAndSendMessageEdit=x}),98);
__d("WAWebContactBlockedErrorAction",["WACustomError"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b)||this;b.contact=c;return b}return b}(d("WACustomError").customError("ContactBlocked"));g["default"]=a}),98);
__d("WAWebOutgoingMessageTone",["invariant","WAWebUserPrefsNotifications","bx","gkx"],(function(a,b,c,d,e,f,g,h){c("gkx")("26258")&&h(0,56260);var i=new window.Audio(c("bx").getURL(c("bx")("9562")));function a(){d("WAWebUserPrefsNotifications").getOutgoingMessageSound()&&i.play()["catch"](function(){})}g.playOutgoingMessageTone=a}),98);
__d("WAWebChatUtmCache",[],(function(a,b,c,d,e,f){a=function(){function a(){this.utmReadChatIds=new Set()}var b=a.prototype;b.deleteChatId=function(a){this.utmReadChatIds["delete"](a)};b.hasRead=function(a){return this.utmReadChatIds.has(a)};b.read=function(a){this.utmReadChatIds.add(a)};b.clearAll=function(){this.utmReadChatIds.clear()};return a}();b=new a();f["default"]=b}),66);
__d("WAWebUtmBizPrefs",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function a(a,b){var e=h(),f=Date.now();e[a]=babelHelpers["extends"]({addedTime:f},b);c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHAT_UTM,JSON.stringify(e))}function b(a){var b=h();delete b[a];c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHAT_UTM,JSON.stringify(b))}function e(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.CHAT_UTM);if(b==null)return null;try{return JSON.parse(b)[a]}catch(a){return null}}function h(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.CHAT_UTM);if(a==null)return{};try{return(a=JSON.parse(a))!=null?a:{}}catch(a){return{}}}function f(){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHAT_UTM,JSON.stringify({}))}g.persistUtmtoLocalStorage=a;g.removeUtmFromLocalStorage=b;g.getUtmFromLocalStorage=e;g.getAllUtmsFromLocalStorage=h;g.clearAllUtmFromLocalStorage=f}),98);
__d("WAWebUtmMessageSendWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({UtmMessageSend:[4018,{businessPhoneNumber:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"private",0]},{UtmMessageSend:[]});g.UtmMessageSendWamEvent=a}),98);
__d("WAWebUpdateUtmAction",["WAWebApiContact","WAWebBizGatingUtils","WAWebChatUtmCache","WAWebUtmBizPrefs","WAWebUtmMessageSendWamEvent","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a,b){if(!d("WAWebBizGatingUtils").isUtmTrackingEnabled())return;a=a.toString();d("WAWebUtmBizPrefs").persistUtmtoLocalStorage(a,b);c("WAWebChatUtmCache").deleteChatId(a)}function b(a){var b=a.toString();d("WAWebUtmBizPrefs").removeUtmFromLocalStorage(b);c("WAWebChatUtmCache").read(b);h(a)}function h(a){var b;b=a.isLid()?(b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a)))==null?void 0:b.user:a.user;b=parseInt((a=b)!=null?a:"0",10);a=new(d("WAWebUtmMessageSendWamEvent").UtmMessageSendWamEvent)({businessPhoneNumber:b});a.commit()}function e(a){if(!d("WAWebBizGatingUtils").isUtmTrackingEnabled())return null;a=a.toString();if(c("WAWebChatUtmCache").hasRead(a))return null;var b=d("WAWebUtmBizPrefs").getUtmFromLocalStorage(a);b==null&&c("WAWebChatUtmCache").read(a);return b}g.addUtmToChat=a;g.clearUtmAfterMessageSent=b;g.getUtmForChat=e}),98);
__d("WAWebUtmBizUtils",["WAWebBizGatingUtils","WAWebMsgGetters","WAWebStateUtils"],(function(a,b,c,d,e,f,g){function a(a,b){return a.contact.isEnterprise&&!j(b)&&!h(a,b)}function h(a,b){a=i(a);if(a==null||a.t==null)return!1;a=a.t*1e3;return a>b.addedTime}function i(a){a=d("WAWebStateUtils").unproxy(a);for(var b=a.msgs.length-1;b>=0;b--){var c=a.msgs.at(b);if(c&&!d("WAWebMsgGetters").getIsSentByMe(c))return c}return void 0}function j(a){var b=Date.now(),c=d("WAWebBizGatingUtils").utmTrackingExpirationInHours()*60*60*1e3;return a.addedTime+c<=b}g.isUtmValid=a;g.hasUtmExpired=j}),98);
__d("WAWebWebcMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcMessageSend:[2072,{messageIsForward:[3,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],messageMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendT:[4,d("WAWebWamCodegenUtils").TYPES.TIMER],messageType:[1,d("WAWebWamEnumMessageType").MESSAGE_TYPE]},[1,1,1],"regular"]},{WebcMessageSend:[]});g.WebcMessageSendWamEvent=a}),98);
__d("WAWebSendMsgRecordAction",["Promise","WAErrors","WAFilteredCatch","WALogger","WANullthrows","WAWebAck","WAWebAddOnsUpdateSendStatesAction","WAWebAddonSendMsgData","WAWebBackendErrors","WAWebBlocklistCollection","WAWebBotGating","WAWebBotGenTypingIndicatorMsg","WAWebConstantsDeprecated","WAWebContactBlockedErrorAction","WAWebContactCollection","WAWebFindChatAction","WAWebGroupMetadataCollection","WAWebHandleMsgError","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgType","WAWebMsgUtilsBridge","WAWebOutgoingMessageTone","WAWebReactionsBEUtils","WAWebSendMsgMetricReporter","WAWebSendMsgRecordBridge","WAWebSendMsgResultAction","WAWebSendSpamChatAction","WAWebUpdateUnreadChatAction","WAWebUpdateUtmAction","WAWebUserPrefsMeUser","WAWebUtmBizUtils","WAWebWamEnumMessageSendResultType","WAWebWamMsgUtils","WAWebWebcMessageSendWamEvent","WAWebWid","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Got error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msg:createRecord dropped msg: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Got error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msg:createRecord dropped msg: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Phone responded ",""]);m=function(){return a};return a}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c,e=d("WAWebSendMsgMetricReporter").createMsgModelMetricReporter(a);e.sendReporter=(c=e.sendReporter)!=null?c:e.createSendReporter();c=b("WAWebFindChatAction").findChat;var f=a.id.remote;c=(yield c(f,"sendMsgRecord"));if(c.contact.isEnterprise&&!d("WAWebMsgGetters").getIsGroupMsg(a)){f=d("WAWebUpdateUtmAction").getUtmForChat(f);f!=null&&d("WAWebUtmBizUtils").isUtmValid(c,f)&&(a.utm=f)}a.isNewMsg=!0;return p({type:"message",record:a},c,e)});return n.apply(this,arguments)}function e(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=d("WAWebSendMsgMetricReporter").createAddonMetricReporter(a),e=b("WAWebFindChatAction").findChat;e=(yield e(a.id.remote,"sendMsgRecord"));return p({type:"addon",record:a},e,c)});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=a.record,n=c("WANullthrows")(g.to),o=g.id,p=o.remote;c("WAWebWid").isGroup(n)&&(yield b("WAWebGroupMetadataCollection").find(n));e.isTrusted()||d("WAWebSendSpamChatAction").sendNotSpam(e)["catch"](function(){});var q=g.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&["sender_revoke","admin_revoke"].includes(g.subtype),s=d("WAWebMsgGetters").getIsReaction(g)&&g.reactionText===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT;if(!d("WAWebMsgGetters").getIsGroupMsg(g)&&!q&&!s&&d("WAWebBlocklistCollection").BlocklistCollection.get(n))return(h||(h=b("Promise"))).reject(new(c("WAWebContactBlockedErrorAction"))("Contact is blocked",d("WAWebContactCollection").ContactCollection.assertGet(n)));var t;q||(t=new(d("WAWebWebcMessageSendWamEvent").WebcMessageSendWamEvent)({messageType:d("WAWebWamMsgUtils").getWamMessageType(g),messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(g),messageIsForward:Boolean(g.isForwarded)}));s=b("WAWebMsgCollection").MsgCollection;void d("WAWebUpdateUnreadChatAction").sendSeen(e);g.type!==d("WAWebMsgType").MSG_TYPE.REACTION&&g.type!==d("WAWebMsgType").MSG_TYPE.REACTION_ENC&&g.type!==d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT&&g.type!==d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&g.type!==d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE&&!q&&s.trigger(c("WAWebConstantsDeprecated").NEW_MSG_SENT);return(h||(h=b("Promise"))).resolve().then(function(){return a.type==="message"?d("WAWebSendMsgRecordBridge").sendMsgRecord(a.record,f):d("WAWebAddonSendMsgData").sendAddonMsgData(a.record,f)}).then(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var h=o.fromMe&&d("WAWebUserPrefsMeUser").isMePrimary(p)?d("WAWebAck").ACK.READ:d("WAWebAck").ACK.SENT;a.type==="message"&&(a.record.updateAck(h),d("WAWebAddOnsUpdateSendStatesAction").maybeUpdateAddOnAckForMsgAction(a.record,h));r(e,g)&&void d("WAWebBotGenTypingIndicatorMsg").genBotTypingIndicatorMessage(e);t&&(t.markMessageSendT(),t.commit());g.utm!=null&&d("WAWebUpdateUtmAction").clearUtmAfterMessageSent(p);yield d("WAWebMsgUtilsBridge").logMessageSendForChatThreadLogging(g);[d("WAWebMsgType").MSG_TYPE.PROTOCOL,d("WAWebMsgType").MSG_TYPE.REACTION,d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT].includes(g.type)||(e.lastReceivedKey=o);if(!c("gkx")("26258")&&!q){h=b("WAWebOutgoingMessageTone");h=h.playOutgoingMessageTone;h()}return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.OK,t:f.t,count:f.count}});return function(a){return f.apply(this,arguments)}}())["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){a.status!==408&&d("WALogger").ERROR(m(),a.status).sendLogs("send-not-200");(a=f.sendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_NETWORK,isTerminal:!1});f.sendReporter=null;return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_NETWORK}}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAErrors").BufferTooLargeError,function(){var a;(a=f.sendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_PAYLOAD_TOO_BIG,isTerminal:!0});f.sendReporter=null;return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebHandleMsgError").MessageValidationError,function(){var a;(a=f.sendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_INVALID_PROTOBUF,isTerminal:!0});f.sendReporter=null;return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebHandleMsgError").MessageSentAckError,function(a){d("WALogger").WARN(l(),g.id.toString()).devConsole(g.type);d("WALogger").ERROR(k(),String(a)).devConsole(a).sendLogs("send-msg-server-nack-error");(a=f.sendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!0});f.sendReporter=null;return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}}))["catch"](function(a){d("WALogger").WARN(j(),g.id.toString()).devConsole(g.type);d("WALogger").ERROR(i(),String(a)).devConsole(a).sendLogs("send-msg-error");(a=f.sendReporter)==null?void 0:a.postFailure({result:d("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.ERROR_UNKNOWN,isTerminal:!0});f.sendReporter=null;return{messageSendResult:d("WAWebSendMsgResultAction").SendMsgResult.ERROR_UNKNOWN}})});return q.apply(this,arguments)}function r(a,b){var e=d("WAWebBotGating").isBotEnabled()&&a.id instanceof c("WAWebWid")&&a.id.isBot();a=d("WAWebBotGating").isBizBot3pEnabled()&&((a=a.contact.businessProfile)==null?void 0:a.isBizBot3p)===!0;return(e||a)&&b.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL&&b.type===d("WAWebMsgType").MSG_TYPE.CHAT}g.sendMsgRecord=a;g.sendAddonRecord=e}),98);
__d("WAWebHandleAddChats",["WALongInt","WAWebBackendApi","WAWebChatConstants","WAWebCollectionConstants","WAWebConnModel","WAWebMobilePlatforms","WAWebSchemaChat","lodash"],(function(a,b,c,d,e,f,g){function h(a){return{ephemeralSettingTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(a.ephemeralSettingTimestamp),tcTokenSenderTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(a.tcTokenSenderTimestamp),tcTokenTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(a.tcTokenTimestamp)}}function a(a){return d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a.map(function(a){a.pendingInitialLoading;var b=a.disappearingModeInitiator,c=a.disappearingModeTrigger,d=babelHelpers.objectWithoutPropertiesLoose(a,["pendingInitialLoading","disappearingModeInitiator","disappearingModeTrigger"]);d=babelHelpers["extends"]({},d,{id:a.id.toString(),muteExpiration:0,isAutoMuted:!1},h(d),{endOfHistoryTransferType:a.endOfHistoryTransferType});b!=null&&(d.disappearingModeInitiator=b);c!=null&&(d.disappearingModeTrigger=c);return d})).then(function(){return d("WAWebBackendApi").frontendSendAndReceive("chatCollectionAdd",{things:a.map(function(a){return babelHelpers["extends"]({},a,h(a),{endOfHistoryTransferType:d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.cast(a.endOfHistoryTransferType)})}),options:{merge:!0}})}).then(function(){(d("WAWebConnModel").Conn.platform===d("WAWebMobilePlatforms").PLATFORMS.IPHONE||d("WAWebConnModel").Conn.platform===d("WAWebMobilePlatforms").PLATFORMS.SMBI)&&(c("lodash").isEmpty(a)?d("WAWebBackendApi").frontendFireAndForget("msgCollectionTrigger",{name:d("WAWebCollectionConstants").COLLECTION_HAS_SYNCED}):self.setTimeout(function(){d("WAWebBackendApi").frontendFireAndForget("msgCollectionTrigger",{name:d("WAWebCollectionConstants").COLLECTION_HAS_SYNCED})},2500)),d("WAWebBackendApi").frontendFireAndForget("chatCollectionTrigger",{name:d("WAWebCollectionConstants").COLLECTION_HAS_SYNCED,args:{count:a.length}})})}g["default"]=a}),98);
__d("WAWebHistoryMsgHandlerAction",["Promise","WAFilteredCatch","WAJids","WALogger","WALongInt","WANullthrows","WASyncdOrphan","WATimeUtils","WAWebABProps","WAWebAck","WAWebAddonGatingUtils","WAWebAddonProcessMsgs","WAWebAddonProcessMsgsUtils","WAWebApiHistorySyncNotification","WAWebBackendApi","WAWebBackendErrors","WAWebBotTypes","WAWebChatConstants","WAWebCheckUpdateOrphanReactions","WAWebCmd","WAWebContactCollection","WAWebContactSystemMsg","WAWebCryptoCurve25519","WAWebDBCRUDOperationsPinInChat","WAWebDBProcessInitialHistorySyncMessage","WAWebEphemeralityTypes","WAWebHandleAddChats","WAWebHandleMsgProcessUtils","WAWebHandleMsgTypes.flow","WAWebHandleSingleMsg","WAWebHistorySyncNotificationUtils","WAWebHistorySyncStickers","WAWebMessageReceiptBatcher","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebPinMsgGatingUtils","WAWebPinMsgParseWebMsgInfoPinInChat","WAWebPollsParseWebMsgInfoPollUpdates","WAWebProtobufsE2E.pb","WAWebProtobufsHistorySync.pb","WAWebQueryBotWaitlistState","WAWebReactionsParseWebMsgInfoReaction","WAWebSchemaContact","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebSyncBootstrap","WAWebUserPrefsBot","WAWebUserPrefsHistorySync","WAWebUserPrefsMeUser","WAWebUserPrefsModelStorage","WAWebUserPrefsNotifications","WAWebUsernameGatingUtils","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] storing initial pushname complete with "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] start processing initial pushname"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] processing history non blocking data"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] storing Status V3 complete, ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] start processing status V3"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] found duplicated conversation id during initial sync"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] history_sync_notification_handler: saveGroupMetadataForLeftGroup failed"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] handleInitialSyncMsgs: invalid lidOriginType received."]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Dropping request welcome message"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] set history initial sync boundary with length ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] storing initial sync messages complete, ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][bot] trigger waitlist state update"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][bot] query waitlist state"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][bot] setting bot waitlist state"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] starts hanlding initial sync msgs"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Error: ",", message: ",", stack: ",""]);x=function(){return a};return a}function a(a,b,c,d,e,f,g,h){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,j,k,l){d("WALogger").LOG(w());var m={},x=d("WAWebUserPrefsMeUser").assertGetMe(),y=d("WAWebWidFactory").toUserWid(x),z=x.getDeviceId(),A={},B={},C=[],E=0,F=[];a.aiWaitListState!=null&&(d("WALogger").LOG(v()),yield d("WAWebUserPrefsBot").setBotWaitlistState(a.aiWaitListState),a.aiWaitListState===d("WAWebProtobufsHistorySync.pb").HistorySync$BotAIWaitListState.IN_WAITLIST?(d("WALogger").LOG(u()),void d("WAWebQueryBotWaitlistState").queryBotWaitlistState(!0)):(d("WALogger").LOG(t()),d("WAWebCmd").Cmd.botWaitlistStateUpdated()));x=function(a){var b,h,i=d("WAWebWidFactory").createWid(a.id);if(i.isNewsletter())return"continue";if(i.isUser())if(i.isLid()){var j=a.pnJid;j!=null&&g.push({lid:d("WAWebWidFactory").toUserWid(i),pn:d("WAWebWidFactory").createUserWid(j)});j=a.displayName;var k=a.shareOwnPn,r=a.username;d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&a.username!=null&&l.push({userId:d("WAWebWidFactory").toUserWid(i),username:r});if(j!=null||k!=null){r={};j!=null&&(r.displayNameLID=j);k!=null&&(r.shareOwnPn=k);f.push({lid:d("WAWebWidFactory").toUserWid(i),data:r})}}else if(a.lidJid!=null){j=d("WAWebWidFactory").createWid(a.lidJid);g.push({lid:d("WAWebWidFactory").toUserWid(j),pn:d("WAWebWidFactory").toUserWid(i)})}var s=[],t=[],u=[],v=[];E+=a.messages.length;var w=[];a.messages.length===0&&(m[a.id]=-1);a.pHash&&(B[a.id]=a.pHash);k=void 0;a.messages.forEach(function(b,c){var f;c===a.messages.length-1&&(m[a.id]=b.msgOrderId);c=(b==null?void 0:(c=b.message)==null?void 0:(c=c.message)==null?void 0:(c=c.protocolMessage)==null?void 0:c.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE;if(c){d("WALogger").LOG(q());return}c=d("WAWebHistorySyncNotificationUtils").parseWebMsgInfoAndReturnNullOnFailure(i,b.message,e);f=((f=b.message)==null?void 0:(f=f.message)==null?void 0:(f=f.commentMessage)==null?void 0:f.targetMessageKey)==null;f&&w.push(c);s=s.concat(d("WAWebReactionsParseWebMsgInfoReaction").parseWebMsgInfoReaction(b.message,c));if(!d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.POLL_UPDATE)){t=t.concat(d("WAWebPollsParseWebMsgInfoPollUpdates").parseWebMsgInfoPollUpdates({webMsgInfo:b.message,parsedWebMsgInfo:c,isFromCag:(f=a.isDefaultSubgroup)!=null?f:!1}))}d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE)||(u=u.concat(d("WAWebPinMsgParseWebMsgInfoPinInChat").parseWebMsgInfoPinInChat(b.message,c)));v=v.concat(d("WAWebAddonProcessMsgsUtils").parseHistorySyncMsg({webMsgInfo:b.message,parsedWebMsgInfo:c,isFromCag:(f=a.isDefaultSubgroup)!=null?f:!1}));(c==null?void 0:c.subtype)==="biz_bot_1p_disclosure"&&(k=d("WAWebBotTypes").BizBotType.BIZ_1P);(c==null?void 0:c.subtype)==="biz_bot_3p_disclosure"&&(k=d("WAWebBotTypes").BizBotType.BIZ_3P)});w=w.filter(Boolean).reverse();r=a.contactPrimaryIdentityKey;if(r&&c("WAWebWid").isUser(i)){j=d("WAWebSignalCommonUtils").createSignalAddress(d("WAWebWidFactory").toUserWid(i)).toString();r=d("WAWebSignalCommonUtils").bufferToStr(d("WAWebCryptoCurve25519").toSignalCurvePubKey(r));i.equals(d("WAWebUserPrefsMeUser").getMeUser())?d("WAWebHistorySyncNotificationUtils").checkSelfHistorySyncIdentity(j,r):F.push({identifier:j,identityKey:r})}j=d("WAWebUserPrefsNotifications").getGlobalSecurityNotifications()&&!d("WAWebABProps").getABPropConfigValue("adv_v2_m6");if(!i.isStatusV3()&&j){r=d("WAWebContactSystemMsg").genDeviceNotificationMsg(i,y,[z],[]);w.push(r)}j=void 0;r=void 0;var x=void 0;if(((b=a.disappearingMode)==null?void 0:b.initiator)!=null)switch(a.disappearingMode.initiator){case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.CHANGED_IN_CHAT:j=d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat;r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;break;case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_ME:j=d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe;r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;x=!0;break;case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_OTHER:case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.BIZ_UPGRADE_FB_HOSTING:j=d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther;r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;x=!1;break}if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_daily_logs")){if(((b=a.disappearingMode)==null?void 0:b.trigger)!=null)switch(a.disappearingMode.trigger){case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.CHAT_SETTING:r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;break;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.ACCOUNT_SETTING:r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;break;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BULK_CHANGE:r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange;break;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BIZ_SUPPORTS_FB_HOSTING:r=d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting;break;default:break}((b=a.disappearingMode)==null?void 0:b.initiatedByMe)!=null&&(x=a.disappearingMode.initiatedByMe)}b=a.tcToken!=null&&a.tcTokenTimestamp!=null;j={t:d("WALongInt").maybeNumberOrThrowIfTooLarge((h=a.conversationTimestamp)!=null?h:a.lastMsgTimestamp),id:i,unreadCount:a.unreadCount,ephemeralDuration:a.ephemeralExpiration,ephemeralSettingTimestamp:a.ephemeralSettingTimestamp,disappearingModeInitiator:j,disappearingModeTrigger:r,disappearingModeInitiatedByMe:x,endOfHistoryTransferType:(h=a.endOfHistoryTransferType)!=null?h:d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE,name:a.name,notSpam:a.notSpam,pendingInitialLoading:!1,unreadMentionCount:a.unreadMentionCount,tcToken:b?a.tcToken:null,tcTokenTimestamp:b?a.tcTokenTimestamp:null,tcTokenSenderTimestamp:a.tcTokenSenderTimestamp,isDeprecated:a.pnhDuplicateLidThread,bizBotSystemMsgType:k,isLocked:a.locked};if(a.lidOriginType!=null){j.lidOriginType=a.lidOriginType;if(!["ctwa","username"].includes(j.lidOriginType)){d("WALogger").ERROR(p()).sendLogs("handleInitialSyncMsgs: invalid lidOriginType received. "+((r=a.lidOriginType)!=null?r:""))}}a.archived!=null&&(j.archive=a.archived);try{d("WAWebHistorySyncNotificationUtils").saveGroupMetadataForLeftGroup(a,j.id)}catch(a){d("WALogger").WARN(o()).tags("history-sync").devConsole(a)}C.push(j);Object.prototype.hasOwnProperty.call(A,a.id)&&d("WALogger").DEV(n());A[a.id]={chatInfo:j,msgs:w,reactionMessages:s,pollVotes:t,pinInChatMessages:u,unifiedAddons:v}};for(var G of a.conversations){var H=x(G);if(H==="continue")continue}i.mdBootstrapMessagesCount=E;i.mdBootstrapChatsCount=a.conversations.length;d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(i,e.historySyncStepStartedTs,!0,k);c("WAWebSyncBootstrap").markInitialHistorySyncCountDebugStats(E,C.length);H=function(){return c("WAWebHandleAddChats")(C)||(h||(h=b("Promise"))).resolve()};yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkCreateIdentity(F);yield H();yield D(A);yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(e.msgKey,e.syncType,e.chunkOrder);d("WAWebHistorySyncNotificationUtils").commitHistoryDataAppliedMetric(j,e.historySyncStepStartedTs,!0,!0);d("WALogger").LOG(s(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(e,E,C.length));d("WALogger").LOG(r(),Object.keys(m).length);yield (h||(h=b("Promise"))).all([d("WAWebHistorySyncNotificationUtils").handleChatThreadLoggingMetadata(a),d("WAWebUserPrefsHistorySync").setHistoryInitialSyncBoundary(m)]);d("WAWebUserPrefsModelStorage").setInitialGroupPhash(B)});return y.apply(this,arguments)}function e(a,b,c,d,e){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){d("WALogger").LOG(m()),f.mdBootstrapMessagesCount=a.statusV3Messages.length,d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(f,e.historySyncStepStartedTs,!0,i),a.statusV3Messages.sort(function(a,b){a=a.messageTimestamp;b=b.messageTimestamp;return d("WATimeUtils").castToUnixTime(parseInt(a,10))-d("WATimeUtils").castToUnixTime(parseInt(b,10))}),yield (h||(h=b("Promise"))).all(a.statusV3Messages.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=null,f=[];a.key.fromMe===!0?(e=d("WAWebUserPrefsMeUser").getMeUser(),f=a.userReceipt.filter(function(a){return a.readTimestamp!=null&&a.readTimestamp!==0})):e=d("WAWebWidFactory").createWid(c("WANullthrows")(a.participant));e={type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS,externalId:c("WANullthrows")(a.key.id),ts:d("WATimeUtils").castToUnixTime(parseInt(a.messageTimestamp,10)),edit:-1,isHsm:!1,count:null,chat:d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID),author:c("WANullthrows")(e),pushname:null,isDirect:!1};var g="skmsg";e=(yield d("WAWebMsgProcessingApiUtils").parseMessage({info:e,ciphertextType:g,msgProtobuf:c("WANullthrows")(a.message),hsmInfo:null}));g=e.renderableMsgs&&e.renderableMsgs;if(!g||g.length!==1)return(h||(h=b("Promise"))).resolve();var i=g[0];if(a.participant==="0@s.whatsapp.net"&&(!d("WAWebABProps").getABPropConfigValue("web_status_psa_history_sync")||i.staticUrl==null))return(h||(h=b("Promise"))).resolve();e=a.ignore===!0;e&&(i=babelHelpers["extends"]({},i,{invis:!0,ack:d("WAWebAck").ACK.READ}));yield d("WAWebHandleSingleMsg").handleSingleMsg(i.id.remote,i,"historyStatusV3Messages",d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE);f.forEach(function(a){var b;b=d("WALongInt").numberOrThrowIfTooLarge((b=a.readTimestamp)!=null?b:0);a=d("WAWebWidFactory").createWid(a.userJid);void d("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ts:b,ack:d("WAWebAck").ACK.READ,receiverId:a,msgKeys:[i.id.toString()]})});return!0});return function(b){return a.apply(this,arguments)}}())),yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(e.msgKey,e.syncType,e.chunkOrder),d("WAWebHistorySyncNotificationUtils").commitHistoryDataAppliedMetric(g,e.historySyncStepStartedTs,!0),d("WALogger").LOG(l(),d("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(e,a.statusV3Messages.length))});return z.apply(this,arguments)}function f(a,b,c,d,e){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){d("WALogger").LOG(k()),d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(c,b.historySyncStepStartedTs,!0,f),a.pastParticipants!=null&&a.pastParticipants.length>0&&(yield d("WAWebHistorySyncNotificationUtils").processPastParticipants(a,b)),d("WAWebHistorySyncStickers").processRecentStickers(a,b),d("WAWebHistorySyncNotificationUtils").commitHistoryDataAppliedMetric(e,b.historySyncStepStartedTs,!0)});return A.apply(this,arguments)}function B(a,b,c,d,e){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){d("WALogger").LOG(j());d("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(c,b.historySyncStepStartedTs,!0,f);c=a.pushnames.map(function(a){return{id:a.id||"",pushname:a.pushname||""}});yield d("WAWebSchemaContact").getContactTable().bulkCreateOrMerge(c);yield d("WAWebApiHistorySyncNotification").updateCurrentlyProcessed(b.msgKey,b.syncType,b.chunkOrder);f=a.pushnames.map(function(a){var b=d("WAWebWidFactory").createWid(a.id||""),c=d("WAWebContactCollection").ContactCollection.get(b);return{id:b,pushname:a.pushname||"",type:(c==null?void 0:c.type)||"out",name:c==null?void 0:c.name}});d("WAWebContactCollection").ContactCollection.add(f,{merge:!0});d("WAWebHistorySyncNotificationUtils").commitHistoryDataAppliedMetric(e,b.historySyncStepStartedTs,!0);d("WALogger").LOG(i(),a.pushnames.length)});return C.apply(this,arguments)}function D(a){var c={add:"last",isHistory:!0},e=Object.keys(a).map(function(b){return d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:d("WAWebWidFactory").createWid(b),msgObjs:a[b].msgs,meta:c,processMessagesOrigin:"historyMsgHandlerAction",chatMsgsCollection:null})});return(h||(h=b("Promise"))).all([].concat(e,[d("WAWebDBProcessInitialHistorySyncMessage").storeInitialSyncMessages(a)])).then(function(){var b;b=(b=Array.prototype).concat.apply(b,Object.keys(a).map(function(b){return a[b].msgs.map(function(a){return a.id.toString()})}));d("WAWebCheckUpdateOrphanReactions").checkUpdateForOrphanReactions(b);return d("WASyncdOrphan").checkOrphanMutations(b,Object.keys(a))}).then(function(){var c;c=(c=Array.prototype).concat.apply(c,Object.keys(a).map(function(b){return a[b].reactionMessages}));var d=b("WAWebHandleMsgProcessUtils").storeReactionMsgBulk;return d(c)}).then(function(){var c;return(h||(h=b("Promise"))).all((c=Array.prototype).concat.apply(c,Object.keys(a).map(function(b){return a[b].pollVotes}))).then(function(a){var c;c=(c=Array.prototype).concat.apply(c,a);a=b("WAWebHandleMsgProcessUtils").storePollVotesBulk;return a(c)})}).then(function(){if(d("WAWebPinMsgGatingUtils").isPinnedMessagesM1ReceiverEnabled()){var c;c=(c=Array.prototype).concat.apply(c,Object.keys(a).map(function(b){return a[b].pinInChatMessages}));var e=b("WAWebDBCRUDOperationsPinInChat").storePinInChatMsgBulk;return e(c)}}).then(function(){var c;return(h||(h=b("Promise"))).all((c=Array.prototype).concat.apply(c,Object.keys(a).map(function(b){return a[b].unifiedAddons}))).then(function(a){var b;return d("WAWebAddonProcessMsgs").processHistoryMsgs((b=[]).concat.apply(b,a))})})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").LogoutDrop,function(){}))["catch"](function(a){d("WALogger").ERROR(x(),a.name,a.message,a.stack).devConsole(a).sendLogs("msg_handler for MD: error storing/processing multiple messages")})}g.handleInitialSyncMsgs=a;g.handleStatusV3Messages=e;g.handleNonBlockingData=f;g.handlePushName=B}),98);
__d("WAWebAddAndReorderMsgsActionsUtils",["WALogger","WAWebMsgModelUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Msg:reorder trying to merge CMC of orphaned message ",""]);h=function(){return a};return a}function a(a,b,c,e,f,g,h,j){a=i(a,b,c,e,g);d("WAWebMsgModelUtils").addRecordsToChat(a.msgs,e,f,a.collection,h,j)}function i(a,b,c,e,f){var g={},i={},j,k,l,m=c.length,n=f;if(m===0)return{msgs:b,collection:n};for(j=0;j<m;j++)k=c[j],i[k.id]=k;m=b.length;for(j=0;j<m;j++){k=b[j];if(!k)continue;g[k.id]=k}var o=[];m=a.length;for(j=0;j<m;j++){k=a[j];if(!k)continue;l=g[k.id];l&&o.push(l);l=i[k.id];if(l)if(l.recvFresh)o.push(l),e.removeMsg(l),l.unset("recvFresh");else{c=e.getAllCMCs();b=c.find(function(a){return a.get(l.id)});f&&b===f||(b?(b.forEach(function(a){o.push(a),delete i[a.id]}),b===e.msgs?(e.replaceMsgsCollection(f),n=e.msgs):(e.notifyMsgCollectionMerge(f,b,f),e.removeMsgsCollection(b))):(d("WALogger").WARN(h(),k.id).devConsole(k),o.push(i[k.id])))}}return{msgs:o,collection:n}}g["default"]=a}),98);
__d("WAWebButtonModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.displayText=d("WAWebBaseModel").prop(),c.selected=d("WAWebBaseModel").session(!1),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="replyButton";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebTemplateButtonModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.displayText=d("WAWebBaseModel").prop(),c.subtype=d("WAWebBaseModel").prop(),c.url=d("WAWebBaseModel").prop(),c.phoneNumber=d("WAWebBaseModel").prop(),c.selectionId=d("WAWebBaseModel").prop(),c.selected=d("WAWebBaseModel").session(!1),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="templateButton";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebGetMsgUpdatesActionsUtils",["Promise","WALogger","WANullthrows","WATypeUtils","WAWebAck","WAWebButtonCollection","WAWebButtonModel","WAWebChatCollection","WAWebDBGroupParticipant","WAWebEphemeralSyncResponse","WAWebErrorType","WAWebFrontendMsgGetters","WAWebGroupSystemMsg","WAWebGroupType","WAWebHandleSingleMsg","WAWebInvalidateEventsAction","WAWebLidMigrationUtils","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModel","WAWebMsgModelUtils","WAWebMsgType","WAWebPaymentRequestMsgAction","WAWebPollsInvalidateChatPollMsgsAction","WAWebRevokeMsgAction","WAWebTemplateButtonCollection","WAWebTemplateButtonModel","WAWebWid","asyncToGeneratorRuntime","gkx","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processLiveMessage should not be called with history message id ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: el.id is not a MsgKey"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: el.id is not a MsgKey: "," of "," messages"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ephemeralOutOfSync msgId="," chatId=",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:handle:processMM load search as history ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:handle:processMM:","",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["unknown protocolMessage ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: sender revoke: sender mismatch: "," <> ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: sender revoked ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["process bot response invoker revoke ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: admin revoked ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: admin revoke came for the different group than the original message was in"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: "," has not been revoked"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: admin revoke was sent to a non-group chat"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgUpdates: "," has not been revoked"]);w=function(){return a};return a}function a(a,b,c,d){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var i=[],x=[],B=[],C=b("WAWebChatCollection").ChatCollection,D=b("WAWebMsgCollection").MsgCollection,E=0;yield (h||(h=b("Promise"))).all(e.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b.id instanceof c("WAWebMsgKey")||(E++,b.id=new(c("WAWebMsgKey"))({from:b.from,to:b.to,id:b.id,participant:b.participant,selfDir:b.self}));d("WATypeUtils").isString(a)&&c("WAWebWid").isBroadcast(a)&&delete b.broadcast;b.type==="ptt"&&!b.id.fromMe&&b.ack<d("WAWebAck").ACK.CLOCK&&(b.ack=d("WAWebAck").ACK.CLOCK);b.hydratedButtons!=null&&y(b);b.dynamicReplyButtons!=null&&z(b);var e=D.get(b.id);if(b.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&b.subtype!=="ephemeral_setting"&&b.subtype!=="share_phone_number")switch(b.subtype){case"admin_revoke":var h,j=d("WAWebLidMigrationUtils").getAlternateMsgKey(b.protocolMessageKey);e=(h=D.get(b.protocolMessageKey))!=null?h:j!=null?D.get(j):null;if(e)if(!d("WAWebMsgGetters").getIsGroupMsg(e))d("WALogger").LOG(w(),e.id.toString()),d("WALogger").ERROR(v());else if(!c("WAWebWid").equals(e.id.remote,b.id.remote))d("WALogger").LOG(u(),e.id.toString()),d("WALogger").ERROR(t());else{d("WALogger").LOG(s(),e.id.toString());h=new(d("WAWebMsgModel").Msg)(b);j=c("WANullthrows")(d("WAWebFrontendMsgGetters").getChat(e).groupMetadata);var k=c("WANullthrows")(d("WAWebMsgGetters").getSender(h)),F=j.isLidAddressingMode===!0?d("WAWebLidMigrationUtils").normalizeWidToLid(k):d("WAWebLidMigrationUtils").normalizeWidToPn(k),G=F!=null?j.participants.get(F):null;if((!G||!G.isAdmin)&&F!=null){j.participants.add({id:F,isAdmin:!0},{merge:!0});if(!G){j={actionType:d("WAWebGroupType").GROUP_ACTIONS.ADD,participants:[{id:F,isAdmin:!0,isSuperAdmin:!1}],reason:null};G=(yield d("WAWebGroupSystemMsg").genGroupNotificationMsg({author:void 0,chatId:d("WAWebFrontendMsgGetters").getChat(e).id,ts:h.t},j));void d("WAWebHandleSingleMsg").handleSingleMsg(G.from,G)}d("WAWebDBGroupParticipant").markGroupParticipantStale({group:d("WAWebFrontendMsgGetters").getChat(e).id})}d("WAWebRevokeMsgAction").revoke(e,{msgKey:h.id,subtype:h.subtype,sender:k,revokeTimestamp:h.t})}break;case"sender_revoke":F=d("WAWebLidMigrationUtils").getAlternateMsgKey(b.protocolMessageKey);e=(j=D.get(b.protocolMessageKey))!=null?j:F!=null?D.get(F):null;if(e){G=new(d("WAWebMsgModel").Msg)(b);h=(k=e)==null?void 0:k.botTargetSenderJid;h!=null&&((j=e.id.participant)==null?void 0:j.isBot())&&c("WAWebWid").equals(h,d("WAWebMsgGetters").getSender(G))?(d("WALogger").DEV(r(),e.id.toString()),d("WAWebRevokeMsgAction").revoke(e,{msgKey:G.id,subtype:G.subtype,sender:d("WAWebMsgGetters").getSender(G),revokeTimestamp:G.t})):c("WAWebWid").equals.apply(c("WAWebWid"),d("WAWebLidMigrationUtils").normalizeUserWidsToLidOrPn(d("WAWebMsgGetters").getSender(e),d("WAWebMsgGetters").getSender(G)))?(d("WALogger").LOG(q(),e.id.toString()),c("WAWebWid").isStatusV3(a)&&e.msgChunk&&e.msgChunk.remove(e),d("WAWebRevokeMsgAction").revoke(e,{msgKey:G.id,subtype:G.subtype,sender:d("WAWebMsgGetters").getSender(G),revokeTimestamp:G.t})):d("WALogger").WARN(p(),G.id.toString(),e.id.toString())}break;case"bot_request_welcome":break;default:d("WALogger").LOG(o(),b.id.toString()).devConsole(b);break}else if(e&&!d("WAWebFrontendMsgGetters").getAsRevoked(e)){b.ack<e.ack&&delete b.ack;for(F in b)Object.prototype.hasOwnProperty.call(b,F)&&typeof b[F]==="undefined"&&delete b[F];e.type!==b.type&&(b.subtype=b.subtype||void 0);f.isHistory&&(b.isNewMsg=!1);k=["t","id","from","to"];var H=e.t?c("lodash").omit(b,k):b;j=e.applyUpdate(H).then(function(){return e});B.push(j);if(c("WAWebWid").isBroadcast(e.id.remote)){h=d("WAWebMsgModelUtils").getBroadcastFanoutKeys(e);h&&h.forEach(function(a){a=D.get(a);a&&B.push(a.applyUpdate(H).then(function(){return e}))})}f.isHistory===!0&&(e.recvFresh||g)&&!e.search?(d("WALogger").WARN(n(),e.recvFresh?"dup:":"overlap:",String(e.id)),x.push(e)):f.isHistory&&e.search?(e.search=!1,d("WALogger").WARN(m(),String(e.id)),i.push({id:e.id})):f.add==="search"&&i.push({id:e.id})}else{b.subtype==="payment_action_request_declined"||b.subtype==="payment_transaction_request_cancelled"?B.push(d("WAWebPaymentRequestMsgAction").cancelOrDeclinePaymentRequest(b)):b.type===d("WAWebMsgType").MSG_TYPE.PAYMENT&&b.subtype==="send"&&B.push(d("WAWebPaymentRequestMsgAction").fulfillPaymentRequest(b));G=C.get(b.id.remote);f.add==="search"&&(b.search=!0);d("WAWebMsgGetters").getIsUnreadType(b)&&b.id.fromMe&&b.ack===d("WAWebAck").ACK.CLOCK&&(b.isSendFailure=!0);b.errorCode===d("WAWebErrorType").SendFailureErrorCode.EditWindowExpired&&(b.isSendFailure=!0);f.update||i.push(b);!f.isHistory&&f.add!=="search"&&G&&B.push(A(b,G));b.ephemeralOutOfSync&&d("WALogger").LOG(l(),b.id.toString(),G==null?void 0:G.id.toString())}});return function(a){return e.apply(this,arguments)}}()));E>0&&(d("WALogger").LOG(k(),E,e.length),c("gkx")("26258")||d("WALogger").ERROR(j()).sendLogs("forgot-to-create-msgkey"));return{filteredRecs:i,reorderRecs:x,updates:B}});return x.apply(this,arguments)}function y(a){var b=function(a,b){b=a.index!=null?a.index:b;b=""+b;if(a.quickReplyButton)return new(c("WAWebTemplateButtonModel"))({id:b,displayText:a.quickReplyButton.displayText,selectionId:a.quickReplyButton.id,subtype:"quick_reply"});else if(a.callButton)return new(c("WAWebTemplateButtonModel"))({id:b,displayText:a.callButton.displayText,phoneNumber:a.callButton.phoneNumber,subtype:"call"});return new(c("WAWebTemplateButtonModel"))({id:b,displayText:(b=a.urlButton)==null?void 0:b.displayText,url:(b=a.urlButton)==null?void 0:b.url,subtype:"url"})};a.buttons=new(d("WAWebTemplateButtonCollection").TemplateButtonCollection)();a.buttons.add(a.hydratedButtons.map(b))}function z(a){var b=function(a){var b=a.buttonId;a=a.buttonText;return new(c("WAWebButtonModel"))({id:b,displayText:a==null?void 0:a.displayText})};a.replyButtons=new(d("WAWebButtonCollection").ButtonCollection)();a.replyButtons.add(a.dynamicReplyButtons.map(b))}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(!a.isNewMsg||!a.recvFresh){d("WALogger").WARN(i(),a.id.toString()).devConsole(a).sendLogs("bad-process-live-message-call");return(h||(h=b("Promise"))).resolve()}a.type===d("WAWebMsgType").MSG_TYPE.GP2&&a.subtype==="delete"&&(c.isReadOnly=!0,void d("WAWebPollsInvalidateChatPollMsgsAction").invalidateChatPollMsgs(c),void d("WAWebInvalidateEventsAction").invalidateEventMsgsForChat(c));yield d("WAWebEphemeralSyncResponse").syncEphemeralSetting(a,c)});return B.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebGetPushServerSettingsJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPushServerSettingsRequest: server response with ",", ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPushServerSettings: success"]);i=function(){return a};return a}var j=new(c("WADeprecatedWapParser"))("getPushServerSettings",function(a){if(!a.hasChild("error")){d("WALogger").LOG(i()).tags("push-notification");var b=a.child("settings");b=b.attrString("webserverkey");return b}b=a.child("error");a=b.attrInt("code");b=b.attrString("text");d("WALogger").WARN(h(),a,b).tags("push-notification");return{errorCode:a,errorText:b}}),k=(e=d("WAWap")).wap("iq",{to:e.S_WHATSAPP_NET,type:"get",xmlns:"urn:xmpp:whatsapp:push",id:e.generateId()},e.wap("settings",null));function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WADeprecatedSendIq").deprecatedSendIq(k,j));if(!a.success){var b=a.errorCode,c=a.errorText;return{errorCode:b,errorText:c}}return a.result});return l.apply(this,arguments)}g.getPushServerSettings=a}),98);
__d("WAWebSetPushConfigJob",["WABase64","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["setPushConfig: server response with ",", ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["setPushConfig: success"]);i=function(){return a};return a}var j=new(c("WADeprecatedWapParser"))("setPushConfig",function(a){if(!a.hasChild("error")){d("WALogger").LOG(i()).tags("push-notification");return}a=a.child("error");var b=a.attrInt("code");a=a.attrString("text");d("WALogger").WARN(h(),b,a).tags("push-notification");return{errorCode:b,errorText:a}});function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"set",xmlns:"urn:xmpp:whatsapp:push",id:b.generateId()},b.wap("config",{platform:"web",endpoint:b.CUSTOM_STRING(a.endpoint),auth:b.CUSTOM_STRING(d("WABase64").encodeB64(c("WANullthrows")(a.getKey("auth")))),p256dh:b.CUSTOM_STRING(d("WABase64").encodeB64(c("WANullthrows")(a.getKey("p256dh"))))}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,j));if(!a.success){b=a.errorCode;var e=a.errorText;return{errorCode:b,errorText:e}}return a.result});return k.apply(this,arguments)}g.setPushConfig=a}),98);
__d("WAWebSubscribePushManagerAction",["fbt","WABase64","WALogger","WAWebFbtCommon","WAWebGetPushServerSettingsJob","WAWebL10N","WAWebMiscErrors","WAWebMuteCollection","WAWebNotificationConstants","WAWebPushNotificationsGatingUtils","WAWebSetPushConfigJob","WAWebSetWorkerLocalStorage","WAWebUserPrefsGeneral","WAWebUserPrefsNotifications","WAWebUserPrefsScreenLock","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] successfully unsubscribed push manager"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to no active push subscription"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to no service worker registration"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to service worker does not exist"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] attempt to unsubscribe push manager started"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to error: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] successfully subscribed push manager"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to send client push subscription data to server failure with error ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to unable to get push server settings with error code ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to push manager is already subscribed"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to service worker is not ready yet"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to service worker does not exist"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] attempt to subscribe push manager started"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] isOfflineNotificationsEnabled: ",",\n    hasPushSubscription: ",", canEnableOfflineNotifications: ",", isScreenLockEnabled : ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] the current service worker scope is invalid, service worker scope: ",", current scope: ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to get push manager"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to check and update push manager due to no service worker registration"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] attempt to update push manager started"]);A=function(){return a};return a}function a(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications())return;d("WALogger").DEV(A());if("serviceWorker"in navigator){var a,b,e,f=d("WAWebUserPrefsNotifications").getGlobalOfflineNotifications();f=G(f);var g=d("WAWebUserPrefsScreenLock").getScreenLockEnabled();a=f&&((a=window.Notification)==null?void 0:a.permission)===d("WAWebNotificationConstants").PERMISSION_ALLOWED&&d("WAWebPushNotificationsGatingUtils").canEnableOfflineNotifications()&&!g;b=(yield (b=window.navigator.serviceWorker)==null?void 0:b.ready);if(b==null){d("WALogger").WARN(z());return}e=b==null?void 0:(e=b.pushManager)==null?void 0:e.getSubscription==null?void 0:e.getSubscription();if(e==null){d("WALogger").WARN(y());return}if(b.scope!==window.location.origin+window.location.pathname){d("WALogger").DEV(x(),b.scope,window.location.origin+window.location.pathname);return}b=(yield e)!=null;d("WALogger").DEV(w(),f,b,d("WAWebPushNotificationsGatingUtils").canEnableOfflineNotifications(),g);a?b?(H(),c("WAWebL10N").on("locale_change",function(){H()})):void C():!a&&b&&void E()}});return B.apply(this,arguments)}function e(a){a?void C():void E()}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebPushNotificationsGatingUtils").canEnableOfflineNotifications())return;d("WALogger").DEV(v());try{var a;if(!("serviceWorker"in navigator)){d("WALogger").DEV(u());return}a=(yield (a=window.navigator.serviceWorker)==null?void 0:a.ready);if(a==null){d("WALogger").DEV(t());return}var b=(yield a.pushManager.getSubscription());if(b!=null){d("WALogger").DEV(s());return}b=(yield d("WAWebGetPushServerSettingsJob").getPushServerSettings());if(b.errorCode!=null){d("WALogger").WARN(r(),b.errorCode);return}b=new Uint8Array(d("WABase64").decodeB64UrlSafe(String(b)));b={userVisibleOnly:!0,applicationServerKey:b};a=(yield a.pushManager.subscribe(b));b=(yield d("WAWebSetPushConfigJob").setPushConfig(a));if((b==null?void 0:b.errorCode)!=null){d("WALogger").WARN(q(),b.errorText);return}yield d("WAWebSetWorkerLocalStorage").setWorkerLocalStorage();yield H();d("WALogger").DEV(p())}catch(a){d("WALogger").WARN(o(),a)}});return D.apply(this,arguments)}function E(){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications())return!1;d("WALogger").DEV(n());try{var a;if(!("serviceWorker"in navigator)){d("WALogger").DEV(m());return!1}a=(yield (a=window.navigator.serviceWorker)==null?void 0:a.ready);if(a==null){d("WALogger").DEV(l());return!1}a=(yield a.pushManager.getSubscription());if(a==null){d("WALogger").DEV(k());return!1}a=(yield a.unsubscribe());yield d("WAWebSetWorkerLocalStorage").clearWorkerLocalStorage()["catch"](function(a){if(!(a instanceof d("WAWebMiscErrors").DbOnLogoutAbort))throw a});d("WALogger").DEV(j());return a}catch(a){d("WALogger").WARN(i(),a);return!1}});return F.apply(this,arguments)}function G(a){var e;if(!c("gkx")("26258")&&!a&&((e=window.Notification)==null?void 0:e.permission)===d("WAWebNotificationConstants").PERMISSION_ALLOWED&&d("WAWebUserPrefsNotifications").getOfflineNotificationsInternalEnabledOnce()!==!0){d("WAWebUserPrefsNotifications").setOfflineNotificationsInternalEnabledOnce();b("WAWebMuteCollection").MuteCollection.setGlobalOfflineNotifications(!0);return!0}return a}function H(){var a=c("WAWebFbtCommon")("WhatsApp"),b=h._("__JHASH__iRfd97dsgRN__JHASH__");void d("WAWebUserPrefsGeneral").setOfflineNotificationContent({notificationTitle:a.toString(),notificationText:b.toString()})}g.updatePushManager=a;g.handleOfflineNotifications=e;g.subscribePushManager=C;g.unsubscribePushManager=E}),226);
__d("WAWebWamEnumErrorType",[],(function(a,b,c,d,e,f){a=Object.freeze({ERROR_FETCHING_AGENT_NAME:0,ERROR_FETCHING_CHAT:1,ERROR_OTHER:2});f.ERROR_TYPE=a}),66);
__d("WAWebWamEnumMdChatAssignmentAssignmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({ASSIGNED:0,UNASSIGNED:1});f.MD_CHAT_ASSIGNMENT_ASSIGNMENT_TYPE=a}),66);
__d("WAWebWamEnumMdChatAssignmentChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP:0,BROADCAST_LIST:1,INDIVIDUAL:2,COMMUNITY:3,CHANNEL:4,INTEROP:5});f.MD_CHAT_ASSIGNMENT_CHAT_TYPE=a}),66);
__d("WAWebWamEnumMdChatAssignmentSecondaryActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTION_SYSTEM_MESSAGE_ADDED_TO_CHAT_HISTORY:0,ACTION_SYSTEM_MESSAGE_CREATION_ERROR:1,ACTION_SYSTEM_MESSAGE_RENDERED:2,ACTION_CHAT_STATUS_TICKER_SHOWN:3,ACTION_TOOLTIP_SHOWN:4});f.MD_CHAT_ASSIGNMENT_SECONDARY_ACTION_TYPE=a}),66);
__d("WAWebWamEnumMdChatAssignmentSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,BOOTSTRAP:1});f.MD_CHAT_ASSIGNMENT_SOURCE_TYPE=a}),66);
__d("WAWebMdChatAssignmentSecondaryActionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumErrorType","WAWebWamEnumMdChatAssignmentAssignmentType","WAWebWamEnumMdChatAssignmentChatType","WAWebWamEnumMdChatAssignmentSecondaryActionType","WAWebWamEnumMdChatAssignmentSourceType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdChatAssignmentSecondaryAction:[3716,{mdChatAssignmentSecondaryActionAgentId:[1,a.TYPES.STRING],mdChatAssignmentSecondaryActionAssignmentType:[8,d("WAWebWamEnumMdChatAssignmentAssignmentType").MD_CHAT_ASSIGNMENT_ASSIGNMENT_TYPE],mdChatAssignmentSecondaryActionBrowserId:[2,a.TYPES.STRING],mdChatAssignmentSecondaryActionChatType:[3,d("WAWebWamEnumMdChatAssignmentChatType").MD_CHAT_ASSIGNMENT_CHAT_TYPE],mdChatAssignmentSecondaryActionError:[4,d("WAWebWamEnumErrorType").ERROR_TYPE],mdChatAssignmentSecondaryActionMdId:[5,a.TYPES.INTEGER],mdChatAssignmentSecondaryActionSource:[6,d("WAWebWamEnumMdChatAssignmentSourceType").MD_CHAT_ASSIGNMENT_SOURCE_TYPE],mdChatAssignmentSecondaryActionType:[7,d("WAWebWamEnumMdChatAssignmentSecondaryActionType").MD_CHAT_ASSIGNMENT_SECONDARY_ACTION_TYPE]},[1,1,1],"regular"]},{MdChatAssignmentSecondaryAction:[]});g.MdChatAssignmentSecondaryActionWamEvent=b}),98);
__d("WAWebWamEnumChatAssignmentActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTION_ASSIGNED:0,ACTION_UNASSIGNED:1,ACTION_REASSIGNED:2});f.CHAT_ASSIGNMENT_ACTION_TYPE=a}),66);
__d("WAWebWamEnumChatAssignmentChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({INDIVIDUAL:0,GROUP:1,COMMUNITY:2,CHANNEL:3});f.CHAT_ASSIGNMENT_CHAT_TYPE=a}),66);
__d("WAWebWamEnumChatAssignmentEntryPointType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONVERSATION_OVERFLOW_MENU:0,CONTACT_INFO_SCREEN:1,MULTI_SELECT:2,SYSTEM_MESSAGE:3,CHAT_LIST_SWIPE:4});f.CHAT_ASSIGNMENT_ENTRY_POINT_TYPE=a}),66);
__d("WAWebMdChatAssignmentWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatAssignmentActionType","WAWebWamEnumChatAssignmentChatType","WAWebWamEnumChatAssignmentEntryPointType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdChatAssignment:[3752,{assignerAgentId:[1,a.TYPES.STRING],assignerBrowserId:[2,a.TYPES.STRING],assignerMdId:[3,a.TYPES.INTEGER],chatAssignmentAction:[4,d("WAWebWamEnumChatAssignmentActionType").CHAT_ASSIGNMENT_ACTION_TYPE],chatAssignmentAgentId:[5,a.TYPES.STRING],chatAssignmentBrowserId:[6,a.TYPES.STRING],chatAssignmentChatType:[7,d("WAWebWamEnumChatAssignmentChatType").CHAT_ASSIGNMENT_CHAT_TYPE],chatAssignmentEntryPoint:[8,d("WAWebWamEnumChatAssignmentEntryPointType").CHAT_ASSIGNMENT_ENTRY_POINT_TYPE],chatAssignmentMdId:[9,a.TYPES.INTEGER],chatsCnt:[10,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdChatAssignment:[]});g.MdChatAssignmentWamEvent=b}),98);
__d("WAWebChatAssignmentLogEvents",["WAWebABProps","WAWebAgentCollection","WAWebBizGatingUtils","WAWebChatAssignmentLogEvents.flow","WAWebChatCollection","WAWebMdChatAssignmentSecondaryActionWamEvent","WAWebMdChatAssignmentWamEvent","WAWebMiscBrowserUtils","WAWebUserPrefsMeUser","WAWebWamEnumChatAssignmentActionType","WAWebWamEnumChatAssignmentEntryPointType","WAWebWamEnumMdChatAssignmentAssignmentType","WAWebWamEnumMdChatAssignmentSecondaryActionType","WAWebWamEnumMdChatAssignmentSourceType"],(function(a,b,c,d,e,f,g){function h(){var a=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId();return d("WAWebAgentCollection").AgentCollection.getModelsArray().find(function(b){return b.deviceId===a})}function i(a,b){var e=h(),f=d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_system_messages_logging_v2_enabled");f||delete b.mdChatAssignmentSecondaryActionAssignmentType;return new(d("WAWebMdChatAssignmentSecondaryActionWamEvent").MdChatAssignmentSecondaryActionWamEvent)(babelHelpers["extends"]({mdChatAssignmentSecondaryActionChatType:a==null?void 0:a.getMdChatAssignmentChatType(),mdChatAssignmentSecondaryActionMdId:(f=e==null?void 0:e.deviceId)!=null?f:-1,mdChatAssignmentSecondaryActionAgentId:(a=e==null?void 0:e.id)!=null?a:"",mdChatAssignmentSecondaryActionBrowserId:c("WAWebMiscBrowserUtils").persistentExpiringId()},b))}function a(a){if(!d("WAWebBizGatingUtils").chatAssignmentEnabled())return;i(a,{mdChatAssignmentSecondaryActionType:d("WAWebWamEnumMdChatAssignmentSecondaryActionType").MD_CHAT_ASSIGNMENT_SECONDARY_ACTION_TYPE.ACTION_TOOLTIP_SHOWN,mdChatAssignmentSecondaryActionSource:d("WAWebWamEnumMdChatAssignmentSourceType").MD_CHAT_ASSIGNMENT_SOURCE_TYPE.NONE}).commit()}function b(a){if(!d("WAWebBizGatingUtils").chatAssignmentEnabled())return;i(a,{mdChatAssignmentSecondaryActionType:d("WAWebWamEnumMdChatAssignmentSecondaryActionType").MD_CHAT_ASSIGNMENT_SECONDARY_ACTION_TYPE.ACTION_SYSTEM_MESSAGE_ADDED_TO_CHAT_HISTORY,mdChatAssignmentSecondaryActionSource:d("WAWebWamEnumMdChatAssignmentSourceType").MD_CHAT_ASSIGNMENT_SOURCE_TYPE.BOOTSTRAP,mdChatAssignmentSecondaryActionAssignmentType:a.assignedAgent==null?d("WAWebWamEnumMdChatAssignmentAssignmentType").MD_CHAT_ASSIGNMENT_ASSIGNMENT_TYPE.ASSIGNED:d("WAWebWamEnumMdChatAssignmentAssignmentType").MD_CHAT_ASSIGNMENT_ASSIGNMENT_TYPE.UNASSIGNED}).commit()}function e(a){if(!d("WAWebBizGatingUtils").chatAssignmentEnabled())return;i(a,{mdChatAssignmentSecondaryActionType:d("WAWebWamEnumMdChatAssignmentSecondaryActionType").MD_CHAT_ASSIGNMENT_SECONDARY_ACTION_TYPE.ACTION_SYSTEM_MESSAGE_CREATION_ERROR,mdChatAssignmentSecondaryActionSource:d("WAWebWamEnumMdChatAssignmentSourceType").MD_CHAT_ASSIGNMENT_SOURCE_TYPE.NONE,mdChatAssignmentSecondaryActionAssignmentType:a.assignedAgent==null?d("WAWebWamEnumMdChatAssignmentAssignmentType").MD_CHAT_ASSIGNMENT_ASSIGNMENT_TYPE.ASSIGNED:d("WAWebWamEnumMdChatAssignmentAssignmentType").MD_CHAT_ASSIGNMENT_ASSIGNMENT_TYPE.UNASSIGNED}).commit()}function f(a){if(!d("WAWebBizGatingUtils").chatAssignmentEnabled())return;a=d("WAWebChatCollection").ChatCollection.get(a);if(a==null)return;i(a,{mdChatAssignmentSecondaryActionType:d("WAWebWamEnumMdChatAssignmentSecondaryActionType").MD_CHAT_ASSIGNMENT_SECONDARY_ACTION_TYPE.ACTION_CHAT_STATUS_TICKER_SHOWN,mdChatAssignmentSecondaryActionSource:d("WAWebWamEnumMdChatAssignmentSourceType").MD_CHAT_ASSIGNMENT_SOURCE_TYPE.NONE}).commit()}function j(a,b,e){var f=h(),g=d("WAWebAgentCollection").AgentCollection.get(b),i=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId();b=b===(f==null?void 0:f.id);return new(d("WAWebMdChatAssignmentWamEvent").MdChatAssignmentWamEvent)(babelHelpers["extends"]({assignerMdId:i,assignerAgentId:(i=f==null?void 0:f.id)!=null?i:"",assignerBrowserId:c("WAWebMiscBrowserUtils").persistentExpiringId(),chatAssignmentAgentId:(f=g==null?void 0:g.id)!=null?f:"",chatAssignmentMdId:(i=g==null?void 0:g.deviceId)!=null?i:-1,chatAssignmentBrowserId:b?c("WAWebMiscBrowserUtils").persistentExpiringId():"",chatAssignmentChatType:a.getChatAssignmentChatType()},e))}function k(a){switch(a){case d("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.MULTI_SELECT:return d("WAWebWamEnumChatAssignmentEntryPointType").CHAT_ASSIGNMENT_ENTRY_POINT_TYPE.MULTI_SELECT;case d("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.SYSTEM_MESSAGE:return d("WAWebWamEnumChatAssignmentEntryPointType").CHAT_ASSIGNMENT_ENTRY_POINT_TYPE.SYSTEM_MESSAGE;case d("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.CONVERSATION_MENU:return d("WAWebWamEnumChatAssignmentEntryPointType").CHAT_ASSIGNMENT_ENTRY_POINT_TYPE.CONVERSATION_OVERFLOW_MENU;case d("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.CONTACT_INFO_SCREEN:return d("WAWebWamEnumChatAssignmentEntryPointType").CHAT_ASSIGNMENT_ENTRY_POINT_TYPE.CONTACT_INFO_SCREEN}}function l(a,b,c,e,f){if(!d("WAWebBizGatingUtils").chatAssignmentEnabled())return;var g;b===""?g=d("WAWebWamEnumChatAssignmentActionType").CHAT_ASSIGNMENT_ACTION_TYPE.ACTION_UNASSIGNED:c?g=d("WAWebWamEnumChatAssignmentActionType").CHAT_ASSIGNMENT_ACTION_TYPE.ACTION_REASSIGNED:g=d("WAWebWamEnumChatAssignmentActionType").CHAT_ASSIGNMENT_ACTION_TYPE.ACTION_ASSIGNED;j(a,b,{chatAssignmentAction:g,chatAssignmentEntryPoint:k(e),chatsCnt:f}).commit()}g.logNuxShown=a;g.logSystemMessageGeneratedFromCompanion=b;g.logSystemMessageFailedToGenerate=e;g.logChatStatusTickerShown=f;g.logChatAssignment=l}),98);
__d("WAWebLabelFilledIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="label-filled";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M15.393 5C16.314 5 17.167 5.447 17.685 6.182L21.812 12L21.346 12.657L17.686 17.816C17.166 18.553 16.314 19 15.393 19L5.81 18.992C4.262 18.992 3 17.738 3 16.19V7.81C3 6.261 4.262 5.008 5.809 5.008L15.393 5Z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.LabelFilledIcon=a}),98);
__d("WAWebLabelConstants",[],(function(a,b,c,d,e,f){a=["#FF9485","#64C4FF","#FFD429","#DFAEF0","#99B6C1","#55CCB3","#FF9DFF","#D3A91D","#6D7CCE","#D7E752","#00D0E2","#FFC5C7","#93CEAC","#F74848","#00A0F2","#83E422","#FFAF04","#B5EBFF","#9BA6FF","#9368CF"];b=["#A62C71","#90A841","#C1A03F","#792138","#AE8774","#F0B330","#B6B327","#C69FCC","#8B6990","#FF8A8C","#54C265","#FF7B6B","#26C4DC","#57C9FF","#74676A","#7E90A3","#5696FF","#6E257E","#7ACBA5","#243640"];f.ANDROID_LABEL_COLOR_PALETTE=a;f.IPHONE_LABEL_COLOR_PALETTE=b}),66);
__d("WAWebLabelUtils",["WAWebBizGatingUtils","WAWebConnModel","WAWebLabelConstants","WAWebMobilePlatforms"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebConnModel").Conn.platform===d("WAWebMobilePlatforms").PLATFORMS.SMBI?d("WAWebLabelConstants").IPHONE_LABEL_COLOR_PALETTE:d("WAWebLabelConstants").ANDROID_LABEL_COLOR_PALETTE}function a(a){return h()[a]}var i=function(a,b){a=parseInt(a.id,10);b=parseInt(b.id,10);return Number.isNaN(a)||Number.isNaN(b)?0:a-b},j=function(a){a.sort(i)};b=function(a){if(!d("WAWebBizGatingUtils").isLabelReorderingSyncFromPrimaryEnabled()){j(a);return}a.sort(function(a,b){var c=a.orderIndex-b.orderIndex;return c===0?i(a,b):c})};g.getAllLabelColors=h;g.colorIndexToHex=a;g.sortLabels=b}),98);
__d("WAWebLabelGetters",["WAWebGetters","WAWebGettersCaches","WAWebLabelUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createLabelsCache});b=a.field;c=a.computed;e=b("colorIndex");f=b("color");a=c(function(a){a[0];a=a[1];if(a==null)return;return d("WAWebLabelUtils").colorIndexToHex(a)},[f,e]);g.getColorIndex=e;g.getColor=f;g.getHexColor=a}),98);
__d("useWAWebForceUpdate",["react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useReducer;function a(){var a=i(function(a){return a+1},0);a=a[1];return a}g["default"]=a}),98);
__d("WAWebLabels.react",["WAWebBizGatingUtils","WAWebEmojiText.react","WAWebLabelCollection","WAWebLabelFilledIcon","WAWebLabelGetters","WAWebTopMenuRedesignGatingUtils","WAWebUISpacing","react","stylex","useWAWebForceUpdate","useWAWebListener"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useMemo,m={container:{display:"x1rg5ohu",flexShrink:"x2lah0s",verticalAlign:"x16dsc37",$$css:!0},name:{flexShrink:"x2lah0s",fontSize:"x1f6kntn",lineHeight:"xggjnk3",color:"xzwifym",$$css:!0},labelFilter:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},labelFilterIconContainer:{display:"x78zum5",flexShrink:"x2lah0s",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xvy4d1p",height:"xxk0z11",$$css:!0},labelFilterPillIconContainer:{width:"xw4jnvo",height:"x1qx5ct2",$$css:!0},labelFilterName:{flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",flexBasis:"xdl72j9",overflowX:"x6ikm8r",overflowY:"x10wlt62",lineHeight:"x1o2sk6j",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},labelFilterPillName:{color:"xdxn8r",lineHeight:"x1fc57z9",maxWidth:"x18tx2qf",$$css:!0},drawerTitle:{maxWidth:"x193iq5w",$$css:!0},drawerTitleIconContainer:{flexShrink:"x2lah0s",$$css:!0},drawerTitleName:{flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",flexBasis:"xdl72j9",overflowX:"x6ikm8r",overflowY:"x10wlt62",fontSize:"x1jchvi3",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},drawerTitleNameColorOverride:{color:"xoj7uri",$$css:!0},containerFull:{display:"x3nfvp2",alignItems:"x6s0dn4",$$css:!0},containerFullCircleIcon:{display:"x1rg5ohu",flexShrink:"x2lah0s",marginTop:"x1y332i5",color:"xfect85",$$css:!0},circleIconContainer:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x100vrsf",height:"x1vqgdyp",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},circleIcon:{color:"x7o08j2",$$css:!0},circleIconSVG:{width:"xw4jnvo",height:"x1qx5ct2",$$css:!0}};function n(a){if(a.length===0)return;var b=Math.max.apply(Math,a.map(function(a){return parseInt(a,10)}));return Number.isNaN(b)?a[0]:b.toString()}function o(a){a=n(a);return a==null?null:d("WAWebLabelCollection").LabelCollection.get(a)}function p(a){var b=a.color,e=a.name,f=a.renderAsCircle;f=f===void 0?!1:f;var g=a.theme,h=a.iconXstyle;a=e!=null?k.jsx("span",{className:(i||(i=c("stylex")))(m.name,d("WAWebUISpacing").uiMargin.start3,(a.theme==="label-filter"||a.theme==="label-pill")&&m.labelFilterName,a.theme==="label-pill"&&m.labelFilterPillName,(a.theme==="label-filter"||a.theme==="label-pill")&&d("WAWebUISpacing").uiMargin.start8,a.theme==="drawer-title"&&m.drawerTitleName,a.theme==="drawer-title"&&!d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()&&m.drawerTitleNameColorOverride,a.theme==="drawer-title"&&d("WAWebUISpacing").uiMargin.start0),children:k.jsx(d("WAWebEmojiText.react").EmojiText,{text:e})}):null;var j=(i||(i=c("stylex")))(e==null&&!f&&m.container,f&&m.containerFull,e!=null&&!f&&m.containerFull,g==="label-filter"&&m.labelFilter,g==="drawer-title"&&m.drawerTitle),l=f&&b!=null?{backgroundColor:b}:{};b=f?k.jsx(d("WAWebLabelFilledIcon").LabelFilledIcon,{xstyle:m.circleIcon,iconXstyle:m.circleIconSVG}):q(b,[e!=null&&m.containerFullCircleIcon,h]);return k.jsxs("div",{className:j,children:[k.jsx("div",{"data-testid":void 0,className:i(f&&m.circleIconContainer,g==="drawer-title"&&m.drawerTitleIconContainer,g==="drawer-title"&&d("WAWebUISpacing").uiMargin.end20,g==="drawer-title"&&d("WAWebUISpacing").uiMargin.start4,(g==="label-filter"||g==="label-pill")&&m.labelFilterIconContainer,g==="label-pill"&&m.labelFilterPillIconContainer),style:l,children:b}),a]})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.labels,e=a.showName;e=e===void 0?!1:e;var f=a.renderAsCircle;f=f===void 0?!1:f;var g=a.theme;a=a.iconXstyle;var h=c("useWAWebForceUpdate")(),i=l(function(){return n(b)},[b]);d("useWAWebListener").useListener(i!=null?d("WAWebLabelCollection").LabelCollection:null,"label_updated_"+((i=i)!=null?i:""),h);if(!d("WAWebBizGatingUtils").canDisplayLabel())return null;i=o(b);if(!i||!i.name)return null;if(b.length===1){h=d("WAWebLabelGetters").getHexColor(i);e=e?i.name:null;return k.jsx(p,{color:h,name:e,renderAsCircle:f,theme:g,iconXstyle:a})}return k.jsx("div",{className:"x1rg5ohu x2lah0s x16dsc37",children:k.jsxs("svg",{width:"18px",height:"15px",viewBox:"0 0 18 15",children:[k.jsx("path",{fill:d("WAWebLabelGetters").getHexColor(i),d:"M11.208,3.925H2.236C1.556,3.925,1,4.565,1,5.357v7.213C1,13.362,1.556,14,2.236,14h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,4.53C11.993,4.162,11.622,3.925,11.208,3.925z"}),k.jsx("path",{fill:"currentColor",d:"M15.541,7.832L13.164,3.93 c-0.423-0.698-1.15-1.142-1.956-1.142H2.595V2.432C2.595,1.64,3.151,1,3.831,1h9.1c0.414,0,0.782,0.237,1.005,0.605l2.696,4.433 L15.541,7.832z"})]})})}a.displayName=a.name+" [from "+f.id+"]";function q(a,b){return k.jsx("svg",{width:"18px",height:"12px",viewBox:"0 0 18 12",className:(i||(i=c("stylex")))(b),children:k.jsx("path",{fill:a||"#ffffff",d:"M11.208,0.925H2.236C1.556,0.925,1,1.565,1,2.357V9.57C1,10.362,1.556,11,2.236,11h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,1.53C11.993,1.162,11.622,0.925,11.208,0.925z"})})}q.displayName=q.name+" [from "+f.id+"]";g.getVisibleLabelId=n;g.Label=p;g.Labels=a;g.renderLabelSvg=q}),98);
__d("WAWebOTPHelper",["fbt","WAWebABProps","WAWebCopyToClipboard","WAWebMsgDataFromModel","WAWebOTPLoggingHelper","WAWebTemplateButtonSubtype","WAWebToast.react","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){if(d("WAWebABProps").getABPropConfigValue("web_otp_copy_code_disabled"))return!1;if(!navigator.clipboard)return!1;var b=a.url;if(a.subtype!==d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.URL||b==null)return!1;try{a=new URL(b);return k(a)!=null}catch(a){return!1}}function k(a){var b;return(b=l(a))!=null?b:m(a)}function b(a){var b=a.url;if(a.subtype!==d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.URL||b==null)return null;try{a=new URL(b);return k(a)}catch(a){return null}}function e(a,b){var c=a.url;if(a.subtype!==d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.URL||c==null)return;a=new URL(c);c=k(a);if(c==null)return;a=d("WAWebCopyToClipboard").copyTextToClipboard(c);a&&d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__Ck-tGbziqPm__JHASH__")}));void d("WAWebOTPLoggingHelper").logOTPButtonClick(d("WAWebMsgDataFromModel").msgDataFromMsgModel(b))}function l(a){var b=d("WAWebABProps").getABPropConfigValue("unified_otp_copy_code_url");return!a.toString().startsWith(b)?null:a.toString().slice(b.length)}function m(a){var b=d("WAWebABProps").getABPropConfigValue("unified_otp_retriever_url");if(!a.toString().startsWith(b))return null;b=a.searchParams;a=b.get("code");if(a==null)return null;b="otp";return a.startsWith(b)?a.slice(b.length):a}g.isOTPCopyCodeButton=a;g.getOTPCode=k;g.getOTPCodeFromButton=b;g.copyOTPCode=e}),226);
__d("WAIsoToCc",[],(function(a,b,c,d,e,f){"use strict";a={ES:34,DE:49,MX:52,GB:44,SA:966,IT:39,AF:93,AX:358,AL:355,DZ:213,AS:1,AD:376,AO:244,AI:1,AG:1,AR:54,AM:374,AW:297,AC:247,AU:61,AT:43,AZ:994,BS:1,BH:973,BD:880,BB:1,BY:375,BE:32,BZ:501,BJ:229,BM:1,BT:975,BO:591,BQ:599,BA:387,BW:267,BR:55,IO:246,VG:1,BN:673,BG:359,BF:226,BI:257,CI:225,KH:855,CM:237,CA:1,CV:238,KY:1,CF:236,TD:235,CL:56,CN:86,CX:61,CC:61,CO:57,KM:269,CG:242,CD:243,CK:682,CR:506,HR:385,CU:53,CW:599,CY:357,CZ:420,DK:45,DJ:253,DM:1,DO:1,EC:593,EG:20,SV:503,GQ:240,ER:291,EE:372,ET:251,FK:500,FO:298,FJ:679,FI:358,FR:33,GF:594,PF:689,GA:241,GM:220,GE:995,GH:233,GI:350,GR:30,GL:299,GD:1,GP:590,GU:1,GT:502,GG:44,GN:224,GW:245,GY:592,HT:509,HN:504,HK:852,HU:36,IS:354,IN:91,ID:62,IR:98,IQ:964,IE:353,IM:44,IL:972,JM:1,JP:81,JE:44,JO:962,KZ:7,KE:254,KI:686,KW:965,KG:996,LA:856,LV:371,LB:961,LS:266,LR:231,LY:218,LI:423,LT:370,LU:352,MO:853,MK:389,MG:261,MW:265,MY:60,MV:960,ML:223,MT:356,MH:692,MQ:596,MR:222,MU:230,YT:262,FM:691,MD:373,MC:377,MN:976,ME:382,MS:1,MA:212,MZ:258,MM:95,NA:264,NR:674,NP:977,NL:31,NC:687,NZ:64,NI:505,NE:227,NG:234,NU:683,NF:672,KP:850,MP:1,NO:47,OM:968,PK:92,PW:680,PS:970,PA:507,PG:675,PY:595,PE:51,PH:63,PL:48,PT:351,PR:1,QA:974,RO:40,RU:7,RW:250,RE:262,BL:590,SH:290,KN:1,LC:1,MF:590,PM:508,VC:1,WS:685,SM:378,SN:221,RS:381,SC:248,SL:232,SG:65,SX:1,SK:421,SI:386,SB:677,SO:252,ZA:27,KR:82,SS:211,LK:94,SD:249,SR:597,SJ:47,SZ:268,SE:46,CH:41,SY:963,ST:239,TW:886,TJ:992,TZ:255,TH:66,TL:670,TG:228,TK:690,TO:676,TT:1,TN:216,TR:90,TM:993,TC:1,TV:688,VI:1,UG:256,UA:380,AE:971,US:1,UY:598,UZ:998,VU:678,VA:379,VE:58,VN:84,WF:681,YE:967,ZM:260,ZW:263,XK:383};b=a;f["default"]=b}),66);
__d("WAWebLinkDevicePhoneNumberEntryInputFormatUtils",["WACcToIso","WAIsoToCc","WAPhoneUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.countryCodeIso;a=a.phoneNumberWithoutCountryCode;if(b==null)return h(a);var e=c("WAIsoToCc")[b];e=d("WAPhoneUtils").compileCountryRegexes(String(e));if(e==null)return null;b=l(""+c("WAIsoToCc")[b]+a);var f=b.phoneNumberWithoutCountryCode;a=i(e);b=Math.max.apply(Math,a);if(f.length>b)return h(f);b=a.filter(function(a){return a>=f.length}).map(function(a){return j(f,a)});for(var a=e.formats,e=Array.isArray(a),g=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(e){if(g>=a.length)break;m=a[g++]}else{g=a.next();if(g.done)break;m=g.value}m=m;var n=m.testAndFormat(f);if(n!=null)return{formattedInputValue:n,placeholder:""};for(var n=b,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}q=q;q=m.testAndFormat(q);if(q!=null)return k({phoneNumberWithoutCountryCode:f,formattedPaddedNumber:q})}}return h(f)}function h(a){return{formattedInputValue:a,placeholder:""}}function i(a){a=a.lengths;return typeof a==="number"?[a]:a.sort(function(a,b){return a-b})}function j(a,b){return a+"_".repeat(b-a.length)}function k(a){var b=a.phoneNumberWithoutCountryCode;a=a.formattedPaddedNumber;if(b==="")return{formattedInputValue:"",placeholder:a};b=Array.from(a.matchAll(/\d/g));b=b.pop().index;b=b+1;return{formattedInputValue:a.substr(0,b),placeholder:a.substr(b)}}function b(a,b){a=d("WAPhoneUtils").compileCountryRegexes(String(a));return a==null?!1:a.formats.some(function(a){return a.testAndFormat(b)!=null})}function l(a){a=a.replaceAll(/[^\d]/g,"");var b=m(a),d=a;if(b!=null){var e=c("WAIsoToCc")[b];d=d.replace(new RegExp("^"+e),"")}return{countryCodeIso:b,phoneNumberWithoutCountryCode:d,fullRawPhoneNumber:a}}function m(a){a=d("WAPhoneUtils").findCC(a);return c("WACcToIso")[parseInt(a,10)]}function e(a,b,c){if(b==null){a=a?"+":"";return""+a+c}return"+"+b+" "+c}g.formatPhoneNumberInput=a;g.isPhoneNumberValid=b;g.cleanPhoneNumberInputValue=l;g.getCountryCodeIso=m;g.getFullFormattedInputValue=e}),98);
__d("WAWebWamEnumChatsFolderType",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX:1,ARCHIVED:2});f.CHATS_FOLDER_TYPE=a}),66);
__d("WAWebWamEnumCtaFallbackReason",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_OTP_REQUEST_RECEIVED:0,OTP_REQUEST_EXPIRED:1,HASH_MISMATCH:2,NO_ACTIVITY_LISTENING_ON_THIRD_PARTY_APP:3,OTHER:4,NO_PACKAGE_NAME_ON_MESSAGE:5,NO_CTA_DISPLAY_NAME:6,INCOMPATIBLE_OS_VERSION:7,NO_RETRIEVER_BUTTON:8,FEATURE_DISABLED:9,AMBIGUOUS_DELIVERY_DESTINATION:10});f.CTA_FALLBACK_REASON=a}),66);
__d("WAWebWamEnumCtaType",[],(function(a,b,c,d,e,f){a=Object.freeze({COPY_CODE:0,AUTOFILL:1});f.CTA_TYPE=a}),66);
__d("WAWebWamEnumOtpEventSource",[],(function(a,b,c,d,e,f){a=Object.freeze({NOTIFICATION_CTA:0,NOTIFICATION_BODY:1,CHAT_CTA:2,OTHER:3,OTP_MESSAGE:4,OTP_MESSAGE_INFO:5,OTP_CONFIGURATION:6,OTP_REQUEST_SENDER:7,OTP_ZERO_TAP_SENDER:8,OTP_CONF_OPTION:9});f.OTP_EVENT_SOURCE=a}),66);
__d("WAWebWamEnumOtpEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({CLICK:0,IMPRESSION:1,OTP_CODE_REQUESTED:2,OTP_CODE_SENT:3,MESSAGE_RECEIVED:4,MESSAGE_READ:5,MESSAGE_DELETED:6,ZERO_TAP_ENABLED:7,ZERO_TAP_DISABLED:8,ZERO_TAP_NOTICE_VIEWED:9,CLEAR_CHAT:10,ZERO_TAP_SEND_CODE_STARTED:11,ZERO_TAP_SEND_CODE_COMPLETED:12,ZERO_TAP_SEND_CODE_FAILED:13,OTP_CONF_OPT_ZERO_TAP_FLAG_ENABLED:14,OTP_CONF_OPT_ZERO_TAP_FLAG_DISABLED:15,HANDSHAKE_CONFIRMATION_SENT:16});f.OTP_EVENT_TYPE=a}),66);
__d("WAWebWamEnumOtpProductType",[],(function(a,b,c,d,e,f){a=Object.freeze({ONE_TAP:0,ZERO_TAP:1,COPY_CODE:2});f.OTP_PRODUCT_TYPE=a}),66);
__d("WAWebOtpRetrieverWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatsFolderType","WAWebWamEnumCtaFallbackReason","WAWebWamEnumCtaType","WAWebWamEnumOtpEventSource","WAWebWamEnumOtpEventType","WAWebWamEnumOtpProductType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({OtpRetriever:[3468,{businessPhoneNumber:[1,a.TYPES.INTEGER],chatId:[19,a.TYPES.STRING],chatsFolderType:[12,d("WAWebWamEnumChatsFolderType").CHATS_FOLDER_TYPE],ctaFallbackReason:[2,d("WAWebWamEnumCtaFallbackReason").CTA_FALLBACK_REASON],ctaType:[3,d("WAWebWamEnumCtaType").CTA_TYPE],isKeepChatsArchivedEnabled:[13,a.TYPES.BOOLEAN],isMessageNotificationEnabled:[14,a.TYPES.BOOLEAN],isNotificationEnabled:[15,a.TYPES.BOOLEAN],messageReceivedElapsedTimeSeconds:[11,a.TYPES.INTEGER],otpCorrelationId:[20,a.TYPES.STRING],otpEventSource:[5,d("WAWebWamEnumOtpEventSource").OTP_EVENT_SOURCE],otpEventType:[6,d("WAWebWamEnumOtpEventType").OTP_EVENT_TYPE],otpFailureReason:[16,a.TYPES.STRING],otpHandshakeElapsedTimeMs:[21,a.TYPES.INTEGER],otpHandshakeId:[23,a.TYPES.STRING],otpMaskLinkedDevices:[24,a.TYPES.BOOLEAN],otpProductType:[7,d("WAWebWamEnumOtpProductType").OTP_PRODUCT_TYPE],otpSdkVersion:[22,a.TYPES.STRING],otpSessionId:[8,a.TYPES.STRING],receiverCountryCode:[18,a.TYPES.STRING],templateId:[17,a.TYPES.STRING],thirdPartyPackageNameFromIntent:[9,a.TYPES.STRING],thirdPartyPackageSignatureHash:[10,a.TYPES.STRING],waDeviceId:[25,a.TYPES.INTEGER]},[1,1,1],"private",113760892]},{OtpRetriever:[]});g.OtpRetrieverWamEvent=b}),98);
__d("WAWebOTPLoggingHelper",["WACryptoSha256","WAWebABProps","WAWebDBMessageSerialization","WAWebFrontendMsgGetters","WAWebLinkDevicePhoneNumberEntryInputFormatUtils","WAWebMsgGetters","WAWebMuteGetters","WAWebOtpRetrieverWamEvent","WAWebSettingsGetters","WAWebSettingsModel","WAWebUserPrefsMeUser","WAWebUserPrefsNotifications","WAWebWamEnumChatsFolderType","WAWebWamEnumCtaType","WAWebWamEnumOtpEventSource","WAWebWamEnumOtpEventType","WAWebWamEnumOtpProductType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMsgGetters").getIsAuthenticationMessage(a))return;var b=new(d("WAWebOtpRetrieverWamEvent").OtpRetrieverWamEvent)({otpEventType:d("WAWebWamEnumOtpEventType").OTP_EVENT_TYPE.CLICK,otpEventSource:d("WAWebWamEnumOtpEventSource").OTP_EVENT_SOURCE.CHAT_CTA,ctaType:d("WAWebWamEnumCtaType").CTA_TYPE.COPY_CODE});yield m(b,a);b.commit()});return h.apply(this,arguments)}function e(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(!d("WAWebMsgGetters").getIsAuthenticationMessage(a))return;var c=new(d("WAWebOtpRetrieverWamEvent").OtpRetrieverWamEvent)({otpEventType:d("WAWebWamEnumOtpEventType").OTP_EVENT_TYPE.MESSAGE_RECEIVED,otpEventSource:d("WAWebWamEnumOtpEventSource").OTP_EVENT_SOURCE.OTP_MESSAGE,ctaType:d("WAWebWamEnumCtaType").CTA_TYPE.COPY_CODE});b=(b=d("WAWebUserPrefsMeUser").getMe())==null?void 0:b.getDeviceId();b!=null&&(c.waDeviceId=b);yield m(c,a);c.commit()});return i.apply(this,arguments)}function f(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebDBMessageSerialization").messageFromDbRow(a);if(!d("WAWebMsgGetters").getIsAuthenticationMessage(a))return;var b=new(d("WAWebOtpRetrieverWamEvent").OtpRetrieverWamEvent)({otpEventType:d("WAWebWamEnumOtpEventType").OTP_EVENT_TYPE.MESSAGE_READ,otpEventSource:d("WAWebWamEnumOtpEventSource").OTP_EVENT_SOURCE.OTP_MESSAGE,ctaType:d("WAWebWamEnumCtaType").CTA_TYPE.COPY_CODE});yield m(b,a);b.commit()});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMsgGetters").getIsAuthenticationMessage(a))return;var b=new(d("WAWebOtpRetrieverWamEvent").OtpRetrieverWamEvent)({otpEventType:d("WAWebWamEnumOtpEventType").OTP_EVENT_TYPE.MESSAGE_DELETED,otpEventSource:d("WAWebWamEnumOtpEventSource").OTP_EVENT_SOURCE.OTP_MESSAGE,ctaType:d("WAWebWamEnumCtaType").CTA_TYPE.COPY_CODE});yield m(b,a);b.commit()});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a.otpSessionId=(yield q(b));a.receiverCountryCode=String(d("WAWebLinkDevicePhoneNumberEntryInputFormatUtils").getCountryCodeIso(d("WAWebUserPrefsMeUser").getMeUser().user));var c=b.from.user;c!=null&&(a.businessPhoneNumber=Number(c));c=b.templateId;c!=null&&(a.templateId=c);c=r(b);c!=null&&(a.otpProductType=c);o(a);p(a,b)});return n.apply(this,arguments)}function o(a){a.isKeepChatsArchivedEnabled=d("WAWebSettingsGetters").getShowArchiveV2(c("WAWebSettingsModel")),a.isNotificationEnabled=d("WAWebUserPrefsNotifications").getGlobalNotifications()}function p(a,b){b=d("WAWebFrontendMsgGetters").getChat(b);if(b==null)return;a.chatsFolderType=b.archive?d("WAWebWamEnumChatsFolderType").CHATS_FOLDER_TYPE.ARCHIVED:d("WAWebWamEnumChatsFolderType").CHATS_FOLDER_TYPE.INBOX;a.isMessageNotificationEnabled=!d("WAWebMuteGetters").getIsMuted(b.mute)}function q(a){return d("WACryptoSha256").sha256Str(a.id.id)}function r(a){a=a.hydratedButtons;if(a==null||a.length===0)return null;var b=d("WAWebABProps").getABPropConfigValue("unified_otp_copy_code_url"),c=d("WAWebABProps").getABPropConfigValue("unified_otp_retriever_url");for(a of a){var e;e=(e=a.urlButton)==null?void 0:e.url;if(e==null)continue;if(e.startsWith(b))return d("WAWebWamEnumOtpProductType").OTP_PRODUCT_TYPE.COPY_CODE;else if(e.startsWith(c)){e=(e=new URL(e))==null?void 0:e.searchParams;e=e.get("otp_type");if(e!=null)switch(e){case"COPY_CODE":return d("WAWebWamEnumOtpProductType").OTP_PRODUCT_TYPE.COPY_CODE;case"ONE_TAP":return d("WAWebWamEnumOtpProductType").OTP_PRODUCT_TYPE.ONE_TAP;case"ZERO_TAP":return d("WAWebWamEnumOtpProductType").OTP_PRODUCT_TYPE.ZERO_TAP;default:continue}else return d("WAWebWamEnumOtpProductType").OTP_PRODUCT_TYPE.ONE_TAP}}return null}g.logOTPButtonClick=a;g.logOTPMessageReceived=e;g.logOTPMessageRead=f;g.logOTPMessageDeleted=k}),98);
__d("WAWebWamEnumBizPlatform",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1,SMB:2,ENT:3,CLOUDAPI:4});f.BIZ_PLATFORM=a}),66);
__d("WAWebWamEnumCatalogEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CATALOG_ENTRY_POINT_PROFILE:1,CATALOG_ENTRY_POINT_SETTINGS:2,CATALOG_ENTRY_POINT_MESSAGE:3,CATALOG_ENTRY_POINT_ATTACHMENT_PANEL:4,CATALOG_ENTRY_POINT_NUX:5,CATALOG_ENTRY_POINT_DEEPLINK:6,CATALOG_ENTRY_POINT_CHAT:7,CATALOG_ENTRY_POINT_ORDER_MESSAGE:8,CATALOG_ENTRY_POINT_INVOICE_ATTACHMENT_PANEL:9,CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE:10,CATALOG_ENTRY_POINT_TOP_BAR:11,CATALOG_ENTRY_POINT_PROFILE_ITEM_CLICK:12,CATALOG_ENTRY_POINT_PROFILE_SEE_ALL:13,CATALOG_ENTRY_POINT_QUOTED_PRODUCT:14,CATALOG_ENTRY_POINT_CATALOG_MESSAGE:15,CATALOG_ENTRY_QBM:16,CATALOG_ENTRY_POINT_ADS_DEEPLINK:17,CATALOG_ENTRY_POINT_WA_PAGES:18,CATALOG_ENTRY_POINT_DIRECTORY_BARE_TIPS:19,CATALOG_ENTRY_POINT_BIZ_ACTION_BAR:20,CATALOG_ENTRY_POINT_BIZ_ONBOARDING:21,CATALOG_ENTRY_POINT_TRUST_CARD:22,CATALOG_ENTRY_POINT_FLOWS:23});f.CATALOG_ENTRY_POINT=a}),66);
__d("WAWebWamEnumCatalogViewAction",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTION_CARD_ITEM_CLICK:2,ACTION_CARD_MORE_CLICK:3,ACTION_LIST_IMPRESSION:4,ACTION_DETAIL_IMAGE_CLICK:6,ACTION_DETAIL_LINK_CLICK:7,ACTION_FULL_IMAGE_SWIPE:11,ACTION_DETAIL_IMPRESSION:12,ACTION_REPORT_PRODUCT:13,ACTION_SEND_PRODUCT_MESSAGE:14,ACTION_REPORT_PRODUCT_SUCCESS:15,ACTION_REPORT_PRODUCT_FAILURE:16,ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK:17,ACTION_PRODUCT_IN_CONVERSATION_CLICK:18,ACTION_SHARE_CATALOG_LINK_CLICK:19,ACTION_SHARE_PRODUCT_LINK_CLICK:20,ACTION_CATALOG_IN_CONVERSATION_CLICK:21,ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK:22,ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK:23,ACTION_SHARE_CATALOG_COPY_LINK_CLICK:24,ACTION_SHARE_PRODUCT_COPY_LINK_CLICK:25,ACTION_CHAT_CATALOG_ICON_CLICK:26,ACTION_MESSAGE_BUSINESS_BUTTON_CLICK:27,ACTION_CART_ADD_PRODUCT:28,ACTION_CART_EDIT_PRODUCT:29,ACTION_CART_DELETE_PRODUCT:30,ACTION_CART_ABANDON:31,ACTION_CART_ICON_CLICK:32,ACTION_CART_SNACKBAR_CLICK:33,ACTION_SEND_ORDER_MESSAGE:34,ACTION_ORDER_LIST_IMPRESSION:35,ACTION_QUOTED_PRODUCT_MESSAGE_SEND:36,ACTION_CART_LIST_IMPRESSION:37,ACTION_ORDER_MESSAGE_CLICK:38,ACTION_ORDER_LIST_ITEM_CLICK:39,ACTION_PLM_CART_CTA_CLICK:40,ACTION_CART_CHAT_ICON_CLICK:42,ACTION_CREATE_CART:43,ACTION_PLP_PRODUCT_VARIANT_BOTTOM_SHEET_OPEN:44,ACTION_PLP_PRODUCT_VARIANT_CHANGE:45,ACTION_PDP_PRODUCT_VARIANT_CHANGE:46,ACTION_PLP_BOTTOM_SHEET_SEE_MORE_DETAILS:47});f.CATALOG_VIEW_ACTION=a}),66);
__d("WAWebWamEnumDeepLinkOpenFrom",[],(function(a,b,c,d,e,f){a=Object.freeze({DEEP_LINK_EXTERNAL:1,DEEP_LINK_WA_LINK_CLICK:2,QR_CODE_SHEET:3,DEEP_LINK_BANNER:4,DEEP_LINK_SMB_NOTIFICATION:5,DEEP_LINK_MESSENGER_APP:6});f.DEEP_LINK_OPEN_FROM=a}),66);
__d("WAWebBizCatalogViewWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizPlatform","WAWebWamEnumCatalogEntryPoint","WAWebWamEnumCatalogViewAction","WAWebWamEnumDeepLinkOpenFrom","WAWebWamEnumEntryPointConversationInitiated"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({BizCatalogView:[3006,{bizPlatform:[14,d("WAWebWamEnumBizPlatform").BIZ_PLATFORM],cartToggle:[13,a.TYPES.BOOLEAN],catalogCategoryId:[19,a.TYPES.STRING],catalogEntryPoint:[2,d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT],catalogEventSampled:[11,a.TYPES.BOOLEAN],catalogOwnerJid:[10,a.TYPES.STRING],catalogReportReasonCode:[8,a.TYPES.STRING],catalogSessionId:[3,a.TYPES.STRING],catalogViewAction:[1,d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION],collectionId:[15,a.TYPES.STRING],collectionIndex:[16,a.TYPES.STRING],deepLinkOpenFrom:[12,d("WAWebWamEnumDeepLinkOpenFrom").DEEP_LINK_OPEN_FROM],entryPointConversationInitiated:[22,d("WAWebWamEnumEntryPointConversationInitiated").ENTRY_POINT_CONVERSATION_INITIATED],entryPointConversionApp:[20,a.TYPES.STRING],entryPointConversionSource:[21,a.TYPES.STRING],hasVariants:[23,a.TYPES.BOOLEAN],isNewProductAddedToCart:[7,a.TYPES.BOOLEAN],isOrderMsgAttached:[5,a.TYPES.BOOLEAN],orderId:[4,a.TYPES.STRING],productId:[9,a.TYPES.STRING],productIndex:[17,a.TYPES.STRING],quantity:[6,a.TYPES.INTEGER],sequenceNumber:[18,a.TYPES.INTEGER]},[1,1,1],"private",0]},{BizCatalogView:[]});g.BizCatalogViewWamEvent=b}),98);
__d("WAWebWamEnumCatalogBizAction",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTION_PRODUCT_ADD_CLICKED:1,ACTION_PRODUCT_ADD_SUCCESS:2,ACTION_PRODUCT_ADD_FAILED:3,ACTION_PRODUCT_EDIT_CLICKED:4,ACTION_PRODUCT_EDIT_SUCCESS:5,ACTION_PRODUCT_EDIT_FAILED:6,ACTION_PRODUCT_DELETE_CLICKED:7,ACTION_PRODUCT_DELETE_SUCCESS:8,ACTION_PRODUCT_DELETE_FAILED:9,ACTION_APPEAL_PRODUCT_CLICKED:10,ACTION_APPEAL_PRODUCT_SUCCESS:11,ACTION_APPEAL_PRODUCT_FAILED:12,ACTION_CREATE_PRODUCT_CATALOG:13,ACTION_CREATE_PRODUCT_CATALOG_SUCCESS:14,ACTION_CREATE_PRODUCT_CATALOG_FAILED:15,ACTION_CATALOG_MENU_ITEM_CLICKED:16,ACTION_PRODUCT_RESUBMIT_CLICKED:17,ACTION_START_IMPORT_FLOW:18,ACTION_IMPORT_POST:19,ACTION_CARD_ITEM_CLICK:21,ACTION_CARD_MORE_CLICK:22,ACTION_LIST_IMPRESSION:23,ACTION_DETAIL_IMAGE_CLICK:25,ACTION_DETAIL_LINK_CLICK:26,ACTION_FULL_IMAGE_SWIPE:30,ACTION_DETAIL_IMPRESSION:31,ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK:32,ACTION_PRODUCT_IN_CONVERSATION_CLICK:33,ACTION_SEND_PRODUCT_MESSAGE:34,ACTION_ONBOARD_IMPRESSION:35,ACTION_SHARE_CATALOG_LINK_CLICK:36,ACTION_SHARE_PRODUCT_LINK_CLICK:37,ACTION_CATALOG_IN_CONVERSATION_CLICK:38,ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK:39,ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK:40,ACTION_SHARE_CATALOG_COPY_LINK_CLICK:41,ACTION_SHARE_PRODUCT_COPY_LINK_CLICK:42,ACTION_SEND_CATALOG_CLICK:43,ACTION_ORDER_MESSAGE_CLICK:44,ACTION_ORDER_LIST_IMPRESSION:45,ACTION_ORDER_LIST_ITEM_CLICK:46,ACTION_MESSAGE_BUSINESS_BUTTON_CLICK:47,ACTION_QUOTED_PRODUCT_MESSAGE_SEND:48,ACTION_CART_ADD_PRODUCT:49,ACTION_CART_ICON_CLICK:50,ACTION_CART_SNACKBAR_CLICK:51,ACTION_CART_LIST_IMPRESSION:52,ACTION_CART_EDIT_PRODUCT:53,ACTION_CART_DELETE_PRODUCT:54,ACTION_CART_ABANDON:55,ACTION_SEND_ORDER_MESSAGE:56,ACTION_MENU_CLICK:57,ACTION_PRODUCT_HIDE_CLICKED:58,ACTION_PRODUCT_HIDE_SUCCESS:59,ACTION_PRODUCT_HIDE_CANCELLED:60,ACTION_PRODUCT_HIDE_FAILED:61,ACTION_PRODUCT_UNHIDE_CLICKED:62,ACTION_PRODUCT_UNHIDE_SUCCESS:63,ACTION_PRODUCT_UNHIDE_CANCELLED:64,ACTION_PRODUCT_UNHIDE_FAILED:65,ACTION_CATALOG_LIST_MENU_CLICKED:66,ACTION_CATALOG_LIST_MENU_CLICKED_WITH_ADVERTISE_SHOWN:67,ACTION_COLLECTION_CREATE_CLICKED:68,ACTION_COLLECTION_CREATED:69,ACTION_MENU_COLLECTIONS_CLICK:70,ACTION_COLLECTION_RENAME_CLICKED:71,ACTION_COLLECTION_RENAME_CANCELLED:72,ACTION_COLLECTION_RENAMED:73,ACTION_COLLECTION_DELETE_CLICKED:74,ACTION_COLLECTION_DELETE_CANCELLED:75,ACTION_COLLECTION_DELETED:76,ACTION_COLLECTION_ASSIGN_ITEMS:77,ACTION_COLLECTION_UNASSIGN_ITEMS:78,ACTION_COLLECTION_CHANGE_ORDER:80,ACTION_COLLECTION_ITEM_CHANGE_ORDER:81});f.CATALOG_BIZ_ACTION=a}),66);
__d("WAWebWamEnumLastMessageDirection",[],(function(a,b,c,d,e,f){a=Object.freeze({OPPOSITE_PARTY_INITIATED:0,SELF_INITIATED:1});f.LAST_MESSAGE_DIRECTION=a}),66);
__d("WAWebCatalogBizWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCatalogBizAction","WAWebWamEnumCatalogEntryPoint","WAWebWamEnumDeepLinkOpenFrom","WAWebWamEnumLastMessageDirection"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CatalogBiz:[1722,{adId:[19,a.TYPES.STRING],cartToggle:[13,a.TYPES.BOOLEAN],catalogAppealReason:[4,a.TYPES.STRING],catalogBizAction:[1,d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION],catalogEntryPoint:[7,d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT],catalogSessionId:[3,a.TYPES.STRING],collectionCount:[18,a.TYPES.INTEGER],collectionId:[14,a.TYPES.STRING],collectionIndex:[15,a.TYPES.STRING],deepLinkOpenFrom:[8,d("WAWebWamEnumDeepLinkOpenFrom").DEEP_LINK_OPEN_FROM],entryPointConversionSource:[20,a.TYPES.STRING],errorCode:[5,a.TYPES.INTEGER],isOrderMsgAttached:[10,a.TYPES.BOOLEAN],lastMessageDirection:[21,d("WAWebWamEnumLastMessageDirection").LAST_MESSAGE_DIRECTION],messageDepth:[22,a.TYPES.INTEGER],orderId:[9,a.TYPES.STRING],productCount:[6,a.TYPES.INTEGER],productId:[2,a.TYPES.STRING],productIds:[12,a.TYPES.STRING],productIndex:[16,a.TYPES.STRING],quantity:[11,a.TYPES.INTEGER],threadIdHmac:[23,a.TYPES.STRING]},[1,1,1],"regular"]},{CatalogBiz:[]});g.CatalogBizWamEvent=b}),98);
__d("WAWebProductCatalogSession",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Session ID requested without being set, returning a randon accidental session. Please investigate."]);h=function(){return a};return a}var i="accidental_session";a=function(){function a(a){this.accidental=a||!1,this.initSessionId()}var b=a.prototype;b.isAccidental=function(){return this.accidental};b.initSessionId=function(){this.sessionId=this.newSessionId()};b.newSessionId=function(){this.sessionId=Math.floor(2147483648*Math.random());return this.sessionId};b.toString=function(){var a=""+this.sessionId;this.accidental&&(d("WALogger").ERROR(h()),a=i+"_"+a);return a};return a}();g.ACCIDENTAL_SESSION=i;g.ProductCatalogSession=a}),98);
__d("WAWebProductCatalogContext",["WAWebProductCatalogSession","WAWebWamEnumBizPlatform"],(function(a,b,c,d,e,f,g){function h(a,b,c){a===void 0&&(a=new(d("WAWebProductCatalogSession").ProductCatalogSession)());b===void 0&&(b=d("WAWebWamEnumBizPlatform").BIZ_PLATFORM.UNKNOWN);return{type:"product_catalog",session:a,entryPoint:c,bizPlatform:b}}function i(){return h(new(d("WAWebProductCatalogSession").ProductCatalogSession)(!0))}function a(a){return j(a).session.toString()}function j(a){return a.type==="product_catalog"?a:i()}function b(a){return{catalogSessionId:a.session.toString(),bizPlatform:a.bizPlatform,catalogEntryPoint:a.entryPoint}}g.buildProductCatalogContext=h;g.getProductCatalogSessionId=a;g.getProductCatalogContext=j;g.toDataForCatalogViewEvents=b}),98);
__d("WAWebProductCatalogEventUtils",["WAWebBizCatalogViewWamEvent","WAWebBizGatingUtils","WAWebCatalogBizWamEvent","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g){a=function(a){var b;a.catalogOwnerJid?b=d("WAWebWidFactory").createWid(a.catalogOwnerJid):a.catalogOwnerWid?b=a.catalogOwnerWid:a.product&&(b=a.product.catalogWid);return b instanceof c("WAWebWid")&&d("WAWebUserPrefsMeUser").isMeAccount(b)};b=function(a){var b=a.isOwner,c=a.catalogBizAction,e=a.catalogViewAction,f=a.bizActionConfig,g=a.bizPlatform,h=a.catalogOwnerJid;a=babelHelpers.objectWithoutPropertiesLoose(a,["isOwner","catalogBizAction","catalogViewAction","bizActionConfig","bizPlatform","catalogOwnerJid"]);if(c&&b){new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)(babelHelpers["extends"]({catalogBizAction:c},a,f)).commit();return}if(e&&d("WAWebBizGatingUtils").isPSForCatalogViewEnabled()){new(d("WAWebBizCatalogViewWamEvent").BizCatalogViewWamEvent)(babelHelpers["extends"]({catalogViewAction:e,bizPlatform:g,catalogOwnerJid:h},a)).commit();return}};g.isCatalogOwner=a;g.logCatalogViewOrBizEvent=b}),98);
__d("WAWebProductCatalogLogEvents",["WAWebBizCatalogUtils","WAWebBizCatalogViewWamEvent","WAWebCatalogBizWamEvent","WAWebProductCatalogContext","WAWebProductCatalogEventUtils","WAWebProductCatalogSession","WAWebUserPrefsMeUser","WAWebWamEnumCatalogBizAction","WAWebWamEnumCatalogEntryPoint","WAWebWamEnumCatalogViewAction","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=a.catalogOwnerWid;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a),{isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({catalogOwnerWid:b}),catalogOwnerJid:b.toJid()}))}function b(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_CARD_ITEM_CLICK},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a),{catalogOwnerJid:b.catalogWid.toJid()}))}function c(a){var b=a.catalogOwnerWid;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({catalogOwnerWid:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_CARD_MORE_CLICK,catalogOwnerJid:b.toJid()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function e(a){var b=a.catalogOwnerWid,c=a.catalogContext;a=a.cartToggle;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({catalogOwnerWid:b}),catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_LIST_IMPRESSION,catalogOwnerJid:b.toJid(),cartToggle:a},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(c)))}function f(a){var b=a.catalogOwnerWid;a=a.catalogContext;var c=d("WAWebProductCatalogEventUtils").isCatalogOwner({catalogOwnerWid:b});d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:c,catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogOwnerJid:b.toJid()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function h(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b})},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function i(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogOwnerJid:b.catalogWid.toJid(),productId:b.id.toString()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function j(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_DETAIL_LINK_CLICK,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_DETAIL_LINK_CLICK,productId:b.id.toString()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function k(a){var b=a.product;a=a.catalogSessionId;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogSessionId:a})}function l(a){var b=a.product;a=a.catalogSessionId;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogSessionId:a})}function m(a){var b=a.product;a=a.catalogSessionId;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogSessionId:a})}function n(a){var b=a.product;a=a.catalogSessionId;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogSessionId:a,productId:b.id.toString()})}function o(a){var b=a.product,c=a.catalogContext,e=a.cartToggle;a=a.collectionId;a=d("WAWebBizCatalogUtils").getProductStatsInFetched(b.catalogWid.toString(),a,b);d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({catalogOwnerJid:b.catalogWid.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_DETAIL_IMPRESSION,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_DETAIL_IMPRESSION,cartToggle:e},a,d("WAWebProductCatalogContext").toDataForCatalogViewEvents(c)))}function p(a){var b=a.product,c=a.catalogSessionId;a=a.reason;new(d("WAWebBizCatalogViewWamEvent").BizCatalogViewWamEvent)({catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_SUCCESS,catalogSessionId:c,catalogOwnerJid:b.catalogWid.toJid(),catalogReportReasonCode:a,productId:b.id.toString()}).commit()}function q(a){var b=a.product,c=a.catalogSessionId;a=a.reason;new(d("WAWebBizCatalogViewWamEvent").BizCatalogViewWamEvent)({catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_FAILURE,catalogOwnerJid:b.catalogWid.toJid(),catalogSessionId:c,catalogReportReasonCode:a,productId:b.id.toString()}).commit()}function r(a){var b=a.product;a=a.catalogContext;var c=d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b});d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:c,catalogOwnerJid:b.catalogWid.toJid(),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function s(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogOwnerJid:b.catalogWid.toJid(),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function t(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogOwnerJid:b.catalogWid.toJid(),catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,productId:b.id.toString()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function u(a,b){d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:a}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogOwnerJid:a.catalogWid.toJid(),catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,productId:a.id.toString()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(b)))}function v(a,b){var c=!1,e="";a.businessOwnerJid!=null&&(e=a.businessOwnerJid,c=d("WAWebUserPrefsMeUser").getMeUser().equals(d("WAWebWidFactory").createWid(e)));d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent({isOwner:c,catalogOwnerJid:e,catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,productId:a==null?void 0:(c=a.productId)==null?void 0:c.toString(),catalogSessionId:b||new(d("WAWebProductCatalogSession").ProductCatalogSession)().toString()})}function w(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogOwnerJid:b.catalogWid.toJid(),catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,productId:b.id.toString()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function x(a){var b=a.product;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogOwnerJid:b.catalogWid.toJid(),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,productId:b.id.toString()},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function y(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_CATALOG_IN_CONVERSATION_CLICK,catalogEntryPoint:d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ATTACHMENT_PANEL,catalogSessionId:a});a.commit()}function z(a){var b=a.product;a=a.catalogSessionId;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({product:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogOwnerJid:b.catalogWid.toJid(),catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogSessionId:a,productId:b.id.toString()})}function A(a){a.catalogOwnerWid;a=a.catalogSessionId;a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SEND_CATALOG_CLICK,catalogSessionId:a});a.commit()}function B(a){var b=a.catalogOwnerWid;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({catalogOwnerWid:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogOwnerJid:b.toJid(),catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function C(a){var b=a.catalogOwnerWid;a=a.catalogContext;d("WAWebProductCatalogEventUtils").logCatalogViewOrBizEvent(babelHelpers["extends"]({catalogOwnerJid:b.toJid(),isOwner:d("WAWebProductCatalogEventUtils").isCatalogOwner({catalogOwnerWid:b}),catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogViewAction:d("WAWebWamEnumCatalogViewAction").CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK},d("WAWebProductCatalogContext").toDataForCatalogViewEvents(a)))}function D(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_CLICKED,catalogSessionId:a.session.toString(),catalogEntryPoint:a.entryPoint});a.commit()}function E(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_SUCCESS,catalogEntryPoint:a.entryPoint,catalogSessionId:a.session.toString()});a.commit()}function F(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_FAILED,catalogEntryPoint:a.entryPoint,catalogSessionId:a.session.toString()});a.commit()}function G(a,b){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_CLICKED,productId:a.id.toString(),catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString()});a.commit()}function H(a,b){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_SUCCESS,catalogEntryPoint:b.entryPoint,productId:a.id.toString(),catalogSessionId:b.session.toString()});a.commit()}function I(a,b,c){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_FAILED,catalogEntryPoint:b.entryPoint,productId:a.id.toString(),errorCode:c,catalogSessionId:b.session.toString()});a.commit()}function J(a,b,c){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_CLICKED,catalogEntryPoint:c.entryPoint,productId:a.id.toString(),productCount:b,catalogSessionId:c.session.toString()});a.commit()}function K(a,b,c){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_SUCCESS,catalogEntryPoint:c.entryPoint,productId:a.id.toString(),productCount:b,catalogSessionId:c.session.toString()});a.commit()}function L(a,b,c,e){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_FAILED,catalogEntryPoint:c.entryPoint,productId:a.id.toString(),productCount:b,errorCode:e,catalogSessionId:c.session.toString()});a.commit()}function M(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG,catalogEntryPoint:a.entryPoint,catalogSessionId:a.session.toString()});a.commit()}function N(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_SUCCESS,catalogEntryPoint:a.entryPoint,catalogSessionId:a.session.toString()});a.commit()}function O(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_FAILED,catalogEntryPoint:a.entryPoint,errorCode:b,catalogSessionId:a.session.toString()});b.commit()}function P(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_CLICKED,catalogEntryPoint:d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:a});a.commit()}function Q(a){a=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_SUCCESS,catalogEntryPoint:d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:a});a.commit()}function R(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_FAILED,catalogEntryPoint:d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:b,catalogSessionId:a});b.commit()}function S(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_MENU_CLICK,catalogEntryPoint:b==null?void 0:b.entryPoint,catalogSessionId:b==null?void 0:b.session.toString(),productId:a});b.commit()}function T(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CLICKED,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function U(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_SUCCESS,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function V(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CANCELLED,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function W(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_FAILED,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function X(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CLICKED,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function Y(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_SUCCESS,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function Z(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CANCELLED,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}function $(a,b){b=new(d("WAWebCatalogBizWamEvent").CatalogBizWamEvent)({catalogBizAction:d("WAWebWamEnumCatalogBizAction").CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_FAILED,catalogEntryPoint:b.entryPoint,catalogSessionId:b.session.toString(),productId:a});b.commit()}g.logBusinessProfileCatalogView=a;g.logProfileProductClick=b;g.logCarouselViewMoreClick=c;g.logCatalogListView=e;g.logCatalogShareLinkClick=f;g.logCatalogListDetailClick=h;g.logDetailImageClick=i;g.logDetailLinkClick=j;g.logImageCarouselModalView=k;g.logImageListClick=l;g.logFullImageView=m;g.logImageNavigate=n;g.logProductDetailView=o;g.logReportProductSuccess=p;g.logReportProductFailure=q;g.logProductInquiryClick=r;g.logProductMsgClick=s;g.logProductShareLinkClick=t;g.logProductMessageBusinessClick=u;g.logProductMessageBusinessSend=v;g.logShareProductCopyLinkClick=w;g.logShareProductViaWALinkClick=x;g.logCatalogAttachmentButtonClick=y;g.logProductMessageSent=z;g.logSendCatalogClick=A;g.logShareCatalogCopyLinkClick=B;g.logShareCatalogViaWALinkClick=C;g.logAddProductClick=D;g.logAddProductSuccess=E;g.logAddProductFailed=F;g.logEditProductClick=G;g.logEditProductSuccess=H;g.logEditProductFailed=I;g.logDeleteProductClick=J;g.logDeleteProductSuccess=K;g.logDeleteProductFailed=L;g.logCreateProductCatalogClick=M;g.logCreateProductCatalogSuccess=N;g.logCreateProductCatalogFailed=O;g.logAppealProductCatalogClick=P;g.logAppealProductCatalogSuccess=Q;g.logAppealProductCatalogFailed=R;g.logCatalogContextMenuClick=S;g.logCatalogProductHideClick=T;g.logCatalogProductHideSuccess=U;g.logCatalogProductHideCancelled=V;g.logCatalogProductHideFailed=W;g.logCatalogProductShowClick=X;g.logCatalogProductShowSuccess=Y;g.logCatalogProductShowCancelled=Z;g.logCatalogProductShowFailed=$}),98);
__d("WAWebAvatarSpinner.react",["WAWebClassnames","WAWebSpinner.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={container:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",height:"x5yr21d",backgroundColor:"x146q241",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0}};b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.className,f=a.xstyle;a=a.size;a=a===void 0?50:a;return j.jsx("div",{ref:b,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((i||(i=c("stylex")))(k.container,f),e),children:j.jsx(d("WAWebSpinner.react").Spinner,{size:a,stroke:3,color:"solidwhite"})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WAWebChatProfilePictureGatingUtils",["WAWebABProps","WAWebWid"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebABProps").getABPropConfigValue("group_chat_profile_pictures_v2_enabled")}function a(a){return h()&&a!=null&&c("WAWebWid").isUser(a)&&!c("WAWebWid").isPSA(a)}g.groupChatProfilePictureV2Enabled=h;g.shouldDisplayInitialsInProfilePicture=a}),98);
__d("WAWebCommunityGeneralChatImage.react",["bx","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=c("bx").getURL(c("bx")("10639"));b=""+window.location.origin+j;function a(){return i.jsx("div",{className:"x10l6tqk x13vifvy x17qophe xh8yej3 x5yr21d x1xsqp64 x18d0r48 x1vjfegm",style:{backgroundImage:"url("+j+")"}})}a.displayName=a.name+" [from "+f.id+"]";g.GeneralChatPlaceholderUrl=j;g.GeneralChatPlaceholderFullUrl=b;g.CommunityGeneralChatImage=a}),98);
__d("WAWebCommunitySquircleIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="community-squircle";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox,h=a.innerStyles;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox","innerStyles"]);var l;if(g){var m=g.x;m=m===void 0?0:m;var n=g.y;n=n===void 0?0:n;var o=g.width;o=o===void 0?0:o;g=g.height;g=g===void 0?0:g;l=[m,n,o,g].join(" ")}m=180;n=180;(e!=null||f!=null)&&(m=e,n=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(o=l)!=null?o:"0 0 180 180",height:m,width:n,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M90 0C1.43051e-05 0 0 0 0 90C0 180 1.43051e-05 180 90 180C180 180 180 180 180 90C180 0 180 0 90 0Z",fill:"currentColor",className:i(h==null?void 0:h.background)}),j.jsx("path",{transform:"translate(30, 52)",fillRule:"evenodd",clipRule:"evenodd",d:"M86.0728 25.3655C86.1287 25.7634 86.2023 26.1501 86.2934 26.5313C86.3389 26.7247 86.3886 26.9126 86.4426 27.0949C86.5491 27.4658 86.6736 27.831 86.8156 28.1888C87.0246 28.7152 87.2706 29.2248 87.5516 29.7138C87.7381 30.0342 87.939 30.3491 88.1538 30.6475C88.7962 31.5513 89.5655 32.3502 90.4362 33.0177C91.0223 33.4638 91.6483 33.8505 92.3056 34.1725C92.8094 34.4169 93.3294 34.6237 93.8617 34.7913C94.2205 34.9018 94.5877 34.9957 94.9632 35.0731C95.7326 35.2269 96.5143 35.3046 97.2978 35.3051C103.567 35.3051 108.649 30.0362 108.649 23.5368C108.649 17.0373 103.567 11.7684 97.2978 11.7684C96.5142 11.7662 95.7322 11.8439 94.9632 12.0005C94.5915 12.0741 94.2238 12.1682 93.8617 12.2822C93.3296 12.448 92.8095 12.6529 92.3056 12.8955C90.663 13.6984 89.2368 14.9092 88.1538 16.4205C87.9406 16.7244 87.7381 17.0338 87.5516 17.3598C87.2695 17.8481 87.0235 18.3579 86.8156 18.8847C86.6755 19.2383 86.5492 19.6029 86.4426 19.9731C86.3883 20.161 86.3385 20.3488 86.2934 20.5367C86.2023 20.9179 86.1287 21.3046 86.0728 21.7024C85.9037 22.9172 85.9037 24.1508 86.0728 25.3655ZM33.9272 25.3655C33.8739 25.7634 33.7977 26.1501 33.7071 26.5313C33.6617 26.7247 33.6119 26.9126 33.5579 27.0949C33.4514 27.4658 33.3269 27.8309 33.1849 28.1888C32.9755 28.7151 32.7294 29.2247 32.4484 29.7138C32.2624 30.0342 32.0615 30.3491 31.8467 30.6475C31.204 31.551 30.4347 32.3499 29.5642 33.0177C28.9782 33.4638 28.3521 33.8505 27.6948 34.1725C27.191 34.4169 26.6709 34.6237 26.1387 34.7913C25.7795 34.9018 25.4123 34.9957 25.0371 35.0731C24.2677 35.2268 23.486 35.3045 22.7024 35.3051C16.4334 35.3051 11.3514 30.0362 11.3514 23.5368C11.3514 17.0373 16.4334 11.7684 22.7024 11.7684C23.4861 11.7663 24.2681 11.844 25.0371 12.0005C25.4089 12.0742 25.7765 12.1682 26.1387 12.2822C26.6708 12.448 27.1908 12.6529 27.6948 12.8955C29.3375 13.6984 30.7636 14.9092 31.8467 16.4205C32.0599 16.7244 32.2624 17.0338 32.4484 17.3598C32.7304 17.8482 32.9766 18.3579 33.1849 18.8847C33.325 19.2383 33.4513 19.6029 33.5579 19.9731C33.6116 20.161 33.6613 20.3488 33.7071 20.5367C33.7977 20.9179 33.8718 21.3046 33.9272 21.7024C34.0963 22.9172 34.0963 24.1508 33.9272 25.3655ZM119.343 54.0764C119.204 53.836 119.05 53.5733 118.862 53.2826C118.66 52.9695 118.432 52.6341 118.171 52.2764C117.909 51.9186 117.62 51.5385 117.295 51.1472C116.97 50.7559 116.615 50.3534 116.224 49.9398C114.625 48.2625 112.798 46.8262 110.799 45.6746C110.168 45.3056 109.497 44.9591 108.788 44.6292C108.767 44.6181 108.748 44.6125 108.728 44.6013C100.676 41.1728 91.6054 41.1728 83.5538 44.6013C83.4404 44.6516 83.3336 44.7075 83.2235 44.7634C83.0429 44.8472 82.8778 44.9423 82.7027 45.0317C82.8007 45.0876 82.9003 45.1379 82.9978 45.1938C84.9925 46.3455 86.8856 47.6696 88.6562 49.1516C89.8126 50.1167 90.913 51.1488 91.952 52.2428C92.5945 52.9136 93.1818 53.5788 93.7185 54.2273C94.269 54.8925 94.7513 55.513 95.1817 56.1055C95.6249 56.7148 96.0075 57.2794 96.3488 57.7993C96.6719 58.3024 96.9455 58.7496 97.1817 59.1633C97.6294 59.9211 97.9634 60.7426 98.1726 61.6005L98.2601 62.2042H116.6C118.478 62.2042 120 60.682 120 58.8042V55.3676C119.81 54.9225 119.591 54.491 119.343 54.0764ZM77.6389 15.6162C77.5508 14.9906 77.435 14.382 77.292 13.7846C77.2208 13.4859 77.1425 13.1873 77.0577 12.8942C76.8886 12.3081 76.6929 11.7389 76.4727 11.181C76.1444 10.3541 75.7576 9.55357 75.3153 8.78587C75.0228 8.27866 74.7075 7.78837 74.3694 7.31498C72.6729 4.93631 70.4305 3.03412 67.8456 1.78084C67.0544 1.39541 66.2367 1.07141 65.3992 0.811523C64.8349 0.63682 64.2576 0.48466 63.6683 0.366313C62.4595 0.123014 61.231 0 59.9997 0C49.8923 0 42.1622 8.01379 42.1622 18.496C42.1622 28.9781 49.8923 36.9863 59.9997 36.9863C61.231 36.9863 62.4595 36.8633 63.6683 36.62C64.2576 36.5016 64.8349 36.3495 65.3992 36.1748C66.2367 35.9149 67.0544 35.5909 67.8456 35.2055C70.4305 33.9522 72.6729 32.05 74.3694 29.6713C74.7072 29.1979 75.0225 28.7076 75.3153 28.2004C75.7576 27.4327 76.1444 26.6322 76.4727 25.8053C76.6902 25.2474 76.8886 24.6726 77.0577 24.0921C77.1425 23.799 77.2208 23.5004 77.292 23.2017C77.435 22.6043 77.5508 21.9957 77.6389 21.3701C77.9042 19.462 77.9042 17.5243 77.6389 15.6162ZM93.0965 61.4246C92.8978 61.0703 92.6696 60.6818 92.4021 60.2532C92.1144 59.7961 91.7847 59.299 91.4118 58.7733C91.039 58.2476 90.623 57.6876 90.1612 57.1162C89.6993 56.5448 89.1905 55.9448 88.6326 55.3448C87.7365 54.3736 86.7887 53.456 85.7938 52.5964C84.2613 51.2774 82.6237 50.0979 80.8992 49.0708C79.999 48.5337 79.0431 48.0195 78.0315 47.5395C78.0039 47.522 77.9751 47.5067 77.9453 47.4938C73.2477 45.2653 67.3414 43.7111 59.9989 43.7111C52.6564 43.7111 46.7496 45.2653 42.0526 47.4938C41.8888 47.5681 41.7398 47.6538 41.5803 47.7338C40.8941 48.0709 40.2347 48.4252 39.6009 48.7851C39.2573 48.9851 38.9214 49.1851 38.5931 49.3851C37.0554 50.3392 35.5882 51.4126 34.204 52.5964C33.209 53.4558 32.2612 54.3734 31.3652 55.3448C30.8084 55.9448 30.3001 56.5391 29.8367 57.1162C29.3732 57.6933 28.9583 58.2419 28.5854 58.7733C28.2126 59.3047 27.8834 59.7961 27.5957 60.2532C27.3282 60.6818 27.1 61.0703 26.9018 61.4246C26.8833 61.4521 26.8664 61.4807 26.8511 61.5103C26.6425 61.8817 26.4728 62.2074 26.3385 62.476C26.0699 63.0131 25.9459 63.3159 25.9459 63.3159V70.5726C25.9459 72.4504 27.4682 73.9726 29.3459 73.9726H90.6541C92.5318 73.9726 94.0541 72.4504 94.0541 70.5726V63.3159C93.7702 62.6666 93.4505 62.035 93.0965 61.4246ZM21.7773 61.6062C21.8277 61.1833 21.9651 60.7758 22.1807 60.4102C22.3487 60.086 22.4749 59.6948 22.7367 59.2421C23.0271 58.7447 23.2558 58.3032 23.5732 57.8057C23.9132 57.2804 24.2785 56.7159 24.7161 56.1179C25.1536 55.5199 25.6319 54.8883 26.1698 54.24C26.7076 53.5917 27.2983 52.921 27.9447 52.2392C30.4236 49.6351 33.2397 47.3846 36.3159 45.5492C36.6355 45.3592 36.965 45.1692 37.2973 44.9847C37.1535 44.9121 37.0218 44.8339 36.8724 44.7668C36.7622 44.7109 36.652 44.655 36.5418 44.6047C32.5724 42.8404 28.2751 41.9636 23.9418 42.0338C19.6088 41.9636 15.3116 42.8405 11.3424 44.6047C11.3215 44.6159 11.3028 44.6215 11.2818 44.6326C10.5721 44.9624 9.90032 45.3089 9.26825 45.6778C8.05739 46.376 6.90772 47.1782 5.83185 48.0754C5.1338 48.66 4.46803 49.2832 3.83757 49.9421C3.44632 50.3557 3.08887 50.7581 2.76521 51.1493C2.44064 51.5406 2.14858 51.9206 1.88682 52.2783C1.62507 52.636 1.39363 52.9713 1.19139 53.2843C1.00403 53.5749 0.826588 53.8376 0.68717 54.0779C0.224832 54.8716 0 55.369 0 55.369V58.8042C0 60.682 1.52223 62.2042 3.4 62.2042H21.7371L21.7773 61.6062Z",fill:"#fff",className:i(h==null?void 0:h.primary)})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.CommunitySquircleIcon=a}),98);
__d("WAWebDefaultBroadcastIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="default-broadcast";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=212;m=212;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 212 212",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 212 212",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"#DFE5E7",className:"background",d:"M106.251,0.5C164.653,0.5,212,47.846,212,106.25S164.653,212,106.25,212C47.846,212,0.5,164.654,0.5,106.25 S47.846,0.5,106.251,0.5z"}),j.jsx("path",{fill:"#FFFFFF",className:"primary",d:"M152.168,54.014l-11.66,4.364v95.453l11.744,4.161L152.168,54.014z M49.742,121.662l18.892,6.698 c0,0.14-0.021,0.274-0.021,0.414c0,14.507,11.782,26.269,26.318,26.269c8.39,0,15.849-3.935,20.669-10.039l18.328,6.495v-90.66 L49.742,92.355V121.662L49.742,121.662z M108.302,142.417c-3.455,3.371-8.169,5.458-13.371,5.458 c-9.818,0-17.921-7.419-19.005-16.934L108.302,142.417z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DefaultBroadcastIcon=a}),98);
__d("WAWebDefaultGroupIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="default-group";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=212;m=212;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 212 212",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{className:"background",d:"M105.946 0.25C164.318 0.25 211.64 47.596 211.64 106C211.64 164.404 164.318 211.75 105.945 211.75C47.571 211.75 0.25 164.404 0.25 106C0.25 47.596 47.571 0.25 105.946 0.25Z",fill:"#DFE5E7"}),j.jsx("path",{className:"primary",fillRule:"evenodd",clipRule:"evenodd",d:"M102.282 77.2856C102.282 87.957 93.8569 96.5713 83.3419 96.5713C72.827 96.5713 64.339 87.957 64.339 77.2856C64.339 66.6143 72.827 58 83.3419 58C93.8569 58 102.282 66.6143 102.282 77.2856ZM150.35 80.1427C150.35 89.9446 142.612 97.857 132.954 97.857C123.296 97.857 115.5 89.9446 115.5 80.1427C115.5 70.3409 123.296 62.4285 132.954 62.4285C142.612 62.4285 150.35 70.3409 150.35 80.1427ZM83.3402 109.428C68.5812 109.428 39 116.95 39 131.928V143.714C39 147.25 41.8504 148 45.3343 148H121.346C124.83 148 127.68 147.25 127.68 143.714V131.928C127.68 116.95 98.0991 109.428 83.3402 109.428ZM126.804 110.853C127.707 110.871 128.485 110.886 129 110.886C143.759 110.886 174 116.95 174 131.929V141.571C174 145.107 171.15 148 167.666 148H134.854C135.551 146.007 135.995 143.821 135.995 141.571L135.75 131.071C135.75 121.51 130.136 117.858 124.162 113.971C122.772 113.067 121.363 112.15 120 111.143C119.981 111.123 119.962 111.098 119.941 111.07C119.893 111.007 119.835 110.931 119.747 110.886C121.343 110.747 124.485 110.808 126.804 110.853Z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DefaultGroupIcon=a}),98);
__d("WAWebDefaultNewsletterIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="default-newsletter";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=212;m=212;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 212 212",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("rect",{className:"background",width:212,height:212,rx:106,fill:"currentColor"}),j.jsx("path",{className:"primary",d:"M157.123 99.0265C154.027 75.5432 134.626 56.8186 111.097 54.6979C80.5503 51.9047 55.3184 75.388 54.7508 105.906C54.5444 116.872 58.7239 126.286 60.8395 130.32L54.6992 150.648C53.5124 154.579 57.1759 158.252 61.0975 157.062L81.1179 151.062C88.7546 155.304 97.3201 157.528 106.092 157.528C136.742 157.528 161.2 130.527 157.072 99.0265H157.123ZM85.7103 119.82C87.1034 121.889 86.9486 124.682 85.1943 126.441C82.8723 128.82 79.0024 128.355 77.1448 125.562C73.3781 119.975 71.1593 113.199 71.1593 105.958C71.1593 98.7161 73.5329 91.4229 77.6092 85.6813C79.4152 83.1468 83.1819 82.9916 85.4007 85.2158C87.2066 87.0262 87.3614 89.8194 85.9167 91.8884C83.1303 95.8712 81.5307 100.733 81.5307 105.958C81.5307 111.182 83.1303 115.837 85.8135 119.768L85.7103 119.82ZM106.35 113.716C102.067 113.716 98.61 110.251 98.61 105.958C98.61 101.664 102.067 98.1989 106.35 98.1989C110.633 98.1989 114.09 101.664 114.09 105.958C114.09 110.251 110.633 113.716 106.35 113.716ZM134.471 126.337C132.665 128.872 128.899 129.027 126.732 126.803C124.926 124.993 124.771 122.199 126.216 120.13C129.002 116.148 130.653 111.234 130.653 106.009C130.653 100.785 128.95 95.7678 126.112 91.7849C124.616 89.6642 124.719 86.8193 126.525 84.9572C128.692 82.7847 132.407 82.8882 134.265 85.4227C138.496 91.216 140.973 98.3023 140.973 106.061C140.973 113.82 138.548 120.648 134.471 126.389V126.337Z",fill:"#FFFFFF"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DefaultNewsletterIcon=a}),98);
__d("WAWebDefaultUserColorIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="default-user-color";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=212;m=212;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 212 212",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 212 212",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",className:"background",d:"M106.251,0.5C164.653,0.5,212,47.846,212,106.25S164.653,212,106.25,212C47.846,212,0.5,164.654,0.5,106.25 S47.846,0.5,106.251,0.5z"}),j.jsxs("g",{children:[j.jsx("path",{fill:"#FFFFFF",className:"primary",d:"M173.561,171.615c-0.601-0.915-1.287-1.907-2.065-2.955c-0.777-1.049-1.645-2.155-2.608-3.299 c-0.964-1.144-2.024-2.326-3.184-3.527c-1.741-1.802-3.71-3.646-5.924-5.47c-2.952-2.431-6.339-4.824-10.204-7.026 c-1.877-1.07-3.873-2.092-5.98-3.055c-0.062-0.028-0.118-0.059-0.18-0.087c-9.792-4.44-22.106-7.529-37.416-7.529 s-27.624,3.089-37.416,7.529c-0.338,0.153-0.653,0.318-0.985,0.474c-1.431,0.674-2.806,1.376-4.128,2.101 c-0.716,0.393-1.417,0.792-2.101,1.197c-3.421,2.027-6.475,4.191-9.15,6.395c-2.213,1.823-4.182,3.668-5.924,5.47 c-1.161,1.201-2.22,2.384-3.184,3.527c-0.964,1.144-1.832,2.25-2.609,3.299c-0.778,1.049-1.464,2.04-2.065,2.955 c-0.557,0.848-1.033,1.622-1.447,2.324c-0.033,0.056-0.073,0.119-0.104,0.174c-0.435,0.744-0.79,1.392-1.07,1.926 c-0.559,1.068-0.818,1.678-0.818,1.678v0.398c18.285,17.927,43.322,28.985,70.945,28.985c27.678,0,52.761-11.103,71.055-29.095 v-0.289c0,0-0.619-1.45-1.992-3.778C174.594,173.238,174.117,172.463,173.561,171.615z"}),j.jsx("path",{fill:"#FFFFFF",className:"primary",d:"M106.002,125.5c2.645,0,5.212-0.253,7.68-0.737c1.234-0.242,2.443-0.542,3.624-0.896 c1.772-0.532,3.482-1.188,5.12-1.958c2.184-1.027,4.242-2.258,6.15-3.67c2.863-2.119,5.39-4.646,7.509-7.509 c0.706-0.954,1.367-1.945,1.98-2.971c0.919-1.539,1.729-3.155,2.422-4.84c0.462-1.123,0.872-2.277,1.226-3.458 c0.177-0.591,0.341-1.188,0.49-1.792c0.299-1.208,0.542-2.443,0.725-3.701c0.275-1.887,0.417-3.827,0.417-5.811 c0-1.984-0.142-3.925-0.417-5.811c-0.184-1.258-0.426-2.493-0.725-3.701c-0.15-0.604-0.313-1.202-0.49-1.793 c-0.354-1.181-0.764-2.335-1.226-3.458c-0.693-1.685-1.504-3.301-2.422-4.84c-0.613-1.026-1.274-2.017-1.98-2.971 c-2.119-2.863-4.646-5.39-7.509-7.509c-1.909-1.412-3.966-2.643-6.15-3.67c-1.638-0.77-3.348-1.426-5.12-1.958 c-1.181-0.355-2.39-0.655-3.624-0.896c-2.468-0.484-5.035-0.737-7.68-0.737c-21.162,0-37.345,16.183-37.345,37.345 C68.657,109.317,84.84,125.5,106.002,125.5z"})]})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DefaultUserColorIcon=a}),98);
__d("WAWebDefaultUserIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="default-user";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=212;m=212;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 212 212",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 212 212",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"#DFE5E7",className:"background",d:"M106.251,0.5C164.653,0.5,212,47.846,212,106.25S164.653,212,106.25,212C47.846,212,0.5,164.654,0.5,106.25 S47.846,0.5,106.251,0.5z"}),j.jsxs("g",{children:[j.jsx("path",{fill:"#FFFFFF",className:"primary",d:"M173.561,171.615c-0.601-0.915-1.287-1.907-2.065-2.955c-0.777-1.049-1.645-2.155-2.608-3.299 c-0.964-1.144-2.024-2.326-3.184-3.527c-1.741-1.802-3.71-3.646-5.924-5.47c-2.952-2.431-6.339-4.824-10.204-7.026 c-1.877-1.07-3.873-2.092-5.98-3.055c-0.062-0.028-0.118-0.059-0.18-0.087c-9.792-4.44-22.106-7.529-37.416-7.529 s-27.624,3.089-37.416,7.529c-0.338,0.153-0.653,0.318-0.985,0.474c-1.431,0.674-2.806,1.376-4.128,2.101 c-0.716,0.393-1.417,0.792-2.101,1.197c-3.421,2.027-6.475,4.191-9.15,6.395c-2.213,1.823-4.182,3.668-5.924,5.47 c-1.161,1.201-2.22,2.384-3.184,3.527c-0.964,1.144-1.832,2.25-2.609,3.299c-0.778,1.049-1.464,2.04-2.065,2.955 c-0.557,0.848-1.033,1.622-1.447,2.324c-0.033,0.056-0.073,0.119-0.104,0.174c-0.435,0.744-0.79,1.392-1.07,1.926 c-0.559,1.068-0.818,1.678-0.818,1.678v0.398c18.285,17.927,43.322,28.985,70.945,28.985c27.678,0,52.761-11.103,71.055-29.095 v-0.289c0,0-0.619-1.45-1.992-3.778C174.594,173.238,174.117,172.463,173.561,171.615z"}),j.jsx("path",{fill:"#FFFFFF",className:"primary",d:"M106.002,125.5c2.645,0,5.212-0.253,7.68-0.737c1.234-0.242,2.443-0.542,3.624-0.896 c1.772-0.532,3.482-1.188,5.12-1.958c2.184-1.027,4.242-2.258,6.15-3.67c2.863-2.119,5.39-4.646,7.509-7.509 c0.706-0.954,1.367-1.945,1.98-2.971c0.919-1.539,1.729-3.155,2.422-4.84c0.462-1.123,0.872-2.277,1.226-3.458 c0.177-0.591,0.341-1.188,0.49-1.792c0.299-1.208,0.542-2.443,0.725-3.701c0.275-1.887,0.417-3.827,0.417-5.811 c0-1.984-0.142-3.925-0.417-5.811c-0.184-1.258-0.426-2.493-0.725-3.701c-0.15-0.604-0.313-1.202-0.49-1.793 c-0.354-1.181-0.764-2.335-1.226-3.458c-0.693-1.685-1.504-3.301-2.422-4.84c-0.613-1.026-1.274-2.017-1.98-2.971 c-2.119-2.863-4.646-5.39-7.509-7.509c-1.909-1.412-3.966-2.643-6.15-3.67c-1.638-0.77-3.348-1.426-5.12-1.958 c-1.181-0.355-2.39-0.655-3.624-0.896c-2.468-0.484-5.035-0.737-7.68-0.737c-21.162,0-37.345,16.183-37.345,37.345 C68.657,109.317,84.84,125.5,106.002,125.5z"})]})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DefaultUserIcon=a}),98);
__d("WAWebDefaultUserSquareIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="default-user-square";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=212;m=212;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 212 212",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 212 212",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"#DFE5E7",className:"background",d:"M0,0h212v212H0V0z"}),j.jsx("path",{fill:"#FFFFFF",className:"primary",d:"M106,125.5c2.6,0,5.2-0.3,7.7-0.7c1.2-0.2,2.4-0.5,3.6-0.9c1.8-0.5,3.5-1.2,5.1-2c2.2-1,4.2-2.3,6.1-3.7 c2.9-2.1,5.4-4.6,7.5-7.5c0.7-1,1.4-1.9,2-3c0.9-1.5,1.7-3.2,2.4-4.8c0.5-1.1,0.9-2.3,1.2-3.5c0.2-0.6,0.3-1.2,0.5-1.8 c0.3-1.2,0.5-2.4,0.7-3.7c0.3-1.9,0.4-3.8,0.4-5.8s-0.1-3.9-0.4-5.8c-0.2-1.3-0.4-2.5-0.7-3.7c-0.1-0.6-0.3-1.2-0.5-1.8 c-0.4-1.2-0.8-2.3-1.2-3.5c-0.7-1.7-1.5-3.3-2.4-4.8c-0.6-1-1.3-2-2-3c-2.1-2.9-4.6-5.4-7.5-7.5c-1.9-1.4-4-2.6-6.1-3.7 c-1.6-0.8-3.3-1.4-5.1-2c-1.2-0.4-2.4-0.7-3.6-0.9c-2.5-0.5-5-0.7-7.7-0.7c-21.2,0-37.3,16.2-37.3,37.3 C68.7,109.3,84.8,125.5,106,125.5z M175,173.9c-0.4-0.7-0.9-1.5-1.4-2.3c-0.6-0.9-1.3-1.9-2.1-3c-0.8-1-1.6-2.2-2.6-3.3 s-2-2.3-3.2-3.5c-1.7-1.8-3.7-3.6-5.9-5.5c-3-2.4-6.3-4.8-10.2-7c-1.9-1.1-3.9-2.1-6-3.1c-0.1,0-0.1-0.1-0.2-0.1 c-9.8-4.4-22.1-7.5-37.4-7.5s-27.6,3.1-37.4,7.5c-0.3,0.2-0.7,0.3-1,0.5c-1.4,0.7-2.8,1.4-4.1,2.1c-0.7,0.4-1.4,0.8-2.1,1.2 c-3.4,2-6.5,4.2-9.1,6.4c-2.2,1.8-4.2,3.7-5.9,5.5c-1.2,1.2-2.2,2.4-3.2,3.5s-1.8,2.2-2.6,3.3c-0.8,1-1.5,2-2.1,3 c-0.6,0.8-1,1.6-1.4,2.3c0,0.1-0.1,0.1-0.1,0.2v0.1c-9.6,15-9.6,32.9-9.6,32.9s61.2,0,78.7,0h0.1c17.4,0,78.8,0,78.8,0 S184.7,189,175,173.9z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DefaultUserSquareIcon=a}),98);
__d("WAWebDisappearingIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="disappearing";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=36;m=36;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 36 36",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M18 31.5C18.0909 31.5 18.1817 31.4991 18.2722 31.4973C19.1005 31.4809 19.7586 30.7961 19.7422 29.9679C19.7258 29.1396 19.041 28.4815 18.2128 28.4979C18.142 28.4993 18.0711 28.5 18 28.5V31.5ZM18 7.5C18.0711 7.5 18.142 7.5007 18.2128 7.50211C19.041 7.51853 19.7258 6.86039 19.7422 6.03213C19.7586 5.20387 19.1005 4.51912 18.2722 4.5027C18.1817 4.5009 18.0909 4.5 18 4.5V7.5ZM24.5153 6.17374C23.7901 5.77341 22.8776 6.03683 22.4772 6.76211C22.0769 7.48739 22.3403 8.39988 23.0656 8.8002C23.1891 8.86838 23.3111 8.93898 23.4316 9.01195C24.1401 9.44118 25.0625 9.21475 25.4917 8.5062C25.921 7.79765 25.6945 6.87529 24.986 6.44605C24.8311 6.35223 24.6742 6.26144 24.5153 6.17374ZM29.554 11.014C29.1247 10.3055 28.2024 10.079 27.4938 10.5083C26.7852 10.9375 26.5588 11.8599 26.9881 12.5684C27.061 12.6889 27.1316 12.8109 27.1998 12.9344C27.6001 13.6597 28.5126 13.9231 29.2379 13.5228C29.9632 13.1224 30.2266 12.2099 29.8263 11.4847C29.7386 11.3258 29.6478 11.1689 29.554 11.014ZM31.4973 17.7278C31.4809 16.8995 30.7961 16.2414 29.9679 16.2578C29.1396 16.2742 28.4815 16.959 28.4979 17.7872C28.4993 17.858 28.5 17.9289 28.5 18C28.5 18.0711 28.4993 18.142 28.4979 18.2128C28.4815 19.041 29.1396 19.7258 29.9679 19.7422C30.7961 19.7586 31.4809 19.1005 31.4973 18.2722C31.4991 18.1817 31.5 18.0909 31.5 18C31.5 17.9091 31.4991 17.8183 31.4973 17.7278ZM29.8263 24.5153C30.2266 23.7901 29.9632 22.8776 29.2379 22.4772C28.5126 22.0769 27.6001 22.3403 27.1998 23.0656C27.1316 23.1891 27.061 23.3111 26.9881 23.4316C26.5588 24.1401 26.7852 25.0625 27.4938 25.4917C28.2024 25.921 29.1247 25.6945 29.554 24.986C29.6478 24.8311 29.7386 24.6742 29.8263 24.5153ZM24.986 29.554C25.6945 29.1247 25.921 28.2024 25.4917 27.4938C25.0625 26.7852 24.1401 26.5588 23.4316 26.9881C23.3111 27.061 23.1891 27.1316 23.0656 27.1998C22.3403 27.6001 22.0769 28.5126 22.4772 29.2379C22.8776 29.9632 23.7901 30.2266 24.5153 29.8263C24.6742 29.7386 24.8311 29.6478 24.986 29.554Z"}),j.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M18.0001 4.5C18 4.5 17.9999 4.5 17.9998 4.5C10.5439 4.5 4.49976 10.5442 4.49976 18C4.49976 25.4558 10.5439 31.5 17.9998 31.5C17.9999 31.5 18 31.5 18.0001 31.5V28.5C18 28.5 17.9999 28.5 17.9998 28.5C12.2008 28.5 7.49976 23.799 7.49976 18C7.49976 12.201 12.2008 7.5 17.9998 7.5C17.9999 7.5 18 7.5 18.0001 7.5V4.5Z"}),j.jsx("path",{fill:"currentColor",d:"M23.3247 12.0107C23.669 11.7525 24.1507 11.7867 24.455 12.091V12.091C24.7593 12.3953 24.7935 12.877 24.5353 13.2213L19.9714 19.3066C19.2589 20.2566 17.8701 20.3553 17.0304 19.5156V19.5156C16.1907 18.6759 16.2894 17.2871 17.2394 16.5746L23.3247 12.0107Z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DisappearingIcon=a}),98);
__d("WAWebDoubleChevronIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="double-chevron";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=66;m=66;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 66 66",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M52.1731 31.43L41.2382 16.1374C40.3179 14.8382 38.8292 14.0532 37.2323 14.0532C33.1994 14.0532 30.8716 18.6004 33.1994 21.8755L41.1299 32.9999L33.1994 44.1243C30.8446 47.3994 33.1994 51.9466 37.2323 51.9466C38.8292 51.9466 40.345 51.1616 41.2652 49.8624L52.2002 34.5698C52.8498 33.6224 52.8498 32.3774 52.1731 31.43Z",fill:"currentColor"}),j.jsx("path",{d:"M33.2264 31.43L22.3186 16.1374C21.3712 14.8382 19.8826 14.0532 18.2856 14.0532C14.2527 14.0532 11.8979 18.6004 14.2527 21.8755L22.1832 32.9999L14.2527 44.1243C11.8979 47.3994 14.2527 51.9466 18.2856 51.9466C19.8826 51.9466 21.3983 51.1616 22.3186 49.8624L33.2535 34.5698C33.9031 33.6224 33.9031 32.3774 33.2264 31.43Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DoubleChevronIcon=a}),98);
__d("WAWebIdleComponent.react",["WAWebIdleTaskRunner","WAWebWid","react","useWAWebLazyRef","useWAWebPrevious"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useState;function a(a){var b=a.children,e=a.onComplex,f=a.waitIdle,g=f===void 0?!1:f,h=a.id;f=l(function(){return d("WAWebIdleTaskRunner").UIBusyTasks.isBusy()});var i=f[0],m=f[1],n=function(){m(!1)},o=c("useWAWebLazyRef")(function(){return g?d("WAWebIdleTaskRunner").UIBusyTasks.enqueue(n):null}),p=c("useWAWebPrevious")(h);k(function(){return function(){g&&o.current!=null&&d("WAWebIdleTaskRunner").UIBusyTasks.dequeue(o.current)}},[]);k(function(){if(!c("WAWebWid").equals(p,h)||!g){i&&o.current!=null&&d("WAWebIdleTaskRunner").UIBusyTasks.dequeue(o.current);var a=d("WAWebIdleTaskRunner").UIBusyTasks.isBusy();a&&g&&(o.current=d("WAWebIdleTaskRunner").UIBusyTasks.enqueue(n));m(a)}},[h,o,i,p,g]);return i&&g?j.jsx(j.Fragment,{children:b}):e()}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebInitialsFromNameUtils",["$InternalEnum","WAWebL10N"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum").Mirrored(["ARABIC","LATIN","HEBREW","THAI","GUJARATI","DEVANAGARI","CYRILLIC","BENGALI","HAN"]);f=new RegExp(/[\u0600-\u0604\u0606-\u060B\u060D-\u061A\u061C-\u061E\u0620-\u063F\u0641-\u064A\u0656-\u066F\u0671-\u06DC\u06DE-\u06FF\u0750-\u077F\u0870-\u088E\u0890\u0891\u0898-\u08E1\u08E3-\u08FF\uFB50-\uFBC2\uFBD3-\uFD3D\uFD40-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFDFF\uFE70-\uFE74\uFE76-\uFEFC]/);b=new RegExp(/[A-Za-z\xAA\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0249\u02E0-\u02E4\u1D00-\u1D25\u1D2C-\u1D5C\u1D62-\u1D65\u1D6B-\u1D77\u1D79-\u1DBE\u1E00-\u1EFF\u2071\u207F\u2090-\u209C\u212A\u212B\u2132\u214E\u2160-\u2188\u2C60-\u2C7F\uA722-\uA787\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA7FF\uAB30-\uAB5A\uAB5C-\uAB64\uAB66-\uAB69\uFB00-\uFB06\uFF21-\uFF3A\uFF41-\uFF5A]/);var h=new RegExp(/[\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4F]/),i=new RegExp(/[\u0E01-\u0E3A\u0E40-\u0E5B]/),j=new RegExp(/[\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF]/),k=new RegExp(/[\u0900-\u0950\u0955-\u0963\u0966-\u097F\uA8E0-\uA8FF]/),l=new RegExp(/[\u0400-\u0484\u0487-\u052F\u1C80-\u1C88\u1D2B\u1D78\u2DE0-\u2DFF\uA640-\uA69F\uFE2E\uFE2F]/),m=new RegExp(/[\u0980-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE]/),n=new RegExp(/[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]/),o=new Map([[e.ARABIC,f],[e.LATIN,b],[e.HEBREW,h],[e.THAI,i],[e.GUJARATI,j],[e.DEVANAGARI,k],[e.CYRILLIC,l],[e.BENGALI,m],[e.HAN,n]]),p=new RegExp(/[\u093A\u093B\u093E-\u094C\u094E\u094F\u0955-\u0957\u0962\u0963]/),q=new RegExp(/[\u09BE-\u09CC\u09E2\u09E3]/),r=new RegExp(/[\u0ABE-\u0ACC\u0AE2\u0AE3]/),s=new RegExp(/[\u0E30-\u0E59]/),t=a([f,i,j,k,m]),u=a([k,m,j]),v=a(Array.from(o.values()));function w(a){return Array.from(o.keys()).find(function(b){b=o.get(b);return b==null?void 0:b.test(a)})}function x(a){return t.test(a)}function y(a){return n.test(a)}function z(a){return v.test(a)}function a(a){return new RegExp(a.map(function(a){return a.source}).join("|"))}function A(a){var b=!1;a.firstName!=null&&(b=x(a.firstName));var c=a.firstName!=null&&a.firstName!==""&&!y(a.firstName);b=b!==!0&&a.lastName!=null&&a.lastName!=="";a.firstName!=null&&a.firstName!==""&&n.test(a.firstName)&&!b&&(c=!0);a=a.lastName===""&&a.firstName==="";a=c!==!0&&b!==!0&&!a;return{showFirstNameInitial:c,showLastNameInitial:b,showPushnameInitial:a}}function B(a,b,d){a=a==null?void 0:a.trim();var e=null;a!=null&&b!=null&&(a==null?void 0:a.length)>0?e=b.trim().replace(a,"").trim():e=b==null?void 0:b.trim();b=c("WAWebL10N").getNormalizedLocale();a=a==null?void 0:a.toLocaleUpperCase(b);e=(e=e)==null?void 0:e.toLocaleUpperCase(b);d=d==null?void 0:d.toLocaleUpperCase(b);return{firstName:a,lastName:e,pushname:d}}function C(a){var b=a.charAt(0);a=a.charAt(1);var c=null,d=null;k.test(b)?(c=k,d=p):m.test(b)?(c=m,d=q):j.test(b)&&(c=j,d=r);if(c==null||d==null)return;return a!=null&&c.test(b)&&!d.test(b)&&d.test(a)?b+a:c.test(b)?b:null}function D(a,b){var c=a.charAt(0);if(u.test(a))return C(a);if(c!=null&&i.test(c)&&s.test(c)){var d=a==null?void 0:a.slice(1).trim();d=d==null?void 0:d.charAt(0);return z(d)&&!s.test(d)?d:null}if(y(a)&&!b)return a.slice(0,2);return z(c)?c:null}function E(a){a=B(a.shortName,a.name,a.pushname);var b=A(a),c=null,d=null,e=a.firstName,f=b.showFirstNameInitial===!0&&b.showLastNameInitial===!1;b.showFirstNameInitial===!0&&e!=null&&(c=D(e,f));b.showLastNameInitial===!0&&a.lastName!=null&&(d=D(a.lastName,f));b.showPushnameInitial===!0&&a.pushname!=null&&(c=D(a.pushname,!0),d=null);c!=null&&d!=null&&w(c)!==w(d)&&(d=null);return{firstInitial:c,secondInitial:d}}function d(a){return E({shortName:a==null?void 0:a.shortName,name:a==null?void 0:a.name,pushname:a==null?void 0:a.pushname})}g.InitialsAlphabets=e;g.supportedAlphabetsMap=o;g.getInitialsFromNames=E;g.getInitialsFromContact=d}),98);
__d("WABidiRangeData",[],(function(a,b,c,d,e,f){"use strict";a=[65,26,32,26,73,1,11,1,5,1,6,23,24,31,32,449,451,7,21,2,16,5,14,1,130,4,6,2,4,4,5,1,7,1,2,3,4,1,2,20,21,83,84,140,147,166,167,38,40,49,55,-1,46,-1,2,-1,3,-1,3,-1,2,-56,64,-1,3,-1,2,-1,14,-48,82,-3,4,-101,116,-2,9,-2,12,-23,24,-30,57,-91,102,-58,67,-2,6,-3,4,-24,28,-1,10,-1,4,-1,6,-43,46,-119,167,55,56,1,2,4,12,4,5,3,10,10,12,29,30,2,3,8,10,2,4,22,23,7,8,1,4,4,7,4,10,2,4,2,3,1,9,1,5,2,3,3,7,12,14,7,8,2,7,1,2,6,10,2,4,22,23,7,8,2,3,2,3,2,6,3,27,4,5,1,8,10,12,3,4,1,13,1,2,9,10,3,4,22,23,7,8,2,3,5,8,4,12,1,2,2,5,1,16,2,6,11,19,1,9,2,3,8,10,2,4,22,23,7,8,2,3,5,8,2,3,1,7,2,4,2,12,1,5,2,3,3,7,18,29,1,2,6,9,3,4,4,7,2,3,1,2,2,5,2,5,3,6,12,16,2,3,2,5,3,4,3,6,1,7,1,15,13,27,3,4,8,9,3,4,23,24,16,19,1,4,4,23,3,8,2,6,10,17,1,8,2,3,11,12,3,4,23,24,10,11,5,8,8,9,3,4,2,11,2,9,1,2,2,6,10,11,2,17,11,12,3,4,41,43,4,9,3,4,3,4,2,6,14,18,26,28,2,3,18,21,24,25,9,10,1,3,7,15,3,9,8,14,10,12,3,15,48,49,2,14,7,15,13,50,2,3,1,2,5,6,24,25,1,2,10,11,2,11,1,3,5,6,1,10,10,12,4,36,24,26,27,28,1,2,1,6,10,11,36,54,1,6,1,3,5,54,8,9,6,7,13,50,45,49,1,7,1,3,2,4,25,27,4,7,16,20,13,14,2,4,6,7,15,16,40,41,1,6,1,3,377,378,4,6,7,8,1,2,4,6,41,42,4,6,33,34,4,6,7,8,1,2,4,6,15,16,57,58,4,6,67,72,29,32,16,32,86,88,6,9,639,640,26,31,89,96,13,14,4,18,18,21,2,11,18,32,13,14,3,18,52,54,1,8,8,9,2,13,7,8,1,4,10,48,10,16,89,96,5,7,34,35,1,6,70,80,31,35,4,6,3,7,2,3,6,19,40,42,5,16,44,48,26,32,11,48,23,25,2,5,56,57,1,10,1,2,2,10,6,19,10,16,10,16,14,100,48,49,1,6,1,2,5,6,9,13,27,36,9,14,32,36,2,4,1,4,56,57,1,3,3,4,1,4,2,10,48,56,2,7,15,18,60,67,43,45,11,22,1,14,1,8,4,5,6,7,3,5,1,6,192,256,278,280,6,8,38,40,6,8,8,9,1,2,1,2,1,2,31,33,53,54,7,8,1,4,3,4,7,10,4,6,6,10,13,18,3,4,7,24,1,1,-1,98,1,14,1,17,13,114,1,5,1,3,10,11,1,4,5,11,1,2,1,2,1,2,4,5,11,13,4,9,5,9,2,18,41,470,69,95,1,263,78,528,1,340,256,1024,47,48,47,48,133,139,4,7,2,14,38,39,1,6,1,3,56,63,2,17,23,32,7,8,7,8,7,8,7,8,7,8,7,8,7,8,7,557,3,28,9,13,2,3,5,7,5,9,86,92,3,4,90,91,4,9,43,44,94,95,48,96,45,48,48,64,28,31,50,65,12,16,167,171,99,101,31,32,6592,6656,20989,20992,1165,1232,317,320,28,48,47,64,30,32,80,82,6,48,102,103,55,57,9,51,13,14,3,4,4,5,25,27,1,9,8,16,52,64,68,78,12,36,13,14,38,46,25,36,2,13,30,36,48,49,2,6,2,4,16,17,11,15,7,8,25,26,41,47,2,4,2,13,3,4,8,9,1,3,10,12,32,33,51,52,1,4,2,4,5,7,1,2,1,25,17,19,8,19,6,8,6,8,6,15,7,8,7,8,58,64,117,118,2,3,4,7,10,16,11172,11184,23,27,49,2101,6766,6768,106,144,7,19,5,10,-1,2,-10,11,-532,534,-144,176,-13,14,-2,114,-143,177,26,32,26,37,89,92,6,8,6,8,6,8,3,38,12,13,26,27,19,20,2,3,15,17,14,48,123,128,1,2,1,5,45,48,9,86,2,67,45,176,29,32,49,96,36,45,30,35,38,48,30,31,37,41,14,56,158,160,10,16,36,40,36,40,40,48,52,63,1,145,311,320,22,32,8,160,-287,288,-225,228,-1,3,-5,9,-40,43,-4,5,-165,167,-82,89,-484,488,-8,18,-294,325,-44,46,-153,164,-175,175,1,2,54,69,7,31,10,28,49,53,2,4,7,18,1,3,25,32,10,19,36,41,1,10,18,26,35,36,3,14,52,61,10,14,2,3,16,17,20,31,18,19,28,31,2,3,1,3,6,72,7,8,1,2,4,5,15,16,11,17,47,48,3,16,10,18,2,3,8,10,2,4,22,23,7,8,2,3,5,8,3,4,4,6,2,4,3,5,1,7,1,6,7,163,56,64,2,5,1,2,21,22,1,2,3,33,51,57,1,2,4,6,1,3,4,12,10,176,50,56,4,6,1,3,27,63,51,59,2,3,1,3,4,15,10,48,43,44,1,2,2,8,1,2,1,8,10,64,27,32,2,6,1,10,16,208,47,56,1,3,1,101,83,95,8,10,1,3,8,9,2,3,30,31,2,6,1,2,4,5,3,12,10,80,8,10,42,50,4,5,4,31,1,7,2,4,40,46,2,6,8,17,1,7,2,5,46,59,1,3,9,38,57,320,9,10,38,52,8,18,29,32,32,57,1,8,1,3,1,76,7,8,2,3,38,59,1,10,10,16,6,7,2,3,37,41,2,3,1,2,1,8,10,320,19,21,4,187,1,16,21,63,923,1025,111,112,5,16,196,2944,1071,1072,9,4048,583,9216,569,576,31,32,10,14,2,98,30,37,1,11,48,55,15,25,10,11,7,8,21,26,19,707,91,192,75,80,56,67,13,77,2,3,1,13,2,16,6136,6144,1238,1280,9,8960,287,336,3,20,4,12,396,2704,107,112,13,16,9,16,10,12,1,3,1,4961,246,256,39,41,62,65,9,25,2,9,30,34,59,306,20,128,25,160,85,86,71,72,2,4,1,3,2,4,4,5,12,13,1,2,7,8,65,66,4,6,8,9,7,8,28,29,4,5,5,6,1,4,7,8,340,342,51,52,57,58,57,58,57,58,57,58,8,60,512,567,4,54,8,9,14,15,7,1659,45,55,7,9,10,14,2,370,44,48,10,1296,-208,215,-109,116,-1445,1447,-270,542,31,32,58,64,61,118,29,42,44,48,9,16,2,3504,42718,42752,4149,4160,222,224,5762,5776,7473,10576,542,2048,4939,786432,65534,65536,65534];f.DATA=a}),66);
__d("WABidi",["WABidiRangeData"],(function(a,b,c,d,e,f){"use strict";var g,h;function i(){if(g)return;var a=b("WABidiRangeData").DATA,c=a.length/2;g=new Int32Array(c);h=new Int32Array(c);for(var d=0,e=0;d<c;d++,e+=2)g[d]=a[e]+(d===0?0:g[d-1]),h[d]=a[e+1]}function a(a){i();for(var b=0;b<a.length;b++){var c=a.charCodeAt(b)|0;if(55296<=c&&c<56320){if(++b===a.length)break;var d=a.charCodeAt(b);if(56320<=d&&d<57344)c=65536+((c&1023)<<10|d&1023);else continue}else if(56320<=c&&c<57344)continue;if(c<g[0])continue;d=g.length|0;var e=0;d=d-1|0;while(e<d){var f=d+e>>1;if(g[f]>c)d=f-1|0;else if(g[f+1]>c){d=f;break}else e=f+1|0}f=h[d];e=g[d]+Math.abs(f)|0;if(c<e)return f<0?"rtl":"ltr"}return void 0}f.dir=a}),66);
__d("useWAWebGroupColors",["WALogger","WAWebThemeContext"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['Group color id "','" does not have a corresponding style']);h=function(){return a};return a}var i={color_light_1:{color:"xijeqtt",$$css:!0},color_light_2:{color:"xkgnp4b",$$css:!0},color_light_3:{color:"x240ipn",$$css:!0},color_light_4:{color:"xskf257",$$css:!0},color_light_5:{color:"xebwusc",$$css:!0},color_light_6:{color:"x3wc6wf",$$css:!0},color_light_7:{color:"x8s8ybf",$$css:!0},color_light_8:{color:"x162sf37",$$css:!0},color_light_9:{color:"x197m9ru",$$css:!0},color_light_10:{color:"x98wywu",$$css:!0},color_light_11:{color:"x1y1pzmv",$$css:!0},color_light_12:{color:"xkgndj",$$css:!0},color_light_13:{color:"x1454dyk",$$css:!0},color_light_14:{color:"xcwjfjl",$$css:!0},color_light_15:{color:"xgz8yji",$$css:!0},color_light_16:{color:"xyaa4h1",$$css:!0},color_light_17:{color:"x1n9d4q5",$$css:!0},background_light_1:{backgroundColor:"x6wgc6a",$$css:!0},background_light_2:{backgroundColor:"x17y5562",$$css:!0},background_light_3:{backgroundColor:"x1cu8r8a",$$css:!0},background_light_4:{backgroundColor:"xznryv8",$$css:!0},background_light_5:{backgroundColor:"x1n3fz2",$$css:!0},background_light_6:{backgroundColor:"xx4wtn9",$$css:!0},background_light_7:{backgroundColor:"x18a7xdx",$$css:!0},background_light_8:{backgroundColor:"x1vwqcvr",$$css:!0},background_light_9:{backgroundColor:"x1qcddwk",$$css:!0},background_light_10:{backgroundColor:"x1lrj34z",$$css:!0},background_light_11:{backgroundColor:"x1hvcrje",$$css:!0},background_light_12:{backgroundColor:"x1yh949v",$$css:!0},background_light_13:{backgroundColor:"x1tcvzfv",$$css:!0},background_light_14:{backgroundColor:"x1fu2t9j",$$css:!0},background_light_15:{backgroundColor:"x1fwelf4",$$css:!0},background_light_16:{backgroundColor:"xfhxl41",$$css:!0},background_light_17:{backgroundColor:"x18um00n",$$css:!0},color_dark_1:{color:"xijeqtt",$$css:!0},color_dark_2:{color:"xkgnp4b",$$css:!0},color_dark_3:{color:"x1hncw2u",$$css:!0},color_dark_4:{color:"xskf257",$$css:!0},color_dark_5:{color:"xs7ovuj",$$css:!0},color_dark_6:{color:"x1wxwh9x",$$css:!0},color_dark_7:{color:"x1n9d4q5",$$css:!0},color_dark_8:{color:"x98wywu",$$css:!0},color_dark_9:{color:"x18hhy9w",$$css:!0},color_dark_10:{color:"xbpqssb",$$css:!0},color_dark_11:{color:"x162sf37",$$css:!0},color_dark_12:{color:"x7y2iuh",$$css:!0},color_dark_13:{color:"xah1503",$$css:!0},color_dark_14:{color:"xyee0rz",$$css:!0},color_dark_15:{color:"xcwjfjl",$$css:!0},color_dark_16:{color:"xgz8yji",$$css:!0},color_dark_17:{color:"xly5uq6",$$css:!0},background_dark_1:{backgroundColor:"x6wgc6a",$$css:!0},background_dark_2:{backgroundColor:"x17y5562",$$css:!0},background_dark_3:{backgroundColor:"x1xd7cei",$$css:!0},background_dark_4:{backgroundColor:"xznryv8",$$css:!0},background_dark_5:{backgroundColor:"x3yiujs",$$css:!0},background_dark_6:{backgroundColor:"x1sim4je",$$css:!0},background_dark_7:{backgroundColor:"x18um00n",$$css:!0},background_dark_8:{backgroundColor:"x1lrj34z",$$css:!0},background_dark_9:{backgroundColor:"x1g15lxm",$$css:!0},background_dark_10:{backgroundColor:"x1jb1lhd",$$css:!0},background_dark_11:{backgroundColor:"x1vwqcvr",$$css:!0},background_dark_12:{backgroundColor:"xxln43k",$$css:!0},background_dark_13:{backgroundColor:"xcpx4u6",$$css:!0},background_dark_14:{backgroundColor:"x1vnpq5e",$$css:!0},background_dark_15:{backgroundColor:"x1fu2t9j",$$css:!0},background_dark_16:{backgroundColor:"x1fwelf4",$$css:!0},background_dark_17:{backgroundColor:"xd7yu05",$$css:!0}};function j(a,b,c){var e=i[b+"_"+c+"_"+a];e==null&&(d("WALogger").WARN(h(),a),e=i[b+"_"+c+"_1"]);return e}function a(a,b){var c=d("WAWebThemeContext").useTheme();c=c.theme;return j(a,b,c)}g.useGroupsColorStyle=a}),98);
__d("WAWebInitialsProfilePicture.react",["$InternalEnum","WABidi","WAWebInitialsFromNameUtils","react","stylex","useWAWebGroupColors"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k=b("$InternalEnum").Mirrored(["Default","GroupChatProfilePicture"]),l={initialsBackground:{width:"xh8yej3",height:"x5yr21d",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",color:"x1awj2ng",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",$$css:!0},textSizeL:{fontSize:"x1aueamr",$$css:!0},oneInitialTextGCPP:{fontSize:"x1f6kntn",$$css:!0},twoInitialsTextGCPP:{fontSize:"x1nxh6w3",$$css:!0},twoInitialsSmallTextGCPP:{fontSize:"x1ncwhqj",$$css:!0}};function a(a){var b=a.backgroundColorId,e=a.initialsData;a=a.theme;a=a===void 0?k.Default:a;b=d("useWAWebGroupColors").useGroupsColorStyle(b,"background");var f=e.firstInitial!=null&&e.secondInitial!=null,g=d("WAWebInitialsFromNameUtils").supportedAlphabetsMap.get(d("WAWebInitialsFromNameUtils").InitialsAlphabets.HAN),h=!1;if(g&&e.secondInitial!=null&&g.test(e==null?void 0:e.secondInitial)){g=((g=e.secondInitial)==null?void 0:g.length)||0;h=g>1}g=e.firstInitial!=null&&d("WABidi").dir(e.firstInitial)==="rtl"?"rtl":"ltr";return j.jsx("div",{className:(i||(i=c("stylex")))(l.initialsBackground,b),children:j.jsxs("div",{dir:g,className:i(a===k.Default&&l.textSizeL,a===k.GroupChatProfilePicture&&l.oneInitialTextGCPP,a===k.GroupChatProfilePicture&&f&&l.twoInitialsTextGCPP,h&&l.twoInitialsSmallTextGCPP),children:[j.jsx("div",{"data-testid":void 0,className:"x1rg5ohu xk50ysn",children:e.firstInitial}),j.jsx("div",{"data-testid":void 0,className:"x1rg5ohu xk50ysn",children:e.secondInitial})]})})}a.displayName=a.name+" [from "+f.id+"]";g.ThemeType=k;g.InitialsProfilePicture=a}),98);
__d("WAWebKeyboardContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a({isKeyboardUser:!1,setIsKeyboardUser:function(){}});g["default"]=b}),98);
__d("WAWebUseIsKeyboardUser",["WAWebKeyboardContext","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useContext;function a(){return i(c("WAWebKeyboardContext"))}g["default"]=a}),98);
__d("WAWebWaChatPsaIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="wa-chat-psa";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=360;m=360;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 360 360",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",id:"Layer_1",x:"0px",y:"0px",enableBackground:"new 0 0 360 360",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"#25D366",opacity:1,stroke:"none",d:" M173.000000,361.000000  C115.353172,361.000000 58.206341,361.000000 1.029757,361.000000  C1.029757,241.061493 1.029757,121.122963 1.029757,1.092220  C120.896820,1.092220 240.793732,1.092220 360.845337,1.092220  C360.845337,120.999847 360.845337,240.999893 360.845337,361.000000  C298.456329,361.000000 235.978165,361.000000 173.000000,361.000000  M197.063446,92.379547  C195.411438,92.174431 193.762665,91.937508 192.106949,91.768898  C156.937073,88.187309 128.342728,100.457565 108.074654,129.217316  C87.867386,157.890823 86.575523,188.910645 101.408730,220.531891  C102.965797,223.851242 103.232262,226.553955 102.266563,229.950317  C98.463707,243.324921 94.899605,256.767395 91.084465,270.781311  C93.123474,270.351715 94.548683,270.112305 95.941422,269.748505  C108.650543,266.428864 121.320129,262.946716 134.088593,259.875153  C136.551529,259.282684 139.727280,259.569855 142.010056,260.646881  C157.967712,268.175995 174.705978,270.917206 192.102615,268.776276  C234.755585,263.527069 268.624664,226.903122 270.011841,184.898880  C271.516479,139.337418 241.558502,101.014793 197.063446,92.379547  z"}),j.jsx("path",{fill:"#FCFEFD",opacity:1,stroke:"none",d:" M197.474182,92.506378  C241.558502,101.014793 271.516479,139.337418 270.011841,184.898880  C268.624664,226.903122 234.755585,263.527069 192.102615,268.776276  C174.705978,270.917206 157.967712,268.175995 142.010056,260.646881  C139.727280,259.569855 136.551529,259.282684 134.088593,259.875153  C121.320129,262.946716 108.650543,266.428864 95.941422,269.748505  C94.548683,270.112305 93.123474,270.351715 91.084465,270.781311  C94.899605,256.767395 98.463707,243.324921 102.266563,229.950317  C103.232262,226.553955 102.965797,223.851242 101.408730,220.531891  C86.575523,188.910645 87.867386,157.890823 108.074654,129.217316  C128.342728,100.457565 156.937073,88.187309 192.106949,91.768898  C193.762665,91.937508 195.411438,92.174431 197.474182,92.506378  M253.181854,196.536774  C255.711929,186.169617 256.004150,175.664429 253.541946,165.353546  C246.119568,134.271210 226.847565,114.125397 195.518936,107.758392  C164.775314,101.510277 138.969528,111.918282 120.761078,137.417480  C102.516304,162.967529 102.122711,190.360199 117.175308,217.804871  C119.110695,221.333557 119.630486,224.226303 118.452988,227.999252  C116.305588,234.880005 114.631348,241.908432 112.534187,249.714706  C121.244263,247.449783 128.886383,245.269287 136.634216,243.571182  C138.823502,243.091385 141.697876,243.342087 143.623520,244.406097  C187.851929,268.844574 240.426270,246.301453 253.181854,196.536774  z"}),j.jsx("path",{fill:"#26D367",opacity:1,stroke:"none",d:" M253.113434,196.950668  C240.426270,246.301453 187.851929,268.844574 143.623520,244.406097  C141.697876,243.342087 138.823502,243.091385 136.634216,243.571182  C128.886383,245.269287 121.244263,247.449783 112.534187,249.714706  C114.631348,241.908432 116.305588,234.880005 118.452988,227.999252  C119.630486,224.226303 119.110695,221.333557 117.175308,217.804871  C102.122711,190.360199 102.516304,162.967529 120.761078,137.417480  C138.969528,111.918282 164.775314,101.510277 195.518936,107.758392  C226.847565,114.125397 246.119568,134.271210 253.541946,165.353546  C256.004150,175.664429 255.711929,186.169617 253.113434,196.950668  M159.161896,144.300629  C157.596588,142.566147 156.289551,139.760483 154.415009,139.308472  C149.758347,138.185654 145.465286,139.125748 141.936844,143.335083  C135.938049,150.491486 133.889008,158.646042 136.794312,167.095337  C139.180939,174.036118 142.985977,180.714874 147.247849,186.742218  C159.314850,203.807953 175.066055,216.142273 195.540466,221.815857  C205.004898,224.438538 213.684128,223.322174 221.218109,216.594635  C225.301636,212.948212 226.861237,207.950836 225.754288,203.034790  C225.255310,200.818695 221.393539,199.207153 218.857986,197.645233  C216.319427,196.081421 213.584717,194.800613 210.844025,193.606903  C202.134613,189.813538 203.863739,189.749985 198.366028,196.614182  C197.431046,197.781570 196.301865,198.814072 195.495682,200.059845  C193.532318,203.093781 191.249756,202.866211 188.234161,201.544495  C177.255371,196.732590 168.560989,189.383530 161.641464,179.587280  C158.640030,175.338043 158.010895,172.193756 162.204178,168.482956  C166.102249,165.033386 166.959518,160.921555 164.134537,156.022842  C162.157837,152.595093 161.014969,148.686508 159.161896,144.300629  z"}),j.jsx("path",{fill:"#FCFEFD",opacity:1,stroke:"none",d:" M159.330811,144.646652  C161.014969,148.686508 162.157837,152.595093 164.134537,156.022842  C166.959518,160.921555 166.102249,165.033386 162.204178,168.482956  C158.010895,172.193756 158.640030,175.338043 161.641464,179.587280  C168.560989,189.383530 177.255371,196.732590 188.234161,201.544495  C191.249756,202.866211 193.532318,203.093781 195.495682,200.059845  C196.301865,198.814072 197.431046,197.781570 198.366028,196.614182  C203.863739,189.749985 202.134613,189.813538 210.844025,193.606903  C213.584717,194.800613 216.319427,196.081421 218.857986,197.645233  C221.393539,199.207153 225.255310,200.818695 225.754288,203.034790  C226.861237,207.950836 225.301636,212.948212 221.218109,216.594635  C213.684128,223.322174 205.004898,224.438538 195.540466,221.815857  C175.066055,216.142273 159.314850,203.807953 147.247849,186.742218  C142.985977,180.714874 139.180939,174.036118 136.794312,167.095337  C133.889008,158.646042 135.938049,150.491486 141.936844,143.335083  C145.465286,139.125748 149.758347,138.185654 154.415009,139.308472  C156.289551,139.760483 157.596588,142.566147 159.330811,144.646652  z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.WaChatPsaIcon=a}),98);
__d("WAWebDetailImage.react",["fbt","$InternalEnum","WALogger","WAShiftTimer","WAWebAnnouncementSpeakerIcon","WAWebAvatarSpinner.react","WAWebBotGating","WAWebChatCollection","WAWebChatCommunityUtils","WAWebChatEphemerality","WAWebChatProfilePictureGatingUtils","WAWebClassnames","WAWebCommonCTWAConsumerTransparency","WAWebCommunityGatingUtils","WAWebCommunityGeneralChatImage.react","WAWebCommunitySquircleIcon","WAWebContactCollection","WAWebDefaultBroadcastIcon","WAWebDefaultGroupIcon","WAWebDefaultNewsletterIcon","WAWebDefaultUserColorIcon","WAWebDefaultUserIcon","WAWebDefaultUserSquareIcon","WAWebDisappearingIcon","WAWebDoubleChevronIcon","WAWebGroupType","WAWebIdleComponent.react","WAWebImg.react","WAWebInitialsFromNameUtils","WAWebInitialsProfilePicture.react","WAWebKeyboardIsKeyActivation","WAWebMiscErrors","WAWebMiscGatingUtils","WAWebMmsClientIsErrorRetryable","WAWebProfilePicThumbCollection","WAWebPsaVerifiedBlueIcon","WAWebPsaVerifiedIcon","WAWebStateUtils","WAWebUISpacing","WAWebUnjoinedSubgroupMetadataCollection","WAWebUseIsKeyboardUser","WAWebUserPrefsMeUser","WAWebWaChatPsaIcon","WAWebWid","cr:5981","gkx","react","stylex","useWAWebForceUpdate","useWAWebGroupColors","useWAWebLazyRef","useWAWebListener","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[GCPP] User contact not in collection"]);l=function(){return a};return a}e=k||d("react");var m=i||(i=c("react")),n=e.useEffect,o=e.useMemo,p=e.useRef,q=e.useState,r=b("cr:5981")==null?void 0:b("cr:5981").InternalStatusWarningBadge,s=b("cr:5981")==null?void 0:b("cr:5981").InternalStatusWarningImageOverlay,t=b("$InternalEnum").Mirrored(["ExtraSmall","Small","Medium","Large","None"]),u=b("$InternalEnum").Mirrored(["Low","High"]),v=b("$InternalEnum").Mirrored(["Circle","Square","Squircle"]),w=b("$InternalEnum").Mirrored(["GroupChatProfilePicture","StatusV3"]),x={announcementSpeaker:{color:"x1o6zcso",$$css:!0},communitySquircle:{color:"x6k2sxb",$$css:!0},newsletter:{color:"x1oc2adj",$$css:!0},avatarDefaultPSA:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},dimmed:{opacity:"xavfwda",$$css:!0},avatarDefault:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",height:"x5yr21d",$$css:!0},avatar:{position:"x1n2onr6",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},statusV3:{backgroundColor:"x1gle93d",$$css:!0},avatarSquare:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0},avatarImage:{position:"x1n2onr6",display:"x1lliihq",width:"xh8yej3",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",objectFit:"xl1xv1r",objectPosition:"x115dhu7",opacity:"xg01cxk",transition:"x17vty23",$$css:!0},isLoaded:{opacity:"x1hc1fzr",$$css:!0},avatarImageNoTransition:{transition:"xq2gx43",$$css:!0},avatarSquircle:{clipPath:"x1f2iure",borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0},groupProfilePicture:{position:"x10l6tqk",start:"x1d21pym",left:null,right:null,width:"xgd8bvy",height:"x1fgtraw",$$css:!0},groupProfilePictureInBubble:{width:"x14qfxbe",height:"xc9qbxq",$$css:!0},svgSize:{width:"xh8yej3",height:"x5yr21d",$$css:!0},avatarBorder:{borderTop:"xen37xx",borderEnd:"x1hejdby",borderBottom:"x8vaw2o",borderStart:"x1db28f5",$$css:!0},avatarProfileRingBorder:{borderTop:"xmin7n0",borderEnd:"x1lzln1b",borderBottom:"xg2hjyc",borderStart:"x56rp1n",boxSizing:"x9f619",$$css:!0},avatarDefaultAnnouncementGroup:{backgroundColor:"x13vkxft",$$css:!0},inviteModal:{borderTop:"x1s15kvm",borderEnd:"xt08tj4",borderBottom:"x1jn3s5o",borderStart:"x1imfd0y",backgroundColor:"x1v8jjaa",$$css:!0},avatarDefaultStatusV3:{transform:"xfimr68",transformOrigin:"x1jpgh95",$$css:!0},outline:{borderTopColor:"xyj1x25",borderEndColor:"x1mh0e9j",borderBottomColor:"x1v2jjsl",borderStartColor:"xa5e9bk",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",$$css:!0},badge:{position:"x10l6tqk",end:"x1up323v",bottom:"x48lskh",zIndex:"x42zw1d",boxSizing:"x9f619",width:"xw4jnvo",height:"x1qx5ct2",pointerEvents:"x47corl",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},chatList:{backgroundColor:"x150wa6m",$$css:!0},conversationHeader:{backgroundColor:"x1pl83jw",$$css:!0},badgeIconSVG:{width:"x1xp8n7a",height:"xmix8c7",$$css:!0},polls:{borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",$$css:!0},pollsSender:{borderTopColor:"x2q17o7",borderEndColor:"x18085pc",borderBottomColor:"x1ucqoxt",borderStartColor:"x1jwnv8o",$$css:!0},pollsReceiver:{borderTopColor:"x1ca3cpu",borderEndColor:"x18203mh",borderBottomColor:"x1vwx84n",borderStartColor:"x16243dv",$$css:!0},pathBackgroundSVG:{":first-child  path.background_fill":"x705qin",$$css:!0},pathPrimarySVG:{":first-child path.primary_fill":"xsp8fsz",$$css:!0},badgeIconPathSVG:{color:"xfect85",$$css:!0},keyboardUserGroupChatProfilePicture:{":focus:after_position":"xg3a389",":focus:after_boxSizing":"x1egsd7e",":focus:after_content":"x1qxyg6s",":focus:after_borderTop":"xqpcjg4",":focus:after_borderEnd":"xznygcw",":focus:after_borderBottom":"x9fjgea",":focus:after_borderStart":"x2s3v7",":focus:after_borderTopStartRadius":"xckbgxa",":focus:after_borderTopEndRadius":"x8o58bz",":focus:after_borderBottomEndRadius":"x1a07aim",":focus:after_borderBottomStartRadius":"x1fahz94",":focus:after_width":"x1e1lbd0",":focus:after_height":"xfm6786",":focus:after_top":"x170r96d",":focus:after_start":"x1nk6s7z",":focus:after_left":null,":focus:after_right":null,$$css:!0},keyboardUserChatlistHeaderProfilePicture:{":focus:after_position":"xg3a389",":focus:after_boxSizing":"x1egsd7e",":focus:after_content":"x1qxyg6s",":focus:after_borderTop":"xqpcjg4",":focus:after_borderEnd":"xznygcw",":focus:after_borderBottom":"x9fjgea",":focus:after_borderStart":"x2s3v7",":focus:after_borderTopStartRadius":"xckbgxa",":focus:after_borderTopEndRadius":"x8o58bz",":focus:after_borderBottomEndRadius":"x1a07aim",":focus:after_borderBottomStartRadius":"x1fahz94",":focus:after_width":"xs157qt",":focus:after_height":"x1e63k2x",":focus:after_top":"x170r96d",":focus:after_start":"x1nk6s7z",":focus:after_left":null,":focus:after_right":null,$$css:!0},dataSharingIcon:{color:"xht95ry",$$css:!0}},y=100;function z(a){var b,e=a.profilePicThumbImg,f=a.spinnerClassName,g=a.spinnerXstyle,h=a.spinnerSize,i=a.imgClassName,k=a.imgXstyle,l=a.alt,o=a.onLoad,r=a.profilePicThumb,s=a.loader,t=s===void 0?!1:s;s=a.theme;var u=a.loadingAnimation;u=u===void 0?!0:u;var w=a.id;w=q((d("WAWebBotGating").isBotReceiveEnabled()&&w instanceof c("WAWebWid")&&(w==null?void 0:w.isBot()))!==!0);var z=w[0],A=w[1];w=q(!1);var B=w[0],C=w[1];w=q(!1);var D=w[0],E=w[1];w=q(e);var F=w[0];w=w[1];var G=p(Boolean(e)),H=p(!1),I=s!=="business",J=c("useWAWebLazyRef")(function(){return t&&I?new(d("WAShiftTimer").ShiftTimer)(function(){E(!0)}):null});e!==F&&(w(e),A(!0),C(!1),E(!1));s=function(a){(a=J.current)==null?void 0:a.cancel();r.markMms4HostSuccess();A(!1);C(!0);o==null?void 0:o()};w=function(a){var b;(b=J.current)==null?void 0:b.cancel();if(a instanceof d("WAWebMiscErrors").ServerStatusError)switch(a.status){case 403:r.markStale({eurl:!0});H.current||(H.current=!0,r.validate());break;case 410:r.markStale();break;default:d("WAWebMmsClientIsErrorRetryable").isRetriableStatusCode(a.status)&&r.markMms4HostFailure();break}A(!1);C(!1)};n(function(){var a,b=J;(a=b.current)==null?void 0:a.onOrAfter(y);return function(){var a;(a=b.current)==null?void 0:a.cancel()}},[r,J]);e=function(){return!I?!1:!!t&&D&&z&&!(!d("WAWebStateUtils").unproxy(r).stale&&!F)};i=d("WAWebClassnames").classnamesConvertMeToStylexPlease((b={},b[i]=typeof i==="string",b),(j||(j=c("stylex")))(u===!1&&G.current&&x.avatarImageNoTransition,x.avatarImage,a.shape===v.Square&&x.avatarSquare,a.shape===v.Squircle&&x.avatarSquircle,!z&&x.isLoaded,k));var K,L;e()&&(K=m.jsx(c("WAWebAvatarSpinner.react"),{className:f,xstyle:g,size:h}));F&&(L=m.jsx(c("WAWebImg.react"),{src:F,hasPrivacyChecks:!0,crossOrigin:!1,className:i,draggable:!1,onLoad:s,onError:w,alt:l}));b=B?null:a.defaultIcon;u===!1&&(b=L!=null?null:a.defaultIcon);return m.jsxs(m.Fragment,{children:[K,b,L]})}z.displayName=z.name+" [from "+f.id+"]";function A(a){var b=d("useWAWebModelValues").useModelValues(a.profilePicThumb,["imgFull"]);return m.jsx(z,babelHelpers["extends"]({},a,{profilePicThumbImg:b.imgFull}))}A.displayName=A.name+" [from "+f.id+"]";function B(a){var b=d("useWAWebModelValues").useModelValues(a.profilePicThumb,["img"]);return m.jsx(z,babelHelpers["extends"]({},a,{profilePicThumbImg:b.img}))}B.displayName=B.name+" [from "+f.id+"]";function C(a){if(a==="group_profile_picture"||a==="group_profile_picture_in_bubble")return w.GroupChatProfilePicture;return a==="status_v3"?w.StatusV3:null}var D=40,E=32;function F(a){if(typeof a==="string")switch(a){case t.ExtraSmall:return 40;case t.Small:return 49;case t.Medium:return 100;case t.Large:return 200;case t.None:return void 0}else return a}function a(a){var b=a.id,e=a.size,f=a.quality,g=f===void 0?u.Low:f,i=a.loader,k=a.onClick,n=a.onLoad;f=a.quoted;var q=a.shape,w=a.border,y=a.waitIdle,z=a.ephemeralIcon,I=a.checkmarkIcon,J=a.theme,K=a.alt,L=a.xstyle,M=a.authorColor,N=a.loadPicture,O=N===void 0?!0:N;N=a.loadAnimation;var P=N===void 0?!0:N;N=a.tabIndex;var Q=a.ariaLabel,R=a.testId,aa=a.tabOrder;R=a.showOutline;R=R===void 0?!1:R;var ba=a.enableDataSharingIcon,S=c("useWAWebForceUpdate")(),T=p(null),U=c("WAWebUseIsKeyboardUser")();U=U.isKeyboardUser;var V=o(function(){return d("WAWebChatCollection").ChatCollection.get(b)},[b]);d("useWAWebListener").useListener((V==null?void 0:V.isGroup)?V.groupMetadata:V,"change:ephemeralDuration",S);typeof e==="number"?S=e>0?e:t.Small:S=e!=null?e:t.Small;var W={height:F(S),width:F(S)};k&&(W.cursor="pointer");var X;if(d("WAWebCommunityGatingUtils").communitiesEnabled()){if(V!=null&&((S=V.groupMetadata)==null?void 0:(S=S.participants)==null?void 0:S.iAmMember())){if(V.isGroup){X=(S=V.groupMetadata)==null?void 0:S.groupType}}else{S=c("WAWebUnjoinedSubgroupMetadataCollection").get(b.toString());X=S==null?void 0:S.groupType}}var Y=(j||(j=c("stylex")))(x.avatar,J==="status_v3"&&x.statusV3,q===v.Square&&x.avatarSquare,q===v.Squircle&&x.avatarSquircle,J==="group_profile_picture"&&x.groupProfilePicture,J==="group_profile_picture_in_bubble"&&x.groupProfilePictureInBubble,J==="status_v3_profile_photo_ring"&&x.avatarProfileRingBorder,J==="invite_modal"&&x.inviteModal,(J==="polls_sender"||J==="polls_receiver")&&x.polls,J==="polls_sender"&&x.pollsSender,J==="polls_receiver"&&x.pollsReceiver,d("WAWebChatCommunityUtils").isIntegritySuspendedCommunity(V)&&x.dimmed,w===!0&&x.avatarBorder,X===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&x.avatarDefaultAnnouncementGroup,k!=null&&U&&J==="group_profile_picture"&&x.keyboardUserGroupChatProfilePicture,k!=null&&U&&J==="chatlist_header_profile_photo"&&x.keyboardUserChatlistHeaderProfilePicture,R&&x.outline,L);S=function(a){if(c("WAWebKeyboardIsKeyActivation")(a)){(a=T.current)==null?void 0:a.click()}};var Z=k!=null?{tabIndex:N,role:"button","aria-label":Q,onKeyDown:S}:{};w=C(J);var $=m.jsx(H,{id:b,quoted:f,groupType:X,theme:w,authorColor:M,shape:a.shape});if((J==="group_profile_picture"||J==="view_all_replies")&&d("WAWebChatProfilePictureGatingUtils").shouldDisplayInitialsInProfilePicture(b)){U=d("WAWebContactCollection").ContactCollection.get(b);if(U){R=d("WAWebInitialsFromNameUtils").getInitialsFromContact(U);if(R.firstInitial!=null||R.secondInitial!=null){$=m.jsx(d("WAWebInitialsProfilePicture.react").InitialsProfilePicture,{initialsData:R,theme:d("WAWebInitialsProfilePicture.react").ThemeType.GroupChatProfilePicture,backgroundColorId:(L=M)!=null?L:1})}}else d("WALogger").DEV(l())}N=function(){var a=null,f;O?f=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(b):f=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.get(b);f?g===u.High?a=m.jsx(A,{profilePicThumb:f,defaultIcon:$,loader:i,onLoad:n,alt:K,shape:q,id:b}):a=m.jsx(B,{profilePicThumb:f,defaultIcon:$,loader:i,onLoad:n,alt:K,loadingAnimation:P,shape:q,id:b}):a=$;return m.jsxs("div",babelHelpers["extends"]({"data-testid":void 0,ref:T,"data-tab":aa},Z,{className:Y,style:W,onClick:k,children:[!c("gkx")("26258")&&d("WAWebUserPrefsMeUser").isMeAccount(b)&&(typeof e!=="number"||e>=D)&&r?m.jsx(r,{id:b}):null,a,!c("gkx")("26258")&&(typeof e!=="number"||e>=E)&&s?m.jsx(s,{id:b}):null]}))};Q=m.jsx(c("WAWebIdleComponent.react"),{id:b,onComplex:N,waitIdle:y,children:m.jsx("div",babelHelpers["extends"]({ref:T},Z,{className:Y,style:W,onClick:k,children:$}))});if(a.emojiBadge!=null&&d("WAWebUserPrefsMeUser").isMeAccount(b))return m.jsxs("div",{className:"x1n2onr6","aria-label":h._("__JHASH__C8RkWq2-FVH__JHASH__"),children:[m.jsx("div",{className:"x10l6tqk x1up323v x48lskh x42zw1d x9f619 xw4jnvo x1qx5ct2 x47corl x14yjl9h xudhj91 x18nykt9 xww2gxu x1pl83jw",children:a.emojiBadge}),Q]});S=z!=null&&V&&d("WAWebChatEphemerality").isEphemeralSettingOn(V);f=ba===!0&&V!=null&&d("WAWebCommonCTWAConsumerTransparency").shouldShowConsumerTransparencyDisclosure(V);if(S===!0||I||f){J=(w=z)!=null?w:I;return m.jsxs("div",{className:"x1n2onr6","aria-label":h._("__JHASH__a-GSRkRs_yT__JHASH__"),children:[m.jsx("div",{className:(j||(j=c("stylex")))(x.badge,d("WAWebUISpacing").uiPadding.all1,J==="chat-list"&&x.chatList,J==="conversation-header"&&x.conversationHeader),children:m.jsx(G,{chat:V,ephemeralIcon:z,shouldShowDataSharingIcon:f})}),Q]})}return Q}a.displayName=a.name+" [from "+f.id+"]";function G(a){var b=a.chat,c=a.ephemeralIcon;a=a.shouldShowDataSharingIcon;if(a===!0)return m.jsx(d("WAWebDoubleChevronIcon").DoubleChevronIcon,{iconXstyle:[x.svgSize,x.badgeIconSVG,x.dataSharingIcon]});a=c!=null&&b&&d("WAWebChatEphemerality").isEphemeralSettingOn(b);c=d("WAWebMiscGatingUtils").isBlueEnabled()?d("WAWebPsaVerifiedBlueIcon").PsaVerifiedBlueIcon:d("WAWebPsaVerifiedIcon").PsaVerifiedIcon;b=a===!0?d("WAWebDisappearingIcon").DisappearingIcon:c;return m.jsx(b,{xstyle:x.badgeIconPathSVG,iconXstyle:[x.svgSize,x.badgeIconSVG]})}G.displayName=G.name+" [from "+f.id+"]";function H(a){var b=a.authorColor,e=a.groupType,f=a.id,g=a.quoted,h=a.shape,i=a.theme;a=a.xstyle;var k=m.jsx(d("WAWebDefaultUserIcon").DefaultUserIcon,{iconXstyle:[x.svgSize,a]});c("WAWebWid").isUser(f)&&!c("WAWebWid").isPSA(f)&&g?k=m.jsx(d("WAWebDefaultUserSquareIcon").DefaultUserSquareIcon,{iconXstyle:[x.svgSize,a]}):c("WAWebWid").isGroup(f)?e===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?k=m.jsx(d("WAWebAnnouncementSpeakerIcon").AnnouncementSpeakerIcon,{iconXstyle:[x.svgSize,x.announcementSpeaker,a],directional:!0}):e===d("WAWebGroupType").GroupType.COMMUNITY||h===v.Squircle?k=m.jsx(d("WAWebCommunitySquircleIcon").CommunitySquircleIcon,{iconXstyle:[x.svgSize,x.communitySquircle,a]}):e===d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()?k=m.jsx(d("WAWebCommunityGeneralChatImage.react").CommunityGeneralChatImage,{}):k=m.jsx(d("WAWebDefaultGroupIcon").DefaultGroupIcon,{iconXstyle:[x.svgSize,a]}):c("WAWebWid").isBroadcast(f)?k=m.jsx(d("WAWebDefaultBroadcastIcon").DefaultBroadcastIcon,{iconXstyle:[x.svgSize,a]}):c("WAWebWid").isPSA(f)?k=m.jsx(d("WAWebWaChatPsaIcon").WaChatPsaIcon,{iconXstyle:[x.svgSize,x.avatarDefaultPSA,a]}):c("WAWebWid").isNewsletter(f)&&(k=m.jsx(d("WAWebDefaultNewsletterIcon").DefaultNewsletterIcon,{iconXstyle:[x.svgSize,x.newsletter,a]}));g=m.jsx("div",{className:(j||(j=c("stylex")))(x.avatarDefault,x.pathBackgroundSVG,x.pathPrimarySVG,i===w.StatusV3&&x.avatarDefaultStatusV3),children:k},"default");e=d("useWAWebGroupColors").useGroupsColorStyle((h=b)!=null?h:1,"color");i===w.GroupChatProfilePicture&&(g=m.jsx("div",{className:"x10l6tqk x13vifvy x17qophe x78zum5 x6s0dn4 xl56j7k xh8yej3 x5yr21d",children:m.jsx(d("WAWebDefaultUserColorIcon").DefaultUserColorIcon,{iconXstyle:[x.svgSize,a],xstyle:e})},"default"));return g}H.displayName=H.name+" [from "+f.id+"]";g.DetailImageSize=t;g.DetailImageQuality=u;g.DetailImageShape=v;g.DefaultIconThemeType=w;g.DetailImageCommon=z;g.getSize=F;g.DetailImage=a;g.ImageIcon=G;g.DefaultIcon=H}),226);
__d("WAWebFormatFilter",[],(function(a,b,c,d,e,f){function a(a,b){if(a.length===1)return a;var c=[],d;while(d=a.pop()){var e=d,f=e[0],g=e[3];e=e[4];e=b[e];var h=e[0];e=e[2];var i=!0,j=c.length;for(j=j-1;j>=0;--j){var k=c[j],l=k[2],m=k[3];k=k[4];if(f>m)continue;m=b[k];k=m[0];m=m[2];if(g>l){if(e<m&&c.splice(j,1))continue;i=!1;break}if(k.mutates&&!(i=!1))break;if(h.compatibility){h.nestable(k)||(i=!1);break}if(!h.nestable(k)&&!k.compatibility&&e<m&&c.splice(j,1))continue;if(!h.compatibility&&!k.format){i=!1;break}}i&&c.push(d)}return c}f["default"]=a}),66);
__d("WAWebFormatFlatten",[],(function(a,b,c,d,e,f){function a(a){var b=[];for(var c=0;c<a.length;++c)for(var d=0;d<a[c].length;++d){var e=a[c][d],f=e[0];e=e[1];b.push([f,e,c])}return b}f["default"]=a}),66);
__d("WAWebFormatMatch",[],(function(a,b,c,d,e,f){function a(a,b,c){c===void 0&&(c=Infinity);var d=[];for(var e=0;e<b.length;++e){var f=b[e],g=f[0];f=f[1];g=g.match(a,f,c);f=[];var h=g.length;for(var i=0,j=g[i];i<h;j=g[++i])f[i]=[j[0],j[1],j[2],j[3],e,j[4]];f.length&&d.push(f)}for(i=0;i<d.length;i++){h=b[d[i][0][4]][0].conflictResolvers;if(!h)continue;for(j=0;j<d.length;j++){g=b[d[j][0][4]][0];f=h.get(g);f==null?void 0:f(d[i],d[j])}}e=[];for(c=0;c<d.length;++c)e[c]=d[c].length-1;a=[];g=0;while(d.length){for(f=0,j=-1;f<d.length;++f)d[f][e[f]][0]>j&&(g=f,j=d[f][e[f]][0]);a.push(d[g][e[g]]);--e[g]<0&&(d.splice(g,1),e.splice(g,1))}return a}f["default"]=a}),66);
__d("WAWebFormatParse",["WAUnicodeUtils","WAWebFormatFilter","WAWebFormatFlatten","WAWebFormatMatch","WAWebFormatParseTree"],(function(a,b,c,d,e,f,g){function a(a,b,d){d===void 0&&(d=Infinity);return h(a,c("WAWebFormatFlatten")(b),d)}function h(a,b,e){e===void 0&&(e=Infinity);var f=c("WAWebFormatMatch")(a,b,e);f=f.length?c("WAWebFormatParseTree")(a,c("WAWebFormatFilter")(f,b),b):{children:[{type:"text",value:a}]};b=d("WAUnicodeUtils").numCodepoints(a);e<b&&i(f,{limit:e});return f}function i(a,b){if(b.limit<=0)return;if(a.type&&a.type==="text"){if(a.value.length>=b.limit){var c=d("WAUnicodeUtils").toArray(a.value);c.length>=b.limit&&(c=c.slice(0,b.limit));a.value=c.join("");b.limit-=c.length}else b.limit-=a.value.length;return}else if(a.type&&a.type==="delimiter")return;c=0;while(c<a.children.length){i(a.children[c],b);if(b.limit<=0)break;c++}a.children=a.children.slice(0,c+1)}g.parse=a;g._parse=h}),98);
__d("WAWebFormatParseTree",["WAWebFormatParse"],(function(a,b,c,d,e,f){function a(a,c,d){var e={children:[]},f=0,h=e,i=0;for(var j=0;j<c.length;++j){var k=c[j],l=k[0],m=k[1];while(h.parent&&l>(i=h.match[2])){f<=i&&h.children.push({type:"text",value:a.substring(f,i+1)});f=h.match[3]+1;if(h.mutator.fragment){var n=h.parent.children;n.pop();n.push.apply(n,h.children)}i!==h.match[3]&&h.parent.children.push({type:"delimiter",value:a.substring(i+1,f)});h=h.parent}f<l&&h.children.push({type:"text",value:a.substring(f,l)});n=d[k[4]];var o=n[0];n=n[1];var p=o.mutates;f=m;l!==m&&h.children.push({type:"delimiter",value:a.substring(l,m)});l={children:[],match:k,mutator:o,opts:n,parent:h};if(p){m=a.substring(k[1],k[2]+1);n=o.mutate(m,k[5]);p=g(o,d,l);m=b("WAWebFormatParse")._parse;o=m(n,p);l.children=o.children;f=k[2]+1}h.children.push(l);h=l}do{if(!h.match)continue;m=h.match;n=m[2];p=m[3];f<=n&&h.children.push({type:"text",value:a.substring(f,n+1)});f=p+1;if(h.mutator.fragment){o=h.parent.children;o.pop();o.push.apply(o,h.children)}n!==p&&h.parent.children.push({type:"delimiter",value:a.substring(n+1,f)})}while(h.parent&&(h=h.parent)&&h.parent);f!==a.length&&h.children.push({type:"text",value:a.substring(f)});return e}function g(a,b,c){a=a.format;var d=[];c=h(c);for(var e=0;e<b.length;++e){if(!a&&!b[e][0].compatibility)continue;if(c.includes(b[e][0]))continue;d.push(b[e])}return d}function h(a){a=a;var b=[];do a.mutator&&b.push(a.mutator);while(a.parent&&(a=a.parent));return b}f["default"]=a}),66);
__d("WAWebFormatSerialize",["err"],(function(a,b,c,d,e,f,g){function a(a,b,c){return a.onRoot(i(a,b.children,c),c)}function h(a,b,d){if(b.type){var e=b.value;switch(b.type){case"text":return a.onText(e,d);case"delimiter":return a.onDelimiter(e,d);default:throw c("err")("Invalid node type")}}return a.onMutator(b.mutator,i(a,b.children,d),b.match[5],b.opts,d)}function i(a,b,c){return b.reduce(function(b,d){b.push(h(a,d,c));return b},[])}g["default"]=a}),98);
__d("WAWebFormat",["WAWebFormatParse","WAWebFormatSerialize"],(function(a,b,c,d,e,f,g){function a(a,b,e,f,g){g===void 0&&(g=Infinity);return c("WAWebFormatSerialize")(e,d("WAWebFormatParse").parse(a,b,g),f)}g["default"]=a}),98);
__d("WAWebFormatComponentUtils",[],(function(a,b,c,d,e,f){function a(a){a=typeof a==="string"?[a]:[].concat(a);typeof a[0]==="string"&&(a[0]=a[0].replace(" ",""));return a}f.removeFirstLeadingSpace=a}),66);
__d("WAWebBulletedListItemMutatorComponent.react",["WABidi","WAWebCopyPasteSelectable.react","WAWebFormatComponentUtils","WAWebL10N","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={container:{paddingStart:"x1ye3gou",textIndent:"x1jieuv1","::before_content":"xo7wnuk","::before_marginStart":"x1sy0ulg","::before_marginEnd":"xt1y1ed","::before_fontSize":"xlu7um4","::before_verticalAlign":"xm78dhd","::before_lineHeight":"x1r4uxqn",$$css:!0},dirMismatch:{textAlign:"xp4054r",paddingStart:"xkhd6sd",paddingEnd:"xn6708d","::before_marginEnd":"x1rwch9a","::before_marginStart":"x1xcqooi",$$css:!0}};function l(a){if(a==null||a==="")return;return d("WABidi").dir(a)}function m(a){a=l(a)==="rtl";return a!==c("WAWebL10N").isRTL()}function a(a){var b=a.children;b=b===void 0?"":b;var e=a.inline;e=e===void 0?!1:e;var f=a.selectable,g=a.symbol;a=a.text;if(e)return j.jsxs(d("WAWebCopyPasteSelectable.react").SelectableSpan,{selectable:f,children:["\u2022",b]});e=g+" ";return j.jsx("li",{dir:"auto",className:(i||(i=c("stylex")))(k.container,m(a)&&k.dirMismatch),children:j.jsx(d("WAWebCopyPasteSelectable.react").SelectableSpan,{selectable:f,prePlainText:e,children:d("WAWebFormatComponentUtils").removeFirstLeadingSpace(b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebNumberedListItemMutatorComponent.react",["WABidi","WAWebCopyPasteSelectable.react","WAWebFormatComponentUtils","WAWebL10N","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={dirMismatch:{textAlign:"xp4054r",listStylePosition:"x1cy9i3i",$$css:!0}};function l(a){if(a==null||a==="")return;return d("WABidi").dir(a)}function m(a){a=l(a)==="rtl";return a!==c("WAWebL10N").isRTL()}function a(a){var b=a.children;b=b===void 0?"":b;var e=a.inline;e=e===void 0?!1:e;var f=a.numbering,g=a.selectable;a=a.text;if(e)return j.jsxs(d("WAWebCopyPasteSelectable.react").SelectableSpan,{selectable:g,children:[f,b]});e=f+" ";return j.jsx("li",{dir:"auto",value:f.replace(".",""),className:(i||(i=c("stylex")))([m(a)&&k.dirMismatch,d("WAWebUISpacing").uiPadding.start2]),children:j.jsx(d("WAWebCopyPasteSelectable.react").SelectableSpan,{selectable:g,prePlainText:e,children:d("WAWebFormatComponentUtils").removeFirstLeadingSpace(b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebTextMutatorComponentUtils",["WAWebBulletedListItemMutatorComponent.react","WAWebNumberedListItemMutatorComponent.react"],(function(a,b,c,d,e,f,g){function a(a){a=Array.isArray(a)?a:[a];var b=[],d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(typeof g==="string"&&g.match(/^\r?\n$/)&&d.length)d.push(g);else if(g!=null&&typeof g==="object"&&(g.type===c("WAWebBulletedListItemMutatorComponent.react")||g.type===c("WAWebNumberedListItemMutatorComponent.react")))d.push(g);else{g=g;d.length&&(b.push({isList:!0,children:d}),d=[],typeof g==="string"&&(g=g.replace(/^\r?\n/g,"")));b.push({isList:!1,children:g})}}d.length&&b.push({isList:!0,children:d});return b}g.groupListChildren=a}),98);
__d("WAWebBulletedListMutatorComponent.react",["WAWebL10N","WAWebTextMutatorComponentUtils","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={ul:{wordBreak:"x13faqbe",whiteSpace:"xeaf4i8",position:"x1n2onr6",$$css:!0}};function a(a){var b=a.children;b=b===void 0?"":b;var e=a.inline;e=e===void 0?!1:e;var f=a.largerIndentation,g=f===void 0?!1:f;f=a.quoted;var h=f===void 0?!1:f;if(e)return b;var l=[];d("WAWebTextMutatorComponentUtils").groupListChildren(b).forEach(function(a,b){a.isList?l.push(j.jsx("ul",{className:(i||(i=c("stylex")))(k.ul,!h&&d("WAWebUISpacing").uiMargin.vert4,d("WAWebUISpacing").uiMargin.start18,g?d("WAWebUISpacing").uiMargin.start18:d("WAWebUISpacing").uiMargin.start8),dir:c("WAWebL10N").isRTL()?"rtl":"ltr",children:a.children},b)):l.push(a.children)});return l}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebFormatSerializer",["err"],(function(a,b,c,d,e,f,g){a=function(){function a(){}a.onMutator=function(a,b,d,e,f){throw c("err")("Subclasses of `Serializer` must override `onMutator()`")};a.onRoot=function(a,b){throw c("err")("Subclasses of `Serializer` must override `onRoot()`")};a.onText=function(a,b){throw c("err")("Subclasses of `Serializer` must override `onText()`")};a.onDelimiter=function(a,b){throw c("err")("Subclasses of `Serializer` must override `onDelimiter()`")};return a}();g["default"]=a}),98);
__d("WAWebJsxTextSerializer",[],(function(a,b,c,d,e,f){function a(a){return a}f["default"]=a}),66);
__d("WAWebNumberedListMutatorComponent.react",["WAWebL10N","WAWebTextMutatorComponentUtils","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={ol:{wordBreak:"x13faqbe",whiteSpace:"xeaf4i8",position:"x1n2onr6",listStyle:"xua7rxp",$$css:!0}};function a(a){var b=a.children;b=b===void 0?"":b;var e=a.inline;e=e===void 0?!1:e;var f=a.largerIndentation,g=f===void 0?!1:f;f=a.quoted;var h=f===void 0?!1:f;if(e)return b;var l=[];d("WAWebTextMutatorComponentUtils").groupListChildren(b).forEach(function(a,b){a.isList?l.push(j.jsx("ol",{className:(i||(i=c("stylex")))(k.ol,d("WAWebUISpacing").uiMargin.start30,!h&&d("WAWebUISpacing").uiMargin.vert4,g?d("WAWebUISpacing").uiMargin.start30:d("WAWebUISpacing").uiMargin.start20),dir:c("WAWebL10N").isRTL()?"rtl":"ltr",children:a.children},b)):l.push(a.children)});return l}a.displayName=a.name+" [from "+f.id+"]";a.displayName="NumberedList";g["default"]=a}),98);
__d("WAWebJsxSerializer.react",["WAWebBulletedListMutatorComponent.react","WAWebFormatSerializer","WAWebJsxTextSerializer","WAWebNumberedListMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).cloneElement;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebFormatSerializer"));a.onText=c("WAWebJsxTextSerializer");a.onDelimiter=function(a){return void 0};a.onRoot=function(a){k(a);return j(a)};a.onMutator=function(a,b,c,d){return a.jsx(j(b),c,d)};function j(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];if(d===void 0)continue;if(typeof d==="string"){b.push(d);continue}var e="jsx-child-"+c;b.push(i(d,{key:e}))}return b}function k(a){var b=-1;for(var d=0;d<a.length;d++){var e=a[d];if((e==null?void 0:e.type)!==c("WAWebNumberedListMutatorComponent.react"))continue;e=e==null?void 0:(e=e.props)==null?void 0:e.children;if(Array.isArray(e))for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=h==null?void 0:(h=h.props)==null?void 0:h.numbering;h!=null&&(b=Math.max(b,parseInt(h,10)))}}if(b>=10)for(h=0;h<a.length;h++){g=a[h];if((g==null?void 0:g.type)!==c("WAWebNumberedListMutatorComponent.react")&&(g==null?void 0:g.type)!==c("WAWebBulletedListMutatorComponent.react"))continue;a[h]=i(g,{largerIndentation:!0})}}g["default"]=a}),98);
__d("WAWebEmojiText.react",["WABidi","WALogger","WANullthrows","WAWebBotGating","WAWebClassnames","WAWebCopyPasteSelectable.react","WAWebEmoji","WAWebFormat","WAWebFormatConfiguration","WAWebJsxSerializer.react","WAWebL10N","WAWebListenerHoc_DEPRECATED","WAWebNonEmptyString","WAWebUA","lodash","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[EmojiText] Exceeded max iteration count while processing bot edit message for lists. Check for a potential infinite loop."]);k=function(){return a};return a}a=j||d("react");var l=h||(h=c("react"));b=a.PureComponent;var m=a.createRef,n={breakWord:{wordBreak:"x13faqbe",$$css:!0},clickable:{cursor:"x1ypdohk",":hover_textDecoration":"xt0b8zv",$$css:!0},dirMismatch:{display:"x1lliihq",width:"xh8yej3",$$css:!0},ellipsify:{flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},inlineblock:{display:"x1rg5ohu",$$css:!0},multiline:{whiteSpace:"x1fj9vlw",$$css:!0},preformatted:{whiteSpace:"x1sdyfia",width:"xm6i5cn",display:"x1rg5ohu",$$css:!0}};e={SMALL:"SMALL",LARGE:"LARGE"};var o=4096,p=12,q=/^\r?\n/;function r(a){return d("WAWebEmoji").EmojiUtil.containsEmoji(a.substring(0,o))}f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={text:String(e.props.text||""),ellipsified:null},e.refContainer=m(),e.$1=!1,e.$2=c("lodash").debounce(function(){e.setState({ellipsified:null},e.ellipsify)},10),e.$3=function(a){return a.reduce(function(a,b){if(typeof b==="string"){var c=b.split(/(\r?\n|\r)/g);c=c.map(function(a,b){b=d("WABidi").dir(a);return{dir:b,content:a}});return a.concat(c)}a.push({content:b});return a},[])},e.ellipsify=function(){var a=e.refContainer.current;if(!a)return;var b=c("WANullthrows")(a.parentElement),f=a.querySelectorAll("img");if(!f.length)return;var g=a.clientWidth;a.style.overflow="visible";g=a.clientWidth!==g;a.style.overflow="hidden";if(!g)return;g=Boolean(c("WAWebL10N").isRTL())===Boolean(e.props.dirMismatch);b=g?b.clientWidth-v(b,a)-p:p;b=t(f,b,g);g=f[b];e.setState({ellipsified:d("WAWebNonEmptyString").asMaybeNonEmptyString(s(a,g))})},e.$4=function(){return r(e.state.text)&&e.ellipsify()},e.$5=function(a,b){var d=e.props.direction,f=[];a=e.$3(a);var g=[],h=d;(d==="auto"||d==="inherit")&&(h=null);var i=function(a,b){b===void 0&&(b=!1);var e=h==null||d==null||h===d,i=e?null:h;e=!e||h==="rtl"!==c("WAWebL10N").isRTL();e=e?"x1lliihq xh8yej3":null;f.push(l.jsxs("span",{dir:i,className:e,children:[g,b?String.fromCodePoint(8230):null]},a))};for(var j=0;j<a.length;j++){var k=a[j],m=h!==k.dir&&h!=null&&typeof k.dir!=="undefined";m&&(i(j),g=[]);typeof k.dir!=="undefined"&&(h=k.dir);g.push(k.content)}i(a.length,b);return f},e.$6=function(){if(e.$1)return;e.$1=!0;e.props.listeners.add(window,"resize",e.$2)},e.componentDidMount=function(){!d("WAWebUA").UA.supportsEmojiEllipsification&&e.props.ellipsify&&r(e.state.text)&&e.$6();if(d("WAWebUA").UA.supportsEmojiEllipsification||!e.props.ellipsify)return;e.$4()},e.$7=function(){if(!e.$1)return;e.$1=!1;e.props.listeners.remove(window,"resize",e.$2)},e.render=function(){if(!e.state.text)return null;var a=e.props,b=a.onClick,f=a.ellipsify,g=a.dirMismatch,h=a.inferLinesDirection,j=a.inlineblock,m=a.direction,p=a.textLimit,q=a.multiline,r=a.preformatted,s=a.breakWord,t=a.emojiXstyle;a=a.lastBotEditBodyLength;var u=e.state.ellipsified!=null?e.state.ellipsified:e.state.text;m=m==="inherit"?null:m||"auto";var v=!!e.props.selectable;t=e.props.formatters||d("WAWebFormatConfiguration").EmojiOnly({selectable:v,emojiXstyle:t});p=p?p:Infinity;f&&u.length>o&&p>o&&(p=o);g=g===!0&&!h;h=d("WAWebClassnames").classnamesConvertMeToStylexPlease(e.props.className,(i||(i=c("stylex")))(f&&n.ellipsify,j&&n.inlineblock,b&&n.clickable,g&&n.dirMismatch,q&&n.multiline,r===!0&&n.preformatted,s&&n.breakWord,e.props.xstyle));f=u;j=null;g=d("WAWebBotGating").isBotReceiveEnabled()&&!d("WAWebBotGating").isBotPerWordStreamingEnabled();g&&a!=null&&!Number.isNaN(a)&&(f=u.slice(0,a),j=u.slice(a));q=c("WAWebFormat")(f,t,c("WAWebJsxSerializer.react"),void 0,p);if(g&&j!=null){r=c("WAWebFormat")(j,t,c("WAWebJsxSerializer.react"),void 0,p);s=100;a=0;while(a++<=s){if(x(q,r))break;if(y(q,r))continue;break}a>=s&&d("WALogger").ERROR(k());q.push(l.jsx("p",{className:"xpg929k x1q3qbx4 xt0psk2 x4hg4is",children:r},"botMsgEdit"))}f=e.state.ellipsified!=null||u.length>p;g=e.props.inferLinesDirection?e.$5(q,f):q;t=(j=e.props.title)!=null?j:e.state.text;s=(a=e.props.ariaLabel)!=null?a:"";return l.jsx(d("WAWebCopyPasteSelectable.react").Selectable,{"data-testid":void 0,className:h,dir:m,element:e.props.element,onClick:b,ref:e.refContainer,selectable:v,title:e.props.titlify?t:void 0,"aria-label":s,style:{minHeight:((r=e.props.minTextHeight)!=null?r:0)+"px"},children:g})},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.getElement=function(){return this.refContainer.current};b.getDerivedStateFromProps=function(a,b){var c,e=null;c=String((c=a.text)!=null?c:"");c!==b.text&&(e={text:c});if(d("WAWebUA").UA.supportsEmojiEllipsification||!a.ellipsify||e==null)return e;r(c)||(e=babelHelpers["extends"]({},e,{ellipsified:null}));return e};e.getWidth=function(){var a=this.refContainer.current;return!a?0:a.getBoundingClientRect().width};e.componentDidUpdate=function(a,b){if(d("WAWebUA").UA.supportsEmojiEllipsification||!this.props.ellipsify||b.text===this.state.text)return;r(this.state.text)?(this.$2(),this.$6()):this.$7()};e.componentWillUnmount=function(){this.$2.cancel()};return b}(b);f.defaultProps={element:"span",emojiSize:e.SMALL,textLimit:Infinity};a=d("WAWebListenerHoc_DEPRECATED").ListenerHOC(f);b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.getElement=function(){return c.getComponent().getElement()},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.getWidth=function(){return this.getComponent().getWidth()};return b}(a);function s(a,b,c){c===void 0&&(c={found:!1});if(a===b){c.found=!0;return""}else if(a instanceof HTMLImageElement)return a.alt;else if(a.nodeType===Node.TEXT_NODE)return a.nodeValue;var d=u(a),e="",f=0;while(f<a.childNodes.length){e+=s(a.childNodes[f],b,c);if(c.found)break;else f++}if(d==null)return e;f=d[0];a=d[1];return""+f+e+a}function t(a,b,c){var d=0;while(d<a.length){var e=a[d];if(c&&e.offsetLeft+e.clientWidth>=b)break;if(!c&&e.offsetLeft<=b)break;d++}return d}function u(a){if(a instanceof Element)switch(a.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}function v(a,b){var c=0;a=a.childNodes;for(var d=0;d<a.length;d++){var e=a[d];if(e===b)break;c+=e instanceof Element?e.clientWidth:0}return c}function w(a){var b;return typeof a!=="string"&&((a==null?void 0:(b=a.type)==null?void 0:b.name)==="BulletedList"||(a==null?void 0:(b=a.type)==null?void 0:b.name)==="NumberedList")}function x(a,b){if(w(a[a.length-1])&&((a=b[0])==null?void 0:a.match==null?void 0:a.match(q))){b[0]=b[0].replace(q,"");return!0}return!1}function y(a,b){a=a[a.length-1];if(!w(a))return!1;a=(a==null?void 0:a.props.children)?a==null?void 0:a.props.children[(a==null?void 0:a.props.children.length)-1]:null;var c=b[0];if(a&&c&&!(c==null?void 0:c.match==null?void 0:c.match(q))&&!w(c)){c=b.shift();if(typeof c==="string"){var d=c.split(/\r?\n/);c=d.shift();b.unshift("\n"+d.join("\n"))}a.props.children.push(l.jsx("p",{className:"xpg929k x1q3qbx4 xt0psk2 x4hg4is",children:c},"botMsgEdit"));return!0}return!1}g.EMOJI_SIZE=e;g.EmojiText=b}),98);
__d("WAWebLockScreenResolver",["WAComms","WALogger","WAResolvable","WAWebChatCollection","WAWebCmd","WAWebCryptoEncKeyHelper","WAWebDbEncryptionKey","WAWebModalManager","WAWebMsgCollection","WAWebUserPrefsInfoStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[screeen-lock] passcode derived key is null when trying to encrypt"]);h=function(){return a};return a}c=function(){function a(){this.deferred=new(d("WAResolvable").Resolvable)()}var b=a.prototype;b.waitForPasscode=function(){var a;d("WAWebCmd").Cmd.openLockScreenModal();return(a=this.deferred)==null?void 0:a.promise};b.waitForPasscodeAfterIncorrectAttempt=function(){var a;this.deferred=new(d("WAResolvable").Resolvable)();d("WAWebCmd").Cmd.incorrectPasscodeLockScreen();return(a=this.deferred)==null?void 0:a.promise};b.enterPasscode=function(a){this.deferred.resolve(a)};b.correctPasscodeEntered=function(a){this.deferred=new(d("WAResolvable").Resolvable)(),d("WAWebCmd").Cmd.correctPasscodeLockScreen(a),d("WAWebModalManager").ModalManager.close()};return a}();e=new c();function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebUserPrefsInfoStore").waNoiseInfo.cachedPasscodeDerivedKey==null){d("WALogger").WARN(h()).sendLogs("[screeen-lock] passcode derived key is null when trying to encrypt");location.reload();return}var a=d("WAComms").getComms();if(a==null){location.reload();return}var c=b("WAWebChatCollection");c=c.ChatCollection;c=c.getActive();c&&d("WAWebCmd").Cmd.closeChat(c);c=b("WAWebMsgCollection");c=c.MsgCollection;yield c.encryptAndClearModels();d("WAWebUserPrefsInfoStore").waNoiseInfo.resetCachedPasscodeDerivedKey();d("WAWebDbEncryptionKey").DbEncKeyStore.deleteKeyCache();d("WAWebDbEncryptionKey").DbEncKeyStore.resetDB();if(a.softCloseSocket)a.softCloseSocket();else{location.reload();return}yield d("WAWebCryptoEncKeyHelper").initEncSalt();a.socketLoop.start()});return i.apply(this,arguments)}g.LockScreenResolvable=e;g.lockScreenAndTriggerUnlockFlow=a}),98);
__d("WAArrayMoveToFirst",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c,d=!1;for(c=0;c<a.length;c++)if(a[c]===b){d=!0;break}if(d){b=a[c];a.splice(c,1);a.unshift(b)}}f["default"]=a}),66);
__d("WAReplaceRepeatingWhitespace",[],(function(a,b,c,d,e,f){"use strict";var g="\xa0";function a(a,b){var c=function(a){var c="";for(var d=0;d<a.length;d++){var e=b===!0&&a[d]==="\n";c+=e?"\n":g}return c};return/\s\s+/.test(a)?a.replace(/\s\s+/g,c):a}f["default"]=a}),66);
__d("WAWebChatAssignmentIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="chat-assignment";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=16;m=20;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 20 16",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M12.7 7.9998C14.7 7.9998 16.3 6.3998 16.3 4.3998C16.3 2.3998 14.7 0.799805 12.7 0.799805C10.7 0.799805 9.1 2.3998 9.1 4.3998C9.1 6.3998 10.7 7.9998 12.7 7.9998ZM12.7 9.7998C10.3 9.7998 5.5 10.9998 5.5 13.3998V15.1998H20V13.3998C19.9 10.9998 15.1 9.7998 12.7 9.7998Z",fill:"currentColor"}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.09961 8.06427H0.0996094V6.25781H7.09961V8.06427Z",fill:"currentColor"}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.85521 7.11619L3.51172 4.7727L4.77368 3.51074L8.37912 7.11619L4.77368 10.7216L3.51172 9.45968L5.85521 7.11619Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.ChatAssignmentIcon=a}),98);
__d("WAWebLiftMeUpGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return Boolean(d("WAWebABProps").getABPropConfigValue("lift_me_up_m1"))}g.elevateLiftMeUpEnabled=a}),98);
__d("WAWebSvgButton.react",["WAWebUnstyledButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={disabled:{opacity:"x5dmra7",$$css:!0}};function a(a){var b=a.Icon,d=a.disabled,e=a.onClick,f=a.type,g=a.title,h=a["aria-label"],k=a.dataTab,l=a.className_DONOTUSE,m=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["Icon","disabled","onClick","type","title","aria-label","dataTab","className_DONOTUSE","xstyle"]);return i.jsx(c("WAWebUnstyledButton.react"),{xstyle:m,disabled:d,onClick:e,"aria-label":h,title:g,dataTab:k,className_DONOTUSE:l,type:f,children:i.jsx(b,babelHelpers["extends"]({},a,{xstyle:d===!0&&j.disabled}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebName.react",["fbt","WAArrayMoveToFirst","WALogger","WAReplaceRepeatingWhitespace","WAWebABProps","WAWebChatAssignmentIcon","WAWebChatContactUtils","WAWebClassnames","WAWebClientFeatureFlags","WAWebCmd","WAWebContactGetters","WAWebElevatedPushNamesFlag","WAWebEmojiText.react","WAWebFormatConfiguration","WAWebFrontendContactGetters","WAWebGroupType","WAWebLabels.react","WAWebLiftMeUpGatingUtils","WAWebMiscGatingUtils","WAWebName.scss","WAWebNewsletterName.react","WAWebParticipantListUtils","WAWebPsaVerifiedBlueIcon","WAWebPsaVerifiedIcon","WAWebSvgButton.react","WAWebUserPrefsMeUser","WAWebWamEnumOppositeVisibleIdentificationType","gkx","react","stylex","useWAWebContactValues","useWAWebEventTargetValue","useWAWebForceUpdate","useWAWebListener","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["displayName:",",\n               formattedName:",",\n               name:",",\n               formattedShortName:",",\n               formattedUser:",""]);k=function(){return a};return a}var l=i||c("react"),m={spaceBefore:{"::before_content":"xjuopq5","::before_whiteSpace":"xulcptl",$$css:!0}},n=function(a){var b=a.contact,c=a.showNotifyName,e=a.elevatedPushNamesEnabled,f=a.elevatedLiftMeUpEnabled,g=a.useDisplayName,i=a.useShortName,j=a.useVerifiedName,k=a.you;a=a.showMessageYourselfName;var l=d("WAWebElevatedPushNamesFlag").pushNameCanBeUsed(b)&&e;f=d("WAWebLiftMeUpGatingUtils").elevateLiftMeUpEnabled()&&f;if(a&&d("WAWebContactGetters").getIsMe(b)){return{displayName:h._("__JHASH__-h0nmVG_H_G__JHASH__",[h._param("nameOrPhoneNumber",j?b.verifiedName:(a=b.name)!=null?a:d("WAWebFrontendContactGetters").getFormattedPhone(b))])}}a=d("WAWebFrontendContactGetters").getDisplayName(b);var m=d("WAWebContactGetters").getPushname(b);if(g&&a){g=d("WAWebFrontendContactGetters").getDisplayNameType(b);return g===d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER&&f===!0&&m!=null?{displayName:"~"+m}:{displayName:a}}if(i&&!l&&d("WAWebFrontendContactGetters").getFormattedShortName(b))return{displayName:d("WAWebFrontendContactGetters").getFormattedShortName(b)};if(j&&b.verifiedName)return{displayName:b.verifiedName};if(k&&d("WAWebContactGetters").getIsMe(b))return{displayName:d("WAWebFrontendContactGetters").getFormattedName(b)};a=d("WAWebContactGetters").getNotifyName(b);if(c&&l&&a!=null)return{displayName:e?d("WAWebChatContactUtils").getFormattedNotifyName(a):"~"+a,displayNameAriaLabel:d("WAWebABProps").getABPropConfigValue("elevated_push_names_v2_m2_enabled")?d("WAWebChatContactUtils").getAccessibleNotifyName(a):void 0};g=d("WAWebFrontendContactGetters").getFormattedUserAndType(b).type;return g===d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER&&f===!0&&m!=null?{displayName:"~"+m}:{displayName:d("WAWebFrontendContactGetters").getFormattedUser(b)}},o=function(a){var b=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId();if(a.some(function(a){return a.deviceId===b})){var e=h._("__JHASH__sM300gCBSuH__JHASH__");e=l.jsx(d("WAWebChatAssignmentIcon").ChatAssignmentIcon,{width:18,height:12,className_DONOTUSE:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebName.scss").chatAssignmentIcon,c("WAWebName.scss").chatAssignmentIconAssignedToYou),title:e})}else if(a.length>0){a=h._("__JHASH__hEmHbdMvv9N__JHASH__",[h._param("agentName",a[0].name)]);e=l.jsx(d("WAWebChatAssignmentIcon").ChatAssignmentIcon,{width:18,height:12,className_DONOTUSE:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebName.scss").chatAssignmentIcon,c("WAWebName.scss").chatAssignmentIconAssignedToOthers),title:a})}else e=null;return e};function p(a){var b=a.contact,e=a.element;e=e===void 0?"span":e;var f=a.highlightText,g=a.titlify,i=a.ellipsify,j=a.breakWord,p=a.you;p=p===void 0?!1:p;var q=a.selectable,r=a.useShortName;r=r===void 0?!1:r;var s=a.useDisplayName;s=s===void 0?!1:s;var t=a.onClick,u=a.showLabel,v=a.showBusinessCheckmark,w=a.showNotifyName;w=w===void 0?!1:w;var x=a.elevatedPushNamesEnabled;x=x===void 0?!1:x;var y=a.elevatedLiftMeUpEnabled;y=y===void 0?!1:y;var z=a.useVerifiedName;z=z===void 0?!1:z;var A=a.firstLabel,B=a.xstyle,C=a.showChatAssignmentIcon;C=C===void 0?!1:C;var D=a.assignedAgents;D=D===void 0?[]:D;var E=a.skipCheckMark;E=E===void 0?!1:E;var F=a.showMessageYourselfName;F=F===void 0?!1:F;var G=a.testid;G=a.isVerifiedNewsletter;var H=a.makeCheckmarkClickable;H=H===void 0?!1:H;var I=a.checkmarkLarge;I=I===void 0?!1:I;var J=d("useWAWebContactValues").useContactValues(b.id,[d("WAWebContactGetters").getIsPSA,d("WAWebContactGetters").getIsIAS,d("WAWebContactGetters").getIsCAPISupportAccount,d("WAWebFrontendContactGetters").getFormattedUser,d("WAWebFrontendContactGetters").getFormattedName,d("WAWebFrontendContactGetters").getFormattedShortName,d("WAWebFrontendContactGetters").getFormattedPhone,d("WAWebFrontendContactGetters").getDisplayName,d("WAWebContactGetters").getLabels,d("WAWebContactGetters").getName,d("WAWebContactGetters").getNotifyName,d("WAWebContactGetters").getIsMe,d("WAWebContactGetters").getVerifiedName,d("WAWebContactGetters").getId]),K=J[0],L=J[1],M=J[2],N=J[3],O=J[4],P=J[5];J[6];J[7];var Q=J[8],R=J[9];J[10];J[11];J[12];var S=J[13],T;f!=null&&f!==""&&(T=d("WAWebFormatConfiguration").SearchName({terms:[f]}));J=n({contact:b,showNotifyName:w,elevatedPushNamesEnabled:x,elevatedLiftMeUpEnabled:y,useDisplayName:s,useShortName:r,useVerifiedName:z,you:p,showMessageYourselfName:F});f=J.displayName;b=J.displayNameAriaLabel;w=c("useWAWebEventTargetValue")(d("WAWebCmd").Cmd,"toggle_lid_debug_badge",function(){return!c("gkx")("26258")&&d("WAWebClientFeatureFlags").isFeatureEnabled("lid_debug")&&S.isLid()});if(!f){d("WALogger").ERROR(k(),f,O,R,P,N).sendLogs("display name is null or undefined");return""}x=l.jsxs(l.Fragment,{children:[l.jsx(d("WAWebEmojiText.react").EmojiText,{text:c("WAReplaceRepeatingWhitespace")(f.toString()),ariaLabel:b!=null?c("WAReplaceRepeatingWhitespace")(b.toString()):void 0,element:e,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(null,a.className),formatters:T,titlify:g,ellipsify:i,breakWord:j,direction:"auto",selectable:q,inlineblock:!0,onClick:t,xstyle:B,testid:void 0}),F&&l.jsx(d("WAWebEmojiText.react").EmojiText,{testid:void 0,text:h._("__JHASH__d2gbT47C9l7__JHASH__"),xstyle:m.spaceBefore}),w?l.jsx("span",{className:c("WAWebName.scss").lidDebugLabel,children:"LID"}):null]});y=a.labels||Q;(y==null?void 0:y.length)&&A!=null&&c("WAArrayMoveToFirst")(y,A);s=u===!0&&(y==null?void 0:y.length)?l.jsx(d("WAWebLabels.react").Labels,{labels:y,showName:!1}):null;r=!E&&(K||L||M||Boolean(v)||G);z=C?o(D):null;if(r===!0){if(d("WAWebMiscGatingUtils").isBlueEnabled()){p=I?24:20;J=H&&t?l.jsx(c("WAWebSvgButton.react"),{height:p,width:p,Icon:d("WAWebPsaVerifiedBlueIcon").PsaVerifiedBlueIcon,"aria-label":h._("__JHASH__Q01S-11A5Bz__JHASH__"),onClick:t}):l.jsx(d("WAWebPsaVerifiedBlueIcon").PsaVerifiedBlueIcon,{height:p,width:p})}else J=l.jsx(d("WAWebPsaVerifiedIcon").PsaVerifiedIcon,{});return l.jsxs("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebName.scss").verified,c("WAWebName.scss").disableGrow),children:[x,l.jsx("div",{className:G===!0?c("WAWebName.scss").newsletterIcon:c("WAWebName.scss").icon,children:J}),l.jsxs("div",{className:c("WAWebName.scss").labels,children:[z,s]})]})}if(z||s){return l.jsxs("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((O={},O[c("WAWebName.scss").verified]=!0,O[c("WAWebName.scss").hasLabels]=!!s&&!F,O)),children:[x,l.jsxs("div",{className:c("WAWebName.scss").labels,children:[z,s]})]})}return l.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebName.scss").disableGrow,c("WAWebName.scss").verified),children:x})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.element,e=a.highlightText,f=a.titlify,g=a.ellipsify,i=a.breakWord,j=a.onClick,k=a.showLabel,m=a.firstLabel,n=a.className,p=a.xstyle,q=a.showChatAssignmentIcon;q=q===void 0?!1:q;var r=a.assignedAgents;r=r===void 0?[]:r;var s=a.testid;s=a.overrideCommunityAnnouncementGroupName;s=s===void 0?!1:s;var t=a.checkmarkLarge;t=t===void 0?!1:t;var u,v=d("useWAWebModelValues").useModelValues(a.chat,["formattedTitle","labels"]),w=d("useWAWebModelValues").useModelValues(a.groupMetadata,["support","isUnnamed","participants","groupType"]),x=c("useWAWebForceUpdate")();d("useWAWebListener").useListener(w.participants,"bulk_add bulk_remove reset sort change:isAdmin change:isSuperAdmin remove add",x);e!=null&&e!==""&&(u=d("WAWebFormatConfiguration").SearchName({terms:[e]}));x=a.labels||v.labels;(x==null?void 0:x.length)&&m!=null&&c("WAArrayMoveToFirst")(x,m);e=k===!0&&(x==null?void 0:x.length)?l.jsx(d("WAWebLabels.react").Labels,{labels:x,showName:!1}):null;a=s&&w.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?h._("__JHASH__x2ZQLkFbyM5__JHASH__"):c("WAReplaceRepeatingWhitespace")((w==null?void 0:w.isUnnamed)&&d("WAWebABProps").getABPropConfigValue("ugr_enabled")?d("WAWebParticipantListUtils").calculateUnnamedGroupFullParticipantsList(w,!0):v.title());m=l.jsx(d("WAWebEmojiText.react").EmojiText,{text:a,element:b,className:n,xstyle:p,formatters:u,titlify:f,ellipsify:g,breakWord:i,direction:"auto",inlineblock:!0,onClick:j,testid:void 0});k=w.support;if(k){x=t?24:20;return l.jsxs("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((s={},s[c("WAWebName.scss").verified]=!0,s[c("WAWebName.scss").hasLabels]=!!e,s)),children:[m,l.jsx("div",{className:c("WAWebName.scss").icon,children:d("WAWebMiscGatingUtils").isBlueEnabled()?l.jsx(d("WAWebPsaVerifiedBlueIcon").PsaVerifiedBlueIcon,{width:x,height:x}):l.jsx(d("WAWebPsaVerifiedIcon").PsaVerifiedIcon,{})}),l.jsx("div",{className:c("WAWebName.scss").labels,children:e})]})}v=q?o(r):null;return v||e?l.jsxs("span",{className:c("WAWebName.scss").hasLabels,children:[l.jsx("span",{className:"x1c4vz4f",children:m}),l.jsxs("div",{className:c("WAWebName.scss").labels,children:[v,e]})]}):m}q.displayName=q.name+" [from "+f.id+"]";function r(a){if(a.chat&&!a.chat.isUser&&!a.chat.isNewsletter){var b=a.chat,c=babelHelpers.objectWithoutPropertiesLoose(a,["chat"]);return l.jsx(q,babelHelpers["extends"]({chat:b,groupMetadata:b.groupMetadata},c))}if(a.chat&&!a.chat.isUser&&a.chat.isNewsletter){b=a.chat;c=babelHelpers.objectWithoutPropertiesLoose(a,["chat"]);return l.jsx(d("WAWebNewsletterName.react").NewsletterName,babelHelpers["extends"]({chat:b},c))}if(a.chat){b=a.chat;c=babelHelpers.objectWithoutPropertiesLoose(a,["chat"]);b=b.contact;c=c}else{var e=a.contact;a=babelHelpers.objectWithoutPropertiesLoose(a,["contact"]);b=e;c=a}return l.jsx(p,babelHelpers["extends"]({contact:b},c))}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.chat,d=a.contact;a=a.xstyle;return l.jsxs("span",{className:(j||(j=c("stylex")))(a),children:[l.jsx(r,{contact:d,useShortName:Boolean(d.shortName),showNotifyName:!0,elevatedPushNamesEnabled:!0,elevatedLiftMeUpEnabled:!0}),l.jsx("span",{children:"\xa0\u2022\xa0"}),l.jsx(q,{chat:b,groupMetadata:b.groupMetadata})]})}a.displayName=a.name+" [from "+f.id+"]";g.ContactName=p;g.GroupName=q;g.Name=r;g.ContactAndGroupName=a}),226);
__d("WAWebNotificationTone",["Promise","bx"],(function(a,b,c,d,e,f,g){var h,i=new window.Audio(c("bx").getURL(c("bx")("9561")));function a(){i.play()["catch"](function(){})}function d(a){return(h||(h=b("Promise"))).resolve(a)}g.playNotification=a;g.cachePath=d}),98);
__d("WAWebBaseNotification",["Promise","WAAbortError","WALogger","WAWebMuteCollection","WAWebNotificationBanner","WAWebNotificationConstants","WAWebNotificationTone","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WABaseNotification:_closeNotification()"]);i=function(){return a};return a}a=function(){function a(){var a=this;this.closeBanner=function(){a.notificationBanner!=null&&(d("WALogger").LOG(i()),a.notificationBanner.close())}}var e=a.prototype;e.shouldPlaySound=function(){return d("WAWebMuteCollection").MuteCollection.getGlobalSounds()};e.shouldMute=function(){return!1};e.shouldShowBanner=function(){return window.Notification&&window.Notification.permission===d("WAWebNotificationConstants").PERMISSION_ALLOWED&&d("WAWebMuteCollection").MuteCollection.getGlobalNotifications()};e.shouldSquelch=function(){return!1};e.buildKey=function(){throw c("err")("WABaseNotification: must implement `buildKey` method")};e.getBannerOptions=function(){throw c("err")("WABaseNotification: must implement `getBannerOptions` method")};e.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw c("err")("WABaseNotification: must implement `getIcon` method")});function d(){return a.apply(this,arguments)}return d}();e.matchesChat=function(a){return!1};e.beforeBannerShown=function(){return(h||(h=b("Promise"))).resolve()};e.afterBannerShown=function(a){};e.getChatKind=function(){throw c("err")("WABaseNotification: must implement `getChatKind` method")};e.performLogging=function(){};e.triggerNotification=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(yield this.shouldMute())throw new(d("WAAbortError").AbortError)("Notification muted");if(yield this.shouldSquelch())throw new(d("WAAbortError").AbortError)("Notification squelched");var a;(yield this.shouldShowBanner())&&(yield this.beforeBannerShown(),a=(yield this.showBanner()),this.afterBannerShown(a),this.performLogging());(yield this.shouldPlaySound())&&this.playSound();return a});function c(){return a.apply(this,arguments)}return c}();e.showBanner=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.abortController=new AbortController();var a=this.getBannerOptions(),b=(yield this.getIcon());if(this.abortController.signal.aborted)throw new(d("WAAbortError").AbortError)("Aborted through abortController");if(window.Notification.permission!==d("WAWebNotificationConstants").PERMISSION_ALLOWED)throw new(d("WAAbortError").AbortError)("Permission Denied");a=new(c("WAWebNotificationBanner"))(babelHelpers["extends"]({},a,{icon:b}));this.notificationBanner=a;return a});function e(){return a.apply(this,arguments)}return e}();e.playSound=function(){d("WAWebNotificationTone").playNotification()};return a}();g.WABaseNotification=a}),98);
__d("WAWebBaseNotificationBanner",["Promise","WALogger","WATypeUtils","WAWebChatCollection","WAWebChatEntryPoint","WAWebChatMessageSearch","WAWebCmd","WAWebCommunityGatingUtils","WAWebComposeBoxActions","WAWebGroupType","WAWebL10N","WAWebModalManager","WAWebMsgCollection","WAWebMsgType","WAWebNewsletterCollection"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to create notification: ",":",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["native notification close"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["native notification error"]);k=function(){return a};return a}a=function(){function a(a,e,f,g){var l=this;this.close=function(){l.notification&&l.$5().then(function(){l.notification&&d("WATypeUtils").isFunction(l.notification.close)&&l.notification.close()})["catch"](function(){})};this.$3=function(){l.waitingPromise.resolver(),window.removeEventListener("beforeunload",l.close),l.notification&&(l.notification.removeEventListener("click",l.$2),l.notification.removeEventListener("close",l.$3)),l.msg&&l.msg.off("change:type",l.$4)};this.$2=function(){l.$1==null?void 0:l.$1();window.focus();var a=l.chat,b=l.msg,c=l.doNotOpenChat==null?!1:l.doNotOpenChat;if(!a)return;if(!c){var e;c=b&&b!==a.msgs.last()?d("WAWebChatMessageSearch").getSearchContext(a,b):void 0;if(d("WAWebCommunityGatingUtils").communitiesEnabled()&&((e=a.groupMetadata)==null?void 0:e.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&((e=a.groupMetadata)==null?void 0:e.parentGroup)&&b!=null&&(b.subtype===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE||b.subtype===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE)){d("WAWebCmd").Cmd.openCommunityHome((e=a.groupMetadata)==null?void 0:e.parentGroup)}else d("WAWebCmd").Cmd.openChatAt(a,c,d("WAWebChatEntryPoint").ChatEntryPoint.Notification).then(function(b){b&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)})}d("WAWebModalManager").ModalManager.closeMedia();l.close()};this.$4=function(){if(!l.msg||l.msg.type!==d("WAWebMsgType").MSG_TYPE.REVOKED)return;l.close()};this.msg=e!=null?d("WAWebMsgCollection").MsgCollection.get(e):null;this.chat=(e=d("WAWebChatCollection").ChatCollection.get(a))!=null?e:c("WAWebNewsletterCollection").get(a);this.tag=f;this.$1=g.onClick;this.canBlock=g.canBlock;this.doNotOpenChat=g.doNotOpenChat;e=new(h||(h=b("Promise")))(function(a){l.waitingPromise={resolver:a}});this.waitingPromise.promise=e;a=g.title;e=g.notification;var m=g.renotify;g=babelHelpers.objectWithoutPropertiesLoose(g,["title","notification","renotify"]);g.body&&g.body.charCodeAt(0)>=128&&(g.body=" "+g.body);try{m=babelHelpers["extends"]({tag:f,renotify:(m=m)!=null?m:Boolean(f),dir:"auto",lang:c("WAWebL10N").getNormalizedLocale(),silent:!0},g);this.notification=new e(a,m);this.notification.addEventListener("error",function(a){d("WALogger").LOG(k()).devConsole(a)});this.notification.addEventListener("close",function(a){d("WALogger").LOG(j()).devConsole(a)});this.notification.addEventListener("click",this.$2);this.notification.addEventListener("close",this.$3);this.msg&&this.msg.on("change:type",this.$4);window.addEventListener("beforeunload",this.close)}catch(a){d("WALogger").LOG(i(),a.name,a.message).devConsole(a),this.waitingPromise.resolver()}}var e=a.prototype;e.$5=function(){return(h||(h=b("Promise"))).resolve()};e.waitForClose=function(){return this.waitingPromise.promise};e.detach=function(){this.$3()};return a}();g["default"]=a}),98);
__d("WAWebCurrencyData",[],(function(a,b,c,d,e,f){a="USD";b=2;c={ADP:0,AFN:0,ALL:0,BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,ESP:0,GNF:0,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MRO:0,OMR:3,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};d={AC:["SHP"],AD:["EUR"],AE:["AED"],AF:["AFN"],AG:["XCD"],AI:["XCD"],AL:["ALL"],AM:["AMD"],AO:["AOA"],AR:["ARS"],AS:["USD"],AT:["EUR"],AU:["AUD"],AW:["AWG"],AX:["EUR"],AZ:["AZN"],BA:["BAM"],BB:["BBD"],BD:["BDT"],BE:["EUR"],BF:["XOF"],BG:["BGN"],BH:["BHD"],BI:["BIF"],BJ:["XOF"],BL:["EUR"],BM:["BMD"],BN:["BND"],BO:["BOB"],BQ:["USD"],BR:["BRL"],BS:["BSD"],BT:["BTN","INR"],BV:["NOK"],BW:["BWP"],BY:["BYN"],BZ:["BZD"],CA:["CAD"],CC:["AUD"],CD:["CDF"],CF:["XAF"],CG:["XAF"],CH:["CHF"],CI:["XOF"],CK:["NZD"],CL:["CLP"],CM:["XAF"],CN:["CNY"],CO:["COP"],CR:["CRC"],CU:["CUP","CUC"],CV:["CVE"],CW:["ANG"],CX:["AUD"],CY:["EUR"],CZ:["CZK"],DE:["EUR"],DG:["USD"],DJ:["DJF"],DK:["DKK"],DM:["XCD"],DO:["DOP"],DZ:["DZD"],EA:["EUR"],EC:["USD"],EE:["EUR"],EG:["EGP"],EH:["MAD"],ER:["ERN"],ES:["EUR"],ET:["ETB"],EU:["EUR"],FI:["EUR"],FJ:["FJD"],FK:["FKP"],FM:["USD"],FO:["DKK"],FR:["EUR"],GA:["XAF"],GB:["GBP"],GD:["XCD"],GE:["GEL"],GF:["EUR"],GG:["GBP"],GH:["GHS"],GI:["GIP"],GL:["DKK"],GM:["GMD"],GN:["GNF"],GP:["EUR"],GQ:["XAF"],GR:["EUR"],GS:["GBP"],GT:["GTQ"],GU:["USD"],GW:["XOF"],GY:["GYD"],HK:["HKD"],HM:["AUD"],HN:["HNL"],HR:["HRK"],HT:["HTG","USD"],HU:["HUF"],IC:["EUR"],ID:["IDR"],IE:["EUR"],IL:["ILS"],IM:["GBP"],IN:["INR"],IO:["USD"],IQ:["IQD"],IR:["IRR"],IS:["ISK"],IT:["EUR"],JE:["GBP"],JM:["JMD"],JO:["JOD"],JP:["JPY"],KE:["KES"],KG:["KGS"],KH:["KHR"],KI:["AUD"],KM:["KMF"],KN:["XCD"],KP:["KPW"],KR:["KRW"],KW:["KWD"],KY:["KYD"],KZ:["KZT"],LA:["LAK"],LB:["LBP"],LC:["XCD"],LI:["CHF"],LK:["LKR"],LR:["LRD"],LS:["ZAR","LSL"],LT:["EUR"],LU:["EUR"],LV:["EUR"],LY:["LYD"],MA:["MAD"],MC:["EUR"],MD:["MDL"],ME:["EUR"],MF:["EUR"],MG:["MGA"],MH:["USD"],MK:["MKD"],ML:["XOF"],MM:["MMK"],MN:["MNT"],MO:["MOP"],MP:["USD"],MQ:["EUR"],MR:["MRU"],MS:["XCD"],MT:["EUR"],MU:["MUR"],MV:["MVR"],MW:["MWK"],MX:["MXN"],MY:["MYR"],MZ:["MZN"],NA:["NAD","ZAR"],NC:["XPF"],NE:["XOF"],NF:["AUD"],NG:["NGN"],NI:["NIO"],NL:["EUR"],NO:["NOK"],NP:["NPR"],NR:["AUD"],NU:["NZD"],NZ:["NZD"],OM:["OMR"],PA:["PAB","USD"],PE:["PEN"],PF:["XPF"],PG:["PGK"],PH:["PHP"],PK:["PKR"],PL:["PLN"],PM:["EUR"],PN:["NZD"],PR:["USD"],PS:["ILS","JOD"],PT:["EUR"],PW:["USD"],PY:["PYG"],QA:["QAR"],RE:["EUR"],RO:["RON"],RS:["RSD"],RU:["RUB"],RW:["RWF"],SA:["SAR"],SB:["SBD"],SC:["SCR"],SD:["SDG"],SE:["SEK"],SG:["SGD"],SH:["SHP"],SI:["EUR"],SJ:["NOK"],SK:["EUR"],SL:["SLL"],SM:["EUR"],SN:["XOF"],SO:["SOS"],SR:["SRD"],SS:["SSP"],ST:["STN"],SV:["USD"],SX:["ANG"],SY:["SYP"],SZ:["SZL"],TA:["GBP"],TC:["USD"],TD:["XAF"],TF:["EUR"],TG:["XOF"],TH:["THB"],TJ:["TJS"],TK:["NZD"],TL:["USD"],TM:["TMT"],TN:["TND"],TO:["TOP"],TR:["TRY"],TT:["TTD"],TV:["AUD"],TW:["TWD"],TZ:["TZS"],UA:["UAH"],UG:["UGX"],UM:["USD"],US:["USD"],UY:["UYU"],UZ:["UZS"],VA:["EUR"],VC:["XCD"],VE:["VES"],VG:["USD"],VI:["USD"],VN:["VND"],VU:["VUV"],WF:["XPF"],WS:["WST"],XK:["EUR"],YE:["YER"],YT:["EUR"],ZA:["ZAR"],ZM:["ZMW"],ZW:["USD"]};f.DEFAULT_CURRENCY=a;f.DEFAULT_DIGITS=b;f.CURRENCY_DIGITS=c;f.REGION_TO_CURRENCY=d}),66);
__d("WAWebCurrencyUtils",["WAWebCurrencyData","WAWebL10N"],(function(a,b,c,d,e,f,g){var h={IDR:"in-ID",MXN:"es-MX",INR:"en-IN"},i=new Set(["DZD","ARS","AUD","BDT","BOB","BRL","GBP","CAD","CLP","CNY","COP","CRC","CZK","DKK","EGP","EUR","GTQ","HNL","HKD","HUF","ISK","INR","IDR","ILS","JPY","KES","KRW","MOP","MYR","MXN","NZD","NIO","NGN","NOK","PKR","PYG","PEN","PHP","PLN","QAR","RON","RUB","SAR","SGD","ZAR","SEK","CHF","TWD","THB","TRY","AED","USD","UYU","VEF","VND"]),j=["es-ES","pt-BR"],k=function(){var a;return[(a=c("WAWebL10N")).getFullLocale(),a.normalizeLocaleToBcp47Compliant(a.getNormalizedLocale()),a.normalizeLocaleToBcp47Compliant(a.getLocale())].filter(Boolean)},l=function(a,b,c,d){d===void 0&&(d=k());var e="symbol";j.includes(Array.isArray(d)?d[0]:d)&&(e="code");return new Intl.NumberFormat(d,babelHelpers["extends"]({style:"currency",currency:a,currencyDisplay:e},c)).format(b)},m=function(a,b,c,d){return l(a,b/1e3,c,d)};function n(a){return new Intl.NumberFormat(a).format(1.1).substring(1,2)}function o(a){return new Intl.NumberFormat(a).format(1e4).substring(2,3)}function p(a,b){b=m(b,0,{},a);return b.replace(/\d+([,.]\d+)?/g,"").trim()}function a(a,b){var c=k(),d=n(c);c=p(c,a);a=m(a,b);b=a.replace(c,"").trim();a=b.indexOf(d);d=a===-1?b:b.substring(0,a);b=a===-1?"":b.substring(a);return{symbol:c,integer:d,decimal:b}}function b(a){return p(h[a],a)}function q(a,b){var c=k();a=p(c,a);var d=o(c);c=n(c);return r(b,a,c,d)}function r(a,b,c,d){a=a.replace(b,"").trim();b=a.split(d).join("");a=parseFloat(b.replace(c,".")||"0");return Math.round(a*1e3)}function e(a,b,c,e){var f=k(),g=d("WAWebCurrencyData").CURRENCY_DIGITS[a]!==void 0?d("WAWebCurrencyData").CURRENCY_DIGITS[a]:d("WAWebCurrencyData").DEFAULT_DIGITS;a=q(a,b);if(c!=null&&a<c)return!1;if(e!=null&&a>e)return!1;c=b.replace(/\D+$/g,"");e=n(f);return Number.isNaN(a)||c!==b||(b.split(e)[1]||"").length>g?!1:!0}function f(a){a=d("WAWebCurrencyData").REGION_TO_CURRENCY[a.toUpperCase()];return(a==null?void 0:a.length)>0?a[0]:d("WAWebCurrencyData").DEFAULT_CURRENCY}function s(a){return i.has(a)}g.formatAmount=l;g.formatAmount1000=m;g.formatAmount1000ToParts=a;g.formatLocalSymbol=b;g.valueFromString=q;g.parseValueFromString=r;g.validatePriceString=e;g.currencyForCountryShortcode=f;g.isSupportedCurrency=s}),98);
__d("WAWebBizFormatInteractiveMsg",["fbt","WAWebBizOrderDetailsParams","WAWebBrazilPixKeyFormattingUtils","WAWebCurrencyUtils","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebOrderDetails","WAWebOrderPaymentStatus","WAWebOrderStatus","WAWebUserPrefsTypes"],(function(a,b,c,d,e,f,g,h){function a(a,b){b=b===void 0?{}:b;b=b.formatAsSearchResult;b=b===void 0?!1:b;if(a.interactiveType===c("WAWebInteractiveMessageType").SHOPS_STOREFRONT){var d;return a.caption||((d=a.interactiveHeader)==null?void 0:d.title)||""}if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS){d=j(a);if(d!=null)return d}if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS){d=i(a);if(d!=null)return d}return[(d=a.interactiveHeader)==null?void 0:d.title,b?(d=a.interactiveHeader)==null?void 0:d.subtitle:null,a.caption,a.footer].filter(Boolean).join("\n")}function i(a){var b=d("WAWebOrderStatus").getOrderStatusInfo(a);return b==null?null:k(a.caption,b==null?void 0:b.status).toString()}function j(a){a=d("WAWebOrderDetails").getOrderInfo(a);if(a==null)return null;if((a==null?void 0:a.buttonName)==="payment_info"){var b,c,e=a==null?void 0:a.paymentSettings,f=h._("__JHASH___XgDbJVZXGG__JHASH__");e=e==null?void 0:(e=e.at(0))==null?void 0:e[d("WAWebBizOrderDetailsParams").PaymentSettingType.PIX_STATIC_CODE];b=(b=e==null?void 0:e.merchant_name)!=null?b:"";c=(c=e==null?void 0:e.key)!=null?c:"";e=d("WAWebUserPrefsTypes").PixKeyType.cast(e==null?void 0:e.key_type);return b+" \xb7 "+f.toString()+": "+d("WAWebBrazilPixKeyFormattingUtils").getFormattedPixKey(c,e)}b=a.items;f=a.totalAmount;c=a.currency;e=d("WAWebCurrencyUtils").formatAmount(c,f);return b[0].name+" \xb7 "+e}function b(a){var b=d("WAWebOrderPaymentStatus").getOrderPaymentStatusInfoFromNativeFlow(a);return b==null?null:l(a.caption,b==null?void 0:b.paymentStatus).toString()}function e(a){a=d("WAWebOrderPaymentStatus").getOrderPaymentStatusInfoFromNativeFlow(a);return a==null?null:m(a==null?void 0:a.paymentMethod)}function k(a,b){var c="";switch(b){case d("WAWebOrderStatus").OrderStatus.Pending:c=h._("__JHASH__OpL-aF0LLcb__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.Canceled:c=h._("__JHASH__dqN1P-hqsi6__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:c=h._("__JHASH__Nbl2ZE8xWFn__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.Complete:c=h._("__JHASH__zA9ReI3u5Xz__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.Shipped:c=h._("__JHASH__Lw8VF_1QtMD__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.Processing:c=h._("__JHASH__i_iQoqv0lPL__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.PaymentRequested:c=h._("__JHASH__CuEbmuWb8zo__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.PreparingToShip:c=h._("__JHASH__kpqX7FPe2Vn__JHASH__");break;case d("WAWebOrderStatus").OrderStatus.Delivered:c=h._("__JHASH__Jo9QLUZOC5h__JHASH__");break}return(a==null?void 0:a.toLowerCase().includes(c.toString().toLowerCase()))?a||"":(c.toString()+"\n"+(a||"")).trim()}function l(a,b){var c="";switch(b){case d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:c=h._("__JHASH__49YJI4vNJ_l__JHASH__");break;case d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending:c=h._("__JHASH__Fsk-E3whq3c__JHASH__");break}return(c.toString()+"\n"+((b=a)!=null?b:"")).trim()}function m(a){var b="";switch(a){case d("WAWebOrderPaymentStatus").OrderPaymentMethod.PaymentInstruction:b=h._("__JHASH__TCKi2aJ0-Ul__JHASH__");break;case d("WAWebOrderPaymentStatus").OrderPaymentMethod.Confirm:b=h._("__JHASH__jjxgeWmztWN__JHASH__");break}return b.toString()}g.formatInteractive=a;g.formatOrderStatusMessage=i;g.formatOrderDetailsMessagePreview=j;g.formatOrderPaymentStatusMessage=b;g.formatOrderPaymentMethodMessage=e;g.appendPrefilledMsg=k;g.appendPrefilledOrderPaymentMsg=l;g.appendPrefilledOrderPaymentMethodMsg=m}),226);
__d("WAWebFormatCallLog",["fbt","WAWebClock"],(function(a,b,c,d,e,f,g,h){function a(a,b){var c="";switch(a.subtype){case"miss":c=b?h._("__JHASH__ZZz60QUXmrm__JHASH__",[h._plural(d("WAWebClock").Clock.timestampHour(a.t)),h._param("time",d("WAWebClock").Clock.timestampStr(a.t))]):h._("__JHASH__GKysATqsTey__JHASH__");break;case"miss_video":c=b?h._("__JHASH__GqednRr_miP__JHASH__",[h._plural(d("WAWebClock").Clock.timestampHour(a.t)),h._param("time",d("WAWebClock").Clock.timestampStr(a.t))]):h._("__JHASH__lEnYTT1STey__JHASH__");break;case"miss_group":c=b?h._("__JHASH__70AtFDDkvmx__JHASH__",[h._plural(d("WAWebClock").Clock.timestampHour(a.t)),h._param("time",d("WAWebClock").Clock.timestampStr(a.t))]):h._("__JHASH__SNq-D-RGESz__JHASH__");break;case"miss_group_video":c=b?h._("__JHASH__Oe7NAOEoDbv__JHASH__",[h._plural(d("WAWebClock").Clock.timestampHour(a.t)),h._param("time",d("WAWebClock").Clock.timestampStr(a.t))]):h._("__JHASH__x_gFD2CUvWw__JHASH__");break;case"silence":c=b?h._("__JHASH__j6hMlZVOkon__JHASH__",[h._param("time",d("WAWebClock").Clock.timestampStr(a.t))]):h._("__JHASH__pNEyT-bARXr__JHASH__");break}return c}g["default"]=a}),226);
__d("WAWebFormatEventDateString",["fbt","WATimeUtils","WAWeb-moment"],(function(a,b,c,d,e,f,g,h){var i="h:mm A";function a(a){var b,e=(b=d("WATimeUtils")).unixTime(),f=b.castToUnixTime(a);a=c("WAWeb-moment").unix(a);b=b.sameDay(b.castToUnixTime(c("WAWeb-moment")().subtract(1,"day").unix()),f);if(b)return h._("__JHASH__5H0SCmbtFvw__JHASH__",[h._param("time",a.format(i))]);b=d("WATimeUtils").sameDay(e,f);if(b)return h._("__JHASH__KKAM4ArJfvP__JHASH__",[h._param("time",a.format(i))]);e=d("WATimeUtils").sameDay(d("WATimeUtils").castToUnixTime(c("WAWeb-moment")().add(1,"day").unix()),f);if(e)return h._("__JHASH__ZpsTwb2hCl9__JHASH__",[h._param("time",a.format(i))]);b=a.isSame(c("WAWeb-moment")(),"year");return b?h._("__JHASH__CRLkz6hMFfx__JHASH__",[h._param("date",a.format("ddd, MMM D")),h._param("time",a.format(i))]):h._("__JHASH__FLfG7VPw2h1__JHASH__",[h._param("date",a.format("MMM D, YYYY")),h._param("time",a.format(i))])}g.getEventDateStringFor=a}),226);
__d("WAWebFormatNfmText",["WAWebBizFormatInteractiveMsg","WAWebInteractiveMessagesNativeFlowName"],(function(a,b,c,d,e,f,g){function h(a){if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS){var b=d("WAWebBizFormatInteractiveMsg").formatOrderStatusMessage(a);if(b!=null)return b}else if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_STATUS){b=d("WAWebBizFormatInteractiveMsg").formatOrderPaymentStatusMessage(a);if(b!=null)return b}else if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_METHOD){b=d("WAWebBizFormatInteractiveMsg").formatOrderPaymentMethodMessage(a);if(b!=null)return b}return a.caption||""}function a(a){if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS){var b=d("WAWebBizFormatInteractiveMsg").formatOrderDetailsMessagePreview(a);if(b!=null)return b}return h(a)}g.formatNFMText=h;g.formatNFMTextPreview=a}),98);
__d("WAWebFormatOversizedMsg",["fbt","WAWebUA"],(function(a,b,c,d,e,f,g,h){function a(a){return d("WAWebUA").UA.isElectron?h._("__JHASH__lWnTzONqFoj__JHASH__"):h._("__JHASH__MocuVxBIn8b__JHASH__")}function b(a){return h._("__JHASH__MocuVxBIn8b__JHASH__")}g.formatOversizedMsgText=a;g.formatOversizedMsgNotification=b}),226);
__d("WAWebFormatUnknownMsg",["fbt","WAWebMsgGetters","WAWebMsgType","WAWebUA"],(function(a,b,c,d,e,f,g,h){function i(a){return d("WAWebMsgGetters").getIsNewsletterMsg(a)?h._("__JHASH__Acq239AkZFX__JHASH__"):h._("__JHASH__oaZ0Phiq32V__JHASH__")}function j(a){return d("WAWebMsgGetters").getIsNewsletterMsg(a)?h._("__JHASH__Zi4GrAnjnxO__JHASH__"):h._("__JHASH__OwZskvMB9yV__JHASH__")}function k(a){return d("WAWebMsgGetters").getIsNewsletterMsg(a)?h._("__JHASH__jZIAi2ZlUHy__JHASH__"):h._("__JHASH__zwrV7ksXbp7__JHASH__")}function l(a){return d("WAWebMsgGetters").getIsNewsletterMsg(a)?h._("__JHASH__Ws06712SUaA__JHASH__"):h._("__JHASH__MPptqf77Oya__JHASH__")}function m(a){return d("WAWebMsgGetters").getIsSentByMe(a)?k(a):d("WAWebUA").UA.isElectron?j(a):i(a)}function a(a){if(a.futureproofType===d("WAWebMsgType").MSG_TYPE.REACTION)return d("WAWebMsgGetters").getIsSentByMe(a)?h._("__JHASH__o5lTfiX9OhA__JHASH__"):h._("__JHASH__xspkkrBTBJ6__JHASH__");else if(a.futureproofType===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.futureproofSubtype==="message_edit")return d("WAWebMsgGetters").getIsSentByMe(a)?h._("__JHASH__eF5_HBfENGd__JHASH__"):h._("__JHASH__0pRLyC3DXOZ__JHASH__");else if(a.futureproofType===d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT)return d("WAWebMsgGetters").getIsSentByMe(a)?m(a):h._("__JHASH__plXrnrgbBO1__JHASH__");else if(a.futureproofType===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE)return d("WAWebMsgGetters").getIsSentByMe(a)?h._("__JHASH__U1rdjmy6rvn__JHASH__"):h._("__JHASH__pV16elO2_HS__JHASH__");if(d("WAWebMsgGetters").getIsSentByMe(a))return m(a);switch(a.subtype){case"phone":return l(a);case"phone_only_feature":return d("WAWebUA").UA.isElectron?h._("__JHASH__Pczpsu_h2-n__JHASH__"):h._("__JHASH__e6IL6ZcJdwA__JHASH__");default:return m(a)}}function b(a){if(a.futureproofType===d("WAWebMsgType").MSG_TYPE.REACTION)return h._("__JHASH__xspkkrBTBJ6__JHASH__");switch(a.subtype){case"phone":return l(a);case"phone_only_feature":return h._("__JHASH__e6IL6ZcJdwA__JHASH__");default:return i(a)}}g.defaultFutureproofMsgText=m;g.formatUnknownMsgText=a;g.formatUnknownMsgNotification=b}),226);
__d("WAWebVcardUtils",["fbt","WATypeUtils","WAWebFbtIntlList","WAWebVcardParsingUtils","err","lodash"],(function(a,b,c,d,e,f,g,h){function a(a){var b;b=(b=a.ORG)==null?void 0:b[0];a=(a=a.TITLE)==null?void 0:a[0];if(b&&Array.isArray(b.value)&&b.value.length>0){var e=null;(a==null?void 0:a.value)&&(e=(""+a.value).trim());a=b.value;b=a[0];a=a.slice(1);a.push(b);b=c("WAWebFbtIntlList")(a.map(function(a){return d("WATypeUtils").isString(a)?a.trim():""}).filter(function(a){return a.length}),c("WAWebFbtIntlList").CONJUNCTIONS.NONE,c("WAWebFbtIntlList").DELIMITERS.COMMA).toString();return(e||"")+(((a=e)==null?void 0:a.length)&&b.length?" - ":"")+b}return""}function b(a){var b;b=(b={jabber:h._("__JHASH__OuQm9JSX8mw__JHASH__"),"skype-username":h._("__JHASH__tvKGTT8_UbE__JHASH__"),skype:h._("__JHASH__tvKGTT8_UbE__JHASH__"),msn:h._("__JHASH__prO-hgAZ9ja__JHASH__"),aim:h._("__JHASH__1ZHcMAT2t7T__JHASH__"),yahoo:h._("__JHASH__gVn_Xd4S8tK__JHASH__"),icq:h._("__JHASH__bVdWJ9cuu-T__JHASH__"),"wa-biz-description":h._("__JHASH__IzLmtPv9U2t__JHASH__")},b[d("WAWebVcardParsingUtils").WA_BIZ_NAME]=h._("__JHASH__6qoYC-17JBv__JHASH__"),b);b=a.properties["X-ABLabel"]||b[a.type.toLowerCase()];if(b!=null&&b!=="")return d("WAWebVcardParsingUtils").clean(String(b));var e={TEL:[[["cell"],h._("__JHASH__gMhBYz48iZ3__JHASH__")],[["iphone"],h._("__JHASH__sN9bnqkAMkG__JHASH__")],[["main"],h._("__JHASH__5yUtNZwqk_U__JHASH__")],[["home","fax"],h._("__JHASH__dzsekyipUIm__JHASH__")],[["work","fax"],h._("__JHASH__TRAaK8wdYyy__JHASH__")],[["home"],h._("__JHASH__jJm1Fsw0TlH__JHASH__")],[["work"],h._("__JHASH__myH-jdBcWC___JHASH__")],[["pager"],h._("__JHASH__SqAlWAv3Uep__JHASH__")],[[],h._("__JHASH__jJm1Fsw0TlH__JHASH__")]],EMAIL:[[["home"],h._("__JHASH__jJm1Fsw0TlH__JHASH__")],[["work"],h._("__JHASH__myH-jdBcWC___JHASH__")],[["internet"],h._("__JHASH__C5FUAc6Ridd__JHASH__")]],URL:[[["home"],h._("__JHASH__jJm1Fsw0TlH__JHASH__")],[["work"],h._("__JHASH__myH-jdBcWC___JHASH__")]],ADR:[[["home"],h._("__JHASH__jJm1Fsw0TlH__JHASH__")],[["work"],h._("__JHASH__myH-jdBcWC___JHASH__")]]};b=a.type;c("lodash").forOwn(e,function(d){if(d){var e=d[0];d=d[1];if(c("lodash").difference(e,c("lodash").map(a.properties.type,function(a){return a.toLowerCase()})).length===0){b=d;return!1}}});return b}function i(a){return j(a.map(function(a){return a.displayName})).toString()}function j(a){var b=a.find(function(a){return!!a});if(!a.length)return h._("__JHASH__mK7pAdCVz4q__JHASH__");if(!b)return h._("__JHASH__xk5oXCsm1jl__JHASH__",[h._plural(a.length,"count")]);return a.length===1?b:h._("__JHASH__MD97mOkn7um__JHASH__",[h._plural(a.length-1,"count"),h._param("contactName",b)])}function e(a){if(a.length===0)throw c("err")("No vcards provided");return a.length===1?a[0]:{displayName:i(a),vcard:a.map(function(a){return a.vcard}).join("\n"),isMultiVcard:!0}}g.vcardGetOrganizationString=a;g.vcardGetType=b;g.getNameString=i;g.getNameStringFromNames=j;g.mergeVcards=e}),226);
__d("WAWebGetNotificationStrings",["fbt","WABidi","WALogger","WAWebBizFormatInteractiveMsg","WAWebClock","WAWebContactCollection","WAWebContactGetters","WAWebCurrencyUtils","WAWebFormatBroadcastNotification","WAWebFormatCallLog","WAWebFormatE2ENotification","WAWebFormatEventDateString","WAWebFormatGroupNotification","WAWebFormatNfmText","WAWebFormatOversizedMsg","WAWebFormatPaymentMsg","WAWebFormatRevokedMsg","WAWebFormatUnknownMsg","WAWebFrontendMsgGetters","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebL10N","WAWebMsgGetters","WAWebOrderDetails","WAWebUA","WAWebUnformatMsg","WAWebVcardUtils","WAWebWidToFormattedNameOrNumber","fbs"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getNotificationBody: Unrecognized type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getNotificationBody: Unrecognized type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getNotificationBody: Unrecognized type ",""]);k=function(){return a};return a}function a(a){var b=a.shouldShowNotificationPreview(),e=a.safe(),f="";switch(e.type){case"chat":b&&(f=c("WAWebUnformatMsg")(a,a.body));break;case"image":var g="";d("WAWebUA").UA.hasEmoji&&(g=e.isViewOnce?"1\ufe0f\u20e3 ":"\ud83d\udcf7 ");f=g+(b&&c("WAWebUnformatMsg")(a,a.caption)||c("fbs")._("__JHASH__61VT29fhkzd__JHASH__").toString());break;case"product":g=d("WAWebUA").UA.hasEmoji?"\ud83d\uded2 ":"";f=g+(d("WAWebFrontendMsgGetters").getText(a)&&c("WAWebUnformatMsg")(a,d("WAWebFrontendMsgGetters").getText(a))||h._("__JHASH__veU1IOEuglB__JHASH__").toString());break;case"interactive":if(a.interactiveType===c("WAWebInteractiveMessageType").SHOPS_STOREFRONT){g=d("WAWebUA").UA.hasEmoji?"\ud83d\udecd\ufe0f  ":"";f=g+c("WAWebUnformatMsg")(a,a.body!=null?a.body:(g=a.interactiveHeader)==null?void 0:g.title)||"";break}if(a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS){var m;g=a;f=d("WAWebBizFormatInteractiveMsg").formatOrderDetailsMessagePreview(g)||((m=a.caption)!=null?m:"");m=d("WAWebOrderDetails").getOrderInfo(g);if((m==null?void 0:m.buttonName)!=="payment_info"){g=d("WAWebUA").UA.hasEmoji?"\ud83d\udcc3  ":"";f=g+f}break}if(a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS){m=a;f=d("WAWebBizFormatInteractiveMsg").formatOrderStatusMessage(m)||((g=a.caption)!=null?g:"");break}d("WALogger").WARN(k(),a.type);return"";case"native_flow":if(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS){m=a;f=d("WAWebFormatNfmText").formatNFMTextPreview(m)||((g=a.caption)!=null?g:"");g=d("WAWebOrderDetails").getOrderInfo(m);if((g==null?void 0:g.buttonName)!=="payment_info"){m=d("WAWebUA").UA.hasEmoji?"\ud83d\udcc3  ":"";f=m+f}break}d("WALogger").WARN(j(),a.type);return"";case"sticker":g=d("WAWebUA").UA.hasEmoji?"\ud83d\udc9f ":"";f=g+h._("__JHASH__J99WALaTlpc__JHASH__").toString();break;case"video":m="";a.isGif?(m=d("WAWebUA").UA.hasEmoji?"\ud83d\udc7e ":"",g=b&&c("WAWebUnformatMsg")(a,a.caption)||"GIF"):(d("WAWebUA").UA.hasEmoji&&(m=e.isViewOnce?"1\ufe0f\u20e3 ":"\ud83c\udfa5 "),g=b&&c("WAWebUnformatMsg")(a,a.caption)||c("fbs")._("__JHASH__cyjBvbS2TQY__JHASH__").toString(),e.isViewOnce||(g=g+" ("+d("WAWebClock").Clock.durationStr(a.duration)+")"));f=""+m+g;break;case"ptv":m=d("WAWebUA").UA.hasEmoji?"\ud83c\udfa5 ":"";g=b&&c("WAWebUnformatMsg")(a,a.caption)||h._("__JHASH__AI-gC7r29lC__JHASH__");g=g.toString()+" ("+d("WAWebClock").Clock.durationStr(a.duration)+")";f=""+m+g;break;case"ptt":m="";g=h._("__JHASH__2QkHxnGh4wt__JHASH__").toString();d("WAWebUA").UA.hasEmoji&&(m=e.isViewOnce?"1\ufe0f\u20e3 ":"\ud83c\udfa4 ");e.isViewOnce||(g=g+" ("+d("WAWebClock").Clock.durationStr(a.duration)+")");f=""+m+g;break;case"audio":m=d("WAWebUA").UA.hasEmoji?"\ud83c\udfb5 ":"";f=m+" "+c("fbs")._("__JHASH__9-qi5Sph54S__JHASH__").toString()+" ("+d("WAWebClock").Clock.durationStr(a.duration)+")";break;case"location":g=d("WAWebUA").UA.hasEmoji?"\ud83d\udccd ":"";a.isLive?m=b&&c("WAWebUnformatMsg")(a,a.comment)||h._("__JHASH__VHuorsyCFIS__JHASH__").toString():m=b&&a.loc||c("fbs")._("__JHASH__6FYSIQuDjf___JHASH__").toString();f=g+" "+m;break;case"groups_v4_invite":f=h._("__JHASH__-MKYnzTW4lu__JHASH__");break;case"newsletter_admin_invite":f=h._("__JHASH__sfOpmNxH5VR__JHASH__");break;case"gp2":f=c("WAWebFormatGroupNotification")(a,!0);break;case"broadcast_notification":f=c("WAWebFormatBroadcastNotification")(a);break;case"notification":f=(g=a.body)!=null?g:"";break;case"vcard":m=d("WAWebUA").UA.hasEmoji?"\ud83d\udc64 ":"";f=m+(a.subtype||c("fbs")._("__JHASH__Eq6ogxCH8Yt__JHASH__").toString());break;case"multi_vcard":g=d("WAWebUA").UA.hasEmoji?"\ud83d\udc65 ":"";f=g+d("WAWebVcardUtils").getNameString(a.vcardList).toString();break;case"document":if(a.isVcardOverMmsDocument){m=d("WAWebUA").UA.hasEmoji?"\ud83d\udc64 ":"";f=m+(a.filename||h._("__JHASH__xk5oXCsm1jl__JHASH__",[h._plural(a.pageCount,"count")]).toString());break}g=d("WAWebUA").UA.hasEmoji?"\ud83d\udcc4 ":"";m=a.caption;(a.caption==null||a.caption==="")&&(m=a.filename);f=g+(b&&c("WAWebUnformatMsg")(a,m)||c("fbs")._("__JHASH__pfQesg8NiLE__JHASH__").toString());break;case"e2e_notification":f=d("WAWebFormatE2ENotification").formatE2ENotification(e);break;case"call_log":f=c("WAWebFormatCallLog")(a,!1);break;case"ciphertext":f=h._("__JHASH__0DbVseUW2Is__JHASH__");break;case"revoked":f=d("WAWebFormatRevokedMsg").formatRevokedMsg(e);break;case"payment":f=l(a);break;case"oversized":f=d("WAWebFormatOversizedMsg").formatOversizedMsgNotification(a);break;case"unknown":f=d("WAWebFormatUnknownMsg").formatUnknownMsgNotification(a);break;case"list":f=(((g=a.list)==null?void 0:g.title)||"")+" "+(((b=a.list)==null?void 0:b.description)||"");break;case"list_response":f=(((m=a.listResponse)==null?void 0:m.title)||"")+" "+(((g=a.listResponse)==null?void 0:g.description)||"");break;case"poll_creation":b=d("WAWebUA").UA.hasEmoji?"\ud83d\udcca ":"";f=""+b+c("WAWebUnformatMsg")(a,a.pollName);break;case"event_creation":m=d("WAWebUA").UA.hasEmoji?"\ud83d\udcc6 ":"";g=a.eventStartTime!=null?d("WAWebFormatEventDateString").getEventDateStringFor(a.eventStartTime):null;f=h._("__JHASH__z4fLLERd57F__JHASH__",[h._param("eventIcon",m),h._param("eventName",a.eventName),h._param("eventTime",g)]);break;case"order":b=d("WAWebUA").UA.hasEmoji?"\ud83d\uded2 ":"";f=h._("__JHASH__7XG5gqNRTcm__JHASH__",[h._plural(a.itemCount,"count"),h._param("shoppingCartIcon",b),h._param("message",a.message!=null&&a.message!==""?"\n"+a.message:"")]);break;case"notification_template":case"protocol":case"hsm":case"template_button_reply":case"debug":case"debug_placeholder":case"interactive_response":case"keep_in_chat":case"request_phone_number":return"";default:e.type;d("WALogger").WARN(i(),a.type);return""}return f.toString()}function b(a){var b=a.msgDir,e=c("WAWebL10N").isRTL()?"rtl":"ltr";if(a.body&&a.author==null&&a.action==null)return a.body;var f=a.body,g=a.author;a=a.action;g==null&&(g="");a==null?a="":a=e==="ltr"?c("WAWebL10N").isolateLTR(a):c("WAWebL10N").isolateRTL(a);if(g){var h=d("WABidi").dir(g);if(e==="ltr"&&(!b||b==="ltr")&&(!h||h==="ltr"))return a?g+"\u200e: "+a+"\u200e "+f+"\u200e":g+"\u200e: "+f+"\u200e";else if(e==="ltr"&&(!b||b==="ltr"))return a?"\u200e\u202b"+g+"\u202c: "+a+"\u200e "+f+"\u200e":"\u200e\u202b"+g+"\u202c: "+f+"\u200e";else if(e==="ltr"&&(!h||h==="ltr"))return a?g+"\u200e: "+a+"\u200e \u202b"+f+"\u202c\u200e":g+"\u200e: \u202b"+f+"\u202c\u200e";else if(e==="ltr")return a?"\u202b"+g+"\u200f: "+a+" "+f+"\u200f":"\u202b"+g+"\u200f: "+f+"\u200f";else if((!b||b==="rtl")&&(!h||h==="rtl"))return a?g+"\u200f: "+a+"\u200f "+f+"\u200f":g+"\u200f: "+f+"\u200f";else if(!b||b==="rtl")return a?"\u200f\u202a"+g+"\u202c: "+a+"\u200f "+f+"\u200f":"\u200f\u202a"+g+"\u202c: "+f+"\u200f";else if(!h||h==="rtl")return a?g+"\u200f: "+a+"\u200f \u202a"+f+"\u202c\u200f":g+"\u200f: \u202a"+f+"\u202c\u200f";return a?"\u202a"+g+"\u200e: "+a+" "+f+"\u200e":"\u202a"+g+"\u200e: "+f+"\u200e$"}return a?a+" "+f:f}function l(a){if(a.subtype==="invite")return d("WAWebFormatPaymentMsg").formatPaymentInviteMessageText(a.id);var b=a.paymentCurrency&&a.paymentAmount1000;if(!b)return h._("__JHASH__oRCssWDoCcM__JHASH__");if(a.subtype!=="send"&&a.subtype!=="request")return h._("__JHASH__ZQiQBMXFeNX__JHASH__");var e;b=d("WAWebCurrencyUtils").formatAmount1000(a.paymentCurrency,a.paymentAmount1000);var f=c("WAWebWidToFormattedNameOrNumber")(d("WAWebMsgGetters").getSender(a)),g=c("WAWebWidToFormattedNameOrNumber")(a.paymentMessageReceiverJid),i=d("WAWebContactCollection").ContactCollection.get(a.paymentMessageReceiverJid);i=i!=null&&d("WAWebContactGetters").getIsMe(i);var j=a.paymentAmount1000/1e3;a.subtype==="send"?e=d("WAWebMsgGetters").getIsGroupMsg(a)?i?h._("__JHASH__BZMQy6wWsdX__JHASH__",[h._plural(j),h._param("senderName",f),h._param("amount",b)]):h._("__JHASH__AR00VK45Z0h__JHASH__",[h._plural(j),h._param("senderName",f),h._param("amount",b),h._param("receiverName",g)]):h._("__JHASH__CNH4s34T9Kz__JHASH__",[h._plural(j),h._param("amount",b)]):e=d("WAWebMsgGetters").getIsGroupMsg(a)?i?h._("__JHASH__D7Hb6wT-F_r__JHASH__",[h._plural(j),h._param("senderName",f),h._param("amount",b)]):h._("__JHASH__3vRMfeoLUOs__JHASH__",[h._plural(j),h._param("senderName",f),h._param("amount",b),h._param("receiverName",g)]):h._("__JHASH__UE6HRr3OEVZ__JHASH__",[h._plural(j),h._param("amount",b)]);return e}function e(a){a===void 0&&(a=1);return h._("__JHASH__JKIktoqVJ3Q__JHASH__",[h._plural(a,"newMessageCount")])}g.getNotificationMessageBody=a;g.getNotificationBody=b;g.getPluralMessageNotificationBody=e}),226);
__d("WAWebNotificationBackend",["Promise","WAWebCommentNotification","WAWebNotificationController","WAWebNotificationsCallNotification","WAWebNotificationsDeviceSwitchNotification","WAWebNotificationsMsgNotification","WAWebNotificationsReactionNotification","WAWebPollsVoteNotification"],(function(a,b,c,d,e,f,g){var h;function a(a){return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsMsgNotification").WAMsgNotification)({msg:a}))}function c(a){return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsReactionNotification").WAReactionNotification)({reactionMsg:a}))}function e(a){return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebCommentNotification").WACommentNotification)({commentMsg:a}))}function f(a){return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsCallNotification").WACallNotification)(a))}function i(a){a=new(d("WAWebPollsVoteNotification").PollVoteNotification)({creationMsg:a});var c=d("WAWebNotificationController").WANotificationController.getNotification(a.buildKey());return c instanceof d("WAWebPollsVoteNotification").PollVoteNotification&&c.bodyText===a.bodyText?(h||(h=b("Promise"))).resolve():d("WAWebNotificationController").WANotificationController.triggerNotification(a)}function j(a){return d("WAWebNotificationController").WANotificationController.triggerNotification(new(d("WAWebNotificationsDeviceSwitchNotification").WADeviceSwitchNotification)(a))}function k(){d("WAWebNotificationController").WANotificationController.closeOrCancelAllNotifications()}function l(a){d("WAWebNotificationController").WANotificationController.closeOrCancelNotificationsForChat(a.id)}g.cancelCallNotification=d("WAWebNotificationsCallNotification").cancelCallNotification;g.showMsgNotification=a;g.showReactionNotification=c;g.showCommentNotification=e;g.showCallNotification=f;g.showPollVoteNotification=i;g.showDeviceSwitchNotification=j;g.shutdownAsNeeded=k;g.closeNotifications=l}),98);
__d("WAWebNotificationBanner",["WAWebBaseNotificationBanner","WAWebEmoji","WAWebURLUtils"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e=b.wid,f=b.msgId,g=b.tag,h=b.title,i=b.body,j=b.icon;b.canBlock;var k=b.onClick,l=b.renotify;b=b.doNotOpenChat;return a.call(this,e,f,g,{title:d("WAWebEmoji").EmojiUtil.normalizeAllEmojis(h),notification:window.Notification,body:d("WAWebEmoji").EmojiUtil.normalizeAllEmojis(i),icon:c("WAWebURLUtils").relToAbs(j),onClick:k,renotify:l,doNotOpenChat:b})||this}return b}(c("WAWebBaseNotificationBanner"));g["default"]=a}),98);
__d("WAWebNotificationController",["WAAbortError","WALogger","WAWebFrontendMsgGetters","WAWebNotificationsMsgNotification","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WANotificationController:_removeNotificationFromMap not removing due to strict equality"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WANotificationController:_removeNotificationFromMap cannot find notification in map with key: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["WANotificationController: notification aborted: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["WANotificationController: notification not invoked:"]);k=function(){return a};return a}a=function(){function a(){this.map=new Map(),this.lastMsgNotifByChat=new Map()}var c=a.prototype;c.notificationExists=function(a){return this.map.has(a)};c.getNotification=function(a){return this.map.get(a)};c.closeOrCancelNotification=function(a){var b=this.getNotification(a);b&&(b.notificationBanner?b.notificationBanner.close():b.abortController&&b.abortController.abort(),this.$1(a))};c.closeOrCancelAllNotifications=function(){var a=this;this.map.forEach(function(b,c){a.closeOrCancelNotification(c)})};c.closeOrCancelNotificationsForChat=function(a){var b=this;this.map.forEach(function(c,d){c.matchesChat(a)&&b.closeOrCancelNotification(d)})};c.triggerNotification=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=a.buildKey();this.$2(c,a);try{var e=(yield a.triggerNotification());if(e!=null){if(d("WAWebNotificationsMsgNotification").shouldReplaceMsgNotificationManually()&&a instanceof d("WAWebNotificationsMsgNotification").WAMsgNotification){var f=d("WAWebFrontendMsgGetters").getChat(a.msg).id.toString(),g=this.lastMsgNotifByChat.get(f);g&&self.setTimeout(function(){return g.close()},2e3);this.lastMsgNotifByChat.set(f,e);e.waitForClose().then(function(){b.lastMsgNotifByChat.get(f)===e&&b.lastMsgNotifByChat["delete"](f)})}e.waitForClose().then(function(){b.$1(c)})}else d("WALogger").LOG(k()).devConsole(a),this.$1(c)}catch(e){d("WAAbortError").catchAbort(function(e){d("WALogger").LOG(j(),e).devConsole(a),b.$1(c)})(e)}return a});function c(b){return a.apply(this,arguments)}return c}();c.$2=function(a,b){this.map.set(a,b)};c.$1=function(a,b){var c=this.getNotification(a);if(c==null){d("WALogger").LOG(i(),a);return}if(b!=null&&c!==b){d("WALogger").LOG(h());return}this.map["delete"](a)};return a}();c=new a();g.WANotificationController=c}),98);
__d("WAWebNotificationHelpers",["fbt","WANullthrows","WAWebABProps","WAWebChatCollection","WAWebCmd","WAWebFbtCommon","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebGroupMetadataCollection","WAWebMsgGetters","WAWebMuteGetters","WAWebOfflineHandler","WAWebParticipantListUtils","WAWebQuotedMsgModelUtils","WAWebSettingsGetters","WAWebSettingsModel","WAWebUserPrefsMeUser","WAWebUserPrefsNotifications","gkx"],(function(a,b,c,d,e,f,g,h){function a(a){return document.hasFocus()&&a.active}function b(){return document.hasFocus()}function e(){return d("WAWebOfflineHandler").OfflineMessageHandler.isResumeOnSocketDisconnectInProgress()||!d("WAWebCmd").Cmd.isOfflineDeliveryEnd}function f(a,b){b===void 0&&(b=!0);if(!a.isGroup)return!1;if(a.isGroup&&a.isReadOnly)return!1;var d=Date.now(),e=a.squelch||0;if(d>e){if(!b)return!1;c("WAWebGroupMetadataCollection").find(a.id).then(function(b){if(b!=null){b=i(a.id,b);a.squelch=Date.now()+b}});return!1}return!0}function i(a,b){a=b.participants.length;return Math.min(120,30+5*a)*1e3}function j(a){return!!((a=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata)==null?void 0:a.isParentGroup)}function k(a){if(c("gkx")("26258"))return!1;if(!d("WAWebMsgGetters").getIsGroupMsg(a))return!1;if(m(a))return!1;return d("WAWebUserPrefsNotifications").getIgnoreNondirectGroupMsg()?!0:!1}function l(a){var b=d("WAWebFrontendMsgGetters").getChat(a);if(b==null)return!1;if(!d("WAWebMuteGetters").getIsMuted(b.mute))return!1;if(!b.isGroup)return!0;if(m(a)){b=d("WAWebChatCollection").ChatCollection.get(d("WAWebMsgGetters").getSender(a));return b!=null&&d("WAWebMuteGetters").getIsMuted(b.mute)===!0}return!0}function m(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeUser();return a.isMentioned(b)||d("WAWebQuotedMsgModelUtils").isQuotedMsg(a,b)}function n(a){var b=d("WAWebFrontendMsgGetters").getChat(a);if(!d("WAWebSettingsGetters").getShowArchiveV2(c("WAWebSettingsModel")))return!1;if(!b.archive)return!1;if(!b.isGroup)return!0;if(m(a)){b=d("WAWebChatCollection").ChatCollection.get(d("WAWebMsgGetters").getSender(a));return b!=null&&d("WAWebMuteGetters").getIsMuted(b.mute)===!0}return!0}function o(a){return a.isGroup?h._("__JHASH__DqLQ7JJlR3w__JHASH__"):h._("__JHASH__ovnYOY2OPxo__JHASH__")}function p(a){var b;if(a.isLocked)return c("WAWebFbtCommon")("WhatsApp").toString();if(((b=a.groupMetadata)==null?void 0:b.isUnnamed)&&d("WAWebABProps").getABPropConfigValue("ugr_enabled"))return d("WAWebParticipantListUtils").calculateUnnamedGroupFullParticipantsList(c("WANullthrows")(a.groupMetadata),!0);b=a.msgs.last();if((b==null?void 0:b.subtype)==="sender_invite"){var e=d("WAWebFrontendContactGetters").getFormattedName(a.contact);return(b==null?void 0:b.templateParams)&&(b==null?void 0:b.templateParams[0])==="true"?h._("__JHASH__B7WI35Kg7I2__JHASH__",[h._param("receiver_name",e)]).toString():h._("__JHASH__YwnAF53aSbj__JHASH__",[h._param("receiver_name",e)]).toString()}return d("WAWebFrontendContactGetters").getFormattedName(a.contact)||o(a).toString()}g.chatIsActive=a;g.appIsActive=b;g.isOfflineResumeInProgress=e;g.shouldSquelch=f;g._calculateTimeoutFromGroupMetadata=i;g.isCommunityHomeAdd=j;g.shouldIgnoreGroupMsg=k;g.isMutedAndNotMentioned=l;g.isArchivedAndNotMentioned=n;g.getNotificationTitle=p}),226);
__d("WAWebNotificationIconUtils",["WAAbortError","WACustomError","WAFilteredCatch","WALogger","WAPromiseRaceAbort","WAPromiseTimeout","WAWebNotificationTone","WAWebProfilePicThumbCollection","asyncToGeneratorRuntime","bx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["NotificationBackend:IconLoadTimeoutError:",""]);h=function(){return a};return a}var i=(e=c("bx")).getURL(e("11319")),j=e.getURL(e("9555")),k=e.getURL(e("9556")),l=e.getURL(e("11370"));function m(a){return a.isNewsletter?l:a.isGroup?j:k}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return a.isLocked?i:o(a.id,b,(b=c)!=null?b:m(a))});return n.apply(this,arguments)}function o(a,b,e){return d("WAPromiseTimeout").promiseTimeout(c("WAPromiseRaceAbort")(d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.find(a),b),1500,"showNotificationTimeout").then(function(a){if(b.aborted)throw new(d("WAAbortError").AbortError)();a=(a=a==null?void 0:a.img)!=null?a:e;return d("WAWebNotificationTone").cachePath(a)})["catch"](d("WAFilteredCatch").filteredCatch(d("WACustomError").TimeoutError,function(b){d("WALogger").LOG(h(),a.toString()).devConsole(b);return d("WAWebNotificationTone").cachePath(e)}))}g.WHATSAPP_DEFAULT_ICON=i;g.GROUP_DEFAULT_ICON=j;g.USER_DEFAULT_ICON=k;g.NEWSLETTER_DEFAULT_ICON=l;g.getDefaultChatNotificationIcon=m;g.getChatNotificationIcon=a;g.getNotificationIconByWid=o}),98);
__d("WAWebNotificationsCallNotification",["WAWebBaseNotification","WAWebChatFlowTypes","WAWebContactCollection","WAWebFrontendContactGetters","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationController","WAWebNotificationIconUtils","WAWebWid","WAWebWidFormat","asyncToGeneratorRuntime","fbs"],(function(a,b,c,d,e,f,g){function a(a){a&&d("WAWebNotificationController").WANotificationController.closeOrCancelNotification(a.toString())}e=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var c,d=b.wid,e=b.msgId,f=b.isVideo,g=b.isGroup;b=b.isSilenced;c=a.call(this)||this;c.wid=d;c.msgId=e;c.isVideo=f;c.isGroup=g;c.isSilenced=b;return c}var f=e.prototype;f.shouldMute=function(){return!this.wid||!this.msgId||d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute())||this.isSilenced?!0:!1};f.buildKey=function(){return"call:"+this.wid.toString()};f.matchesChat=function(a){return c("WAWebWid").equals(this.wid,a)};f.getChatKind=function(){return this.isGroup?d("WAWebChatFlowTypes").ChatKindType.Group:d("WAWebChatFlowTypes").ChatKindType.Chat};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebNotificationIconUtils").getNotificationIconByWid(this.wid,this.abortController.signal,d("WAWebNotificationIconUtils").USER_DEFAULT_ICON)});function c(){return a.apply(this,arguments)}return c}();f.getBannerOptions=function(){var a=d("WAWebContactCollection").ContactCollection.get(this.wid);a=a?d("WAWebFrontendContactGetters").getFormattedName(a):d("WAWebWidFormat").widToFormattedUser(this.wid);var b;this.isGroup?b=this.isVideo?c("fbs")._("__JHASH__RQBTNX-HdiW__JHASH__",[c("fbs")._param("name",a)]).toString():c("fbs")._("__JHASH__Zk7d2XrvIhj__JHASH__",[c("fbs")._param("name",a)]).toString():b=this.isVideo?c("fbs")._("__JHASH__RzRngOjqL6i__JHASH__",[c("fbs")._param("name",a)]).toString():c("fbs")._("__JHASH__hm66-RoBY0V__JHASH__",[c("fbs")._param("name",a)]).toString();a=c("fbs")._("__JHASH__kAWDCkdZsPY__JHASH__").toString();return{wid:this.wid,msgId:this.msgId,tag:this.msgId,title:b,body:a}};return e}(d("WAWebBaseNotification").WABaseNotification);g.cancelCallNotification=a;g.WACallNotification=e}),226);
__d("WAWebNotificationsChatAssignmentNotification",["fbt","WANullthrows","WAWebABProps","WAWebBaseNotification","WAWebChatCollection","WAWebConnModel","WAWebGetNotificationStrings","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationHelpers","WAWebNotificationIconUtils","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e,f=b.chats;b=b.assignmentTimestamps;e=a.call(this)||this;e.$WAWebNotificationsChatAssignmentNotification1=function(){};e.chats=f.map(function(a){return d("WAWebChatCollection").ChatCollection.get(a)}).filter(function(a){return a!=null});e.primaryChat=c("WANullthrows")(e.chats[0]);e.assignmentTimestamps=b;e.businessName=(f=d("WAWebConnModel").Conn.pushname)!=null?f:h._("__JHASH__ePeaC9vZcPg__JHASH__").toString();return e}var f=e.prototype;f.shouldMute=function(){if(d("WAWebABProps").getABPropConfigValue("web_abprop_mute_notifications_on_app_focus")?d("WAWebNotificationHelpers").appIsActive():d("WAWebNotificationHelpers").chatIsActive(this.primaryChat))return!0;if(this.chats.filter(function(a){return a&&d("WAWebMuteGetters").getIsMuted(a.mute)}).length===this.chats.length)return!0;if(this.chats.filter(function(a){return a==null?void 0:a.archive}).length===this.chats.length)return!0;if(d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute()))return!0;return d("WAWebNotificationHelpers").isOfflineResumeInProgress()?!0:!1};f.buildKey=function(){return"chat_assignment:"+this.chats.map(function(a){return a==null?void 0:a.id.toString()}).join("-")+this.assignmentTimestamps};f.matchesChat=function(a){return this.chats.length>1?!1:c("WAWebWid").equals(this.primaryChat.id,a)};f.getChatKind=function(){return this.primaryChat.kind};f.performLogging=function(){};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebNotificationIconUtils").getNotificationIconByWid(d("WAWebUserPrefsMeUser").assertGetMeUser(),this.abortController.signal,d("WAWebNotificationIconUtils").USER_DEFAULT_ICON)});function c(){return a.apply(this,arguments)}return c}();f.getBannerOptions=function(){var a=d("WAWebGetNotificationStrings").getNotificationBody(babelHelpers["extends"]({},i(this.primaryChat,this.businessName,this.chats.length)));return{wid:this.primaryChat.id,title:this.businessName,body:a,onClick:this.$WAWebNotificationsChatAssignmentNotification1}};return e}(d("WAWebBaseNotification").WABaseNotification);function i(a,b,c){var d;c===1?a.isGroup?d=h._("__JHASH__cJ3nWRUtGPf__JHASH__",[h._param("businessName",b),h._param("chatName",a.formattedTitle)]):d=h._("__JHASH__X7KjmzTJwyp__JHASH__",[h._param("businessName",b),h._param("chatName",a.formattedTitle)]):d=h._("__JHASH__3LyohFTHukl__JHASH__",[h._param("businessNme",b),h._param("numberOfChats",c)]);return{body:d.toString()}}g.WAWebNotificationsChatAssignmentNotification=a}),226);
__d("WAWebNotificationsDeviceSwitchNotification",["fbt","WAWebBaseNotification","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationHelpers","WAWebNotificationIconUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c,d=b.wid;b=b.otpCode;c=a.call(this)||this;c.wid=d;c.otpCode=b;return c}var e=c.prototype;e.shouldPlaySound=function(){return a.prototype.shouldPlaySound.call(this)};e.shouldMute=function(){if(d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute()))return!0;return d("WAWebNotificationHelpers").appIsActive()?!0:!1};e.buildKey=function(){return"registration:"+this.wid.toString()};e.getChatKind=function(){return null};e.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebNotificationIconUtils").getNotificationIconByWid(this.wid,this.abortController.signal,d("WAWebNotificationIconUtils").USER_DEFAULT_ICON)});function c(){return a.apply(this,arguments)}return c}();e.getBannerOptions=function(){var a=h._("__JHASH__lExWzzlNO9k__JHASH__",[h._param("otpCode",this.otpCode)]).toString(),b=h._("__JHASH__7fypcEiOQ6Y__JHASH__").toString();return{wid:this.wid,title:b,body:a,canReply:!1,canMarkAsRead:!1,doNotOpenChat:!0}};return c}(d("WAWebBaseNotification").WABaseNotification);g.WADeviceSwitchNotification=a}),226);
__d("WAWebABPropsInternalNumber",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebABProps").getABPropConfigValue("system_msg_numbers_fb_branded").split(","),c=d("WAWebABProps").getABPropConfigValue("system_msg_numbers_fb_inc").split(",");return b.includes(a)||c.includes(a)}function b(a){var b=d("WAWebABProps").getABPropConfigValue("system_msg_numbers_fb_branded").split(",");return b.includes(a)}g.getIsInternalNumber=a;g.getFbBrandedNumber=b}),98);
__d("WAWebTosCountryGating",["WAWebABPropsInternalNumber","WAWebBizGatingUtils","WAWebHandleMsgTypes.flow"],(function(a,b,c,d,e,f,g){function a(a){if(d("WAWebBizGatingUtils").countryGatingEnabled()){var b;return((b=a.privacyMode)==null?void 0:b.hostStorage)===d("WAWebHandleMsgTypes.flow").HostStorageEnumType.Facebook&&!d("WAWebABPropsInternalNumber").getFbBrandedNumber(a.id.user)}return!1}g.shouldBlockByCountry=a}),98);
__d("WAWebTosGating",["WAWebABPropsInternalNumber","WAWebBizGatingUtils","WAWebHandleMsgTypes.flow","WAWebTos"],(function(a,b,c,d,e,f,g){function a(a){if(d("WAWebBizGatingUtils").tos3GatingEnabled()){var b;if(d("WAWebTos").TosManager.getState(d("WAWebTos").TOS_3_ID)==="NOT_ACCEPTED"&&((b=a.privacyMode)==null?void 0:b.hostStorage)===d("WAWebHandleMsgTypes.flow").HostStorageEnumType.Facebook&&!d("WAWebABPropsInternalNumber").getFbBrandedNumber(a.id.user))return!0}return!1}g.shouldBlockByTos=a}),98);
__d("WAWebChatGroupUtils",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebABPropsSupportGroup","WAWebApiContact","WAWebBotGating","WAWebBotTos","WAWebCommunityGatingUtils","WAWebDBUpdateChatTable","WAWebFrontendContactGetters","WAWebGroupType","WAWebNewsletterMembershipUtil","WAWebPnhGatingUtils","WAWebStateUtils","WAWebTosCountryGating","WAWebTosGating","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getOneToOneContactFromGroupContact: Participant LID does not have PN mapping"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:updateReadOnly:old ",", new ",""]);j=function(){return a};return a}function k(a){if(!a)return!1;a=d("WAWebStateUtils").unproxy(a);return a.isGroup&&((a=a.groupMetadata)==null?void 0:a.support)===!0}function a(a){a=d("WAWebStateUtils").unproxy(a);return k(a)||c("WAWebABPropsSupportGroup")(a.id.user)}function l(a){a=d("WAWebStateUtils").unproxy(a);return a.isGroup&&!!((a=a.groupMetadata)==null?void 0:a.terminated)}function m(a){a=d("WAWebStateUtils").unproxy(a);return d("WAWebCommunityGatingUtils").communitiesEnabled()&&a.isGroup&&((a=a.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP}function e(a){a=d("WAWebStateUtils").unproxy(a);return d("WAWebCommunityGatingUtils").communitiesEnabled()&&a.isGroup&&((a=a.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP}function n(a){if(!a)return!1;a=d("WAWebStateUtils").unproxy(a);return a.isGroup&&!!((a=a.groupMetadata)==null?void 0:a.suspended)}function f(a){a=d("WAWebStateUtils").unproxy(a);return a.canSend&&!n(a)&&!l(a)}function o(a){var b;a=d("WAWebStateUtils").unproxy(a);return a.isGroup&&((b=a.groupMetadata)==null?void 0:b.growthLockType)==="invite"&&(a.groupMetadata.growthLockExpiration||0)>d("WATimeUtils").unixTime()}function p(a){var b;if(!a)return!1;a=d("WAWebStateUtils").unproxy(a);var c=l(a);b=n(a)&&!((b=a.groupMetadata)==null?void 0:b.participants.iAmMember());return(c||b)&&!m(a)}function q(a){var b;a=d("WAWebStateUtils").unproxy(a);return((b=a.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&n(a)&&d("WAWebABProps").getABPropConfigValue("community_suspend_v0_enabled")}function r(){return d("WAWebABProps").getABPropConfigValue("group_suspend_appeal_include_entity_id_enabled")}function s(a){var b;a=d("WAWebStateUtils").unproxy(a);return((b=a.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&l(a)}function t(a){return n(a)||l(a)}function u(a){var c,e=d("WAWebStateUtils").unproxy(a);if(k(e)&&e.isReadOnly)return;a=(h||(h=b("Promise"))).resolve();if(e.isNewsletter){var f=!d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(e.newsletterMetadata)||e.isSuspendedOrTerminated();e.isReadOnly!==f&&d("WAWebDBUpdateChatTable").updateChatTable(e.id,{isReadOnly:f}).then(function(){e.isReadOnly=f,z(e)})["catch"](function(){});return}if(e.isGroup&&!((c=e.groupMetadata)==null?void 0:c.stale)){var g=((c=e.groupMetadata)==null?void 0:c.groupType)!==d("WAWebGroupType").GroupType.COMMUNITY&&(!((c=e.groupMetadata)==null?void 0:c.participants.iAmMember())||l(e));e.isReadOnly!==g&&(d("WALogger").LOG(j(),e.isReadOnly,g),a=d("WAWebDBUpdateChatTable").updateChatTable(e.id,{isReadOnly:g}).then(function(){e.isReadOnly=g,z(e)}))}a.then(function(){e.isBroadcast&&y(e)})}function v(a){a=d("WAWebStateUtils").unproxy(a);return((a=a.groupMetadata)==null?void 0:a.participants.length)||1}function w(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeLidUser();if(b==null?void 0:b.equals(a))return d("WAWebUserPrefsMeUser").getMeUser();if(d("WAWebABProps").getABPropConfigValue("lid_groups_create_lid_individual_chats"))return a;if(!a.isLid())return a;b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a));if(b==null){d("WALogger").ERROR(i()).sendLogs("lid-group-get-one-to-one-contact");return a}return b}function x(a){var b=a.participants;a=(a=a.size)!=null?a:0;b=b.iAmAdmin()?b.length:a;return b}function y(a){if(a.isBroadcast){var b;a.formattedTitle=(b=a.contact.name)!=null?b:((b=(b=a.groupMetadata)==null?void 0:b.participants)!=null?b:[]).map(function(a){return d("WAWebFrontendContactGetters").getFormattedShortName(a.contact)}).join(", ")}else if(a.isUser){a.formattedTitle=(b=d("WAWebFrontendContactGetters").getFormattedUser(a.contact))!=null?b:""}else if(a.isGroup){a.formattedTitle=(b=a.contact.name)!=null?b:(b=a.groupMetadata)==null?void 0:b.subject}else if(a.isNewsletter){a.formattedTitle=(b=a.contact.name)!=null?b:(b=a.newsletterMetadata)==null?void 0:b.name}}function z(a,b){if(a.isReadOnly||d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a.isDeprecated||a.isAnnounceGrpRestrict||d("WAWebTosGating").shouldBlockByTos(a.contact)||d("WAWebTosCountryGating").shouldBlockByCountry(a.contact)||!d("WAWebBotGating").isBotEnabled()&&a.id.isBot()){a.canSend=!1;return!1}else if(((b=(b=b)!=null?b:a.contact.businessProfile)==null?void 0:b.isBizBot3p)&&(!d("WAWebBotGating").isBizBot3pAvailable()||!d("WAWebBotTos").hasAcceptedBizBotTos())){a.canSend=!1;return!1}else if(a.isUser)return a.canSend=!(a.contact.isContactBlocked||a.isPSA||a.isIAS||d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a.isDeprecated);else if(a.isNewsletter)return a.canSend=d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a.newsletterMetadata);a.canSend=!0;return!0}g.isSupportGroup=k;g.isSupportGroupOrSupportAdmin=a;g.isTerminatedGroup=l;g.isCommunityAnnouncementGroup=m;g.isCommunityGeneralGroup=e;g.isSuspendedGroup=n;g.canSendToGroup=f;g.isInviteGrowthLockedGroup=o;g.isTerminatedGroupOrNotMember=p;g.isIntegritySuspendedDefaultSubgroup=q;g.shouldIncludeEntityIdInAppealRequest=r;g.isDeactivatedCommunityAnnouncementGroup=s;g.shouldBlockCall=t;g.updateReadOnly=u;g.getParticipantCount=v;g.getOneToOneContactFromGroupContact=w;g.getGroupParticipantsCount=x;g.updateTitle=y;g.updateCanSend=z}),98);
__d("WAWebMediaUtils",["WABinary"],(function(a,b,c,d,e,f,g){function h(a){return btoa(String.fromCharCode.apply(null,d("WABinary").Binary.build(a).readByteArray()))}function a(a){return"data:image/jpeg;base64,"+h(a)}g.convertToBase64=h;g.convertToDataURI=a}),98);
__d("WAWebWamEnumGroupTypeClient",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR_GROUP:1,SUB_GROUP:2,DEFAULT_SUB_GROUP:3,PARENT_GROUP:4});f.GROUP_TYPE_CLIENT=a}),66);
__d("WAWebNotificationEngagementWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumClientGroupSizeBucket","WAWebWamEnumGroupTypeClient"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({NotificationEngagement:[3796,{avgNotifEngagementT:[1,a.TYPES.TIMER],groupSizeBucket:[2,d("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],groupTypeClient:[3,d("WAWebWamEnumGroupTypeClient").GROUP_TYPE_CLIENT],isAGroup:[4,a.TYPES.BOOLEAN],isWebBackgroundSyncNotif:[18,a.TYPES.BOOLEAN],threadId:[5,a.TYPES.STRING],totalMessageReminderNotifShown:[16,a.TYPES.INTEGER],totalMessageReminderNotifTapToOpen:[17,a.TYPES.INTEGER],totalNotifMarkAsRead:[6,a.TYPES.INTEGER],totalNotifMissedCallVoipCallback:[7,a.TYPES.INTEGER],totalNotifMissedCallVoipMessage:[8,a.TYPES.INTEGER],totalNotifOthers:[9,a.TYPES.INTEGER],totalNotifReply:[10,a.TYPES.INTEGER],totalNotifRtcVoipAccept:[11,a.TYPES.INTEGER],totalNotifRtcVoipDecline:[12,a.TYPES.INTEGER],totalNotifShowPreview:[13,a.TYPES.INTEGER],totalNotifShown:[14,a.TYPES.INTEGER],totalNotifTapToOpen:[15,a.TYPES.INTEGER]},[1,1,1],"regular"]},{NotificationEngagement:[]});g.NotificationEngagementWamEvent=b}),98);
__d("WAWebNotificationsMsgNotification",["fbt","WAWebABProps","WAWebBaseNotification","WAWebBotGating","WAWebChatGroupUtils","WAWebChatThreadLogging","WAWebElevatedPushNamesFlag","WAWebFrontendMsgGetters","WAWebGetNotificationStrings","WAWebMediaUtils","WAWebMsgGetters","WAWebMsgType","WAWebMuteCollection","WAWebMuteGetters","WAWebNotificationController","WAWebNotificationEngagementWamEvent","WAWebNotificationHelpers","WAWebNotificationIconUtils","WAWebUA","WAWebWid","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var c;b=b.msg;c=a.call(this)||this;c.msg=b;return c}var f=e.prototype;f.shouldPlaySound=function(){return a.prototype.shouldPlaySound.call(this)&&!d("WAWebMsgGetters").getIsEdited(this.msg)};f.shouldMute=function(){var a=d("WAWebFrontendMsgGetters").getChat(this.msg);if(d("WAWebMuteGetters").getIsMuted(d("WAWebMuteCollection").MuteCollection.globalMute()))return!0;if(d("WAWebABProps").getABPropConfigValue("web_abprop_mute_notifications_on_app_focus")?d("WAWebNotificationHelpers").appIsActive():d("WAWebNotificationHelpers").chatIsActive(a))return!0;if(d("WAWebNotificationHelpers").isMutedAndNotMentioned(this.msg))return!0;if(d("WAWebNotificationHelpers").isArchivedAndNotMentioned(this.msg))return!0;if(d("WAWebNotificationHelpers").isCommunityHomeAdd(this.msg))return!0;if(!c("gkx")("26258")&&d("WAWebNotificationHelpers").shouldIgnoreGroupMsg(this.msg))return!0;if(d("WAWebMsgGetters").getIsFutureproof(this.msg))return!0;if(d("WAWebNotificationHelpers").isOfflineResumeInProgress())return!0;if(d("WAWebMsgGetters").getIsBizContentPlaceholder(this.msg))return!0;if(this.msg.type===d("WAWebMsgType").MSG_TYPE.CALL_LOG&&this.msg.subtype==="silence")return!0;return a.id.isBot()&&!d("WAWebBotGating").isBotEnabled()?!0:!1};f.shouldSquelch=function(){var a=d("WAWebNotificationController").WANotificationController.notificationExists(this.buildKey());return a&&d("WAWebMsgGetters").getIsEdited(this.msg)?!1:d("WAWebNotificationHelpers").shouldSquelch(d("WAWebFrontendMsgGetters").getChat(this.msg))};f.buildKey=function(){var a;return"msg:"+((a=(a=this.msg.latestEditMsgKey)==null?void 0:a.toString())!=null?a:this.msg.id.toString())};f.matchesChat=function(a){var b;return c("WAWebWid").equals((b=d("WAWebFrontendMsgGetters").getMaybeChat(this.msg))==null?void 0:b.id,a)};f.getChatKind=function(){return d("WAWebFrontendMsgGetters").getChat(this.msg).kind};f.getDefaultIcon=function(){return d("WAWebMsgGetters").getIsProductListMessage(this.msg)?d("WAWebMediaUtils").convertToDataURI(d("WAWebMsgGetters").getProductListHeaderImage(this.msg)):d("WAWebNotificationIconUtils").getDefaultChatNotificationIcon(d("WAWebFrontendMsgGetters").getChat(this.msg))};f.getIcon=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebNotificationIconUtils").getChatNotificationIcon(d("WAWebFrontendMsgGetters").getChat(this.msg),this.abortController.signal,this.getDefaultIcon())});function c(){return a.apply(this,arguments)}return c}();f.getBannerOptions=function(){var a=this.msg;a=d("WAWebGetNotificationStrings").getNotificationBody(babelHelpers["extends"]({},i(a),{msgDir:d("WAWebFrontendMsgGetters").getDir(a)}));var e=d("WAWebFrontendMsgGetters").getChat(this.msg),f=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebChatThreadLogging").getChatThreadID(e.id.toJid()));new(d("WAWebNotificationEngagementWamEvent").NotificationEngagementWamEvent)({threadId:a}).commit()});return function(){return a.apply(this,arguments)}}();return{wid:e.id,msgId:this.msg.id.toString(),tag:j()?this.msg.id.toString():e.id.toString(),title:d("WAWebNotificationHelpers").getNotificationTitle(e),body:a,canReply:e.canSend&&!d("WAWebChatGroupUtils").isSuspendedGroup(e),canBlock:e.canBlockFromNotification(),onClick:function(){c("gkx")("26258")||f()},renotify:!d("WAWebMsgGetters").getIsEdited(this.msg)}};return e}(d("WAWebBaseNotification").WABaseNotification);function i(a){var b,c=d("WAWebFrontendMsgGetters").getChat(a),e=d("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(c);e=d("WAWebMsgGetters").getIsGroupMsg(a)||d("WAWebMsgGetters").getIsMetaBotInvokeResponse(a)?a.displayName({withPushName:e,withPushNameOnly:e,newPushNameFormatting:e,showVerifiedName:e}):void 0;if(c.isLocked)return{body:d("WAWebGetNotificationStrings").getPluralMessageNotificationBody(c.unreadCount).toString()};else a.type===d("WAWebMsgType").MSG_TYPE.CHAT&&!a.shouldShowNotificationPreview()?d("WAWebMsgGetters").getIsGroupMsg(a)?e!=null?(b=h._("__JHASH__xWfZqnNO_oH__JHASH__",[h._param("name",e)]),e=void 0):b=h._("__JHASH__6aj3VtUl3iu__JHASH__"):b=d("WAWebGetNotificationStrings").getPluralMessageNotificationBody(c.unreadCount):a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="sender_invite"?a.templateParams&&a.templateParams[0]==="true"?b=h._("__JHASH__7o4U1sgrj9d__JHASH__"):b=h._("__JHASH__OWzIPA9T2wW__JHASH__"):b=d("WAWebGetNotificationStrings").getNotificationMessageBody(a);return{body:b.toString(),author:e}}function j(){return d("WAWebUA").UA.isBlink&&d("WAWebUA").UA.os===d("WAWebUA").OS_TYPE.MAC&&!d("WAWebUA").UA.isElectron}g.WAMsgNotification=a;g.getNotificationParts=i;g.shouldReplaceMsgNotificationManually=j}),226);
__d("WAWebStateConcern",["WALogger","WAWebBaseMirror","WAWebBaseModel","WAWebCollections","WAWebProxyStateFactory","WAWebStreamModel"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose([""," given invalid object for ",": ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," was not supplied the "," model with keys ","."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['Unknown StateHOC concern type "','"']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['READ ONLY: Cannot write to proxied property "','", created in <'," />, it is not writable."]);k=function(){return a};return a}b("WAWebCollections");function l(a){if(typeof a==="string")return a;return a.toString?a.toString():"Invalid Object"}function m(a,b,c,e){var f={$ProxyState$ComponentName:{value:a},proxyBitMask:{value:d("WAWebBaseMirror").genBitMask(b.prototype.mirrorMask,c)}},g=function(){var b=c[h],g={};g.enumerable=!0;g.get=function(){return this.$ProxyState$state.get(b)};g.set=function(){d("WALogger").ERROR(k(),b,a)};e||(g.set=function(a){this.$ProxyState$state.set(b,a)});f[b]=g};for(var h=0;h<c.length;h++)g();function i(a){b.call(this,a)}i.prototype=Object.create(b.prototype,f);i.prototype.constructor=i;return i}a=function(){function a(a,b,c,e,f){f===void 0&&(f=!1);this.componentName=a;this.name=b;this.$1=e;this.keys=c;e=d("WAWebProxyStateFactory").ProxyStates[b];e||d("WALogger").ERROR(j(),b).sendLogs("state-hoc-error");this.$2=e;this.$3=m(a,e,c,f)}var b=a.prototype;b.getModel=function(a){return a instanceof this.$2?a.$ProxyState$state:a};b.getModelAndValidate=function(a){a=a instanceof this.$2?a.$ProxyState$state:a;if(!a){d("WAWebStreamModel").Stream.mode===d("WAWebStreamModel").StreamMode.MAIN&&d("WALogger").ERROR(i(),this.componentName,this.name,String(this.keys)).sendLogs("state-hoc-error");return null}if(!(a instanceof d("WAWebBaseModel").BaseModel)){d("WALogger").ERROR(h(),this.componentName,this.name,l(a)).sendLogs("state-hoc-error");return null}return a};b.createProxy=function(a){return new this.$3(a)};b.attachConcern=function(a,b,c){a.incObservers(!this.$1),a.mirror.addListener(c,b,this)};b.detachConcern=function(a,b){a.decObservers(),a.mirror.removeListener(b)};return a}();g["default"]=a}),98);
__d("WAWebArrowForwardIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="arrow-forward";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=30;m=30;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 30 30",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 30 30",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",d:"M15,7l-1.4,1.4l5.6,5.6H7v2h12.2l-5.6,5.6L15,23l8-8L15,7z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.ArrowForwardIcon=a}),98);
__d("WAWebGetThreadType",["WAWebGroupType","WAWebWamEnumThreadType"],(function(a,b,c,d,e,f,g){function a(a){if(a.isBroadcast)return d("WAWebWamEnumThreadType").THREAD_TYPE.BROADCAST;else if(a.isNewsletter)return d("WAWebWamEnumThreadType").THREAD_TYPE.CHANNEL;a=a==null?void 0:a.groupMetadata;if(!a)return d("WAWebWamEnumThreadType").THREAD_TYPE.INDIVIDUAL;switch(a.groupType){case d("WAWebGroupType").GroupType.COMMUNITY:return d("WAWebWamEnumThreadType").THREAD_TYPE.PARENT_GROUP;case d("WAWebGroupType").GroupType.DEFAULT:return d("WAWebWamEnumThreadType").THREAD_TYPE.GROUP;case d("WAWebGroupType").GroupType.LINKED_SUBGROUP:return d("WAWebWamEnumThreadType").THREAD_TYPE.SUB_GROUP;case d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP:return d("WAWebWamEnumThreadType").THREAD_TYPE.DEFAULT_SUB_GROUP;case d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP:return d("WAWebWamEnumThreadType").THREAD_TYPE.SUB_GROUP}}g.getThreadType=a}),98);
__d("WAWebWamEnumUserRoleType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEMBER:0,ADMIN:1,CADMIN:2});f.USER_ROLE_TYPE=a}),66);
__d("WAWebGetUserRole",["WAWebWamEnumUserRoleType"],(function(a,b,c,d,e,f,g){function a(a){a=a==null?void 0:a.groupMetadata;if(a==null)return null;var b=a.participants.iAmAdmin();a=b&&a.isParentGroup;if(a===!0)return d("WAWebWamEnumUserRoleType").USER_ROLE_TYPE.CADMIN;else if(b===!0)return d("WAWebWamEnumUserRoleType").USER_ROLE_TYPE.ADMIN;return d("WAWebWamEnumUserRoleType").USER_ROLE_TYPE.MEMBER}g.getUserRole=a}),98);
__d("WAWebWamEnumChatFilterActionTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({OPEN:1,SELECT_FILTER:2,SEARCH_WITH_FILTER:3,SEARCH:4,SEARCH_ITEM_SELECTED:5,SEARCH_MSG_SENT:6,UNSELECT_FILTER:7,AUTO_CLEAR_FILTER:8,VIEW:9,GROUP_NAVIGATION:10,GROUP_DISCOVERY:11,GROUP_JOIN:12,SUBGROUP_SWITCHER_CLICK:13,SUBGROUP_MENTION_CLICK:14,COMMUNITY_RICH_SYSTEM_MESSAGE_CLICK:15,GROUP_SYSTEM_MESSAGE_CLICK:16,NESTING_VIEW_COMMUNITY_CLICK:17,SELECT_COMMUNITY_ADMINS_CAN_ADD_GROUPS:18,SELECT_EVERYONE_CAN_ADD_GROUPS:19,GROUP_JOIN_REQUEST:20,NOTIFICATION_RECEIVED:21,NOTIFICATION_RENDERED:22,TAP_TO_OPEN:23,TAP_TO_REPLY:24,VOIP_CALLBACK:25,VOIP_MESSAGE:26,VOIP_DECLINE:27,MARK_AS_READ:28,AI_NEW_CHAT_CLICK:29,AI_TAB_SELECTION_CLICK:30,AI_PERSONA_SELECTION_CLICK:31,AI_TOS_VIEW:32,AI_TOS_ACCEPT_CLICK:33,AI_TOS_DISMISS_CLICK:34,AI_NEW_UGC_CLICK:35,AI_UGC_CREATION_START_CLICK:36,AI_GENDER_AGE_SELECTION_CLICK:37,AI_PERSONALITY_SELECTION_CLICK:38,AI_INTEREST_SELECTION_CLICK:39,AI_AVATAR_SELECTION_CLICK:40,AI_NAME_SELECTION_CLICK:41,AI_UGC_CREATION_FINISH_CLICK:42,REQUEST_WAITLIST_DIALOG_APPEAR:43,REQUEST_WAITLIST_SELECT:44,FILTER_VIEWED:45,FILTER_EMPTY_STATE_VIEWED:46,BUSINESS_SERP_LOADED:47,BIZ_SEE_MORE_CLICKED:48,IMPRESSION:49,BIZ_SEARCH_SET_LOCATION_CLICKED:50,CLOSE_BTN_CLICKED:51,AI_CHAT_CLICK:52,NEW_CHAT_CLICK:53,SERP_LOADED:54});f.CHAT_FILTER_ACTION_TYPES=a}),66);
__d("WAWebWamEnumSurfaceType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT:1,CHATLIST:2,GALLERY:3,COMMUNITY_HOME:4,COMMUNITY_TAB:5,COMMUNITY_NAV:6,COMMUNITY_NAV_SHEET:7,COMMUNITY_SETTINGS:8,GROUP_INFO:9,NOTIFICATION:10,EXPRESSIONS_EMOJI:11,INVITE_NON_WA_CONTACT:12});f.SURFACE_TYPE=a}),66);
__d("WAWebGroupJourneyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatFilterActionTypes","WAWebWamEnumSurfaceType","WAWebWamEnumThreadType","WAWebWamEnumTsSurface","WAWebWamEnumUserRoleType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({GroupJourney:[4512,{actionType:[1,d("WAWebWamEnumChatFilterActionTypes").CHAT_FILTER_ACTION_TYPES],appSessionId:[2,d("WAWebWamCodegenUtils").TYPES.STRING],groupSize:[3,d("WAWebWamCodegenUtils").TYPES.INTEGER],surface:[4,d("WAWebWamEnumSurfaceType").SURFACE_TYPE],threadType:[5,d("WAWebWamEnumThreadType").THREAD_TYPE],uiSurface:[7,d("WAWebWamEnumTsSurface").TS_SURFACE],userRole:[6,d("WAWebWamEnumUserRoleType").USER_ROLE_TYPE]},[1,1,1],"regular"]},{GroupJourney:[]});g.GroupJourneyWamEvent=a}),98);
__d("WAWebCommunityGroupJourneyEventImpl",["WALogger","WAWebGetSharedSessionId","WAWebGetThreadType","WAWebGetUserRole","WAWebGroupJourneyWamEvent","WAWebWamEnumSurfaceType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["No relevant communtiy journey log for this invite modal"]);h=function(){return a};return a}a=function(){function a(a){var b=a.action,c=a.surface;a=a.chat;this.action=b;this.surface=c;this.chat=a;this.sessionId=d("WAWebGetSharedSessionId").getSharedSessionId()}a.inviteModalSourceToSurface=function(a){switch(a){case"community_home":return d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_HOME;case"community_nav":return d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_NAV;case"subgroup_switcher":return d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_NAV_SHEET;case"invite_link":return d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT;case"group_mention":return d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT;case"other":d("WALogger").ERROR(h());return null}};var b=a.prototype;b.shouldLogThreadType=function(){switch(this.surface){case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHATLIST:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_HOME:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_TAB:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_NAV:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_NAV_SHEET:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.COMMUNITY_SETTINGS:case d("WAWebWamEnumSurfaceType").SURFACE_TYPE.GROUP_INFO:return!0;default:return!1}};b.getThreadType=function(){var a;return!this.shouldLogThreadType()||((a=this.chat)==null?void 0:a.groupMetadata)==null?null:d("WAWebGetThreadType").getThreadType(this.chat)};b.getGroupSize=function(){var a;a=(a=this.chat)==null?void 0:a.groupMetadata;return a==null?0:(a=a.participants.length)!=null?a:0};b.getUserRole=function(){return d("WAWebGetUserRole").getUserRole(this.chat)};b.commit=function(){var a=new(d("WAWebGroupJourneyWamEvent").GroupJourneyWamEvent)({actionType:this.action,appSessionId:this.sessionId,surface:this.surface,groupSize:this.getGroupSize()}),b=this.getThreadType();b!=null&&(a.threadType=b);b=this.getUserRole();b!=null&&(a.userRole=b);a.commit()};return a}();g.CommunityGroupJourneyEvent=a}),98);
__d("WAWebMessageCommunityCard.react",["WAWebArrowForwardIcon","WAWebChatCollection","WAWebChatGroupUtils","WAWebCmd","WAWebCommunityGeneralChatImage.react","WAWebCommunityGroupJourneyEventImpl","WAWebCommunitySquircleIcon","WAWebDetailImage.react","WAWebFlex.react","WAWebGroupMetadataCollection","WAWebText_DONOTUSE.react","WAWebUISpacing","WAWebUnstyledButton.react","WAWebWamEnumChatFilterActionTypes","WAWebWamEnumSurfaceType","WAWebWid","WAWebWidFactory","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={communitySquircle:{color:"x1oc2adj",$$css:!0},footerButton:{color:"x1jrnqrx",display:"x78zum5",justifyContent:"xl56j7k",borderTop:"x19zluu3",width:"xh8yej3",$$css:!0},list:{textAlign:"x1yc453h",position:"x1n2onr6",$$css:!0}};function a(a){var b=a.title,e=a.subtitle,f=a.body,g=a.footer,h=a.subgroupId,l=a.openNavigation,m=l===void 0?!1:l,n=a.onFooterClick,o=null;a.communityId&&(o=a.communityId instanceof c("WAWebWid")?a.communityId:d("WAWebWidFactory").createWid(a.communityId));var p=h?d("WAWebChatCollection").ChatCollection.get(h):null;a=p?Boolean(d("WAWebChatGroupUtils").isCommunityAnnouncementGroup(p)||((l=p.groupMetadata)==null?void 0:l.isParentGroup)):!1;l=p?d("WAWebChatGroupUtils").isCommunityGeneralGroup(p):!1;var q=function(a){var b;if(!o||!((b=c("WAWebGroupMetadataCollection").get(o))==null?void 0:b.hasJoined()))return;p&&new(d("WAWebCommunityGroupJourneyEventImpl").CommunityGroupJourneyEvent)({action:d("WAWebWamEnumChatFilterActionTypes").CHAT_FILTER_ACTION_TYPES.COMMUNITY_RICH_SYSTEM_MESSAGE_CLICK,surface:d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT,chat:p}).commit();a&&(a.preventDefault(),a.stopPropagation());if(n)return n();if(!m){d("WAWebCmd").Cmd.openCommunityTabbedInfo(o);return}d("WAWebCmd").Cmd.openCommunityHome(o)},r;l||(o?r=j.jsx(d("WAWebDetailImage.react").DetailImage,{id:o,shape:d("WAWebDetailImage.react").DetailImageShape.Squircle}):r=j.jsx(d("WAWebCommunitySquircleIcon").CommunitySquircleIcon,{width:49,height:49,iconXstyle:k.communitySquircle}));var s;l?s=j.jsx("div",{className:"x14yjl9h xudhj91 x18nykt9 xww2gxu xpyat2d x1exxlbk x1n2onr6",children:j.jsx(d("WAWebCommunityGeneralChatImage.react").CommunityGeneralChatImage,{})}):h&&!a&&(s=j.jsxs(j.Fragment,{children:[j.jsx(d("WAWebDetailImage.react").DetailImage,{id:h,xstyle:d("WAWebUISpacing").uiMargin.end8}),j.jsx(d("WAWebArrowForwardIcon").ArrowForwardIcon,{directional:!0,xstyle:d("WAWebUISpacing").uiMargin.end8})]}));l=j.jsxs(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",children:[s,r]});a=j.jsxs("div",{className:(i||(i=c("stylex")))(d("WAWebUISpacing").uiMargin.top8,d("WAWebUISpacing").uiMargin.bottom12),children:[j.jsx(d("WAWebText_DONOTUSE.react").TextHeader,{color:"primary",weight:"medium",level:"3",children:b}),e!=null?j.jsx(d("WAWebText_DONOTUSE.react").Text,{as:"p",size:"13",children:e}):null]});h=g!=null?j.jsx(c("WAWebUnstyledButton.react"),{xstyle:[k.footerButton,d("WAWebUISpacing").uiPadding.all12],onClick:q,children:j.jsx(d("WAWebText_DONOTUSE.react").Text,{as:"span",size:"14",weight:"medium",children:g})}):null;return j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:i(d("WAWebUISpacing").uiPadding.horiz24,d("WAWebUISpacing").uiPadding.top12,f&&d("WAWebUISpacing").uiPadding.bottom16),children:[l,a,f]}),h]})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.items;return j.jsx("ul",{className:(i||(i=c("stylex")))(k.list,d("WAWebUISpacing").uiMargin.start24),children:a.map(function(a,b){return j.jsx("li",{className:"xo7wnuk xbo2z39 x1hmns74",children:a},b)})})}b.displayName=b.name+" [from "+f.id+"]";g.MessageCommunityCard=a;g.BulletedList=b}),98);
__d("WAWebMessageCommunityLinkGroup.react",["fbt","WAWebFormatParticipantNames","WAWebGroupMetadataCollection","WAWebMessageCommunityCard.react","WAWebUserPrefsMeUser","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.templateParams,e=a.clickable,f=a.author;a=a.chat;var g=b[0],i=c("WAWebGroupMetadataCollection").get(g);i=i==null?void 0:i.participants.iAmAdmin();var l=[h._("__JHASH__pCiqeq0yBX6__JHASH__"),h._("__JHASH__rwrtoAacgAO__JHASH__")],m=[h._("__JHASH__W53NBdEsiLY__JHASH__"),h._("__JHASH__XygNjxbjrQ6__JHASH__")],n=i===!0?h._("__JHASH__lRPx9CnFwho__JHASH__"):h._("__JHASH__NX3VVlswriZ__JHASH__");return j.jsx(d("WAWebMessageCommunityCard.react").MessageCommunityCard,{communityId:g,subgroupId:a.id,title:k({templateParams:b,clickable:e,author:f}),body:j.jsx(d("WAWebMessageCommunityCard.react").BulletedList,{items:i===!0?m:l}),footer:n,openNavigation:!i})}a.displayName=a.name+" [from "+f.id+"]";function k(a){var b=a.templateParams,c=a.clickable;a=a.author;var e=a?d("WAWebFormatParticipantNames").getFormattedName(a,!c):null;c=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:b[0],asString:!c,alternativeStringName:b[1]});b=Boolean(!c);a=d("WAWebUserPrefsMeUser").isMeAccount(a);if(!b)return a?h._("__JHASH__ezelXtLDAj7__JHASH__",[h._param("community",c)]):e!=null?h._("__JHASH__rvf8u1jwrNE__JHASH__",[h._param("author",e),h._param("community",c)]):h._("__JHASH__dDe27rByDp4__JHASH__",[h._param("community",c)]);return a?h._("__JHASH__zzXfF03-Qsf__JHASH__"):e!=null?h._("__JHASH__R_yqB4sONTV__JHASH__",[h._param("author",e)]):h._("__JHASH__77l7pNVbILb__JHASH__")}g.MessageCommunityLinkGroup=a;g.communityLinkGroupTitle=k}),226);
__d("WAWebMessageCommunitySubgroupWelcome.react",["fbt","WAWebFormatParticipantNames","WAWebMessageCommunityCard.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.templateParams,c=a.clickable,e=a.author;a=a.chat;var f=b[0],g=[h._("__JHASH__LhwwWhjwZ7W__JHASH__"),h._("__JHASH__6jAxX8lDZTr__JHASH__")],i=h._("__JHASH__dPRZGC0imB0__JHASH__");return j.jsx(d("WAWebMessageCommunityCard.react").MessageCommunityCard,{communityId:f,subgroupId:a.id,title:k({templateParams:b,clickable:c,author:e}),body:j.jsx(d("WAWebMessageCommunityCard.react").BulletedList,{items:g}),footer:i,openNavigation:!0})}a.displayName=a.name+" [from "+f.id+"]";function k(a){var b=a.templateParams,c=a.clickable;a=a.author;a=a?d("WAWebFormatParticipantNames").getFormattedName(a,!c):null;c=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:b[0],asString:!c,alternativeStringName:b[1]});b=Boolean(!c);return!b?a!=null?h._("__JHASH__7y4M-hzXFaN__JHASH__",[h._param("user_name",a),h._param("community",c)]):h._("__JHASH__06Mw6d2V3jH__JHASH__",[h._param("community",c)]):a!=null?h._("__JHASH__WFB2V8dn73F__JHASH__",[h._param("user_name",a)]):h._("__JHASH__odOGz_1GOLk__JHASH__")}g.MessageCommunitySubgroupWelcome=a;g.communitySubgroupWelcomeTitle=k}),226);
__d("WAWebMessageCommunityWelcomeAdmin.react",["fbt","WAWebChatCommunityUtils","WAWebFormatLinkNotification","WAWebGroupMetadataCollection","WAWebMessageCommunityCard.react","WAWebUISpacing","WAWebWid","WAWebWidFactory","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react");function a(a){var b=a.templateParams,e=a.chat;a=a.author;var f=b[0]instanceof c("WAWebWid")?b[0]:d("WAWebWidFactory").createWid(b[0]),g=c("WAWebGroupMetadataCollection").get(f);(g==null?void 0:g.parentGroup)&&(f=g.parentGroup);g=d("WAWebChatCommunityUtils").isCommunityCreator(e);if(!g)return k.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.horiz12,d("WAWebUISpacing").uiPadding.top5,d("WAWebUISpacing").uiPadding.bottom6),children:d("WAWebFormatLinkNotification").formatLinkNotification("community_create",a,null,b,!0)});g=k.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.horiz10),children:h._("__JHASH__tGl1autT1_4__JHASH__")});var i=h._("__JHASH__ZfdfswZuohB__JHASH__");return k.jsx(d("WAWebMessageCommunityCard.react").MessageCommunityCard,{communityId:f,subgroupId:e.id,title:l({templateParams:b,chat:e,author:a}),subtitle:g,footer:i})}a.displayName=a.name+" [from "+f.id+"]";function l(a){var b=a.templateParams,c=a.chat;a=a.author;c=d("WAWebChatCommunityUtils").isCommunityCreator(c);return!c?d("WAWebFormatLinkNotification").formatLinkNotifAsFbt("community_create",a,null,b):h._("__JHASH__-YcE06gfnUI__JHASH__")}l.displayName=l.name+" [from "+f.id+"]";g.MessageCommunityWelcomeAdmin=a;g.communityWelcomeAdminTitle=l}),226);
__d("WAWebMessageCommunityWelcomeMember.react",["fbt","WAWebFormatParticipantNames","WAWebMessageCommunityCard.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.templateParams,c=a.clickable,e=a.author;a=a.chat;b=b[0];e=e?d("WAWebFormatParticipantNames").getFormattedName(e,!c):null;c=[j.jsx(j.Fragment,{children:e==null||e===""?h._("__JHASH__MPVn9flpZsh__JHASH__"):h._("__JHASH__ibt7WXNQt5C__JHASH__",[h._param("author",e)])}),h._("__JHASH__0OEhITglM34__JHASH__")];e=h._("__JHASH__tlcmxWFOsfg__JHASH__");return j.jsx(d("WAWebMessageCommunityCard.react").MessageCommunityCard,{communityId:b,subgroupId:a.id,title:k(),body:j.jsx(d("WAWebMessageCommunityCard.react").BulletedList,{items:c}),footer:e})}a.displayName=a.name+" [from "+f.id+"]";function k(){return h._("__JHASH__xo6lb8SJnjj__JHASH__")}k.displayName=k.name+" [from "+f.id+"]";g.MessageCommunityWelcomeMember=a;g.communityWelcomeMemberTitle=k}),226);
__d("WAWebBizGetCustomUserJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("customURLResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("user");a=a.attrUserJid("jid");return{user:{jid:a}}});function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{smax_id:b.SMAX_ID(c("WAWapDeprecatedSmaxID").BtmCustomUrlGetUser),xmlns:"fb:thrift_iq",type:"get",to:b.S_WHATSAPP_NET,id:b.generateId()},b.wap("custom_url",null,b.wap("path",null,a)));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText);return a.result});return i.apply(this,arguments)}g.getUserByCustomURL=a}),98);
__d("WAWebBizGetWidFromPathCustomUrlAction",["WALogger","WAWebBackendErrors","WAWebBizGetCustomUserJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[custom-url] Error fetching user by custom url ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebBizGetCustomUserJob").getUserByCustomURL(a));return d("WAWebWidFactory").createUserWid(a.user.jid)}catch(a){if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError){a.statusCode!==404&&d("WALogger").ERROR(h(),a.message).sendLogs("get-user-by-custom-url-error");return null}throw a}});return i.apply(this,arguments)}g.getWidfromPath=a}),98);
__d("WAWebUimContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a(null);g["default"]=b}),98);
__d("useWAWebUIM",["WAWebUimContext","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useContext;function a(){var a=i(c("WAWebUimContext"));return a}g["default"]=a}),98);
__d("WAWebUimUie.react",["WAWebUim","WAWebUimContext","react","useWAWebLazyRef","useWAWebOnUnmount","useWAWebStableCallback","useWAWebUIM","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;a=i||d("react");var j=h||(h=c("react")),k=a.cloneElement;b=a.forwardRef;var l=a.useCallback,m=a.useEffect,n=a.useImperativeHandle,o=a.useRef,p=null;e=b(function(a,b){var e=a.uimState,f=e===void 0?d("WAWebUim").UIMState.ACTIVE:e;e=a.requestRecentFocusOnUnmount;var g=e===void 0?!0:e;e=a.popable;var h=e===void 0?!1:e;e=a.escapable;var i=e===void 0?!1:e,p=a.displayName,r=a.children;e=a.dismissOnWindowResize;var s=e===void 0?!1:e,t=c("useWAWebUIM")(),u=q(a.requestFocus),v=c("useWAWebStableCallback")(a.requestDismiss),w=o(null),x=l(function(){var a=w.current;if(a==null)return;return a instanceof HTMLElement?a:a.getElement==null?void 0:a.getElement()},[]),y=c("useWAWebLazyRef")(function(){var a,b={displayName:p,popable:h,escapable:i,uimState:f,requestFocus:u,requestDismiss:v,getNode:x,dismissOnWindowResize:s};return(a=t==null?void 0:t.branch(b))!=null?a:new(d("WAWebUim").UIM)(b)});m(function(){y.current.setState(f)},[f,y]);c("useWAWebOnUnmount")(function(){y.current.pop(d("WAWebUim").DismissReason.LIFECYCLE,g)});n(b,function(){return{activate:function(){y.current.activate()},getElement:x}});if(!r)return null;e=function(a){var b;b=(b=a==null?void 0:a.getComponent==null?void 0:a.getComponent())!=null?b:a;w.current=b;a=r.ref;if(!a)return;typeof a==="function"?a(b):a.current=b};a=k(r,{ref:e});return j.jsx(c("WAWebUimContext").Provider,{value:y.current,children:a})});function q(a){var b=c("useWAWebUnmountSignal")(),d=o(!1),e=o(null),f=function(){if(!a)return;p&&self.clearTimeout(p);e.current=p=self.setTimeout(function(){a(),e.current=p=null},0)},g=c("useWAWebStableCallback")(function(){a&&!b.aborted?f():d.current=!0});m(function(){d.current&&f();return function(){p&&e.current===p&&(self.clearTimeout(p),p=null)}},[]);return g}g.UIE=e}),98);
__d("WAWebFlowComponent_DEPRECATED.react",["WANullthrows","WAWebUimContext","WAWebUimUie.react","WAWebVelocityTransitionGroup","react"],(function(a,b,c,d,e,f,g){var h,i;a=i||d("react");var j=h||(h=c("react"));b=a.Component;var k=a.cloneElement,l={container:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",left:null,right:null,width:"xh8yej3",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.state={$1:[],$2:"default",$3:0,$4:!1,isPushed:!1},d.setRefUIE=function(a){d.refUIE=a},d.getElement=function(){var a;return(a=d.refUIE)==null?void 0:a.getElement()},d.popAndUpdate=function(a,b){var c=d.state.$1;if(c.length<2){d.pop(b);return}a=k(c[c.length-2],a);c[c.length-2]=a;d.pop(b)},d.push=function(a,b){b===void 0&&(b=d.props.pushTransition),d.setState(function(c){return{$1:c.$1.concat(a),$2:b,$3:++c.$3,$4:!1,isPushed:!0}})},d.pop=function(a){a===void 0&&(a=d.props.popTransition);var b=d.state.$1.slice(0,-1);!b.length?d.state.$4||d.setState({$4:!0},d.end):d.setState(function(c){return{$1:b,$2:a,$3:--c.$3,isPushed:!1}})},d.end=function(a){d.props.onEnd?d.props.onEnd(a):c("WANullthrows")(d.context).requestDismiss(a)},d.stackSize=function(){return d.state.$1.length},d.requestFocus=function(){d.props.requestFocus&&d.props.requestFocus()},b)||babelHelpers.assertThisInitialized(d)}var e=b.prototype;e.handleRequestDismiss=function(){this.pop()};e.render=function(){var a=this.state,b=a.$1,e=a.$2,f=a.$3;a=a.isPushed;if(b.length===0)return null;var g=b[b.length-1];g=k(g,{isPushed:a});g=j.jsx(d("WAWebUimUie.react").UIE,{displayName:this.props.displayName+"-"+f,escapable:!0,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.handleRequestDismiss.bind(this),children:g},f);return j.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:e,xstyle:l.container,children:this.props.removeTopDrawer?g:b})};return b}(b);e.contextType=c("WAWebUimContext");e.defaultProps={removeTopDrawer:!0,pushTransition:"flow-transition-drawer-push",popTransition:"flow-transition-drawer-pop",displayName:"FlowDrawer"};g["default"]=e}),98);
__d("WAWebOpenChatFlow.react",["fbt","WAAbortError","WALogger","WAPromiseDelays","WATimeUtils","WAWebBizGetWidFromPathCustomUrlAction","WAWebBotProfileCollection","WAWebCmd","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebFbtCommon","WAWebFindChatAction","WAWebFlex.react","WAWebFlowComponent_DEPRECATED.react","WAWebLinkify","WAWebMiscBrowserUtils","WAWebQueryExistsJob","WAWebSpinner.react","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["OpenChatFlow chatWid couldn't be created from provided props."]);j=function(){return a};return a}var k=i||c("react"),l=250,m=500,n=new Map();function a(){n.clear()}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isUser())return a;var b=n.get(a.user);if(b)return b;b=(yield d("WAWebQueryExistsJob").queryWidExists(a));b=b==null?a:b.wid;n.set(a.user,b);return b});return p.apply(this,arguments)}e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$OpenChatFlow2=function(){e.$OpenChatFlow1&&e.$OpenChatFlow1.controller.abort(),e.$OpenChatFlow1=void 0,e.end()},e.error=function(){e.push(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return e.end()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__9QVtpa6tgpD__JHASH__")}))},b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.componentDidMount=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this,e=!1,f=new AbortController();d("WAPromiseDelays").delayMs(l).then(function(){if(f.signal.aborted)throw new(d("WAAbortError").AbortError)();e=!0;a.push(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__1bODDxe_PHW__JHASH__"),onCancel:a.$OpenChatFlow2,cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),children:k.jsx(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",children:k.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24})})}))})["catch"](d("WAAbortError").catchAbort(function(){}));var g=Date.now(),i=new AbortController(),j=i.signal,n=(yield this.getChatWid());if(n==null){var p=this.props.fallbackURL;p!=null&&c("WAWebMiscBrowserUtils").open(p);this.end();return}p=o(n).then(function(a){var b;b=(b=d("WAWebBotProfileCollection").BotProfileCollection.getDefaultBot())==null?void 0:b.id;if(a.isBot()&&(b==null||!b.equals(a)))throw c("err")("invalid bot chat");return d("WAWebFindChatAction").findChat(a,"debugOpenChatFlow",{forceUsync:!0})}).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(j.aborted)throw new(d("WAAbortError").AbortError)();e||f.abort();var c=Date.now()-g;c=e?Math.max(m+l-c,0):0;yield a.openChat(b);yield d("WAPromiseDelays").delayMs(c);a.end();a.props.onSuccess(b)});return function(a){return c.apply(this,arguments)}}())["catch"](d("WAAbortError").catchAbort(function(){}))["catch"](function(){f.abort(),a.error()});this.$OpenChatFlow1={controller:i,promise:p}});function e(){return a.apply(this,arguments)}return e}();f.getChatWid=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this.props,b=a.chatId;a=a.customURL;if(b!=null)return b;if(a!=null){var c=(yield d("WAWebBizGetWidFromPathCustomUrlAction").getWidfromPath(a));return c}d("WALogger").ERROR(j()).devConsole({chatId:b,customURL:a})});function c(){return a.apply(this,arguments)}return c}();f.openChat=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.props,c=b.msgText,e=b.ctwaContextLinkData;if(e){b=d("WAWebLinkify").findLink(e.sourceUrl||"",!1,d("WAWebUserPrefsMeUser").getMaybeMeUser());b=(b==null?void 0:b.suspiciousCharacters)&&b.suspiciousCharacters.size>0;b&&(e=null)}e&&(c=e.icebreaker);a.active&&c?(d("WAWebComposeBoxActions").ComposeBoxActions.paste(a,c),e&&d("WAWebComposeBoxActions").ComposeBoxActions.setCtwaContextLinkData(a,e)):(c&&a.setComposeContents({text:c,timestamp:d("WATimeUtils").unixTime()}),yield d("WAWebCmd").Cmd.openChatFromUnread(a).then(function(b){b&&(d("WAWebComposeBoxActions").ComposeBoxActions.focus(a),e&&d("WAWebComposeBoxActions").ComposeBoxActions.setCtwaContextLinkData(a,e))}));this.props.sendLogAttributes!=null&&d("WAWebComposeBoxActions").ComposeBoxActions.addMsgSendingLogAttributes(a,this.props.sendLogAttributes)});function c(b){return a.apply(this,arguments)}return c}();return e}(c("WAWebFlowComponent_DEPRECATED.react"));e.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none",displayName:"OpenChatFlow"};g.clearChatIdCorrectionCache=a;g.OpenChatFlow=e}),226);
__d("WAWebStatusV3GatingUtils",["WAWebABProps","WAWebConnModel"],(function(a,b,c,d,e,f,g){var h=["\ud83d\ude0d","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude4f","\ud83d\udc4f","\ud83c\udf89","\ud83d\udcaf"],i=new Set(["\ud83d\ude0d","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude4f","\ud83d\udc4f","\ud83c\udf89","\ud83d\udcaf","\ud83d\udc4d","\u2764","\ud83d\ude0a","\ud83e\udd70","\ud83e\udd29","\ud83d\udc9a","\ud83e\udd23","\ud83d\ude06","\ud83d\udd25","\ud83d\ude4c","\ud83e\udd73","\ud83d\ude2d","\ud83d\ude14","\ud83e\udd7a","\ud83d\ude32","\ud83e\udd2f","\ud83d\ude21","\ud83d\ude24"]);function a(){return d("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_status_enabled")}function b(){return d("WAWebConnModel").Conn.isSMB?d("WAWebABProps").getABPropConfigValue("smb_status_logging_enabled"):!1}function c(){return d("WAWebABProps").getABPropConfigValue("status_quick_reply_enabled")}function e(){try{var a=JSON.parse(d("WAWebABProps").getABPropConfigValue("status_reaction_emojis"));a=a.map(function(a){return String.fromCodePoint(a)}).filter(function(a){return i.has(a)});return a.length===0?h:a}catch(a){return h}}function f(){return d("WAWebABProps").getABPropConfigValue("status_inline_link_preview_enabled")}function j(){return d("WAWebABProps").getABPropConfigValue("profile_photo_rings_for_status_on_web_enabled")}function k(){return d("WAWebABProps").getABPropConfigValue("voice_status_receipt_on_web_enabled")}g.canSeeStatusV3OnContact=a;g.smbStatusLoggingEnabled=b;g.areStatusQuickRepliesEnabled=c;g.statusQuickReplyEmojis=e;g.statusV3LinkPreviewEnabled=f;g.isStatusV3ProfilePhotoRingEnabled=j;g.isStatusV3VoiceStatusReceiptEnabled=k}),98);
__d("WAWebFormatConfiguration",["WAWebABProps","WAWebBotGating","WAWebFormatMutators","WAWebGroupMentionFormatMutator","WAWebRawGroupMentionFormatMutator","WAWebStatusV3GatingUtils","cr:6000","gkx"],(function(a,b,c,d,e,f,g){a=function(a){a=a===void 0?{}:a;var b=a.selectable;a=a.emojiXstyle;return[[[d("WAWebFormatMutators").Emoji,{selectable:b,emojiXstyle:a}]]]};e=function(a){a=a===void 0?{}:a;a=a.selectable;return[[[d("WAWebFormatMutators").Emoji,{selectable:a,size:"large"}]]]};f=function(a){a=a===void 0?{}:a;var b=a.links,c=a.selectable,e=a.linkXstyle;a=a.emojiXstyle;return[[[d("WAWebFormatMutators").Code,{selectable:c}]],[[d("WAWebStatusV3GatingUtils").statusV3LinkPreviewEnabled()?d("WAWebFormatMutators").StatusLink:d("WAWebFormatMutators").Link,{links:b,selectable:c,linkXstyle:e}]],[[d("WAWebFormatMutators").Bold,{selectable:c}],[d("WAWebFormatMutators").Italic,{selectable:c}],[d("WAWebFormatMutators").Strikethrough,{selectable:c}]],[[d("WAWebFormatMutators").Emoji,{selectable:c,size:"xlarge",emojiXstyle:a}]]]};var h=function(a){a=a===void 0?{}:a;a=a.selectable;return[[[d("WAWebFormatMutators").Code,{selectable:a}]],[[d("WAWebFormatMutators").Bold,{selectable:a}],[d("WAWebFormatMutators").Italic,{selectable:a}],[d("WAWebFormatMutators").Strikethrough,{selectable:a}]],[[d("WAWebFormatMutators").Emoji,{selectable:a}]]]},i=function(a){a=a===void 0?{}:a;a=a.selectable;return[[[d("WAWebFormatMutators").Emoji,{selectable:a}]]]},j=function(a){a=a===void 0?{}:a;var e=a.mentions,f=a.groupMentions,g=a.links,h=a.phoneNumbers,i=a.selectable,j=a.trusted,k=a.fromMe,l=a.fromChatWid,m=a.commands,n=a.parseInlineCode;n=n===void 0?!1:n;var o=a.parseLists;o=o===void 0?!1:o;a=a.parseQuotes;a=a===void 0?!1:a;h=j&&h.length>0?[[d("WAWebFormatMutators").PhoneNumber,{phoneNumbers:h,selectable:i,fromMe:k}]]:null;var p;(d("WAWebBotGating").isBizBot3pEnabled()||d("WAWebBotGating").isMetaBotCommandsEnabled())&&m&&m.length>0&&(p=[[d("WAWebFormatMutators").BotCommand,{commands:m,selectable:i}]]);return[[[d("WAWebFormatMutators").Code,{selectable:i}]],n?[[d("WAWebFormatMutators").InlineCode,{selectable:i}]]:null,o?[[d("WAWebFormatMutators").BulletedListItem,{selectable:i}]]:null,o?[[d("WAWebFormatMutators").HyphenListItem,{selectable:i}]]:null,o?[[d("WAWebFormatMutators").BulletedList,{selectable:i}]]:null,o?[[d("WAWebFormatMutators").NumberedListItem,{selectable:i}]]:null,o?[[d("WAWebFormatMutators").NumberedList,{selectable:i}]]:null,j?[[d("WAWebFormatMutators").Link,{links:g,selectable:i}]]:null,e?[[d("WAWebFormatMutators").Mention,{mentions:e,selectable:i}]]:null,f?[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:f,selectable:i,fromChatWid:l}]]:null,!c("gkx")("26258")&&b("cr:6000")?b("cr:6000")(i):null,h,[[d("WAWebFormatMutators").Bold,{selectable:i}],[d("WAWebFormatMutators").Italic,{selectable:i}],[d("WAWebFormatMutators").Strikethrough,{selectable:i}]],[[d("WAWebFormatMutators").Emoji,{selectable:i}]],a?[[d("WAWebFormatMutators").BlockQuote,{selectable:i}]]:null,p].filter(Boolean)},k=function(a){var b,c=a.boundary,e=a.terms,f=a.selectable,g=a.mentions;a=a.groupMentions;return[[[(b=d("WAWebFormatMutators")).TextMention,{mentions:g,selectable:f}]],[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:a,selectable:f,clickable:!1}]],[[b.Bold,{selectable:f}],[b.Italic,{selectable:f}],[b.Strikethrough,{selectable:f}]],[[b.Highlight,{terms:e,boundary:c,selectable:f,ignoreDiacritics:!0}]],[[b.Emoji,{selectable:f}]]]},l=function(a){a=a.terms;return[[[d("WAWebFormatMutators").Highlight,{terms:a,ignoreDiacritics:!0}]],[[d("WAWebFormatMutators").Emoji,{selectable:!1}]]]},m=function(a){a===void 0&&(a={});var b=d("WAWebABProps").getABPropConfigValue("enable_clear_formatted_preview");a=a;var c=a.mentions,e=a.groupMentions,f=a.selectable;a=a.isDraftMessage;return[b?null:[[d("WAWebFormatMutators").Code,{selectable:f}]],c?[[d("WAWebFormatMutators").TextMention,{mentions:c,selectable:f,lastMessage:!0,isDraftMessage:a}]]:null,e?[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:e,selectable:f,clickable:!1,lastMessage:!0,isDraftMessage:a}]]:null,b?null:[[d("WAWebFormatMutators").Bold,{selectable:f}],[d("WAWebFormatMutators").Italic,{selectable:f}],[d("WAWebFormatMutators").Strikethrough,{selectable:f}]],[[d("WAWebFormatMutators").Emoji,{selectable:f}]]].filter(Boolean)},n=function(a){var b,c=a.boundary,e=a.mentions,f=a.groupMentions,g=a.terms;a=a.selectable;return[[[(b=d("WAWebFormatMutators")).Code,{selectable:a}]],[[b.TextMention,{mentions:e,selectable:a}]],[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:f,selectable:a,clickable:!1}]],[[b.Bold,{selectable:a}],[b.Italic,{selectable:a}],[b.Strikethrough,{selectable:a}]],[[b.Highlight,{terms:g,boundary:c,selectable:a}]],[[b.Emoji,{selectable:a}]]]},o=function(a){a=a===void 0?{}:a;a=a.selectable;return[[[d("WAWebFormatMutators").Code,{selectable:a}]],[[d("WAWebFormatMutators").Bold,{selectable:a}],[d("WAWebFormatMutators").Italic,{selectable:a}],[d("WAWebFormatMutators").Strikethrough,{selectable:a}]],[[d("WAWebFormatMutators").Emoji,{selectable:a}]]]},p=function(a){var b,c=a.mentions,e=a.groupMentions;a=a.selectable;return[[[(b=d("WAWebFormatMutators")).Code,{selectable:a}]],[[b.InlineCode,{selectable:a}]],[[b.TextMention,{mentions:c,selectable:a}]],[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:e,selectable:a,clickable:!1}]],[[b.Bold,{selectable:a}],[b.Italic,{selectable:a}],[b.Strikethrough,{selectable:a}]],[[b.Emoji,{selectable:a}]],[[b.BlockQuote,{selectable:a}]]].filter(Boolean)},q=function(a){var b,c=a.mentions,e=a.groupMentions;a=a.selectable;return[[[(b=d("WAWebFormatMutators")).Code,{selectable:a}]],[[b.InlineCode,{selectable:a,quoted:!0}]],[[b.BulletedListItem,{selectable:a}]],[[b.HyphenListItem,{selectable:a}]],[[b.BulletedList,{selectable:a,quoted:!0}]],[[b.NumberedListItem,{selectable:a}]],[[b.NumberedList,{selectable:a,quoted:!0}]],[[b.TextMention,{mentions:c,selectable:a,theme:{quoted:!0}}]],[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:e,selectable:a,theme:{quoted:!0},clickable:!1}]],[[b.Bold,{selectable:a}],[b.Italic,{selectable:a}],[b.Strikethrough,{selectable:a}]],[[b.Emoji,{selectable:a}]],[[b.BlockQuote,{selectable:a,quoted:!0}]]].filter(Boolean)},r=function(a){var b,c=a.mentions,e=a.groupMentions;a=a.selectable;return[[[(b=d("WAWebFormatMutators")).Code,{selectable:a}]],[[b.RawMention,{mentions:c,selectable:a}]],[[d("WAWebRawGroupMentionFormatMutator").RawGroupMention,{groupMentions:e}]],[[b.Bold,{selectable:a}],[b.Italic,{selectable:a}],[b.Strikethrough,{selectable:a}]]].filter(Boolean)},s=function(a){var b,c=a.mentions,e=a.groupMentions,f=a.selectable;a=a.groupMetadata;return[[[(b=d("WAWebFormatMutators")).Code,{selectable:f}]],[[b.InlineCode,{selectable:f}]],[[b.RawShortNameMention,{mentions:c,selectable:f,groupMetadata:a}]],[[d("WAWebRawGroupMentionFormatMutator").RawGroupMention,{groupMentions:e}]],[[b.Bold,{selectable:f}],[b.Italic,{selectable:f}],[b.Strikethrough,{selectable:f}]],[[b.BlockQuote,{selectable:f}]]].filter(Boolean)},t=function(a){var e=a.links,f=Boolean(a.expandedFormattingEnabled);a=Boolean((a=a.bulletPointsEnabled)!=null?a:f);var g=!0;return[[[d("WAWebFormatMutators").Code,{selectable:g}]],f?[[d("WAWebFormatMutators").InlineCode,{selectable:g}]]:null,a?[[d("WAWebFormatMutators").BulletedListItem,{selectable:g}]]:null,a?[[d("WAWebFormatMutators").HyphenListItem,{selectable:g}]]:null,a?[[d("WAWebFormatMutators").BulletedList,{selectable:g}]]:null,f?[[d("WAWebFormatMutators").NumberedListItem,{selectable:g}]]:null,f?[[d("WAWebFormatMutators").NumberedList,{selectable:g}]]:null,[[d("WAWebFormatMutators").Link,{links:e,selectable:g}]],[[d("WAWebFormatMutators").Bold,{selectable:g}],[d("WAWebFormatMutators").Italic,{selectable:g}],[d("WAWebFormatMutators").Strikethrough,{selectable:g}]],!c("gkx")("26258")&&b("cr:6000")?b("cr:6000")(g):null,[[d("WAWebFormatMutators").Emoji,{selectable:g}]],f?[[d("WAWebFormatMutators").BlockQuote,{selectable:g}]]:null].filter(Boolean)},u=function(a){var e=Boolean(a==null?void 0:a.expandedFormattingEnabled);a=Boolean((a=a==null?void 0:a.bulletPointsEnabled)!=null?a:e);var f=!0;return[[[d("WAWebFormatMutators").Code,{selectable:f}]],e?[[d("WAWebFormatMutators").InlineCode,{selectable:f}]]:null,a?[[d("WAWebFormatMutators").BulletedListItem,{selectable:f}]]:null,a?[[d("WAWebFormatMutators").HyphenListItem,{selectable:f}]]:null,a?[[d("WAWebFormatMutators").BulletedList,{selectable:f}]]:null,e?[[d("WAWebFormatMutators").NumberedListItem,{selectable:f}]]:null,e?[[d("WAWebFormatMutators").NumberedList,{selectable:f}]]:null,[[d("WAWebFormatMutators").Bold,{selectable:f}],[d("WAWebFormatMutators").Italic,{selectable:f}],[d("WAWebFormatMutators").Strikethrough,{selectable:f}]],!c("gkx")("26258")&&b("cr:6000")?b("cr:6000")(f):null,[[d("WAWebFormatMutators").Emoji,{selectable:f}]],e?[[d("WAWebFormatMutators").BlockQuote,{selectable:f}]]:null].filter(Boolean)},v=function(a){a=a===void 0?{}:a;var b=a.links,c=a.selectable;a=a.trusted;return[a===!0?[[d("WAWebFormatMutators").Link,{links:b,selectable:c}]]:null,[[d("WAWebFormatMutators").Emoji,{selectable:c}]]].filter(Boolean)},w=function(a){a=a.selectable;return[[[d("WAWebFormatMutators").BoldFirstWord,{selectable:a}]],[[d("WAWebFormatMutators").Emoji,{selectable:a}]]]},x=function(a){a===void 0&&(a={});a=a;var b=a.mentions,c=a.groupMentions,e=a.selectable;a=a.isDraftMessage;return[[[d("WAWebFormatMutators").Code,{selectable:e}]],[[d("WAWebFormatMutators").InlineCode,{selectable:e}]],[[d("WAWebFormatMutators").BulletedListItem,{selectable:e,inline:!0}]],[[d("WAWebFormatMutators").HyphenListItem,{selectable:e,inline:!0}]],[[d("WAWebFormatMutators").BulletedList,{selectable:e,inline:!0}]],[[d("WAWebFormatMutators").NumberedListItem,{selectable:e,inline:!0}]],[[d("WAWebFormatMutators").NumberedList,{selectable:e,inline:!0}]],b?[[d("WAWebFormatMutators").TextMention,{mentions:b,selectable:e,lastMessage:!0,isDraftMessage:a}]]:null,c?[[d("WAWebGroupMentionFormatMutator").GroupMention,{groupMentions:c,selectable:e,clickable:!1,lastMessage:!0,isDraftMessage:a}]]:null,[[d("WAWebFormatMutators").Bold,{selectable:e}],[d("WAWebFormatMutators").Italic,{selectable:e}],[d("WAWebFormatMutators").Strikethrough,{selectable:e}]],[[d("WAWebFormatMutators").Emoji,{selectable:e}]],[[d("WAWebFormatMutators").BlockQuote,{selectable:e,inline:!0}]]].filter(Boolean)};g.EmojiOnly=a;g.LargeEmojiOnly=e;g.StatusV3Text=f;g.StatusV3Caption=h;g.Compatibility=i;g.Conversation=j;g.Search=k;g.SearchName=l;g.LastMessage=m;g.FTSMessage=n;g.QuickReply=o;g.Unformat=p;g.QuotedMention=q;g.FormattedNotification=r;g.FormattedGroupNotification=s;g.TrustedGroupDesc=t;g.UntrustedGroupDesc=u;g.HeaderAndFooter=v;g.BoldedContactName=w;g.InlineMessage=x}),98);
__d("WAWebFormatRevokedMsg",["fbt","WAWebContactCollection","WAWebFrontendContactGetters","WAWebMsgGetters","WAWebWidFormat"],(function(a,b,c,d,e,f,g,h){var i=function(a){var b=d("WAWebContactCollection").ContactCollection.get(a);return!b?d("WAWebWidFormat").widToFormattedUser(a):b.shortName||b.name||d("WAWebFrontendContactGetters").getDisplayName(b)};function j(a){if(d("WAWebMsgGetters").getIsRevokedByMe(a))return h._("__JHASH__Tg8xHWjZylf__JHASH__");else if(a.revokeSender==null)return h._("__JHASH__Ud5MkGGLhR4__JHASH__");return h._("__JHASH__7WCUnGPo5nL__JHASH__",[h._param("admin",i(a.revokeSender))])}function k(a){return d("WAWebMsgGetters").getIsSentByMe(a)?h._("__JHASH__L-dKQmTItq5__JHASH__"):h._("__JHASH__J56rWNCth3M__JHASH__")}function a(a){var b;b=(b=a.subtype)!=null?b:"sender";switch(b){case"sender":return k(a);case"admin":return j(a)}}function b(a){var b;b=(b=a.subtype)!=null?b:"sender";switch(b){case"sender":return k(a);case"admin":return d("WAWebMsgGetters").getIsNewsletterMsg(a)?l(a):j(a)}}function l(a){return d("WAWebMsgGetters").getIsRevokedByMe(a)?h._("__JHASH__bz_JUjsZ8t4__JHASH__"):h._("__JHASH__qY2dj_qt1Nk__JHASH__")}g.adminRevokeText=j;g.senderRevokeText=k;g.formatRevokedComment=a;g.formatRevokedMsg=b}),226);
__d("WAWebBlockQuoteMutatorComponent.react",["WABidi","WAWebCopyPasteSelectable.react","WAWebFormatComponentUtils","WAWebL10N","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={quote:{display:"x1rg5ohu",position:"x1n2onr6",width:"xh8yej3",color:"xbs004d",$$css:!0},quotedColor:{color:"x15rks2t",borderTopColor:"x1b4hy2t",borderEndColor:"xaeiroq",borderBottomColor:"x1tnzt7h",borderStartColor:"xdc8vam",$$css:!0},inlineQuote:{display:"xt0psk2",width:"x14atkfc",borderStart:"xc5cyxc",marginStart:"x1w4ip6v",paddingStart:"x1t2a60a",color:"xbs004d",$$css:!0},inlineQuoteLineStart:{borderStart:"x15y3jq",marginStart:"x1w4ip6v",paddingStart:"x1t2a60a",$$css:!0},inlineQuoteLineEnd:{borderEnd:"xebtj7h",marginEnd:"xeyog9w",paddingEnd:"x1mpkggp",$$css:!0},line:{position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",height:"x5yr21d",width:"x1g8rjiy",backgroundColor:"x1plhrm9",borderTopStartRadius:"x146dn1l",borderTopEndRadius:"x11t77rh",borderBottomEndRadius:"x1thhq0t",borderBottomStartRadius:"xf6uls8",$$css:!0},lineQuotedColor:{backgroundColor:"xtwfq29",$$css:!0},lineDirMismatch:{end:"xds687c",$$css:!0},text:{display:"x1rg5ohu",paddingStart:"xvpee5o",overflowWrap:"xj0a0fe",whiteSpace:"xeaf4i8",$$css:!0},textDirMismatch:{paddingStart:"xkhd6sd",paddingEnd:"x14uny0o",$$css:!0}};function a(a){var b=a.children;b=b===void 0?"":b;var e=a.inline;e=e===void 0?!1:e;var f=a.quoted;f=f===void 0?!1:f;var g=a.selectable;a=a.text;a=d("WABidi").dir(a);var h=a==="rtl"!==c("WAWebL10N").isRTL(),l="> ";return e?j.jsx(d("WAWebCopyPasteSelectable.react").SelectableSpan,{dir:a,selectable:g,prePlainText:l,className:(i||(i=c("stylex")))(k.inlineQuote,f&&k.quotedColor,h?k.inlineQuoteLineEnd:k.inlineQuoteLineStart),children:b}):j.jsxs(d("WAWebCopyPasteSelectable.react").SelectableBlockQuote,{dir:a,selectable:g,prePlainText:l,className:(i||(i=c("stylex")))([k.quote,f&&k.quotedColor,!f&&d("WAWebUISpacing").uiMargin.vert4]),children:[j.jsx("div",{className:i(k.line,h&&k.lineDirMismatch,f&&k.lineQuotedColor)}),j.jsx("div",{className:i(k.text,h&&k.textDirMismatch),children:d("WAWebFormatComponentUtils").removeFirstLeadingSpace(b)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebExtractRangeFromMatch",[],(function(a,b,c,d,e,f){function a(a,b){b===void 0&&(b=0);var c=a.index,d=a[0],e=c+d.length-1;e=[c,c,e,e,a];if(b){b=(a=a[b])!=null?a:"";e[1]=c+d.indexOf(b);e[2]=e[1]+b.length-1}return e}f["default"]=a}),66);
__d("WAWebExtractRangesUsingRegex",["WAWebExtractRangeFromMatch"],(function(a,b,c,d,e,f,g){function a(a,b,d,e){d===void 0&&(d=0);var f=[];b.lastIndex=0;var g;while((g=b.exec(a))&&b.lastIndex>0)e&&(g=e(g,b)),g&&f.push(c("WAWebExtractRangeFromMatch")(g,d));return f}g["default"]=a}),98);
__d("WAWebFormatMutator",["err"],(function(a,b,c,d,e,f,g){a=function(){function a(){}a.match=function(a,b,d){throw c("err")("Subclasses of `Mutator` must override `match()`")};a.mutate=function(a,b,c){return a};return a}();a.nestable=function(){return!0};a.format=!0;a.fragment=!1;a.compatibility=!1;a.mutates=!1;g["default"]=a}),98);
__d("WAWebCreateRegexMutator",["WAWebExtractRangesUsingRegex","WAWebFormatMutator"],(function(a,b,c,d,e,f,g){function a(a,b,d){b===void 0&&(b=0);return function(e){babelHelpers.inheritsLoose(f,e);function f(){return e.apply(this,arguments)||this}f.match=function(e){return c("WAWebExtractRangesUsingRegex")(e,a,b,d)};return f}(c("WAWebFormatMutator"))}g["default"]=a}),98);
__d("WAWebBlockQuoteFormatMutator",["WAWebBlockQuoteMutatorComponent.react","WAWebCreateRegexMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=/(?:^)\>(\s(?! +)[^\n]+(?:$))/gm;b=/(?:^)\>(\s(?! +)[^\n]*(?:$))/gm;d=c("WAWebCreateRegexMutator")(a,1);e=c("WAWebCreateRegexMutator")(b,1);f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){var e=d.selectable;e=e===void 0?!1:e;var f=d.inline;f=f===void 0?!1:f;d=d.quoted;d=d===void 0?!1:d;b=b[1];return i.jsx(c("WAWebBlockQuoteMutatorComponent.react"),{selectable:e,inline:f,text:b,quoted:d,children:a})};return b}(d);f.unformatDecorations={pre:">"};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(e);g.BlockQuote=f;g.BlockQuoteWithEmpty=a}),98);
__d("WAWebBoldMutatorComponent.react",["WAWebCopyPasteSelectable.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableStrong,{selectable:a,appTextTemplate:"*${appText}*",children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebBoldFirstWordFormatMutator",["WAWebBoldMutatorComponent.react","WAWebCreateRegexMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=/^(\w*)\b/g;b=c("WAWebCreateRegexMutator")(a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){b=d.selectable;d=b===void 0?!1:b;return i.jsx(c("WAWebBoldMutatorComponent.react"),{selectable:d,children:a})};return b}(b);g["default"]=d}),98);
__d("WAWebAdjustDelimitedRange",[],(function(a,b,c,d,e,f){function a(a){return function(b,c){var d=2*a.length+b[1].length;d=b[0].length-d;d>0&&(b.index+=d,b[0]=b[0].slice(d));c.lastIndex--;return b}}f["default"]=a}),66);
__d("WAWebBoldFormatRegex",[],(function(a,b,c,d,e,f){a=/(?:^|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))\*(?![\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|\u20E3|\uFE0F\u20E3)((?:[\0-\t\x0B-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))\*(?=$|(?!\u20E3|\uFE0F\u20E3))(?=$|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))/g;b=a;f["default"]=b}),66);
__d("WAWebBoldFormatMutator",["WAWebAdjustDelimitedRange","WAWebBoldFormatRegex","WAWebBoldMutatorComponent.react","WAWebCreateRegexMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=c("WAWebAdjustDelimitedRange")("*");b=c("WAWebCreateRegexMutator")(c("WAWebBoldFormatRegex"),1,a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){b=d.selectable;d=b===void 0?!1:b;return i.jsx(c("WAWebBoldMutatorComponent.react"),{selectable:d,children:a})};return b}(b);g["default"]=d}),98);
__d("WAWebClickable.react",["$InternalEnum","WAWebClassnames","WAWebKeyboardIsKeyActivation","WAWebUseIsKeyboardUser","react","stylex","useWAWebMergeRefs"],(function(a,b,c,d,e,f,g){var h,i,j;e=j||d("react");var k=h||(h=c("react")),l=e.forwardRef,m=e.useRef,n=b("$InternalEnum").Mirrored(["Default","Image"]),o={imageFocus:{":focus_borderTopStartRadius":"xvmu2xp",":focus_borderTopEndRadius":"x16ngqik",":focus_borderBottomEndRadius":"x1vlmnad",":focus_borderBottomStartRadius":"x12oeec4",":focus_boxShadow":"xsbtyp8",":focus_filter":"x1cm50aa",$$css:!0},defaultFocus:{":focus_borderTopStartRadius":"xvmu2xp",":focus_borderTopEndRadius":"x16ngqik",":focus_borderBottomEndRadius":"x1vlmnad",":focus_borderBottomStartRadius":"x12oeec4",":focus_boxShadow":"xsbtyp8",$$css:!0}};function a(a,b){var e=a.as;e=e===void 0?"div":e;var f=a.onClick,g=a.dataTestId;g=a.className;var h=a.children,j=a.inlineStyle,l=a.preventDefaultKeyboard,p=l===void 0?!1:l;l=a.xstyle;e=e;var q=c("WAWebUseIsKeyboardUser")();q=q.isKeyboardUser;var r=m(null);b=c("useWAWebMergeRefs")(b,r);var s=function(a){if(c("WAWebKeyboardIsKeyActivation")(a)&&f){var b;(b=r.current)==null?void 0:b.click();p&&a.preventDefault()}},t,u,v,w,x,y;if(f){var z;t=(z=a.role)!=null?z:"button";u=a.ariaLabel;v=(z=a.tabIndex)!=null?z:0;w=(z=a.focusTheme)!=null?z:n.Default;x=a.title;y=a["data-tab"]}return k.jsx(e,{onClick:f,role:t,tabIndex:v,"data-testid":void 0,"aria-label":u,title:x,"data-tab":y,ref:b,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(g,(i||(i=c("stylex")))(l,q&&n.Default===w&&o.defaultFocus,q&&n.Image===w&&o.imageFocus)),onKeyDown:s,style:j,children:h})}a.displayName=a.name+" [from "+f.id+"]";e=l(a);g.FocusTheme=n;g.Clickable=e}),98);
__d("WAWebBotCommandMutatorComponent.react",["WAWebClickable.react","WAWebComposeBoxActions","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={link:{color:"x1a06ls3",$$css:!0}};function a(a){a=a.children;var b=a===void 0?"":a;a=function(){d("WAWebComposeBoxActions").ComposeBoxActions.paste(null,String(b)+" ",{insertLeadingSpace:!0})};return i.jsx(d("WAWebClickable.react").Clickable,{as:"span",xstyle:j.link,onClick:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.BotCommandMutatorComponent=a}),98);
__d("WAWebBotCommandFormatMutator",["WAWebBotCommandMutatorComponent.react","WAWebExtractRangesUsingRegex","WAWebFormatMutator","lodash","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.match=function(a,b){b=(b=b)!=null?b:{};b=b.commands;if(!b||b.length===0)return[];b=b.map(function(a){return c("lodash").escapeRegExp("/"+a.name)});b=new RegExp("("+b.join("|")+")(?=$|\\s)","gmi");var d=!1;return c("WAWebExtractRangesUsingRegex")(a,b,0,function(a){if(d)return null;d=!0;return a})};return b}(c("WAWebFormatMutator"));a.format=!1;a.jsx=function(a,b){return i.jsx(d("WAWebBotCommandMutatorComponent.react").BotCommandMutatorComponent,{children:a})};g.BotCommand=a}),98);
__d("WAWebBulletedListFormatMutator",["WAWebBulletedListMutatorComponent.react","WAWebCreateRegexMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=/((?:^)(?:[\*\-\] (?! +)(?:[^\n]+)(?:\n(?:[\*\-\] (?! +)[^\n]+)){0,})(?:\n|$))/gm;b=c("WAWebCreateRegexMutator")(a,0);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){return i.jsx(c("WAWebBulletedListMutatorComponent.react"),babelHelpers["extends"]({},d,{children:a}))};return b}(b);d.nestable=function(){return!1};g["default"]=d}),98);
__d("WAWebBulletedListItemFormatMutator",["WAWebBulletedListFormatMutator","WAWebBulletedListItemMutatorComponent.react","WAWebCreateRegexMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");b=/(?:^)[\*\]( (?! +)[^\n]+(?:$))/gm;d=/(?:^)\-( (?! +)[^\n]+(?:$))/gm;e=/(?:^)\*( (?! +)[^\n]*(?:$))/gm;f=/(?:^)\-( (?! +)[^\n]*(?:$))/gm;var j="* ",k=new Set([c("WAWebBulletedListFormatMutator")]);function a(a,b){var d;a=c("WAWebCreateRegexMutator")(a,1);a=(d=a=function(a){babelHelpers.inheritsLoose(d,a);function d(){return a.apply(this,arguments)||this}d.jsx=function(a,d,e){var f=e.selectable;f=f===void 0?!1:f;e=e.inline;d=d[1];return i.jsx(c("WAWebBulletedListItemMutatorComponent.react"),{inline:e,selectable:f,text:d,symbol:b,children:a})};return d}(a),a.displayName="BulletedListItem",a.nestable=function(a){return k.has(a)},a.unformatDecorations={pre:b},d);return a}b=a(b,"*");d=a(d,"-");e=a(e,"*");a=a(f,"-");g.LIST_ITEM_DELIMITER=j;g.BulletedListItem=b;g.HyphenListItem=d;g.BulletedListItemWithEmpty=e;g.HyphenListItemWithEmpty=a}),98);
__d("WAWebCodeMutatorComponent.react",["WAWebCopyPasteSelectable.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableCode,{selectable:a,appTextTemplate:"```${appText}```",children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCodeFormatMutator",["WAWebCodeMutatorComponent.react","WAWebCreateRegexMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=/```([\s\S]*?\S[\s\S]*?)```/g;a=c("WAWebCreateRegexMutator")(j,1);b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){b=d.selectable;d=b===void 0?!1:b;return i.jsx(c("WAWebCodeMutatorComponent.react"),{selectable:d,children:a})};return b}(a);b.format=!1;d=function(a){a=a.split(j);a=a.pop();return/```/.test(a)};e=function(a){return a.replace(j," ")};g.Code=b;g.isInsideCodeBlock=d;g.removeCodeBlocks=e}),98);
__d("WAWebEmojiMutatorComponent.react",["WAWebEmoji.react","WAWebMessageLargeEmoji.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.emoji,e=a.selectable,f=a.size;a=a.xstyle;return f==="xlarge"?i.jsx(d("WAWebMessageLargeEmoji.react").LargeEmoji,{emoji:b,xstyle:a,size:d("WAWebMessageLargeEmoji.react").SIZE.XLARGE,element:"span",selectable:e}):i.jsx(c("WAWebEmoji.react"),{emoji:b,xstyle:a,selectable:e,size:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebEmojiFormatMutator",["WAUnicodeUtils","WAWebEmoji","WAWebEmojiMutatorComponent.react","WAWebExtractRangesUsingRegex","WAWebFormatMutator","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){a=b[0];b=d.size;var e=d.selectable;e=e===void 0?!1:e;d=d.emojiXstyle;return i.jsx(c("WAWebEmojiMutatorComponent.react"),{emoji:a,size:b,selectable:e,xstyle:d})};b.match=function(a,b,e){b=e!=null&&e!==0?e:a.length;e=d("WAUnicodeUtils").firstNCodepoints(a,b);return c("WAWebExtractRangesUsingRegex")(e,d("WAWebEmoji").EmojiUtil.emojiRegex(),0,j)};return b}(c("WAWebFormatMutator"));a.compatibility=!0;function j(a,b){return!d("WAWebEmoji").EmojiUtil.getGlyphId(a[0])?null:a}g["default"]=a}),98);
__d("WAWebHighlightMutatorComponent.react",["WAWebCopyPasteSelectable.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableSpan,{className:"matched-text",selectable:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebHighlightFormatMutator",["WAWebExtractRangesUsingRegex","WAWebFormatMutator","WAWebHighlightMutatorComponent.react","WAWebL10N","lodash","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.match=function(a,b){if(!b)return[];var d=b.terms,e=b.boundary;e=e===void 0?!1:e;b=b.ignoreDiacritics;b=b===void 0?!1:b;if(!d.length||d.every(function(a){return a.length===0}))return[];b=b&&c("WAWebL10N").isLatinAlphabetLanguage(a)&&d.every(function(a){return c("WAWebL10N").isLatinAlphabetLanguage(a)})&&!c("WAWebL10N").isRTL();a=b?c("WAWebL10N").removeAccents(a):a;a=c("WAWebExtractRangesUsingRegex")(a,j(d,e,b));return a};return b}(c("WAWebFormatMutator"));a.jsx=function(a,b,d){b=d.selectable;return i.jsx(c("WAWebHighlightMutatorComponent.react"),{selectable:b,children:a})};function j(a,b,d){d=d?a.map(function(a){return c("WAWebL10N").removeAccents(a)}):a;a=d.map(c("lodash").escapeRegExp).join("|");return c("WAWebL10N").isRTL()?new RegExp((b?"(?:^|\\b)":"")+"(\\S+)?("+a+")(\\S+)?","ig"):new RegExp((b?"(?:^|\\b)":"")+"("+a+")","ig")}g["default"]=a}),98);
__d("WAWebInlineCodeFormatRegex",[],(function(a,b,c,d,e,f){a=/(?:^|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))`(?![\t-\r `\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])((?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])(?:[\0-\t\x0B-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))`(?=$|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))/g;b=a;f["default"]=b}),66);
__d("WAWebInlineCodeMutatorComponent.react",["WAWebCopyPasteSelectable.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={code:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",backgroundColor:"x14bl8p4",color:"x10jhi2x",$$css:!0},quotedColor:{color:"x15rks2t",$$css:!0}};function a(a){var b=a.children;b=b===void 0?"":b;var e=a.quoted;a=a.selectable;return j.jsx(d("WAWebCopyPasteSelectable.react").SelectableCode,{selectable:a,appTextTemplate:"`${appText}`",className:(i||(i=c("stylex")))(k.code,e&&k.quotedColor,d("WAWebUISpacing").uiPadding.horiz4,d("WAWebUISpacing").uiPadding.vert2),children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebInlineCodeFormatMutator",["WAWebAdjustDelimitedRange","WAWebCreateRegexMutator","WAWebInlineCodeFormatRegex","WAWebInlineCodeMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=c("WAWebAdjustDelimitedRange")("`");b=c("WAWebCreateRegexMutator")(c("WAWebInlineCodeFormatRegex"),1,a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){b=d.selectable;b=b===void 0?!1:b;d=d.quoted;d=d===void 0?!1:d;return i.jsx(c("WAWebInlineCodeMutatorComponent.react"),{selectable:b,quoted:d,children:a})};return b}(b);d.format=!1;g["default"]=d}),98);
__d("WAWebItalicFormatRegex",[],(function(a,b,c,d,e,f){a=/(?:^|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))_((?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])(?:[\0-\t\x0B-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))_(?=$|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))/g;b=a;f["default"]=b}),66);
__d("WAWebItalicMutatorComponent.react",["WAWebCopyPasteSelectable.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableEm,{selectable:a,appTextTemplate:"_${appText}_",children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebItalicFormatMutator",["WAWebAdjustDelimitedRange","WAWebCreateRegexMutator","WAWebItalicFormatRegex","WAWebItalicMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=c("WAWebAdjustDelimitedRange")("_");b=c("WAWebCreateRegexMutator")(c("WAWebItalicFormatRegex"),1,a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){b=d.selectable;d=b===void 0?!1:b;return i.jsx(c("WAWebItalicMutatorComponent.react"),{selectable:d,children:a})};return b}(b);g["default"]=d}),98);
__d("WAWebLinkMutatorComponent.react",["WAWebCopyPasteSelectable.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;var c=a.className,e=a.href;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableLink,{className:c,href:e,title:e,target:"_blank",rel:"noopener noreferrer",selectable:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStrikethroughFormatRegex",[],(function(a,b,c,d,e,f){a=/(?:^|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))~((?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])(?:[\0-\t\x0B-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))~(?=$|(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0600-\u060F\u061B\u061C\u061E\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u070F\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u08E2\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u180E\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7C\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u2064\u2066-\u206F\u207A-\u207E\u208A-\u208E\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B98-\u2BC8\u2BCA-\u2BFE\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u32FE\u3300-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uABEB\uFB29\uFBB2-\uFBC1\uFD3E\uFD3F\uFDFC\uFDFD\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9B\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB-\uDCC1\uDCCD\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3F]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A]|\uD82F[\uDC9C\uDC9F-\uDCA3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD10-\uDD6B\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED4\uDEE0-\uDEEC\uDEF0-\uDEF9\uDF00-\uDF73\uDF80-\uDFD8]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD00-\uDD0B\uDD10-\uDD3E\uDD40-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF\uDE60-\uDE6D]|\uDB40[\uDC01\uDC20-\uDC7F]))/g;b=a;f["default"]=b}),66);
__d("WAWebStrikethroughMutatorComponent.react",["WAWebCopyPasteSelectable.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableDel,{selectable:a,appTextTemplate:"~${appText}~",children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStrikethroughFormatMutator",["WAWebAdjustDelimitedRange","WAWebCreateRegexMutator","WAWebStrikethroughFormatRegex","WAWebStrikethroughMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=c("WAWebAdjustDelimitedRange")("_");b=c("WAWebCreateRegexMutator")(c("WAWebStrikethroughFormatRegex"),1,a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){b=d.selectable;return i.jsx(c("WAWebStrikethroughMutatorComponent.react"),{selectable:b,children:a})};return b}(b);g["default"]=d}),98);
__d("WAWebSuspiciousLinkPopup.react",["fbt","WAWebCmd","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebModal.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).Fragment,m=".",n=function(){d("WAWebModalManager").ModalManager.close(),d("WAWebCmd").Cmd.closeLongLinkModal(!0)};function a(a){var b=a.link;a=function(){var a=b.href;d("WAWebExternalLink.react").openExternalLink(a);d("WAWebModalManager").ModalManager.close();d("WAWebCmd").Cmd.closeLongLinkModal(!0)};var c=b.suspiciousCharacters,e=b.domain,f=b.href,g=e.split(m),i=g.map(function(a,b){var d=!1,e=a.split("").map(function(a,e){var f=c!=null&&c.has(a);d=f||d;f=f?"x117nqv4":void 0;return k.jsx("span",{className:f,children:a},b+"-"+e+"-"+a)}),f=d?"xghrzdh":void 0;return k.jsxs(l,{children:[k.jsx("span",{className:f,children:e}),b+1!==g.length?k.jsx("span",{children:m}):null]},b+"-"+a)});f=f.split(e);e=f[0];f=f[1];return k.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__4ruJ1XErkWF__JHASH__"),okText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),cancelText:h._("__JHASH__x0aQ7w-e6hn__JHASH__"),onOK:n,onCancel:a,type:d("WAWebModal.react").ModalTheme.LinkPopup,children:[k.jsxs("div",{className:"xyorhqc",children:[h._("__JHASH__ZtDgJjRCW7z__JHASH__")," ",k.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getSuspiciousLinkFaqUrl(),children:h._("__JHASH__RR1bpeluTQm__JHASH__")})]}),k.jsxs("div",{className:"x104kibb x1jquxbb x1anpbxc x6ikm8r x10wlt62 x1fc57z9 xlyipyv x1mzt3pk x1gzmk7r x1ua5tub",children:[e,i,f]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebSuspiciousLinkMutatorComponent.react",["WAWebCmd","WAWebCopyPasteSelectable.react","WAWebModalManager","WAWebSuspiciousLinkPopup.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.children;b=b===void 0?"":b;var e=a.className,f=a.link;a=a.selectable;return i.jsx(d("WAWebCopyPasteSelectable.react").SelectableLink,{className:e,onClick:function(){d("WAWebModalManager").ModalManager.open(i.jsx(c("WAWebSuspiciousLinkPopup.react"),{link:f})),d("WAWebCmd").Cmd.openLongLinkModal()},selectable:a,style:{cursor:"pointer"},children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebLinkFormatMutator",["WAWebBoldFormatMutator","WAWebCodeFormatMutator","WAWebFormatMutator","WAWebInlineCodeFormatMutator","WAWebItalicFormatMutator","WAWebLinkMutatorComponent.react","WAWebStrikethroughFormatMutator","WAWebSuspiciousLinkMutatorComponent.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){var e=d.selectable;e=e===void 0?!1:e;d=d.linkXstyle;var f=b.href,g=b.suspiciousCharacters;return(g==null?void 0:g.size)?j.jsx(c("WAWebSuspiciousLinkMutatorComponent.react"),{className:(i||(i=c("stylex")))(d),link:b,selectable:e,children:a}):j.jsx(c("WAWebLinkMutatorComponent.react"),{className:(i||(i=c("stylex")))(d),href:f,selectable:e,children:a})};return b}(c("WAWebFormatMutator"));b.format=!1;b.compatibility=!0;b.match=function(a,b,c){if(!b)return[];a=b.links;c=a===void 0?[]:a;return c.map(k)};b.conflictResolvers=new Map([[c("WAWebBoldFormatMutator"),a],[c("WAWebItalicFormatMutator"),a],[c("WAWebStrikethroughFormatMutator"),a],[c("WAWebInlineCodeFormatMutator"),a],[d("WAWebCodeFormatMutator").Code,a]]);function k(a){var b=a.index,c=a.url;c=b+c.length-1;return[b,b,c,c,a]}function a(a,b){var c=0,d=0;while(c<a.length&&d<b.length){var e=b[d][3]-a[c][3];if(e>0)c++;else if(e<0)d++;else{e=b[d][3]-b[d][2];a[c][2]-=e;a[c][3]-=e;var f=a[c][5];f.href=f.href.slice(0,-e);f.path=f.path&&f.path.slice(0,-e);f.url=f.url.slice(0,-e);d++;c++}}}g["default"]=b}),98);
__d("WAWebNumberedListFormatMutator",["WAWebCreateRegexMutator","WAWebNumberedListMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=/((?:^)(?:(\d{1,2})\. (?! +)(?:[^\n]+)(?:\n(?:(\d{1,2})\. [^\n]+)){0,})(?:\n|$))/gm;b=c("WAWebCreateRegexMutator")(a,0);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){return i.jsx(c("WAWebNumberedListMutatorComponent.react"),babelHelpers["extends"]({},d,{children:a}))};return b}(b);d.nestable=function(){return!1};g["default"]=d}),98);
__d("WAWebNumberedListItemFormatMutator",["WAWebCreateRegexMutator","WAWebNumberedListFormatMutator","WAWebNumberedListItemMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");b=/(?:^)(\d{1,2}\.)( (?! +)[^\n]+(?:$))/gm;d=/(?:^)(\d{1,2}\.)( (?! +)[^\n]*(?:$))/gm;var j=new Set([c("WAWebNumberedListFormatMutator")]);function a(a){var b;a=c("WAWebCreateRegexMutator")(a,2);a=(b=a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){var e=d.selectable;e=e===void 0?!1:e;d=d.inline;var f=b[1];b=b[2];return i.jsx(c("WAWebNumberedListItemMutatorComponent.react"),{inline:d,selectable:e,text:b,numbering:f,children:a})};return b}(a),a.displayName="NumberedListItem",a.nestable=function(a){return j.has(a)},a.unformatDecorations={pre:function(a){return a[1]}},b);return a}e=a(b);f=a(d);g.NumberedListItem=e;g.NumberedListItemWithEmpty=f}),98);
__d("WAWebWamEnumUrlStatusClicked",[],(function(a,b,c,d,e,f){a=Object.freeze({ONE_CLICK:1,TWO_CLICKS:2,NO_CLICK:3});f.URL_STATUS_CLICKED=a}),66);
__d("WAWebLongLinkPop.react",["fbt","WAWebCmd","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebModal.react","WAWebModalManager","WAWebWamEnumUrlStatusClicked","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(){d("WAWebModalManager").ModalManager.close(),d("WAWebCmd").Cmd.closeLongLinkModal(!0)};function a(a){var b=a.link,c=function(){var c;((c=a.statusItemViewEventRef)==null?void 0:c.current)!=null&&(a.statusItemViewEventRef.current.urlStatusClicked=d("WAWebWamEnumUrlStatusClicked").URL_STATUS_CLICKED.TWO_CLICKS);d("WAWebModalManager").ModalManager.close();d("WAWebExternalLink.react").openExternalLink(b.href)};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__YxStWgYYMLs__JHASH__"),okText:h._("__JHASH__x0aQ7w-e6hn__JHASH__"),cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),onOK:c,onCancel:k,type:d("WAWebModal.react").ModalTheme.LinkPopup,children:j.jsx("div",{children:b.href})})}a.displayName=a.name+" [from "+f.id+"]";g.LongLinkPopup=a}),226);
__d("WAWebStatusV3StatusContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a({statusItemViewEventRef:null});g.StatusV3StatusContext=b}),98);
__d("WAWebLongLinkMutatorComponent.react",["WAWebCmd","WAWebCopyPasteSelectable.react","WAWebLongLinkPop.react","WAWebModalManager","WAWebStatusV3StatusContext","WAWebSuspiciousLinkMutatorComponent.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useContext,m={link:{cursor:"x1ypdohk",$$css:!0}};function a(a){var b=a.children;b=b===void 0?"":b;var e=a.link,f=a.selectable;a=a.xstyle;var g=l(d("WAWebStatusV3StatusContext").StatusV3StatusContext),h=g.statusItemViewEventRef;return((g=e.suspiciousCharacters)==null?void 0:g.size)?k.jsx(c("WAWebSuspiciousLinkMutatorComponent.react"),{className:(i||(i=c("stylex")))(a),link:e,selectable:f,children:b}):k.jsx(d("WAWebCopyPasteSelectable.react").SelectableLink,{onClick:function(a){a.preventDefault(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebLongLinkPop.react").LongLinkPopup,{link:e,statusItemViewEventRef:h})),d("WAWebCmd").Cmd.openLongLinkModal()},selectable:f,className:(i||(i=c("stylex")))(m.link,a),children:b})}a.displayName=a.name+" [from "+f.id+"]";g.LongLink=a}),98);
__d("WAWebStatusLinkFormatMutator",["WAWebLinkFormatMutator","WAWebLongLinkMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=34,k=12,l="...";function m(a,b){a=Math.min(b.length,Math.max(b.length-k,b.length+a.length-j));return b.length-a}function n(a,b){a=b.length>k||b.length+a.length>j?b.slice(0,m(a,b)):b;return a}function o(a){var b=a.domain;a=a.path;return[b.replace(/^www\./,""),a==null||a.length===1?"":a]}function p(a,b){var c=n(a,b);a=a+(c.length===1?"":c);a=a.length>j?""+l+a.slice(a.length-j):a;b=b!==c?l:"";return a+b}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(b,c,e){b=o(c);var f=b[0];b=b[1];var g=p(f,b);if(g!==f+b){var h;return i.jsx(d("WAWebLongLinkMutatorComponent.react").LongLink,{xstyle:e.linkXstyle,selectable:(h=e.selectable)!=null?h:!1,link:c,children:g})}return a.jsx.call(this,[f+b],c,e)};return b}(c("WAWebLinkFormatMutator"));g.cleanUrl=o;g.redactUrl=p;g.StatusLink=a}),98);
__d("WAWebFormatMutators",["WAWebBlockQuoteFormatMutator","WAWebBoldFirstWordFormatMutator","WAWebBoldFormatMutator","WAWebBotCommandFormatMutator","WAWebBulletedListFormatMutator","WAWebBulletedListItemFormatMutator","WAWebCodeFormatMutator","WAWebEmojiFormatMutator","WAWebHighlightFormatMutator","WAWebInlineCodeFormatMutator","WAWebItalicFormatMutator","WAWebLinkFormatMutator","WAWebMentionFormatMutator","WAWebNumberedListFormatMutator","WAWebNumberedListItemFormatMutator","WAWebPhoneNumberFormatMutator","WAWebRawGroupMentionFormatMutator","WAWebRawMentionMutator","WAWebRawShortNameMentionFormatMutator","WAWebStatusLinkFormatMutator","WAWebStrikethroughFormatMutator","WAWebTextMentionFormatMutator"],(function(a,b,c,d,e,f){a=importNamespace("WAWebCodeFormatMutator").Code;b=importNamespace("WAWebBlockQuoteFormatMutator").BlockQuote;c=importNamespace("WAWebBlockQuoteFormatMutator").BlockQuoteWithEmpty;e=(d=importNamespace("WAWebBulletedListItemFormatMutator")).BulletedListItem;var g=d.HyphenListItem,h=d.BulletedListItemWithEmpty;d=d.HyphenListItemWithEmpty;var i=importNamespace("WAWebNumberedListItemFormatMutator").NumberedListItem,j=importNamespace("WAWebNumberedListItemFormatMutator").NumberedListItemWithEmpty,k=importNamespace("WAWebStatusLinkFormatMutator").StatusLink,l=importNamespace("WAWebRawGroupMentionFormatMutator").RawGroupMention,m=importNamespace("WAWebBotCommandFormatMutator").BotCommand;f.BoldFirstWord=importDefault("WAWebBoldFirstWordFormatMutator");f.Bold=importDefault("WAWebBoldFormatMutator");f.InlineCode=importDefault("WAWebInlineCodeFormatMutator");f.Code=a;f.BlockQuote=b;f.BlockQuoteWithEmpty=c;f.Emoji=importDefault("WAWebEmojiFormatMutator");f.Highlight=importDefault("WAWebHighlightFormatMutator");f.Italic=importDefault("WAWebItalicFormatMutator");f.Link=importDefault("WAWebLinkFormatMutator");f.BulletedList=importDefault("WAWebBulletedListFormatMutator");f.NumberedList=importDefault("WAWebNumberedListFormatMutator");f.BulletedListItem=e;f.HyphenListItem=g;f.BulletedListItemWithEmpty=h;f.HyphenListItemWithEmpty=d;f.NumberedListItem=i;f.NumberedListItemWithEmpty=j;f.Mention=importDefault("WAWebMentionFormatMutator");f.PhoneNumber=importDefault("WAWebPhoneNumberFormatMutator");f.RawMention=importDefault("WAWebRawMentionMutator");f.Strikethrough=importDefault("WAWebStrikethroughFormatMutator");f.TextMention=importDefault("WAWebTextMentionFormatMutator");f.RawShortNameMention=importDefault("WAWebRawShortNameMentionFormatMutator");f.StatusLink=k;f.RawGroupMention=l;f.BotCommand=m}),66);
__d("WAWebRichTextInputConst",[],(function(a,b,c,d,e,f){a="@";b="\u200b";c=b+"(\\d+@(c\\.us|lid))"+b;d=b+"((\\d+-)?\\d+@g\\.us)"+b;f.AT_SYMBOL=a;f.ZWS=b;f.userJidRegexStr=c;f.groupJidRegexStr=d}),66);
__d("WAWebGroupMentionFormatMutator",["WAWebExtractRangesUsingRegex","WAWebFormatMutator","WAWebGroupMetadataCollection","WAWebRichTextInputConst","WAWebTextGroupMentionWrapperMutatorComponent.react","WAWebUnjoinedSubgroupMetadataCollection","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.match=function(a,b){if(!b)return[];var e=b.groupMentions,f=b.isDraftMessage;b=b.fromChatWid;this.fromChatWid=b;if(f===!0){f=c("WAWebExtractRangesUsingRegex")(a,new RegExp(d("WAWebRichTextInputConst").groupJidRegexStr,"g"));for(var g=0;g<f.length;++g){var h=f[g][4][1],i=c("WAWebUnjoinedSubgroupMetadataCollection").get(h)||c("WAWebGroupMetadataCollection").get(h);if(!i||!i.subject)return[];f[g][4]={groupJid:h.slice(1),groupSubject:i.subject,fromChatWid:b}}return f}if(!e||Object.keys(e).length===0)return[];h=k(e);i=c("WAWebExtractRangesUsingRegex")(a,h);for(g=0;g<i.length;++g){f=i[g][4][0];i[g][4]={groupJid:f.slice(1),groupSubject:e[f],fromChatWid:b}}return i};b.jsx=function(a,b,d){a=d.selectable;var e=d.theme,f=d.clickable;f=f===void 0?!0:f;d=d.lastMessage;return i.jsx(c("WAWebTextGroupMentionWrapperMutatorComponent.react"),{groupSubject:b.groupSubject,groupJid:b.groupJid,selectable:a,clickable:f,theme:e,lastMessage:d,fromChatWid:this.fromChatWid})};return b}(c("WAWebFormatMutator"));a.compatibility=!0;function j(a){var b=/[\\^$.*+?()[\]{}|]/g,c=RegExp(b.source);return a&&c.test(a)?a.replace(b,"\\$&"):a}function k(a){a=Object.keys(a).map(j).join("|");return new RegExp("("+a+")","g")}g.GroupMention=a}),98);
__d("WAWebMentionFormatMutator",["WAWebContactCollection","WAWebExtractRangesUsingRegex","WAWebFormatMutator","WAWebMentionMutatorComponent.react","WAWebRichTextInputConst","WAWebWidFactory","lodash","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.match=function(a,b){if(!b)return[];var e=b.mentions,f=b.groupMetadata;b=b.isDraftMessage;if(b===!0){b=c("WAWebExtractRangesUsingRegex")(a,new RegExp(d("WAWebRichTextInputConst").userJidRegexStr,"g"));for(var g=0;g<b.length;++g){var h=b[g][4][1];h=d("WAWebWidFactory").createUserWid(h);h=d("WAWebContactCollection").ContactCollection.get(h);if(h==null)return[];b[g][4]={contact:h,groupMetadata:f}}return b}if(!e||c("lodash").isEmpty(e))return[];h=j(e);g=c("WAWebExtractRangesUsingRegex")(a,h);for(b=0;b<g.length;++b)g[b][4]={contact:e[g[b][4][0]],groupMetadata:f};return g};b.jsx=function(a,b,d){a=d.selectable;d=d.lastMessage;return i.jsx(c("WAWebMentionMutatorComponent.react"),{mentionMeta:b,selectable:a,lastMessage:d})};return b}(c("WAWebFormatMutator"));a.compatibility=!0;function j(a){a=Object.keys(a).map(c("lodash").escapeRegExp).join("|");return new RegExp("("+a+")","g")}g["default"]=a}),98);
__d("WAWebPhoneNumberFormatMutator",["WAWebFormatMutator","WAWebLinkFormatMutator","WAWebPhoneNumberMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){a=d.selectable;a=a===void 0?!1:a;d=d.fromMe;b=b.phone;return i.jsx(c("WAWebPhoneNumberMutatorComponent.react"),{phoneNumber:b,selectable:a,fromMe:d})};return b}(c("WAWebFormatMutator"));a.format=!1;a.compatibility=!0;a.nestable=function(a){return a!==c("WAWebLinkFormatMutator")};a.match=function(a,b,c){if(!b)return[];a=b.phoneNumbers;c=a===void 0?[]:a;return c.map(j)};function j(a){var b=a.index,c=a.phone;c=b+c.length-1;return[b,b,c,c,a]}g["default"]=a}),98);
__d("WAWebRawGroupMentionFormatMutator",["WAWebGroupMentionFormatMutator"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebGroupMentionFormatMutator").GroupMention);a.mutates=!0;a.mutate=function(a,b){a=b.groupSubject;return"@"+a};g.RawGroupMention=a}),98);
__d("WAWebRawMentionMutator",["WAWebABProps","WAWebChatContactUtils","WAWebContactGetters","WAWebElevatedPushNamesFlag","WAWebFrontendContactGetters","WAWebMentionFormatMutator"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebMentionFormatMutator"));a.mutates=!0;a.mutate=function(a,b){a=b.contact;b=d("WAWebElevatedPushNamesFlag").pushNameCanBeUsed(a)&&d("WAWebABProps").getABPropConfigValue("elevated_push_names_v2_m2_enabled")?d("WAWebChatContactUtils").getFormattedNotifyName(d("WAWebContactGetters").getNotifyName(a),!1).toString():d("WAWebFrontendContactGetters").getDisplayName(a);return"@"+b};g["default"]=a}),98);
__d("WAWebRawShortNameMentionFormatMutator",["WAWebFrontendContactGetters","WAWebMentionFormatMutator","WAWebMiscGatingUtils"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebMentionFormatMutator"));a.mutates=!0;a.mutate=function(a,b){a=b.contact;b=b.groupMetadata;return d("WAWebMiscGatingUtils").isDropLastNameEnabled()&&b&&b.hasUniqueShortNameMention(a)?"@"+a.shortName:"@"+d("WAWebFrontendContactGetters").getDisplayName(a)};g["default"]=a}),98);
__d("WAWebTextMentionFormatMutator",["WAWebMentionFormatMutator","WAWebTextMentionMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.jsx=function(a,b,d){a=b.contact;b=d.selectable;var e=d.theme;d=d.lastMessage;return i.jsx(c("WAWebTextMentionMutatorComponent.react"),{contact:a,selectable:b,theme:e,lastMessage:d})};return b}(c("WAWebMentionFormatMutator"));g["default"]=a}),98);
__d("WAWebMentionMutatorComponentBase.react",["WABidi","WAWebCopyPasteSelectable.react","WAWebEmojiFormatMutator","WAWebFormat","WAWebJsxSerializer.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={matchedMention:{cursor:"x1ypdohk",color:"x1a06ls3",$$css:!0},lastMessage:{fontWeight:"xk50ysn",$$css:!0}};function a(a){var b=a.onClick,e=a.theme,f=a.selectable,g=a.text,h=a.jid,l=a.ariaLabel;a=a.lastMessage;var m=d("WABidi").dir(g)||"auto";e=(e=e==null?void 0:e.quoted)!=null?e:!1;var n=c("WAWebFormat")(g,[[[c("WAWebEmojiFormatMutator"),{selectable:f}]]],c("WAWebJsxSerializer.react"),void 0,Infinity);e=b&&!e;return j.jsxs(d("WAWebCopyPasteSelectable.react").SelectableSpan,{dir:"auto","data-jid":h,"data-display":g,className:(i||(i=c("stylex")))(e===!0&&k.matchedMention,a===!0&&k.lastMessage),onClick:b,plainText:"@"+g,selectable:f,"aria-label":l,selectAll:!0,appTextTemplate:"\u200b"+h+"\u200b",children:["@",j.jsx("span",{dir:m,children:n})]})}a.displayName=a.name+" [from "+f.id+"]";g.MentionBase=a}),98);
__d("WAWebChatTextMentionMutatorComponent.react",["WAWebABProps","WAWebChatContactUtils","WAWebContactGetters","WAWebElevatedPushNamesFlag","WAWebFrontendContactGetters","WAWebMentionMutatorComponentBase.react","react","useWAWebContactValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.contact,c=a.onClick,e=a.theme,f=a.selectable,g=a.lastMessage;a=d("useWAWebContactValues").useContactValues(a.contact.id,[d("WAWebContactGetters").getId,d("WAWebFrontendContactGetters").getDisplayName,d("WAWebContactGetters").getNotifyName]);var h=a[0],j=a[1];a=a[2];var k;d("WAWebElevatedPushNamesFlag").pushNameCanBeUsed(b)&&d("WAWebABProps").getABPropConfigValue("elevated_push_names_v2_m2_enabled")?(b=d("WAWebChatContactUtils").getFormattedNotifyName(a,!1).toString(),k=d("WAWebChatContactUtils").getAccessibleNotifyName(a).toString()):b=j;return i.jsx(d("WAWebMentionMutatorComponentBase.react").MentionBase,{text:b,jid:h.toString(),onClick:c,theme:e,selectable:f,ariaLabel:k,lastMessage:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMentionMutatorComponent.react",["WAWebTextMentionWrapperMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.mentionMeta,d=a.theme,e=a.selectable;a=a.lastMessage;return i.jsx(c("WAWebTextMentionWrapperMutatorComponent.react"),{contact:b.contact,theme:d,selectable:e,lastMessage:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebPhoneNumberMutatorComponent.react",["WAWebPhoneNumberWrapperMutatorComponent.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.phoneNumber,d=a.selectable;a=a.fromMe;return i.jsx(c("WAWebPhoneNumberWrapperMutatorComponent.react"),{selectable:d,phoneNumber:b,fromMe:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCheckmarkIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="checkmark";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",d:"M9,17.2l-4-4l-1.4,1.3L9,19.9L20.4,8.5L19,7.1L9,17.2z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.CheckmarkIcon=a}),98);
__d("WAWebDropdownItem.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={item:"_aj-q",text:"_aj-r",hover:"_aj-s",itemMaterial:"_ap51",fixedHeight:"_alxo",action:"_aj-t",compact:"_aj-u",icon:"_aj-v",emoji:"_aj-w",emojiGrid:"_aj-x",emojiPreview:"_aj-y",ellipsify:"_aj-z",disabled:"_aj--",shortcut:"_aj-_",checkmark:"_aj_0",attachMenuPopup:"_ak_v"};b=a;g["default"]=b}),98);
__d("WAWebKeyboardTabUtils",["$InternalEnum","WAWebMiscGatingUtils","lodash","tabbable"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["CUSTOM","CUSTOM_SELECTOR","TABBABLE"]),i=b("$InternalEnum").Mirrored(["FORWARD","BACKWARD"]);function a(a,b,e,f,g){b===void 0&&(b=i.FORWARD);e===void 0&&(e=h.CUSTOM);f===void 0&&(f=function(){return!0});var l,m;e===h.TABBABLE?(l=d("tabbable").tabbable(a),m=function(a){return!0}):e===h.CUSTOM_SELECTOR&&g!=null?(l=Array.from(a.querySelectorAll(g)),m=function(a){return!0}):(l=c("lodash").sortBy(Array.from(a.querySelectorAll("[data-tab]")),function(a){return parseInt(a.getAttribute("data-tab"),10)||0}),m=k);e=b===i.FORWARD?1:-1;g=0;a=document;var n=a.activeElement;if(n){b=l.findIndex(function(a){return a.contains(n)});if(d("WAWebMiscGatingUtils").messageListA11yRedesignEnabled()){a=l.findIndex(function(a){return a===n});a>0&&(b=a)}g=b===-1?0:j(b+e,l.length)}for(a=0;a<l.length;a++){b=j(g+a*e,l.length);b=l[b];if(m(b)&&f(b))return b}return null}function j(a,b){return(a+b)%b}function k(a){if(a.disabled)return!1;var b=parseInt(a.dataset.tab,10);return typeof b!=="number"||b<0?!1:!l(a)}function l(a){if(getComputedStyle(a).visibility==="hidden")return!0;a=a;while(a){if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}g.FocusType=h;g.TabDirection=i;g.getNextTabbableElement=a}),98);
__d("WAWebMutationObserver",[],(function(a,b,c,d,e,f){function a(a,b,c){var d=new MutationObserver(c);d.observe(a,b);return function(){d.disconnect()}}f.observeMutations=a}),66);
__d("WAWebPopoverPosition",["$InternalEnum","WAWebL10N"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["Top","End","Bottom","Start"]),i=b("$InternalEnum").Mirrored(["Center","Start","End"]);function j(a,b,c){c===void 0&&(c=0);return a.top-b.height-c}function k(a,b){b===void 0&&(b=0);return a.right+b}function l(a,b){b===void 0&&(b=0);return a.bottom+b}function m(a,b,c){c===void 0&&(c=0);return a.left-b.width-c}function n(a,b){return a.left+a.width/2-b.width/2}function o(a,b){return a.top+a.height/2-b.height/2}function p(a,b,d,e,f,g){var p,q,r;f===void 0&&(f=0);p=(p=g==null?void 0:g.height)!=null?p:0;q=(q=g==null?void 0:g.width)!=null?q:0;r=(r=g==null?void 0:g.offset)!=null?r:0;var s,t,u=1;f=f+p;var v=d;c("WAWebL10N").isRTL()&&(d===h.Start?v=h.End:d===h.End&&(v=h.Start));d={coords:{top:0,left:0},alignment:e,position:v,arrowCoords:null};var w=0;g!=null&&(e===i.Start||e===i.End)&&((v===h.Top||v===h.Bottom)&&a.width<r*2+q?w=r+q/2-a.width/2:(v===h.Start||v===h.End)&&a.height<r*2+q&&(w=r+q/2-a.height/2),e===i.Start&&(w=-w));v===h.Top?(d.coords.top=j(a,b,f),t="100%"):v===h.End?(d.coords.left=k(a,f),s=-p+u):v===h.Bottom?(d.coords.top=l(a,f),t=-p+u):v===h.Start&&(d.coords.left=m(a,b,f),s="100%");e===i.Center?v===h.Top||v===h.Bottom?(s="calc(50% - "+q/2+"px)",d.coords.left=n(a,b)):(t="calc(50% - "+q/2+"px)",d.coords.top=o(a,b)):e===i.Start?v===h.Top||v===h.Bottom?(s=r,d.coords.left=a.left+w):(t=r,d.coords.top=a.top+w):e===i.End&&(v===h.Top||v===h.Bottom?(s="calc(100% - "+(r+q)+"px)",d.coords.left=a.right-b.width+w):(t="calc(100% - "+(r+q)+"px)",d.coords.top=a.bottom-b.height+w));d.coords.left<0?v===h.Top||v===h.Bottom?(d.alignment=i.Start,d.coords.left=a.left+w,s=r):(d.position=h.End,d.coords.left=k(a,f),s="0px"):d.coords.left+b.width>window.innerWidth&&(v===h.Top||v===h.Bottom?(d.alignment=i.End,d.coords.left=a.right-b.width+w,s="calc(100% - "+q+"px)"):(d.position=h.Start,d.coords.left=m(a,b,f),s="100%"));d.coords.top<0?v===h.Start||v===h.End?(d.alignment=i.Start,d.coords.top=a.top+w,t=r):(d.position=h.Bottom,d.coords.top=l(a,f),t="0px"):d.coords.top+b.height>window.innerHeight&&(v===h.Start||v===h.End?(d.alignment=i.End,d.coords.top=a.bottom-b.height+w,t="calc(100% - "+r+"px)"):(d.position=h.Top,d.coords.top=j(a,b,f),t="100%"));g!=null&&t!=null&&s!=null&&(d.arrowCoords={top:t,left:s});return d}function a(a,b,c,d,e,f){e===void 0&&(e=0);var g;a instanceof HTMLElement?g=a.getBoundingClientRect():g={top:a.y,right:a.x,bottom:a.y,left:a.x,width:0,height:0,x:a.x,y:a.y};return p(g,b.getBoundingClientRect(),c,d,e,f)}function d(a){var b=a.position;a=a.alignment;var c="left",d="top";(b===h.Top||b===h.Bottom)&&(b===h.Top?d="bottom":d="top",a===i.Start?c="left":a===i.End?c="right":a===i.Center&&(c="center"));(b===h.Start||b===h.End)&&(b===h.Start?c="right":c="left",a===i.Start?d="top":a===i.End?d="bottom":a===i.Center&&(d="center"));return c+" "+d}g.PopoverPosition=h;g.PopoverAlignment=i;g.getFixedElementPositionFromRect=p;g.getFixedElementPosition=a;g.getDefaultTransformOrigin=d}),98);
__d("WAWebTriangle.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||c("react"),k=Math.sqrt(2),l={arrow:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",backgroundColor:"xgcd1z6",borderTopColor:"xjgx3p0",borderEndColor:"xaorda9",borderBottomColor:"xcigvqi",borderStartColor:"x5diq61",borderTopWidth:"xiu3vjd",borderEndWidth:"x9r96fe",borderBottomWidth:"x1y07hx1",borderStartWidth:"x1rj37im",borderTopStyle:"x1u71dlw",borderEndStyle:"x1xl6nxh",borderBottomStyle:"xr2j6r5",borderStartStyle:"xffnfpy",borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",display:"x1lliihq",transformOrigin:"x1g0ag68",boxSizing:"x9f619",$$css:!0},arrowUp:{transform:"x1dvvsi6",$$css:!0},arrowDown:{transform:"x19gryod",$$css:!0},arrowLeft:{transform:"x1koo3bh",$$css:!0},arrowRight:{transform:"xz03xr6",$$css:!0}};function a(a){var b=a.borderRadius;b=b===void 0?"4px":b;var d=a.direction;d=d===void 0?"down":d;var e=a.width;a=a.xstyle;var f=d==="up"||d==="down"?{width:e+"px",height:e/2+"px"}:{height:e+"px",width:e/2+"px"},g;switch(d){case"up":g=l.arrowUp;break;case"down":g=l.arrowDown;break;case"left":g=l.arrowLeft;break;case"right":g=l.arrowRight;break}return j.jsx("div",{style:f,className:"x1n2onr6 x6ikm8r x10wlt62",children:j.jsx("div",{style:{width:e/k+"px",height:e/k+"px",borderBottomLeftRadius:b},className:(i||(i=c("stylex")))(l.arrow,g,a)})})}a.displayName=a.name+" [from "+f.id+"]";g.Triangle=a}),98);
__d("WAWebPopoverArrow.react",["WAWebPopoverPosition","WAWebTriangle.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.coords,c=a.popoverPosition,e=a.width;a=a.xstyle;var f;switch(c){case d("WAWebPopoverPosition").PopoverPosition.Top:f="down";break;case d("WAWebPopoverPosition").PopoverPosition.Bottom:f="up";break;case d("WAWebPopoverPosition").PopoverPosition.Start:f="right";break;case d("WAWebPopoverPosition").PopoverPosition.End:f="left";break}return i.jsx("div",{className:"x10l6tqk",style:b,children:i.jsx(d("WAWebTriangle.react").Triangle,{width:e,direction:f,xstyle:a})})}a.displayName=a.name+" [from "+f.id+"]";g.PopoverAlignment=d("WAWebPopoverPosition").PopoverAlignment;g.PopoverPosition=d("WAWebPopoverPosition").PopoverPosition;g.PopoverArrow=a}),98);
__d("WAWebPopover.react",["WALogger","WAWebKeyboardTabUtils","WAWebMutationObserver","WAWebPopoverArrow.react","WAWebPopoverContext.react","WAWebPopoverPosition","WAWebUimUie.react","WAWebVelocityTransition","err","react","react-dom","useWAWebTimeout"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[popover] portal ref is missing!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[popover] trying to anchor to mouse, but no coords are set"]);k=function(){return a};return a}e=i||d("react");var l=h||(h=c("react")),m=e.useCallback,n=e.useEffect,o=e.useImperativeHandle,p=e.useRef,q=e.useState,r=24,s=24,t="wa-popovers-bucket";function a(){return l.jsx("div",{id:t})}a.displayName=a.name+" [from "+f.id+"]";function u(a,b){a.addEventListener("click",b);return function(){a.removeEventListener("click",b)}}function v(a,b,c){var d=function(a){a.preventDefault(),c||b(a)};a.addEventListener("contextmenu",d);return function(){a.removeEventListener("contextmenu",d)}}function w(a,b,c){a.addEventListener("mouseenter",b);a.addEventListener("mouseleave",c);return function(){a.removeEventListener("mouseenter",b),a.removeEventListener("mouseleave",c)}}function x(a,b,c){a.addEventListener("focus",b);a.addEventListener("blur",c);return function(){a.removeEventListener("focus",b),a.removeEventListener("blur",c)}}function y(a,b,c,d){var e=function(c){return b!=null&&c instanceof Node&&(c===b||b.contains(c)||c===a||a.contains(c))},f=function(a){e(a.relatedTarget)||d()};a.addEventListener("mouseenter",c);a.addEventListener("mouseleave",f);b==null?void 0:b.addEventListener("mouseleave",f);return function(){a.removeEventListener("mouseenter",c),a.removeEventListener("mouseleave",f),b==null?void 0:b.removeEventListener("mouseleave",f)}}function b(a){var b=document.getElementById(t),e=a.target,f=a.position,g=a.alignment,h=a.buffer,i=h===void 0?8:h;h=a.openingDelay;var z=a.enableEnterTransition,A=z===void 0?!0:z;z=a.enableExitTransition;z=z===void 0?!0:z;var B=a.initHandling,C=a.controllerRef,D=a.anchorToMouseCoords,E=D===void 0?!1:D,F=a.includeArrow;D=a.arrowXStyle;var G=d("WAWebPopoverContext.react").useWDSPopoverControllerContext(),H;if(e==="context"){if(G==null)throw c("err")('[Popover] A popover with a "context" target must be inside of a PopoverRefContext component');H=G.targetRef}else H=e;var I=p(null);e=q(null);var J=e[0],aa=e[1];e=q(!1);var K=e[0],L=e[1];e=q(!1);var M=e[0],N=e[1],O=p(null),P=m(function(){var a=H.current,b=I.current,c=O.current;if(b==null||a==null||!K)return;if(E===!0&&c==null){d("WALogger").WARN(k());return}c=d("WAWebPopoverPosition").getFixedElementPosition(E===!0&&c!=null?c:a,b,f,g,i,F===!0?{width:r,height:r/2,offset:s}:null);a=c.coords;b=c.alignment;var e=c.position;c=c.arrowCoords;var h=d("WAWebPopoverPosition").getDefaultTransformOrigin({position:e,alignment:b});aa(babelHelpers["extends"]({},a,{transformOrigin:h,position:e,alignment:b,arrowCoords:c}))},[I,H,f,g,i,K,E,F]);n(function(){if(H.current==null||M||!K)return;return d("WAWebMutationObserver").observeMutations(H.current,{subtree:!0,attributes:!0,childList:!0},function(){P()})},[H,P,M,K]);n(function(){if(I.current==null||M||!K)return;return d("WAWebMutationObserver").observeMutations(I.current,{subtree:!0,attributes:!0,childList:!0},function(){P()})},[I,P,M,K]);var Q=G==null?void 0:G.onOpen,R=a.onOpen;e=m(function(){L(!0),Q==null?void 0:Q(),R==null?void 0:R()},[Q,R]);var S=d("useWAWebTimeout").useTimeout(e,h),T=S[0],U=S[1],V=h!=null?T:e,W=m(function(a){a.stopPropagation(),E===!0?O.current={x:a.clientX,y:a.clientY}:O.current=null,V()},[E,V]),X=G==null?void 0:G.onClose,Y=a.onClose,Z=m(function(){O.current=null,X==null?void 0:X(),Y==null?void 0:Y(),U(),L(!1)},[U,X,Y]);n(function(){var a=H.current;if(a==null||B==null)return;var b=B;b instanceof Array||(b=[b]);var c=b.map(function(b){switch(b){case"click":return u(a,W);case"contextmenu":return v(a,W,M);case"hover":return w(a,W,Z);case"hover-popover":return y(a,I.current,W,Z);case"focus":return x(a,V,Z)}});return function(){return c.forEach(function(a){return a()})}},[B,H,V,Z,M,E,W]);S=function(){if(I.current!=null){var a=d("WAWebKeyboardTabUtils").getNextTabbableElement(I.current);a!=null&&a.focus()}};var $={showPopover:e,hidePopover:Z,popoverIsVisible:K,popoverIsAnimating:M};o(C,function(){return $});o(G==null?void 0:G.controllerRef,function(){return $});h=null;if(b!=null){T=l.jsxs("div",{className:"x1n2onr6",children:[F===!0&&(J==null?void 0:J.arrowCoords)!=null&&l.jsx(d("WAWebPopoverArrow.react").PopoverArrow,{coords:J.arrowCoords,popoverPosition:J.position,xstyle:D,width:r}),a.element]});if(a.dismissable===!0){G=l.jsx(d("WAWebUimUie.react").UIE,{escapable:!0,popable:!0,displayName:(C=a.name)!=null?C:"Popover",requestFocus:S,requestDismiss:Z,children:T})}else G=T;D=E!==!0&&l.jsx("div",{className:"x10l6tqk x8knxv4",style:{top:-i,right:-i,bottom:-i,left:-i}});h=d("react-dom").createPortal(l.jsx(d("WAWebVelocityTransition").VelocityTransition,{transitionName:"scaleAndFade","in":K,nodeRef:I,mountOnEnter:!0,unmountOnExit:!0,appear:!0,enter:A,exit:z,timeout:300,onEnter:function(){return P()},onEntering:function(){return N(!0)},onEntered:function(){A===!1&&P(),N(!1)},onExiting:function(){return N(!0)},onExited:function(){return N(!1)},children:l.jsxs("div",{ref:I,"data-testid":void 0,"data-animate-dropdown-item":!0,style:J,className:"xixxii4 x14g40p9 x1al4vs7",children:[D,G]})}),b)}else K&&b==null&&d("WALogger").ERROR(j()).devConsole({name:a.name});return{popover:h,showPopover:e,hidePopover:Z,popoverIsVisible:K,popoverIsAnimating:M}}g.PopoverAlignment=d("WAWebPopoverPosition").PopoverAlignment;g.PopoverPosition=d("WAWebPopoverPosition").PopoverPosition;g.ANCHOR_PORTAL_ID=t;g.PopoverPortalBucket=a;g.usePopoverElement=b}),98);
__d("WAWebWDSTooltip.react",["WAWebPopover.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react");b=(h||(h=d("react"))).forwardRef;var l={tooltip:{display:"x1rg5ohu",maxWidth:"x1dc814f",fontSize:"x1nxh6w3",color:"xjafh1k",textAlign:"x2b8uid",textOverflow:"xlyipyv",textShadow:"x7opvkv",backgroundColor:"xj5tmjb",borderTopStartRadius:"xhw592a",borderTopEndRadius:"xwihvcr",borderBottomEndRadius:"x7wuybg",borderBottomStartRadius:"xb9tvrk",$$css:!0},arrow:{backgroundColor:"xj5tmjb",$$css:!0}},m=b(function(a,b){var e=a.children;a=a.onClick;var f={};a!=null&&(f={onClick:a,role:"button",tabIndex:0});return k.jsx("div",babelHelpers["extends"]({ref:b,role:"tooltip","data-testid":void 0,className:(i||(i=c("stylex")))([l.tooltip,d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiPadding.vert8])},f,{children:e}))});function n(a){var b=a.element,c=a.onClick;a=babelHelpers.objectWithoutPropertiesLoose(a,["element","onClick"]);a=babelHelpers["extends"]({},a,{dismissable:Boolean(c),element:k.jsx(m,{onClick:c,children:b}),arrowXStyle:l.arrow});c=d("WAWebPopover.react").usePopoverElement(a);b=c.popover;a=c.showPopover;var e=c.hidePopover;c=c.popoverIsVisible;return{tooltip:b,showTooltip:a,hideTooltip:e,tooltipIsVisible:c}}function a(a){var b=a.targetRef,c=a.position,d=a.alignment,e=a.children,f=a.buffer;f=f===void 0?8:f;var g=a.showOnFocus;g=g===void 0?!0:g;var h=a.name,i=a.enableEnterTransition;i=i===void 0?!0:i;var j=a.enableExitTransition;j=j===void 0?!1:j;a=a.openingDelay;b=n({target:b,position:c,alignment:d,element:e,buffer:f,name:h,enableEnterTransition:i,enableExitTransition:j,initHandling:g?["hover","focus"]:"hover",openingDelay:a});c=b.tooltip;return c}a.displayName=a.name+" [from "+f.id+"]";g.PopoverAlignment=d("WAWebPopover.react").PopoverAlignment;g.PopoverPosition=d("WAWebPopover.react").PopoverPosition;g.useWDSTooltip=n;g.WDSHoverTooltip=a}),98);
__d("WAWebDropdownItem.react",["WAWebCheckmarkIcon","WAWebClassnames","WAWebDropdownItem.scss","WAWebKeyboardHotKeys.react","WAWebL10NFbtTypeUtils","WAWebPill.react","WAWebSvgComponentBase","WAWebWDSGatingUtils","WAWebWDSTooltip.react","keyMirror","react","stylex","useWAWebUIM"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react")),l=b.useRef,m=b.useState,n=c("keyMirror")({COMPACT:null,MUTED:null});function a(a){var b=a.children,e=a.tooltip,f=a.tooltipPosition;f=f===void 0?d("WAWebWDSTooltip.react").PopoverPosition.Start:f;var g=a.tooltipAlignment;g=g===void 0?d("WAWebWDSTooltip.react").PopoverAlignment.Center:g;var h=a.type;h=h===void 0?"text":h;var j=a.disabled;j=j===void 0?!1:j;var p=a.theme,q=a.action,r=a.testid;r=a.tabIndex;var s=a.addSpacing;s=s===void 0?!1:s;var t=a.ariaLabel,u=a.selected;u=u===void 0?!1:u;var v=a.pillText,w=a.showTooltipOnOverflow;w=w===void 0?!1:w;var x=a.fixedHeight;x=x===void 0?!0:x;var y=m(!1),z=y[0],A=y[1];y=m(!1);var B=y[0],C=y[1],D=l();y=l(null);var E=c("useWAWebUIM")(),F=function(){if(D.current==null)return!1;var a=D.current.style.overflow;(!a||a==="visible")&&(D.current.style.overflow="hidden");var b=D.current.clientWidth<D.current.scrollWidth||D.current.clientHeight<D.current.scrollHeight;D.current.style.overflow=a;return b},G;if(e!=null||F()&&w){var H;w=f;f=g;e!=null?H=e:e==null&&d("WAWebL10NFbtTypeUtils").isStringOrFbt(b)&&F()&&(H=b,w=d("WAWebWDSTooltip.react").PopoverPosition.Bottom);G=k.jsx(d("WAWebWDSTooltip.react").WDSHoverTooltip,{targetRef:y,position:w,alignment:f,buffer:8,children:H})}var I=function(a){if(!q)return;a=q(a)===!1;if(a)return;E&&E.requestDismiss()};g=function(){A(!0)};e=function(){A(!1)};F=function(){C(!0)};w=function(){C(!1)};f=function(a){I(a)};var J=function(a){if(a.repeat)return;I(a)};s=d("WAWebL10NFbtTypeUtils").isStringOrFbt(b)||s?k.jsxs("div",{ref:D,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebDropdownItem.scss").ellipsify,c("WAWebDropdownItem.scss").action,(s={},s[c("WAWebDropdownItem.scss").compact]=p===n.COMPACT,s[c("WAWebDropdownItem.scss").fixedHeight]=x,s),(i||(i=c("stylex")))(a.xstyle)),role:"button","aria-label":(x=t)!=null?x:b,children:[b,u&&k.jsx(d("WAWebCheckmarkIcon").CheckmarkIcon,{className_DONOTUSE:c("WAWebDropdownItem.scss").checkmark,color:d("WAWebSvgComponentBase").SvgColorProp.TEAL}),v!=null?k.jsx(d("WAWebPill.react").Pill,{inline:!0,children:v}):null]}):b;a={enter:J,space:J};x=d("WAWebClassnames").classnamesConvertMeToStylexPlease((t={},t[c("WAWebDropdownItem.scss").hover]=z||B,t[c("WAWebDropdownItem.scss").text]=h==="text"||h==="attach-menu-popup",t[c("WAWebDropdownItem.scss").emoji]=h==="emoji"||h==="emoji-grid"||h==="emoji-preview",t[c("WAWebDropdownItem.scss").emojiGrid]=h==="emoji-grid",t[c("WAWebDropdownItem.scss").emojiPreview]=h==="emoji-preview",t[c("WAWebDropdownItem.scss").icon]=h==="icon",t[c("WAWebDropdownItem.scss").disabled]=j||p===n.MUTED,t[c("WAWebDropdownItem.scss").item]=!0,t[c("WAWebDropdownItem.scss").shortcut]=!0,t[c("WAWebDropdownItem.scss").attachMenuPopup]=h==="attach-menu-popup",t[c("WAWebDropdownItem.scss").itemMaterial]=d("WAWebWDSGatingUtils").materialRefreshEnabled(),t));u=j?{}:{handlers:a,onContextMenu:o,onMouseDown:o,onClick:f,onMouseEnter:g,onMouseLeave:e,onFocus:F,onBlur:w};return k.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,babelHelpers["extends"]({ref:y,component:"li",className:x,"data-animate-dropdown-item":!0,"data-testid":void 0,tabIndex:(v=r)!=null?v:0},u,{children:[s,G]}))}a.displayName=a.name+" [from "+f.id+"]";function o(a){a.preventDefault()}g.ThemeOptions=n;g.DropdownItem=a}),98);
__d("WAWebUimUieMenu.react",["WANullthrows","WAWebCmd","react","useWAWebUIM"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");e=b.forwardRef;var i=b.useEffect,j=b.useImperativeHandle,k=b.useRef;function a(a,b){var e=a.contextMenu,f=c("useWAWebUIM")(),g=k(null);i(function(){d("WAWebCmd").Cmd.openContextMenu({menuOptions:e,uim:c("WANullthrows")(f)},function(a){g.current=a});return function(){d("WAWebCmd").Cmd.closeContextMenu(f)}},[]);var h=function(){return g.current};j(b,function(){return{getElement:h}});return null}f=e(a);g["default"]=f}),98);
__d("WAWebPhoneNumberWrapperMutatorComponent.react",["fbt","WALogger","WAPhoneUtils","WAWebCopyPasteSelectable.react","WAWebDropdownItem.react","WAWebFlex.react","WAWebGetOrQueryUsyncInfoContactAction","WAWebPhoneNumberContactAction","WAWebSpinner.react","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebWDSText.react","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePhoneClick getUsync failed with exceptions ",""]);k=function(){return a};return a}var l=j||c("react"),m=(i||(i=d("react"))).useState,n={spinnerContainer:{width:"xc5o50y",height:"x6hvgyk",$$css:!0},spinnerText:{marginTop:"xcxhlts",paddingStart:"xvpee5o",paddingLeft:null,paddingRight:null,paddingEnd:"x14uny0o",textAlign:"x2b8uid",$$css:!0},menuItem:{paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",$$css:!0}};function a(a){var e=a.fromMe,f=a.phoneNumber;a=a.selectable;var g=m(null),i=g[0],j=g[1];g=m(null);var o=g[0],p=g[1];g=m(null);var q=g[0],r=g[1];g=m(null);var s=g[0],t=g[1];function u(a){var c;q&&q.isCached(f)?c=q:(c=d("WAWebGetOrQueryUsyncInfoContactAction").usyncContactCached(),r(c));function e(a,b){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield c.getOrRun(a));w(a,b)}catch(a){w(null,b),t(null),d("WALogger").ERROR(k(),a).sendLogs("handlePhoneClick-getUsync")}});return g.apply(this,arguments)}c.isCached(f)||v(a);e(f,a)}function v(a){var b=l.jsxs(d("WAWebFlex.react").FlexColumn,{xstyle:n.spinnerContainer,align:"center",justify:"center",children:[l.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4,color:"highlight"}),l.jsx(d("WAWebWDSText.react").WDSTextSmall,{as:"span",xstyle:n.spinnerText,children:h._("__JHASH__5bUyKVxsG-x__JHASH__")},"phone_number_wrapper_loading_text")]});p({menu:b,event:a});j(null)}function w(a,b){var c=[];if(a==null?void 0:a.wid){var g=d("WAPhoneUtils").formatPhone(a.wid.user);c.push(l.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,xstyle:n.menuItem,action:function(b){return d("WAWebPhoneNumberContactAction").handleOpenChat(b,a.wid,e)},children:h._("__JHASH__BqpSJtN9lm7__JHASH__",[h._param("chat-with-phoneNumber",l.jsx("span",{dir:"ltr",children:g}))])},"message-on-whatsapp"))}c.push(l.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,xstyle:n.menuItem,action:function(){return d("WAWebPhoneNumberContactAction").handleCopyPhoneNumber(f,a==null?void 0:a.wid,e)},children:h._("__JHASH__QJcgRuZltlB__JHASH__")},"copy-phone-number"));p(null);j({menu:c,event:b});t(a==null?void 0:a.wid);d("WAWebPhoneNumberContactAction").logClickOnPhoneNumber(a==null?void 0:a.wid,e)}g=null;var x=null;i&&(g=l.jsx(d("WAWebUimUie.react").UIE,{displayName:"ContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:function(){j(null),d("WAWebPhoneNumberContactAction").logCloseDialog(s,e)},children:l.jsx(c("WAWebUimUieMenu.react"),{contextMenu:i})}));o&&(x=l.jsx(d("WAWebUimUie.react").UIE,{displayName:"ContextSpinner",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:function(){p(null)},children:l.jsx(c("WAWebUimUieMenu.react"),{contextMenu:o})}));return l.jsxs(l.Fragment,{children:[l.jsx(d("WAWebCopyPasteSelectable.react").SelectableLink,{onClick:u,selectable:a,style:{cursor:"pointer"},children:f}),g,x]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebShortNameTextMentionMutatorComponent.react",["WAWebContactGetters","WAWebFrontendContactGetters","WAWebMentionMutatorComponentBase.react","WAWebMiscGatingUtils","react","useWAWebContactValues","useWAWebModelValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.contact,c=a.onClick,e=a.theme,f=a.selectable,g=a.lastMessage,h=d("useWAWebContactValues").useContactValues(a.contact.id,[d("WAWebContactGetters").getId,d("WAWebFrontendContactGetters").getDisplayName,d("WAWebContactGetters").getShortName,d("WAWebContactGetters").getIsMyContact]),j=h[0],k=h[1],l=h[2];h[3];var m=d("useWAWebModelValues").useModelValues(a.groupMetadata,["uniqueShortNameMap"]);h=function(){return d("WAWebMiscGatingUtils").isDropLastNameEnabled()&&m&&m.hasUniqueShortNameMention(b)?l:k};a=h();return i.jsx(d("WAWebMentionMutatorComponentBase.react").MentionBase,{text:a,jid:j.toString(),theme:e,selectable:f,onClick:c,lastMessage:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebGroupMetadataContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a(null);g["default"]=b}),98);
__d("WAWebWrapperDisplayTypeContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a(null);g["default"]=b}),98);
__d("WAWebTextGroupMentionWrapperMutatorComponent.react",["WALogger","WAWebChatCollection","WAWebChatEntryPoint","WAWebClickable.react","WAWebCmd","WAWebCommunityGroupJourneyEventImpl","WAWebDisplayType","WAWebFindChatAction","WAWebGroupMetadataCollection","WAWebGroupMetadataContext","WAWebMentionMutatorComponentBase.react","WAWebMiscGatingUtils","WAWebUnjoinedSubgroupMetadataCollection","WAWebWamEnumChatFilterActionTypes","WAWebWamEnumSurfaceType","WAWebWrapperDisplayTypeContext","react"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["No local model found for given group mention JID"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to find chat from group mention even though we have gmd for it"]);k=function(){return a};return a}var l=i||c("react"),m=(h||(h=d("react"))).useContext;function a(a){var b,e=m(c("WAWebWrapperDisplayTypeContext")),f=m(c("WAWebGroupMetadataContext")),g=function(){var b=a.fromChatWid;b&&new(d("WAWebCommunityGroupJourneyEventImpl").CommunityGroupJourneyEvent)({action:d("WAWebWamEnumChatFilterActionTypes").CHAT_FILTER_ACTION_TYPES.SUBGROUP_MENTION_CLICK,surface:d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT,chat:d("WAWebChatCollection").ChatCollection.get(b)}).commit();b=c("WAWebUnjoinedSubgroupMetadataCollection").get(a.groupJid);if(b){d("WAWebCmd").Cmd.openCommunitySubgroupJoinModal(b,"group_mention");return}b=c("WAWebGroupMetadataCollection").get(a.groupJid);b?d("WAWebFindChatAction").findChat(b.id,"groupMentionWrapper").then(function(b){void d("WAWebCmd").Cmd.openChatBottom(b,d("WAWebChatEntryPoint").ChatEntryPoint.Mention).then(function(b){b&&new(d("WAWebCommunityGroupJourneyEventImpl").CommunityGroupJourneyEvent)({action:d("WAWebWamEnumChatFilterActionTypes").CHAT_FILTER_ACTION_TYPES.GROUP_NAVIGATION,surface:d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT,chat:d("WAWebChatCollection").ChatCollection.get(a.groupJid)}).commit()})})["catch"](function(a){return d("WALogger").ERROR(k()).devConsole(a)}):d("WALogger").ERROR(j()).devConsole(a.groupJid)};b=(b=(b=a.theme)==null?void 0:b.quoted)!=null?b:!1;f=c("WAWebGroupMetadataCollection").get((f=f==null?void 0:f.parentGroup)!=null?f:"");f=f!=null?f.joinedSubgroups.some(function(b){return b.toString()===a.groupJid})||f.unjoinedSubgroups.some(function(b){return b.toString()===a.groupJid}):!1;f=a.clickable===!0&&f===!0&&b===!1;b=f?g:void 0;g={text:a.groupSubject,jid:a.groupJid,theme:a.theme,selectable:a.selectable,lastMessage:a.lastMessage};return f&&d("WAWebMiscGatingUtils").messageListA11yRedesignEnabled()&&(e===d("WAWebDisplayType").DISPLAY_TYPE.CONVERSATION||e===d("WAWebDisplayType").DISPLAY_TYPE.ANNOUNCEMENT||e===d("WAWebDisplayType").DISPLAY_TYPE.NEWSLETTER)?l.jsx(d("WAWebClickable.react").Clickable,{className:"x1rg5ohu x1a06ls3",onClick:b,children:l.jsx(d("WAWebMentionMutatorComponentBase.react").MentionBase,babelHelpers["extends"]({},g))}):l.jsx(d("WAWebMentionMutatorComponentBase.react").MentionBase,babelHelpers["extends"]({},g,{onClick:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebTextMentionMutatorComponent.react",["WAWebChatTextMentionMutatorComponent.react","WAWebClickable.react","WAWebDisplayType","WAWebGroupMetadataContext","WAWebMiscGatingUtils","WAWebShortNameTextMentionMutatorComponent.react","WAWebWrapperDisplayTypeContext","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useContext;function a(a){var b=k(c("WAWebGroupMetadataContext")),e=k(c("WAWebWrapperDisplayTypeContext")),f=j.jsx(c("WAWebChatTextMentionMutatorComponent.react"),babelHelpers["extends"]({},a));d("WAWebMiscGatingUtils").isDropLastNameEnabled()&&b&&(f=j.jsx(c("WAWebShortNameTextMentionMutatorComponent.react"),babelHelpers["extends"]({},a,{groupMetadata:b})));if(d("WAWebMiscGatingUtils").messageListA11yRedesignEnabled()&&e===d("WAWebDisplayType").DISPLAY_TYPE.CONVERSATION)return j.jsx(d("WAWebClickable.react").Clickable,{as:"span",onClick:a.onClick,children:f});return e===d("WAWebDisplayType").DISPLAY_TYPE.EDITING?j.jsx("span",{className:"x1a06ls3",children:f}):f}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebTextMentionWrapperMutatorComponent.react",["fbt","WAWebBotProfileCollection","WAWebChatCollection","WAWebChatEntryPoint","WAWebCmd","WAWebConfirmPopup.react","WAWebDisplayType","WAWebFindChatAction","WAWebModalManager","WAWebTextMentionMutatorComponent.react","WAWebWrapperDisplayTypeContext","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useContext;function a(a){var b=a.contact,e=a.lastMessage,f=a.selectable;a=a.theme;var g=l(c("WAWebWrapperDisplayTypeContext")),i=function(){var a;a=(a=d("WAWebBotProfileCollection").BotProfileCollection.getDefaultBot())==null?void 0:a.id;if(b.id.isBot()&&!b.id.equals(a)&&!d("WAWebChatCollection").ChatCollection.get(b.id)){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH__hRkuhBsCvED__JHASH__")}));return}d("WAWebFindChatAction").findChat(b.id,"textMentionWrapper").then(function(a){return d("WAWebCmd").Cmd.openChatBottom(a,d("WAWebChatEntryPoint").ChatEntryPoint.Mention)})},j;g!==d("WAWebDisplayType").DISPLAY_TYPE.EDITING&&(j=i);return k.jsx(c("WAWebTextMentionMutatorComponent.react"),{contact:b,theme:a,selectable:f,onClick:j,lastMessage:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebSystemMessageGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return Boolean(d("WAWebABProps").getABPropConfigValue("system_msg_text_styling"))}function b(){return Boolean(d("WAWebABProps").getABPropConfigValue("system_msg_truncation"))}function c(){return Boolean(d("WAWebABProps").getABPropConfigValue("add_member_system_message"))}g.systemMessageActionTextStylingEnabled=a;g.systemMessageTextTruncationEnabled=b;g.isGroupContextCardEnabled=c}),98);
__d("WAWebFormatAddNotification",["fbt","WAWebSystemMessageGatingUtils","WAWebSystemMessagesUtils"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.author,c=a.authorClickable,e=a.subject,f=a.subjectClickable,g=a.participantsClickable;a=a.participantsCount;var i=d("WAWebSystemMessageGatingUtils").systemMessageTextTruncationEnabled();if(b){if(d("WAWebSystemMessagesUtils").isMe(b))return i&&a!=null&&a>3?h._("__JHASH__IgZO-ocGGzg__JHASH__",[h._param("names",g),h._param("participants_count",a-2)]):h._("__JHASH__8xAKgh-Dj-j__JHASH__",[h._param("names",g)]);else if(d("WAWebSystemMessagesUtils").isMe(e))return c!=null?h._("__JHASH__BAbg7l2pPhs__JHASH__",[h._param("user_name",c)]):h._("__JHASH__oDs47I-J4Lx__JHASH__");return c!=null?i&&a!=null&&a>3?h._("__JHASH__wRkofNjOnGB__JHASH__",[h._param("user_name",c),h._param("names",g),h._param("participants_count",a-2)]):h._("__JHASH__ljauCLeI_rS__JHASH__",[h._param("user_name",c),h._param("names",g)]):i&&a!=null&&a>3?h._("__JHASH__5D6WFdfaWbq__JHASH__",[h._param("names",g),h._param("participants_count",a-2)]):h._("__JHASH__8bx-IhOpqEC__JHASH__",[h._param("names",g)])}else if(d("WAWebSystemMessagesUtils").isMe(e))return h._("__JHASH__XJKsiTmuNiM__JHASH__");return h._("__JHASH__2Fn4GrAlKs7__JHASH__",[h._param("user_name",f)])}g.formatAddNotification=a}),226);
__d("WAWebFormatAnnounceNotification",["fbt","WAWebSystemMessagesUtils"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.author,c=a.authorClickable;a=a.body;return a==="on"?d("WAWebSystemMessagesUtils").isMe(b)?h._("__JHASH__VD3US4VtliK__JHASH__"):h._("__JHASH__Zc0TH0afHQJ__JHASH__",[h._param("user_name",c)]):d("WAWebSystemMessagesUtils").isMe(b)?h._("__JHASH__5B0oqfWMeIP__JHASH__"):h._("__JHASH__zDJfYGMA4u8__JHASH__",[h._param("user_name",c)])}g.formatAnnounceNotification=a}),226);
__d("WAWebFormatBroadcastNotification",["fbt","WAWebFormatParticipantNames"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.subtype,c=a.body;a=a.recipients;if(b==="create"){c=parseInt(c,10);return h._("__JHASH__cJxuW7vE1M5__JHASH__",[h._plural(c,"count")]).toString()}else if(b==="add"){c=a.length;return h._("__JHASH__wUrTOwzviLl__JHASH__",[h._plural(c),h._param("name",d("WAWebFormatParticipantNames").getFormattedNames(a,!0))]).toString()}else if(b==="remove"){c=a.length;return h._("__JHASH__9hnK_J-qgFm__JHASH__",[h._plural(c),h._param("name",d("WAWebFormatParticipantNames").getFormattedNames(a,!0))]).toString()}return""}g["default"]=a}),226);
__d("WAWebFormatCreateNotification",["fbt","WAWebSystemMessagesUtils","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.chat,c=a.author,e=a.authorClickable,f=a.groupSubject;a=a.groupSubjectAsString;a=a?f:j.jsx(d("WAWebSystemMessagesUtils").FormattedText,{text:f});if(d("WAWebSystemMessagesUtils").isMe(c))return f?h._("__JHASH__qz9eLl4MSVC__JHASH__",[h._param("group_subject",a)]):h._("__JHASH__gFOO0xmUCNX__JHASH__");else if(f)return e!=null?h._("__JHASH__k8PK_KYGaX-__JHASH__",[h._param("user_name",e),h._param("group_subject",a)]):h._("__JHASH__DITV_eY-TrO__JHASH__",[h._param("group_subject",a)]);if(e!=null){c=b?b.title():"";return c.trim()===""?h._("__JHASH__VLr0DS5GZRY__JHASH__",[h._param("user_name",e)]):h._("__JHASH__k8PK_KYGaX-__JHASH__",[h._param("user_name",e),h._param("group_subject",c)])}return h._("__JHASH__iEX5m5FoSPo__JHASH__")}a.displayName=a.name+" [from "+f.id+"]";g.formatCreateNotification=a}),226);
__d("WAWebFormatCreatedSubgroupSuggestionNotification",["fbt","WAWebFormatParticipantNames","WAWebSystemMessageGatingUtils"],(function(a,b,c,d,e,f,g,h){function a(a,b,c){a=d("WAWebFormatParticipantNames").getFormattedName(a,!c);c=b[0];b=d("WAWebSystemMessageGatingUtils").systemMessageActionTextStylingEnabled();return b?h._("__JHASH__1l0UMR6G_Jg__JHASH__",[h._param("suggestion-owner",a),h._param("suggested-group-name",c)]):h._("__JHASH__B5pdNqBQFFT__JHASH__",[h._param("suggestion-owner",a),h._param("suggested-group-name",c)])}g["default"]=a}),226);
__d("WAWebWamEnumSystemMessageTypeType",[],(function(a,b,c,d,e,f){a=Object.freeze({E2E_ENCRYPTED_MESSAGES_CALLS:1,E2E_ENCRYPTED_MESSAGES:2,E2E_ENCRYPTED_BROADCAST_LIST:3,E2E_ENCRYPTED_MESSAGE_YOURSELF:4,OFFICIAL_ACCOUNT_INFO:8,GROUP_ADD:9,GROUP_RESET_INVITE:10,COMMUNITY_DESCRIPTION_CHANGED:11,GROUP_DESCRIPTION_CHANGED:12,GROUP_PARTICIPANTS_CHANGED:13,COMMUNITY_MEMBERS_CHANGED:14,GROUP_INVITE_LINK_UNAVAILABLE:15,GROUP_INVITE_LINK_AVAILABLE:16,GROUP_JOIN_REQUEST:17,GROUP_SUGGEST:18});f.SYSTEM_MESSAGE_TYPE_TYPE=a}),66);
__d("WAWebFormatDescriptionNotification",["fbt","WAWebSystemMessageGatingUtils","WAWebSystemMessagesUtils","WAWebWamEnumSystemMessageTypeType"],(function(a,b,c,d,e,f,g,h){var i=d("WAWebSystemMessageGatingUtils").systemMessageActionTextStylingEnabled();function j(a){var b=a.author,c=a.authorClickable,e=a.isParentGroup;e=e===void 0?!1:e;a=a.shouldFormatAsLastMsg;a=a===void 0?!1:a;if(a){if(d("WAWebSystemMessagesUtils").isMe(b))return e===!0?{text:h._("__JHASH__rEwDaO-74eH__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}:{text:h._("__JHASH__mUiGzoosvhe__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_DESCRIPTION_CHANGED};else if(c!=null)return e===!0?{text:h._("__JHASH__mLdX6iSoxJJ__JHASH__",[h._param("user_name",c)]),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}:{text:h._("__JHASH__-NBUziJx978__JHASH__",[h._param("user_name",c)]),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_DESCRIPTION_CHANGED};return e===!0?{text:h._("__JHASH__9zLGFMsYIe5__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}:{text:h._("__JHASH__1jYeti3AsGP__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_DESCRIPTION_CHANGED}}if(d("WAWebSystemMessagesUtils").isMe(b))return e===!0?{text:i?h._("__JHASH__t_j94ad5YJf__JHASH__"):h._("__JHASH__eRb43gZowig__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}:{text:i?h._("__JHASH__3vrLxPctyCO__JHASH__"):h._("__JHASH__qoeKQ6oAHl1__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_DESCRIPTION_CHANGED};else if(c!=null)return e===!0?{text:i?h._("__JHASH__C-9upMEUQ6N__JHASH__",[h._param("user_name",c)]):h._("__JHASH__BsETYJ1iF7O__JHASH__",[h._param("user_name",c)]),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}:{text:i?h._("__JHASH__opIQiaNOEt8__JHASH__",[h._param("user_name",c)]):h._("__JHASH__bMJVrUq-155__JHASH__",[h._param("user_name",c)]),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_DESCRIPTION_CHANGED};return e===!0?{text:i?h._("__JHASH__Xp8KS2XmvzW__JHASH__"):h._("__JHASH__aoHzWwu4PqD__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}:{text:i?h._("__JHASH__TVgzEFZZhdQ__JHASH__"):h._("__JHASH__VANGI9EhHnE__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.COMMUNITY_DESCRIPTION_CHANGED}}function a(a){var b=a.author,c=a.authorClickable,d=a.isParentGroup;d=d===void 0?!1:d;a=a.shouldFormatAsLastMsg;a=a===void 0?!1:a;return j({author:b,authorClickable:c,isParentGroup:d,shouldFormatAsLastMsg:a}).text}function b(a){var b=a.author,c=a.authorClickable,d=a.isParentGroup;d=d===void 0?!1:d;a=a.shouldFormatAsLastMsg;a=a===void 0?!1:a;return j({author:b,authorClickable:c,isParentGroup:d,shouldFormatAsLastMsg:a}).enumType}g.generateDescriptionNotification=j;g.formatDescriptionNotification=a;g.getDescriptionNotificationEnum=b}),226);
__d("WAWebSupportChatStrings",["fbt"],(function(a,b,c,d,e,f,g,h){function a(){return h._("__JHASH__0r8elpBidB1__JHASH__")}function b(){return h._("__JHASH__2dZoQlcqYq-__JHASH__")}function c(){return h._("__JHASH__VfxYH48RNuC__JHASH__")}function d(){return h._("__JHASH__6vsNUtc0j-u__JHASH__")}function e(){return h._("__JHASH__9UMSCFpd0fN__JHASH__")}function f(){return h._("__JHASH__6kfyjvlooAM__JHASH__")}function i(){return h._("__JHASH__GYBirnVPx9d__JHASH__")}function j(){return h._("__JHASH__D2zu_0rLfxH__JHASH__")}function k(){return h._("__JHASH__iIl2UNqLMqQ__JHASH__")}function l(){return h._("__JHASH__MQfgpZtMN65__JHASH__")}function m(){return h._("__JHASH__qyaR3oiJthF__JHASH__")}function n(){return h._("__JHASH__YW4kgvPMV_h__JHASH__")}function o(){return h._("__JHASH__qUguzLqduL4__JHASH__")}g.SupportChatSubtitle=a;g.SupportChatSystemMessage=b;g.SupportChatLearnMoreLinkText=c;g.SupportChatSecurityModalText=d;g.SupportChatDescription=e;g.SupportChatStartButtonText=f;g.SupportChatConfirmationToast=i;g.SupportChatDeviceInfoQuestion=j;g.SupportChatDeviceInfoAIDisclaimer=k;g.SupportChatDeviceInfoDisclaimer=l;g.SupportChatDeviceInfoContext=m;g.SupportChatNoInternetModalTitle=n;g.SupportChatNoInternetModalMessage=o}),226);
__d("WAWebFormatE2ENotification",["fbt","WALogger","WAWebABPropsSupportGroup","WAWebChatGroupUtils","WAWebContactCollection","WAWebContactGetters","WAWebFormatE2ENotificationForDeviceChange","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebSupportChatStrings","WAWebSystemMessageGatingUtils","WAWebUserPrefsMeUser","WAWebVoipGkUtils","WAWebWamEnumSystemMessageTypeType","WAWebWid","WAWebWidFormat"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["generateE2ENotification: receive identity notification of self"]);i=function(){return a};return a}function j(a){var b=d("WAWebSystemMessageGatingUtils").systemMessageActionTextStylingEnabled();switch(a.subtype){case"identity":var e=a.body==null?null:d("WAWebContactCollection").ContactCollection.get(a.body);if(e!=null&&d("WAWebContactGetters").getIsMe(e)){d("WALogger").ERROR(i()).sendLogs("SelfIdentityNotificationError");var f=d("WAWebFrontendMsgGetters").getChat(a.unsafe());if(f.isUser){var g=f.contact?d("WAWebFrontendContactGetters").getFormattedName(f.contact):d("WAWebWidFormat").widToFormattedUser(f.id);return{text:b?h._("__JHASH__iAJlweVMIXA__JHASH__",[h._param("contactName",g)]):h._("__JHASH__Y0clu2dPq25__JHASH__",[h._param("contactName",g)])}}else if(f.isGroup)return{text:b?h._("__JHASH__KXAqItH86-Z__JHASH__"):h._("__JHASH__d24_7Mm9yEv__JHASH__")};else if(f.isBroadcast)return{text:b?h._("__JHASH__tkiGYDLio93__JHASH__"):h._("__JHASH__kJkaRPeEqgX__JHASH__")}}g=e?d("WAWebFrontendContactGetters").getFormattedName(e):d("WAWebWidFormat").widToFormattedUser(a.body);return{text:b?h._("__JHASH__iAJlweVMIXA__JHASH__",[h._param("contactName",g)]):h._("__JHASH__Y0clu2dPq25__JHASH__",[h._param("contactName",g)])};case"device":return{text:d("WAWebFormatE2ENotificationForDeviceChange").formatE2ENotificationForDeviceChange(a),enumType:d("WAWebFormatE2ENotificationForDeviceChange").getE2ENotificationForDeviceChangeEnum(a)};case"encrypt":f=a.id.remote;if(c("WAWebWid").isGroup(f))return d("WAWebChatGroupUtils").isSupportGroup(d("WAWebFrontendMsgGetters").getMaybeChat(a.unsafe()))?{text:d("WAWebSupportChatStrings").SupportChatSystemMessage()}:{text:b?h._("__JHASH__EsI0hg2O-ib__JHASH__"):h._("__JHASH__h82RUqM6Eje__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.E2E_ENCRYPTED_MESSAGES};else if(c("WAWebABPropsSupportGroup")(f.user))return{text:d("WAWebSupportChatStrings").SupportChatSystemMessage()};else if(c("WAWebWid").isBroadcast(f))return{text:b?h._("__JHASH__96RBlZVf-uw__JHASH__"):h._("__JHASH__-xfFULu0lpe__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.E2E_ENCRYPTED_BROADCAST_LIST};else if(d("WAWebUserPrefsMeUser").isMeAccount(f))return{text:b?h._("__JHASH__f6MUL-dXLXx__JHASH__"):h._("__JHASH__e89sUCjusrI__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.E2E_ENCRYPTED_MESSAGE_YOURSELF};else if(c("WAWebVoipGkUtils").isVoiceCallEnabled()||c("WAWebVoipGkUtils").isVideoCallEnabled())return{text:b?h._("__JHASH__WAV2ugY7YVg__JHASH__"):h._("__JHASH__pjUtz-p_gX9__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.E2E_ENCRYPTED_MESSAGES_CALLS};return{text:b?h._("__JHASH__lATbzIm6AOC__JHASH__"):h._("__JHASH__Dprz8wUXmKN__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.E2E_ENCRYPTED_MESSAGES};case"encrypt_now":return{text:b?h._("__JHASH__nToESVFUtD-__JHASH__"):h._("__JHASH__n6lvEtbdRv4__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.E2E_ENCRYPTED_MESSAGES_CALLS};case"e2e_identity_unavailable":return{text:h._("__JHASH__BmTELsfRzRg__JHASH__")};case"chat_psa":return{text:b?h._("__JHASH__fvOQZZ-lprj__JHASH__"):h._("__JHASH__zZN-rSjj4JW__JHASH__"),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.OFFICIAL_ACCOUNT_INFO};default:return{text:""}}}function a(a){return j(a).text}function b(a){return j(a).enumType}g.generateE2ENotification=j;g.formatE2ENotification=a;g.getE2ENotificationEnum=b}),226);
__d("WAWebFormatE2ENotificationForDeviceChange",["fbt","invariant","WAWebContactCollection","WAWebContactGetters","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebSystemMessageGatingUtils","WAWebWidFormat"],(function(a,b,c,d,e,f,g,h,i){function j(a,b){b===void 0&&(b=!1);a.subtype==="device"||i(0,56347);var c=d("WAWebSystemMessageGatingUtils").systemMessageActionTextStylingEnabled(),e=a.body?d("WAWebContactCollection").ContactCollection.get(a.body):null,f,g=a.devicesAdded===1&&a.devicesRemoved===0,j=a.devicesAdded===0&&a.devicesRemoved===1,k=!g&&!j;if(e!=null&&d("WAWebContactGetters").getIsMe(e)){var l=d("WAWebFrontendMsgGetters").getChat(a.unsafe());if(l.isUser){var m=d("WAWebFrontendContactGetters").getFormattedName(l.contact);!b?f=c?h._("__JHASH__iAJlweVMIXA__JHASH__",[h._param("contactName",m)]):h._("__JHASH__Y0clu2dPq25__JHASH__",[h._param("contactName",m)]):g?a.isThisDeviceAdded?f=h._("__JHASH__bwXmvErxScx__JHASH__",[h._param("contactName",m)]):f=h._("__JHASH__dUjWiVvXwSa__JHASH__",[h._param("contactName",m)]):j?f=h._("__JHASH__ACqaQ72vBxC__JHASH__",[h._param("contactName",m)]):k&&(f=h._("__JHASH__hHBVJHSHiUq__JHASH__",[h._param("contactName",m)]))}else l.isGroup?!b?f=c?h._("__JHASH__KXAqItH86-Z__JHASH__"):h._("__JHASH__d24_7Mm9yEv__JHASH__"):g?a.isThisDeviceAdded?f=h._("__JHASH__VkApoG3MnPD__JHASH__"):f=h._("__JHASH__sYzckmA1A8g__JHASH__"):j?f=h._("__JHASH__82M1aI7aNzf__JHASH__"):k&&(f=h._("__JHASH__YST1pd8T_0c__JHASH__")):l.isBroadcast&&(!b?f=c?h._("__JHASH__tkiGYDLio93__JHASH__"):h._("__JHASH__kJkaRPeEqgX__JHASH__"):g?a.isThisDeviceAdded?f=h._("__JHASH__X385zLUpJa1__JHASH__"):f=h._("__JHASH__OkxmRes6dTV__JHASH__"):j?f=h._("__JHASH__Gtd58JvkzFk__JHASH__"):k&&(f=h._("__JHASH__KQAP2o387cr__JHASH__")))}else{m=a.body;e=m==null?null:d("WAWebContactCollection").ContactCollection.get(m);l=e?d("WAWebFrontendContactGetters").getFormattedName(e):d("WAWebWidFormat").widToFormattedUser(m);!b?f=c?h._("__JHASH__iAJlweVMIXA__JHASH__",[h._param("contactName",l)]):h._("__JHASH__Y0clu2dPq25__JHASH__",[h._param("contactName",l)]):g?f=h._("__JHASH__RPRLzpTxBtv__JHASH__",[h._param("contactName",l)]):j?f=h._("__JHASH__CHadHJK-X-r__JHASH__",[h._param("contactName",l)]):k&&(f=h._("__JHASH__fiVap3egZBO__JHASH__",[h._param("contactName",l)]))}f!=null||i(0,56348);return{text:f}}function a(a,b){b===void 0&&(b=!1);return j(a,b).text}function b(a,b){b===void 0&&(b=!1);return j(a,b).enumType}g.generateE2ENotificationForDeviceChange=j;g.formatE2ENotificationForDeviceChange=a;g.getE2ENotificationForDeviceChangeEnum=b}),226);
__d("WAWebFormatEphemeralSetting",["fbt","WALogger","WANullthrows","WAWebABProps","WAWebBizCoexGatingUtils","WAWebChatEphemerality","WAWebContactCollection","WAWebContactGetters","WAWebEphemeralConstants","WAWebEphemeralFbtKic","WAWebEphemeralityTypes","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebLiftMeUpGatingUtils","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebWid","err"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["formatEphemeralSetting: notify name missing from contact"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot parse msg to build DM system message"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingMessageDurationString: Weeks are not an option for DM system messages"]);k=function(){return a};return a}function a(a){a=n(a);var b=a.newDuration;a=a.initiatingUser;var e=d("WAWebUserPrefsMeUser").isMeAccount(c("WANullthrows")(a));if(e)e=d("WAWebEphemeralFbtKic").getDisappearingModeYouStringKic(b);else{a=d("WAWebContactCollection").ContactCollection.gadd(c("WANullthrows")(a));e=d("WAWebEphemeralFbtKic").getDisappearingModeOtherStringKic(b,d("WAWebFrontendContactGetters").getFormattedName(a))}return e}function b(a){return s(d("WAWebStateUtils").unproxy(a.unsafe()))}function l(a){if(d("WAWebFrontendMsgGetters").getChat(a)!=null){var b=d("WAWebFrontendMsgGetters").getChat(a).msgs;a=b.indexOf(a);for(a=a-1;a>=0;a--){var c=b.at(a);if(c!=null&&c.type!=="debug"&&(c.type!=="gp2"||c.subtype==="ephemeral"))return c}}}function m(a){a=l(a);if(a!=null){if(a.ephemeralDuration!=null&&a.ephemeralDuration>0)return!0;if((a.subtype==="ephemeral"||a.subtype==="disappearing_mode")&&a.templateParams[0]!=null&&a.templateParams[0]!=="0")return!0}return!1}function n(a){var b,d;a.templateParams.length?(d=parseInt(a.templateParams[0],10),b=a.templateParams[1]):(b=a.ephemeralSettingUser,d=a.ephemeralDuration);if(d==null)throw c("err")("Duration cannot be null for DM notification");return{newDuration:(a=d)!=null?a:0,disappearingModeTrigger:null,initiatingUser:b}}function o(a){var b,c;a.ephemeralSettingUser!==void 0?c=a.ephemeralSettingUser:c=a.from;return{newDuration:(b=a.ephemeralDuration)!=null?b:0,disappearingModeTrigger:a.disappearingModeTrigger,initiatingUser:c}}function p(a){var b=a.initiatorUsername,c=a.initiatorIsMe;a=a.state;if(c){if(a==="update")return h._("__JHASH__k3foWD6C0Ou__JHASH__");else if(a==="on")return h._("__JHASH__3rvxQm7fwnn__JHASH__");return h._("__JHASH__rDEaHtlRT7d__JHASH__")}else if(b!=null){if(a==="update")return h._("__JHASH__bWukMNoK9Lm__JHASH__",[h._param("name",b)]);else if(a==="on")return h._("__JHASH__h4UAN3cCjDo__JHASH__",[h._param("name",b)]);return h._("__JHASH__00g0Y0b6u5g__JHASH__",[h._param("name",b)])}if(a==="update")return h._("__JHASH__6_ExMnWmekp__JHASH__");else if(a==="on")return h._("__JHASH__95BnGlLz6rC__JHASH__");return h._("__JHASH__5-3TGa3WQMS__JHASH__")}function q(a){a=d("WAWebEphemeralConstants").getDurationForString(a);var b=a.duration;a=a.unit;switch(a){case d("WAWebEphemeralConstants").DurationUnit.Seconds:return h._("__JHASH__Svoe5IvXqcl__JHASH__",[h._plural(b,"duration")]);case d("WAWebEphemeralConstants").DurationUnit.Minutes:return h._("__JHASH__5ijP7aYFO6I__JHASH__",[h._plural(b,"duration")]);case d("WAWebEphemeralConstants").DurationUnit.Hours:return h._("__JHASH__2S8rQ_MOanH__JHASH__",[h._plural(b,"duration")]);case d("WAWebEphemeralConstants").DurationUnit.Days:return h._("__JHASH__a_D-Dk9bl1Z__JHASH__",[h._plural(b,"duration")]);case d("WAWebEphemeralConstants").DurationUnit.Weeks:d("WALogger").ERROR(k());return h._("__JHASH__77BlMqYl-i2__JHASH__",[h._plural(b,"duration")])}}function r(a){a=q(a);return h._("__JHASH__s7aA3WqFfRa__JHASH__",[h._param("dm-duration",a)])}function s(a){var b=null;switch(a.type){case"gp2":case"notification_template":b=n(a);break;case"protocol":b=o(a);break;default:break}if(b==null){d("WALogger").ERROR(j()).tags("DM","DDM").devConsole(a);throw c("err")("Cannot parse msg to build DM system message")}var e=null,f=d("WAWebUserPrefsMeUser").isMePrimary(b.initiatingUser);if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&b.disappearingModeTrigger===d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting)return t(f);var g=null;!b.newDuration?g="off":m(a)?g="update":g="on";g==="update"&&!d("WAWebABProps").getABPropConfigValue("dm_updated_system_message")&&(g="on");var h=d("WAWebLiftMeUpGatingUtils").elevateLiftMeUpEnabled();if(b.initiatingUser!=null&&!f){var k=d("WAWebContactCollection").ContactCollection.gadd(b.initiatingUser),l=d("WAWebContactGetters").getIsMyContact(k);if(l)e=d("WAWebFrontendContactGetters").getFormattedName(k);else{e=d("WAWebFrontendContactGetters").getFormattedPhone(k);if(h){l=d("WAWebContactGetters").getNotifyName(k);l!=null?e="~"+l:d("WALogger").ERROR(i())}}}h=d("WAWebFrontendMsgGetters").getMaybeChat(a);l=h&&d("WAWebChatEphemerality").shouldShowEphemeralSetting(h)&&(c("WAWebWid").isUser(h.id)||((k=h.groupMetadata)==null?void 0:k.canSetEphemeralSetting()));return u({newDuration:b.newDuration,state:g,initiatorUsername:e,initiatorIsMe:f,userCanChange:l===!0})}function t(a){var b=h._("__JHASH__VxKDXwmrZZX__JHASH__"),c=h._("__JHASH__ShGMzMOpsve__JHASH__");return a?c:b}function u(a){var b=a.newDuration,c=a.state,d=a.initiatorUsername,e=a.initiatorIsMe;a=a.userCanChange;d=p({initiatorUsername:d,initiatorIsMe:e,state:c});e=h._("__JHASH__B_GrurKg9Zj__JHASH__");if(!b)return a!==!0?d:h._("__JHASH__giEibd2apxO__JHASH__",[h._param("dm-sm-event",d),h._param("dm-sm-action",e)]);c=r(b);return a!==!0?h._("__JHASH__cXCgiG67rv3__JHASH__",[h._param("dm-sm-event",d),h._param("dm-sm-explanation",c)]):h._("__JHASH__FCc2NfFv7a7__JHASH__",[h._param("dm-sm-event",d),h._param("dm-sm-explanation",c),h._param("dm-sm-action",e)])}function e(){return h._("__JHASH__g_28ORDvVoq__JHASH__")}g.getDefaultDisappearingModeSystemMessageText=a;g.getDisappearingModeUpdateSystemMessageText=b;g.getDisappearingMessageDurationString=q;g.formatEphemeralSetting=s;g.buildEphemeralSystemMessage=u;g.getDMUnsupportedSystemMessageText=e}),226);
__d("WAWebFormatAllowNonAdminSubGroupCreationNotification",["fbt","WAWebCommunityGatingUtils","WAWebGroupType"],(function(a,b,c,d,e,f,g,h){function a(a,b){b=b[0]&&d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.cast(b[0].toString())===d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On;a=Boolean((a=a.groupMetadata)==null?void 0:a.participants.iAmAdmin());if(b)return a?h._("__JHASH__7yApn3Wzx7J__JHASH__"):h._("__JHASH__n-VxxNLTED3__JHASH__");return d("WAWebCommunityGatingUtils").memberSuggestedGroupsEnabled()?a?h._("__JHASH__f1zUEt58a97__JHASH__"):h._("__JHASH__Re-cRpx9YxY__JHASH__"):a?h._("__JHASH__xU6DWFBsD9y__JHASH__"):h._("__JHASH__SOsR9yiCq-c__JHASH__")}g["default"]=a}),226);
__d("WAWebFormatDeleteNotification",["fbt","WAWebChatGroupUtils"],(function(a,b,c,d,e,f,g,h){function a(a){a=a.chat;return d("WAWebChatGroupUtils").isCommunityAnnouncementGroup(a)?h._("__JHASH__mxx81v4QY5A__JHASH__"):d("WAWebChatGroupUtils").isSupportGroup(a)?h._("__JHASH__R2_xVN5V2XJ__JHASH__"):h._("__JHASH__PqIPmn4VVgX__JHASH__")}g.formatDeleteNotification=a}),226);
__d("WAWebFormatSubjectNotification",["fbt","WAWebChatGroupUtils","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g,h){function a(a,b,c,e){if(d("WAWebChatGroupUtils").isCommunityAnnouncementGroup(a))return d("WAWebUserPrefsMeUser").isMeAccount(b)?h._("__JHASH__GWQwh4FTOB___JHASH__",[h._param("community_name",e)]):c!=null?h._("__JHASH__nTnHf-Q5wpg__JHASH__",[h._param("user",c),h._param("community_name",e)]):h._("__JHASH__g1iqAEA2Fwo__JHASH__",[h._param("community_name",e)]);return d("WAWebUserPrefsMeUser").isMeAccount(b)?h._("__JHASH__dLFcfhpAGpb__JHASH__",[h._param("group_name",e)]):c!=null?h._("__JHASH__3KWlvOdQcIv__JHASH__",[h._param("user",c),h._param("group_name",e)]):h._("__JHASH__RxsFGXYezp-__JHASH__",[h._param("group_name",e)])}g.formatSubjectNotification=a}),226);
__d("WAWebMessageCommunityEmptySubgroupWelcomeTitle.react",["fbt"],(function(a,b,c,d,e,f,g,h){function a(a){return h._("__JHASH__AUDnV1NrRJA__JHASH__",[h._param("subgroup_name",a)])}g.communityEmptySubgroupWelcomeTitle=a}),226);
__d("WAWebMessageCommunityGeneralChatAutoAddDisabledNotification.react",["fbt"],(function(a,b,c,d,e,f,g,h){function a(a){return h._("__JHASH__dVT-fzi2lLN__JHASH__",[h._param("subgroup_name",a)])}g.communityGeneralChatAutoAddDisabledNotification=a}),226);
__d("WAWebMessageCommunityGeneralChatWelcomeTitle.react",["fbt"],(function(a,b,c,d,e,f,g,h){function a(a){return h._("__JHASH__4cCqp0IsQi4__JHASH__",[h._param("subgroup_name",a)])}g.communityGeneralChatWelcomeTitle=a}),226);
__d("WAWebFormatGroupNotification",["fbt","WALogger","WAWebContactCollection","WAWebFormatAddNotification","WAWebFormatAllowNonAdminSubGroupCreationNotification","WAWebFormatAnnounceNotification","WAWebFormatCreateNotification","WAWebFormatCreatedSubgroupSuggestionNotification","WAWebFormatDeleteNotification","WAWebFormatDescriptionNotification","WAWebFormatEphemeralSetting","WAWebFormatLeaveNotification","WAWebFormatLinkNotification","WAWebFormatMembershipApprovalNotification","WAWebFormatParticipantNames","WAWebFormatPictureNotification","WAWebFormatPromoteDemoteNotification","WAWebFormatRemoveNotification","WAWebFormatReportToAdminNotification","WAWebFormatRestrictNotification","WAWebFormatSubjectNotification","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebL10N","WAWebMessageCommunityEmptySubgroupWelcomeTitle.react","WAWebMessageCommunityGeneralChatAutoAddDisabledNotification.react","WAWebMessageCommunityGeneralChatWelcomeTitle.react","WAWebMessageCommunityLinkGroup.react","WAWebMessageCommunitySubgroupWelcome.react","WAWebMessageCommunityWelcomeAdmin.react","WAWebMessageCommunityWelcomeMember.react","WAWebUserPrefsMeUser","WAWebWidFormat"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:formatGroupNotification:unknown message subtype: ",""]);i=function(){return a};return a}function a(a,b){var e="",f=a.get("type"),g=a.get("subtype"),j=a.displayName(),k=a.get("author"),l=a.get("body"),m,n;b=!!b;if(f!=="gp2")return e;f=a.recipients||[];var o=d("WAWebFormatParticipantNames").getFormattedNames(f,!0),p=f[0],q=p?d("WAWebContactCollection").ContactCollection.get(p):void 0;q=q?d("WAWebFrontendContactGetters").getFormattedName(q):p?d("WAWebWidFormat").widToFormattedUser(p):"";switch(g){case"add":e=d("WAWebFormatAddNotification").formatAddNotification({author:k,authorClickable:j,subject:p,subjectClickable:q,participantsClickable:o});break;case"remove":e=d("WAWebFormatRemoveNotification").formatRemoveNotification({author:k,authorClickable:j,subject:p,subjectClickable:q,participantsClickable:o});break;case"leave":e=d("WAWebFormatLeaveNotification").formatLeaveNotification({body:l,subject:p,participantsClickable:o});break;case"picture":e=d("WAWebFormatPictureNotification").formatPictureNotification({author:k,authorClickable:j,body:l});break;case"subject":e=d("WAWebFormatSubjectNotification").formatSubjectNotification(d("WAWebFrontendMsgGetters").getChat(a),k,j,l);break;case"modify":m=d("WAWebWidFormat").widToFormattedUser(k);n=d("WAWebWidFormat").widToFormattedUser(p);e=m===j?h._("__JHASH__ed6NlgAnz8g__JHASH__",[h._param("name",j),h._param("new_number",n)]):h._("__JHASH__iFi7c7YeI-4__JHASH__",[h._param("name",j)]);break;case"create":e=d("WAWebFormatCreateNotification").formatCreateNotification({author:k,authorClickable:j,groupSubject:l,groupSubjectAsString:!0});break;case"delete":e=d("WAWebFormatDeleteNotification").formatDeleteNotification({chat:d("WAWebFrontendMsgGetters").getChat(a)});break;case"promote":case"demote":case"linked_group_promote":case"linked_group_demote":e=d("WAWebFormatPromoteDemoteNotification").formatPromoteDemoteNotification({subtype:g,subject:p,subjectClickable:q,participantsClickable:o,participantsCount:f.length});break;case"invite":e=d("WAWebUserPrefsMeUser").isMeAccount(p)?h._("__JHASH__vzqFfqy3krS__JHASH__"):h._("__JHASH__JdnUywS1T79__JHASH__",[h._param("name",q)]);break;case"revoke_invite":e=d("WAWebUserPrefsMeUser").isMeAccount(k)?h._("__JHASH__LVdgDZRSuUW__JHASH__"):h._("__JHASH__pUHmVoO3zQe__JHASH__",[h._param("name",j)]);break;case"description":e=d("WAWebFormatDescriptionNotification").formatDescriptionNotification({author:k,authorClickable:j,shouldFormatAsLastMsg:b});break;case"parent_group_description":e=d("WAWebFormatDescriptionNotification").formatDescriptionNotification({author:k,authorClickable:j,isParentGroup:!0,shouldFormatAsLastMsg:b});break;case"announce":e=d("WAWebFormatAnnounceNotification").formatAnnounceNotification({author:k,authorClickable:j,body:l});break;case"restrict":e=d("WAWebFormatRestrictNotification").formatRestrictNotification({author:k,authorClickable:j,templateParams:a.templateParams});break;case"no_frequently_forwarded":l==="on"?e=d("WAWebUserPrefsMeUser").isMeAccount(k)?h._("__JHASH__4LorbqMnXy6__JHASH__"):h._("__JHASH__q-CtyF7YZOI__JHASH__",[h._param("name",j)]):e=d("WAWebUserPrefsMeUser").isMeAccount(k)?h._("__JHASH__62V2Fy85boC__JHASH__"):h._("__JHASH__3A1sj_DPtTZ__JHASH__",[h._param("name",j)]);break;case"announce_msg_bounce":e=h._("__JHASH__9aNXpW86F1v__JHASH__");break;case"v4_add_invite_sent":e=h._("__JHASH__WF5aGcRuMMv__JHASH__",[h._param("participants",o)]).toString();break;case"v4_add_invite_join":e=h._("__JHASH__5Q8Obf7-l5d__JHASH__",[h._param("participants",o)]).toString();break;case"ephemeral":return d("WAWebFormatEphemeralSetting").formatEphemeralSetting(a);case"growth_locked":e=h._("__JHASH__QieMr8hjFMa__JHASH__");break;case"growth_unlocked":e=h._("__JHASH__TAz0HUNnWBs__JHASH__");break;case"linked_group_join":case"parent_group_link":case"parent_group_link_membership_approval":case"sibling_group_link":case"sub_group_link":case"parent_group_unlink":case"sibling_group_unlink":case"sub_group_unlink":case"integrity_parent_group_unlink":case"delete_parent_group":case"delete_parent_group_unlink":case"auto_add":case"default_sub_group_admin_add":case"invite_auto_add":e=d("WAWebFormatLinkNotification").formatLinkNotifAsFbt(g,k,p,a.templateParams);break;case"community_participant_add_rich":case"community_invite_rich":case"community_invite_auto_add_rich":case"subgroup_admin_triggered_auto_add":case"subgroup_admin_triggered_invite_auto_add":e=d("WAWebMessageCommunityWelcomeMember.react").communityWelcomeMemberTitle();break;case"sub_group_participant_add_rich":case"sub_group_invite_rich":e=d("WAWebMessageCommunitySubgroupWelcome.react").communitySubgroupWelcomeTitle({templateParams:a.templateParams,clickable:!1,author:k});break;case"community_link_parent_group_rich":e=d("WAWebMessageCommunityLinkGroup.react").communityLinkGroupTitle({templateParams:a.templateParams,clickable:!1,author:k});break;case"community_create":e=d("WAWebMessageCommunityWelcomeAdmin.react").communityWelcomeAdminTitle({templateParams:a.templateParams,author:k,chat:d("WAWebFrontendMsgGetters").getChat(a)});break;case"membership_approval_mode":case"membership_approval_request":case"created_membership_requests":e=d("WAWebFormatMembershipApprovalNotification").formatMembershipApprovalNotification(g,k,a.templateParams);break;case"ephemeral_keep_in_chat":e=h._("__JHASH__KY0z9P2_7D0__JHASH__");break;case"default_sub_group_promote":case"default_sub_group_demote":e=h._("__JHASH__isyXKPGe8B1__JHASH__");break;case"allow_admin_reports":e=d("WAWebFormatReportToAdminNotification").formatReportToAdminNotification(k,a.templateParams);break;case"allow_non_admin_sub_group_creation":e=c("WAWebFormatAllowNonAdminSubGroupCreationNotification")(d("WAWebFrontendMsgGetters").getChat(a),a.templateParams);break;case"empty_subgroup_create":m=a.templateParams[2];e=d("WAWebMessageCommunityEmptySubgroupWelcomeTitle.react").communityEmptySubgroupWelcomeTitle(m);break;case"created_subgroup_suggestion":e=c("WAWebFormatCreatedSubgroupSuggestionNotification")(k,a.templateParams,!1);break;case"general_chat_add":n=a.templateParams[1];e=d("WAWebMessageCommunityGeneralChatWelcomeTitle.react").communityGeneralChatWelcomeTitle(n);break;case"general_group_auto_add_disabled":e=d("WAWebMessageCommunityGeneralChatAutoAddDisabledNotification.react").communityGeneralChatAutoAddDisabledNotification(d("WAWebFrontendMsgGetters").getChat(a).formattedTitle);break;default:d("WALogger").LOG(i(),g);break}c("WAWebL10N").isRTL()&&(e=c("WAWebL10N").forceRTL(String(e)));return e}g["default"]=a}),226);
__d("WAWebFormatLeaveNotification",["fbt","WAWebGroupType","WAWebSystemMessagesUtils"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.body,c=a.subject;a=a.participantsClickable;if(c)return d("WAWebSystemMessagesUtils").isMe(c)?h._("__JHASH__grB1e4ctGFi__JHASH__"):h._("__JHASH__2hrfpiICVjM__JHASH__",[h._param("user_name",a)]);else if(b===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT)return h._("__JHASH__mxx81v4QY5A__JHASH__");return h._("__JHASH__F3Vb5lmYgoS__JHASH__")}g.formatLeaveNotification=a}),226);
__d("WAWebStringsWithMultiplePluralParts",["fbt"],(function(a,b,c,d,e,f,g,h){function a(a,b){return h._("__JHASH__Gwl6KHbVARL__JHASH__",[h._plural(a,"count"),h._plural(a),h._param("contact",b)]).toString()}function b(a,b){return h._("__JHASH__-W144V9az_q__JHASH__",[h._plural(a,"count"),h._plural(a),h._param("contact",b)]).toString()}function c(a,b){return i(a,b).toString()}function i(a,b){return h._("__JHASH__6Bi1UcvRCG3__JHASH__",[h._plural(b),h._plural(b),h._param("group-names",a.formattedNames)])}function d(a,b){return j(a,b).toString()}function j(a,b){return h._("__JHASH__A2KZsl1T0VH__JHASH__",[h._plural(b),h._plural(b),h._param("group-names",a.formattedNames)])}g.getCannotForwardCapabilityContactString=a;g.getCannotForwardFileMissingAndCapabilityContactString=b;g.getCommunityGroupsAddedString=c;g.getCommunityGroupsAddedStringComponent=i;g.getCommunityGroupsRemovedString=d;g.getCommunityGroupsRemovedStringComponent=j}),226);
__d("WAWebFormatLinkNotification",["fbt","WALogger","WAWebABProps","WAWebFormatParticipantNames","WAWebGroupMetadataCollection","WAWebPairList","WAWebStringsWithMultiplePluralParts","WAWebUserPrefsMeUser","WAWebWid"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:formatLinkNotification:unknown message subtype: ",""]);i=function(){return a};return a}var j=function(a){return a instanceof c("WAWebWid")&&d("WAWebUserPrefsMeUser").isMeAccount(a)};function k(a){return!a}function a(a,b,c,d){return l(a,b,c,d,!1)}function l(a,b,c,e,f){var g=b?d("WAWebFormatParticipantNames").getFormattedName(b,!f,a):null,h=c?d("WAWebFormatParticipantNames").getFormattedName(c,!f):null;switch(a){case"parent_group_link":return v(e,f,b,g);case"parent_group_link_membership_approval":return w(e,f);case"sibling_group_link":return x(e,f,b,g,a);case"sub_group_link":break;case"parent_group_unlink":return u(e,f,b,g);case"integrity_parent_group_unlink":return t(e,f);case"delete_parent_group_unlink":case"delete_parent_group":return s(e,g,b,f);case"sibling_group_unlink":return y(e,f,b,g);case"sub_group_unlink":break;case"community_create":return z(e,f,b,g);case"linked_group_join":return A(c,h);case"auto_add":case"default_sub_group_admin_add":return B(e,f,g);case"invite_auto_add":return C(e,f,c,h);default:d("WALogger").LOG(i(),a);break}}function m(a){return h._("__JHASH__y2wct8AIYqH__JHASH__",[h._param("community_name",a)])}function n(){return h._("__JHASH__r6ovEWT08ss__JHASH__")}function o(a,b){return h._("__JHASH__CS1vlNyzZ57__JHASH__",[h._param("author",a),h._param("community_name",b)])}function p(a){return h._("__JHASH___KOPBnYq_Ha__JHASH__",[h._param("author",a)])}function q(a){return h._("__JHASH__bkHqixFdCL0__JHASH__",[h._param("community_name",a)])}function r(){return h._("__JHASH__zqIOyeFlODd__JHASH__")}function s(a,b,c,e){var f;a[0]!=null&&typeof a[0]==="string"&&!k(a[0])&&(f=d("WAWebFormatParticipantNames").getClickableDeactivatedCommunityName(a[0],e));if(f!=null&&b!=null)return j(c)?h._("__JHASH__G5QIOWA1Ge___JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(f,!e))]):h._("__JHASH__JYAI3t_pCxi__JHASH__",[h._param("author",b),h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(f,!e))]);if(j(c))return h._("__JHASH__ZlDi50TPwUM__JHASH__");return b!=null?h._("__JHASH__ZP1g9HqlhMo__JHASH__",[h._param("author",b)]):h._("__JHASH__Q0FgCrZXH4t__JHASH__")}function t(a,b){a=d("WAWebFormatParticipantNames").getClickableIntegrityDeactivateCommunityName(a[0],a[1],b);return a!=null?h._("__JHASH__twnGVK9ZAks__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]):h._("__JHASH__MEeFGKwGaFB__JHASH__")}function u(a,b,c,e){a=a.slice(0);a=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:a[0],asString:!b,alternativeStringName:a[1]});if(a!=null&&j(c))return h._("__JHASH__9y1K2eO6onZ__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]);else if(a==null&&j(c))return h._("__JHASH__umn_A-_8ehC__JHASH__");else if(a!=null&&c!=null)return h._("__JHASH__-vDvSLKr9U-__JHASH__",[h._param("author",e),h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]);else if(a!=null&&c==null)return h._("__JHASH__FgP6KUDLiy8__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]);else if(a==null&&c!=null)return h._("__JHASH__9XCBYFm0hPq__JHASH__",[h._param("author",e)]);return h._("__JHASH__w7yANqoynm3__JHASH__")}function v(a,b,c,e){a=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:a[0],asString:!b,alternativeStringName:a[1]});if(!k(a)&&j(c))return h._("__JHASH__8NL6T3BeC0E__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]);else if(k(a)&&j(c))return h._("__JHASH__KSLWyjVkhr9__JHASH__");else if(!k(a)&&c!=null)return h._("__JHASH__PjK8xUgEjLB__JHASH__",[h._param("author",e),h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]);else if(!k(a)&&c==null)return h._("__JHASH__vPNku38qhpZ__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]);else if(k(a)&&c!=null)return h._("__JHASH__T0_6AtiYTeo__JHASH__",[h._param("author",e)]);return h._("__JHASH__8BjAuq8-7XC__JHASH__")}function w(a,b){var e=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:a[0],asString:!b,alternativeStringName:a[1]}),f=a[0];f=Boolean(f?(f=c("WAWebGroupMetadataCollection").get(f))==null?void 0:f.isParentGroupClosed:void 0);var g=a[2]==="admin";a=a[3]==="true";if(d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&a)return g?h._("__JHASH__zpqOQ9KpneE__JHASH__"):h._("__JHASH__yzGQyclKE_6__JHASH__");else if(!d("WAWebABProps").getABPropConfigValue("group_join_request_m2_setting")&&f)return!k(e)?h._("__JHASH__GTH_mmAXmdT__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(e,!b))]):h._("__JHASH__vk6o9x5Z9Qe__JHASH__");else if(d("WAWebABProps").getABPropConfigValue("group_join_request_m2_setting")){if(a)return g?h._("__JHASH__zpqOQ9KpneE__JHASH__"):h._("__JHASH__yzGQyclKE_6__JHASH__");if(g)return!k(e)?h._("__JHASH__QrFxk8_rZzL__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(e,!b))]):h._("__JHASH__7fnW1pRVAqK__JHASH__")}return!k(e)?h._("__JHASH__DlJb38ZEZPI__JHASH__",[h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(e,!b))]):h._("__JHASH__BgRRz2Jacuj__JHASH__")}function x(a,b,c,e,f){a=a.slice(0);f=d("WAWebFormatParticipantNames").getFormattedGroupListForCommunity(a,!b,f);a=d("WAWebPairList").unFlattenPairList(a).length;if(j(c))return f==null?h._("__JHASH__fUqZ3hQSGc-__JHASH__",[h._plural(a,"count")]):h._("__JHASH__LV1JnsY4N80__JHASH__",[h._plural(a),h._param("groups",f)]);else if(c!=null)return f==null?h._("__JHASH__BiNjS84pu6D__JHASH__",[h._plural(a,"count"),h._param("author",e)]):h._("__JHASH__MiHjHn8j97J__JHASH__",[h._plural(a),h._param("author",e),h._param("groups",f)]);if(f==null)return h._("__JHASH__BJcNwPWNm-y__JHASH__",[h._plural(a,"count")]);return!b?d("WAWebStringsWithMultiplePluralParts").getCommunityGroupsAddedString({formattedNames:f},a):d("WAWebStringsWithMultiplePluralParts").getCommunityGroupsAddedStringComponent({formattedNames:f,count:a},a)}function y(a,b,c,e){a=a.slice(0);var f=d("WAWebFormatParticipantNames").getFormattedGroupListForCommunity(a,!b);a=d("WAWebPairList").unFlattenPairList(a).length;if(j(c))return f==null?h._("__JHASH__PHhOKDBIOGQ__JHASH__",[h._plural(a,"count")]):h._("__JHASH__pdiSJQ1X44B__JHASH__",[h._plural(a),h._param("groups",f)]);else if(c!=null)return f==null?h._("__JHASH__ZfOUwhpSUuX__JHASH__",[h._plural(a,"count"),h._param("author",e)]):h._("__JHASH__Y2T7D278TOi__JHASH__",[h._plural(a),h._param("author",e),h._param("groups",f)]);if(f==null)return h._("__JHASH__KOTUKHRaQFM__JHASH__",[h._plural(a,"count")]);return!b?d("WAWebStringsWithMultiplePluralParts").getCommunityGroupsRemovedString({formattedNames:f},a):d("WAWebStringsWithMultiplePluralParts").getCommunityGroupsRemovedStringComponent({formattedNames:f,count:a},a)}function z(a,b,c,e){b=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:a[0],asString:!b,alternativeStringName:a[1]});if(k(b)){if(e!=null)return p(e);else if(j(c))return n();return r()}if(j(c))return m(b);else if(e!=null)return o(e,b);return q(b)}function A(a,b){return j(a)?h._("__JHASH__Vf2eLSc2jcI__JHASH__"):h._("__JHASH__6_Fco6jmExg__JHASH__",[h._param("author",b)])}function B(a,b,c){if(a&&a.length>=2){a=d("WAWebFormatParticipantNames").getFormattedCommunityNameWithAlternative({jid:a[0],asString:!b,alternativeStringName:a[1]});return!k(a)?h._("__JHASH__Ooxgg8ezpGO__JHASH__",[h._param("author",c),h._param("community",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(a,!b))]):h._("__JHASH__CzGjFGxYkGD__JHASH__",[h._param("author",c)])}return h._("__JHASH__IywyOyH9GT1__JHASH__",[h._param("author",c)])}function C(a,b,c,e){var f,g=!1;a&&a.length>=3&&(f=d("WAWebFormatParticipantNames").getFormattedNameIfExists(a[0]),f==null&&(f=a[1]),a[2]==="true"&&(g=!0));if(!g)return j(c)?!k(f)?h._("__JHASH__QYZ5ZvCMUx___JHASH__",[h._param("group-name",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(f,!b))]):h._("__JHASH__a_lNnZBCEN1__JHASH__"):h._("__JHASH__OS2w4BQ1Y28__JHASH__",[h._param("user_name",e)]);return j(c)?!k(f)?h._("__JHASH__QsHwjrB6wXh__JHASH__",[h._param("group-name",d("WAWebFormatParticipantNames").getCommunityNameInQuotationMarks(f,!b))]):h._("__JHASH__DBt5BXBZ3VQ__JHASH__"):h._("__JHASH__OS2w4BQ1Y28__JHASH__",[h._param("user_name",e)])}g.formatLinkNotifAsFbt=a;g.formatLinkNotification=l}),226);
__d("WAWebFormatMembershipApprovalNotification",["fbt","WALogger","WAWebFormatParticipantNames","WAWebGroupType","WAWebSystemMessageGatingUtils","WAWebUserPrefsMeUser","WAWebWamEnumSystemMessageTypeType","WAWebWidFactory"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:formatMembershipApprovalNotification:unknown message subtype: ",""]);i=function(){return a};return a}function j(a,b,c){var e=d("WAWebSystemMessageGatingUtils").systemMessageActionTextStylingEnabled(),f;b&&(f=d("WAWebFormatParticipantNames").getFormattedName(b,!0));switch(a){case"membership_approval_mode":var g=c[0]&&d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.cast(c[0].toString())===d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On,j=c[1]&&d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.cast(c[1].toString())===d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin;if(g){if(f==null)return{text:j?h._("__JHASH__zpqOQ9KpneE__JHASH__"):h._("__JHASH__yzGQyclKE_6__JHASH__")};return d("WAWebUserPrefsMeUser").isMeAccount(b)?{text:h._("__JHASH__hcI5w-or5-8__JHASH__")}:{text:j?h._("__JHASH__gD5ZtpAMJrJ__JHASH__",[h._param("author",f)]):h._("__JHASH__m1n6qCqkBOl__JHASH__",[h._param("author",f)])}}return f==null?{text:h._("__JHASH__YDweG3SB6qj__JHASH__")}:d("WAWebUserPrefsMeUser").isMeAccount(b)?{text:h._("__JHASH__DbMfLR1IFzb__JHASH__")}:{text:j?h._("__JHASH__NO9tS5y2m2Q__JHASH__",[h._param("author",f)]):h._("__JHASH__lfdo0Cziyge__JHASH__",[h._param("author",f)])};case"membership_approval_request":return{text:e?h._("__JHASH__pv3K7QLlct3__JHASH__",[h._param("author",f)]):h._("__JHASH___buBvy7hfaa__JHASH__",[h._param("author",f)]),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_JOIN_REQUEST};case"created_membership_requests":g=c.map(function(a){return d("WAWebFormatParticipantNames").getFormattedName(d("WAWebWidFactory").createWid(a.toString()),!0)});b=g[0];j=g.slice(1);return{text:e?h._("__JHASH__r7iC40CO09X__JHASH__",[h._param("author",b),h._param("authors",j.join(", "))]):h._("__JHASH__1s5UmRkLddE__JHASH__",[h._param("author",b),h._param("authors",j.join(", "))]),enumType:d("WAWebWamEnumSystemMessageTypeType").SYSTEM_MESSAGE_TYPE_TYPE.GROUP_JOIN_REQUEST};default:d("WALogger").LOG(i(),a);break}return{text:""}}function a(a,b,c){return j(a,b,c).text}function b(a,b,c){return j(a,b,c).enumType}g.generateMembershipApprovalNotification=j;g.formatMembershipApprovalNotification=a;g.getMembershipApprovalNotificationEnum=b}),226);
__d("WAWebClickableLink.react",["WAWebClassnames","asyncToGeneratorRuntime","react","stylex","useWAWebStaticButtonA11y"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react");function a(a){var e,f=a.children,g=a.href,h=a.onClick,k=a.title,l=a.className,m=a.tabIndex,n=a.xstyle,o=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(g!=null&&(a.metaKey||a.altKey))return;a.preventDefault();yield h(a)});return function(b){return a.apply(this,arguments)}}(),p=c("useWAWebStaticButtonA11y")(h),q=p[0];p=p[1];return j.jsx("a",babelHelpers["extends"]({},p,{ref:q,"data-testid":void 0,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(l,"x1ypdohk",(i||(i=c("stylex")))(n)),href:(p=g)!=null?p:void 0,onClick:o,role:"button",rel:"noreferrer noopener",target:"_blank",title:k,tabIndex:(q=m)!=null?q:void 0,"data-tab":a["data-tab"],children:f}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebL10NEnumeration.react",["fbt","lodash"],(function(a,b,c,d,e,f,g,h){function a(a,b){b===void 0&&(b=!1);if(a.length===0)return"";var c=a[0];if(a.length===1){var d=h._("__JHASH__7Fh9pbyLbLe__JHASH__",[h._param("A",c)]);return b?d.toString():d}d=a[a.length-1];if(a.length===2)return i(c,d,b);c=a.slice(0,a.length-2);a=a[a.length-2];return j(c,a,d,b)}function i(a,b,c){c===void 0&&(c=!1);a=h._("__JHASH__KpDuOoe0Ahg__JHASH__",[h._param("A",a),h._param("B",b)]);return c?a.toString():a}function j(a,b,d,e){e===void 0&&(e=!1);a=c("lodash").reverse(a).reduce(function(a,b){b=h._("__JHASH__0pRuYLPKooH__JHASH__",[h._param("A",b),h._param("B",a)]);return e?b.toString():b},e?"":null);a=h._("__JHASH__db0pg8u3WD9__JHASH__",[h._param("A",a),h._param("B",b),h._param("C",d)]);return e?a.toString():a}g["default"]=a}),226);
__d("WAWebCxtUrl",["WAWebL10N"],(function(a,b,c,d,e,f,g){var h="https://faq.whatsapp.com";function i(a){return h+"/cxt/?entrypointid="+a+"&platform=web&lang="+c("WAWebL10N").getNormalizedLocale()}function a(){return i("invite-via-link-unavailable")}function b(){return i("community-no-longer-available")}g.FAQ_BASE_URL=h;g.getGroupInviteGrowthLockedFaqUrl=a;g.getCommunityNotAvailableFaqUrl=b}),98);
__d("WAWebSuspendedCommunityUtils",["fbt","WAWebConfirmPopup.react","WAWebCxtUrl","WAWebExternalLink.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},onCancel:function(){d("WAWebModalManager").ModalManager.close(),d("WAWebExternalLink.react").openExternalLink(d("WAWebCxtUrl").getCommunityNotAvailableFaqUrl())},okText:h._("__JHASH__P1c0P2l7ww6__JHASH__"),cancelText:h._("__JHASH__gQ-OwVRxNrz__JHASH__"),title:h._("__JHASH__T7eSzqWZvY4__JHASH__")}),{transition:"modal-flow"})}g.openTerminatedCommunityModal=a}),226);
__d("WAWebFormatParticipantNames",["fbt","WAWebChatCollection","WAWebClickableLink.react","WAWebCmd","WAWebCommunityGroupJourneyEventImpl","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebContactCollection","WAWebEmojiText.react","WAWebFbtIntlList","WAWebFindChatAction","WAWebFrontendContactGetters","WAWebGroupMetadataCollection","WAWebL10NEnumeration.react","WAWebModalManager","WAWebName.react","WAWebPairList","WAWebSuspendedCommunityUtils","WAWebToast.react","WAWebToastManager","WAWebUnjoinedSubgroupMetadataCollection","WAWebWamEnumChatFilterActionTypes","WAWebWamEnumSurfaceType","fbs","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={linkColor:{color:"x14m1o6m",$$css:!0}};function l(a,b){return function(c){c&&(c.preventDefault(),c.stopPropagation()),void d("WAWebFindChatAction").findChat(a,"formatParticipantNames").then(function(c){b==="sibling_group_link"&&new(d("WAWebCommunityGroupJourneyEventImpl").CommunityGroupJourneyEvent)({action:d("WAWebWamEnumChatFilterActionTypes").CHAT_FILTER_ACTION_TYPES.GROUP_SYSTEM_MESSAGE_CLICK,surface:d("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT,chat:d("WAWebChatCollection").ChatCollection.get(a)}).commit(),void d("WAWebCmd").Cmd.openChatFromUnread(c).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(c)})})}}function m(a){return function(b){b&&(b.preventDefault(),b.stopPropagation()),d("WAWebCmd").Cmd.openCommunityHome(a,void 0)}}function n(a){var c=b("WAWebName.react"),e=c.Name;return function(b){b&&(b.preventDefault(),b.stopPropagation()),d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH__ZO_YYbUIVKT__JHASH__",[h._param("community",j.jsx(e,{contact:a}))])}))}}function o(){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__VrO7NOshW0h__JHASH__")}))}function p(a,b){return b?j.jsx(c("WAWebClickableLink.react"),{onClick:o,xstyle:k.linkColor,children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:a})}):a}function a(a,b,c){var e=d("WAWebContactCollection").ContactCollection.get(a.toString());if(e!=null)return u(a,!c,m(a));if(b==null||b==="")return null;return c?j.jsx(d("WAWebEmojiText.react").EmojiText,{text:b,onClick:d("WAWebSuspendedCommunityUtils").openTerminatedCommunityModal}):b}function q(a,b){b===void 0&&(b=!1);var e=d("WAWebContactCollection").ContactCollection.get(a.toString());if(!e)return null;var f=c("WAWebGroupMetadataCollection").get(a),g=m(a);(f==null?void 0:f.joinedSubgroups.length)||(g=n(e));return u(a,b,g)}function e(a,b){return b?c("fbs")._("__JHASH__FbCabaA85O___JHASH__",[c("fbs")._param("community-name",a)]):j.jsx("span",{className:"xuxw1ft",children:h._("__JHASH__FbCabaA85O___JHASH__",[h._param("community-name",a)])})}function f(a){var b=a.jid,c=a.asString;c=c===void 0?!1:c;a=a.alternativeStringName;b=q(b,c);if(b==null&&a)return p(a,!c);else if(typeof b==="string"&&!c)return j.jsx(d("WAWebEmojiText.react").EmojiText,{text:b});return b}function r(a,b,e){b===void 0&&(b=!1);if(d("WAWebContactCollection").ContactCollection.get(a.toString())!=null)return u(a,b,l(a,e));b=c("WAWebUnjoinedSubgroupMetadataCollection").get(a.toString());return(b==null?void 0:b.subject)?b.subject:null}function s(a,b,e){b===void 0&&(b=!1);a=d("WAWebPairList").unFlattenPairList(a).map(function(a){var c=a[0];a=a[1];c=r(c,b,e);return c!==""&&c!=null?c:a});return c("WAWebL10NEnumeration.react")(a,b)}function t(a,b,c){b===void 0&&(b=!1);return u(a,b,l(a,c))}function u(a,c,e){c===void 0&&(c=!1);a=d("WAWebContactCollection").ContactCollection.gadd(a,{silent:!0});e=c?void 0:e;var f=b("WAWebName.react");f=f.Name;return c||a.id.isLid()?d("WAWebFrontendContactGetters").getFormattedUser(a):j.jsx(f,{contact:a,onClick:e})}function v(a,b,d){b===void 0&&(b=!1);d===void 0&&(d=!1);if(!Array.isArray(a))return t(a,b);a=a.map(function(a){return t(a,b)});return c("WAWebFbtIntlList")(a,d?c("WAWebFbtIntlList").CONJUNCTIONS.NONE:c("WAWebFbtIntlList").CONJUNCTIONS.AND,c("WAWebFbtIntlList").DELIMITERS.COMMA)}g.openCommunity=m;g.getClickableDeactivatedCommunityName=p;g.getClickableIntegrityDeactivateCommunityName=a;g.getFormattedCommunityName=q;g.getCommunityNameInQuotationMarks=e;g.getFormattedCommunityNameWithAlternative=f;g.getFormattedNameIfExists=r;g.getFormattedGroupListForCommunity=s;g.getFormattedName=t;g.getFormattedNames=v}),226);
__d("WAWebFormatPictureNotification",["fbt","WAWebSystemMessagesUtils"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.author,c=a.authorClickable;a=a.body;if(a==="remove")return d("WAWebSystemMessagesUtils").isMe(b)?h._("__JHASH__pHH_KX01Q8b__JHASH__"):c!=null?h._("__JHASH__BMHCgKPzE5O__JHASH__",[h._param("user_name",c)]):h._("__JHASH__dlL2cZ79myQ__JHASH__");else if(d("WAWebSystemMessagesUtils").isMe(b))return h._("__JHASH__g74Y-zK4odZ__JHASH__");return c!=null?h._("__JHASH__S5COZkvcH-L__JHASH__",[h._param("user_name",c)]):h._("__JHASH__lHBHJ6A64hb__JHASH__")}g.formatPictureNotification=a}),226);
__d("WAWebFormatPromoteDemoteNotification",["fbt","WALogger","WAWebSystemMessagesUtils"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:formatPromoteDemoteNotification:unknown message subtype: ",""]);i=function(){return a};return a}function a(a){var b=a.subtype,c=a.participantsCount,e=a.subject,f=a.subjectClickable;a=a.participantsClickable;switch(b){case"promote":return c===1&&d("WAWebSystemMessagesUtils").isMe(e)?h._("__JHASH__ufuUvFzlASW__JHASH__"):h._("__JHASH__IHSBDk8mc8X__JHASH__",[h._plural(c),h._param("participant_names",a)]);case"demote":return c===1&&d("WAWebSystemMessagesUtils").isMe(e)?h._("__JHASH__ydHyJHWxDMO__JHASH__"):h._("__JHASH__jWMxqDYVdSY__JHASH__",[h._plural(c),h._param("participant_names",a)]);case"linked_group_promote":return d("WAWebSystemMessagesUtils").isMe(e)?h._("__JHASH___pqxn0XoqB0__JHASH__"):h._("__JHASH__LN0LpVRc6SF__JHASH__",[h._param("name",f)]);case"linked_group_demote":return d("WAWebSystemMessagesUtils").isMe(e)?h._("__JHASH____RIPotpXAN__JHASH__"):h._("__JHASH__gopdcNxy7Qj__JHASH__",[h._param("name",f)]);default:d("WALogger").LOG(i(),b);return""}}g.formatPromoteDemoteNotification=a}),226);
__d("WAWebFormatRemoveNotification",["fbt","WAWebSystemMessagesUtils","WAWebWid"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.author,e=a.authorClickable,f=a.subject,g=a.subjectClickable;a=a.participantsClickable;if(b){if(c("WAWebWid").equals(b,f))return h._("__JHASH__3KpRo4zJqIW__JHASH__");else if(d("WAWebSystemMessagesUtils").isMe(b))return h._("__JHASH__blZXaSFqWo3__JHASH__",[h._param("names",a)]);else if(d("WAWebSystemMessagesUtils").isMe(f))return e!=null?h._("__JHASH__oWGFuUCCPgV__JHASH__",[h._param("user_name",e)]):h._("__JHASH__n4f62WaHOx2__JHASH__");return e!=null?h._("__JHASH__OupRPf1iqVw__JHASH__",[h._param("user_name",e),h._param("names",a)]):h._("__JHASH__XNde0BU4ws9__JHASH__",[h._param("names",a)])}else if(d("WAWebSystemMessagesUtils").isMe(f))return h._("__JHASH__3KpRo4zJqIW__JHASH__");return h._("__JHASH__vzVVU59_ZOY__JHASH__",[h._param("user_name",g)])}g.formatRemoveNotification=a}),226);
__d("WAWebFormatReportToAdminNotification",["fbt","WAWebClickableLink.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFormatParticipantNames","WAWebGroupType","WAWebUserPrefsMeUser","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={linkColor:{color:"x14m1o6m",$$css:!0}};function a(a,b){var e=b[0]&&d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.cast(b[0].toString())===d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On;b=b[1]&&d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.cast(b[1].toString())===d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin;var f=d("WAWebUserPrefsMeUser").isMeAccount(a),g=function(){return d("WAWebExternalLink.react").openExternalLink(d("WAWebFaqUrl").getReportToAdminFaqUrl())};if(f){f=h._("__JHASH__NQaMHu2pCdI__JHASH__");var i=h._("__JHASH__rl1I-LFYWTu__JHASH__");return e?f:i}if(a){f=d("WAWebFormatParticipantNames").getFormattedName(a,!0);i=h._("__JHASH__5F3cRv87VHH__JHASH__",[h._param("author",f)]);a=h._("__JHASH__F1m1aHbPVfJ__JHASH__",[h._param("author",f)]);var l=h._("__JHASH__AkzV8-xGPxM__JHASH__",[h._implicitParam("=m0",j.jsx(c("WAWebClickableLink.react"),{onClick:g,xstyle:k.linkColor,children:h._("__JHASH__C8BH0zdq-DK__JHASH__",[h._param("author",f)])}))]);f=h._("__JHASH__SrorQCX5-J0__JHASH__",[h._implicitParam("=m0",j.jsx(c("WAWebClickableLink.react"),{onClick:g,xstyle:k.linkColor,children:h._("__JHASH__cT6ulty3hEV__JHASH__",[h._param("author",f)])}))]);return b?e?i:a:e?l:f}i=h._("__JHASH__yDZh5pDxVLz__JHASH__");a=h._("__JHASH__H8mfv6I4Yhr__JHASH__");l=h._("__JHASH__919QEYpbpVY__JHASH__",[h._implicitParam("=m0",j.jsx(c("WAWebClickableLink.react"),{onClick:g,xstyle:k.linkColor,children:h._("__JHASH__9ZZ4Ete5wyY__JHASH__")}))]);f=h._("__JHASH__Mi3iZO0Nl2o__JHASH__",[h._implicitParam("=m0",j.jsx(c("WAWebClickableLink.react"),{onClick:g,xstyle:k.linkColor,children:h._("__JHASH__5IHKY-49dat__JHASH__")}))]);return b?e?i:a:e?l:f}g.formatReportToAdminNotification=a}),226);
__d("WAWebFormatRestrictNotification",["fbt","WAWebSystemMessagesUtils"],(function(a,b,c,d,e,f,g,h){var i=256;function a(a){var b=a.author,c=a.authorClickable;a=a.templateParams;var e=a[0];if(e==="on"){if(a[1]!=null){e=parseInt(a[1],10)||i;return h._("__JHASH__UHaEaRwmPQd__JHASH__",[h._plural(e,"threshold")])}return d("WAWebSystemMessagesUtils").isMe(b)?h._("__JHASH__H7jekDdvsQx__JHASH__"):c!=null?h._("__JHASH__zWrpaJkIcWL__JHASH__",[h._param("user_name",c)]):h._("__JHASH__w9IUy_3diq9__JHASH__")}else if(d("WAWebSystemMessagesUtils").isMe(b))return h._("__JHASH__gYH85Uu-mKs__JHASH__");return c!=null?h._("__JHASH___u486A01hSU__JHASH__",[h._param("user_name",c)]):h._("__JHASH__rmr4xgg6dOz__JHASH__")}g.formatRestrictNotification=a}),226);
__d("WAWebSystemMessagesUtils",["WAWebEmojiText.react","WAWebUserPrefsMeUser","WAWebWid","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){return a instanceof c("WAWebWid")&&d("WAWebUserPrefsMeUser").isMeAccount(a)}function b(a){a=a.text;return i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:a})}b.displayName=b.name+" [from "+f.id+"]";g.isMe=a;g.FormattedText=b}),98);
__d("WAWebUnformatSerializer",["WAWebFormatSerializer"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebFormatSerializer"));a.onDelimiter=function(){return void 0};a.onMutator=function(a,b,c){if(a.unformatDecorations!=null){a=a.unformatDecorations;var d=a.pre;a=a.post;return h([typeof d==="function"?d(c):d].concat(b,[a]))}return h(b)};a.onRoot=function(a){return h(a)};a.onText=function(a){return a};function h(a){return a.filter(Boolean).join("")}g["default"]=a}),98);
__d("WAWebUnformatMsg",["WAWebFormat","WAWebFormatConfiguration","WAWebFrontendMsgGetters","WAWebMiscGatingUtils","WAWebUnformatSerializer"],(function(a,b,c,d,e,f,g){var h;function i(){h||(h=d("WAWebFormatConfiguration").Unformat({mentions:{}}));return h}function a(a,b){b=(b=b)!=null?b:"";var e=a.mentionMap(),f=a.groupMentionMap();if(!e&&!f)return j(b);if(d("WAWebMiscGatingUtils").isDropLastNameEnabled()){a=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata;if(a){a=d("WAWebFormatConfiguration").FormattedGroupNotification({mentions:e,groupMentions:f,groupMetadata:a});return c("WAWebFormat")(b,a,c("WAWebUnformatSerializer"))}}a=d("WAWebFormatConfiguration").FormattedNotification({mentions:e,groupMentions:f});return c("WAWebFormat")(b,a,c("WAWebUnformatSerializer"))}function j(a){return c("WAWebFormat")(a,i(),c("WAWebUnformatSerializer"))}g["default"]=a}),98);
__d("WAWebWidToFormattedNameOrNumber",["WAWebContactCollection","WAWebFrontendContactGetters","WAWebWidFormat"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebContactCollection").ContactCollection.get(a);return b?d("WAWebFrontendContactGetters").getFormattedName(b):d("WAWebWidFormat").widToFormattedUser(a)}g["default"]=a}),98);
__d("WAWebProductCatalogCatalogConstants",[],(function(a,b,c,d,e,f){a=96;b=104;c=40;d=95;f.PRODUCT_LIST_ITEM_HEIGHT=a;f.CART_PRODUCT_LIST_ITEM_HEIGHT=b;f.MAX_REPLY_PRODUCT_TITLE_LENGTH=c;f.MAX_REPLY_PRODUCT_DESC_LENGTH=d}),66);
__d("WAWebFrontendMsgGetters",["WABidi","WALogger","WANullthrows","WAWebAck","WAWebBizSystemMsgSubtypes","WAWebChatCollection","WAWebChatGroupUtils","WAWebCommonMsgUtils","WAWebEmoji","WAWebFormatNfmText","WAWebGetters","WAWebGettersCaches","WAWebL10N","WAWebMsgDataUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModelUtils","WAWebMsgType","WAWebNewsletterCollection","WAWebNewsletterMembershipUtil","WAWebProductCatalogCatalogConstants","WAWebProtobufsE2E.pb","WAWebPtvGatingUtils","WAWebTemplateButtonSubtype","WAWebUserPrefsMeUser","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getChat: unexpected null chat"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getChat: msgKey = ",", type = ",""]);i=function(){return a};return a}f=d("WAWebGetters").createGetterFactories({root:(e=d("WAWebMsgGetters")).getMsgUnsafe,createCache:d("WAWebGettersCaches").createFrontendMessagesCache});var j=f.field,k=f.computed;f=f.clearCacheFor;f=f;var l=k(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return d("WAWebMsgModelUtils").typeIsMms({type:b,subtype:c,headerType:e,interactiveHeader:a})},[e.getType,e.getSubtype,e.getHeaderType,e.getInteractiveHeader]),m=k(function(a){var b=a[0],c=a[1];a=a[2];return b!=null&&b<d("WAWebAck").ACK.SENT&&c&&a},[e.getAck,l,e.getIsSentByMe]),n=k(function(a){var b=a[0],c=a[1];a=a[2];b=d("WAWebMsgDataUtils").eventTypeFromMsgType(b);if(!a)return d("WAWebCommonMsgUtils").EventType.IGNORE;return c?b===d("WAWebCommonMsgUtils").EventType.IGNORE?d("WAWebCommonMsgUtils").EventType.IGNORE:d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:b},[e.getMsgUnsafe,e.getInvis,e.getIsNewMsg]),o=function(a){switch(a.type){case"interactive":return d("WAWebMsgGetters").getNativeFlowName(a)!=null?d("WAWebFormatNfmText").formatNFMText(a):d("WAWebMsgGetters").getCaption(a);case"native_flow":return d("WAWebFormatNfmText").formatNFMText(a)}return null},p=k(function(a){var b=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],p=a[11],q=a[12],r=a[13];a=a[14];if(m||n)return e===d("WAWebMsgType").MSG_TYPE.CHAT?g:h;switch(e){case"chat":case"interactive_response":return g;case"image":case"video":case"ptv":case"document":return h;case"location":return j?i:void 0;case"payment":return k==null?void 0:k.body;case"groups_v4_invite":return i;case"list":return p==null?void 0:p.description;case"product":return c("lodash").truncate(f,{length:d("WAWebProductCatalogCatalogConstants").MAX_REPLY_PRODUCT_TITLE_LENGTH});case"hsm":return g;case"template_button_reply":return g;case"interactive":return q!=null?o(b):h;case"native_flow":return o(b);case"poll_creation":return l;case"newsletter_admin_invite":return r==null?void 0:r.inviteMessage;case"event_creation":return a;case"audio":case"biz-cover-photo":case"broadcast_notification":case"buttons_response":case"call_log":case"ciphertext":case"debug_placeholder":case"debug":case"e2e_notification":case"gp2":case"keep_in_chat":case"list_response":case"multi_vcard":case"notification":case"notification_template":case"order":case"oversized":case"poll_update":case"protocol":case"ptt":case"reaction":case"reaction_enc":case"request_phone_number":case"revoked":case"sticker":case"status_v3":case"unknown":case"pin_message":case"pinned_message":case"vcard":case"newsletter_notification":case"comment":case"event_response":case"history_bundle":case"biz_content_placeholder":case"event_edit_encrypted":return void 0;default:e;return void 0}},[e.getMsgUnsafe,e.getType,e.getTitle,e.getBody,e.getCaption,e.getComment,e.getIsLive,e.getPaymentNoteMsg,e.getPollName,e.getIsFromTemplate,e.getIsDynamicReplyButtonsMsg,e.getList,e.getNativeFlowName,e.getNewsletterAdminInviteInfo,e.getEventName]),q=k(function(a){a=a[0];a=a==null?void 0:a.newsletterId;if(a==null)return!1;a=(a=b("WAWebNewsletterCollection").get(a))==null?void 0:a.newsletterMetadata;return d("WAWebNewsletterMembershipUtil").iAmAdmin(a)&&!d("WAWebNewsletterMembershipUtil").iAmOwner(a)},[e.getNewsletterAdminInviteInfo]),r=k(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];if(b===d("WAWebMsgType").MSG_TYPE.VCARD)return c?d("WABidi").dir(c):void 0;if(e==null)return;b=(a==null?void 0:a.length)?e.replace(/@\d+@g.us/,""):e;c=d("WABidi").dir(b);return c},[e.getType,e.getSubtype,p,e.getGroupMentions]),s=k(function(a){a=a[0];return a==="rtl"||a===void 0&&c("WAWebL10N").isRTL()},[r]),t=k(function(a){var b=a[0],c=a[1];a=a[2];return b===d("WAWebMsgType").MSG_TYPE.VCARD?c?d("WABidi").dir(c)==="rtl":!1:!!a&&d("WABidi").dir(a)==="rtl"},[e.getType,e.getSubtype,p]),u=k(function(a){var b=a[0];a=a[1];return b!=null||a!=null},[p,e.getFooter]),v=k(function(a){a=a[0];return a!=null&&a!==""&&d("WAWebEmoji").EmojiUtil.containsEmoji(a)},[p]),w=k(function(a){a=a[0];return a==null?null:d("WAWebEmoji").EmojiUtil.extractAllEmojis(a)},[p]),x=function(a){return d("WAWebMsgGetters").getIsNewsletterMsg(a)?b("WAWebNewsletterCollection"):b("WAWebChatCollection").ChatCollection};function a(a){var e=b("WAWebChatCollection").ChatCollection;d("WAWebMsgGetters").getIsNewsletterMsg(a)&&(e=b("WAWebNewsletterCollection"));return c("WANullthrows")(e.get(c("WAWebMsgKey").from(a.id).remote))}var y=function(a){var b=x(a).get(c("WAWebMsgKey").from(a.id).remote);b==null&&(d("WALogger").LOG(i(),a.id.toString(),a.type),d("WALogger").ERROR(h()).sendLogs("get-chat-unexpected-null"));return b},z=function(a){return x(a).get(c("WAWebMsgKey").from(a.id).remote)},A=j("carouselCards"),B=k(function(a){a=a[0];return a==null?null:a.slice()},[A]),C=j("buttons"),D=k(function(a){var b=a[0];a=a[1];return b&&a!=null&&a.length>0},[e.getIsFromTemplate,C]),E=k(function(a){var b=a[0];a=a[1];if(!b)return!1;if(a==null)return!1;b=a.at(0);return b==null?!1:b.subtype===d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.QUICK_REPLY},[D,C]),F=k(function(a){a=a[0];return a},[e.getMsgUnsafe]),G=k(function(a){a=a[0];return a.type===d("WAWebMsgType").MSG_TYPE.PRODUCT&&a.id&&a.id.id.startsWith(d("WAWebBizSystemMsgSubtypes").PRODUCT_INQUIRY_TYPE)?a:null},[F,e.getType,e.getId]),H=k(function(a){a=a[0];switch(a.type){case d("WAWebMsgType").MSG_TYPE.GP2:return a;default:return null}},[F,e.getType]),I=k(function(a){a=a[0];return a.type===d("WAWebMsgType").MSG_TYPE.BROADCAST_NOTIFICATION?a:null},[F,e.getType]),J=k(function(a){a=a[0];return a.type==="product"?a:null},[F,e.getType]),K=k(function(a){a=a[0];return a.type===d("WAWebMsgType").MSG_TYPE.REVOKED?a:null},[F,e.getType]),L=k(function(a){var b=a[0];a[1];var c=a[2],e=a[3];a[4];var f=a[5];a[6];var g=a[7],h=a[8];a=a[9];return(b.type===d("WAWebMsgType").MSG_TYPE.IMAGE||b.type===d("WAWebMsgType").MSG_TYPE.VIDEO&&b.isGif!==!0)&&!c&&!e&&!f&&!g&&!h&&!a?b:null},[F,e.getType,e.getIsNotification,e.getCaption,e.getIsForwarded,K,e.getIsGif,e.getQuotedMsg,e.getCtwaContext,e.getIsViewOnce]),M=k(function(a){var b=a[0];a=a[1];return d("WAWebMsgModelUtils").typeIsUrl({type:b,subtype:a})},[e.getType,e.getSubtype]),N=k(function(a){var b=a[0];a[1];var c=a[2];a=a[3];if(c)return null;switch(b.type){case d("WAWebMsgType").MSG_TYPE.IMAGE:case d("WAWebMsgType").MSG_TYPE.STICKER:case d("WAWebMsgType").MSG_TYPE.AUDIO:case d("WAWebMsgType").MSG_TYPE.PTT:case d("WAWebMsgType").MSG_TYPE.VIDEO:case d("WAWebMsgType").MSG_TYPE.PTV:case d("WAWebMsgType").MSG_TYPE.DOCUMENT:return b}return a?b:null},[F,e.getType,e.getIsViewOnce,M]),O=k(function(a){var b=a[0];a[1];var c=a[2],e=a[3],f=a[4],g=a[5];a=a[6];var h=y(b.unsafe());return b.type===d("WAWebMsgType").MSG_TYPE.STICKER&&!c&&!e&&!f&&!g&&!a&&!d("WAWebChatGroupUtils").isCommunityAnnouncementGroup(h)?b:null},[F,e.getType,e.getIsNotification,K,e.getQuotedMsg,e.getCtwaContext,e.getIsNewsletterMsg]),P=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT?b:null},[F,e.getType]),Q=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.IMAGE?b:null},[F,e.getType]),R=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.VIDEO?b:null},[F,e.getType]),S=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.AUDIO?b:null},[F,e.getType]),T=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.PTT?b:null},[F,e.getType]),U=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.PTV?b:null},[F,e.getType]),V=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.POLL_CREATION?b:null},[F,e.getType]),W=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION?b:null},[F,e.getType]),X=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE?b:null},[F,e.getType]),aa=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.REQUEST_PHONE_NUMBER?b:null},[F,e.getType]),ba=k(function(a){var b=a[0];a[1];return d("WAWebMsgModelUtils").typeIsMms(b)?b:null},[F,e.getType]),ca=k(function(a){var b=a[0];a[1];a[2];return d("WAWebMsgModelUtils").typeIsUrl(b)?b:null},[F,e.getType,e.getSubtype]),Y=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.IMAGE||b.type===d("WAWebMsgType").MSG_TYPE.VIDEO?b:null},[F,e.getType]),da=k(function(a){a[0];var b=a[1],c=a[2];a=a[3];return(b!=null||c!=null)&&a?(a=b)!=null?a:c:null},[e.getType,Y,T,e.getIsViewOnce]),ea=k(function(a){var b=a[0];a[1];return b.type===d("WAWebMsgType").MSG_TYPE.CHAT?b:null},[F,e.getType]),fa=k(function(a){var b=a[0];a[1];var c=a[2];a=a[3];if(b.type===d("WAWebMsgType").MSG_TYPE.PTT)return b;return b.type===d("WAWebMsgType").MSG_TYPE.AUDIO&&a&&c!=null?b:null},[F,e.getType,e.getWaveform,e.getIsOpus]),Z=j("senderObj"),ga=j("mediaData"),ha=j("replyButtons"),ia=j("pendingDeleteForMe",{"default":!1});j=j("botPluginType");var ja=k(function(a){var b=a[0],c=a[1];a=a[2];return(a==null?void 0:(a=a.id)==null?void 0:a.isBot())&&(c===d("WAWebProtobufsE2E.pb").BotPluginMetadata$PluginType.SEARCH||c===d("WAWebProtobufsE2E.pb").BotPluginMetadata$PluginType.REELS)?b:null},[F,j,Z]),ka=k(function(a){a=a[0];return d("WAWebMsgModelUtils").getCelebrationAnimationType(a)},[p]),$=k(function(a){var b=a[0];a=a[1];return d("WAWebMsgModelUtils").isAnimatedEmoji(b,a)},[e.getBody,e.getType]),la=k(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];switch(b){case d("WAWebMsgType").MSG_TYPE.STICKER:return Boolean(!e&&!c);case d("WAWebMsgType").MSG_TYPE.CHAT:return!e&&a;case d("WAWebMsgType").MSG_TYPE.PTV:return d("WAWebPtvGatingUtils").isPtvReceivingEnabled();default:return!1}},[e.getType,e.getCtwaContext,e.getQuotedMsg,$]),ma=k(function(a){a=a[0];if(a==null)return;return d("WAWebEmoji").EmojiUtil.getAssetIdForAnimatedEmoji(a)},[e.getBody]),na=k(function(a){var b=a[0],c=a[1],d=a[2],e=a[3];a=a[4];var f;b&&(f=c?e.remote:d==null?void 0:d.newsletterId);return(b=f)!=null?b:a.id},[e.getHasOriginatedFromNewsletter,e.getIsNewsletterMsg,e.getForwardedNewsletterMessageInfo,e.getId,Z]),oa=k(function(a){var b=a[0];a=a[1];return!b&&d("WAWebUserPrefsMeUser").isMeAccount(a)},[e.getIsNewsletterMsg,e.getSender]);k=k(function(a){var b=a[0],c=a[1];a=a[2];b=z(b.unsafe());var d;c&&(d=b==null?void 0:b.contact);return(c=d)!=null?c:a},[F,e.getIsNewsletterMsg,Z]);g.clearFrontendMsgGetterCacheFor=f;g.getIsMms=l;g.getIsUnsentMedia=m;g.getEventType=n;g.getText=p;g.getIsNewsletterInviteAccepted=q;g.getDir=r;g.getIsRTL=s;g.getRtl=t;g.getHasBodyOrFooter=u;g.getContainsEmoji=v;g.getAllEmojis=w;g.getChatCollection=x;g.getCurrentChat=a;g.getChat=y;g.getMaybeChat=z;g.getCarouselCardsCollection=A;g.getCarouselCards=B;g.getButtons=C;g.getHasTemplateButtons=D;g.getIsQuickReply=E;g.getSafeMsg=F;g.getAsProductInquiry=G;g.getAsGroupNotification=H;g.getAsBroadcastNotification=I;g.getAsProduct=J;g.getAsRevoked=K;g.getAsAlbumAsset=L;g.getIsUrlMessage=M;g.getAsAutoDownloadableMedia=N;g.getAsGroupedSticker=O;g.getAsDoc=P;g.getAsImage=Q;g.getAsVideo=R;g.getAsAudio=S;g.getAsPtt=T;g.getAsPtv=U;g.getAsPollCreation=V;g.getAsEventCreation=W;g.getAsPollUpdate=X;g.getAsRequestPhoneNumber=aa;g.getAsMms=ba;g.getAsUrl=ca;g.getAsVisualMedia=Y;g.getAsViewOnce=da;g.getAsChat=ea;g.getAsPttLike=fa;g.getSenderObj=Z;g.getMediaData=ga;g.getReplyButtons=ha;g.getPendingDeleteForMe=ia;g.getBotPluginType=j;g.getAsBotPluginCarouselMsg=ja;g.getCelebrationAnimationCandidate=ka;g.getIsAnimatedEmoji=$;g.getIsTransparentMsg=la;g.getAssetIdForAnimatedEmoji=ma;g.getMsgSenderId=na;g.getShouldDisplaySelf=oa;g.getSenderForReplyMsg=k}),98);
__d("WAWebFrontendPollVoteGetters",["WANullthrows","WAWebAck","WAWebContactCollection","WAWebFrontendMsgGetters","WAWebGetters","WAWebGettersCaches","WAWebMsgCollection","WAWebPollVoteGetters","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){e=d("WAWebGetters").createGetterFactories({root:(a=d("WAWebPollVoteGetters")).getPollVoteUnsafe,createCache:d("WAWebGettersCaches").createFrontendPollVotesCache});f=e.field;var h=e.computed;e=e.clearCacheFor;e=e;f=f("isSendFailure",{"default":!1});var i=h(function(a){a=a[0];var e=b("WAWebMsgCollection");e=e.MsgCollection;e=c("WANullthrows")(e.get(a));return c("WANullthrows")(d("WAWebFrontendMsgGetters").getAsPollCreation(e))},[a.getParentMsgKey]),j=h(function(a){a=a[0];return d("WAWebContactCollection").ContactCollection.gadd(a)},[a.getSender]);h=h(function(a){var b=a[0],c=a[1];a=a[2];b=d("WAWebUserPrefsMeUser").isMeAccount(b)&&c!=null&&c<d("WAWebAck").ACK.CLOCK;return b||Boolean(a)},[a.getSender,a.getAck,f]);g.clearFrontendPollVoteGetterCacheFor=e;g.getIsSendFailure=f;g.getParentMsg=i;g.getSenderObj=j;g.getIsFailed=h}),98);
__d("WAWebDummyCacheMap",[],(function(a,b,c,d,e,f){a=function(){function a(){this.size=0}var b=a.prototype;b.clear=function(){};b["delete"]=function(){return!1};b.get=function(){return void 0};b.has=function(){return!1};b.set=function(){return this};return a}();f.FakeCacheMap=a}),66);
__d("WAWebUseValuesUtils",["WAWebDummyCacheMap","WAWebGetters","lodash"],(function(a,b,c,d,e,f,g){var h=new(d("WAWebDummyCacheMap").FakeCacheMap)(),i=c("lodash").memoize(function(a){return d("WAWebGetters").createGetterFactories({root:a,createCache:function(){return h}})});a=c("lodash").memoize(function(a){var b=a[0].$$root;b=i(b);b=b.computed;return b(function(a){return a},a)},function(a){return a.map(l).join("-")});var j=new WeakMap(),k=0;function l(a){var b=j.get(a);b==null&&(b=(k++).toString(),j.set(a,b));return b}g.computedForComponent=a}),98);
__d("useWAWebValues",["WAArraysShallowEqual","WANullthrows","WAWebUseValuesUtils","react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useRef,l=b.useState,m=function(a){return function(){}};function a(a,b,d){a=n(a,b,d);return c("WANullthrows")(a)}function n(a,b,e){var f=j(function(){return d("WAWebUseValuesUtils").computedForComponent(b)},b),g=l(function(){return a==null?null:f(a)}),h=g[0],n=g[1],p=c("useWAWebStableCallback")(function(){n(function(b){var c=a==null?null:f(a);return o(b,c)?b:c})});g=k(a);var q=g.current;a!==q&&(g.current=a,p());var r=(q=e==null?void 0:e.subscribe)!=null?q:m;i(function(){return r(function(){p()})},[r,p]);return h}function o(a,b){if(a==b)return!0;return a==null||b==null?!1:c("WAArraysShallowEqual")(a,b)}g.useValues=a;g.useOptionalValues=n}),98);
__d("useWAWebCollectionValues",["invariant","WANullthrows","react","useWAWebListener","useWAWebValues"],(function(a,b,c,d,e,f,g,h){var i;e=i||d("react");var j=e.useCallback,k=e.useState;function a(a,b,d,e){var f=l(a,b,d,e);a=k(function(){return c("WANullthrows")(f)});b=a[0];d=a[1];f!=null&&f!==b&&d(f);return b}function l(a,b,c,e){var f;typeof c==="function"&&Array.isArray(e)?(f=c,e=e):(Array.isArray(c)||h(0,72179),f=function(a){return a},e=c);c=k(function(){return b==null?null:a.get(b)});var g=c[0],i=c[1],j=function(){var c=b==null?null:a.get(b);(c!==g||(c==null?void 0:c.id.toString())!==(g==null?void 0:g.id.toString()))&&i(c)};j();d("useWAWebListener").useListener(a,"add",function(){j()});c=g==null?null:f(g);return d("useWAWebValues").useOptionalValues(c,e,{subscribe:m(g)})}function b(a,b){return d("useWAWebValues").useValues(a,b,{subscribe:m(a)})}function m(a){return j(function(b){if(a==null)return;a.on("change",b);a.incObservers(!0);return function(){a.decObservers(),a.off("change",b)}},[a])}g.useCollectionValues=a;g.useOptionalCollectionValues=l;g.useModelGetterValues=b}),98);
__d("useWAWebContactValues",["WAWebContactCollection","useWAWebCollectionValues"],(function(a,b,c,d,e,f,g){function a(a,b){return d("useWAWebCollectionValues").useCollectionValues(d("WAWebContactCollection").ContactCollection,a,b)}function b(a,b){return d("useWAWebCollectionValues").useOptionalCollectionValues(d("WAWebContactCollection").ContactCollection,a,b)}g.useContactValues=a;g.useOptionalContactValues=b}),98);
__d("useWAWebModelValues",["WACustomError","WALogger","WANullthrows","WAWebStateConcern","WAWebStateUtils","react"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["useModelValues hook received an unexpected `null` model"],["useModelValues hook received an unexpected \\`null\\` model"]);i=function(){return a};return a}b=h||d("react");var j=b.useCallback,k=b.useEffect,l=b.useRef,m=b.useState,n=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a="Received a null value for model key: "+a;return b.call(this,a)||this}return a}(d("WACustomError").customError("StateHookMissingModelError"));function a(a,b,e){if(a==null){d("WALogger").ERROR(i()).devConsole("See https://fburl.com/wiki/h7g96q1s for ways to handle this").sendLogs("state-hook-null-model");throw new n("Unknown")}a=o(a,b,e);return c("WANullthrows")(a)}function o(a,b,e){e=(e=e)!=null?e:{};var f=e.isStrong,g=f===void 0?!0:f,h=e.componentName,i=a?d("WAWebStateUtils").unproxy(a):null,n=l();function o(){if(!i)return null;if(n.current==null){var a;if(!i)return null;n.current=new(c("WAWebStateConcern"))((a=h)!=null?a:"Hook(useModelValues)",i.proxyName,Array.from(new Set(b)),g,!0)}return n.current}f=m(function(){var a=o();if(!a)return null;var b=a.getModelAndValidate(i);return!b?null:a.createProxy(b)});var p=f[0],q=f[1],r=j(function(a,b){b=a.getModelAndValidate(b);q(b?a.createProxy(b):null)},[]);k(function(){var a=o();if(!a||!p)return;var b=a.getModel(i);a.attachConcern(b,p.proxyBitMask,r);return function(){a.detachConcern(b,r)}},[i,p,r]);e=m(i);a=e[0];f=e[1];e=o();if(a!==i&&e){a&&e.detachConcern(a,r);a=e.getModelAndValidate(i);f(a);q(a?e.createProxy(a):null)}!e&&p!=null&&q(null);return p}g.StateHookMissingModelError=n;g.useModelValues=a;g.useOptionalModelValues=o}),98);
__d("WAWebCollections",["WAWebAdCollection","WAWebAgentCollection","WAWebBlocklistCollection","WAWebBotProfileCollection","WAWebBusinessCategoriesResultCollection","WAWebBusinessProfileCollection","WAWebCallCollection","WAWebCatalogCollection","WAWebChatAssignmentCollection","WAWebChatCollection","WAWebChatPreferenceCollection","WAWebCommentCollection","WAWebCommunityActivityCollection","WAWebContactCollection","WAWebConversionTupleCollection","WAWebDailyAggregatedStatsCollection","WAWebEmojiVariantCollection","WAWebEventResponseCollection","WAWebFavoriteStickerCollection","WAWebFlattenedReactionCollection","WAWebGroupMetadataCollection","WAWebLabelCollection","WAWebMsgCollection","WAWebMsgInfoCollection","WAWebMuteCollection","WAWebNewsletterCollection","WAWebNewsletterMetadataCollection","WAWebOrderCollection","WAWebPinInChatCollection","WAWebPollsPollVoteCollection","WAWebPremiumMessageCollection","WAWebPresenceCollection","WAWebProfilePicThumbCollection","WAWebQuickReplyCollection","WAWebReactionsCollection","WAWebRecentEmojiCollection","WAWebRecentReactionsCollection","WAWebRecentStickerCollection","WAWebRecentStickerCollectionMd","WAWebStarredMsgCollection","WAWebStatusCollection","WAWebStatusV3Collection","WAWebStickerCollection","WAWebStickerPackCollectionMd","WAWebStickerSearchCollection","WAWebSubscriptionCollection","WAWebUnattributedMessageCollection","WAWebUnjoinedSubgroupMetadataCollection","WAWebUserDisclosureCollection"],(function(a,b,c,d,e,f,g){a={AdCollection:d("WAWebAdCollection").AdCollection,Blocklist:d("WAWebBlocklistCollection").BlocklistCollection,BotProfile:d("WAWebBotProfileCollection").BotProfileCollection,BusinessCategoryResult:d("WAWebBusinessCategoriesResultCollection").BusinessCategoriesResultCollection,BusinessProfile:d("WAWebBusinessProfileCollection").BusinessProfileCollection,Call:c("WAWebCallCollection"),Catalog:d("WAWebCatalogCollection").CatalogCollection,Chat:d("WAWebChatCollection").ChatCollection,ChatAssignment:d("WAWebChatAssignmentCollection").ChatAssignmentCollection,ChatPreference:c("WAWebChatPreferenceCollection"),Contact:d("WAWebContactCollection").ContactCollection,ConversionTuple:c("WAWebConversionTupleCollection"),DailyAggregatedStats:d("WAWebDailyAggregatedStatsCollection").DailyAggregatedStatsCollection,EmojiVariant:d("WAWebEmojiVariantCollection").EmojiVariantCollection,GroupMetadata:c("WAWebGroupMetadataCollection"),Label:d("WAWebLabelCollection").LabelCollection,Msg:d("WAWebMsgCollection").MsgCollection,MsgInfo:d("WAWebMsgInfoCollection").MsgInfoCollection,Mute:d("WAWebMuteCollection").MuteCollection,Order:d("WAWebOrderCollection").OrderCollection,PollVote:d("WAWebPollsPollVoteCollection").PollVoteCollection,Presence:d("WAWebPresenceCollection").PresenceCollection,ProfilePicThumb:d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection,QuickReply:d("WAWebQuickReplyCollection").QuickReplyCollection,RecentEmoji:d("WAWebRecentEmojiCollection").RecentEmojiCollection,RecentSticker:d("WAWebRecentStickerCollection").RecentStickerCollection,StarredMsg:d("WAWebStarredMsgCollection").AllStarredMsgsCollection,Status:d("WAWebStatusCollection").StatusCollection,StatusV3:d("WAWebStatusV3Collection").StatusV3Collection,Sticker:d("WAWebStickerCollection").StickerCollection,StickerSearch:d("WAWebStickerSearchCollection").StickerSearchCollection,RecentStickerMD:d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd,StickerPackCollectionMD:d("WAWebStickerPackCollectionMd").StickerPackCollectionMd,FavoriteSticker:d("WAWebFavoriteStickerCollection").FavoriteStickerCollection,Reactions:d("WAWebReactionsCollection").ReactionsCollection,RecentReactions:d("WAWebRecentReactionsCollection").RecentReactionsCollection,UnjoinedSubgroupMetadataCollection:c("WAWebUnjoinedSubgroupMetadataCollection"),AgentCollection:d("WAWebAgentCollection").AgentCollection,SubscriptionCollection:d("WAWebSubscriptionCollection").SubscriptionCollection,UnattributedMessageCollection:d("WAWebUnattributedMessageCollection").UnattributedMessageCollection,CommunityActivityCollection:c("WAWebCommunityActivityCollection"),CommentCollection:d("WAWebCommentCollection").CommentCollection,PinInChat:d("WAWebPinInChatCollection").PinInChatCollection,NewsletterCollection:c("WAWebNewsletterCollection"),NewsletterMetadataCollection:c("WAWebNewsletterMetadataCollection"),PremiumMessageCollection:d("WAWebPremiumMessageCollection").PremiumMessageCollection,FlattenedReactionsCollection:d("WAWebFlattenedReactionCollection").FlattenedReactionsCollection,UserDisclosureCollection:d("WAWebUserDisclosureCollection").UserDisclosureCollection,EventResponseCollection:d("WAWebEventResponseCollection").EventResponseCollection};g["default"]=a}),98);
__d("WAWebConversionTupleCollection",["WATimeUtils","WAWebApiParse","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebConversionTupleModel","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.initializeFromCache=function(a){if(!a)return;var b=d("WATimeUtils").unixTime()-d("WAWebConversionTupleModel").ConversionTupleExpiry;a=a.filter(function(a){return a.timestamp-b>0}).map(function(a){var b=d("WAWebApiParse").parseConversionData(a.conversionData);b?a.conversionData=b:delete a.conversionData;return a});this.add(a);this.saveToCache()};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebConversionTupleModel").ConversionTuple;a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.CONVERSION_TUPLE_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:1e3};b=new a();g["default"]=b}),98);
__d("WAWebConversionTupleModel",["WABinary","WALogger","WATimeUtils","WAWebAlarm","WAWebBaseModel","WAWebConversionTupleCollection","WAWebWid"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid conversionTuple timer"]);h=function(){return a};return a}var i=7*24*60*60;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.conversionData=d("WAWebBaseModel").prop(),c.conversionSource=d("WAWebBaseModel").prop(),c.timestamp=d("WAWebBaseModel").prop(function(){return d("WATimeUtils").unixTime()}),c.alarmId=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){var b=this;a.prototype.initialize.call(this);this.listenTo(this,"change:timestamp",function(){return b.$ConversionTupleImpl1()});this.$ConversionTupleImpl1()};f.$ConversionTupleImpl1=function(){var a=this,b=this.timestamp+i;if(b<0){d("WALogger").WARN(h());this["delete"]();return}this.alarmId=c("WAWebAlarm").setLocalTimeout(function(){a["delete"]()},b*1e3,this.alarmId)};f.$ConversionTupleImpl2=function(){if(this.alarmId==null)return;c("WAWebAlarm").clearTimeout(this.alarmId);this.alarmId=void 0};f.toJSON=function(){var a=this.serialize(),b=a.conversionData;a=babelHelpers.objectWithoutPropertiesLoose(a,["conversionData"]);if(b instanceof ArrayBuffer){var c=new(d("WABinary").Binary)(b);a.conversionData=c.readString(b.byteLength)}return a};f["delete"]=function(){a.prototype["delete"].call(this),this.getCollection().remove(this.id),this.$ConversionTupleImpl2()};f.getCollection=function(){return b("WAWebConversionTupleCollection")};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="conversionTuple";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g.ConversionTupleExpiry=i;g.ConversionTuple=e}),98);
__d("WAWebProductSelectors",[],(function(a,b,c,d,e,f){var g=function(a){return a.salePriceAmount1000!=null&&(a.salePriceStartDate==null||a.salePriceStartDate<=Date.now())&&(a.salePriceEndDate==null||a.salePriceEndDate>Date.now())},h=function(a){return g(a)?a.salePriceAmount1000:a.priceAmount1000};a=function(a){var b;return g(a)?Math.max(0,((b=a.priceAmount1000)!=null?b:0)-((b=a.salePriceAmount1000)!=null?b:0)):0};b=function(a){var b=a.currency,c=a.priceAmount1000;a=h(a);return!b||c==null||a==null};f.isSalePriceActive=g;f.getActivePrice=h;f.getSavings=a;f.isEmptyPrice=b}),66);
__d("WAWebBizCreateProductInquiry",["WATimeUtils","WAWebAck","WAWebMediaOpaqueData","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebProductSelectors","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a,b,e,f){b={ack:d("WAWebAck").ACK.CLOCK,id:new(c("WAWebMsgKey"))({id:"product_inquiry_"+c("WAWebMsgKey").newId_DEPRECATED(),remote:b,fromMe:!0}),from:b,to:d("WAWebUserPrefsMeUser").getMeUser(),t:d("WATimeUtils").unixTime(),type:d("WAWebMsgType").MSG_TYPE.PRODUCT,kind:d("WAWebMsgType").MsgKind.Product,title:a.name,description:a.description,businessOwnerJid:b.toString({legacy:!0}),productId:a.id.toString(),url:a.url,productImageCount:a.getProductImageCollectionCount(),body:e.preview instanceof c("WAWebMediaOpaqueData")?e.preview.getBase64():null,currencyCode:a.currency,priceAmount1000:a.priceAmount1000,salePriceAmount1000:d("WAWebProductSelectors").isSalePriceActive(a)?a.salePriceAmount1000:null,sessionId:f,retailerId:a.retailerId};f=new(d("WAWebMsgModel").Msg)(b);f.mediaData.set(e);return f}g.createProductInquiry=a}),98);
__d("WAWebBusinessCategoriesResultCollection",["WAWebBaseCollection","WAWebBizBusinessProfileAction","WAWebBusinessCategoriesResultModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=e=a.call.apply(a,[this].concat(g))||this,e.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebBizBusinessProfileAction").queryBusinessCategories(a)),c=b.categories;b=b.notABizId;return{id:a,categories:c,notABizId:b}});return function(b){return a.apply(this,arguments)}}(),c)||babelHelpers.assertThisInitialized(e)}return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebBusinessCategoriesResultModel").BusinessCategoriesResult;a.staleCollection=!0;c=new a();g.BusinessCategoriesResultCollectionImpl=a;g.BusinessCategoriesResultCollection=c}),98);
__d("WAWebBusinessCategoriesResultModel",["WAWebBaseModel","WAWebBusinessCategoriesResultCollection"],(function(a,b,c,d,e,f,g){a="__empty_query__";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.categories=d("WAWebBaseModel").prop(),c.notABizId=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebBusinessCategoriesResultCollection").BusinessCategoriesResultCollection};return c}(d("WAWebBaseModel").BaseModel);c.Proxy="BusinessCategoriesResult";e=d("WAWebBaseModel").defineModel(c);g.BUSINESS_CATEGORY_EMPTY_STR_ID=a;g.BusinessCategoriesResult=e}),98);
__d("WAWebApiDirectConnectionKeys",["WALogger","WAWebSchemaDirectConnectionKeys"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Removing direct connection keys from persistent DB"]);h=function(){return a};return a}function a(a){return d("WAWebSchemaDirectConnectionKeys").getDirectConnectionKeysTable().createOrMerge(a.id,a)}function b(a){d("WALogger").DEV(h());return d("WAWebSchemaDirectConnectionKeys").getDirectConnectionKeysTable().remove(a)}function c(a){return d("WAWebSchemaDirectConnectionKeys").getDirectConnectionKeysTable().get(a)}g.createOrUpdateDirectConnectionKeys=a;g.removeDirectConnectionKeys=b;g.fetchDirectConnectionKeys=c}),98);
__d("WAWebBusinessDirectConnectionModel",["WAWebBaseModel","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.cypher=d("WAWebBaseModel").prop(),c.cypherExpirationTimestamp=d("WAWebBaseModel").prop(),c.cypherType=d("WAWebBaseModel").prop(),c.postcode=d("WAWebBaseModel").prop(),c.postcodeSetByUser=d("WAWebBaseModel").prop(),c.postcodeLocationName=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="business_direct_connection";a.idClass=c("WAWebWid");b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebBusinessDirectConnectionCollection",["Promise","WALogger","WANullthrows","WAWebApiDirectConnectionKeys","WAWebBaseCollection","WAWebBizBusinessProfileAction","WAWebBusinessDirectConnectionModel","WAWebBusinessDirectUtils","WAWebDirectConnectionCypher","WAWebDirectConnectionX509","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] cypher found in client cache. Using cached cypher"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] cypher not found / usable cypher in client cache."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] removing cypher from cache"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Received 421 from Direct Connection request during verify postcode. Renewing certificate and retrying."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] certificate is null during verify postcode"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] verify postcode: using cypherType: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] verify and save postcode called"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Post code data could not be found"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] no certificate returned from the get_public_key IQ"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] new cypher type ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Cannot generate cypher"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] cypher not found / cypher unusable in client DB. Generating direct connection keys"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] cypher found in client persistent DB. Using stored cypher ",""]);u=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f._getValidCertAndSignedUserInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(!e&&(c==null?void 0:c.certificateChain)){e=(yield (h||(h=b("Promise"))).all([d("WAWebBusinessDirectUtils").getValidCertificate(d("WAWebDirectConnectionX509").stringToCertificateString(c.certificateChain)),d("WAWebBizBusinessProfileAction").querySignedUserInfo(a)]));c=e[0];e=e[1];if(c)return{signedUserInfo:e,validCertificate:c}}e=(yield (h||(h=b("Promise"))).all([d("WAWebBizBusinessProfileAction").querySignedUserInfo(a),d("WAWebBusinessDirectUtils").fetchCertificateFullChain(a)]));c=e[0];a=e[1];e=a.certificateString;a=a.leaftCertificateCommonName;if(c.businessDomain!==a)throw new(d("WAWebBusinessDirectUtils").DCCertificateDomainMismatchError)("[direct-connection] certificate common name does not match business domain");a=(yield d("WAWebBusinessDirectUtils").getValidCertificate(e));return{signedUserInfo:c,validCertificate:a}});function a(b,c,d){return a.apply(this,arguments)}return a}();f._getCypherTypeForConversation=function(a,b){return d("WAWebBusinessDirectUtils").userHasSentMessageToBusiness(a)||b?d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode:d("WAWebDirectConnectionCypher").CypherType.Postcode};f._fetchPostcode=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(typeof (b==null?void 0:b.postcode)==="string"&&b.postcodeSetByUser===!0){return{postcode:b.postcode,postcodeSetByUser:b.postcodeSetByUser,postcodeLocationName:(b=b.postcodeLocationName)!=null?b:""}}b=(yield d("WAWebBusinessDirectUtils").fetchDefaultPostcode(a));if(b)return babelHelpers["extends"]({},b,{postcodeSetByUser:!1})});function a(b,c){return a.apply(this,arguments)}return a}();f._getCypherFromDborApi=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);var c=(yield d("WAWebApiDirectConnectionKeys").fetchDirectConnectionKeys(a.toJid()));if(!b&&c&&this._isRowDataInGoodCondition(a,c)){d("WALogger").DEV(u(),c.cypherType);return{id:a,cypher:d("WAWebDirectConnectionCypher").stringToCypherString(c.cypher),cypherExpirationTimestamp:c.cypherExpirationTimestamp,cypherType:c.cypherType,certificateChain:c.certificateChain,postcode:c.postcode,postcodeSetByUser:c.postcodeSetByUser,postcodeLocationName:c.postcodeLocationName}}d("WALogger").DEV(t());var e=this._getCypherTypeForConversation(a,typeof (c==null?void 0:c.postcode)==="string"&&c.postcodeSetByUser===!0);e=(yield this.genNewCypher(a,e,{rowData:c,forceRenew:b}));if(e==null){d("WALogger").ERROR(s());return null}yield d("WAWebApiDirectConnectionKeys").createOrUpdateDirectConnectionKeys(babelHelpers["extends"]({},e,{id:a.toJid(),cypher:d("WAWebDirectConnectionCypher").cypherStringToString(e.cypher)}));return e});function a(b,c){return a.apply(this,arguments)}return a}();f._verifyPostcode=function(a,b){return d("WAWebPersistedJobManager").getJobManager().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.verifyPostcode(a,b))};f._updateModel=function(a){return this.set([a])};f.genNewCypher=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=f.rowData;f=f.forceRenew;d("WALogger").DEV(r(),e);f=(yield (h||(h=b("Promise"))).all([this._getValidCertAndSignedUserInfo(a,g,Boolean(f)),this._fetchPostcode(a,g)]));g=f[0];var i=g.validCertificate;g=g.signedUserInfo;f=f[1];if(i==null){d("WALogger").WARN(q());return null}if(f==null){d("WALogger").WARN(p());return null}var j=c("WANullthrows")(yield d("WAWebBusinessDirectUtils").getCypher(i.chain,f.postcode,g,e));j=j.cypher;g=e===d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode?g.phoneNumberSignatureExpiration:null;i=d("WAWebDirectConnectionX509").certificateStringToString(i.string);return{id:a,cypher:j,cypherExpirationTimestamp:g,cypherType:e,certificateChain:i,postcode:f.postcode,postcodeSetByUser:f.postcodeSetByUser,postcodeLocationName:f.postcodeLocationName}});function e(b,c,d){return a.apply(this,arguments)}return e}();f.verifyAndSavePostcode=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=!1);d("WALogger").DEV(o());var f=(yield d("WAWebApiDirectConnectionKeys").fetchDirectConnectionKeys(a.toJid())),g=d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode;d("WALogger").DEV(n(),g);f=(yield this._getValidCertAndSignedUserInfo(a,f,e));e=f.validCertificate;f=f.signedUserInfo;if(e==null){d("WALogger").WARN(m());return null}var h=c("WANullthrows")(yield d("WAWebBusinessDirectUtils").getCypher(e.chain,b,f,g)),i=h.cypher,j=h.exportedAesKey;h=h.iv;f=g===d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode?f.phoneNumberSignatureExpiration:null;var k,p;try{var q=(yield this._verifyPostcode(a,i));k=q.resultCode;p=q.encryptedLocationName}catch(c){if(d("WAWebBusinessDirectUtils").errorIsDirectConnectionCypherError421(c)){d("WALogger").DEV(l());return this.verifyAndSavePostcode(a,b,!0)}throw c}if(k==="success"&&typeof p==="string"){q=(yield d("WAWebDirectConnectionCypher").decryptDataWithSymmetricKeyToString(j,p,h));j=d("WAWebDirectConnectionX509").certificateStringToString(e.string);h={cypherExpirationTimestamp:f,certificateChain:j,cypherType:g,postcode:b,postcodeSetByUser:!0,postcodeLocationName:q};yield d("WAWebApiDirectConnectionKeys").createOrUpdateDirectConnectionKeys(babelHelpers["extends"]({id:a.toJid(),cypher:d("WAWebDirectConnectionCypher").cypherStringToString(i)},h));this._updateModel(babelHelpers["extends"]({id:a,cypher:i},h));return{resultCode:k,decryptedLocationName:q}}return{resultCode:k}});function e(b,c,d){return a.apply(this,arguments)}return e}();f.removeCypher=function(a){var c=this.get(a);if(c){d("WALogger").DEV(k());this.remove(c);return d("WAWebApiDirectConnectionKeys").removeDirectConnectionKeys(a.toJid())}return(h||(h=b("Promise"))).resolve()};f._isCypherInGoodCondition=function(a,b,c,e){return!d("WAWebBusinessDirectUtils").isCypherFromLaunch1(b)&&!d("WAWebBusinessDirectUtils").isCypherExpired(b,c)&&b===this._getCypherTypeForConversation(a,e)};f._isRowDataInGoodCondition=function(a,b){return this._isCypherInGoodCondition(a,b.cypherType,b.cypherExpirationTimestamp,b.postcodeSetByUser===!0)};f._isModelDataInGoodCondition=function(a,b){return this._isCypherInGoodCondition(a,b.cypherType,b.cypherExpirationTimestamp,b.postcodeSetByUser===!0)};f.getCypher=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b===void 0?{}:b;b=b.forceRenew;b=b===void 0?!1:b;var c=b?null:this.get(a);if(!c||!this._isModelDataInGoodCondition(a,c)){d("WALogger").DEV(j());return[].concat(yield this.update(a,{forceRenewDirectConnection:b}))[0]}d("WALogger").DEV(i());return c});function c(b,c){return a.apply(this,arguments)}return c}();f.findImpl=function(a){return this._getCypherFromDborApi(a)};f._update=function(a,b){b=b.forceRenewDirectConnection;return this._getCypherFromDborApi(a,b)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebBusinessDirectConnectionModel");e=new a();g["default"]=e}),98);
__d("WAWebBusinessDirectUtils",["Promise","WAArraysShallowEqual","WACustomError","WALogger","WANullthrows","WAWeb-moment","WAWebBackendErrors","WAWebBizBusinessProfileAction","WAWebBusinessProfileCollection","WAWebBusinessProfileVersioningBridge","WAWebChatCollection","WAWebDirectConnectionCypher","WAWebDirectConnectionGatingUtils","WAWebDirectConnectionX509","WAWebServerPropsModel","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] cypher is expired."]);i=function(){return a};return a}var j="YYYYMMDDTHHmmssZ",k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WACustomError").customError("DCCertificateDomainMismatchError"));function a(a,b,e){e===void 0&&(e=c("WAWeb-moment")());if(a!==d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode)return!1;if(b==null)return!0;a=c("WAWeb-moment")(b,j);b=!(a.isValid()&&a.isAfter(e));b&&d("WALogger").DEV(i());return b}function e(a){return!a}function f(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebDirectConnectionX509").extractCertificates(a)),c=(yield d("WAWebDirectConnectionX509").validateCertificates(b.slice(1,-1),b.slice(-1)));c=c.result;return!c?null:{string:a,chain:b}});return l.apply(this,arguments)}function m(a,b,c){switch(a){case d("WAWebDirectConnectionCypher").CypherType.PhoneNumberAndPostcode:return{postcode:b,phone_number:c.phoneNumber,ttl_timestamp:c.phoneNumberSignatureExpiration,phone_number_signature:c.phoneNumberSignature};case d("WAWebDirectConnectionCypher").CypherType.Postcode:return{postcode:b}}}function n(a,b,c,e){e=m(e,b,c);return d("WAWebDirectConnectionCypher").genCypher(a[0],e)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e;a=(yield (h||(h=b("Promise"))).all([d("WAWebBizBusinessProfileAction").queryBusinessPublicKey(a),d("WAWebDirectConnectionX509").fetchFromCABundle()]));var f=a[0].certificate;a=a[1];if(f==null)throw c("err")("[direct-connection] no certificate returned from the get_public_key IQ");f=(yield d("WAWebDirectConnectionX509").extractCertificates(f));e=f.length>0?(e=f[0].subject.typesAndValues.find(function(a){return a.type==="2.5.4.3"}))==null?void 0:e.value.valueBlock.value:null;a=c("WANullthrows")(yield d("WAWebDirectConnectionX509").genRootIssuers(f,a));return{certificateString:d("WAWebDirectConnectionX509").encodeToString([].concat(f,a)),leaftCertificateCommonName:e}});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebBusinessProfileCollection").BusinessProfileCollection;return Boolean(d("WAWebDirectConnectionGatingUtils").supportsDirectConnection()&&d("WAWebChatCollection").ChatCollection.get(a)!=null&&((c=(yield c.find(a)))==null?void 0:c.isBusinessDirectConnection()))});return r.apply(this,arguments)}function s(a){a=d("WAWebChatCollection").ChatCollection.get(a);return!!a&&a.hasMaybeSentMsgToChat()}function t(a){var b;return((b=a.directConnection)==null?void 0:b.enabled)===!0&&typeof ((b=a.directConnection.defaultPostcode)==null?void 0:b.code)==="string"}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebBusinessProfileCollection").BusinessProfileCollection;c=(yield c.find(a));if(((a=c.directConnection)==null?void 0:a.enabled)&&c.directConnection.defaultPostcode)return{postcode:c.directConnection.defaultPostcode.code,postcodeLocationName:c.directConnection.defaultPostcode.locationName}});return v.apply(this,arguments)}var w=421;function x(a){return a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===w}var y=function(a,b){if(a===d("WAWebServerPropsModel").UNINITIALIZED_VALUE_WEB_BIZ_PROFILE_OPTIONS)return!1;a=(d("WAWebBusinessProfileVersioningBridge").getBusinessProfileQueryVersionWithCustomBizProfileOptions(a)&d("WAWebBusinessProfileVersioningBridge").DIRECT_CONNECTION_FLAG)>0;b=(d("WAWebBusinessProfileVersioningBridge").getBusinessProfileQueryVersionWithCustomBizProfileOptions(b)&d("WAWebBusinessProfileVersioningBridge").DIRECT_CONNECTION_FLAG)>0;return a!==b},z=function(a,b){return a!=null&&!c("WAArraysShallowEqual")(a,b)};g.timestampFormat=j;g.DCCertificateDomainMismatchError=k;g.isCypherExpired=a;g.isCypherFromLaunch1=e;g.getValidCertificate=f;g.getCypher=n;g.fetchCertificateFullChain=o;g.isCypherNeeded=q;g.userHasSentMessageToBusiness=s;g.businessSupportsPostcode=t;g.fetchDefaultPostcode=u;g.errorIsDirectConnectionCypherError421=x;g.isDirectConnectionFlagChanged=y;g.isDirectConnectionNumbersAbPropChanged=z}),98);
__d("WAWebABPropsLocalStorage",["WANullthrows","WAWebLocalStorage","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){var h=600,i=604800,j=86400;function a(a,b,e,f){var g=null;e!=null&&(g=e,g<h?g=h:g>i&&(g=i));e=k()||{};g={abKey:(a=a)!=null?a:e.abKey,hash:(a=b)!=null?a:e.hash,refresh:(a=(b=g)==null?void 0:b.toString())!=null?a:e.refresh,lastSyncTime:f};c("WANullthrows")(c("WAWebLocalStorage")).setItem(d("WAWebUserPrefsKeys").KEYS.ABPROPS,JSON.stringify(g))}function k(){var a=c("WANullthrows")(c("WAWebLocalStorage")).getItem(d("WAWebUserPrefsKeys").KEYS.ABPROPS);return a==null?null:JSON.parse(a)}function b(){return k()!=null}function e(){var a=k();return a==null?void 0:a.abKey}function f(){var a=k();return a==null?void 0:a.hash}function l(){var a=k();return parseInt((a=a==null?void 0:a.refresh)!=null?a:j,10)}function m(){var a=c("WANullthrows")(c("WAWebLocalStorage")).getItem(d("WAWebUserPrefsKeys").KEYS.ABPROPS_REFRESH_ID);a==null&&n(0);return a==null?0:parseInt(a,10)}function n(a){c("WANullthrows")(c("WAWebLocalStorage")).setItem(d("WAWebUserPrefsKeys").KEYS.ABPROPS_REFRESH_ID,String(a))}g.updateAttributesLocalStorage=a;g.isABPropsAfterFirstSync=b;g.getABKey=e;g.getHash=f;g.getRefresh=l;g.getRefreshId=m;g.setRefreshId=n}),98);
__d("WAWebBusinessProfileCollection",["Promise","WALogger","WAWebABPropsLocalStorage","WAWebApiBusinessProfile","WAWebBaseCollection","WAWebBizBusinessProfileAction","WAWebBusinessDirectUtils","WAWebBusinessProfileModel","WAWebBusinessProfileUtils","WAWebCmd","WAWebContactCollection","WAWebDirectConnectionGatingUtils","WAWebHandleBizBotAutomatedTypeAction","WAWebHandleBizBotWelcomeMsgProtocolModeAction","WAWebServerPropsModel","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] forcefully marking biz profile as stale"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:BusinessProfile:_findAndParse parse and save business profile from server ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:BusinessProfile:_findAndParse No businessProfile found for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received invalid business profile response"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:BusinessProfile:_findAndParse businessProfile is only available to users (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Failed to force update biz profiles on abprop biz numbers change"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] change in direct connection bit detected. marking relevant biz profiles from abprop numbers as stale"]);o=function(){return a};return a}a="catalog_exists";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b._inflightDbQueryMap=new Map();b.listenTo(d("WAWebServerPropsModel").ServerProps,"change:webBizProfileOptions",function(a,c,e){d("WAWebBusinessDirectUtils").isDirectConnectionFlagChanged(e,c)&&(d("WALogger").LOG(o()),b._markBizProfilesAsStale(d("WAWebDirectConnectionGatingUtils").directConnectionBusinessNumbersFromAbprop()))});var c=d("WAWebABPropsLocalStorage").isABPropsAfterFirstSync()?d("WAWebDirectConnectionGatingUtils").directConnectionBusinessNumbersFromAbprop():null;b.listenTo(d("WAWebCmd").Cmd,"on_ab_props_update",function(){try{var a=d("WAWebDirectConnectionGatingUtils").directConnectionBusinessNumbersFromAbprop();if(d("WAWebBusinessDirectUtils").isDirectConnectionNumbersAbPropChanged(c,a)){var e;b._markBizProfilesAsStale(Array.from(new Set(((e=c)!=null?e:[]).concat(a))))}c=a}catch(a){d("WALogger").ERROR(n()).verbose().devConsole(a).sendLogs("direct-connection-biz-number-abprop-sync-fail"+a)}});return b}var e=c.prototype;e.findImpl=function(a){return this._findAndParse(a,{queryCatalog:!0})};e._update=function(a,b){return this._findAndParse(a,{queryCatalog:!1,getMerchantCompliance:b==null?void 0:b.getMerchantCompliance})};e._findAndParse=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=c.queryCatalog;c=c.getMerchantCompliance;var f=this.gadd(a);if(!f.id.isUserNotPSA()){d("WALogger").LOG(m(),String(a));return(h||(h=b("Promise"))).resolve({id:a})}c=d("WAWebBizBusinessProfileAction").queryBusinessProfile([{wid:f.id,tag:f.tag}],c);c=(yield c);if(!Array.isArray(c)){d("WALogger").WARN(l()).devConsole(c);return null}if(c.length===0){d("WALogger").LOG(k(),String(a));return{id:a}}c=c[0];var g=c.wid,i=c.tag;g={id:g,tag:i,dataSource:"server"};i=c.profile;if(i){var n=d("WAWebContactCollection").ContactCollection.get(a);n&&!n.isContactSyncCompleted&&(n.set("isBusiness",!0),n.set("forcedBusinessUpdateFromServer",!0));n=d("WAWebBusinessProfileUtils").parseBusinessProfile({id:c.wid,profile:i,queryCatalog:e});c=f.dataSource==="placeholder"?null:f.automatedType;i=n.automatedType;yield d("WAWebHandleBizBotAutomatedTypeAction").handleBizBotAutomatedTypeTransition(f.id,c,i);e=f.dataSource==="placeholder"?null:f.welcomeMsgProtocolMode;c=n.welcomeMsgProtocolMode;yield d("WAWebHandleBizBotWelcomeMsgProtocolModeAction").handleBizBotWelcomeMsgProtocolModeTransition(f.id,e,c);yield d("WAWebApiBusinessProfile").createOrMergeBusinessProfileRecord({id:g.id,automatedType:n.automatedType,welcomeMsgProtocolMode:n.welcomeMsgProtocolMode,prompts:n.prompts,commands:n.commands,commandsDescription:n.commandsDescription});d("WALogger").DEV(j(),a.toString()).devConsole(n);return babelHelpers["extends"]({},n,g)}return g});function a(b,c){return a.apply(this,arguments)}return a}();e.fetchBizProfile=function(a){var b=this.get(a);b&&b.markStale();return this.find(a)};e.getValid=function(a){a=this.get(a);if(a==null?void 0:a.isValid())return a};e.markProfileAsStale=function(a){(a=this.get(a))==null?void 0:a.markStale()};e.hasBusinessProfileInCache=function(a){return!!this.get(a)};e._markBizProfilesAsStale=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;yield (h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebWidFactory").createUserWid(a)}).filter(function(a){return c.hasBusinessProfileInCache(a)}).map(function(a){d("WALogger").LOG(i()),c.markProfileAsStale(a)}))});function a(b){return a.apply(this,arguments)}return a}();return c}(d("WAWebBaseCollection").BaseCollection);c.model=d("WAWebBusinessProfileModel").BusinessProfile;c.staleCollection=!0;e=new c();g.CATALOG_EXISTS=a;g.BusinessProfileCollectionImpl=c;g.BusinessProfileCollection=e}),98);
__d("WAWebBusinessProfileModel",["WAWebBaseModel","WAWebBotGating","WAWebBotTypes","WAWebBusinessProfileCollection","WAWebChatCollection","WAWebChatGroupUtils","WAWebContactCollection","WAWebWid"],(function(a,b,c,d,e,f,g){var h="wa.me/";a=3;e=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.dataSource=d("WAWebBaseModel").prop("placeholder"),c.tag=d("WAWebBaseModel").prop(),c.description=d("WAWebBaseModel").prop(),c.categories=d("WAWebBaseModel").prop(),c.profileOptions=d("WAWebBaseModel").prop(),c.email=d("WAWebBaseModel").prop(),c.website=d("WAWebBaseModel").prop(),c.latitude=d("WAWebBaseModel").prop(),c.longitude=d("WAWebBaseModel").prop(),c.businessHours=d("WAWebBaseModel").prop(),c.catalogStatus=d("WAWebBaseModel").prop(),c.address=d("WAWebBaseModel").prop(),c.structuredAddress=d("WAWebBaseModel").prop(),c.legalEntityDetails=d("WAWebBaseModel").prop(),c.fbPage=d("WAWebBaseModel").prop(),c.igProfessional=d("WAWebBaseModel").prop(),c.isProfileLinked=d("WAWebBaseModel").prop(),c.directConnection=d("WAWebBaseModel").prop(),c.customUrlPath=d("WAWebBaseModel").prop(),c.isProfileLocked=d("WAWebBaseModel").prop(!0),c.customUrl=d("WAWebBaseModel").derived(function(){var a;if(this.customUrlPath!=null)a=this.customUrlPath;else return null;return""+h+a},["customUrlPath"]),c.coverPhoto=d("WAWebBaseModel").prop(),c.automatedType=d("WAWebBaseModel").prop(d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN),c.welcomeMsgProtocolMode=d("WAWebBaseModel").prop(d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.NONE),c.prompts=d("WAWebBaseModel").prop(),c.commandsDescription=d("WAWebBaseModel").prop(),c.commands=d("WAWebBaseModel").prop(),c.stale=d("WAWebBaseModel").session(!0),c.isBizBot3p=d("WAWebBaseModel").derived(function(){return this.automatedType===d("WAWebBotTypes").BizBotAutomatedType.FULL_3P},["automatedType"]),c.isBizBot1p=d("WAWebBaseModel").derived(function(){return this.automatedType===d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P},["automatedType"]),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.initialize=function(){var b=this;a.prototype.initialize.call(this);this.listenTo(this,"change:automatedType",function(){b.$BusinessProfileImpl1(),b.$BusinessProfileImpl2()});this.$BusinessProfileImpl1();this.$BusinessProfileImpl2()};e.markStale=function(){this.stale=!0,this.hasObservers()&&this.getCollection().find(this.id)};e.getCollection=function(){return b("WAWebBusinessProfileCollection").BusinessProfileCollection};e.isValid=function(){return Array.isArray(this.categories)};e.isBusinessDirectConnection=function(){var a;return(a=(a=(a=this.directConnection)==null?void 0:a.enabled)!=null?a:(a=this.profileOptions)==null?void 0:a.directConnection)!=null?a:!1};e.$BusinessProfileImpl2=function(){if(!d("WAWebBotGating").isBizBot3pEnabled()||!this.isBizBot3p)return;var a=b("WAWebContactCollection").ContactCollection.get(this.id);a==null?void 0:a.updateName()};e.$BusinessProfileImpl1=function(){var a=b("WAWebChatCollection").ChatCollection;a=a.get(this.id);a&&d("WAWebChatGroupUtils").updateCanSend(a,this)};return c}(d("WAWebBaseModel").BaseModel);e.Proxy="businessProfile";e.idClass=c("WAWebWid");f=d("WAWebBaseModel").defineModel(e);c={description:null,email:null,website:null,latitude:null,longitude:null};g.BUSINESS_URL_DOMAIN=h;g.MAX_BUSINESS_CATEGORIES=a;g.BusinessProfile=f;g.DEFAULTS=c}),98);
__d("WAWebSmbUtilsTimeUtils",["WAWeb-moment","WAWebClock"],(function(a,b,c,d,e,f,g){b="h:mm A";e="h:mmA";f="H:mm";var h="H.mm",i="HH:mm",j="HH.mm",k=[b,e,i,j,f,h];b=function(a){var b;a=a.trim();if(!a)return;for(var d=0;d<k.length;d++){var e=k[d];e=c("WAWeb-moment")(a,e,!0);if(e.isValid()){b=e;break}}if(!b)return;e=b;d=c("WAWeb-moment")().startOf("day");a=e.diff(d);return c("WAWeb-moment").duration(a).asMinutes()};function a(a){return c("WAWeb-moment").utc().startOf("day").add(a,"minutes").format(d("WAWebClock").Clock.timestampStrFormat())}g.timeStringToMinutes=b;g.minutesToTime=a}),98);
__d("WAWebSmbUtils",["fbt","WAWeb-moment","WAWebBusinessProfileTypes","WAWebSmbUtilsTimeUtils"],(function(a,b,c,d,e,f,g,h){function i(a){return c("WAWeb-moment").weekdays(a)}function j(a,b){b===void 0&&(b=!1);switch(a==null?void 0:a.mode){case d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return b?l(a==null?void 0:a.hours):k(a==null?void 0:a.hours);case d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return h._("__JHASH__oKZd6YDl9yc__JHASH__");case d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.OPEN_24H:return h._("__JHASH__mLVS1QrzI2k__JHASH__");default:return h._("__JHASH__UAmb-1u2vgf__JHASH__")}}function k(a){return a?a.map(function(a){return a.map(d("WAWebSmbUtilsTimeUtils").minutesToTime).join(" - ")}).join("\n"):""}function l(a){if((a==null?void 0:a.length)===1)return a[0].map(d("WAWebSmbUtilsTimeUtils").minutesToTime).join(" - ");else if((a==null?void 0:a.length)===2){var b,c=(b=d("WAWebSmbUtilsTimeUtils")).minutesToTime(a[0][0]),e=b.minutesToTime(a[0][1]),f=b.minutesToTime(a[1][0]);b=b.minutesToTime(a[1][1]);return h._("__JHASH__GLewW-rj0jO__JHASH__",[h._param("openTime",c),h._param("closeTime",e),h._param("additionalOpenTime",f),h._param("additionalCloseTime",b)])}return""}function a(a){a=encodeURIComponent(a);return"https://l.wl.co/l?u="+a}function b(a,b){b===void 0&&(b=!1);var c=a.config,e=new Date().getDay();a=d("WAWebBusinessProfileTypes").DAYS_OF_WEEK.map(function(a,f){a=(e+f)%d("WAWebBusinessProfileTypes").DAYS_OF_WEEK.length;var g=d("WAWebBusinessProfileTypes").DAYS_OF_WEEK[a];a=i(a);g=j(c[g],b).toString();return{day:a,hours:g,first:f===0}});return a}function e(a){var b=a==null?{}:a.config;a=a||{};var e=a.note;a=a.timezone;var f,g=d("WAWebBusinessProfileTypes").DAYS_OF_WEEK.map(function(a,c){var e=b[a],g=!e;c=i(c);var h;e&&(f=e.mode,e.hours&&(h=e.hours.map(function(a){var b=a[0];a=a[1];return[d("WAWebSmbUtilsTimeUtils").minutesToTime(b),d("WAWebSmbUtilsTimeUtils").minutesToTime(a)]})));return{dayName:c,dayKey:a,closed:g,hours:h}}),h=c("WAWeb-moment").weekdays(!0,0);h=c("WAWeb-moment").weekdays().indexOf(h);h=g.splice(h);h=[].concat(h,g);return{mode:f,days:h,timezone:a,note:e}}g.getWebsiteLink=a;g.getBusinessHours=b;g.getBusinessHoursForEdit=e}),226);
__d("WAWebBusinessProfileUtils",["fbt","WALogger","WAUpperFirst","WAWebBotTypes","WAWebBusinessProfileModel","WAWebBusinessProfileTypes","WAWebCatalogCollection","WAWebContactCollection","WAWebMiscBrowserUtils","WAWebServerPropsModel","WAWebSmbUtils"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:BusinessProfile:missing catalog"]);i=function(){return a};return a}var j="catalog_exists",k="https://business.facebook.com/commerce_manager/",l=function(a){var b=a.config;a=a.timezone;var c={};b.forEach(function(a){var b=a.day_of_week,e=a.mode;if(e===d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.SPECIFIC_HOURS){var f=a.open_time;a=a.close_time;c[b]||(c[b]={mode:e,hours:[]});f!=null&&a!=null&&c[b].hours&&c[b].hours.push([f,a])}else c[b]={mode:e}});return{config:c,timezone:a}},m=function(a){var b;return(a==null?void 0:(b=a.profile_options)==null?void 0:b.commerce_experience)===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.CATALOG||(a==null?void 0:a.catalog_status)===j};b=function(a){if(a&&a instanceof d("WAWebBusinessProfileModel").BusinessProfile){var b;return((b=a.profileOptions)==null?void 0:b.commerceExperience)===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.CATALOG||a.catalogStatus===j}return m(a)};var n=function(a){var b;return(a==null?void 0:(b=a.profileOptions)==null?void 0:b.commerceExperience)===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.SHOP&&Boolean(a==null?void 0:(b=a.profileOptions)==null?void 0:b.shopURL)};e=function(a){var b;return(a==null?void 0:(b=a.profileOptions)==null?void 0:b.commerceExperience)===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.NONE||n(a)&&!!(a==null?void 0:(b=a.profileOptions)==null?void 0:b.isBanned)};var o=function(a){var b;return(a==null?void 0:(b=a.profile_options)==null?void 0:b.commerce_experience)===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.SHOP&&Boolean(a==null?void 0:(b=a.profile_options)==null?void 0:b.shop_url)};f=function(a){a=a==null?void 0:(a=a.profileOptions)==null?void 0:a.shopURL;a!=null&&a!==""&&c("WAWebMiscBrowserUtils").open(a)};var p=function(a){a=a==null?void 0:(a=a.profileOptions)==null?void 0:a.commerceManagerURL;a=a!=null&&a!==""?a:k;c("WAWebMiscBrowserUtils").open(a)},q=function(a){return m(a)||d("WAWebServerPropsModel").ServerProps.shopsProductGrid&&o(a)},r=function(a){var b=a.email,c=a.landline_number;a=a.mobile_number;b={email:b};c&&(b.landlineNumber=c);a&&(b.mobileNumber=a);return b},s=function(a){var b=a.email,c=a.landline_number;a=a.mobile_number;return r({email:b,landline_number:c,mobile_number:a})},t=function(a){var b=a.name,c=a.email,d=a.landline_number;a=a.mobile_number;c=r({email:c,landline_number:d,mobile_number:a});c.name=b;return c},u=function(a){var b=a.entity_name,c=a.entity_type,d=a.is_registered,e=a.entity_type_custom,f=a.customer_care_details;a=a.grievance_officer_details;b={entityName:b,entityType:c,isRegistered:d};e&&(b.entityTypeCustom=e);f&&(b.customerCareDetails=s(f));a&&(b.grievanceOfficerDetails=t(a));return b},v=function(a){var b=a.profile,c=a.id;a=a.queryCatalog;if(!b)return{id:c};var e=b.business_hours,f=b.catalog_status,g=b.structured_address,h=b.profile_options,j=b.address,k=b.legal_entity_details,m=b.fb_page,n=b.ig_professional,o=b.profile_is_linked,p=b.cover_photo,r=b.custom_url,s=b.automated_type,t=b.commands_description,v=b.welcome_message_protocol_mode,w=b.prompts,x=b.commands,y=babelHelpers.objectWithoutPropertiesLoose(b,["business_hours","catalog_status","structured_address","profile_options","address","legal_entity_details","fb_page","ig_professional","profile_is_linked","cover_photo","custom_url","automated_type","commands_description","welcome_message_protocol_mode","prompts","commands"]),z={};e?z.businessHours=l(e):z.businessHours=null;h&&(z.profileOptions={},z.profileOptions.commerceExperience=h.commerce_experience,z.profileOptions.cartEnabled=h.cart_enabled,z.profileOptions.directConnection=h.direct_connection,h.shop_url!=null&&(z.profileOptions.shopURL=h.shop_url),h.commerce_manager_url!=null&&(z.profileOptions.commerceManagerURL=h.commerce_manager_url),h.is_banned!=null&&(z.profileOptions.isBanned=h.is_banned),h.is_profile_edit_disabled!=null&&(z.profileOptions.isProfileEditDisabled=h.is_profile_edit_disabled));q(b)&&(z.catalogStatus=f,a&&d("WAWebCatalogCollection").CatalogCollection.findCarouselCatalog(c).then(function(a){a=Array.isArray(a)?a[0]:a;var b=d("WAWebContactCollection").ContactCollection.get(c);b&&(b.businessCatalog=a)})["catch"](function(a){return d("WALogger").WARN(i()).devConsole(a)}));g?z.structuredAddress={streetAddress:g.street_address,cityId:g.city_id,localizedCityName:g.localized_city_name,zipCode:g.zip_code}:z.address=j||null;k&&(z.legalEntityDetails=u(k));m&&(z.fbPage={displayName:m.display_name,likes:m.likes,id:m.id});n&&(z.igProfessional={handle:n.ig_handle,followers:n.followers});o!=null&&(z.isProfileLinked=!!o);r!=null&&(z.customUrlPath=r);z.automatedType=(e=s)!=null?e:d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN;z.welcomeMsgProtocolMode=(h=v)!=null?h:d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.NONE;z.commandsDescription=(b=t)!=null?b:null;z.prompts=(f=w)!=null?f:null;z.commands=(a=x)!=null?a:null;z.coverPhoto=p!=null?{id:p.id,url:p.url}:null;return babelHelpers["extends"]({},d("WAWebBusinessProfileModel").DEFAULTS,y,z,{id:c})},w=function(a){var b;return a.address!=null&&a.description!=null&&((b=a.businessHours)==null?void 0:b.config)!=null&&Object.keys(a.businessHours.config).length!==0&&a.email!=null&&((b=a.website)==null?void 0:b.length)!==0},x={OPEN:"open",CLOSED:"closed",OPEN_TODAY:"open_today",CLOSED_TODAY:"closed_today",OPEN_APPOINTMENT:"open_appointment",OPEN_24H:"open_24h",UNKNOWN:"unknown"};function y(a,b){if(a.timezone==null)return{status:"unknown"};b=b||new Date();var c=new Date(b.toLocaleString("en-US",{timeZone:a.timezone}));c=(b.getTime()-c.getTime())/1e3/60;a=a.config[d("WAWebBusinessProfileTypes").DAYS_OF_WEEK[b.getDay()]];if(!a)return{status:x.CLOSED_TODAY};var e=a.mode;switch(e){case d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.OPEN_24H:if(a)return{status:x.OPEN_24H};break;case d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:if(a)return{status:x.OPEN_APPOINTMENT};break;case d("WAWebBusinessProfileTypes").BUSINESS_HOUR_MODES.SPECIFIC_HOURS:e=b.getHours()*60+b.getMinutes();if(((b=a.hours)==null?void 0:b.length)===1){b=a.hours[0][0];var f=a.hours[0][1];if(e>=b&&e<=f)return{status:x.OPEN,openUntil:z(c+f)};else if(e<=b)return{status:x.CLOSED,opensAt:z(c+b)};return{status:x.CLOSED}}else if(((f=a.hours)==null?void 0:f.length)===2){b=a.hours[0][0];f=a.hours[0][1];var g=a.hours[1][0];a=a.hours[1][1];if(e>=b&&e<=f)return{status:x.OPEN,openUntil:z(c+f),additionalOpen:z(c+g),additionalClose:z(c+a)};else if(e<b)return{status:x.CLOSED,opensAt:z(c+b),additionalOpen:z(c+g),additionalClose:z(c+a)};else if(e>=g&&e<=a)return{status:x.OPEN,openUntil:z(c+a)};else if(e<g)return{status:x.CLOSED,opensAt:z(c+g)};return{status:x.CLOSED}}break}return{status:"unknown"}}function z(a){var b=new Date(),c=Math.floor(a/60);b.setHours(c);b.setMinutes(a%60);b.setSeconds(0);return b}function A(a){a=y(a);switch(a.status){case x.OPEN_24H:case x.OPEN_APPOINTMENT:case x.OPEN:return!0;case x.CLOSED:case x.CLOSED_TODAY:default:return!1}}function a(a){var b=A(a)?h._("__JHASH__YN0rcyqz28Q__JHASH__"):h._("__JHASH__s4SILnrE-g0__JHASH__"),e=h._("__JHASH__pv_Z4S4PRUc__JHASH__");a=d("WAWebSmbUtils").getBusinessHours(a,!0);a=a.map(function(a){return c("WAUpperFirst")(a.day)+": "+a.hours}).join("\n");return[b,e,a].join("\n")}g.CATALOG_EXISTS=j;g.hasCatalog=b;g.hasShop=n;g.isShopBanned=e;g.goToShop=f;g.goToCommerceManager=p;g.parseBusinessProfile=v;g.isCompleteBizProfile=w;g.BUSINESS_OPEN_STATUS=x;g.getBusinessOpenState=y;g.quickReplyHoursStr=a}),226);
__d("WAWebButtonCollection",["WAWebBaseCollection","WAWebButtonModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebButtonModel");g.ButtonCollection=a}),98);
__d("WAWebChatProductMsgsCollection",["Promise","WAWebBaseCollection","WAWebFrontendMsgGetters","WAWebMsgModel"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.hasProductBefore=!0,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e["delete"]=function(){a.prototype["delete"].call(this),this.stopListening(),this.reset()};e.queryProducts=function(a,c){c=a.msgs;this.hasProductBefore=!1;a=c.filter(function(a){return d("WAWebFrontendMsgGetters").getAsProduct(a)!=null});a.length===0?this.trigger("products_loaded"):this.add(a,{at:0});return(h||(h=b("Promise"))).resolve()};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;a.comparator=function(a,b){return a.t-b.t};g["default"]=a}),98);
__d("WAWebMsgButtonReplyMsgModel",["WAWebBaseModel","WAWebMsgKey"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.unsyncedButtonReplies=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="msgButtonReplyMsg";a.idClass=c("WAWebMsgKey");b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebMsgButtonReplyMsgCollection",["WAWebBaseCollection","WAWebMsgButtonReplyMsgModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebMsgButtonReplyMsgModel");g["default"]=a}),98);
__d("WAWebTemplateButtonCollection",["WAWebBaseCollection","WAWebTemplateButtonModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebTemplateButtonModel");a.comparator=function(a,b){if(a.id<b.id)return-1;return a.id>b.id?1:0};g.TemplateButtonCollection=a}),98);
__d("WAWebTemplateButtonReplyMsgCollection",["WAWebBaseCollection","WAWebMsgModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;a.comparator=function(a,b){return b.t-a.t};g["default"]=a}),98);
__d("WAWebAgentCollection",["WASyncdOrphan","WAWebAgentModel","WAWebAgentModelUtils","WAWebBaseCollection","WAWebConnModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$AgentCollectionImpl1=new Map();b.triggerDeviceIdMapUpdate=function(){b.$AgentCollectionImpl1=new Map(),b.getModelsArray().forEach(function(a){b.$AgentCollectionImpl1.set(a.deviceId,a)})};b.on("remove reset",b.triggerDeviceIdMapUpdate);d("WAWebConnModel").Conn.on("change:pushname",function(){var a=b.getModelsArray().filter(function(a){return a.deviceId===d("WAWebAgentModelUtils").PRIMARY_DEVICE_ID})[0];a!=null&&a.set("name",d("WAWebAgentModelUtils").getFormattedAgentNameForAgent(a))});return b}var c=b.prototype;c.add=function(b,c){b=a.prototype.add.call(this,b,c);this.triggerDeviceIdMapUpdate();d("WASyncdOrphan").checkOrphanAgents(b.map(function(a){return(a=a==null?void 0:a.id)!=null?a:""}));return b};c.getByDeviceId=function(a){return this.$AgentCollectionImpl1.get(a)};c.initializeFromCache=function(a){this.add(a,{merge:!0})};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebAgentModel").Agent;b=new a();g.AgentCollection=b}),98);
__d("WAWebAgentModel",["WAWebAgentCollection","WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.deviceId=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.isDeleted=d("WAWebBaseModel").prop(!1),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebAgentCollection").AgentCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="agent";c=d("WAWebBaseModel").defineModel(a);g.Agent=c}),98);
__d("WAWebAgentModelUtils",["fbt","WAWebBizGatingUtils","WAWebConnModel","WAWebPremiumAccessEngine"],(function(a,b,c,d,e,f,g,h){function i(){return h._("__JHASH__DTkdtzMVqEu__JHASH__",[h._param("business-name",d("WAWebConnModel").Conn.pushname)])}function a(){return d("WAWebBizGatingUtils").isMultiDeviceMessageAttributionEnabled()&&d("WAWebPremiumAccessEngine").isFeatureFlagEnabled("MD_EXTENSION")}var j=0;function k(a,b){return b===j?i().toString():a}function b(a){return k(a.name,a.deviceId)}g.canUserSeeMessageAttribution=a;g.PRIMARY_DEVICE_ID=j;g.getFormattedAgentName=k;g.getFormattedAgentNameForAgent=b}),226);
__d("WAWebUnattributedMessageCollection",["WAWebBaseCachePolicy","WAWebBaseCollection","WAWebUnattributedMessageModel","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebUnattributedMessageModel").UnattributedMessage;a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.UNATTRIBUTED_MESSAGE_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:1e3};b=new a();g.UnattributedMessageCollection=b}),98);
__d("WAWebUnattributedMessageModel",["WAWebBaseModel","WAWebUnattributedMessageCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.deviceId=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebUnattributedMessageCollection").UnattributedMessageCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="unattributed_message";c=d("WAWebBaseModel").defineModel(a);g.UnattributedMessage=c}),98);
__d("WAWebPremiumAccessEngine",["Promise","WALogger","WAWebBizGatingUtils","WAWebInitFromStorage","WAWebSubscriptionCollection","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PremiumAccessEngine: error calling handler during initialize for feature ",", error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PremiumAccessEngine: config has no keys"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PremiumAccessEngine: invalid config for key ",", value is empty array"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PremiumAccessEngine: invalid config for key ",", value is not an array"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["PremiumAccessEngine: error calling handler for feature ",", error ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(['isFeatureFlagEnabled: trying to read feature "','" before PremiumAccessEngine has been initialized, error ',""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["PremiumAccessEngine: error calling handler during listen for feature ",", error ",""]);o=function(){return a};return a}var p="{}";c("gkx")("26258")||(p='{"CUSTOM_URL": ["WA_PREMIUM_1"], "MD_EXTENSION": ["WA_PREMIUM_1"]}');var q=new Map(),r=new Map(),s=!1,t=null;function a(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=p);if(s)return;if(d("WAWebBizGatingUtils").isSmbOrangeEnabled()){var c=b("WAWebInitFromStorage");c=c.restoreSubscriptions;yield c();t=A(a);c=z();c.forEach(function(a,b){r.set(b,{subscription:a[0].clone(),hasChanged:!1})});s=!0;yield (h||(h=b("Promise"))).resolve();q.forEach(function(a,b){var c=r.get(b);a.forEach(function(a){try{a((c==null?void 0:c.subscription)||null,(c==null?void 0:c.hasChanged)||!1)}catch(a){d("WALogger").ERROR(i(),b,a).sendLogs("PremiumAccessEngine")}})})}});return u.apply(this,arguments)}function e(a,c){if(!d("WAWebBizGatingUtils").isSmbOrangeEnabled()){(h||(h=b("Promise"))).resolve().then(function(){return c(null,!1)});return function(){return void 0}}var e=q.get(a);e||(e=new Set(),q.set(a,e));e.add(c);s&&(h||(h=b("Promise"))).resolve().then(function(){var b=r.get(a);try{c((b==null?void 0:b.subscription)||null,(b==null?void 0:b.hasChanged)||!1)}catch(b){d("WALogger").ERROR(o(),a,b).sendLogs("PremiumAccessEngine")}});return function(){var b=q.get(a);b&&b["delete"](c)}}function v(a){if(!d("WAWebBizGatingUtils").isSmbOrangeEnabled())return null;if(!s)throw c("err")("Premium access engine getFeatureFlagState() for feature "+a+" called before initialize()");return(a=(a=r.get(a))==null?void 0:a.subscription)!=null?a:null}function w(a){var b;try{b=v(a)}catch(b){d("WALogger").ERROR(n(),a,b).sendLogs("isFeatureFlagEnabled")}return b==null?!1:!b.isDeactivated||!1}function f(a){return!s?!1:w(a)}function x(){if(d("WAWebBizGatingUtils").isSmbOrangeEnabled()){if(!s)throw c("err")("Premium access engine update() called before initialize()");var a=z(),b=new Set();r.forEach(function(c,d){if(!a.has(d))c.hasChanged=!0,c.subscription=null,y(d),b.add(d);else{var e,f;e=(e=a.get(d))==null?void 0:e[0];!((f=c.subscription)==null?void 0:f.equal(e))?(c.hasChanged=!0,c.subscription=e==null?void 0:e.clone(),y(d)):c.hasChanged&&(c.hasChanged=!1,y(d))}});a.forEach(function(a,b){r.has(b)||(r.set(b,{hasChanged:!0,subscription:a[0].clone()}),y(b))});b.forEach(function(a){return r["delete"](a)})}}function y(a){var c=q.get(a),e=r.get(a);c&&e&&c.forEach(function(c){(h||(h=b("Promise"))).resolve().then(function(){c(e.subscription,e.hasChanged)})["catch"](function(b){d("WALogger").ERROR(m(),a,b).sendLogs("PremiumAccessEngine")})})}function z(){var a=new Map();t&&Object.entries(t).forEach(function(b){var c=b[0];b=b[1];if(c!=="MD_EXTENSION"&&c!=="CUSTOM_URL")return;b=b.map(function(a){return d("WAWebSubscriptionCollection").SubscriptionCollection.get(a)}).filter(Boolean);b.length>0&&(b.length>1&&B(b),a.set(c,b))});return a}function A(a){var b=!1,c=JSON.parse(a);a=Object.keys(c);a.length>0?a.forEach(function(a){var e=c[a];Array.isArray(e)||(b=!0,d("WALogger").ERROR(l(),a).sendLogs("PremiumAccessEngine"));e.length===0&&(b=!0,d("WALogger").ERROR(k(),a).sendLogs("PremiumAccessEngine"))}):(d("WALogger").DEV(j()),b=!0);return b?null:c}function B(a){a.sort(function(a,b){if(a.isDeactivated&&!b.isDeactivated)return 1;if(!a.isDeactivated&&b.isDeactivated)return-1;if(a.isDeactivated&&b.isDeactivated)return 0;if(a.isAutoRenewing&&!b.isAutoRenewing)return-1;if(b.isAutoRenewing&&!a.isAutoRenewing)return 1;return!a.isAutoRenewing&&!b.isAutoRenewing?(b.expirationDate||0)-(a.expirationDate||0):0})}g.initialize=a;g.listen=e;g.getFeatureFlagState=v;g.isFeatureFlagEnabled=w;g.isInitializedAndFeatureFlagEnabled=f;g.update=x}),98);
__d("WAWebSubscriptionModel",["WAWebBaseModel","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.isDeactivated=d("WAWebBaseModel").prop(!1),c.isAutoRenewing=d("WAWebBaseModel").prop(!1),c.expirationDate=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.equal=function(a){return!a?!1:a.id===this.id&&a.isAutoRenewing===this.isAutoRenewing&&a.isDeactivated===this.isDeactivated&&a.expirationDate===this.expirationDate};e.clone=function(){var a=c("lodash").clone(this);return a};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="subscription";b=d("WAWebBaseModel").defineModel(a);g.Subscription=b}),98);
__d("WAWebSubscriptionCollection",["WAWebBaseCollection","WAWebSubscriptionModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.initializeFromCache=function(a){this.add(a,{merge:!0})};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebSubscriptionModel").Subscription;b=new a();g.SubscriptionCollection=b}),98);
__d("WAWebCartCollection",["WALogger","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebCartModel","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while restoring carts from cache, ",""]);h=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.imageWidth=100;d.imageHeight=100;b!=null&&(d.imageWidth=b);c!=null&&(d.imageHeight=c);return d}var e=b.prototype;e.initializeFromCache=function(a){var b=this;try{a=a||[];a.forEach(function(a){var d=new(c("WAWebCartModel"))({id:a.id,itemCount:a.itemCount,total:a.total,currency:a.currency,message:a.message});d.cartItemCollection.add(a.products);b.add(d,{merge:!0})})}catch(a){d("WALogger").WARN(h(),String(a))}};e.findCart=function(a){return this.gadd(a)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebCartModel");a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.CART_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:2e3};b=new a();g.CartCollectionImpl=a;g.CartCollection=b}),98);
__d("WAWebCartItemCollection",["WAWebBaseCollection","WAWebCartItemModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebCartItemModel").CartItem;g.CartItemCollection=a}),98);
__d("WAWebCartItemModel",["WAWebBaseModel","WAWebCartCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.priceAmount1000=d("WAWebBaseModel").prop(),c.currency=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.quantity=d("WAWebBaseModel").prop(),c.imageHash=d("WAWebBaseModel").prop(),c.imageCdnUrl=d("WAWebBaseModel").prop(),c.maxAvailable=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebCartCollection").CartCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="cart-item";c=d("WAWebBaseModel").defineModel(a);g.CartItem=c}),98);
__d("WAWebCartModel",["WAWebBaseModel","WAWebCartCollection","WAWebCartItemCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.products=d("WAWebBaseModel").prop(),c.itemCount=d("WAWebBaseModel").prop(),c.total=d("WAWebBaseModel").prop(),c.currency=d("WAWebBaseModel").prop(),c.message=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.countTotals=function(){var a=this.cartItemCollection.reduce(function(a,b){a.currency.add(b.currency);return{itemCount:a.itemCount+b.quantity,total:a.total+b.quantity*((b=b.priceAmount1000)!=null?b:0),currency:a.currency}},{itemCount:0,total:0,currency:new Set()}),b=a.currency.size===1;b={itemCount:a.itemCount,total:b?a.total:null,currency:b?a.currency.values().next().value:null};this.set(b,{silent:!0})};e.initialize=function(){a.prototype.initialize.call(this),this.cartItemCollection=new(d("WAWebCartItemCollection").CartItemCollection)(),this.listenTo(this,"change:cartItemCollection",this.countTotals)};e.getCollection=function(){return b("WAWebCartCollection").CartCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="cart";c=d("WAWebBaseModel").defineModel(a);g["default"]=c}),98);
__d("WAWebAssignedAgentsCollection",["WAWebAgentModel","WAWebBaseCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebAgentModel").Agent;g.AssignedAgentsCollection=a}),98);
__d("WAWebChatAssignmentCollection",["WALogger","WAWebAgentCollection","WAWebAssignedAgentsCollection","WAWebBaseCollection","WAWebChatAssignmentModel","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_assignment_collection:_handleAdd failed"]);h=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$ChatAssignmentCollectionImpl1=new Map();b.$ChatAssignmentCollectionImpl2=new Map();b.$ChatAssignmentCollectionImpl3=[];b.listenTo(babelHelpers.assertThisInitialized(b),"add",b.$ChatAssignmentCollectionImpl4);b.listenTo(babelHelpers.assertThisInitialized(b),"remove",b.$ChatAssignmentCollectionImpl5);b.listenTo(babelHelpers.assertThisInitialized(b),"change",b.$ChatAssignmentCollectionImpl6);b.listenTo(d("WAWebAgentCollection").AgentCollection,"add",b.$ChatAssignmentCollectionImpl7);return b}var c=b.prototype;c.$ChatAssignmentCollectionImpl4=function(a){this.$ChatAssignmentCollectionImpl1.set(a.chatId,!a.chatOpenedByAgent);var b=this.getAgentCollectionForChatId(d("WAWebWidFactory").createWid(a.chatId));if(a.agent==null){var c=d("WAWebAgentCollection").AgentCollection.get(a.agentId);c!=null?a.agent=c:d("WALogger").WARN(h()).sendLogs("chat_assignment_collection:_handleAdd: attempted to add assignment without agent")}a.agent!=null&&b.add(a.agent)};c.$ChatAssignmentCollectionImpl5=function(a){var b=this.$ChatAssignmentCollectionImpl2.get(a.chatId);b&&b.remove(a.agent);this.$ChatAssignmentCollectionImpl1["delete"](a.chatId)};c.$ChatAssignmentCollectionImpl6=function(a){this.$ChatAssignmentCollectionImpl1.set(a.chatId,!a.chatOpenedByAgent),this.getAgentCollectionForChatId(d("WAWebWidFactory").createWid(a.chatId)).trigger("change",[])};c.$ChatAssignmentCollectionImpl7=function(a){var b=this.$ChatAssignmentCollectionImpl3.filter(function(b){return b.agentId===a.id});this.processChatAssignments(b)};c.processChatAssignments=function(a){var b=this,c=[];a.forEach(function(a){var e,f=d("WAWebAgentCollection").AgentCollection.get(a.agentId);if(((e=b.get(a.id))==null?void 0:e.agent.id)===a.agentId){(e=b.get(a.id))==null?void 0:e.set({chatOpenedByAgent:a.chatOpenedByAgent})}else f&&!f.isDeleted?c.push(new(d("WAWebChatAssignmentModel").ChatAssignment)({id:a.id,chatId:a.chatId,chatOpenedByAgent:a.chatOpenedByAgent,agent:f})):b.$ChatAssignmentCollectionImpl3.push(a)});this.add(c,{merge:!0})};c.getChatUnopenedStatus=function(a){return!!this.$ChatAssignmentCollectionImpl1.get(a.toString({legacy:!0}))};c.reset=function(){this.$ChatAssignmentCollectionImpl2.forEach(function(a){a.reset()}),a.prototype.reset.call(this)};c.getAgentCollectionForChatId=function(a){var b=this.$ChatAssignmentCollectionImpl2.get(a.toString({legacy:!0}));b||(b=new(d("WAWebAssignedAgentsCollection").AssignedAgentsCollection)(),this.$ChatAssignmentCollectionImpl2.set(a.toString({legacy:!0}),b));return b};c.initializeFromCache=function(a){this.processChatAssignments(a)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebChatAssignmentModel").ChatAssignment;b=new a();g.ChatAssignmentCollection=b}),98);
__d("WAWebChatAssignmentModel",["WAWebBaseModel","WAWebChatAssignmentCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.chatId=d("WAWebBaseModel").prop(),c.agent=d("WAWebBaseModel").prop(),c.agentId=d("WAWebBaseModel").prop(),c.chatOpenedByAgent=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebChatAssignmentCollection").ChatAssignmentCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="chat_assignment";c=d("WAWebBaseModel").defineModel(a);g.ChatAssignment=c}),98);
__d("WAWebChatAssignmentUtils",["WAWebBizGatingUtils","WAWebPremiumAccessEngine"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebBizGatingUtils").chatAssignmentEnabled()&&d("WAWebPremiumAccessEngine").isInitializedAndFeatureFlagEnabled("MD_EXTENSION")}g.canAssignChats=a}),98);
__d("WAWebLabelCollection",["fbt","WALogger","WAWebActionToast.react","WAWebBaseCollection","WAWebBizLabelItemParentType","WAWebBizLabelUtils","WAWebEditLabelAssociationBridge","WAWebL10N","WAWebLabelModel","WAWebLabelUtils","WAWebSchemaLabelAssociation","WAWebToastManager","lodash","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["addingNewLabel dropped"]);j=function(){return a};return a}var k=i||c("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.listenTo(babelHelpers.assertThisInitialized(b),"remove",b._handleRemove);return b}var e=b.prototype;e.initializeAssociationsFromCache=function(a){a.forEach(function(a){var b=a.labelId,c=a.associationId;a=a.type;d("WAWebBizLabelUtils").addToLabelCollection(c,[b],a===d("WAWebSchemaLabelAssociation").LabelAssociationType.Jid?d("WAWebBizLabelItemParentType").LabelItemParentType.Chat:d("WAWebBizLabelItemParentType").LabelItemParentType.Msg)})};e.removeAllLabelsMD=function(a){return this.addOrRemoveLabelsMD((a.labels||[]).map(function(a){return{type:"remove",id:a}}),[a])};e.addOrRemoveLabelsMD=function(a,b){a.forEach(function(a){var c=a.id,e=a.type;b.forEach(function(a){var b=d("WAWebBizLabelUtils").getParentTypeFromModel(a);a=a.id.toString();e==="add"?d("WAWebBizLabelUtils").addToLabelCollection(a,[c],b):d("WAWebBizLabelUtils").removeLabelFromCollection(a,c,b)})})};e.addOrRemoveLabels=function(a,b){var e=this,f=d("WAWebActionToast.react").genId(),g=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__GQS0v2O6esz__JHASH__",[h._plural(a.length),h._param("count",a.length)])),i=d("WAWebEditLabelAssociationBridge").editLabelAssociation(a,b).then(function(){e.addOrRemoveLabelsMD(a,b)}).then(function(){return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__R7p0mMeCHem__JHASH__",[h._plural(a.length),h._param("count",c("WAWebL10N").n(a.length))]))})["catch"](function(b){d("WALogger").WARN(j()).devConsole(b);return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__QV9X4H4eKfo__JHASH__",[h._plural(a.length)]))});d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebActionToast.react").ActionToast,{id:f,initialAction:g,pendingAction:i}))};e._handleRemove=function(a){a=a.labelItemCollection;a.toArray().forEach(function(a){var b=a.parentId,e=a.parentType,f=a.labelId;a=d("WAWebBizLabelUtils").getParentCollection(e).get(b);a&&(a.labels=c("lodash").remove(a.labels,function(a){return a!==f}))})};e.getLabelsForModel=function(a,b){return this.filter(function(c){return c.labelItemCollection.get(d("WAWebBizLabelUtils").createLabelItemId(a,c.id,b))}).map(function(a){return a.id})};e.getNextAvailableColor=function(){var a=d("WAWebLabelUtils").getAllLabelColors(),b=this.map(function(a){return a.colorIndex}).sort(function(a,b){return Number(a)-Number(b)});if(b.length===0)return 0;b=b.findIndex(function(a,b){return a!==b});return b>=0?b:Math.floor(Math.random()*a.length)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebLabelModel").Label;a.staleCollection=!0;b=new a();g.LabelCollectionImpl=a;g.LabelCollection=b}),226);
__d("WAWebLabelItemModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.parentType=d("WAWebBaseModel").prop(),c.parentId=d("WAWebBaseModel").prop(),c.labelId=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="labelItem";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebLabelItemCollection",["WAWebBaseCollection","WAWebBizLabelUtils","WAWebLabelItemModel","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.listenTo(babelHelpers.assertThisInitialized(b),"add",b.$LabelItemCollection1);b.listenTo(babelHelpers.assertThisInitialized(b),"remove",b.$LabelItemCollection2);return b}var e=b.prototype;e.$LabelItemCollection1=function(a){this.$LabelItemCollection3(a,!0)};e.$LabelItemCollection2=function(a){this.$LabelItemCollection3(a,!1)};e.$LabelItemCollection3=function(a,b){var e=d("WAWebBizLabelUtils").getParentCollection(a.parentType).get(a.parentId);if(!e)return;var f=e.labels||[];b?f.includes(a.labelId)||(e.labels=[a.labelId].concat(f)):e.labels=c("lodash").without(f,a.labelId)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebLabelItemModel");g.LabelItemCollection=a}),98);
__d("WAWebLabelModel",["Promise","WAWebBaseModel","WAWebBizLabelItemParentType","WAWebLabelCollection","WAWebLabelItemCollection"],(function(a,b,c,d,e,f,g){var h;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.colorIndex=d("WAWebBaseModel").prop(),c.color=d("WAWebBaseModel").prop(),c.count=d("WAWebBaseModel").prop(0),c.orderIndex=d("WAWebBaseModel").prop(),c.stale=d("WAWebBaseModel").session(!0),c.predefinedId=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.initialize=function(){a.prototype.initialize.call(this),this.labelItemCollection=new(d("WAWebLabelItemCollection").LabelItemCollection)(),this.$LabelImpl1(),this.listenTo(this,"change:name",this.$LabelImpl1),this.listenTo(this,"change:color",this.$LabelImpl1),this.listenTo(this,"change:colorIndex",this.$LabelImpl1),this.listenTo(this,"change:count",this.$LabelImpl1),this.listenTo(this.labelItemCollection,"add",this.$LabelImpl2),this.listenTo(this.labelItemCollection,"remove",this.$LabelImpl2),this.orderIndex==null&&(this.orderIndex=Number(this.id))};e.findImpl=function(a){return(h||(h=b("Promise"))).resolve({id:a})};e.$LabelImpl1=function(){if(!this.name)return;b("WAWebLabelCollection").LabelCollection.trigger("label_updated_"+this.id)};e.$LabelImpl2=function(){this.count=this.labelItemCollection.filter(function(a){return a.parentType!==d("WAWebBizLabelItemParentType").LabelItemParentType.Contact}).length};return c}(d("WAWebBaseModel").BaseModel);c.Proxy="label";function a(a){a=parseInt(a,10);return"#"+(a>>>0).toString(16).slice(-6)}e=d("WAWebBaseModel").defineModel(c);g.intColorToHex=a;g.Label=e}),98);
__d("WAWebBizOrderGetFriendlyRandomIdAction",[],(function(a,b,c,d,e,f){function a(){var a=typeof BigInt==="function"?BigInt:Number;return a(String(Date.now())+Math.random().toFixed(4).slice(-4)).toString(36).toUpperCase()}f["default"]=a}),66);
__d("WAWebOrderCollection",["Promise","WAWebBaseCollection","WAWebBizOrderAction","WAWebBizOrderGetFriendlyRandomIdAction","WAWebCurrencyUtils","WAWebE2EProtoUtils","WAWebL10NCountryCodes","WAWebOrderModel","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,c){var d;d=a.call(this)||this;d.width=80;d.height=80;b!=null&&(d.width=b);c!=null&&(d.height=c);return d}var f=e.prototype;f.addOrder=function(){var b=c("WAWebBizOrderGetFriendlyRandomIdAction")(),e=d("WAWebUserPrefsMeUser").getMeUser();a.prototype.add.call(this,{id:b,fetchedFromServer:!1,sellerJid:d("WAWebE2EProtoUtils").encodeJid(e),createdAt:Math.round(new Date().getTime()/1e3),currency:d("WAWebCurrencyUtils").currencyForCountryShortcode(d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(e.user)),products:[],tax:null,subtotal:null,total:null});return this.assertGet(b)};f.findOrder=function(a,c,d){var e=this.get(a);return e!=null?(h||(h=b("Promise"))).resolve(e):this.$OrderCollectionImpl1(a,c,d)};f.$OrderCollectionImpl1=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c,e,f){f=(yield d("WAWebBizOrderAction").queryOrder(d("WAWebWidFactory").createWid(e),c,this.width,this.height,f));a.prototype.add.call(this,babelHelpers["extends"]({id:c,fetchedFromServer:!0,sellerJid:e},f));e=this.get(c);if(e!=null)return(h||(h=b("Promise"))).resolve(e)});function e(a,b,d){return c.apply(this,arguments)}return e}();return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebOrderModel");a.staleCollection=!0;e=new a();g.OrderCollectionImpl=a;g.OrderCollection=e}),98);
__d("WAWebOrderItemCollection",["WAWebBaseCollection","WAWebOrderItemModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebOrderItemModel");g.OrderItemCollection=a}),98);
__d("WAWebOrderItemModel",["WAWebBaseModel","WAWebOrderCollection","WAWebOrderItemGetters"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.price=d("WAWebBaseModel").prop(),c.currency=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.quantity=d("WAWebBaseModel").prop(),c.thumbnailId=d("WAWebBaseModel").prop(),c.thumbnailUrl=d("WAWebBaseModel").prop(),c.isCustomItem=d("WAWebBaseModel").prop(),c.isQuantitySet=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebOrderCollection").OrderCollection};e["delete"]=function(){a.prototype["delete"].call(this),d("WAWebOrderItemGetters").clearOrderItemGetterCacheFor(this)};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="order-item";c=d("WAWebBaseModel").defineModel(a);g["default"]=c}),98);
__d("WAWebOrderGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createOrderCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;d=b("products");a=c(function(a){a=a[0];return a.reduce(function(a,b){return a+b.quantity},0)},[d]);g.clearOrderGetterCacheFor=f;g.getProducts=d;g.getTotalItemCount=a}),98);
__d("WAWebOrderModel",["WAWebBaseModel","WAWebOrderCollection","WAWebOrderGetters","WAWebOrderItemCollection","WAWebOrderItemModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.products=d("WAWebBaseModel").prop(),c.itemCount=d("WAWebBaseModel").prop(),c.subtotal=d("WAWebBaseModel").prop(),c.tax=d("WAWebBaseModel").prop(),c.total=d("WAWebBaseModel").prop(),c.currency=d("WAWebBaseModel").prop(),c.createdAt=d("WAWebBaseModel").prop(),c.sellerJid=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this),this.orderItemCollection=new(d("WAWebOrderItemCollection").OrderItemCollection)(),this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()};f.triggerItemCollectionUpdate=function(){this.orderItemCollection.set(this.products.map(function(a){return new(c("WAWebOrderItemModel"))(babelHelpers["extends"]({},a))}),{merge:!0})};f.getCollection=function(){return b("WAWebOrderCollection").OrderCollection};f["delete"]=function(){a.prototype["delete"].call(this),d("WAWebOrderGetters").clearOrderGetterCacheFor(this)};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="order";e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),98);
__d("WAWebProductCatalogLogQplEvents",["WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND,a)}function b(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_VIEW,a)}g.qplPointProductMessageSend=a;g.qplPointCatalogView=b}),98);
__d("WAWebCatalogCollection",["Promise","WALogger","WATypeUtils","WAWebBackendErrors","WAWebBaseCollection","WAWebBizProductCatalogAction","WAWebBizProductCatalogBridge","WAWebCatalogModel","WAWebProductCatalogLogQplEvents","WAWebQplQuickPerformanceLoggerModule","WAWebServerPropsModel","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Catalog data cleanup called on a non-existent catalogId"]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.findQueryImpl=function(a,b){return c._findImplCommon(a,b).then(function(a){return[a]})},c.findImpl=function(a){return c._findImplCommon(a)},b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.addMsgAsProduct=function(b){var c=b.businessOwnerJid&&d("WAWebWidFactory").createWid(b.businessOwnerJid);if(!c)return;var e=this.get(c),f=e&&b.productId&&e.msgProductCollection.get(b.productId);e=e&&b.productId?e.productCollection.get(b.productId):null;if((e==null?void 0:e.t)&&e.t>=b.t)return;if(f==null?void 0:f.fetchedFromServer)return;f=d("WAWebBizProductCatalogBridge").mapMsgToProductModel(b);return a.prototype.add.call(this,{id:c,afterCursor:void 0,_msgs:[f],stale:!0,fetchedFromServer:!!e},{merge:!0})};f._queryProduct=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=e.catalogWid,g=e.productId,i=e.productMsgMediaData,j=e.width,k=e.height,l=e.shouldFetchComplianceFields;e=e.canLogQpl;j=(yield d("WAWebBizProductCatalogAction").queryProduct(f,g,j,k,l,e));if(j.error==="NOT_FOUND"){k=this.get(f);k==null?void 0:k.productCollection.remove(g);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E404)("CatalogCollection:findProduct:_queryProduct NOT_FOUND"))}if(!j.data)return a.prototype.add.call(this,{id:f,afterCursor:void 0});l=j.data;if(!l.image_cdn_urls)return(h||(h=b("Promise"))).reject(c("err")("CatalogCollection:findProduct:_queryProduct: could not find image_cdn_urls for product"));e=d("WAWebBizProductCatalogBridge").mapProductResponseToModel(l,f);e.productMsgMediaData=i;k=[e];return a.prototype.add.call(this,{id:f,afterCursor:void 0,_products:k,_msgs:k},{merge:!0})});function e(a){return e.apply(this,arguments)}return e}();f.findProduct=function(a){var d=a.catalogWid,e=a.productId,f=a.productMsgMediaData,g=a.shouldFetchComplianceFields;a=a.canLogQpl;return!e?(h||(h=b("Promise"))).reject(c("err")("CatalogCollection:findProduct Received productId type "+(e===void 0?"undefined":"null"))):this._queryProduct({catalogWid:d,productId:e,productMsgMediaData:f,shouldFetchComplianceFields:g,canLogQpl:a})};f._queryCatalog=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){a=a?a.index:0;g&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(g,"datasource_catalog_start");c=(yield d("WAWebBizProductCatalogAction").queryCatalog(b,c,10,void 0,void 0,e,f));g&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(g,"datasource_catalog_end");if(!c.data.length)return{id:b,afterCursor:""};var h=[];c.data.forEach(function(a){if(!a.image_cdn_urls)return;h.push(d("WAWebBizProductCatalogBridge").mapProductResponseToModel(a,b))});return{id:b,afterCursor:c.paging.cursors.after,_products:h,fetchedFromServer:!0,index:a+h.length}});function a(b,c,d,e,f,g){return a.apply(this,arguments)}return a}();f._findImplCommon=function(a,b){var c=this.get(a),d=c&&!c.stale?c.afterCursor:void 0;return this._queryCatalog(c,a,d,void 0,void 0,b==null?void 0:b.markerId)};f.findCarouselCatalog=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this.get(b);b=d("WATypeUtils").isString(b)?d("WAWebWidFactory").createWid(b):b;c&&c.set({index:0});b=(yield this._queryCatalog(c,b,void 0,void 0,Boolean(d("WAWebServerPropsModel").ServerProps.shopsProductGrid)));c&&c.markProductCollectionOld();return a.prototype.add.call(this,b,{merge:!0})});function e(a){return c.apply(this,arguments)}return e}();f.findNextProductPage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===!0&&d("WAWebProductCatalogLogQplEvents").qplPointCatalogView("datasource_start");a=(yield this.update(a));b===!0&&d("WAWebProductCatalogLogQplEvents").qplPointCatalogView("datasource_end");b=Array.isArray(a)?a[0]:a;return b.productCollection.getProductModels()});function c(b,c){return a.apply(this,arguments)}return c}();f.findCollectionMembership=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){var e=this.get(b),f=d("WATypeUtils").isString(b)?d("WAWebWidFactory").createWid(b):b,g=e&&!e.stale?e.afterCursor:void 0;f=(yield this._queryCatalog(e,f,g,c));a.prototype.add.call(this,f,{merge:!0});e=this.get(b);e&&(e.stale=!1)});function e(a,b){return c.apply(this,arguments)}return e}();f.removeCatalog=function(a){a=this.get(a);!a?d("WALogger").ERROR(i()):this.remove(a)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebCatalogModel");a.staleCollection=!0;e=new a();g.CatalogCollectionImpl=a;g.CatalogCollection=e}),98);
__d("WAWebCatalogModel",["WANullthrows","WAWebBaseModel","WAWebBizProductCatalogAction","WAWebBizProductCatalogBridge","WAWebCatalogCollection","WAWebProductCollCollection","WAWebProductCollection","WAWebProductModel","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.afterCursor=d("WAWebBaseModel").prop(),c.index=d("WAWebBaseModel").prop(),c.hasCatalogCategories=d("WAWebBaseModel").prop(),c.fetchedFromServer=d("WAWebBaseModel").session(),c._products=d("WAWebBaseModel").session(),c._msgs=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this),this.productCollection=new(d("WAWebProductCollection").ProductCollection)(),this.msgProductCollection=new(d("WAWebProductCollection").ProductCollection)(),this.collections=new(d("WAWebProductCollCollection").ProductCollCollection)(),this.listenTo(this,"change:_products",this.triggerProductUpdate),this.listenTo(this,"change:_msgs",this.triggerMsgUpdate),this.triggerProductUpdate(),this.triggerMsgUpdate()};f.triggerProductUpdate=function(){this._products&&this.productCollection.add(this._products,{merge:!0}),this._products=void 0};f.triggerMsgUpdate=function(){this._msgs&&this.msgProductCollection.add(this._msgs,{merge:!0}),this._msgs=void 0};f.markProductCollectionOld=function(){this.productCollection.forEach(function(a){return a.markOld()})};f.addProduct=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.id;a=(yield d("WAWebBizProductCatalogAction").addProduct(a));var e=this.productCollection.at(0);a.catalogWid=b;a.index=e?e.index-1:0;b=this.productCollection.add(a,{merge:!0,at:0})[0];return c("WANullthrows")(b)});function e(b){return a.apply(this,arguments)}return e}();f.editProduct=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebBizProductCatalogAction").editProduct(a)),e=this.productCollection.add(b,{merge:!0})[0];this.collections&&this.collections.forEach(function(c){c.productCollection.get(a.id)&&c.productCollection.add(b,{merge:!0})});return c("WANullthrows")(e)});function e(b){return a.apply(this,arguments)}return e}();f.refreshProduct=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.productCollection.get(a);b&&(b.stale=!0);var c=(yield d("WAWebBizProductCatalogAction").queryProduct(this.id,a));if(c.data!=null){var e=d("WAWebBizProductCatalogBridge").mapProductResponseToModel(c.data,this.id);b&&this.productCollection.add(e,{merge:!0});this.collections&&this.collections.forEach(function(b){b.productCollection.get(a)&&b.productCollection.add(e,{merge:!0})})}});function c(b){return a.apply(this,arguments)}return c}();f.pullProduct=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebBizProductCatalogAction").queryProduct(this.id,a,void 0,void 0,void 0,b));b.error==="NOT_FOUND"&&this.productCollection.remove(a);if(b.data!=null){a=new(d("WAWebProductModel").Product)(d("WAWebBizProductCatalogBridge").mapProductResponseToModel(b.data,this.id));this.updateProduct(a)}});function c(b,c){return a.apply(this,arguments)}return c}();f.updateProduct=function(a){this.productCollection.add(a,{merge:!1})};f.getCollection=function(){return b("WAWebCatalogCollection").CatalogCollection};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="catalog";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),98);
__d("WAWebProductCatalogMessage",["fbt","WANullthrows","WAWebAttachMediaCollection","WAWebAttachMediaModel","WAWebMsgType","WAWebProductCatalogLogQplEvents","WAWebProductSelectors","WAWebToast.react","WAWebToastManager","WAWebWamEnumMediaPickerOriginType","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=c("WANullthrows")(new(c("WAWebAttachMediaCollection"))({chatParticipantCount:b}));d("WAWebProductCatalogLogQplEvents").qplPointProductMessageSend("image_upload_start");yield b.processAttachments([{file:a}],d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,e);d("WAWebProductCatalogLogQplEvents").qplPointProductMessageSend("image_upload_end");if(!b.canSend())return;a=b.getPreviewableMedias();if(a.length!==1)return;e=a[0];e.caption||(e.caption=void 0);return e});return l.apply(this,arguments)}function m(a){return babelHelpers["extends"]({businessOwnerJid:a.catalogWid.toString({legacy:!0}),productId:a.id.toString(),url:a.url,productImageCount:a.getProductImageCollectionCount(),title:a.name,description:a.description},a.priceAmount1000===0?{priceAmount1000:null,currencyCode:null}:{currencyCode:a.currency,priceAmount1000:a.priceAmount1000},{salePriceAmount1000:d("WAWebProductSelectors").isSalePriceActive(a)?a.salePriceAmount1000:null})}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=b.getHeadImageFile();if(!f){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__-5lwPqXH6V4__JHASH__")}));throw c("err")("Tried to send product message. Media file is not available.")}var g=a.getParticipantCount();f=(yield k(f,g,a));if(!f){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__-5lwPqXH6V4__JHASH__")}));throw c("err")("Tried to send product message. Media data is not available.")}g={quotedMsg:e,caption:f.caption,addEvenWhilePreparing:f.previewable&&f.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING,useBasePropsType:!0};f.sendToChat(a,babelHelpers["extends"]({},g,{type:d("WAWebMsgType").MSG_TYPE.PRODUCT,productMsgOptions:m(b)}))});return n.apply(this,arguments)}g.createProductMsgSnapshot=m;g.sendProductMessage=a}),226);
__d("WAWebProductCollectionsJob",["$InternalEnum","WACustomError","WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebCommsWapMd","WAWebHttpErrors","WAWebNetworkStatus","WAWebProductTypes.flow","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=function(a){var b,c,e;b=(b=d("WAWebProductTypes.flow").asProductReviewType(a.child("status").contentString()))!=null?b:"APPROVED";c=((c=a.maybeChild("can_appeal"))==null?void 0:c.contentString().toLowerCase())==="true";e=(e=a.maybeChild("reject_reason"))==null?void 0:e.contentString();a=(a=a.maybeChild("commerce_url"))==null?void 0:a.contentString();return{status:b,canAppeal:c,rejectReason:e,commerceUrl:a}},j=function(a){var b,c,e=a.maybeChild("status_info");e=e?i(e):void 0;b=(b=e==null?void 0:e.status)!=null?b:"APPROVED";var f=e?e.canAppeal:!1,g={id:a.child("id").contentString(),name:a.child("name").contentString(),isHidden:((c=a.maybeChild("is_hidden"))==null?void 0:c.contentString())==="TRUE",rejectReason:e==null?void 0:e.rejectReason,commerceUrl:e==null?void 0:e.commerceUrl,totalItemsCount:0,products:[],reviewStatus:b,canAppeal:f};a.forEachChildWithTag("product",function(a){g.products.push(d("WAWebBizCatalogParseProduct").parseProductNode(a))});return g},k=new(h=c("WADeprecatedWapParser"))("collectionsResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("collections");var b=[];a.forEachChildWithTag("collection",function(a){b.push(j(a))});a=a.child("paging");a=a.child("after");a=a.hasContent()?a.contentString():"";return{collections:b,afterCursor:a}}),l=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.catalogWid,e=a.afterCursor,f=a.limit,g=a.productsCount,h=a.width,i=a.height;a=a.directConnectionEncryptedInfo;a=a===void 0?null:a;if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();e=e?d("WAWap").wap("after",null,e):void 0;b=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:d("WAWap").generateId(),smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogGetCollections)},d("WAWap").wap("collections",{biz_jid:d("WAWebCommsWapMd").DEVICE_JID(b)},d("WAWap").wap("collection_limit",null,f.toString()),d("WAWap").wap("item_limit",null,g.toString()),d("WAWap").wap("width",null,h.toString()),d("WAWap").wap("height",null,i.toString()),e,a?d("WAWap").wap("direct_connection_encrypted_info",null,a):null));f=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,k));if(!f.success){if(f.errorCode===404)return{collections:[],afterCursor:""};else if(f.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(f.errorCode)}else return f.result});return function(b){return a.apply(this,arguments)}}(),m=new h("singleCollectionResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("collection");var b=j(a);a=a.child("paging");a=a.child("after");a=a.hasContent()?a.contentString():"";return{collections:[b],afterCursor:a}}),n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.catalogWid,e=a.collectionId,f=a.afterCursor,g=a.limit,h=a.width,i=a.height;a=a.directConnectionEncryptedInfo;a=a===void 0?null:a;if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();f=f?d("WAWap").wap("after",null,f):void 0;b=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:d("WAWap").generateId(),smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogGetSingleCollection)},d("WAWap").wap("collection",{biz_jid:d("WAWebCommsWapMd").DEVICE_JID(b),id:d("WAWap").CUSTOM_STRING(e)},d("WAWap").wap("limit",null,g.toString()),d("WAWap").wap("width",null,h.toString()),d("WAWap").wap("height",null,i.toString()),f,a?d("WAWap").wap("direct_connection_encrypted_info",null,a):null));e=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,m));if(!e.success){if(e.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e.errorCode)}else return e.result});return function(b){return a.apply(this,arguments)}}(),o=new h("createOrEditCollectionResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("collection");var b=a.child("id").contentString();a=a.maybeChild("status_info");a=a?i(a).status:"APPROVED";return{id:b,reviewStatus:a}}),p=new h("createOrEditCollectionResponseErrorParser",function(a){var b=a.attrString("code"),c=a.attrString("text");a=a.maybeChild("field");var d=a==null?void 0:a.attrString("name");a=a==null?void 0:a.attrString("reason");return{code:b,text:c,fieldName:d,fieldReason:a}});function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();var f=[];f.push(d("WAWap").wap("name",null,a));f.push.apply(f,b.map(function(a){return d("WAWap").wap("product",null,d("WAWap").wap("id",null,a))}));f.push(d("WAWap").wap("catalog_session_id",null,e));a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",id:d("WAWap").generateId(),smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogCreateCollection)},d("WAWap").wap("collection",{op:"create"},f));b=(yield d("WADeprecatedSendIq").deprecatedSendIqErrorParser(a,o,p));if(!b.success){if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw b.customError}else return b.result});return q.apply(this,arguments)}var r=new h("deleteCollectionResponse",function(a){a.assertTag("iq");a=a.maybeChild("response");return(a==null?void 0:a.maybeChild("success"))!=null});function e(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",id:d("WAWap").generateId(),smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogDeleteCollections)},d("WAWap").wap("collections",{op:"delete"},d("WAWap").wap("id",null,a),d("WAWap").wap("catalog_session_id",null,b)));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,r));if(!b.success){if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode)}if(!b.result)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500)});return s.apply(this,arguments)}function f(a,b,c,d,e,f){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();e=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",id:d("WAWap").generateId(),smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogUpdateCollection)},d("WAWap").wap("collection",{op:"update"},d("WAWap").wap("id",null,a),b?d("WAWap").wap("name",null,b):void 0,f.length>0?d("WAWap").wap("add",null,f.map(function(a){return d("WAWap").wap("id",null,a)})):void 0,g.length>0?d("WAWap").wap("remove",null,g.map(function(a){return d("WAWap").wap("id",null,a)})):void 0,d("WAWap").wap("catalog_session_id",null,h)));a=(yield d("WADeprecatedSendIq").deprecatedSendIqErrorParser(e,o,p));if(!a.success){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw a.customError}else return a.result});return t.apply(this,arguments)}var u=new h("appealCollectionResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.maybeChild("response");return(a==null?void 0:a.maybeChild("success"))!=null});function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();b=b?d("WAWap").wap("reason",null,b):void 0;a=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,xmlns:"w:biz:catalog",type:"set",smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogAppealCollection)},d("WAWap").wap("collection",{op:"appeal",id:d("WAWap").CUSTOM_STRING(a)},b));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,u));if(!b.success){if(b.errorCode===451)throw new(d("WAWebBackendErrors").E451)();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode)}else return b.result});return w.apply(this,arguments)}var x=new h("reorderCollectionResponse",function(a){a.assertTag("iq");a=a.maybeChild("response");return(a==null?void 0:a.maybeChild("success"))!=null}),y=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,"CollectionReorderError")||this}return a}(d("WACustomError").customError("CollectionReorderError",!0,Error)),z=b("$InternalEnum")({ProductOutOfOrder:457,IndexOutOfBound:458});function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("WAWebNetworkStatus").online)throw new(d("WAWebHttpErrors").HttpNetworkError)();if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();a=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,xmlns:"w:biz:catalog",type:"set",smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").UpdateCollectionList)},d("WAWap").wap("collections",{op:"update"},d("WAWap").wap("move",null,a.map(function(a){var b=a[0],c=a[1];a=a[2];return d("WAWap").wap("id",{from_index:d("WAWap").CUSTOM_STRING(c.toString()),to_index:d("WAWap").CUSTOM_STRING(a.toString())},b)}))));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,x));if(!a.success){if(a.errorCode===451)throw new(d("WAWebBackendErrors").E451)();if([z.IndexOutOfBound,z.ProductOutOfOrder].includes(a.errorCode))throw new y();throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode)}else return a.result});return B.apply(this,arguments)}g.queryCollectionsIQ=l;g.querySingleCollectionIQ=n;g.createCollection=a;g.deleteCollection=e;g.editCollection=f;g.appealCollection=v;g.CollectionReorderError=y;g.reorderCollection=A}),98);
__d("WAWebQueryProductCollectionsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetCollectionsResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_collections",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"XWACatalogProductCollection",kind:"LinkedField",name:"collections",plural:!0,selections:[b,c,{alias:null,args:null,concreteType:"XWAProductCatalogCollectionStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[d,e,{alias:null,args:null,kind:"ScalarField",name:"reject_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commerce_url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogProduct",kind:"LinkedField",name:"products",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},f,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[e,d],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogPaging",kind:"LinkedField",name:"paging",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"after",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQueryProductCollectionsQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQueryProductCollectionsQuery",selections:c},params:{id:"WAWebQueryProductCollectionsQuery",metadata:{},name:"WAWebQueryProductCollectionsQuery",operationKind:"query",text:null}}}();a.hash="12a9551193361530e95abb2b4c1b32a4";e.exports=a}),null);
__d("WAWebQueryProductCollections",["errorCode","WALogger","WAWebBackendErrors","WAWebBizGatingUtils","WAWebBizParseProductGraphql","WAWebCatalogEventLogger","WAWebGraphQLServerError","WAWebMaybeThrowCatalogErrors","WAWebProductCollectionsJob","WAWebProductTypes.flow","WAWebQueryProductCollectionsQuery.graphql","WAWebRelayClient","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["GraphQL: Failed fetching xwa_product_catalog_get_collections query. Falling back to IQ."]);j=function(){return a};return a}var k=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();try{var e=a.catalogWid,f=a.afterCursor,g=a.limit,h=a.productsCount,k=a.width,l=a.height,m=a.directConnectionEncryptedInfo;e=(yield d("WAWebRelayClient").fetchQuery(i!==void 0?i:i=b("WAWebQueryProductCollectionsQuery.graphql"),{request:{collections:{biz_jid:e.toString(),collection_limit:String(g),item_limit:String(h),after:f,width:String(k),height:String(l),direct_connection_encrypted_info:m}}},{eventLogger:d("WAWebCatalogEventLogger").createCatalogEventLogger(d("WAWebCatalogEventLogger").GRAPHQL_CATALOG_ENDPOINT.GET_COLLECTIONS)}));if((e==null?void 0:e.xwa_product_catalog_get_collections)==null)return{afterCursor:"",collections:[]};g=e.xwa_product_catalog_get_collections;h=g.collections;f=g.paging;return{afterCursor:(f==null?void 0:f.after)||"",collections:h.map(function(a){var b=a.id,c=a.name,e=a.status_info;a=a.products;var f=e==null?void 0:e.status;f=(f=f!=null?d("WAWebProductTypes.flow").asProductReviewType(f):void 0)!=null?f:"APPROVED";return{id:b||"",name:c||"",canAppeal:(e==null?void 0:e.can_appeal)==="true",isHidden:!1,reviewStatus:f,totalItemsCount:0,products:a.map(d("WAWebBizParseProductGraphql").parseProductGraphQL),rejectReason:e==null?void 0:e.reject_reason,commerceUrl:e==null?void 0:e.commerce_url}})}}catch(b){if(b instanceof d("WAWebGraphQLServerError").GraphQLServerError){l=((k=b.source)==null?void 0:k.errors)||[];m=l[0];if((m==null?void 0:m.code)===2498052)return{collections:[],afterCursor:""};c("WAWebMaybeThrowCatalogErrors")(b)}d("WALogger").WARN(j());return d("WAWebProductCollectionsJob").queryCollectionsIQ(a)}});return function(b){return a.apply(this,arguments)}}(),l=function(a){a=a.catalogWid;return d("WAWebBizGatingUtils").graphQLForCollectionM2Enabled()&&!d("WAWebUserPrefsMeUser").getMaybeMeUser().equals(a)};a=function(){return(l.apply(void 0,arguments)?k:d("WAWebProductCollectionsJob").queryCollectionsIQ).apply(void 0,arguments)};e=a;g["default"]=e}),98);
__d("WAWebQueryProductSingleCollectionQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetSingleCollectionResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_single_collection",plural:!1,selections:[{alias:null,args:null,concreteType:"XWACatalogProductCollection",kind:"LinkedField",name:"collection",plural:!1,selections:[b,c,{alias:null,args:null,concreteType:"XWAProductCatalogCollectionStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[d,e,{alias:null,args:null,kind:"ScalarField",name:"reject_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commerce_url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogProduct",kind:"LinkedField",name:"products",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},f,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[e,d],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogPaging",kind:"LinkedField",name:"paging",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"after",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQueryProductSingleCollectionQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQueryProductSingleCollectionQuery",selections:c},params:{id:"WAWebQueryProductSingleCollectionQuery",metadata:{},name:"WAWebQueryProductSingleCollectionQuery",operationKind:"query",text:null}}}();a.hash="04369b38de2207faebf29136d50b8819";e.exports=a}),null);
__d("WAWebQueryProductSingleCollection",["WALogger","WAWebBackendErrors","WAWebBizGatingUtils","WAWebBizParseProductGraphql","WAWebCatalogEventLogger","WAWebGraphQLServerError","WAWebMaybeThrowCatalogErrors","WAWebProductCollectionsJob","WAWebProductTypes.flow","WAWebQueryProductSingleCollectionQuery.graphql","WAWebRelayClient","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["GraphQL: Failed fetching xwa_product_catalog_get_single_collection query. Falling back to IQ."]);i=function(){return a};return a}var j=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();try{var e=a.catalogWid,f=a.collectionId,g=a.afterCursor,j=a.limit,k=a.width,l=a.height,m=a.directConnectionEncryptedInfo;e=(yield d("WAWebRelayClient").fetchQuery(h!==void 0?h:h=b("WAWebQueryProductSingleCollectionQuery.graphql"),{request:{collection:{biz_jid:e.toString(),id:f,limit:String(j),after:g,width:String(k),height:String(l),direct_connection_encrypted_info:m}}},{eventLogger:d("WAWebCatalogEventLogger").createCatalogEventLogger(d("WAWebCatalogEventLogger").GRAPHQL_CATALOG_ENDPOINT.GET_SINGLE_COLLECTION)}));f=(e==null?void 0:e.xwa_product_catalog_get_single_collection)||{};j=f.collection;g=f.paging;k=j||{};l=k.id;m=k.name;e=k.status_info;f=k.products;j=e==null?void 0:e.status;j=(k=j!=null?d("WAWebProductTypes.flow").asProductReviewType(j):void 0)!=null?k:"APPROVED";return{afterCursor:(g==null?void 0:g.after)||"",collections:[{id:l||"",name:m||"",canAppeal:(e==null?void 0:e.can_appeal)==="true",isHidden:!1,reviewStatus:j,totalItemsCount:0,products:f!=null?f.map(d("WAWebBizParseProductGraphql").parseProductGraphQL):[],rejectReason:e==null?void 0:e.reject_reason,commerceUrl:e==null?void 0:e.commerce_url}]}}catch(b){b instanceof d("WAWebGraphQLServerError").GraphQLServerError&&c("WAWebMaybeThrowCatalogErrors")(b);d("WALogger").WARN(i());return d("WAWebProductCollectionsJob").querySingleCollectionIQ(a)}});return function(b){return a.apply(this,arguments)}}(),k=function(a){a=a.catalogWid;return d("WAWebBizGatingUtils").graphQLForCollectionM2Enabled()&&!d("WAWebUserPrefsMeUser").getMaybeMeUser().equals(a)};a=function(){return(k.apply(void 0,arguments)?j:d("WAWebProductCollectionsJob").querySingleCollectionIQ).apply(void 0,arguments)};e=a;g["default"]=e}),98);
__d("WAWebProductCollCollection",["WALogger","WAWebBaseCollection","WAWebBizProductCatalogBridge","WAWebBusinessDirectConnectionBridge","WAWebProductCollModel","WAWebQplQuickPerformanceLoggerModule","WAWebQueryProductCollections","WAWebQueryProductSingleCollection","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed findCollectionProducts, error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed findCollectionsList, error: ",""]);i=function(){return a};return a}var j=100,k=10,l=function(a){a={id:a.id,name:a.name,reviewStatus:a.reviewStatus,totalItemsCount:a.totalItemsCount,canAppeal:a.canAppeal,commerceUrl:a.commerceUrl,rejectReason:a.rejectReason};return a};a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.afterCursor="",b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.findCollectionsList=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=this;f&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(f,"datasource_collections_start");try{e=(yield d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(d){return c("WAWebQueryProductCollections")({catalogWid:a,afterCursor:g.afterCursor,limit:k,productsCount:b,width:j,height:j,directConnectionEncryptedInfo:d})}));f&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(f,"datasource_collections_end");this.afterCursor=e.afterCursor;this.add(e.collections.map(l),{merge:!0});e.collections.forEach(function(b){var c=g.get(b.id);c&&c.addProducts(b.products.map(function(b){return d("WAWebBizProductCatalogBridge").mapProductResponseToModel(b,a)}))});this.trigger("change")}catch(a){d("WALogger").ERROR(i(),a).verbose().devConsole(a).sendLogs("Find collections list failed");throw a}});function e(b,c,d,e){return a.apply(this,arguments)}return e}();f.getCollectionModels=function(a){var b=this.toArray();return a?b:b.filter(function(a){return!a.isHidden&&a.reviewStatus==="APPROVED"})};f.findCollectionProducts=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){e=this.get(b);var g=e?e.afterCursor:void 0;f&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(f,"datasource_start");try{var i=(yield d("WAWebBusinessDirectConnectionBridge").attemptWithDirectConnectionRetry(a,function(d){return c("WAWebQueryProductSingleCollection")({catalogWid:a,collectionId:b,afterCursor:g,limit:k,width:j,height:j,directConnectionEncryptedInfo:d})}));f&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(f,"datasource_end");i.collections.length===1&&(this.add(i.collections.map(l),{merge:!0}),e=this.get(b),e&&(e.addProducts(i.collections[0].products.map(function(b){return d("WAWebBizProductCatalogBridge").mapProductResponseToModel(b,a)})),e.afterCursor=i.afterCursor))}catch(a){d("WALogger").ERROR(h(),a).verbose().devConsole(a).sendLogs("Find collection products failed");throw a}});function e(b,c,d,e){return a.apply(this,arguments)}return e}();return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebProductCollModel");a.staleCollection=!0;g.ProductCollCollection=a}),98);
__d("WAWebProductCollModel",["WAWebBaseModel","WAWebProductCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.isHidden=d("WAWebBaseModel").prop(),c.reviewStatus=d("WAWebBaseModel").prop(),c.commerceUrl=d("WAWebBaseModel").prop(),c.rejectReason=d("WAWebBaseModel").prop(),c.totalItemsCount=d("WAWebBaseModel").prop(),c.afterCursor=d("WAWebBaseModel").prop(),c.canAppeal=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.productCollection=new(d("WAWebProductCollection").ProductCollection)(),this.afterCursor=void 0};c.addProducts=function(a){this.productCollection.add(a,{merge:!0})};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="productColl";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebProductCollection",["Promise","WAWebBaseCollection","WAWebProductModel"],(function(a,b,c,d,e,f,g){var h,i={NO_REVIEW:"NO_REVIEW",PENDING:"PENDING",REJECTED:"REJECTED",APPROVED:"APPROVED",OUTDATED:"OUTDATED"};function a(a,b){return a.index-b.index}c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getProductModels=function(b){b===void 0&&(b=!1);var c=a.prototype.toArray.call(this);if(a.prototype.length<1)return c;var d=a.prototype.head.call(this);d=d==null?void 0:d.catalogWid;if(!d)return c;var e=b?new Set([i.OUTDATED,i.NO_REVIEW,i.APPROVED,i.REJECTED,i.PENDING]):new Set([i.APPROVED]);d=a.prototype.filter.call(this,function(a){return e.has(a.reviewStatus)&&!a.old});return!b?d.filter(function(a){return!a.isHidden}):d};d.add=function(b,c){c=c?a.prototype.add.call(this,b,c):a.prototype.add.call(this,b);this.sort();return c};d.evictImagesFromCache=function(a){a=this.get(a);a&&a.evictImagesFromCache()};d.findImpl=function(a){var c=this.get(a);return c?(h||(h=b("Promise"))).resolve(c):(h||(h=b("Promise"))).resolve({id:a})};return c}(d("WAWebBaseCollection").BaseCollection);c.model=d("WAWebProductModel").Product;c.comparator=a;g.PRODUCT_REVIEW_STATUS=i;g.ProductCollection=c}),98);
__d("WAWebProductImageCollection",["WAWebBaseCollection","WAWebProductImageModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.toArray=function(){var b=this;return a.prototype.filter.call(this,function(a){if(a.old){b.remove(a);return!1}return a})};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebProductImageModel").ProductImage;g.ProductImageCollection=a}),98);
__d("WAWebProductImageModel",["Promise","WABackoffDelay","WALogger","WAPromiseBackoffs","WAWebBaseModel","WAWebCryptoCalculateFilehash","WAWebMedia","WAWebMediaData","WAWebMediaDataUtils","WAWebMediaOpaqueData","WAWebMediaStore","WAWebMediaTypes","WAWebMiscErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch ",""]);i=function(){return a};return a}var j="https://static.whatsapp.net",k=1e3;a=15*60*1e3;var l=10,m=d("WAPromiseBackoffs").createTimer({algo:{type:"fibonacci",first:0,second:1},jitter:.25,max:a});function n(a){a="_productimage_"+(a.includes(j)?a:new URL(a).pathname);return a}e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop(),c.mediaUrl=d("WAWebBaseModel").prop(),c.blobUrl=d("WAWebBaseModel").session(),c.mediaData=d("WAWebBaseModel").session(),c.fetchedFromServer=d("WAWebBaseModel").prop(),c.old=d("WAWebBaseModel").session(!1),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this),this.listenTo(this,"change:mediaUrl change:fetchedFromServer",this.triggerImageUpdate),this.triggerImageUpdate()};f._processAndUpdateMediaData=function(a){var e=this,f={};a=c("WAWebMediaOpaqueData").createFromData(a,"image/jpeg");a=d("WAWebMedia").prepRawMedia(a,{});a.waitForPrep().then(function(a){f=babelHelpers["extends"]({},f,{mediaBlob:a.mediaBlob,type:a.type,mimetype:a.mimetype,fullWidth:a.fullWidth,fullHeight:a.fullHeight});return(h||(h=b("Promise"))).all([typeof a.preview==="string"?c("WAWebMediaOpaqueData").createFromBase64Jpeg(a.preview):(h||(h=b("Promise"))).resolve(null),c("WAWebMediaOpaqueData").createFromData(a.mediaBlob),d("WAWebCryptoCalculateFilehash").calculateFilehashFromBlob(a.mediaBlob)])}).then(function(a){var b=a[0],c=a[1];a=a[2];f=babelHelpers["extends"]({},f,{preview:b,mediaBlob:c,renderableUrl:c.url(),mediaStage:d("WAWebMediaTypes").MediaDataStage.RESOLVED,filehash:a});if(a===e.mediaData.filehash)return;e.mediaData.set(f)})};f.triggerImageUpdate=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;if(!this.fetchedFromServer||!this.mediaUrl)return;this.mediaData||this.addChild("mediaData",new(c("WAWebMediaData"))({mediaStage:d("WAWebMediaTypes").MediaDataStage.PREPARING}));var e=n(this.mediaUrl),f=(yield d("WAWebMediaStore").LruMediaStore.get(e));if(f)return this._processAndUpdateMediaData(f);f={delay:function(a){a=a.taskDuration;var b=k*m();return Math.max(b-a,0)},signal:new AbortController().signal,retries:l};try{f=(yield d("WABackoffDelay").backoff(f,function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield d("WAWebMediaDataUtils").fetchMedia(a.mediaUrl));return!c||!(c.status>=200&&c.status<300)?b(new(d("WAWebMiscErrors").CatalogImageDownloadError)()):c});return function(a){return c.apply(this,arguments)}}()));f=f.result;d("WAWebMediaStore").LruMediaStore.put(e,f);this._processAndUpdateMediaData(f)}catch(a){d("WALogger").WARN(i(),this.mediaUrl).devConsole(a),this.mediaData.set({mediaStage:d("WAWebMediaTypes").MediaDataStage.ERROR_MISSING})}});function e(){return a.apply(this,arguments)}return e}();f.markOld=function(){this.old=!0};f.evictFromCache=function(){if(this.mediaUrl){var a=n(this.mediaUrl);d("WAWebMediaStore").LruMediaStore.del(a)}};return e}(d("WAWebBaseModel").BaseModel);e.Proxy="productImage";f=d("WAWebBaseModel").defineModel(e);g.STATIC_WHATSAPP_IMAGE_URI=j;g.ProductImage=f}),98);
__d("WAWebProductMessageListCollection",["Promise","WAWebBaseCollection","WAWebBizProductCatalogAction","WAWebProductMessageListModel","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.findQueryImpl=function(a){return d.findImpl(a).then(function(a){return[a]})},d.findImpl=function(a,c){var e=d.get(a);return e==null?(h||(h=b("Promise"))).resolve({id:a}):d._queryProductList(e,c==null?void 0:c.markerId)},c)||babelHelpers.assertThisInitialized(d)}var e=c.prototype;e._queryProductList=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.catalogId;c=(yield d("WAWebBizProductCatalogAction").queryProductList(c,a.getNextProductBatchToLoad(),void 0,void 0,b));return{id:a.id,_products:c}});function a(b,c){return a.apply(this,arguments)}return a}();e.getOrAdd=function(a,b,c,e,f){var g=this.get(a);if(g!=null)return g;if(e==null)return null;e=d("WAWebWidFactory").createWid(e);g=this.add({id:a,catalogId:e,_productList:b,title:f,requiresDirectConnection:c})[0];return g!=null?g:null};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebProductMessageListModel").ProductMessageList;a.staleCollection=!0;c=new a();g.ProductMessageListCollectionImpl=a;g.ProductMessageListCollection=c}),98);
__d("WAWebProductMessageListModel",["WAWebBaseModel","WAWebBizProductCatalogBridge","WAWebBizProductMessageListAction","WAWebBusinessDirectUtils","WAWebCatalogCollection","WAWebChatCollection","WAWebMsgKey","WAWebProductCollection","WAWebProductMessageListConstant","WAWebProductTypes.flow","WAWebServerPropsModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=["ERROR","SUCCESS"];a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.catalogId=d("WAWebBaseModel").prop(),c.title=d("WAWebBaseModel").prop(),c.requiresDirectConnection=d("WAWebBaseModel").prop(),c._productsLoadingStatus=d("WAWebBaseModel").session(),c._productList=d("WAWebBaseModel").session(),c._products=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.initialize=function(){a.prototype.initialize.call(this),this.productCollection=d("WAWebCatalogCollection").CatalogCollection.gadd({id:this.catalogId}).productCollection,this._productsLoadingStatus=new Map(),this.listenTo(this,"change:_products",this.triggerProductUpdate),this.triggerProductUpdate(),this.listenTo(this.productCollection,"remove",this.triggerProductRemoved),this.listenTo(d("WAWebChatCollection").ChatCollection,"add",this.triggerChatAdded)};e.triggerProductRemoved=function(a){d("WAWebBizProductMessageListAction").updateProductListHeaderImageRejected(a,this.id)};e.triggerProductUpdate=function(){var a=this;if(this._products==null)return;this._products.forEach(function(b){var c=a._getFetchStatus(b);a.setProductLoadingStatus(b.id,c);b.status==="DELETED"&&a.triggerProductRemoved(b);if(b.status!=="DELETED"&&c!=="ERROR"){c=d("WAWebBizProductCatalogBridge").mapProductResponseToModel(b,a.catalogId);c.reviewStatus===d("WAWebProductCollection").PRODUCT_REVIEW_STATUS.REJECTED&&a.triggerProductRemoved(c);a.productCollection.add(c,{merge:!0})}});this._products=void 0};e.triggerChatAdded=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.id.equals(this.catalogId)&&(yield d("WAWebBusinessDirectUtils").isCypherNeeded(this.catalogId))&&(this.productCollection.reset(),this._productsLoadingStatus=new Map())});function c(b){return a.apply(this,arguments)}return c}();e.getNextProductBatchToLoad=function(){var a=this,b=this.getPageSize();b=this._productList.productSections.reduce(function(b,c){c=c.products;return[].concat(b,c.map(function(a){a=a.productId;return a}).filter(Boolean).filter(function(b){return a.getProductLoadingStatus(b)==="NONE"}))},[]).slice(0,b);b.forEach(function(b){return a.setProductLoadingStatus(b,"PENDING")});return b};e.getPageSize=function(){var a=d("WAWebServerPropsModel").ServerProps.webProductListMessagePageSize||d("WAWebProductTypes.flow").PRODUCT_PAGE_SIZE,b=this.getProductSize();return b<3*a?b:a*2};e.getProductSize=function(){return this._productList.productSections.reduce(function(a,b){b=b.products;return a+b.length},0)};e.setProductLoadingStatus=function(a,b){this._productsLoadingStatus.set(a,b)};e.getProductLoadingStatus=function(a){return this._productsLoadingStatus.get(a)||"NONE"};e.getTotalProductsFetchedOrFailed=function(){return Array.from(this._productsLoadingStatus).filter(function(a){a[0];a=a[1];return h.includes(a)}).length};e.getProductList=function(){return this._productList};e.getSections=function(){return this._productList.productSections};e.getSectionsCount=function(){return this._productList.productSections.reduce(function(a,b){b=b.title;return b!=null&&b!==""?a+1:a},0)};e.isFetching=function(){var a=!1;this._productsLoadingStatus.forEach(function(b){b==="PENDING"&&(a=!0)});return a};e._getFetchStatus=function(a){return a.status===d("WAWebProductMessageListConstant").INVALID_PRODUCT_TOKEN||!a.image_cdn_urls?"ERROR":"SUCCESS"};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="product_list";a.idClass=c("WAWebMsgKey");e=d("WAWebBaseModel").defineModel(a);g.ProductMessageList=e}),98);
__d("WAWebProductModel",["WAWebBaseModel","WAWebFileUtils","WAWebMediaData","WAWebMediaOpaqueData","WAWebMediaTypes","WAWebProductImageCollection"],(function(a,b,c,d,e,f,g){a=0;b=4503599627370496;e=10;f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.old=d("WAWebBaseModel").session(!1),c.checkmark=d("WAWebBaseModel").session(!1),c.id=d("WAWebBaseModel").prop(),c.isHidden=d("WAWebBaseModel").prop(),c.catalogWid=d("WAWebBaseModel").prop(),c.url=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.description=d("WAWebBaseModel").prop(),c.availability=d("WAWebBaseModel").prop(),c.maxAvailable=d("WAWebBaseModel").prop(),c.reviewStatus=d("WAWebBaseModel").prop(),c.canAppeal=d("WAWebBaseModel").prop(),c.currency=d("WAWebBaseModel").prop(),c.priceAmount1000=d("WAWebBaseModel").prop(),c.salePriceAmount1000=d("WAWebBaseModel").prop(),c.salePriceStartDate=d("WAWebBaseModel").prop(),c.salePriceEndDate=d("WAWebBaseModel").prop(),c.retailerId=d("WAWebBaseModel").prop(),c.productImageCollection=d("WAWebBaseModel").session(),c.imageCount=d("WAWebBaseModel").prop(),c.index=d("WAWebBaseModel").prop(),c.additionalImageCdnUrl=d("WAWebBaseModel").prop(),c.additionalImageHashes=d("WAWebBaseModel").prop(),c.imageCdnUrl=d("WAWebBaseModel").prop(),c.imageHash=d("WAWebBaseModel").prop(),c.complianceInfo=d("WAWebBaseModel").prop(),c.productMsgMediaData=d("WAWebBaseModel").session(),c.fetchedFromServer=d("WAWebBaseModel").session(),c.t=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.initialize=function(){a.prototype.initialize.call(this),this.productImageCollection=new(d("WAWebProductImageCollection").ProductImageCollection)(),this.listenTo(this,"change:imageCdnUrl",this.triggerMainImageUpdate),this.initImageUpdate()};e.triggerAdditionalImageUpdate=function(){var a,b=this,c=0;(a=this.additionalImageCdnUrl)==null?void 0:a.forEach(function(a,d){b.productImageCollection.gadd({id:"_"+(d+1),mediaUrl:a,fetchedFromServer:b.fetchedFromServer,old:!1},{merge:!0}),c=d+1});this.productImageCollection.filter(function(a,b){return b>c}).forEach(function(a){return a.markOld()})};e.triggerMainImageUpdate=function(){if(this.imageCdnUrl)this.productImageCollection.gadd({id:"_0",mediaUrl:this.imageCdnUrl,fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0});else{var a;(a=this.productImageCollection.get("_0"))==null?void 0:a.markOld()}};e.initImageUpdate=function(){if(!this.fetchedFromServer&&this.productMsgMediaData){for(var a=0;a<this.imageCount;a++)this.productImageCollection.gadd({id:"_"+a,type:"product",mediaData:new(c("WAWebMediaData"))({mediaStage:d("WAWebMediaTypes").MediaDataStage.PREPARING}),fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0});return}this.triggerMainImageUpdate()};e.markOld=function(){this.old=!0};e.lazyloadProductImageCollection=function(){this.triggerAdditionalImageUpdate();return this.productImageCollection};e.getProductImageCollectionCount=function(){return this.productImageCollection.length};e.getProductImageCollectionHead=function(){return this.productImageCollection.head()};e.getHeadImageFile=function(){var a=this.productImageCollection,b=this.name;a=a.head();if(!a)return;var e;a=(a=a.mediaData)==null?void 0:a.mediaBlob;a.$ProductImpl1!=null?e=a.$ProductImpl1:a instanceof c("WAWebMediaOpaqueData")&&(e=a.getBlob());if(e==null)return;a=d("WAWebFileUtils").createFile([e],b+".jpg",{type:"image/jpeg"});return a};e.evictImagesFromCache=function(){this.productImageCollection.forEach(function(a){return a.evictFromCache()})};e.getPreviewImage=function(){return this.productImageCollection.head()};e.getCollection=function(){return this.collection};return b}(d("WAWebBaseModel").BaseModel);f.Proxy="product";f=d("WAWebBaseModel").defineModel(f);g.MIN_PRICE=a;g.MAX_PRICE=b;g.MAX_PRODUCT_IMAGES=e;g.Product=f}),98);
__d("WAWebChatComparator",[],(function(a,b,c,d,e,f){a=function(a,b){var c=a.pin||0,d=b.pin||0;if(c||d)return c!==d?c>d?-1:1:a.id.toString()<b.id.toString()?-1:1;c=Math.max(a.previewT||0,a.draftMessageSortTs||0,a.t||0);d=Math.max(b.previewT||0,b.draftMessageSortTs||0,b.t||0);return c!==d?c>d?-1:1:a.id.toString()<b.id.toString()?-1:1};b=a;f["default"]=b}),66);
__d("WAWebChatCollection",["WALogger","WAWebBaseCollection","WAWebChatComparator","WAWebChatLockUpdateDailyStats","WAWebChatModel","WAWebConnModel","WAWebIdleTaskRunner","WAWebSendUnstarAllChatAction","WAWebSocketConstants","WAWebSocketModel","WAWebUserPrefsStore","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatCollection:saveToCache save: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatCollection:getActive more than one active chat"]);i=function(){return a};return a}var j=1e3*60*30;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.notSpam={};b.promises={sendUnstarAll:null};b._sortEnabled=!1;b._viewOnceCleanupTaskQueue=new Set();b.enableSortListener();b.listenTo(d("WAWebSocketModel").Socket,"change:stream",function(){d("WAWebSocketModel").Socket.stream===d("WAWebSocketConstants").SOCKET_STREAM.RESUMING&&b.forEach(function(a){a.pendingMsgs=!1})});b.listenToOnce(babelHelpers.assertThisInitialized(b),"sort",c("lodash").debounce(b.setIndexes,100));b._scheduleViewOnceMediaCleanup();b.listenTo(babelHelpers.assertThisInitialized(b),"change:isLocked",c("lodash").debounce(function(){d("WAWebChatLockUpdateDailyStats").updateChatLockDailyStats({totalFolderChatsCount:b.filter(function(a){return a.isLocked}).length})},500));return b}var e=b.prototype;e._scheduleViewOnceMediaCleanup=function(){var a=this;self.clearTimeout(this._viewOnceCleanupTimeout);this._viewOnceCleanupTimeout=self.setTimeout(function(){d("WAWebIdleTaskRunner").IdleCallbackTasks.enqueue(function(){a._runViewOnceMediaCleanup(),a._scheduleViewOnceMediaCleanup()})},j)};e._runViewOnceMediaCleanup=function(){var a=this;this.forEach(function(b){var c=b.id;if(a._viewOnceCleanupTaskQueue.has(c))return;d("WAWebIdleTaskRunner").IdleCallbackTasks.enqueue(function(){a._viewOnceCleanupTaskQueue["delete"](c);var b=a.get(c);(b==null?void 0:b.active)===!1&&b.deregisterExpiredViewOnceBulkMessages(b.msgs)});a._viewOnceCleanupTaskQueue.add(c)})};e.getUnreadCount=function(){return this.filter(function(a){return a.showUnreadInTitle}).length};e.enableSortListener=function(a){if(this._sortEnabled)return;this.listenTo(this,"change:t change:pin change:shouldAppearInList",this.sort);a&&this.sort();this._sortEnabled=!0};e.disableSortListener=function(){this._sortEnabled&&(this.stopListening(null,null,this.sort),this._sortEnabled=!1)};e.setIndexes=function(){this.forEach(function(a,b){a.initialIndex=b})};e.getActive=function(){var a=this.filter(function(a){return a.active});a.length>1&&d("WALogger").ERROR(i()).sendLogs("more-than-one-active-chat-in-chat-collection");return a[0]};e.unstarAllMessages=function(a,b){return d("WAWebSendUnstarAllChatAction").unstarAllMessages(a,b)};e.saveToCache=function(){if(!d("WAWebConnModel").Conn.shouldSaveToCache())return;var a=b.cachePolicy.id;d("WALogger").LOG(h(),String(a));var e=this.map(function(a,b){var d=a.toJSON();b=b<20?Math.min(a.unreadCount+20,50):Math.min(Math.max(3,a.unreadCount),20);d.msgs=a.msgs?a.msgs.slice(-b).map(function(a){return c("lodash").pickBy(a.toJSON(),function(a){return a!==void 0})}):[];return d});c("WAWebUserPrefsStore").setCollection(a,e,!0)};e.hasAnyUnreadSinceGivenTimestamp=function(a){return this.length===0?!1:this.some(function(b){var c;c=(c=b.t)!=null?c:0;return b.hasUnread&&c>a})};e["delete"]=function(){a.prototype["delete"].call(this),this.listenToOnce(this,"sort",c("lodash").debounce(this.setIndexes,100))};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebChatModel").Chat;a.comparator=c("WAWebChatComparator");b=new a();g.ChatCollectionImpl=a;g.ChatCollection=b}),98);
__d("WAWebChatCommunityUtils",["WAWebABProps","WAWebChatGroupUtils","WAWebCommunityActionsCircularDependencyBreaker","WAWebCommunityGatingUtils","WAWebGroupType","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function h(a){var b;return(a==null?void 0:(b=a.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.COMMUNITY&&d("WAWebChatGroupUtils").isSuspendedGroup(a)&&d("WAWebABProps").getABPropConfigValue("community_suspend_v0_enabled")}function i(a){if(!(a==null?void 0:a.groupMetadata))return!1;a=a.groupMetadata;var b=a.participants;return b.iAmSuperAdmin()||d("WAWebUserPrefsMeUser").isMeAccount(a.owner)}function a(a){if(!(a==null?void 0:a.groupMetadata)||h(a))return!1;var b=a.groupMetadata,c=b.participants;b=Boolean(b.allowNonAdminSubGroupCreation)&&d("WAWebCommunityGatingUtils").memberAddedGroupsM1Enabled();return b||c.iAmAdmin()||i(a)||d("WAWebCommunityGatingUtils").memberSuggestedGroupsEnabled()}function b(a){return!(a==null?void 0:a.groupMetadata)||h(a)?!1:i(a)}function c(a){return d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().filter(function(b){return b.parentGroup===a&&b.defaultSubgroup===!0}).map(function(a){return a.id})}function e(a,b){return a.map(function(a){var c;c=b?(c=d("WAWebCommunityActionsCircularDependencyBreaker").chatCollection().get(a))==null?void 0:c.formattedTitle:(c=d("WAWebCommunityActionsCircularDependencyBreaker").unjoinedSubgroupMetaDataCollection().get(a))==null?void 0:c.subject;return{id:a,subject:(a=c)!=null?a:""}})}function f(a){if(!a||!a.contact.name)return!1;var b=d("WAWebCommunityActionsCircularDependencyBreaker").chatCollection().findFirst(function(b){var c;return((c=b.groupMetadata)==null?void 0:c.parentGroup)===a.id&&((c=b.groupMetadata)==null?void 0:c.defaultSubgroup)});return!b||!b.contact.name?!1:b.contact.name!==a.contact.name}function j(a){if(!a)return!1;a=d("WAWebCommunityActionsCircularDependencyBreaker").groupMetaDataCollection().get(a);if(!a)return!1;var b=a.participants.iAmAdmin();return a.allowNonAdminSubGroupCreation!==!0&&!b&&d("WAWebCommunityGatingUtils").memberSuggestedGroupsEnabled()}var k=91;g.isIntegritySuspendedCommunity=h;g.isCommunityCreator=i;g.canAddGroupToCommunity=a;g.canDeactivateCommunity=b;g.getCagIdFromCommunity=c;g.formatSubgroupUpdateTypes=e;g.cagAndCommunitySubjectDiffer=f;g.isSubgroupSuggestionCreation=j;g.SUBGROUP_V2_CHAT_CELL_HEIGHT=k}),98);
__d("WAWebChatDocMsgsCollection",["Promise","WAFilteredCatch","WALogger","WAWebBackendErrors","WAWebBaseCollection","WAWebFrontendMsgGetters","WAWebMsgCollection","WAWebMsgModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to count docs for chat ",""]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=e=a.call.apply(a,[this].concat(g))||this,e.hasDocBefore=!0,e.$ChatDocMsgsCollection1=null,e.count=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(e.$ChatDocMsgsCollection1!=null)return e.$ChatDocMsgsCollection1;var c=a.msgs.filter(j);b=(b=c[0])!=null?b:a.msgs.head();if(b==null)return 0;try{b=(yield d("WAWebMsgCollection").MsgCollection.queryMedia(b.id.remote,Infinity,"before",b.id,"document"));b=(b=b.length)!=null?b:0;var f=b>0&&c.length>0?1:0;e.$ChatDocMsgsCollection1=b+c.length-f;return e.$ChatDocMsgsCollection1}catch(b){d("WALogger").ERROR(i(),a.id).verbose().devConsole(b).sendLogs("md-failed-docs-count: "+b.message);return null}});return function(b){return a.apply(this,arguments)}}(),c)||babelHelpers.assertThisInitialized(e)}var e=c.prototype;e["delete"]=function(){a.prototype["delete"].call(this),this.stopListening(),this.reset()};e.add=function(b,c){this.$ChatDocMsgsCollection1=null;return a.prototype.add.call(this,b,c)};e.remove=function(b,c){this.$ChatDocMsgsCollection1=null;return a.prototype.remove.call(this,b,c)};e.queryDocs=function(a,c){var e=this;if(c){if(this.queryDocBefore)return this.queryDocBefore;c=this.queryDocBefore=d("WAWebMsgCollection").MsgCollection.queryMedia(c.id.remote,d("WAWebMsgCollection").MEDIA_QUERY_LIMIT,"before",c.id,"document").then(function(a){(!a||a.length<d("WAWebMsgCollection").MEDIA_QUERY_LIMIT)&&(e.hasDocBefore=!1),e.add(a.filter(j),{at:0})})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){}))["finally"](function(){e.queryDocBefore=null,e.trigger("query_doc_before")});this.trigger("query_doc_before");return c}c=a.msgs;if(this.length===0){if(!c||c.length===0){this.hasDocBefore=!1;return(h||(h=b("Promise"))).resolve()}this.add(c.filter(j),{at:0})}if(a.msgs.msgLoadState.noEarlierMsgs){this.hasDocBefore=!1;return(h||(h=b("Promise"))).resolve()}else if(this.length<=2*d("WAWebMsgCollection").MEDIA_QUERY_LIMIT){c=this.length===0?c.head():this.head();return this.queryDocs(a,c)}return(h||(h=b("Promise"))).resolve()};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;function j(a){return d("WAWebFrontendMsgGetters").getAsDoc(a)!=null&&!a.isVcardOverMmsDocument}g["default"]=a}),98);
__d("WAWebChatLinkMsgsCollection",["Promise","WAFilteredCatch","WALogger","WAPromiseLoop","WAWebBackendErrors","WAWebBaseCollection","WAWebMsgCollection","WAWebMsgLinks","WAWebMsgModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to count medias for chat ",""]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=e=a.call.apply(a,[this].concat(g))||this,e.hasLinkBefore=!0,e.$ChatLinkMsgsCollection1=null,e.count=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(e.$ChatLinkMsgsCollection1!=null)return e.$ChatLinkMsgsCollection1;var c=a.msgs.filter(function(a){return d("WAWebMsgLinks").getLinksFromMsg(a).length>0});b=(b=c[0])!=null?b:a.msgs.head();if(b==null)return 0;try{b=(yield d("WAWebMsgCollection").MsgCollection.queryMedia(b.id.remote,Infinity,"before",b.id,"url"));b=(b=b.length)!=null?b:0;var f=b>0&&c.length>0?1:0;e.$ChatLinkMsgsCollection1=b+c.length-f;return e.$ChatLinkMsgsCollection1}catch(b){d("WALogger").ERROR(i(),a.id).verbose().devConsole(b).sendLogs("md-failed-medias-count: "+b.message);return null}});return function(b){return a.apply(this,arguments)}}(),c)||babelHelpers.assertThisInitialized(e)}var e=c.prototype;e["delete"]=function(){a.prototype["delete"].call(this),this.stopListening(),this.reset()};e.add=function(b,c){this.$ChatLinkMsgsCollection1=null;return a.prototype.add.call(this,b,c)};e.remove=function(b,c){this.$ChatLinkMsgsCollection1=null;return a.prototype.remove.call(this,b,c)};e.queryLinks=function(a,c){var e=this;if(c){if(this.queryLinkBefore)return this.queryLinkBefore;c=this.queryLinkBefore=d("WAWebMsgCollection").MsgCollection.queryMedia(c.id.remote,d("WAWebMsgCollection").MEDIA_QUERY_LIMIT,"before",c.id,"url").then(function(a){(!a||a.length<d("WAWebMsgCollection").MEDIA_QUERY_LIMIT)&&(e.hasLinkBefore=!1),e.add(a,{at:0}),e.createLinksAndAddMsgs(a)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){}))["finally"](function(){e.queryLinkBefore=null,e.trigger("query_link_before")});this.trigger("query_link_before");return c}c=a.msgs.getModelsArray();if(this.length===0){if(!c||c.length===0){this.hasLinkBefore=!1;return(h||(h=b("Promise"))).resolve()}this.add(c.filter(function(a){return d("WAWebMsgLinks").getLinksFromMsg(a).length>0}),{at:0});this.createLinksAndAddMsgs(c)}if(a.msgs.msgLoadState.noEarlierMsgs){this.hasLinkBefore=!1;return(h||(h=b("Promise"))).resolve()}else if(this.length<=2*d("WAWebMsgCollection").MEDIA_QUERY_LIMIT){c=this.length===0?a.msgs.head():this.head();return this.queryLinks(a,c)}return(h||(h=b("Promise"))).resolve()};e.createLinksAndAddMsgs=function(a){var b=this,c=[];d("WAPromiseLoop").promiseLoop(function(b,e,f){if(a.length===f){b();return}e=a[f];if(e!=null){b=d("WAWebMsgLinks").getLinksFromMsg(e);b.length&&c.push(e)}}).then(function(){b.add(c),b.trigger("query_link_before")})};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;a.comparator=function(a,b){return a.t-b.t};g["default"]=a}),98);
__d("WAWebWamEnumWebcMessageQueryDirection",[],(function(a,b,c,d,e,f){a=Object.freeze({LOAD_PREV:0,LOAD_NEXT:1,LOAD_AROUND:2});f.WEBC_MESSAGE_QUERY_DIRECTION=a}),66);
__d("WAWebWebcMessageQueryWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcChatType","WAWebWamEnumWebcMessageQueryDirection","WAWebWamEnumWebcQueryTriggerType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcMessageQuery:[1876,{webcAudioMessageCount:[14,a.TYPES.INTEGER],webcBrowserNetworkType:[1,a.TYPES.STRING],webcBrowserStorageQuotaBytes:[20,a.TYPES.INTEGER],webcBrowserStorageQuotaUsedBytes:[21,a.TYPES.INTEGER],webcChatPosition:[2,a.TYPES.INTEGER],webcChatType:[13,d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE],webcDocumentMessageCount:[16,a.TYPES.INTEGER],webcEarliestMessageIndex:[11,a.TYPES.INTEGER],webcEarliestMessageT:[12,a.TYPES.TIMER],webcMessageCount:[4,a.TYPES.INTEGER],webcMessageQueryTrigger:[19,d("WAWebWamEnumWebcQueryTriggerType").WEBC_QUERY_TRIGGER_TYPE],webcMessageQueryType:[3,d("WAWebWamEnumWebcMessageQueryDirection").WEBC_MESSAGE_QUERY_DIRECTION],webcOtherMessageCount:[18,a.TYPES.INTEGER],webcPhotoMessageCount:[7,a.TYPES.INTEGER],webcPttMessageCount:[15,a.TYPES.INTEGER],webcQueryT:[9,a.TYPES.TIMER],webcResponseBytes:[10,a.TYPES.INTEGER],webcStickerMessageCount:[17,a.TYPES.INTEGER],webcTextMessageCount:[5,a.TYPES.INTEGER],webcVideoMessageCount:[6,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcMessageQuery:[]});g.WebcMessageQueryWamEvent=b}),98);
__d("WAWebMsgCountReporter",["WAWebMsgType","WAWebWebcMessageQueryWamEvent"],(function(a,b,c,d,e,f,g){function a(a){return new(d("WAWebWebcMessageQueryWamEvent").WebcMessageQueryWamEvent)({webcResponseBytes:0,webcMessageCount:0,webcTextMessageCount:0,webcVideoMessageCount:0,webcPhotoMessageCount:0,webcAudioMessageCount:0,webcPttMessageCount:0,webcStickerMessageCount:0,webcDocumentMessageCount:0,webcOtherMessageCount:0,webcMessageQueryTrigger:a})}function b(a,b){a.webcMessageCount+=b.length;for(var c=0,e=b[c];c<b.length;++c,e=b[c])switch(e.type){case d("WAWebMsgType").MSG_TYPE.CHAT:case d("WAWebMsgType").MSG_TYPE.LOCATION:case d("WAWebMsgType").MSG_TYPE.PAYMENT:case d("WAWebMsgType").MSG_TYPE.VCARD:case d("WAWebMsgType").MSG_TYPE.CIPHERTEXT:case d("WAWebMsgType").MSG_TYPE.MULTI_VCARD:case d("WAWebMsgType").MSG_TYPE.REVOKED:case d("WAWebMsgType").MSG_TYPE.OVERSIZED:a.webcTextMessageCount+=1;break;case d("WAWebMsgType").MSG_TYPE.IMAGE:case d("WAWebMsgType").MSG_TYPE.PRODUCT:a.webcPhotoMessageCount+=1;break;case d("WAWebMsgType").MSG_TYPE.VIDEO:a.webcVideoMessageCount+=1;break;case d("WAWebMsgType").MSG_TYPE.AUDIO:a.webcAudioMessageCount+=1;break;case d("WAWebMsgType").MSG_TYPE.PTT:a.webcPttMessageCount+=1;break;case d("WAWebMsgType").MSG_TYPE.STICKER:a.webcStickerMessageCount+=1;break;case d("WAWebMsgType").MSG_TYPE.DOCUMENT:a.webcDocumentMessageCount+=1;break;default:a.webcOtherMessageCount+=1;break}}g.newMessageQueryEvent=a;g.logMessageCounts=b}),98);
__d("WAWebChatLoadMessages",["Promise","WAAbortError","WABackoffUtils","WAFilteredCatch","WALogger","WANullthrows","WAPromiseDelays","WAPromiseLoop","WARaceSignal","WAStorageEstimator","WAWebBackendErrors","WAWebChatConstants","WAWebCollectionConstants","WAWebMiscErrors","WAWebMsgCollection","WAWebMsgCountReporter","WAWebNetworkType","WAWebNewsletterGatingUtils","WAWebNewsletterGetMessageUpdatesAction","WAWebNewsletterPullMessagesFromServerAction","WAWebNewsletterSystemMessages","WAWebStateUtils","WAWebSyncGatingUtils","WAWebWamEnumWebcMessageQueryDirection","WAWebWamEnumWebcQueryTriggerType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:loadMsgs:error ",""]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=d("WAWebStateUtils").unproxy(a);c=c;c||(c=a.msgs);if(l(a,c))return(h||(h=b("Promise"))).resolve();if(c.msgLoadState.isLoadingRecentMsgs)return c.loadRecentPromise;a=(yield m(a,"after",c,d("WAWebWamEnumWebcQueryTriggerType").WEBC_QUERY_TRIGGER_TYPE.USER_SCROLL,e));c=a.msgs;return c});return j.apply(this,arguments)}function e(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a=d("WAWebStateUtils").unproxy(a);yield a.waitForChatLoading();var g=c;c=e!=null?e:d("WAWebWamEnumWebcQueryTriggerType").WEBC_QUERY_TRIGGER_TYPE.USER_SCROLL;g||(g=a.msgs);if(g.msgLoadState.noEarlierMsgs)return(h||(h=b("Promise"))).resolve();if(g.msgLoadState.isLoadingEarlierMsgs)return g.loadEarlierPromise;var i=g?g.head():null;if(a.isNewsletter&&i!=null&&d("WAWebNewsletterSystemMessages").isEarliestNewsletterSystemMsg(i)){g.msgLoadState.noEarlierMsgs=!0;return[]}e=function(){return i?i.msgChunk:g};c=(yield m(a,"before",g,c,f));f=c.msgs;c=c.hasMoreMsgs;e=e();e&&!c&&(e.msgLoadState.noEarlierMsgs=a.endOfHistoryTransferType!==d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE,d("WAWebSyncGatingUtils").isHistorySyncOnDemandEnabled()&&(e.msgLoadState.noEarlierMsgs=e.msgLoadState.noEarlierMsgs&&a.endOfHistoryTransferType!==d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY));return f});return k.apply(this,arguments)}function l(a,b){return a.msgs===b}function m(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g;b==="after"?g=c.last():g=c.head();var h={};g?h=g.id.clone():h.remote=a.id;h.count=d("WAWebCollectionConstants").PAGE_SIZE;h.direction=b;e=d("WAWebMsgCountReporter").newMessageQueryEvent(e);g=(yield p(a,g,c,d("WAWebMsgCollection").MsgCollection.findQuery.bind(d("WAWebMsgCollection").MsgCollection,h),b,e,!0,f));a.isNewsletter&&d("WAWebNewsletterGatingUtils").isNewsletterReactionEnabled()&&(yield d("WAWebNewsletterGetMessageUpdatesAction").maybeUpdateMsgsAddOns(g,a));if(g.length===d("WAWebCollectionConstants").PAGE_SIZE||!a.isNewsletter||!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return{msgs:g,hasMoreMsgs:g.length===d("WAWebCollectionConstants").PAGE_SIZE};try{h=g[0];if(b==="before"&&h!=null&&d("WAWebNewsletterSystemMessages").isNewsletterSystemMsg(h))return{msgs:g,hasMoreMsgs:!1};e=g.length>d("WAWebCollectionConstants").PAGE_SIZE;f=e?[]:yield d("WAWebNewsletterPullMessagesFromServerAction").pullNewsletterMessagesFromServer(a,{messageCount:d("WAWebCollectionConstants").PAGE_SIZE-g.length,cursor:o(c,b,g),resetUnreadCount:!0});h=b==="before"?f.concat(g):g.concat(f);e=h.length>=d("WAWebCollectionConstants").PAGE_SIZE;c=h[0];if(b==="before"&&!e&&(c==null||!d("WAWebNewsletterSystemMessages").isNewsletterSystemMsg(c))){f=(yield d("WAWebNewsletterSystemMessages").addSystemMessagesToChat(a));h.unshift.apply(h,f)}return{msgs:h,hasMoreMsgs:e}}catch(a){return{msgs:g,hasMoreMsgs:!0}}});return n.apply(this,arguments)}function o(a,b,c){c=c.length>0?c:a.toArray();c=b==="before"?(a=c[0])==null?void 0:a.serverId:(a=c[c.length-1])==null?void 0:a.serverId;return c==null?null:(a={},a[b]=c,a)}function p(a,e,f,g,j,k,l,m){l===void 0&&(l=!0);var n=d("WAWebStateUtils").unproxy(a),o=self.performance.now();j==="after"?(f.msgLoadState.isLoadingRecentMsgs=!0,k.webcMessageQueryType=d("WAWebWamEnumWebcMessageQueryDirection").WEBC_MESSAGE_QUERY_DIRECTION.LOAD_NEXT):j==="before"?(f.msgLoadState.isLoadingEarlierMsgs=!0,k.webcMessageQueryType=d("WAWebWamEnumWebcMessageQueryDirection").WEBC_MESSAGE_QUERY_DIRECTION.LOAD_PREV):j==="around"&&(f.msgLoadState.isLoadingAroundMsgs=!0,k.webcMessageQueryType=d("WAWebWamEnumWebcMessageQueryDirection").WEBC_MESSAGE_QUERY_DIRECTION.LOAD_AROUND);k.webcBrowserNetworkType=d("WAWebNetworkType").getEffectiveNetworkType();k.webcChatType=n.getWebcChatType();typeof n.initialIndex==="number"&&(k.webcChatPosition=n.initialIndex);a=c("WARaceSignal")([m,n.deleteSignal].filter(Boolean),function(a){return d("WAPromiseLoop").promiseLoop(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c,l,m){if(a.aborted)throw new(d("WAAbortError").AbortError)();l=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(m,12e4,1e3,.1));var p=(h||(h=b("Promise"))).resolve();try{yield p;p=(yield g());if(a.aborted)throw new(d("WAAbortError").AbortError)();k.webcQueryT=Math.ceil(self.performance.now()-o);var r;Array.isArray(p[0])?(r=p[0][0],p.forEach(function(a){return d("WAWebMsgCountReporter").logMessageCounts(k,a)})):(r=p[0],d("WAWebMsgCountReporter").logMessageCounts(k,p));r&&(k.webcEarliestMessageT=r.t,r.msgChunk===n.msgs&&(k.webcEarliestMessageIndex=n.msgs.length-1));d("WAStorageEstimator").estimateStorage().then(function(a){if(a.success){a=a.value;var b=a.quota;a=a.usage;k.webcBrowserStorageQuotaBytes=b;k.webcBrowserStorageQuotaUsedBytes=a}})["finally"](function(){return k.commit()});q(e,f,j);c(p)}catch(a){if(a.name===d("WAAbortError").ABORT_ERROR)throw a;if(m>3||a===404){q(e,f,j);d("WALogger").WARN(i(),String(a));return a===404?(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E404)()):(h||(h=b("Promise"))).reject(new(d("WAWebMiscErrors").GaveUpRetry)("Gave up msg fetch after "+m+" tries"))}return l}});return function(a,b,d){return c.apply(this,arguments)}}(),0)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GaveUpRetry,function(){return[]}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(a){if(l)return[];throw a}));j==="after"?f.loadRecentPromise=a:j==="before"?f.loadEarlierPromise=a:j==="around"&&(f.loadAroundPromise=a);return a}function q(a,b,d){var e=(a==null?void 0:a.msgChunk)&&a.msgChunk!==b;b.msgLoadState.contextLoaded=!0;a&&e&&(c("WANullthrows")(a.msgChunk).msgLoadState.contextLoaded=!0);d==="after"?b.msgLoadState.isLoadingRecentMsgs=!1:d==="before"?b.msgLoadState.isLoadingEarlierMsgs=!1:d==="around"&&(b.msgLoadState.isLoadingAroundMsgs=!1)}g.loadRecentMsgs=a;g.loadEarlierMsgs=e;g.loadMsgsPromiseLoop=p}),98);
__d("WAWebChatMedia",["Promise","WAWebCarouselMsgUtils","WAWebChatMediaMsgsCollection","WAWebFrontendMsgGetters","WAWebMsgGetters","WAWebMsgLinks","WAWebStateUtils"],(function(a,b,c,d,e,f,g){var h;function a(a){a=d("WAWebStateUtils").unproxy(a);var b=a.mediaMsgs,c=a.linkMsgs,e=a.docMsgs,f=a.productMsgs;b&&(b["delete"](),b.queryMedia({chat:a}));c&&(c["delete"](),c.queryLinks(a));e&&(e["delete"](),e.queryDocs(a));f&&(f["delete"](),f.queryProducts(a))}function i(a){return d("WAWebMsgGetters").getIsMedia(a)&&!a.isViewOnce}function e(a,b,c){if(!b)return;a=d("WAWebStateUtils").unproxy(a);b=d("WAWebCarouselMsgUtils").flattenMsgs(Array.isArray(b)?b:[b]);var e=[],f=[],g=[],h=[];b.forEach(function(a){i(a)&&e.push(a),d("WAWebFrontendMsgGetters").getAsDoc(a)&&g.push(a),d("WAWebMsgLinks").getGalleryLinks(a).some(function(b){return b.href!==a.matchedText})&&f.push(a),d("WAWebFrontendMsgGetters").getAsProduct(a)!=null&&h.push(a)});b=a.mediaMsgs;if(b&&e.length){var j=babelHelpers["extends"]({},c,{silent:!1});b.add(e,j)}a.linkMsgs&&f.length&&a.linkMsgs.add(f,c);a.docMsgs&&g.length&&a.docMsgs.add(g,c);a.productMsgs&&h.length&&a.productMsgs.add(h,c)}function f(a,b){a=d("WAWebStateUtils").unproxy(a);if(!b)return a.getMediaMsgs();if(b.isViewOnce)return new(c("WAWebChatMediaMsgsCollection"))();a.getMediaMsgs().includes(b)||b.msgChunk===a.msgs?(a=a.getMediaMsgs(),a.hasMediaAfter=!1):a=new(c("WAWebChatMediaMsgsCollection"))();if(!a.includes(b)){b=b.msgChunk!=null?b.msgChunk.slice():[b];b=d("WAWebCarouselMsgUtils").flattenMsgs(b);a.add(b.filter(i))}return a}function j(a){var c=d("WAWebStateUtils").unproxy(a);return c.promises.sendDelete!=null?(h||(h=b("Promise"))).resolve(0):(h||(h=b("Promise"))).all([c.getMediaMsgs(),c.getLinkMsgs(),c.getDocMsgs()].map(function(a){return a.count(c)})).then(function(a){return a.reduce(function(a,b){return a+((a=b)!=null?a:0)},0)})}g.resetMediaMsgs=a;g.addMediaMsgs=e;g.constructMediaMsgs=f;g.countAllMedia=j}),98);
__d("WAWebChatMediaMsgsCollection",["Promise","WAFilteredCatch","WALogger","WAWebBackendErrors","WAWebBaseCollection","WAWebCarouselMsgUtils","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to count medias for chat ",""]);i=function(){return a};return a}var j={before:"before",after:"after"};function k(a){return d("WAWebMsgGetters").getIsMedia(a)&&!a.isViewOnce}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=e=a.call.apply(a,[this].concat(g))||this,e.hasMediaBefore=!0,e.hasMediaAfter=!0,e.$ChatMediaMsgsCollection1=null,e.count=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(e.$ChatMediaMsgsCollection1!=null)return e.$ChatMediaMsgsCollection1;var c=a.msgs.filter(k);b=(b=c[0])!=null?b:a.msgs.head();if(b==null)return 0;try{b=(yield d("WAWebMsgCollection").MsgCollection.queryMedia(b.id.remote,Infinity,"before",b.id));b=(b=b.mediaCount)!=null?b:0;var f=b>0&&c.length>0?1:0;e.$ChatMediaMsgsCollection1=b+c.length-f;return e.$ChatMediaMsgsCollection1}catch(b){d("WALogger").ERROR(i(),a.id).verbose().devConsole(b).sendLogs("md-failed-medias-count: "+b.message);return null}});return function(b){return a.apply(this,arguments)}}(),c)||babelHelpers.assertThisInitialized(e)}var e=c.prototype;e["delete"]=function(){a.prototype["delete"].call(this),this.stopListening()};e.add=function(b,c){this.$ChatMediaMsgsCollection1=null;return a.prototype.add.call(this,b,c)};e.remove=function(b,c){this.$ChatMediaMsgsCollection1=null;return a.prototype.remove.call(this,b,c)};e.getAfter=function(a){a=this.indexOf(a);return a<0||a===this.length-1?null:this.at(a+1)};e.getBefore=function(a){a=this.indexOf(a);return a<=0?null:this.at(a-1)};e.loadEarlierMedias=function(){var a=this.head();if(!a)return;if(a.isCarouselCard){var b;a=(b=d("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(a))!=null?b:a}this.queryMedia({msg:a})};e.loadRecentMedias=function(){var a=this.last();if(!a)return;if(a.isCarouselCard){var b;a=(b=d("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(a))!=null?b:a}this.queryMedia({msg:a,direction:j.after})};e.loadMoreAroundIfNeeded=function(a){if(!a||a.isViewOnce)return;a=this.indexOf(a);a<20&&this.hasMediaBefore&&this.loadEarlierMedias();this.length-a<20&&this.hasMediaAfter&&this.loadRecentMedias()};e.queryMedia=function(a){var c=this,e=a.chat,f=a.msg;a=(a=a.direction)!=null?a:j.before;if(!f&&e){var g=e.msgs;if(!g||g.length===0){this.hasMediaBefore=!1;return new(h||(h=b("Promise")))(function(a){a({eof:!0})})}this.add(g.filter(k),{at:0});var i=this.toArray();if(e.msgs.msgLoadState.noEarlierMsgs){this.hasMediaBefore=!1;return new(h||(h=b("Promise")))(function(a){a({eof:!0})})}else if(i.length<=2*d("WAWebMsgCollection").MEDIA_QUERY_LIMIT){g=i.length===0?g.head():i[0];return this.queryMedia({chat:e,msg:g})}return new(h||(h=b("Promise")))(function(a){a({eof:!1})})}if(f&&a===j.before){if(this.queryMediaBefore)return this.queryMediaBefore;var m=0;this.queryMediaBefore=d("WAWebMsgCollection").MsgCollection.queryMedia(f.id.remote,d("WAWebMsgCollection").MEDIA_QUERY_LIMIT,a,d("WAWebMsgGetters").getIsMedia(f)?f.id:void 0).then(function(b){b=b.messages;(!b||b.length<d("WAWebMsgCollection").MEDIA_QUERY_LIMIT)&&(c.hasMediaBefore=!1);var a=[];b&&b.length>0&&(a=l(b));c.add(a,{at:0});m=a.length;return{length:m}})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){return void 0}))["finally"](function(){c.queryMediaBefore=null,c.trigger("query_media_before",m)});this.trigger("query_media_before",0);return this.queryMediaBefore}else if(f&&a===j.after)return this.queryMediaAfter?this.queryMediaAfter:this.queryMediaAfter=d("WAWebMsgCollection").MsgCollection.queryMedia(f.id.remote,d("WAWebMsgCollection").MEDIA_QUERY_LIMIT,a,f.id).then(function(b){b=b.messages;(!b||b.length<d("WAWebMsgCollection").MEDIA_QUERY_LIMIT)&&(c.hasMediaAfter=!1);var a=[];b&&b.length>0&&(a=l(b));c.add(a);return{length:a.length}})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){return void 0}))["finally"](function(){c.queryMediaAfter=null,c.trigger("query_media_after")})};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;a.comparator=function(a,b){return a.t-b.t};function l(a){return d("WAWebCarouselMsgUtils").flattenMsgs(a).filter(k)}g["default"]=a}),98);
__d("WAWebChatSearchFilters",["$InternalEnum"],(function(a,b,c,d,e,f){var g=b("$InternalEnum")({UNREAD:"unread",FAVORITES:"favorites",GROUP:"group",BROADCAST:"broadcast",CONTACT:"contact",NON_CONTACT:"non_contact",ASSIGNED_TO_YOU:"assigned_to_you",PERSONAL:"personal",BUSINESS:"business",LABELS:"labels"});a=function(a){switch(a){case g.UNREAD:case g.ASSIGNED_TO_YOU:case g.CONTACT:case g.GROUP:case g.LABELS:case g.FAVORITES:return!0;case g.BROADCAST:case g.NON_CONTACT:case g.BUSINESS:case g.PERSONAL:return!1}};c=function(a){switch(a){case g.UNREAD:case g.ASSIGNED_TO_YOU:return!0;case g.BROADCAST:case g.NON_CONTACT:case g.BUSINESS:case g.PERSONAL:case g.CONTACT:case g.GROUP:case g.LABELS:case g.FAVORITES:return!1}};f.SearchFilters=g;f.isFilterExcludedFromSearchTreatmentInInboxFlow=a;f.isFilterExcludedFromSearchTreatmentInNormalFlow=c}),66);
__d("WAWebChatMessageSearch",["WANullthrows","WAWebChatAssignmentUtils","WAWebChatConstants","WAWebChatLoadMessages","WAWebChatMsgsCollection","WAWebChatSearchFilters","WAWebCollectionConstants","WAWebContactGetters","WAWebMsgCollection","WAWebMsgCountReporter","WAWebMsgKey","WAWebMsgModel","WAWebStateUtils","WAWebWamEnumWebcQueryTriggerType","lodash"],(function(a,b,c,d,e,f,g){function a(a,b,e){var f=d("WAWebStateUtils").unproxy(a),g=null,h;b instanceof d("WAWebMsgModel").Msg?g=b:b instanceof c("WAWebMsgKey")&&(h=b);var i=g?g.msgChunk:void 0,j=Math.trunc(d("WAWebCollectionConstants").PAGE_SIZE/3*2);if(!i||!i.msgLoadState.contextLoaded){i||(i=new(d("WAWebChatMsgsCollection").ChatMsgsCollection)(),f.msgChunks.push(i),g&&i.add(g));a=g?g.id.clone():h.clone();a.count=j;a.serverId=(b=g)==null?void 0:b.serverId;var k=function(){if(g)return g.msgChunk;if(h!=null){var a=d("WAWebMsgCollection").MsgCollection.get(h);return(a==null?void 0:a.msgChunk)?a.msgChunk:i}return i};b=d("WAWebMsgCountReporter").newMessageQueryEvent(d("WAWebWamEnumWebcQueryTriggerType").WEBC_QUERY_TRIGGER_TYPE.SEARCH_RESULT_CLICK);d("WAWebChatLoadMessages").loadMsgsPromiseLoop(f,g,i,d("WAWebMsgCollection").MsgCollection.getContext.bind(d("WAWebMsgCollection").MsgCollection,a,k),"around",b,e==null).then(function(a){var b=k();b&&i&&b!==i&&f.notifyMsgCollectionMerge(b,i,b);b=a[0];a=h?d("WAWebMsgCollection").MsgCollection.get(h):g;a&&Array.isArray(b)&&b.length<j&&(c("WANullthrows")(a.msgChunk).msgLoadState.noEarlierMsgs=f.endOfHistoryTransferType!==d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE,i&&a.msgChunk!==i&&(i.msgLoadState.noEarlierMsgs=f.endOfHistoryTransferType!==d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE))})["catch"](function(){e&&(e.isQuotedMsgAvailable=!1)})}return{collection:i,msg:g,key:h,highlightMsg:!0}}function b(a,b,c,e){c===void 0&&(c=1);var f=d("WAWebStateUtils").unproxy(a);if(c===1){a=f.ftsCache[b];if(a)return a;a=d("WAWebMsgCollection").MsgCollection.search(b,c,e,f.id);f.ftsCache[b]=a;var g=function(){f.ftsCache[b]=null};self.setTimeout(g,d("WAWebChatConstants").FTS_TTL);a["catch"](g);return a}return d("WAWebMsgCollection").MsgCollection.search(b,c,e,f.id)}function e(a){a=d("WAWebStateUtils").unproxy(a);a.ftsCache={}}function h(a){return!!a.hasUnread&&!a.isBroadcast||d("WAWebChatAssignmentUtils").canAssignChats()&&a.isAssignedToMe&&a.unopenedByAssignedAgent}function f(a,b){b===void 0&&(b={});a=d("WAWebStateUtils").unproxy(a);if(c("lodash").isEmpty(b))return!0;if(b.label)return a.labels!=null&&a.labels.includes(b.label);if(b.kind===d("WAWebChatSearchFilters").SearchFilters.UNREAD)return h(a);if(b.kind===d("WAWebChatSearchFilters").SearchFilters.FAVORITES)return a.isFavorite;if(b.kind===d("WAWebChatSearchFilters").SearchFilters.CONTACT)return d("WAWebContactGetters").getIsMyContact(a.contact)&&!d("WAWebContactGetters").getIsGroup(a.contact)&&!a.isBroadcast;if(b.kind===d("WAWebChatSearchFilters").SearchFilters.NON_CONTACT)return!d("WAWebContactGetters").getIsMyContact(a.contact)&&!d("WAWebContactGetters").getIsGroup(a.contact)&&!a.isBroadcast;return b.kind===d("WAWebChatSearchFilters").SearchFilters.ASSIGNED_TO_YOU?d("WAWebChatAssignmentUtils").canAssignChats()&&a.isAssignedToMe:a.kind!=null&&b.kind===d("WAWebChatSearchFilters").SearchFilters.cast(a.kind)}g.getSearchContext=a;g.fts=b;g.clearFtsCache=e;g.isUnreadFilterMatch=h;g.matchFilter=f}),98);
__d("WAInOrderPromiseQueue",["Promise","WAAbortError","WAPromiseRaceAbort"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){this.$1=(h||(h=b("Promise"))).resolve(),this.$3=new AbortController(),this.$2=[]}var e=a.prototype;e.enqueue=function(a){var b=this;a["catch"](function(){});var e=function(){return a},f=this.$3.signal;this.$1=this.$1.then(e,e);var g=c("WAPromiseRaceAbort")(this.$1,f)["catch"](d("WAAbortError").catchAbort(function(a){var c;throw(c=b.$4)!=null?c:a}));this.$2.push(g);return g["finally"](function(){b.$2.length>0&&b.$2[0]===g&&b.$2.shift()})};e.cancelAll=function(a){this.$4=a,this.$2=[],this.$3.abort(),this.$3=new AbortController()};return a}();g["default"]=a}),98);
__d("WAWebChatLockGatingUtils",["WAWebABProps","WAWebTopMenuRedesignGatingUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WAWebABProps").getABPropConfigValue("web_chatlock_enabled")}function b(){return!1}g.chatLockEnabled=a;g.chatLockSideNavEnabled=b}),98);
__d("WAWebChatModelDerivedMethods",["WAWebABProps","WAWebChatFlowTypes","WAWebChatGroupUtils","WAWebConstantsDeprecated","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebPollsGatingUtils","WAWebWamEnumMdChatAssignmentChatType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.unreadCount;a=a.pendingSeenCount;return b===c("WAWebConstantsDeprecated").MARKED_AS_UNREAD?b:Math.max(0,b-a)}function b(a){var b=a.kind;if(b!=null)switch(b){case d("WAWebChatFlowTypes").ChatKindType.Chat:return d("WAWebWamEnumMdChatAssignmentChatType").MD_CHAT_ASSIGNMENT_CHAT_TYPE.INDIVIDUAL;case d("WAWebChatFlowTypes").ChatKindType.Group:return d("WAWebWamEnumMdChatAssignmentChatType").MD_CHAT_ASSIGNMENT_CHAT_TYPE.GROUP;case d("WAWebChatFlowTypes").ChatKindType.Broadcast:return d("WAWebWamEnumMdChatAssignmentChatType").MD_CHAT_ASSIGNMENT_CHAT_TYPE.BROADCAST_LIST;case d("WAWebChatFlowTypes").ChatKindType.Newsletter:return d("WAWebWamEnumMdChatAssignmentChatType").MD_CHAT_ASSIGNMENT_CHAT_TYPE.CHANNEL;case d("WAWebChatFlowTypes").ChatKindType.Community:return d("WAWebWamEnumMdChatAssignmentChatType").MD_CHAT_ASSIGNMENT_CHAT_TYPE.COMMUNITY}else throw new TypeError("Invalid Chat.kind "+String(a.kind))}function e(a){return a.type!==d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION&&(a.type!==d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE||a.subtype==="chat_assignment"||a.subtype==="chat_assignment_unassign")&&a.type!==d("WAWebMsgType").MSG_TYPE.REACTION&&a.type!==d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&a.type!==d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT&&a.subtype!=="newsletter_admin_context_card"&&a.subtype!=="newsletter_privacy"&&!a.pendingDeleteForMe&&a.botPluginReferenceIndex==null}function f(a){if(a.isNewsletter)return d("WAWebNewsletterGatingUtils").isNewsletterPollsCreationEnabled();if(a.groupMetadata==null)return!0;return a.isCAG?d("WAWebChatGroupUtils").getGroupParticipantsCount(a.groupMetadata)<=d("WAWebABProps").getABPropConfigValue("pnh_cag_disable_polls_group_size")&&d("WAWebPollsGatingUtils").isPollsCreationEnabledInCags():!0}g.getOptimisticUnreadCount=a;g.getMdChatAssignmentChatTypeFn=b;g.isPreviewMessage=e;g.canSendPolls=f}),98);
__d("WAWebChatParticipantColor",["WALogger","WAMd5","WAWebContactGetters","WAWebStateUtils","WAWebUserPrefsGeneral","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["received a null sender wid when getting assigned color"]);h=function(){return a};return a}function i(a){var b;a=d("WAWebStateUtils").unproxy(a);if(!a.colors)return;b=(b=(b=a.groupMetadata)==null?void 0:b.participants)!=null?b:[];var e=a.colors;b=c("lodash").difference(Object.keys(e),b.map(function(a){return a.id.toString()}).map(c("WAMd5")));b.forEach(function(a){delete e[a]});b.length&&a.saveAssignedColorsDebounced()}function j(a){a=d("WAWebStateUtils").unproxy(a);a.groupMetadata&&a.listenTo(a.groupMetadata.participants,"remove reset",i);return d("WAWebUserPrefsGeneral").getGroupParticipantAssignedColor(a.id)}function a(a){a=d("WAWebStateUtils").unproxy(a);var b=a.colors;b&&d("WAWebUserPrefsGeneral").setGroupParticipantAssignedColor(a.id,b)}function b(a,b){a=d("WAWebStateUtils").unproxy(a);if(d("WAWebContactGetters").getIsNewsletter(a))return 1;if(b==null){d("WALogger").WARN(h()).tags("messaging").devConsole(a).sendLogs("unexpected null sender wid for getting assigned color");return 1}var e=a.colors||(a.colors=j(a)),f;b=c("WAMd5")(b.toString());if(f=e[b])return f;var g={};c("lodash").forOwn(e,function(a,b){g[a]?g[a].push(b):g[a]=[b]});var i=Number.POSITIVE_INFINITY,k=17;for(var l=1;l<=k;l++)if(!g[l]){f=l;break}else g[l].length<i&&(i=g[l].length,f=l);e[b]=f;a.saveAssignedColorsDebounced();return f}g.saveAssignedColors=a;g.getAssignedColor=b}),98);
__d("WAWebEphemeralKeepInChatAbpropUtils",["WAWebABProps","WAWebRevokeMsgConstants"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("keep_in_chat_undo_duration_limit")||d("WAWebRevokeMsgConstants").REVOKE_WINDOW}function b(){return d("WAWebABProps").getABPropConfigValue("supports_keep_in_chat_in_cag")}g.getUndoKeepInChatExpiration=a;g.isKeepInChatInCAGEnabled=b}),98);
__d("WAWebSetSettingsAction",["Promise","WALogger"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Settings:setArchiveEnabledSetting is not supported on MD Companion device."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Settings:setArchiveClassicSetting is not supported on MD Companion device."]);j=function(){return a};return a}function a(a){d("WALogger").ERROR(j());return(h||(h=b("Promise"))).resolve()}function c(a){d("WALogger").ERROR(i())}g.setArchiveClassicSetting=a;g.setArchiveEnabledSetting=c}),98);
__d("WAWebChatModel",["fbt","Promise","WAFilteredCatch","WAInOrderPromiseQueue","WALogger","WANullthrows","WAWebABProps","WAWebAck","WAWebAlarm","WAWebBackendErrors","WAWebBaseModel","WAWebBizGatingUtils","WAWebBizLabelUtils","WAWebBotGating","WAWebChatAssignmentCollection","WAWebChatCollection","WAWebChatConstants","WAWebChatDocMsgsCollection","WAWebChatEphemerality","WAWebChatFlowTypes","WAWebChatGroupUtils","WAWebChatLinkMsgsCollection","WAWebChatLoadMessages","WAWebChatLockGatingUtils","WAWebChatMedia","WAWebChatMediaMsgsCollection","WAWebChatMessageSearch","WAWebChatModelDerivedMethods","WAWebChatParticipantColor","WAWebChatProductMsgsCollection","WAWebChatUpdates","WAWebCmd","WAWebConnModel","WAWebConstantsDeprecated","WAWebContactCollection","WAWebContactGetters","WAWebDBEphemeralMessage","WAWebDBUpdateChatTable","WAWebDBUpdateContactTable","WAWebDraftMessageChatGatingUtils","WAWebEphemeralKeepInChatAbpropUtils","WAWebEventsWaitForBbEvent","WAWebFavoriteCollection","WAWebFrontendMsgGetters","WAWebGroupMetadataCollection","WAWebGroupType","WAWebGroupUnreadMessageType","WAWebHandleNewMsgAction","WAWebKeptMsgCollection","WAWebL10N","WAWebLastAddOnDBSerialization","WAWebMedia","WAWebMsgDataFromModel","WAWebMsgGetters","WAWebMsgLinks","WAWebMsgModelUtils","WAWebMsgType","WAWebMuteCollection","WAWebNewsletterCollection","WAWebNewsletterMetadataCollection","WAWebOTPLoggingHelper","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebPresenceChatAction","WAWebPresenceCollection","WAWebPrivacyModeSystemMsg","WAWebProductCatalogMessage","WAWebQuotedMsgModelUtils","WAWebSendSpamChatAction","WAWebSetArchiveChatActionUtils","WAWebSetSettingsAction","WAWebStarredMsgCollection","WAWebSuperChatMsgs","WAWebTos","WAWebTrustedContactsUtils","WAWebUnreadMentionModel","WAWebUpdateDraftMessageChatAction","WAWebUpdateLastAddOnPreviewChatAction","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebViewOnceState","WAWebWamEnumChatAssignmentChatType","WAWebWamEnumWebcChatType","WAWebWid","asyncToGeneratorRuntime","gkx","lodash"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:_updateIsAnnounceGrpRestrict:old ",", new: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:onEmptyMRM failed\n",""],["chat:onEmptyMRM failed\\n",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Chat:removeMsg 0 messages left, querying..."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:preload failed\n",""],["chat:preload failed\\n",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:onPendingActionUpdate pendingAction value is invalid"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat:unknown kind id:",""]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.t=d("WAWebBaseModel").prop(),e.unreadCount=d("WAWebBaseModel").prop(0),e.unreadDividerOffset=d("WAWebBaseModel").prop(0),e.archive=d("WAWebBaseModel").prop(),e.isReadOnly=d("WAWebBaseModel").prop(),e.isLocked=d("WAWebBaseModel").prop(),e.isAnnounceGrpRestrict=d("WAWebBaseModel").prop(),e.modifyTag=d("WAWebBaseModel").prop(),e.muteExpiration=d("WAWebBaseModel").prop(0),e.isAutoMuted=d("WAWebBaseModel").prop(!1),e.name=d("WAWebBaseModel").prop(),e.notSpam=d("WAWebBaseModel").prop(),e.pin=d("WAWebBaseModel").prop(),e.labels=d("WAWebBaseModel").prop(),e.changeNumberOldJid=d("WAWebBaseModel").prop(),e.changeNumberNewJid=d("WAWebBaseModel").prop(),e.lastReceivedKey=d("WAWebBaseModel").prop(),e.ephemeralDuration=d("WAWebBaseModel").prop(),e.ephemeralSettingTimestamp=d("WAWebBaseModel").prop(),e.disappearingModeInitiator=d("WAWebBaseModel").prop(),e.disappearingModeTrigger=d("WAWebBaseModel").prop(),e.disappearingModeInitiatedByMe=d("WAWebBaseModel").prop(),e.createdLocally=d("WAWebBaseModel").session(),e.pendingAction=d("WAWebBaseModel").session(),e.formattedTitle=d("WAWebBaseModel").session(),e.active=d("WAWebBaseModel").session(),e.pausedTimerId=d("WAWebBaseModel").session(),e.presenceResendTimerId=d("WAWebBaseModel").session(),e.recording=d("WAWebBaseModel").session(),e.typing=d("WAWebBaseModel").session(),e.colors=d("WAWebBaseModel").session(),e.composeContents=d("WAWebBaseModel").session(function(){return{}}),e.attachMediaContents=d("WAWebBaseModel").session(),e.isComposingPoll=d("WAWebBaseModel").session(!1),e.pttRecordingSession=d("WAWebBaseModel").session(),e.squelch=d("WAWebBaseModel").session(),e.reactionSquelch=d("WAWebBaseModel").session(),e.pendingSeenCount=d("WAWebBaseModel").session(0),e.unreadMsgAnchor=d("WAWebBaseModel").session(),e.markedUnread=d("WAWebBaseModel").session(),e.trusted=d("WAWebBaseModel").session(),e.canSend=d("WAWebBaseModel").session(),e.showUnreadInTitle=d("WAWebBaseModel").session(!1),e.activeUnreadCount=d("WAWebBaseModel").session(),e.isFavorite=d("WAWebBaseModel").session(!1),e.promises=d("WAWebBaseModel").session(function(){return{}}),e.ftsCache=d("WAWebBaseModel").session(function(){return{}}),e.composeQuotedMsg=d("WAWebBaseModel").session(),e.composeQuotedMsgRemoteJid=d("WAWebBaseModel").session(),e.quotedMsgAdminGroupJid=d("WAWebBaseModel").session(),e.quotedMsgAdminGroupSubject=d("WAWebBaseModel").session(),e.quotedMsgAdminParentGroupJid=d("WAWebBaseModel").session(),e.groupMetadata=d("WAWebBaseModel").session(),e.newsletterMetadata=d("WAWebBaseModel").session(),e.presence=d("WAWebBaseModel").session(),e.mute=d("WAWebBaseModel").session(),e.contact=d("WAWebBaseModel").session(),e.mediaCount=d("WAWebBaseModel").session(0),e.linkCount=d("WAWebBaseModel").session(0),e.docCount=d("WAWebBaseModel").session(0),e.productCount=d("WAWebBaseModel").session(0),e.pendingDeleteForMeCount=d("WAWebBaseModel").session(0),e.isParentGroup=d("WAWebBaseModel").session(),e.unreadMentionsOfMe=d("WAWebBaseModel").prop(),e.unreadMentionCount=d("WAWebBaseModel").prop(),e.hasUnreadMention=d("WAWebBaseModel").prop(!1),e.archiveAtMentionViewedInDrawer=d("WAWebBaseModel").prop(!1),e.hasChatBeenOpened=d("WAWebBaseModel").prop(!1),e.tcToken=d("WAWebBaseModel").prop(),e.tcTokenTimestamp=d("WAWebBaseModel").prop(),e.tcTokenSenderTimestamp=d("WAWebBaseModel").prop(),e.isDeprecated=d("WAWebBaseModel").prop(!1),e.msgUnsyncedButtonReplyMsgs=d("WAWebBaseModel").prop(),e.endOfHistoryTransfer=d("WAWebBaseModel").session(!1),e.endOfHistoryTransferType=d("WAWebBaseModel").prop(),e.pendingInitialLoading=d("WAWebBaseModel").prop(!1),e.lastReactionPreview=d("WAWebBaseModel").prop(),e.chatlistPreview=d("WAWebBaseModel").prop(),e.previewT=d("WAWebBaseModel").prop(),e.unopenedByAssignedAgent=d("WAWebBaseModel").session(!1),e.isAssignedToMe=d("WAWebBaseModel").session(!1),e.assignedAgent=d("WAWebBaseModel").session(),e.unreadEditTimestampMs=d("WAWebBaseModel").prop(),e.celebrationAnimationLastPlayed=d("WAWebBaseModel").prop(0),e.animationCandidateData=d("WAWebBaseModel").prop(),e.draftMessage=d("WAWebBaseModel").prop(),e.draftMessageSortTs=d("WAWebBaseModel").session(),e.ephemeralDisplayedExemptions=d("WAWebBaseModel").prop(),e.hasOpened=d("WAWebBaseModel").prop(),e.botInitialTypingIndicatorMsgId=d("WAWebBaseModel").session(),e.hasCreatedBotInvokeSystemMsg=d("WAWebBaseModel").prop(),e.bizBotSystemMsgType=d("WAWebBaseModel").prop(),e.hasRequestedWelcomeMsg=d("WAWebBaseModel").prop(!1),e.lidOriginType=d("WAWebBaseModel").prop(),e.hasPreloaded=d("WAWebBaseModel").session(!1),e.chatEntryPoint=d("WAWebBaseModel").session(null),e.kind=d("WAWebBaseModel").derived(function(){if(c("WAWebWid").isGroup(this.id)){var a;return((a=this.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.COMMUNITY?d("WAWebChatFlowTypes").ChatKindType.Community:d("WAWebChatFlowTypes").ChatKindType.Group}else if(c("WAWebWid").isBroadcast(this.id))return d("WAWebChatFlowTypes").ChatKindType.Broadcast;else if(c("WAWebWid").isUser(this.id))return d("WAWebChatFlowTypes").ChatKindType.Chat;else if(this.isNewsletter)return d("WAWebChatFlowTypes").ChatKindType.Newsletter;d("WALogger").LOG(o(),this.id.toLogString());return void 0}),e.isUser=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isUser(this.id)}),e.isPSA=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isPSA(this.id)}),e.isIAS=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isIAS(this.id)}),e.isGroup=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isGroup(this.id)}),e.isCAG=d("WAWebBaseModel").derived(function(){var a;return this.isGroup&&((a=this.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP}),e.isBroadcast=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isBroadcast(this.id)}),e.isNewsletter=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isNewsletter(this.id)}),e.isBusinessGroup=d("WAWebBaseModel").derived(function(){var a;a=(a=this.groupMetadata)==null?void 0:a.participants.getAdmins();if(!a)return!1;for(a of a){var b=d("WAWebContactCollection").ContactCollection.get(a.id);if(b==null?void 0:b.isBusiness)return!0}return!1}),e.isEligibleForContactSync=d("WAWebBaseModel").derived(function(){return!this.isBroadcast&&!this.isPSA}),e.isE2ee=d("WAWebBaseModel").derived(function(){if(this.kind===d("WAWebChatFlowTypes").ChatKindType.Chat){var a=d("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(this.contact.privacyMode);if(a===d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB||a===d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP)return!1}return this.contact.isHosted===!0?!1:!0}),e.canUnread=d("WAWebBaseModel").derived(function(){return!this.isBroadcast}),e.hasUnread=d("WAWebBaseModel").derived(function(){return this.unreadCount!==0},["unreadCount"]),e.optimisticUnreadCount=d("WAWebBaseModel").derived(function(){return d("WAWebChatModelDerivedMethods").getOptimisticUnreadCount(this)},["unreadCount","pendingSeenCount"]),e.shouldShowUnreadDivider=d("WAWebBaseModel").derived(function(){if(this.unreadCount===0)return!1;if(this.unreadMsgAnchor){var a=this.unreadMsgAnchor.msgChunk;a=a?a.getModelsArray():[];return this.unreadMsgAnchor!==a.find(function(a){return d("WAWebMsgGetters").getIsUnreadType(a)})}else if(this.msgs.msgLoadState.noEarlierMsgs){a=this.msgs.filter(function(a){return d("WAWebMsgGetters").getIsUnreadType(a)});return a.length!==this.unreadCount}return!0},["unreadCount","unreadMsgAnchor"]),e.shouldAppearInList=d("WAWebBaseModel").derived(function(){if(d("WAWebChatLockGatingUtils").chatLockEnabled()&&this.isLocked)return!1;if(this.id.isBot()&&!d("WAWebBotGating").isBotEnabled())return!1;if(this.isBroadcast)return this.id.user==="chat"?!0:!1;if(c("WAWebWid").isStatusV3(this.id))return!1;if(this.endOfHistoryTransferType===d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC&&this.msgs.length===0)return!1;if(this.isGroup&&this.isParentGroup===!0)return!1;if(this._shouldAppearInListLatched)return!0;var a=this.msgs.some(function(a){return a.isRealMessage()});this._shouldAppearInListLatched=!this.createdLocally||a;return this._shouldAppearInListLatched},["createdLocally","msgs","msgsLength","isParentGroup","isLocked"]),e.previewMessage=d("WAWebBaseModel").derived(function(){for(var a=this.msgs.length-1;a>=0;a--){var b=this.msgs.at(a);if(b&&d("WAWebChatModelDerivedMethods").isPreviewMessage(b))return b}if(this.msgs.length>0)return this.msgs.last()},["msgs","msgsChanged","pendingDeleteForMeCount"]),e.showChangeNumberNotification=d("WAWebBaseModel").derived(function(){var a=this.changeNumberOldJid,b=this.changeNumberNewJid,c=this.id,e=this.isUser;if(!e)return!1;if(!a&&!b)return!1;e=d("WAWebContactCollection").ContactCollection.get(b||c);return e!=null&&d("WAWebContactGetters").getIsMyContact(e)?!1:!0},["changeNumberOldJid","changeNumberNewJid","id","isUser"]),e.deleteSignal=d("WAWebBaseModel").derived(function(){return this._abortController.signal}),e.derivedLastAddOnPreview=d("WAWebBaseModel").derived(function(){if(this.chatlistPreview)return this.chatlistPreview;var a=this.lastReactionPreview;if(a)return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewFromDeprecatedLastReactionPreview(a)},["chatlistPreview","lastReactionPreview"]),e.hasDraftMessage=d("WAWebBaseModel").derived(function(){var a;return d("WAWebDraftMessageChatGatingUtils").draftMessageEnabled()&&((a=this.draftMessage)==null?void 0:(a=a.text)==null?void 0:a.trim())!==""?!0:!1},["draftMessage"]),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.initialize=function(){var b=this;a.prototype.initialize.call(this);this.addQueue=new(c("WAInOrderPromiseQueue"))();this.sendQueue=new(c("WAInOrderPromiseQueue"))();this._ephemeralMessagesToDelete=new Set();this._ephemeralMessageTimerIds=new Map();this._abortController=new AbortController();this._updateDraftMessageSortTs();this.msgs.msgLoadState.contextLoaded=!0;this.addChild("presence",d("WAWebPresenceCollection").PresenceCollection.gadd(this.id));var e=d("WAWebMuteCollection").MuteCollection.get(this.id);e?this.addChild("mute",e):this.addChild("mute",d("WAWebMuteCollection").MuteCollection.gadd({id:this.id,expiration:this.muteExpiration,isAutoMuted:this.isAutoMuted}));this.listenTo(this.mute,"change:expiration",function(){return d("WAWebChatUpdates").updateMuteExpiration(b)});this.listenTo(this.mute,"change:isAutoMuted",function(){return d("WAWebChatUpdates").updateMuteExpiration(b)});this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd(this.id));if(this.name&&!this.contact.name){var f={name:this.name};this.isGroup?this.contact.set(f):this.isNewsletter?this.contact.set(f):d("WAWebDBUpdateContactTable").updateContactTable(this.contact.id,f).then(function(){b.contact.set(f)})}this.listenTo(this.contact,"change:name",function(){return d("WAWebChatGroupUtils").updateTitle(b)});this.listenTo(this.contact,"change:isContactBlocked",function(){return d("WAWebChatGroupUtils").updateCanSend(b)});this.listenTo(this,"change:isDeprecated",function(){return d("WAWebChatGroupUtils").updateCanSend(b)});this.listenTo(this,"change:isGroup change:archive change:optimisticUnreadCount change:muteExpiration change:isLocked",this._computeShowUnreadInTitle);this.listenTo(d("WAWebFavoriteCollection").FavoriteCollection,"add remove change",function(){b.isFavorite=!!d("WAWebFavoriteCollection").FavoriteCollection.get(b.id)});this.isGroup&&(this.trusted=!0);this.listenTo(d("WAWebTos").TosManager,"change",function(){return d("WAWebChatGroupUtils").updateCanSend(b)});this.listenTo(this.contact,"change:privacyMode",function(){return d("WAWebChatGroupUtils").updateCanSend(b)});if(this.isGroup||this.isBroadcast){e=this.getGroupMetadataCollection();var g;this.isBroadcast&&!e.get(this.id)&&(g=!0);var h=e.gadd(this.id);this.addChild("groupMetadata",h);this.listenTo(h,"change:stale change:announce",this._updateIsAnnounceGrpRestrict);this.listenTo(h,"change:groupType",this._computeShowUnreadInTitle);this.listenTo(h.participants,"change:isAdmin bulk_add bulk_remove",this._updateIsAnnounceGrpRestrict);this.listenTo(h,"change:trusted change:stale",this.isTrusted);this.listenTo(h,"change:participants change:stale change:suspended change:terminated",function(){d("WAWebChatGroupUtils").updateReadOnly(b)});this.listenTo(h.participants,"change:contact.formattedShortName",function(){return d("WAWebChatGroupUtils").updateTitle(b)});this._initializeUnreadMentions(h);this.listenTo(h.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMention);this.listenTo(h.unreadMentionMetadata,"change:pendingUnreadMentionCount",this._handleUnreadMention);this._updateIsAnnounceGrpRestrict();d("WAWebChatGroupUtils").updateReadOnly(this);var i=this.id;this.listenTo(this,"change:isAnnounceGrpRestrict",function(){d("WAWebChatGroupUtils").updateReadOnly(b),d("WAWebChatGroupUtils").updateCanSend(b)});this.listenTo(this,"change:archive",function(){b.archive===!0&&d("WAWebSetArchiveChatActionUtils").shouldEnableArchiveV2()&&d("WAWebSetSettingsAction").setArchiveEnabledSetting(!0)});this.listenTo(h,"change:isParentGroup",function(){b.isParentGroup=h.isParentGroup});this.isParentGroup=h.isParentGroup;g&&e.update(i)}else if(this.isNewsletter){e=this.getNewsletterMetadataCollection();i=e.gadd(this.id);this.addChild("newsletterMetadata",i);d("WAWebChatGroupUtils").updateReadOnly(this);d("WAWebChatGroupUtils").updateCanSend(this);this.listenTo(i,"change:membershipType",function(){d("WAWebChatGroupUtils").updateReadOnly(b),d("WAWebChatGroupUtils").updateCanSend(b)})}else this.listenTo(this.presence,"change:isOnline",function(){return d("WAWebPresenceChatAction").presenceOnlineChanged(b)});this.listenTo(this,"change:isReadOnly",function(){(this.isGroup||this.isNewsletter)&&(this.isTrusted(),d("WAWebChatGroupUtils").updateCanSend(this));if(this.isGroup){var a=this.getGroupMetadataCollection();a.update(this.id)}});e=this.getCollection();!!e.notSpam[this.id]&&!this.notSpam&&d("WAWebSendSpamChatAction").sendNotSpam(this)["catch"](function(){});e.notSpam[this.id]=!!this.notSpam;this.notSpam||this.listenTo(this,"change:notSpam",this._handleNotSpamChange);d("WAWebChatGroupUtils").updateTitle(this);this.isTrusted();d("WAWebChatGroupUtils").updateCanSend(this);this.listenTo(this.contact,"change:name",this.isTrusted);this.listenTo(this.msgs,"add",function(a){d("WAWebHandleNewMsgAction").handleNewMsgForChat(b,a)});this.listenTo(this.msgs,"update_sort_time",function(){return d("WAWebChatUpdates").updateSortTime(b)});this.listenTo(this.msgs,"bulk_add",function(a,c){return d("WAWebChatMedia").addMediaMsgs(b,a,c)});this.listenTo(this.msgs,"add",this._deregisterExpiredViewOnceMessage);this.listenTo(this.msgs,"bulk_add",this.deregisterExpiredViewOnceBulkMessages);this.listenTo(this.msgs,"add remove change:ephemeralExpirationTimestamp change:kicState",this._resetEphemeralMessageExpirationTimer);this.listenTo(this.msgs,"bulk_add",function(a){a.forEach(function(a){b._resetEphemeralMessageExpirationTimer(a)})});this.listenTo(this.msgs,"change:kicState",function(a){var c=b.keptMsgs;c&&(d("WAWebMsgGetters").getIsKept(a)?c.add(a):c.remove(a))});this.listenTo(this,"change:msgs",function(){return d("WAWebChatMedia").resetMediaMsgs(b)});this.saveAssignedColorsDebounced=c("lodash").debounce(function(){return d("WAWebChatParticipantColor").saveAssignedColors(b)},1e3);this.listenTo(this,"change:active",this._handleActiveUpdate);this.pendingAction=0;this.listenTo(this,"change:t change:modifyTag",function(){return d("WAWebChatMessageSearch").clearFtsCache(b)});this.listenTo(c("WAWebL10N"),"locale_change",function(){d("WAWebChatGroupUtils").updateTitle(b)});d("WAWebConnModel").Conn.isSMB&&(d("WAWebBizLabelUtils").initializeLabels(this),this._initializeChatAssignment());this._computeShowUnreadInTitle()};f._initializeChatAssignment=function(){var a=this;if(d("WAWebBizGatingUtils").chatAssignmentEnabled()){this.set("unopenedByAssignedAgent",d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getChatUnopenedStatus(this.id));var b=d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getAgentCollectionForChatId(this.id);this.set("isAssignedToMe",this._getIsAssignedToMe());this.set("assignedAgent",b.at(0));this.listenTo(b,"add remove change",function(){a.set("unopenedByAssignedAgent",d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getChatUnopenedStatus(a.id)),a.set("isAssignedToMe",a._getIsAssignedToMe()),a.set("assignedAgent",b.at(0))})}};f._initializeUnreadMentions=function(a){var b=this;if(this.unreadMentionsOfMe){var e=new Map(this.unreadMentionsOfMe.map(function(a){return[String(a.id),a]}));this.listenTo(this.msgs,"bulk_add",function(f){for(f of f){var g=f.id.toString();g=e.get(g);if(!g||!b.isUnreadMsg(f))continue;a.unreadMentionMetadata.addUnreadMentions([new(c("WAWebUnreadMentionModel"))(g)],d("WAWebGroupUnreadMessageType").UnreadMessageType.PERSISTANCE_LOAD)}})}this.unreadMentionCount!=null&&(a.unreadMentionMetadata.pendingUnreadMentionCount=this.unreadMentionCount);this._handleUnreadMention()};f._getIsAssignedToMe=function(){var a=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId();return d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getAgentCollectionForChatId(this.id).getModelsArray().some(function(b){return b.deviceId===a})};f._handleUnreadMention=function(){this.isGroup&&this.groupMetadata&&(this.hasUnreadMention=this.groupMetadata.unreadMentionMetadata.getUnreadMentionCount()>0)};f.set=function(b,c,d){typeof b==="string"?(b==="muteExpiration"&&this.mute&&this.mute.setMute(c),b==="isAutoMuted"&&this.mute&&this.mute.setAutoMuted(c)):Object.prototype.hasOwnProperty.call(b,"muteExpiration")&&this.mute&&this.mute.setMute(b.muteExpiration,b.isAutoMuted);a.prototype.set.call(this,b,c,d);return this};f.addPendingAction=function(a){var b=this,c=function(){b.decPending()};a.then(c,c);this.pendingAction++};f.decPending=function(){this.pendingAction>0?this.pendingAction--:(d("WALogger").LOG(n()),this.pendingAction=0)};f._updateDraftMessageSortTs=function(){if(this.hasDraftMessage===!0){var a;this.draftMessageSortTs=(a=this.draftMessage)==null?void 0:a.timestamp}else this.draftMessageSortTs=null};f._handleActiveUpdate=function(){var a=this;this.isGroup&&this.active&&(this.squelch=c("WAWebConstantsDeprecated").SQUELCH_RESET_VALUE,this.reactionSquelch=c("WAWebConstantsDeprecated").SQUELCH_RESET_VALUE,this.hasChatBeenOpened=!0);this.presence.chatActive=this.active;if(!this.active){d("WAWebDraftMessageChatGatingUtils").draftMessageEnabled()&&(this._updateDraftMessageSortTs(),this.getCollection().sort());this.msgs.filter(function(a){return d("WAWebViewOnceState").isExpired(a.safe())}).forEach(d("WAWebMedia").deregisterMsg);var e=Array.from(this._ephemeralMessagesToDelete);d("WAWebDBEphemeralMessage").removeExpiredMessagesFromHistory(e).then(function(){var c=e.map(function(a){return a.id.toString()});if(c.length>0){d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview(c);var f=b("WAWebPersistedJobManager").getJobManager;f().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.id.toString(),c))}});this._ephemeralMessagesToDelete.forEach(function(b){a._ephemeralMessagesToDelete["delete"](b),b["delete"]({skipUpdatingSortTime:!0,doNotResetLastReceived:!0})})}};f._handleNotSpamChange=function(){var a=this.getCollection();a.notSpam[this.id]=this.notSpam;this.isTrusted();this.notSpam&&this.stopListening(this,"change:notSpam")};f.senderMsgCount=function(){return this.getAllMsgs().filter(function(a){return!d("WAWebMsgGetters").getIsSentByMe(a)&&!d("WAWebMsgGetters").getIsNotification(a)}).length};f.isCAGAdmin=function(){var a;a=(a=this.groupMetadata)==null?void 0:a.participants.iAmAdmin();return a!=null?a&&this.isCAG:!1};f.hasMaybeSentMsgToChat=function(){return this.getAllMsgs().some(function(a){return d("WAWebMsgGetters").getIsSentByMe(a)})};f.isTrusted=function(){var a=!1;if(this.isGroup){var b;a=this.isReadOnly||this.notSpam||((b=this.groupMetadata)==null?void 0:b.isTrusted())}else this.isBroadcast?a=!0:this.isNewsletter?a=!0:this.isUser&&(a=this.notSpam||d("WAWebContactGetters").getIsMyContact(this.contact));!a&&this.hasMaybeSentMsgToChat()&&(a=!0);return this.trusted=Boolean(a)};f.isSuspendedOrTerminated=function(){if(this.isGroup){var a;return Boolean((a=this.groupMetadata)==null?void 0:a.isSuspendedOrTerminated())}else if(this.isNewsletter){return Boolean((a=this.newsletterMetadata)==null?void 0:a.isSuspendedOrTerminated)}return!1};f.canBlockFromNotification=function(){return d("WAWebABProps").getABPropConfigValue("block_from_notification")&&this.isUser&&!this.isTrusted()};f.canBeFavorite=function(){var a;return(this.isGroup&&((a=this.groupMetadata)==null?void 0:a.groupType)!==d("WAWebGroupType").GroupType.COMMUNITY&&((a=this.groupMetadata)==null?void 0:a.groupType)!==d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&((a=this.groupMetadata)==null?void 0:a.participants.iAmMember())&&!((a=this.groupMetadata)==null?void 0:a.isSuspendedOrTerminated())||this.kind===d("WAWebChatFlowTypes").ChatKindType.Chat&&d("WAWebContactGetters").getIsMyContact(this.contact)&&!d("WAWebContactGetters").getId(this.contact).isBot()&&!d("WAWebContactGetters").getIsMe(this.contact))&&this.trusted&&!this.archive&&!this.isLocked};f.title=function(){var a;return this.isGroup?(a=this.formattedTitle)!=null?a:h._("__JHASH__LCXIGw_i_3P__JHASH__").toString():this.formattedTitle};f.getTcToken=function(){return this.tcToken==null||this.tcTokenTimestamp==null?null:d("WAWebTrustedContactsUtils").isTokenExpired(this.tcTokenTimestamp,d("WAWebTrustedContactsUtils").TcTokenMode.Receiver)?null:this.tcToken};f["delete"]=function(){a.prototype["delete"].call(this);this.getCollection().remove(this.id);this._abortController.abort();this.presence["delete"]();d("WAWebCmd").Cmd.closeChat(this);this.groupMetadata&&this.groupMetadata["delete"]();this.mediaMsgs&&this.mediaMsgs["delete"]();this.linkMsgs&&this.linkMsgs["delete"]();this.docMsgs&&this.docMsgs["delete"]();this.productMsgs&&this.productMsgs["delete"]();var b=this.starredMsgs;b&&(b["delete"](),b.stopListening(),b.reset());d("WAWebUserPrefsGeneral").deleteComposeContents(this.id)};f.isDirty=function(){return this.unreadCount!==0};f.canPin=function(){var a;if(this.archive)return!1;a=(a=this.promises)==null?void 0:a.setArchive;return(a==null?void 0:a.archive)?!1:!0};f.canArchive=function(){return this.isBroadcast?!1:!0};f.supportsChatLock=function(){return!0};f.hasUnreadEdit=function(){return this.unreadEditTimestampMs!=null};f.setComposeContents=function(a){if(d("WAWebDraftMessageChatGatingUtils").draftMessageEnabled()){var b,e=a.text;if(((b=a.text)==null?void 0:b.trim())===""){e=(b=a.text)==null?void 0:b.trim()}b={text:e,ctwaContext:a.ctwaContext,ctwaContextLinkData:a.ctwaContextLinkData,timestamp:a.timestamp,omittedUrl:a.omittedURL};void d("WAWebUpdateDraftMessageChatAction").updateDraftMessageChat(this.id,b)}else this.composeContents=a,c("gkx")("26258")||d("WAWebUserPrefsGeneral").setComposeContents(this.id,a)};f.getSessionPersistedComposeContents=function(){return d("WAWebUserPrefsGeneral").getComposeContents(this.id)};f.getComposeContents=function(){if(d("WAWebDraftMessageChatGatingUtils").draftMessageEnabled()){if(!this.draftMessage)return;var a={timestamp:this.draftMessage.timestamp,text:this.draftMessage.text},b=this.draftMessage,e=b.ctwaContext,f=b.ctwaContextLinkData;b=b.omittedUrl;b!=null&&(a.omittedURL=b);e!=null&&(a.ctwaContext=e);f!=null&&(a.ctwaContextLinkData=f);return a}return c("lodash").isEmpty(this.composeContents)?this.getSessionPersistedComposeContents()||{}:this.composeContents};f.setAttachMediaContents=function(a){this.attachMediaContents=a};f.isComposing=function(){var a=this.composeContents.text;return Boolean(a)||this.isComposingPoll};f.preload=function(){this.msgs.length===1&&d("WAWebChatLoadMessages").loadEarlierMsgs(this)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){}))["catch"](function(a){d("WALogger").LOG(m(),a)})};f.onEmptyMRM=function(){d("WALogger").LOG(l()),d("WAWebChatLoadMessages").loadEarlierMsgs(this)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){}))["catch"](function(a){d("WALogger").LOG(k(),a)})};f.deleteMsgs=function(a,b){this.deleteMsgsBeforeMsgInclusive(void 0,!a,b)};f.deleteMsgsBeforeMsgInclusive=function(a,b,c){b===void 0&&(b=!1);var e;if(!a)e=this.msgs.length;else if(!this.msgs.get(a.id))return;else e=this.msgs.indexOf(a);a=function(a,f,g){return c&&!d("WAWebMsgModelUtils").msgMatchesType(a,c)||a.msgChunk===this.msgs&&f>e||b&&a.star||d("WAWebMsgGetters").getIsInitialE2ENotification(a)&&b};this.deleteMsgsPartial(a,!0)};f.deleteMsgsPartial=function(a,b){var e=this;b===void 0&&(b=!1);var f=this.unreadCount;this.getAllCMCs().forEach(function(c){var f=c.filter(function(b,c,d){return!a.apply(e,[b,c,d])});c.remove(f,void 0,b);f.forEach(function(a){d("WAWebMsgGetters").getIsAuthenticationMessage(a)&&void d("WAWebOTPLoggingHelper").logOTPMessageDeleted(d("WAWebMsgDataFromModel").msgDataFromMsgModel(a)),a["delete"]()})});c("lodash").clone(this.msgChunks).forEach(function(a){a.length===0&&e.removeMsgsCollection(a)});if(this.msgs.length>0){var g=f>this.msgs.length?this.msgs.length:f;d("WAWebDBUpdateChatTable").updateChatTable(this.id,{unreadCount:g}).then(function(){e.unreadCount=g,e.msgs.msgLoadState.noEarlierMsgs=e.endOfHistoryTransferType!==d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE})}};f.deleteMessages=function(a){var b=function(b,c,d){return!a.includes(b.id.toString())};this.deleteMsgsPartial(b,!0);this.getAllMsgs().length===0&&d("WAWebChatLoadMessages").loadEarlierMsgs(this)};f.getLastMsgKeyForAction=function(){var a=this.msgs.last(),b;a&&(!this.lastReceivedKey||a.id.fromMe&&a.local&&a.ack===d("WAWebAck").ACK.CLOCK?b=a.id:b=this.lastReceivedKey);return b?b:void 0};f.getWebcChatType=function(){var a=this.kind;if(a!=null)switch(a){case d("WAWebChatFlowTypes").ChatKindType.Chat:return d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE.INDIVIDUAL;case d("WAWebChatFlowTypes").ChatKindType.Group:return d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE.GROUP;case d("WAWebChatFlowTypes").ChatKindType.Broadcast:return d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE.BROADCAST_LIST;case d("WAWebChatFlowTypes").ChatKindType.Newsletter:return d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE.NEWSLETTER;case d("WAWebChatFlowTypes").ChatKindType.Community:return d("WAWebWamEnumWebcChatType").WEBC_CHAT_TYPE.COMMUNITY}else throw new TypeError("Invalid Chat.kind "+String(this.kind))};f.getMdChatAssignmentChatType=function(){return d("WAWebChatModelDerivedMethods").getMdChatAssignmentChatTypeFn(this)};f.getChatAssignmentChatType=function(){var a=this.kind;if(a!=null)switch(a){case d("WAWebChatFlowTypes").ChatKindType.Chat:return d("WAWebWamEnumChatAssignmentChatType").CHAT_ASSIGNMENT_CHAT_TYPE.INDIVIDUAL;case d("WAWebChatFlowTypes").ChatKindType.Group:return d("WAWebWamEnumChatAssignmentChatType").CHAT_ASSIGNMENT_CHAT_TYPE.GROUP;case d("WAWebChatFlowTypes").ChatKindType.Broadcast:case d("WAWebChatFlowTypes").ChatKindType.Community:return d("WAWebWamEnumChatAssignmentChatType").CHAT_ASSIGNMENT_CHAT_TYPE.COMMUNITY;case d("WAWebChatFlowTypes").ChatKindType.Newsletter:return d("WAWebWamEnumChatAssignmentChatType").CHAT_ASSIGNMENT_CHAT_TYPE.CHANNEL}else throw new TypeError("Invalid Chat.kind "+String(this.kind))};f.deregisterExpiredViewOnceBulkMessages=function(a){a.forEach(this._deregisterExpiredViewOnceMessage)};f._deregisterExpiredViewOnceMessage=function(a){d("WAWebViewOnceState").isExpired(a.safe())&&d("WAWebMedia").deregisterMsg(a)};f._resetEphemeralMessageExpirationTimer=function(a){var e=this;c("WAWebAlarm").clearTimeout(this._ephemeralMessageTimerIds.get(a));this._ephemeralMessageTimerIds["delete"](a);this._ephemeralMessagesToDelete["delete"](a);var f=d("WAWebMsgGetters").getEphemeralExpirationTimestamp(a);if(f==null||!this.msgs.includes(a)||d("WAWebMsgGetters").getIsKept(a))return;var g=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){e._ephemeralMessageTimerIds["delete"](a);if(!e.active){yield d("WAWebDBEphemeralMessage").removeExpiredMessagesFromHistory([a]);d("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview([a.id.toString()]);var c=b("WAWebPersistedJobManager").getJobManager;yield c().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(e.id.toString(),[a.id.toString()]));a["delete"]({skipUpdatingSortTime:!0,doNotResetLastReceived:!0})}else e._ephemeralMessagesToDelete.add(a)});return function(){return c.apply(this,arguments)}}();if(a.isExpired())g();else{f=c("WAWebAlarm").setGlobalTimeout(function(){return void g()},f*1e3);this._ephemeralMessageTimerIds.set(a,f)}};f.sendProductMessage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebProductCatalogMessage").sendProductMessage(this,a,b)});function c(b,c){return a.apply(this,arguments)}return c}();f._isMediaMsg=function(a){return Boolean(d("WAWebFrontendMsgGetters").getAsMms(a)&&!a.ctwaContext)};f.isUnreadMsg=function(a){var b=this.msgs.filter(function(a){return d("WAWebMsgGetters").getIsUnreadType(a)});return b.includes(a,b.length-this.unreadCount)};f.isActiveUnreadMsg=function(a){var b=this.msgs.filter(function(a){return d("WAWebMsgGetters").getIsUnreadType(a)});return b.includes(a,b.length-this.activeUnreadCount)};f.setCelebrationAnimationLastPlayed=function(){this.animationCandidateData&&this.celebrationAnimationLastPlayed<this.animationCandidateData.msgTimestampSeconds&&(this.celebrationAnimationLastPlayed=this.animationCandidateData.msgTimestampSeconds)};f.setAnimationCandidateData=function(a){this.animationCandidateData=a};f._updateIsAnnounceGrpRestrict=function(){var a=this,b=this.groupMetadata;if(this.isGroup&&b!=null&&!b.stale){var c=!b.participants.iAmAdmin()&&b.announce;this.isAnnounceGrpRestrict!==c&&(d("WALogger").LOG(j(),this.isAnnounceGrpRestrict,c),d("WAWebDBUpdateChatTable").updateChatTable(this.id,{isAnnounceGrpRestrict:c}).then(function(){return a.isAnnounceGrpRestrict=c}))}};f.sortMsgs=function(a){a=a.map(function(a){var b=c("WANullthrows")(a.msgChunk);return{msg:a,chunkT:c("WANullthrows")(b.at(0)).t,index:b.indexOf(a)}});return c("lodash").orderBy(a,["chunkT","index"]).map(function(a){return a.msg})};f.waitForChatLoading=function(){var a=this,d=(i||(i=b("Promise"))).resolve();this.pendingInitialLoading&&(d=c("WAWebEventsWaitForBbEvent")(this,"change:pendingInitialLoading",function(){return!a.pendingInitialLoading}));return d};f.unstarAll=function(){var a=this.getAllMsgs();a.forEach(function(a){a&&(a.star=!1)});d("WAWebStarredMsgCollection").removeStarredMsgs(a)};f._computeShowUnreadInTitle=function(){var a,b=!!this.muteExpiration;if(this.archive){this.showUnreadInTitle=!1;return}if(d("WAWebChatLockGatingUtils").chatLockEnabled()&&this.isLocked){this.showUnreadInTitle=!1;return}if(this.id.isBot()&&!d("WAWebBotGating").isBotEnabled()){this.showUnreadInTitle=!1;return}if(this.optimisticUnreadCount<=0){this.showUnreadInTitle=!1;return}if(!this.isGroup){this.showUnreadInTitle=!b;return}if(((a=this.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.COMMUNITY){this.showUnreadInTitle=!1;return}if(!b){this.showUnreadInTitle=!0;return}if(!this.msgs||this.msgs.length===0){this.showUnreadInTitle=!1;return}a=!1;b=this.msgs;var c=this.optimisticUnreadCount;c=Math.max(0,b.length-c);for(;c<b.length;c++){var e=this.msgs.at(c);if(!e)continue;var f=d("WAWebUserPrefsMeUser").getMaybeMeUser();if(e.isMentioned(f)||d("WAWebQuotedMsgModelUtils").isQuotedMsg(e,f)){f=this.getCollection().get(d("WAWebMsgGetters").getSender(e));if(!f||!f.muteExpiration){a=!0;break}}}this.showUnreadInTitle=a};f.removeFromCollection=function(a){a.star&&d("WAWebStarredMsgCollection").removeStarredMsgs([a]);d("WAWebMsgGetters").getIsMedia(a)&&this.mediaMsgs?this.mediaMsgs.remove(a):d("WAWebMsgLinks").getLinksFromMsg(a).length>0&&this.linkMsgs?this.linkMsgs.remove(a):d("WAWebFrontendMsgGetters").getAsDoc(a)&&this.docMsgs?this.docMsgs.remove(a):d("WAWebFrontendMsgGetters").getAsProduct(a)!=null&&this.productMsgs&&this.productMsgs.remove(a);d("WAWebMsgGetters").getIsKept(a)&&this.keptMsgs&&this.keptMsgs.remove(a);if(d("WAWebFrontendMsgGetters").getChat(a).isGroup){var b;(b=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata)==null?void 0:b.unreadMentionMetadata.removeUnreadMentions(a.id.toString())}};f.getMediaMsgs=function(){this.mediaMsgs||(this.mediaMsgs=new(c("WAWebChatMediaMsgsCollection"))());return this.mediaMsgs};f.getLinkMsgs=function(){this.linkMsgs||(this.linkMsgs=new(c("WAWebChatLinkMsgsCollection"))());return this.linkMsgs};f.getDocMsgs=function(){this.docMsgs||(this.docMsgs=new(c("WAWebChatDocMsgsCollection"))());return this.docMsgs};f.getParticipantCount=function(){var a;return((a=this.groupMetadata)==null?void 0:a.participants.length)||1};f.iAmAdmin=function(){return this.groupMetadata?this.groupMetadata.participants.iAmAdmin():!1};f.getProductMsgs=function(){this.productMsgs||(this.productMsgs=new(c("WAWebChatProductMsgsCollection"))());return this.productMsgs};f.getStarredMsgs=function(){var a=this,b=this.starredMsgs;b||(this.starredMsgs=b=new(d("WAWebStarredMsgCollection").StarredMsgCollection)(),this.starredMsgs.add(d("WAWebStarredMsgCollection").AllStarredMsgsCollection.filter(function(b){return d("WAWebFrontendMsgGetters").getChat(b)===a})));return b};f.getKeptMsgs=function(){var a=this.keptMsgs;a||(this.keptMsgs=a=new(d("WAWebKeptMsgCollection").KeptMsgCollection)(),this.keptMsgs.add(this.msgs.filter(function(a){return d("WAWebMsgGetters").getIsKept(a)})));return a};f.hasKeptMsgs=function(){return this.msgs.some(function(a){return d("WAWebMsgGetters").getIsKept(a)})};f.canSendPolls=function(){return d("WAWebChatModelDerivedMethods").canSendPolls(this)};f.canInvokeBot=function(){var a;if(!d("WAWebBotGating").isBotEnabled())return!1;if(this.isNewsletter)return!1;if(d("WAWebContactGetters").getIsMe(this.contact))return!1;if(this.id.isBot())return!1;if(d("WAWebChatEphemerality").isEphemeralSettingOn(this))return!1;return((a=this.contact.businessProfile)==null?void 0:a.isBizBot3p)===!0||((a=this.contact.businessProfile)==null?void 0:a.isBizBot1p)===!0?!1:!0};f.getAbortController=function(){return this._abortController};f.getCollection=function(){return this.isNewsletter?b("WAWebNewsletterCollection"):b("WAWebChatCollection").ChatCollection};f.getGroupMetadataCollection=function(){return b("WAWebGroupMetadataCollection")};f.getNewsletterMetadataCollection=function(){return b("WAWebNewsletterMetadataCollection")};f.updateBotInvokeSystemMsgCreated=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebDBUpdateChatTable").updateChatTable(this.id,{hasCreatedBotInvokeSystemMsg:!0}),this.hasCreatedBotInvokeSystemMsg=!0});function c(){return a.apply(this,arguments)}return c}();f.updateBizBotSysMsgCreated=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebDBUpdateChatTable").updateChatTable(this.id,{bizBotSystemMsgType:a}),this.bizBotSystemMsgType=a});function c(b){return a.apply(this,arguments)}return c}();f.supportsKIC=function(){return this.isCAG&&!d("WAWebEphemeralKeepInChatAbpropUtils").isKeepInChatInCAGEnabled()?!1:!0};return e}(c("WAWebSuperChatMsgs"));a.Proxy="chat";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g.Chat=e}),226);
__d("WAWebChatMsgsCollectionComparator",[],(function(a,b,c,d,e,f){function a(a,b){return a.serverId==null||b.serverId==null?0:a.serverId-b.serverId}f.msgComparator=a}),66);
__d("WAWebChatMsgsCollection",["invariant","WAWebBaseCollection","WAWebBaseModel","WAWebChatMsgsCollectionComparator","WAWebCommonCTWALogging","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgModel"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.noEarlierMsgs=d("WAWebBaseModel").prop(),c.isLoadingEarlierMsgs=d("WAWebBaseModel").prop(),c.isLoadingRecentMsgs=d("WAWebBaseModel").prop(),c.isLoadingAroundMsgs=d("WAWebBaseModel").prop(),c.isRepairingMsgHistory=d("WAWebBaseModel").prop(),c.contextLoaded=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="msgLoad";var i=d("WAWebBaseModel").defineModel(a);c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.msgLoadState=new i({noEarlierMsgs:!1,isLoadingEarlierMsgs:!1,isLoadingRecentMsgs:!1,isLoadingAroundMsgs:!1,contextLoaded:!1,isRepairingMsgHistory:!1});b.listenTo(babelHelpers.assertThisInitialized(b),"add remove",b.triggerChangeLast);b.listenTo(babelHelpers.assertThisInitialized(b),"sort reset",function(a,c){b.triggerChangeLast(null,a,(a=c)!=null?a:{})});return b}var e=c.prototype;e["delete"]=function(){this.stopListening(),a.prototype["delete"].call(this),this.msgLoadState["delete"]()};e.triggerChangeLast=function(a,b,c){var d=this.last();if(this.$ChatMsgsCollection1!==d){this.$ChatMsgsCollection1=d;var e=!1,f=!!c.add;c=!!c.remove;b.includes(a)&&f&&!c&&(e=!0);this.trigger("change:last",d,e)}};e.add=function(c,e){var f=this,g;!Array.isArray(c)?g=c:c.length===1&&(g=c[0]);var h=[];if(g!=null&&(d("WAWebMsgGetters").getIsInitialE2ENotification(g)||d("WAWebMsgGetters").getIsDisappearingModeSystemMessage(g))){var i=this.some(function(a){return d("WAWebMsgGetters").getIsInitialE2ENotification(a)});d("WAWebMsgGetters").getIsInitialE2ENotification(g)&&(i||(h=a.prototype.add.call(this,c,babelHelpers["extends"]({},e,{at:0}))));if(d("WAWebMsgGetters").getIsDisappearingModeSystemMessage(g)){var j=this.some(function(a){return d("WAWebMsgGetters").getIsDisappearingModeSystemMessage(a)});if(!j){j=i?1:0;h=a.prototype.add.call(this,c,babelHelpers["extends"]({},e,{at:j}))}}h&&this.trigger("insert_msgs",h,e)}else h=a.prototype.add.call(this,c,e);if(h.length>0){i=b("WAWebMsgCollection").MsgCollection;j=i.add(h,e);j.forEach(function(a){a&&f.isModel(a)&&(a.msgChunk=f)});this.trigger("bulk_add",h,e);j.forEach(function(a){return d("WAWebCommonCTWALogging").logDeepConversation(a)})}return h};e.remove=function(b,c,d){c===void 0&&(c={});d===void 0&&(d=!1);b=a.prototype.remove.call(this,b,c);var e=c?c.silent:!1,f=b.filter(function(a){return!!a});f.length&&!e&&(this.trigger("remove_msgs",f,c),d||this.trigger("update_sort_time"));return b};e.replace=function(a){var b=this;this.msgLoadState=a.msgLoadState;this.loadRecentPromise=a.loadRecentPromise;this.loadEarlierPromise=a.loadEarlierPromise;this.loadAroundPromise=a.loadAroundPromise;a=a.getModelsArray();this.set(a,{silent:!0,merge:!1});a.forEach(function(a){b.isModel(a)&&(a.msgChunk=b)});this.trigger("bulk_add",a)};e.onMsgLoadStateChange=function(a){var b=this,c,d=function(){a()},e=function(){c!=null||h(0,56282);c.off("change",d);var e=b.msgLoadState;e.on("change",d);c=e;a()};c=this.msgLoadState;c.on("change",d);this.on("bulk_add",e);var f=function(){c!=null||h(0,56281),b.off("bulk_add",e),c.off("change",d)};return function(){var a=f;a&&(f=null,a())}};return c}(d("WAWebBaseCollection").BaseCollection);c.model=d("WAWebMsgModel").Msg;c.comparator=d("WAWebChatMsgsCollectionComparator").msgComparator;g.MsgLoadState=i;g.ChatMsgsCollection=c}),98);
__d("WAWebWallpaper",["WAWebServerPropsModel"],(function(a,b,c,d,e,f,g){var h="default_chat_wallpaper",i=["#ccebdc","#aed8c7","#7acba5","#c7e9eb","#a9dbd8","#68d5d9","#6ec3d4","#f2dad5","#f2d5e1","#fbcad2","#ffa7a8","#cbdaec","#d7d3eb","#e5c0eb","#d0deb1","#dee0b4","#e6dfa8","#f7e9a8","#ffd1a4","#ff8a8c","#ff5978","#f56056","#dc6e4f","#e6e365","#73c780","#2293a4","#219ed9","#2b5aa6","#74676a","#48324d","#dee3e9","#d9dade","#c0c1c4","#7e90a3","#55626f","#243640","#162127"],j=["#ff8a8c","#ff5978","#f56056","#dc6e4f","#73c780","#2293a4","#219ed9","#2b5aa6","#74676a","#48324d","#7e90a3","#55626f","#243640","#162127"],k="0.06",l="0.4",m="data-asset-chat-background-dark",n={"#BBE4E5":{doodle:"dark",opacity:"0.42"},"#AED8C7":{doodle:"dark",opacity:"0.3"},"#7ACBA5":{doodle:"dark",opacity:"0.26"},"#CBDAEC":{doodle:"dark",opacity:"0.42"},"#66D2D5":{doodle:"dark",opacity:"0.26"},"#63BDCF":{doodle:"dark",opacity:"0.26"},"#D6D0F0":{doodle:"dark",opacity:"0.36"},"#CECECE":{doodle:"dark",opacity:"0.36"},"#D1DABE":{doodle:"dark",opacity:"0.36"},"#E6E1B1":{doodle:"dark",opacity:"0.42"},"#FEEFA9":{doodle:"light",opacity:"0.06"},"#FED297":{doodle:"dark",opacity:"0.42"},"#FD9A9B":{doodle:"dark",opacity:"0.26"},"#FD6769":{doodle:"dark",opacity:"0.26"},"#FB4668":{doodle:"dark",opacity:"0.26"},"#922040":{doodle:"dark",opacity:"0.17",invertTransparentWallpaperColors:!0},"#DC6E4F":{doodle:"dark",opacity:"0.2"},"#644D52":{doodle:"dark",opacity:"0.13",invertTransparentWallpaperColors:!0},"#517E7E":{doodle:"dark",opacity:"0.13"},"#3190BB":{doodle:"dark",opacity:"0.13"},"#35558A":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#55626F":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#1D2326":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#301E34":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#ECF0F1":{doodle:"light",opacity:"0.06"},"#FFFEA2":{doodle:"light",opacity:"0.06"},"#E7E8D2":{doodle:"light",opacity:"0.06"}},o={"#0F2424":{doodle:"dark",opacity:"0.05"},"#12261F":{doodle:"dark",opacity:"0.055"},"#11241C":{doodle:"dark",opacity:"0.055"},"#111E27":{doodle:"dark",opacity:"0.06"},"#0F2224":{doodle:"dark",opacity:"0.06"},"#0E2125":{doodle:"dark",opacity:"0.055"},"#1F1D25":{doodle:"dark",opacity:"0.06"},"#212121":{doodle:"dark",opacity:"0.055"},"#1F211C":{doodle:"dark",opacity:"0.055"},"#23231B":{doodle:"dark",opacity:"0.055"},"#262419":{doodle:"dark",opacity:"0.055"},"#261F17":{doodle:"dark",opacity:"0.055"},"#261717":{doodle:"dark",opacity:"0.055"},"#260F10":{doodle:"dark",opacity:"0.06"},"#260A10":{doodle:"dark",opacity:"0.07"},"#19050B":{doodle:"dark",opacity:"0.075"},"#21100C":{doodle:"dark",opacity:"0.07"},"#0F0C0C":{doodle:"dark",opacity:"0.065"},"#101919":{doodle:"dark",opacity:"0.06"},"#0A1D25":{doodle:"dark",opacity:"0.055"},"#0D1523":{doodle:"dark",opacity:"0.065"},"#0D0F11":{doodle:"dark",opacity:"0.07"},"#0A0C0D":{doodle:"dark",opacity:"0.07"},"#110B12":{doodle:"dark",opacity:"0.07"},"#1E1F1F":{doodle:"dark",opacity:"0.055"},"#262618":{doodle:"dark",opacity:"0.055"},"#23231F":{doodle:"dark",opacity:"0.055"}},p=Object.keys(n),q=Object.keys(o);function r(a){return d("WAWebServerPropsModel").ServerProps.wallpapersV2?a==="light"?p:q:i}function a(a,b){var c=r(b);if(a===h)return h;if(d("WAWebServerPropsModel").ServerProps.wallpapersV2){c=c.findIndex(function(b){return b.toUpperCase()===a.toUpperCase()});if(c!==-1)return b==="light"?q[c]:p[c]}return a}function b(a,b){b=r(b);return a===h?!0:b.some(function(b){return b.toUpperCase()===a.toUpperCase()})}function s(a,b,c){b=b==="light"?n:o;for(var d in b)if(d.toUpperCase()===a.toUpperCase())return b[d][c];return null}function c(a,b){if(d("WAWebServerPropsModel").ServerProps.wallpapersV2){var c=s(a,b,"opacity");if(c)return c}return b==="light"&&a===h?l:k}function e(a,b){if(d("WAWebServerPropsModel").ServerProps.wallpapersV2&&b==="light"&&a!==h){var c=s(a,b,"doodle");if(c)return"data-asset-chat-background-"+c}c="data-asset-chat-background-"+b;b==="light"&&a===h&&(c=m);return c}function f(a,b){if(d("WAWebServerPropsModel").ServerProps.wallpapersV2)return a==="light"&&b!==h?!!s(b,a,"invertTransparentWallpaperColors"):!1;var c=j.includes(b);if(!r(a).includes(b))return!1;b=a==="light";a=a==="dark";return c?b:a}g.DEFAULT_CHAT_WALLPAPER=h;g.getWallpaperColors=r;g.toggleWallpaperColor=a;g.colorExistsInTheme=b;g.getWallpaperColorPropValue=s;g.getDoodleOpacity=c;g.getDoodleAssetName=e;g.invertTransparentWallpaperColors=f}),98);
__d("WAWebChatPreferenceCollection",["WANullthrows","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebChatPreferenceModel","WAWebUserPrefsKeys","WAWebWallpaper"],(function(a,b,c,d,e,f,g){var h={id:d("WAWebChatPreferenceModel").DEFAULT_PREFERENCE,wallpaperColor:d("WAWebWallpaper").DEFAULT_CHAT_WALLPAPER,saveToCameraRoll:!0,showDoodle:!0,spellcheck:!0,transformTextEmoji:!0,enterIsSend:!0};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.initializeFromCache=function(a){a=a||[];this.add([h].concat(a),{merge:!0})};e.get=function(b){return a.prototype.get.call(this,b)||a.prototype.get.call(this,d("WAWebChatPreferenceModel").DEFAULT_PREFERENCE)};e.getDefault=function(){return c("WANullthrows")(a.prototype.get.call(this,d("WAWebChatPreferenceModel").DEFAULT_PREFERENCE))};e["delete"]=function(){a.prototype["delete"].call(this),this.add(h)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebChatPreferenceModel").ChatPreference;a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.CHAT_PREFERENCE_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:1e3};b=new a();g["default"]=b}),98);
__d("WAWebChatPreferenceModel",["WAWebBaseModel","WAWebChatPreferenceCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a="defaultPreference";e=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.wallpaperColor=d("WAWebBaseModel").prop(),c.saveToCameraRoll=d("WAWebBaseModel").prop(),c.showDoodle=d("WAWebBaseModel").prop(),c.spellcheck=d("WAWebBaseModel").prop(),c.transformTextEmoji=d("WAWebBaseModel").prop(),c.enterIsSend=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebChatPreferenceCollection")};return c}(d("WAWebBaseModel").BaseModel);e.Proxy="chatPreference";e.idClass=c("WAWebWid");e.allowedIds=[a];f=d("WAWebBaseModel").defineModel(e);g.DEFAULT_PREFERENCE=a;g.ChatPreference=f}),98);
__d("WAWebChatGetMessage",["WAWebAck","WAWebCommonMsgUtils","WAWebMsgDataUtils","WAWebMsgGetters","WAWebStateUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WAWebStateUtils").unproxy(a);for(var b=a.msgs.length-1;b>=0;b--){var c=a.msgs.at(b);if(c&&(!c.local||c.ack>d("WAWebAck").ACK.CLOCK))return c}return void 0}function b(a){a=d("WAWebStateUtils").unproxy(a);for(var b=a.msgs.length-1;b>=0;b--){var c=a.msgs.at(b);if(c&&d("WAWebMsgDataUtils").eventTypeFromMsgType(c)!==d("WAWebCommonMsgUtils").EventType.IGNORE)return c}return void 0}function c(a){a=d("WAWebStateUtils").unproxy(a);for(var b=a.msgs.length-1;b>=0;b--){var c=a.msgs.at(b);if(c!=null&&d("WAWebMsgGetters").getIsSentByMe(c))return c}return void 0}g.getLastReceivedMsg=a;g.getLastTimestampMsg=b;g.getLastSentMsg=c}),98);
__d("WAWebChatUpdates",["WAAbortError","WAPromiseDelays","WARaceSignal","WAWebChatGetMessage","WAWebChatLoadMessages","WAWebDBUpdateChatTable"],(function(a,b,c,d,e,f,g){function a(a){var b=Number(a.mute.expiration);d("WAWebDBUpdateChatTable").updateChatTable(a.id,{muteExpiration:b}).then(function(){return a.muteExpiration=b})}function b(a){var b=Boolean(a.mute.isAutoMuted);d("WAWebDBUpdateChatTable").updateChatTable(a.id,{isAutoMuted:b}).then(function(){return a.isAutoMuted=b})}function e(a){if(a.promises.updateSortTime)return;var b=new AbortController(),e=b.signal;e=c("WARaceSignal")([e,a.getAbortController().signal],function(b){return d("WAPromiseDelays").delayMs(0).then(function(){var b=d("WAWebChatGetMessage").getLastTimestampMsg(a);if(b){a.t=b.t;return}else if(a.msgs.msgLoadState.noEarlierMsgs)return;else if(a.pendingMsgs)return;return d("WAWebChatLoadMessages").loadEarlierMsgs(a)}).then(function(c){if(b.aborted)throw new(d("WAAbortError").AbortError)();if(c){c=d("WAWebChatGetMessage").getLastTimestampMsg(a);a.t=c?c.t:void 0}})["catch"](function(){})["finally"](function(){a.promises.updateSortTime=void 0})});a.promises.updateSortTime={promise:e,abortController:b}}g.updateMuteExpiration=a;g.updateMuteIsAutoMuted=b;g.updateSortTime=e}),98);
__d("WAWebMuteCollection",["WALogger","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebConnModel","WAWebMuteModel","WAWebUserPrefsKeys","WAWebUserPrefsNotifications","WAWebUserPrefsStore","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:mute:cache-save: globalMuteModel or globalReactionsMuteModel does not exist"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:mute:cache-save: ",""]);i=function(){return a};return a}var j=!0,k=!0,l=!1,m=!1,n=!1,o=!1,p=!1,q=!1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.initializeFromCache=function(a){var b=this;Array.isArray(a)?a.forEach(function(a){[d("WAWebMuteModel").GLOBAL_MUTE,d("WAWebMuteModel").GLOBAL_REACTIONS_MUTE].includes(a.id)&&b.add(a,{remove:!1})}):a!=null&&a.id===d("WAWebMuteModel").GLOBAL_MUTE&&this.add(a,{remove:!1});this.setGlobalNotifications(d("WAWebUserPrefsNotifications").getGlobalNotifications());this.setGlobalOfflineNotifications(d("WAWebUserPrefsNotifications").getGlobalOfflineNotifications());this.setGlobalSounds(d("WAWebUserPrefsNotifications").getGlobalSounds());this.setGlobalCallRingtone(d("WAWebUserPrefsNotifications").getGlobalCallRingtone());this.setGlobalPreviews(d("WAWebUserPrefsNotifications").getGlobalPreviews());this.setCollapseMuted(d("WAWebUserPrefsNotifications").getCollapseMuted());this.setOutgoingMessageSound(d("WAWebUserPrefsNotifications").getOutgoingMessageSound());this.setIgnoreNondirectGroupMsg(d("WAWebUserPrefsNotifications").getIgnoreNondirectGroupMsg())};e.saveToCache=function(){if(!d("WAWebConnModel").Conn.shouldSaveToCache())return;var a=this.constructor.cachePolicy.id,b=[];d("WALogger").LOG(i(),String(a));var e=this.get(d("WAWebMuteModel").GLOBAL_MUTE),f=this.get(d("WAWebMuteModel").GLOBAL_REACTIONS_MUTE);e&&b.push(e.toJSON());f&&b.push(f.toJSON());b.length?c("WAWebUserPrefsStore").setCollection(a,b):d("WALogger").WARN(h())};e.globalMute=function(){var a=this.get(d("WAWebMuteModel").GLOBAL_MUTE);if(a)return a;a=new(d("WAWebMuteModel").Mute)({id:d("WAWebMuteModel").GLOBAL_MUTE});this.add(a);return a};e.globalReactionsMute=function(){var a=this.get(d("WAWebMuteModel").GLOBAL_REACTIONS_MUTE);if(a)return a;a=new(d("WAWebMuteModel").Mute)({id:d("WAWebMuteModel").GLOBAL_REACTIONS_MUTE});this.add(a);return a};e.getGlobalSounds=function(){return j};e.setGlobalSounds=function(a){j=a,d("WAWebUserPrefsNotifications").setGlobalSounds(a)};e.getGlobalCallRingtone=function(){return k};e.setGlobalCallRingtone=function(a){k=a,d("WAWebUserPrefsNotifications").setGlobalCallRingtone(a)};e.getGlobalNotifications=function(){return l};e.setGlobalNotifications=function(a){l=a,d("WAWebUserPrefsNotifications").setGlobalNotifications(a)};e.getGlobalOfflineNotifications=function(){return m};e.setGlobalOfflineNotifications=function(a){m=a,d("WAWebUserPrefsNotifications").setGlobalOfflineNotifications(a)};e.getGlobalPreviews=function(){return n};e.setGlobalPreviews=function(a){n=a,d("WAWebUserPrefsNotifications").setGlobalPreviews(a)};e.getCollapseMuted=function(){return o};e.setCollapseMuted=function(a){o=a,d("WAWebUserPrefsNotifications").setCollapseMuted(a),this.trigger("change:collapseMuted",o)};e.getOutgoingMessageSound=function(){return p};e.setOutgoingMessageSound=function(a){p=a,d("WAWebUserPrefsNotifications").setOutgoingMessageSound(a)};e.getIgnoreNondirectGroupMsg=function(){return c("gkx")("26258")?!1:q};e.setIgnoreNondirectGroupMsg=function(a){if(c("gkx")("26258"))return;q=a;d("WAWebUserPrefsNotifications").setIgnoreNondirectGroupMsg(a)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMuteModel").Mute;a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.MUTE_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:1e3};b=new a();g.MuteCollectionImpl=a;g.MuteCollection=b}),98);
__d("WAWebMuteModel",["fbt","Promise","WALogger","WATypeUtils","WAWeb-moment","WAWebActionToast.react","WAWebAlarm","WAWebBaseModel","WAWebChatMuteBridge","WAWebGroupMetadataCollection","WAWebMiscErrors","WAWebMuteCollection","WAWebMuteGetters","WAWebNewsletterGatingUtils","WAWebNewsletterMetadataCollection","WAWebNewsletterToggleMuteStateAction","WAWebToastManager","WAWebUserPrefsMeUser","WAWebWamEnumChannelEventSurface","WAWebWid","err","react"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:unmuteCall ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:unmute dropped"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:unmute ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:muteCall "," duration:",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:muteCall "," muted, no expiration"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:muteCall called with wrong units?"," exp:",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:muteCall called with invalid expiration ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:mute dropped"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:mute "," duration:",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:mute "," muted, no expiration"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:mute called with wrong units?"," exp:",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Mute:mute called with invalid expiration ",""]);v=function(){return a};return a}var w=j||c("react"),x=-1;a="global_mute";e="global_reactions_mute";function y(a,b){if(c("WAWebWid").isGroup(a)&&!b)return"group";return c("WAWebWid").isNewsletter(a)&&!b?"newsletter":"chat"}f=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.expiration=d("WAWebBaseModel").prop(0),c.callExpiration=d("WAWebBaseModel").prop(0),c.isAutoMuted=d("WAWebBaseModel").prop(!1),c.$MuteImpl1=d("WAWebBaseModel").session(),c.$MuteImpl2=d("WAWebBaseModel").session(),c.promises=d("WAWebBaseModel").session(function(){return{mute:null,unmute:null}}),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this),this.expiration!=null&&this.expiration!==0&&this.mute({expiration:this.expiration,isAutoMuted:this.isAutoMuted}),this.callExpiration!=null&&this.callExpiration!==0&&this.muteCall(this.callExpiration)};f.setMute=function(a,b,c){b===void 0&&(b=!1);if(!a&&!this.expiration||a===this.expiration)return;a?this.mute({expiration:a,isAutoMuted:b,sendDevice:c}):this.unmute({sendDevice:c})};f.setAutoMuted=function(a){this.set({isAutoMuted:a})};f.mute=function(a){var e=this,f=a.expiration,g=a.sendDevice,j=a.toastId,k=a.fromMultiselect,l=k===void 0?!1:k;k=a.isAutoMuted;var m=k===void 0?!1:k,n=f;if(!d("WATypeUtils").isNumber(n)){d("WALogger").LOG(v(),n);return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)())}n=Math.round(n);n>2e9&&d("WALogger").LOG(u(),this.id.toString(),n);var o=function(){d("WAWebMuteGetters").getIsMuted(e)&&(c("WAWebAlarm").clearTimeout(e.$MuteImpl1),e.unset("_unmuteTimer"));if(n===x)d("WALogger").LOG(t(),e.id.toString());else{var a=n-c("WAWeb-moment")().unix();d("WALogger").LOG(s(),e.id.toString(),a);e.$MuteImpl1=c("WAWebAlarm").setGlobalTimeout(function(){return void e.unmute()},n*1e3)}e.set({expiration:n,isAutoMuted:m})},p=y(this.id,l);if(g===!0){if(!c("WAWebWid").isNewsletter(this.id)&&this.promises.mute!=null)return this.promises.mute;k=c("WAWebWid").isNewsletter(this.id)?(a=this.promises.mute)!=null?a:(i||(i=b("Promise"))).reject(c("err")("No promise for newsletter mute")):this.promises.mute=d("WAWebChatMuteBridge").sendConversationMute(this.id,n,this.expiration,m);f=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__A-71-2GYfp5__JHASH__"));p==="group"?f=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__I5ER3RNRZAO__JHASH__")):p==="newsletter"&&(f=null);var q=j||d("WAWebActionToast.react").genId();a=this.promises.mute["catch"](function(a){d("WALogger").WARN(r()).devConsole(a);a=h._("__JHASH__Rr7Bwvk8UMH__JHASH__");p==="group"?a=h._("__JHASH__wijG-ixUZdQ__JHASH__"):p==="newsletter"&&(f=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__mKlhymQAMsi__JHASH__")));if(c("WAWebWid").isNewsletter(e.id))return;throw new(d("WAWebActionToast.react").ActionType)(a,{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return e.mute({expiration:n,isAutoMuted:m,sendDevice:g,toastId:q})}})}).then(function(a){if(a.status===200){var f=h._("__JHASH__TRe5uHR0YLR__JHASH__");p==="group"?f=h._("__JHASH__DT6wor5vt0V__JHASH__"):p==="newsletter"&&(f=h._("__JHASH__Rvc0kQNLrc8__JHASH__"));return l?new(d("WAWebActionToast.react").ActionType)(f):new(d("WAWebActionToast.react").ActionType)(f,{actionText:h._("__JHASH__mpD8GydGn1Q__JHASH__"),actionHandler:function(){return c("WAWebWid").isNewsletter(e.id)?b("WAWebNewsletterToggleMuteStateAction").unmuteNewsletterAction(e.id,{eventSurface:d("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_PROFILE}):e.unmute({sendDevice:g,toastId:q})}})}else if(a.status>=400){if(p==="newsletter")throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__JA8yTrE4C2a__JHASH__"));if(p==="group")throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__wijG-ixUZdQ__JHASH__"));throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__Rr7Bwvk8UMH__JHASH__"))}});d("WAWebToastManager").ToastManager.open(w.jsx(d("WAWebActionToast.react").ActionToast,{id:q,initialAction:f,pendingAction:a}));return k.then(function(a){a.status===200&&o()})["finally"](function(){e.promises.mute=null})}o();return(i||(i=b("Promise"))).resolve()};f.muteCall=function(a){var e=this;a=a;if(!d("WATypeUtils").isNumber(a)){d("WALogger").LOG(q(),a);return(i||(i=b("Promise"))).reject(new(d("WAWebMiscErrors").ActionError)())}a=Math.round(a);a>2e9&&d("WALogger").LOG(p(),this.id.toString(),a);d("WAWebMuteGetters").getIsCallMuted(this)&&(c("WAWebAlarm").clearTimeout(this.$MuteImpl2),this.unset("_unmuteCallTimer"));if(a===x)d("WALogger").LOG(o(),this.id.toString());else{var f=a-c("WAWeb-moment")().unix();d("WALogger").LOG(n(),this.id.toString(),f);this.$MuteImpl2=c("WAWebAlarm").setGlobalTimeout(function(){return void e.unmuteCall()},a*1e3)}this.set({callExpiration:a});return(i||(i=b("Promise"))).resolve()};f.canMute=function(){var a=!1;if(d("WAWebUserPrefsMeUser").isMeAccount(this.id))return!1;if(c("WAWebWid").isGroup(this.id)){var e=b("WAWebGroupMetadataCollection");e=e.get(this.id);e&&(a=e.participants.iAmMember())}if(d("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&c("WAWebWid").isNewsletter(this.id)){e=b("WAWebNewsletterMetadataCollection");e=e.get(this.id);e!=null&&(a=e.canBeMuted)}return a||c("WAWebWid").isUser(this.id)};f.$MuteImpl3=function(){c("WAWebAlarm").clearTimeout(this.$MuteImpl1),this.unset("_unmuteTimer"),this.expiration=0};f.$MuteImpl4=function(){c("WAWebAlarm").clearTimeout(this.$MuteImpl2),this.unset("_unmuteCallTimer"),this.callExpiration=0};f.unmute=function(a){var e=this;a=a===void 0?{}:a;var f=a.sendDevice,g=a.toastId;a=a.fromMultiselect;a=a===void 0?!1:a;var j=!1,k=function(){d("WALogger").LOG(m(),e.id.toString()),e.$MuteImpl3(),e.set({isAutoMuted:j})},n=y(this.id,a);if(f===!0){if(!c("WAWebWid").isNewsletter(this.id)&&this.promises.unmute)return this.promises.unmute;a=c("WAWebWid").isNewsletter(this.id)?(a=this.promises.unmute)!=null?a:(i||(i=b("Promise"))).reject(c("err")("No promise for newsletter mute")):this.promises.unmute=d("WAWebChatMuteBridge").sendConversationMute(this.id,0,this.expiration,j);var o=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__5g5YHDl4zDx__JHASH__"));n==="group"?o=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__uRpmBQawSKm__JHASH__")):n==="newsletter"&&(o=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__WpkvEX3hVVN__JHASH__")));var p=g||d("WAWebActionToast.react").genId();g=this.promises.unmute["catch"](function(a){d("WALogger").WARN(l()).devConsole(a);a=h._("__JHASH__zPpteKOLzKR__JHASH__");n==="group"?a=h._("__JHASH__hct5aFZjAxX__JHASH__"):n==="newsletter"&&(a=h._("__JHASH__S2v6fejAzh8__JHASH__"));if(c("WAWebWid").isNewsletter(e.id))return;throw new(d("WAWebActionToast.react").ActionType)(a,{actionText:h._("__JHASH__TyKOR8KAtP1__JHASH__"),actionHandler:function(){return e.unmute({sendDevice:f,toastId:p})}})}).then(function(a){if(a.status===200){if(n==="group")return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__d2HJ39uOp-V__JHASH__"));return n==="newsletter"?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__ciGDRYU5JsN__JHASH__"),{actionText:h._("__JHASH__mpD8GydGn1Q__JHASH__"),actionHandler:function(){return b("WAWebNewsletterToggleMuteStateAction").muteNewsletterAction(e.id,{eventSurface:d("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_THREAD})}}):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__i5pUe5uS9gs__JHASH__"))}else if(a.status>=400){if(n==="newsletter")throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__EZgoVd5_6s-__JHASH__"));if(n==="group")throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__hct5aFZjAxX__JHASH__"));throw new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__zPpteKOLzKR__JHASH__"))}});d("WAWebToastManager").ToastManager.open(w.jsx(d("WAWebActionToast.react").ActionToast,{id:p,initialAction:o,pendingAction:g}));return a.then(function(a){a.status===200&&k()})["finally"](function(){e.promises.unmute=null})}k();return(i||(i=b("Promise"))).resolve()};f.unmuteCall=function(){d("WALogger").LOG(k(),this.id.toString());this.$MuteImpl4();return(i||(i=b("Promise"))).resolve()};f["delete"]=function(){a.prototype["delete"].call(this),this.getCollection().remove(this.id),this.$MuteImpl3(),d("WAWebMuteGetters").clearMuteGetterCacheFor(this)};f.getCollection=function(){return b("WAWebMuteCollection").MuteCollection};return e}(d("WAWebBaseModel").BaseModel);f.Proxy="mute";f.idClass=c("WAWebWid");f.allowedIds=[a,e];f=d("WAWebBaseModel").defineModel(f);g.GLOBAL_MUTE=a;g.GLOBAL_REACTIONS_MUTE=e;g.Mute=f}),226);
__d("WAWebSuperChatMsgs",["WALogger","WAWebBaseModel","WAWebChatMsgsCollection","err","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Chat:replaceMsgsCollection:",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:Chat:removeMsg ",""]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.pendingMsgs=d("WAWebBaseModel").prop(),c.labels=d("WAWebBaseModel").prop(),c.msgChunks=d("WAWebBaseModel").session(function(){return[]}),c.lastReceivedKey=d("WAWebBaseModel").session(),c.unreadMsgAnchor=d("WAWebBaseModel").session(),c.disableUnreadAnchor=d("WAWebBaseModel").session(),c.msgsLength=d("WAWebBaseModel").session(),c.msgsChanged=d("WAWebBaseModel").session(0),c.msgs=d("WAWebBaseModel").collection(d("WAWebChatMsgsCollection").ChatMsgsCollection),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.initialize=function(){var b=this;a.prototype.initialize.call(this);this.listenTo(this.msgs,"change:last",function(){b.msgsChanged++});this.listenTo(this.msgs,"add remove bulk_add",function(){b.msgsChanged++,b.msgsLength=b.msgs.length})};e.onEmptyMRM=function(){throw c("err")("onEmptyMRM not implemented")};e["delete"]=function(){a.prototype["delete"].call(this),this.getAllCMCs().forEach(function(a){a.forEach(function(a){a["delete"]()}),a["delete"]()})};e.removeMsg=function(a){var b=a.msgChunk;if(!b)return;var c=b.indexOf(a);if(c<0)return;d("WALogger").LOG(i(),a.get("id"));b.remove(a);b.length===0&&(b===this.msgs?this.onEmptyMRM():this.removeMsgsCollection(b))};e.getAllCMCs=function(){return this.msgChunks.concat([this.msgs])};e.getAllMsgs=function(){return c("lodash").flatten(this.getAllCMCs().map(function(a){return a.getModelsArray()}))};e.replaceMsgsCollection=function(a){d("WALogger").LOG(h(),this.id.toString());var b={msg:a.last()};this.msgs.replace(a);this.notifyMsgCollectionMerge(a,this.msgs,this.msgs,b);this.msgChunks=c("lodash").without(this.msgChunks,a);a["delete"]()};e.removeMsgsCollection=function(a){this.msgChunks=c("lodash").without(this.msgChunks,a),a["delete"]()};e.notifyMsgCollectionMerge=function(a,b,c,d){this.trigger("change:cmc:merge",a,b,c,d)};return b}(d("WAWebBaseModel").BaseModel);g["default"]=a}),98);
__d("WAWebContactChecksumBridge",["Promise","WAWebUserPrefsModelStorage"],(function(a,b,c,d,e,f,g){var h;function a(a){d("WAWebUserPrefsModelStorage").setContactChecksum(a);return(h||(h=b("Promise"))).resolve()}g.setChecksum=a}),98);
__d("WAWebContactFrequentBridge",["Promise","err"],(function(a,b,c,d,e,f,g){var h;function a(a){var d={};Object.keys(a).forEach(function(b){d[b]=a[b].map(function(a){return a.toString()})});return(h||(h=b("Promise"))).reject(c("err")("unimplemented in MD mode"))}g.setFrequent=a}),98);
__d("WAWebContactSidelistHashIndex",["WALogger","WANullthrows","WAWebContactGetters","WAWebWid","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:Contact can't call slice on contact.userhash"]);h=function(){return a};return a}a=function(){function a(){this.$1={},this.length=0}a.getSidelistHash=function(a){if(!d("WAWebContactGetters").getIsUser(a))return null;a=d("WAWebContactGetters").getUserhash(a);if(typeof a!=="string"||!a.slice){d("WALogger").WARN(h()).devConsole(a);return null}return a.slice(0,4)};var b=a.prototype;b.put=function(b){var d=a.getSidelistHash(b);if(!d||this.$1[d])return;if(!this.$1[d])this.$1[d]=b.id;else{var e=this.$1[d];e instanceof c("WAWebWid")?this.$1[d]=[e,b.id]:e instanceof Array&&e.push(b.id)}this.length++};b.remove=function(b){var d=a.getSidelistHash(b);if(!d||!this.$1[d])return;var e=c("WANullthrows")(this.$1[d]);e instanceof c("WAWebWid")?delete this.$1[d]:e instanceof Array&&c("lodash").remove(e,function(a){return a.equals(b.id)});this.length++};b.get=function(a){a=this.$1[a];return a instanceof c("WAWebWid")?[a]:a};b.clear=function(){this.$1={},this.length=0};return a}();g["default"]=a}),98);
__d("WAWebContactCollection",["Promise","WALogger","WAWebBaseCollection","WAWebContactChecksumBridge","WAWebContactComparator","WAWebContactFrequentBridge","WAWebContactGetters","WAWebContactModel","WAWebContactSidelistHashIndex","WAWebL10N","WAWebSocketConstants","WAWebSocketModel","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:Contact init from cache"]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e;e=a.call(this)||this;e._contactHashes=new(c("WAWebContactSidelistHashIndex"))();e.checksum=void 0;e._frequentContacts={};e._sort=c("lodash").debounce(function(){return a.prototype.sort.call(babelHelpers.assertThisInitialized(e))},1e3);e._silentSort=c("lodash").debounce(function(){return a.prototype.sort.call(babelHelpers.assertThisInitialized(e),{silent:!0})},1e3);e.findImpl=function(a){var c=e.get(a);return c?(h||(h=b("Promise"))).resolve({id:c.id,stale:c.stale}):(h||(h=b("Promise"))).resolve({id:a})};e.listenTo(c("WAWebL10N"),"locale_change",function(){return e.sort()});e.listenTo(babelHelpers.assertThisInitialized(e),"change:name",e.sort);e.listenTo(d("WAWebSocketModel").Socket,"change:stream",function(){d("WAWebSocketModel").Socket.stream===d("WAWebSocketConstants").SOCKET_STREAM.RESUMING&&e.forEach(function(a){a.unset("verificationString"),a.unset("verificationBinary")})});e.listenTo(babelHelpers.assertThisInitialized(e),"add",e.contactAdded);e.listenTo(babelHelpers.assertThisInitialized(e),"remove",e.contactRemoved);return e}var f=e.prototype;f.sort=function(a){return(a==null?void 0:a.silent)?this._silentSort():this._sort()};f.ensureSorted=function(){this._sort.flush()};f.initializeFromCache=function(a){if(!a)return;d("WALogger").LOG(i());this.add(a,{silent:!0,merge:!0})};f.contactAdded=function(a){this._contactHashes.put(a)};f.contactRemoved=function(a){this._contactHashes.remove(a)};f["delete"]=function(){a.prototype["delete"].call(this),this.setChecksum(),delete this.checksum,this._frequentContacts={},d("WAWebContactFrequentBridge").setFrequent({})["catch"](function(){}),this._contactHashes.clear()};f.isFilteredContact=function(a){return!!a.name&&!d("WAWebContactGetters").getIsMe(a)&&!d("WAWebContactGetters").getIsPSA(a)&&d("WAWebContactGetters").getIsWAContact(a)};f.getFilteredContacts=function(a){var b=a.showMe,c=b===void 0?!1:b;b=a.showWithoutName;var e=b===void 0?!1:b;b=a.includeLidContacts;var f=b===void 0?!1:b;return this.filter(function(a){if(d("WAWebContactGetters").getIsMe(a)&&!a.id.isLid())return c;if(a.id.isBot())return!1;return a.id.isLid()&&f===!1?!1:(a.name||e)&&!d("WAWebContactGetters").getIsPSA(a)&&d("WAWebContactGetters").getIsWAContact(a)})};f.getGroupContacts=function(){return this.filter(function(a){return d("WAWebContactGetters").getIsGroup(a)})};f.frequentContacts=function(a,b){var c=this;a=a&&this._frequentContacts[a];a||(a=this._frequentContacts.message);if(!a)return[];var d=b==null?void 0:b.id;return a.map(function(a){return c.get(a)}).filter(function(a){return!!a&&!a.id.equals(d)})};f.setChecksum=function(a){this.checksum=a,d("WAWebUserPrefsGeneral").setContactChecksum(this.checksum),d("WAWebContactChecksumBridge").setChecksum(a)["catch"](function(){})};f.resolveWidsFromHash=function(a){return this._contactHashes.get(a)};f.getMeContact=function(){var a=d("WAWebUserPrefsMeUser").getMaybeMeUser();return a==null?null:this.get(a)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebContactModel");a.comparator=d("WAWebContactComparator").ContactComparator;e=new a();g.ContactCollectionImpl=a;g.ContactCollection=e}),98);
__d("WAWebContactShortName",["WALogger","WAWebAlphaRegex","WAWebNonEmptyString"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[short-name] unable to get short name for contact: ",""]);h=function(){return a};return a}function a(a){if(a==null)return null;var b=a.split(/\s/);b=b[0];if(c("WAWebAlphaRegex").exec(b))return d("WAWebNonEmptyString").asMaybeNonEmptyString(b);d("WALogger").LOG(h(),a);return null}g.getShortName=a}),98);
__d("WAWebContactModel",["fbt","WALogger","WATimeUtils","WAWebAlarm","WAWebApiContact","WAWebBaseModel","WAWebBizBusinessChangeAction","WAWebBizGatingUtils","WAWebBizLabelUtils","WAWebBlocklistCollection","WAWebBotGating","WAWebBusinessProfileCollection","WAWebConnModel","WAWebContactCollection","WAWebContactGetters","WAWebContactShortName","WAWebFrontendContactGetters","WAWebL10N","WAWebProfilePicThumbCollection","WAWebStatusCollection","WAWebTextStatusGatingUtils","WAWebTextStatusUtils","WAWebUpdateTextStatusForContact","WAWebUsernameGatingUtils","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["contact:onPendingActionUpdate pendingAction value is invalid"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["contact:getStatus for non-user ",""]);j=function(){return a};return a}var k=1e3;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.name=d("WAWebBaseModel").prop(),c.shortName=d("WAWebBaseModel").prop(),c.pushname=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop("in"),c.verifiedName=d("WAWebBaseModel").prop(),c.isBusiness=d("WAWebBaseModel").prop(),c.isEnterprise=d("WAWebBaseModel").prop(),c.isSmb=d("WAWebBaseModel").prop(),c.verifiedLevel=d("WAWebBaseModel").prop(),c.privacyMode=d("WAWebBaseModel").prop(),c.statusMute=d("WAWebBaseModel").prop(),c.sectionHeader=d("WAWebBaseModel").prop(),c.labels=d("WAWebBaseModel").prop(),c.isContactSyncCompleted=d("WAWebBaseModel").prop(),c.forcedBusinessUpdateFromServer=d("WAWebBaseModel").prop(),c.disappearingModeDuration=d("WAWebBaseModel").prop(),c.disappearingModeSettingTimestamp=d("WAWebBaseModel").prop(),c.textStatusString=d("WAWebBaseModel").prop(),c.textStatusEmoji=d("WAWebBaseModel").prop(),c.textStatusEphemeralDuration=d("WAWebBaseModel").prop(),c.textStatusLastUpdateTime=d("WAWebBaseModel").prop(d("WAWebTextStatusUtils").TEXT_STATUS_NOT_FETCHED),c.textStatusExpiryTs=d("WAWebBaseModel").prop(),c.requestedPnTimestamp=d("WAWebBaseModel").prop(),c.username=d("WAWebBaseModel").prop(),c.isContactBlocked=d("WAWebBaseModel").session(!1),c.verificationString=d("WAWebBaseModel").session(),c.verificationBinary=d("WAWebBaseModel").session(),c.pendingAction=d("WAWebBaseModel").session(),c.promises=d("WAWebBaseModel").session(function(){return{}}),c.status=d("WAWebBaseModel").session(),c.profilePicThumb=d("WAWebBaseModel").session(),c.businessProfile=d("WAWebBaseModel").session(),c.commonGroups=d("WAWebBaseModel").session(),c.businessCatalog=d("WAWebBaseModel").session(),c.locale=d("WAWebBaseModel").session(),c.shareOwnPn=d("WAWebBaseModel").session(),c.phoneNumber=d("WAWebBaseModel").session(),c.displayNameLID=d("WAWebBaseModel").session(),c.isHosted=d("WAWebBaseModel").session(!1),c.meTextStatusExpiryTimer=d("WAWebBaseModel").session(),c.isSyncedContact=d("WAWebBaseModel").session(!1),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.$Contact1=function(){var a;c("WAWebAlarm").clearTimeout(this.meTextStatusExpiryTimer);this.unset(["meTextStatusExpiryTimer"]);void d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(this.id,(a=d("WAWebTextStatusUtils")).CLEAR_TEXT_STATUS_STRING_VAL,a.CLEAR_TEXT_STATUS_EMOJI_VAL,a.CLEAR_TEXT_STATUS_EPHEMERAL_DURATION_VAL,a.CLEAR_TEXT_STATUS_LAST_UPDATE_TIME_VAL)};f.setupStatusExpiration=function(){var a=this,b=this.textStatusExpiryTs;b!=null&&(this.meTextStatusExpiryTimer!=null&&c("WAWebAlarm").clearTimeout(this.meTextStatusExpiryTimer),b<d("WATimeUtils").unixTime()?self.setTimeout(function(){void a.$Contact1()}):this.meTextStatusExpiryTimer=c("WAWebAlarm").setGlobalTimeout(function(){return a.$Contact1()},b*k,this.meTextStatusExpiryTimer))};f.initialize=function(){var e=this;a.prototype.initialize.call(this);if(!this.id)return;d("WAWebContactGetters").getIsMe(this)&&this.addChild("status",d("WAWebStatusCollection").StatusCollection.gadd(this.id));d("WAWebContactGetters").getIsMe(this)&&d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled()&&(this.setupStatusExpiration(),this.listenTo(this,"change:textStatusExpiryTs",function(){self.setTimeout(function(){e.setupStatusExpiration()})}));d("WAWebContactGetters").getIsMe(this)&&this.addChild("profilePicThumb",d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(this.id));(this.isBusiness||d("WAWebContactGetters").getIsMe(this)&&d("WAWebConnModel").Conn.isSMB)&&this.addChild("businessProfile",b("WAWebBusinessProfileCollection").BusinessProfileCollection.gadd(this.id));this.listenTo(this,"change:isBusiness",function(){return d("WAWebBizBusinessChangeAction").handleBusinessChange(e)});d("WAWebContactGetters").getIsMe(this)&&this.listenTo(d("WAWebConnModel").Conn,"change:pushname",function(){e.set({pushname:d("WAWebConnModel").Conn.pushname})});this.listenTo(c("WAWebL10N"),"locale_change",function(){e.locale=c("WAWebL10N").getLocale()});this.listenTo(d("WAWebBlocklistCollection").BlocklistCollection,"add remove",this.updateContactBlocked);this.id.isUser()&&this.updateContactBlocked();this.listenTo(this,"change:name",this.updateShortName);this.listenTo(this,"change:name",this.updateName);this.pendingAction=0;d("WAWebConnModel").Conn.isSMB&&d("WAWebBizLabelUtils").initializeLabels(this);this.id.isLid()?this.copyNameFromPnContact():this.id.isUser()&&(this.updateLidContactName(),this.listenTo(this,"change:name",function(){e.updateLidContactName()}));if(d("WAWebBotGating").isBotReceiveEnabled()){if(!this.id.isBot())return;if(this.name)return;this.id.user==="13135550002"?this.set({name:"Meta AI"}):this.set({name:h._("__JHASH__EPeGsI7rO7P__JHASH__").toString()});this.set({type:"out"})}};f.updateName=function(){var a;!d("WAWebContactGetters").getIsMyContact(this)&&d("WAWebBotGating").isBizBot3pEnabled()&&((a=this.businessProfile)==null?void 0:a.isBizBot3p)===!0&&this.verifiedName!=null&&this.set({name:this.verifiedName})};f.updateShortName=function(){if(d("WAWebContactGetters").getIsUser(this)&&this.name&&!this.shortName){var a=d("WAWebContactShortName").getShortName(this.name);a!=null&&this.set("shortName",a)}};f.updateLidContactName=function(){var a=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(this.id));if(a!=null){a=this.getCollection().get(a);a&&a.set({name:this.name})}};f.copyNameFromPnContact=function(){var a=this.phoneNumber;if(a!=null){a=this.getCollection().get(a);(a==null?void 0:a.name)!=null&&this.set({name:a.name})}};f.getStatus=function(){c("WAWebWid").user(this.id)||d("WALogger").LOG(j(),this.id.toString());return this.status=d("WAWebStatusCollection").StatusCollection.gadd(this.id)};f.getProfilePicThumb=function(){return this.profilePicThumb=d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(this.id)};f.addPendingAction=function(a){var b=this,c=function(){b.decPending()};a.then(c,c);this.pendingAction++;return a};f.decPending=function(){this.pendingAction>0?this.pendingAction--:(d("WALogger").LOG(i()),this.pendingAction=0)};f.updateContactBlocked=function(){if(this.id.isUser()){var a=this.phoneNumber,b=!1;if(d("WAWebBlocklistCollection").BlocklistCollection.get(this.id))b=!0;else if(this.id.isLid()&&a!=null)b=d("WAWebBlocklistCollection").BlocklistCollection.get(a)!=null;else if(!this.id.isLid()){a=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(this.id));a!=null&&(b=d("WAWebBlocklistCollection").BlocklistCollection.get(a)!=null)}this.isContactBlocked=b}};f.searchMatch=function(a,b,e){var f=d("WAWebFrontendContactGetters").getSearchName(this),g=d("WAWebFrontendContactGetters").getUsername(this);if(d("WAWebBizGatingUtils").canDisplayLabel()&&e){var i;return a&&f&&!f.includes(a)&&g&&!g.includes(a)?!1:Boolean((i=this.labels)==null?void 0:i.includes(e))}if(!a)return!1;if(f&&f.includes(a))return!0;if(d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&g&&g.includes(a))return!0;i=d("WAWebContactGetters").getUserid(this);if(i&&i.includes(a))return!0;if(b)if(!this.id.isLid()){if(i!=null&&i.includes(b))return!0}else if(i!=null){e=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").createUserWid(i,"lid"));if(e!=null&&e.toString().includes(b))return!0}f=d("WAWebContactGetters").getSearchVerifiedName(this);if(f&&f.includes(a))return!0;if(this.pushname&&c("WAWebL10N").accentFold(this.pushname).includes(a))return!0;if(d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&this.username!=null&&c("WAWebL10N").accentFold(this.username).includes(a))return!0;if(d("WAWebContactGetters").getIsMe(this)){g=c("WAWebL10N").accentFold(h._("__JHASH__XOhSD1cRrEc__JHASH__").toString());if(g.includes(a))return!0}return!1};f.set=function(b,c,e){e=a.prototype.set.call(this,b,c,e);if(typeof b!=="string"&&(c==null?void 0:c.merge)&&e){if(d("WAWebContactGetters").getIsPSA(e))return e;if(e.id.isBot())return e;!b.name&&e.name&&(e.unset("name"),e.unset("shortName"));!b.verifiedName&&e.verifiedName&&e.unset("verifiedName")}return e};f.getCollection=function(){return b("WAWebContactCollection").ContactCollection};f.setNotMyContact=function(){this.name&&(this.set("name",void 0),this.set("type","out"))};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="contact";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),226);
__d("WAWebStatusCollection",["fbt","WAWebBaseCollection","WAWebStatusContactAction","WAWebStatusModel","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g,h){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.findImpl=function(a){a=a instanceof c("WAWebWid")?a:d("WAWebWidFactory").createWid(a);return d("WAWebStatusContactAction").getStatus(a)},b)||babelHelpers.assertThisInitialized(e)}return b}(d("WAWebBaseCollection").BaseCollection);b.model=c("WAWebStatusModel");b.idClass=c("WAWebWid");b.staleCollection=!0;function a(){return h._("__JHASH___HFqOsV3qQe__JHASH__").toString()}e=new b();g.StatusCollectionImpl=b;g.getDefaultStatus=a;g.StatusCollection=e}),226);
__d("WAWebStatusModel",["WAWebBaseModel","WAWebStatusCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.status=d("WAWebBaseModel").prop(),c.stale=d("WAWebBaseModel").session(!0),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebStatusCollection").StatusCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="status";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),98);
__d("WAWebDailyAggregatedStats",["$InternalEnum","WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NARRATIVE_APPEAR:1,DIALOG_APPEAR:2,DIALOG_SELECT:3});var h=24*60*60*1e3,i=3*7*h;c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.startTime=d("WAWebBaseModel").prop(),c.pttCancelBroadcast=d("WAWebBaseModel").prop(0),c.pttCancelGroup=d("WAWebBaseModel").prop(0),c.pttCancelIndividual=d("WAWebBaseModel").prop(0),c.pttCancelNewsletter=d("WAWebBaseModel").prop(0),c.pttDraftReviewBroadcast=d("WAWebBaseModel").prop(0),c.pttDraftReviewGroup=d("WAWebBaseModel").prop(0),c.pttDraftReviewIndividual=d("WAWebBaseModel").prop(0),c.pttDraftReviewNewsletter=d("WAWebBaseModel").prop(0),c.pttFastplaybackBroadcast=d("WAWebBaseModel").prop(0),c.pttFastplaybackGroup=d("WAWebBaseModel").prop(0),c.pttFastplaybackIndividual=d("WAWebBaseModel").prop(0),c.pttFastplaybackNewsletter=d("WAWebBaseModel").prop(0),c.pttLockBroadcast=d("WAWebBaseModel").prop(0),c.pttLockGroup=d("WAWebBaseModel").prop(0),c.pttLockIndividual=d("WAWebBaseModel").prop(0),c.pttLockNewsletter=d("WAWebBaseModel").prop(0),c.pttPlaybackBroadcast=d("WAWebBaseModel").prop(0),c.pttPlaybackGroup=d("WAWebBaseModel").prop(0),c.pttPlaybackIndividual=d("WAWebBaseModel").prop(0),c.pttPlaybackNewsletter=d("WAWebBaseModel").prop(0),c.pttRecordBroadcast=d("WAWebBaseModel").prop(0),c.pttRecordGroup=d("WAWebBaseModel").prop(0),c.pttRecordIndividual=d("WAWebBaseModel").prop(0),c.pttRecordNewsletter=d("WAWebBaseModel").prop(0),c.pttSendBroadcast=d("WAWebBaseModel").prop(0),c.pttSendGroup=d("WAWebBaseModel").prop(0),c.pttSendIndividual=d("WAWebBaseModel").prop(0),c.pttSendNewsletter=d("WAWebBaseModel").prop(0),c.pttPausedRecordBroadcast=d("WAWebBaseModel").prop(0),c.pttPausedRecordGroup=d("WAWebBaseModel").prop(0),c.pttPausedRecordIndividual=d("WAWebBaseModel").prop(0),c.pttPausedRecordNewsletter=d("WAWebBaseModel").prop(0),c.pttStopTapBroadcast=d("WAWebBaseModel").prop(0),c.pttStopTapGroup=d("WAWebBaseModel").prop(0),c.pttStopTapIndividual=d("WAWebBaseModel").prop(0),c.pttStopTapNewsletter=d("WAWebBaseModel").prop(0),c.pttOutOfChatBroadcast=d("WAWebBaseModel").prop(0),c.pttOutOfChatGroup=d("WAWebBaseModel").prop(0),c.pttOutOfChatIndividual=d("WAWebBaseModel").prop(0),c.pttOutOfChatNewsletter=d("WAWebBaseModel").prop(0),c.goldenBoxContactNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.goldenBoxContactDialogAppearCount=d("WAWebBaseModel").prop(0),c.goldenBoxContactDialogSelectCount=d("WAWebBaseModel").prop(0),c.goldenBoxGroupNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.goldenBoxGroupDialogAppearCount=d("WAWebBaseModel").prop(0),c.goldenBoxGroupDialogSelectCount=d("WAWebBaseModel").prop(0),c.infoScreenContactNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.infoScreenContactDialogAppearCount=d("WAWebBaseModel").prop(0),c.infoScreenContactDialogSelectCount=d("WAWebBaseModel").prop(0),c.infoScreenGroupNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.infoScreenGroupDialogAppearCount=d("WAWebBaseModel").prop(0),c.infoScreenGroupDialogSelectCount=d("WAWebBaseModel").prop(0),c.chatsListNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.chatsListDialogAppearCount=d("WAWebBaseModel").prop(0),c.chatsListDialogSelectCount=d("WAWebBaseModel").prop(0),c.statusListNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.statusListDialogAppearCount=d("WAWebBaseModel").prop(0),c.statusListDialogSelectCount=d("WAWebBaseModel").prop(0),c.callingScreenAudioNarrativeAppearCount=d("WAWebBaseModel").prop(0),c.callingScreenAudioDialogAppearCount=d("WAWebBaseModel").prop(0),c.callingScreenAudioDialogSelectCount=d("WAWebBaseModel").prop(0),c.prinaLastEvent=d("WAWebBaseModel").prop(0),c.communityTabGroupNavigations=d("WAWebBaseModel").prop(0),c.communityTabToHomeViews=d("WAWebBaseModel").prop(0),c.communityTabViews=d("WAWebBaseModel").prop(0),c.communityTabViewsViaContextMenu=d("WAWebBaseModel").prop(0),c.communityNoActionTabViews=d("WAWebBaseModel").prop(0),c.communityHome=d("WAWebBaseModel").prop(function(){return{}}),c.pnhCagActions=d("WAWebBaseModel").prop(function(){return{}}),c.pnhCtwaActions=d("WAWebBaseModel").prop(function(){return{}}),c.kicGroupNotificationTaps=d("WAWebBaseModel").prop(0),c.kicGroupNotifications=d("WAWebBaseModel").prop(0),c.kicNotificationTaps=d("WAWebBaseModel").prop(0),c.kicNotifications=d("WAWebBaseModel").prop(0),c.chatLockFolderChatsCount=d("WAWebBaseModel").prop(0),c.chatLockFolderOpenCount=d("WAWebBaseModel").prop(0),c.chatLockLockFolderHidden=d("WAWebBaseModel").prop(null),c.chatLockNewAddChatCount=d("WAWebBaseModel").prop(0),c.chatLockNewRemoveChatCount=d("WAWebBaseModel").prop(0),c.chatLockSecretCodeActive=d("WAWebBaseModel").prop(null),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this)};c.getEndTime=function(){return this.startTime+h};c.shouldBeSubmitted=function(){return!this.isExpired()&&this.getEndTime()<Date.now()};c.isExpired=function(){var a=Date.now()-i;return this.startTime<a};return b}(d("WAWebBaseModel").BaseModel);c.Proxy="daily-aggregated-stats";e=d("WAWebBaseModel").defineModel(c);g.PrinaDailyActionType=a;g.DailyAggregatedStats=e}),98);
__d("WAWebDailyAggregatedStatsCollection",["WANullthrows","WAWebBaseCachePolicy","WAWebBaseCollection","WAWebDailyAggregatedStats","WAWebUserPrefsGeneral","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){var h=24*60*60*1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.gaddForDate=function(a){var b=d("WAWebUserPrefsGeneral").getDailyStatsStartTime();a=a.getTime()-b;a=Math.floor(a/h);b=b+h*a;return(a=this.get(b))!=null?a:c("WANullthrows")(this.add({id:b.toString(),startTime:b})[0])};e.gaddForToday=function(){return this.gaddForDate(new Date())};e.initializeFromCache=function(a){if(a==null)return;a=a.map(function(a){return new(d("WAWebDailyAggregatedStats").DailyAggregatedStats)(a)}).filter(function(a){return i(a)&&!a.isExpired()});this.add(a)};e.serialize=function(){return this.toArray().filter(function(a){return i(a)&&!a.isExpired()}).map(function(a){return a.toJSON()})};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebDailyAggregatedStats").DailyAggregatedStats;a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.DAILY_AGGREGATED_STATS_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:1e3};b=new a();function i(a){return(a.startTime-d("WAWebUserPrefsGeneral").getDailyStatsStartTime())%h===0}g.DailyAggregatedStatsCollectionImpl=a;g.DailyAggregatedStatsCollection=b}),98);
__d("WAWebEmojiVariantModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.variant=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="emojiVariant";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebEmojiVariantCollection",["WAWebBaseCachePolicy","WAWebBaseCollection","WAWebEmoji","WAWebEmojiVariantModel","WAWebUserPrefsKeys","err"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.setVariant=function(a,b){a=d("WAWebEmoji").EmojiUtil.getSkinToneBase(a);if(a)this.gadd({id:a,variant:b});else throw c("err")("attempt to store variantless emoji")};e.getVariant=function(a){if(d("WAWebEmoji").EmojiUtil.getSkinToneBase(a)){a=this.get(a);return a?d("WAWebEmoji").EmojiUtil.normalizeEmoji(a.variant):null}throw c("err")("attempt to get variantless emoji")};e.getVariantIfExists=function(a){if(d("WAWebEmoji").EmojiUtil.getSkinToneBase(a)){a=this.get(a);return a?d("WAWebEmoji").EmojiUtil.normalizeEmoji(a.variant):null}return null};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebEmojiVariantModel");a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.EMOJI_VARIANT_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:1e3};b=new a();g.EmojiVariantCollectionImpl=a;g.EmojiVariantCollection=b}),98);
__d("WAWebRecentEmojiModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.weight=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="recentEmoji";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebRecentEmojiCollection",["WAWebBaseCachePolicy","WAWebBaseCollection","WAWebEmoji","WAWebRecentEmojiModel","WAWebUserPrefsKeys","lodash"],(function(a,b,c,d,e,f,g){var h=100,i=36;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.dirty=!1;b.listenTo(babelHelpers.assertThisInitialized(b),"change:weight change:length",c("lodash").debounce(b._sortTrimScale,h));return b}var e=b.prototype;e._sortTrimScale=function(){var a=this.length;if(!a)return;this.sort();a>i&&this.remove(this.slice(i))};e["delete"]=function(){a.prototype["delete"].call(this),this.dirty=!1};e.increment=function(a){var b=d("WAWebEmoji").EmojiUtil.getSkinToneBase(a)||a;this.get(b)||this.add({id:b,weight:0});this.forEach(function(a){a.id===b?a.weight+=1:a.weight*=.9});this.dirty=!0};return b}(d("WAWebBaseCollection").BaseCollection);a.cachePolicy={id:d("WAWebUserPrefsKeys").COLLECTIONS_KEYS.RECENT_EMOJI_COLLECTION,policy:d("WAWebBaseCachePolicy").CACHE_POLICY.LOAD,delay:2e3};a.comparator=function(a,b){return a.weight>b.weight?-1:1};a.model=c("WAWebRecentEmojiModel");b=new a();g.RecentEmojiCollectionImpl=a;g.RecentEmojiCollection=b}),98);
__d("WAWebCommunityActivityModel",["$InternalEnum","WAWebBaseModel","WAWebModelUtils"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum").Mirrored(["SUB_GROUP_LINK","NEW_COMMUNITY"]);c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebModelUtils").prop(),c.communityId=d("WAWebModelUtils").prop(),c.type=d("WAWebModelUtils").prop(),c.timestamp=d("WAWebModelUtils").prop(),c.subgroupName=d("WAWebModelUtils").prop(),c.subgroupId=d("WAWebModelUtils").prop(),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);c.Proxy="communityActivity";e=d("WAWebBaseModel").defineModel(c);g.ActivityTypeType=a;g.CommunityActivity=e}),98);
__d("WAWebCommunityActivityCollection",["fbt","WAWebBaseCollection","WAWebChatCollection","WAWebCommunityActivityModel","WAWebDBMessageStoreUtils","WAWebGroupMetadataCollection","WAWebGroupType","WAWebUnjoinedSubgroupMetadataCollection","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this)||this;b.listenTo(c("WAWebUnjoinedSubgroupMetadataCollection"),"add remove change:subject",b.$CommunityActivityCollection1);return b}var f=e.prototype;f.$CommunityActivityCollection1=function(a){var b=this.findFirst(function(b){return(b=b.subgroupId)==null?void 0:b.equals(a.id)});b!=null&&(b.subgroupName=a.subject)};f.getActivityFor=function(a){return this.filter(function(b){return b.communityId.equals(a)})};f.shouldShowTabBadge=function(){var a;if(this.length===0)return!1;var b=(a=d("WAWebUserPrefsMultiDevice").getCommunityTabLastSeenTimestamp())!=null?a:0;return this.some(function(a){return a.timestamp>b})};f.syncActivityFor=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,e=c("WAWebGroupMetadataCollection").assertGet(a),f=(e=e.lastSeenActivityTimestamp)!=null?e:0,g=(e=d("WAWebUserPrefsMultiDevice").getCommunityTabLastSeenTimestamp())!=null?e:0;e=(yield d("WAWebDBMessageStoreUtils").getMessagesBefore(a.toString(),function(a){return a.t<f}));if(e.length===0)return;e.forEach(function(e){if(e.author==null)return;var f=d("WAWebWidFactory").createWidFromWidLike(e.author);if(d("WAWebUserPrefsMeUser").isMeAccount(f))return;f=e.t;if(e.subtype===d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_LINK){var i,j;i=d("WAWebWidFactory").createWidFromWidLike((i=e.templateParams)==null?void 0:i[0]);j=(j=d("WAWebChatCollection").ChatCollection.get(i))==null?void 0:j.formattedTitle;if(j==null){var k,l;k=(k=c("WAWebUnjoinedSubgroupMetadataCollection").get(i.toString()))==null?void 0:k.subject;l=(l=e.templateParams)==null?void 0:l[1];k!=null?j=k:typeof l==="string"?j=l:j=h._("__JHASH__ZaGfe2XzaM2__JHASH__").toString()}b.addDeduppedSubgroupLink([{id:e.id,type:d("WAWebCommunityActivityModel").ActivityTypeType.SUB_GROUP_LINK,communityId:a,timestamp:f,subgroupName:j,subgroupId:i}])}else e.subtype===d("WAWebGroupType").GROUP_ACTIONS.ADD&&(f>g&&b.add({id:a.toString(),communityId:a,timestamp:f,type:d("WAWebCommunityActivityModel").ActivityTypeType.NEW_COMMUNITY}))})});function e(b){return a.apply(this,arguments)}return e}();f.addDeduppedSubgroupLink=function(a){var b=this;a=a.filter(function(a){return!b.some(function(b){return(b=b.subgroupId)==null?void 0:b.equals(a.subgroupId)})});return this.add(a)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebCommunityActivityModel").CommunityActivity;a.comparator=function(a,b){return a.timestamp-b.timestamp};e=new a();g["default"]=e}),226);
__d("WAWebGroupMembershipApprovalRequestCollection",["WAWebCollection","WAWebGroupMembershipApprovalRequestModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebCollection"));a.model=c("WAWebGroupMembershipApprovalRequestModel");a.comparator=function(a,b){return b.t-a.t};g["default"]=a}),98);
__d("WAWebGroupMembershipApprovalRequestModel",["WAWebBaseModel","WAWebContactCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.addedBy=d("WAWebBaseModel").prop(),c.requestMethod=d("WAWebBaseModel").prop(),c.parentGroupId=d("WAWebBaseModel").prop(),c.contact=d("WAWebBaseModel").session(),c.addedByContact=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd(this.id)),this.addChild("addedByContact",d("WAWebContactCollection").ContactCollection.gadd(this.addedBy))};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="membership_approval_request";a.idClass=c("WAWebWid");b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebGroupMetadataCollection",["Promise","WALogger","WAWebBaseCollection","WAWebChatCollection","WAWebFindGroupMetadataAction","WAWebGroupMetadataModel","WAWebIsCagGroupCache","WAWebProfilePicThumbCollection","WAWebUpdateSubgroupsCommunityAction","WAWebWid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupMetadata:find trying to fetch non-group/bclist wid ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupMetadata: skip trying to find groupMetadata wid ",""]);j=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e;e=a.call(this)||this;e._handleIsParentGroupChange=function(a){a.isParentGroup===!0&&void d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.update(a.id)};e.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("WAWebWid").isGroup(a)){var e=b("WAWebChatCollection").ChatCollection.get(a);if((e==null?void 0:e.isReadOnly)&&(e==null?void 0:(e=e.groupMetadata)==null?void 0:e.stale)===!1){d("WALogger").LOG(j(),a.toString());return(h||(h=b("Promise"))).resolve({id:a})}return d("WAWebFindGroupMetadataAction").findGroupMetadata(a).then(function(a){return a==null?a:babelHelpers["extends"]({},a)})}else if(c("WAWebWid").isBroadcast(a))return(h||(h=b("Promise"))).resolve({id:a});d("WALogger").LOG(i(),a.toString());return(h||(h=b("Promise"))).reject(c("err")("groupMetadata:find trying to fetch non-group/bclist wid "+a.toString()))});return function(b){return a.apply(this,arguments)}}();e.listenTo(babelHelpers.assertThisInitialized(e),"add",e._handleGroupAdd);e.listenTo(babelHelpers.assertThisInitialized(e),"remove",e._handleGroupRemove);e.listenTo(babelHelpers.assertThisInitialized(e),"change:parentGroup",e._handleParentGroupChange);e.listenTo(babelHelpers.assertThisInitialized(e),"change:isParentGroup",e._handleIsParentGroupChange);e.listenTo(babelHelpers.assertThisInitialized(e),"change:defaultSubgroup",e._handleDefaultSubgroupChange);return e}var f=e.prototype;f._handleGroupAdd=function(a){a.defaultSubgroup===!0&&c("WAWebIsCagGroupCache").add(a.id);if(!a.participants.iAmMember())return;var b=a.parentGroup?this.get(a.parentGroup.toString()):null;if(b!=null){a=a.id;d("WAWebUpdateSubgroupsCommunityAction").subgroupUnjoinedToJoined(b,a)}};f._handleGroupRemove=function(a){a.defaultSubgroup===!0&&c("WAWebIsCagGroupCache").remove(a.id);if(!a.participants.iAmMember())return;a=a.parentGroup?this.get(a.parentGroup.toString()):null;a!=null&&d("WAWebUpdateSubgroupsCommunityAction").updateJoinedSubgroups(a)};f._handleParentGroupChange=function(a,b,c){if(!a.participants.iAmMember())return;a=a.id;b=b!=null?this.get(b.toString()):null;c=c!=null?this.get(c.toString()):null;b!=null?(d("WAWebUpdateSubgroupsCommunityAction").subgroupUnjoinedToJoined(b,a),c!=null&&d("WAWebUpdateSubgroupsCommunityAction").updateJoinedSubgroups(c)):c!=null&&d("WAWebUpdateSubgroupsCommunityAction").unlinkParentGroup(c,a)};f._handleDefaultSubgroupChange=function(a,b){b===!0?c("WAWebIsCagGroupCache").add(a.id):c("WAWebIsCagGroupCache").remove(a.id)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebGroupMetadataModel");a.staleCollection=!0;e=new a();g["default"]=e}),98);
__d("WAWebChatUnreadMentionCollection",["WAWebCollection","WAWebUnreadMentionModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.oldestUnreadMention=function(){var a;a=(a=this.last())!=null?a:null;a&&this.remove(a);return a};return b}(c("WAWebCollection"));a.model=c("WAWebUnreadMentionModel");a.comparator=function(a,b){return b.timestamp-a.timestamp};g["default"]=a}),98);
__d("WAWebUnreadMentionMetadataModel",["WAWebBaseModel","WAWebChatUnreadMentionCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.unreadMentionCollection=d("WAWebBaseModel").prop(),c.pendingUnreadMentionCount=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.initialize=function(){this.unreadMentionCollection=new(c("WAWebChatUnreadMentionCollection"))(),this.pendingUnreadMentionCount=0};e.hasMentionId=function(a){return this.unreadMentionCollection.get(a)!=null};e.addUnreadMentions=function(a,b){this.unreadMentionCollection.add(a)};e.removeUnreadMentions=function(a){this.unreadMentionCollection.remove(a)};e.oldestUnreadMention=function(){return this.unreadMentionCollection.oldestUnreadMention()};e.reset=function(){this.pendingUnreadMentionCount=0,this.unreadMentionCollection.reset()};e.getUnreadMentionCount=function(){return this.pendingUnreadMentionCount+this.unreadMentionCollection.length};return b}(d("WAWebBaseModel").BaseModel);b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebGroupMetadataModel",["fbt","Promise","WALogger","WAShiftTimer","WAWebABProps","WAWebBaseModel","WAWebChatCollection","WAWebCommunityGatingUtils","WAWebContactCollection","WAWebContactGetters","WAWebGroupMembershipApprovalRequestCollection","WAWebGroupMetadataCollection","WAWebGroupParticipantCollection","WAWebGroupPendingParticipantCollection","WAWebGroupType","WAWebInviteV4QueryGroupAction","WAWebMiscGatingUtils","WAWebPastParticipantCollection","WAWebSchemaGroupMetadata","WAWebSubgroupSuggestionCollection","WAWebUnjoinedSubgroupMetadataCollection","WAWebUnreadMentionMetadataModel","WAWebUpdateSubgroupsCommunityAction","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:groupMetadata:participantCollection:revokeGroupsV4AddInvite failed"]);j=function(){return a};return a}var k="https://chat.whatsapp.com/";a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.participants=d("WAWebBaseModel").collection(c("WAWebGroupParticipantCollection")),e.pendingParticipants=d("WAWebBaseModel").collection(c("WAWebGroupPendingParticipantCollection")),e.pastParticipants=d("WAWebBaseModel").collection(c("WAWebPastParticipantCollection")),e.membershipApprovalRequests=d("WAWebBaseModel").collection(c("WAWebGroupMembershipApprovalRequestCollection")),e.subgroupSuggestions=d("WAWebBaseModel").collection(c("WAWebSubgroupSuggestionCollection")),e.id=d("WAWebBaseModel").prop(),e.creation=d("WAWebBaseModel").prop(),e.owner=d("WAWebBaseModel").prop(),e.subject=d("WAWebBaseModel").prop(),e.subjectTime=d("WAWebBaseModel").prop(),e.desc=d("WAWebBaseModel").prop(),e.descId=d("WAWebBaseModel").prop(),e.descTime=d("WAWebBaseModel").prop(),e.descOwner=d("WAWebBaseModel").prop(),e.restrict=d("WAWebBaseModel").prop(),e.announce=d("WAWebBaseModel").prop(),e.noFrequentlyForwarded=d("WAWebBaseModel").prop(),e.ephemeralDuration=d("WAWebBaseModel").prop(),e.membershipApprovalMode=d("WAWebBaseModel").prop(),e.memberAddMode=d("WAWebBaseModel").prop(),e.growthLockExpiration=d("WAWebBaseModel").prop(),e.growthLockType=d("WAWebBaseModel").prop(),e.reportToAdminMode=d("WAWebBaseModel").prop(),e.size=d("WAWebBaseModel").prop(),e.numSubgroups=d("WAWebBaseModel").prop(),e.support=d("WAWebBaseModel").prop(),e.suspended=d("WAWebBaseModel").prop(!1),e.terminated=d("WAWebBaseModel").prop(!1),e.uniqueShortNameMap=d("WAWebBaseModel").prop(),e.isLidAddressingMode=d("WAWebBaseModel").prop(),e.isParentGroup=d("WAWebBaseModel").prop(),e.isParentGroupClosed=d("WAWebBaseModel").prop(),e.parentGroup=d("WAWebBaseModel").prop(),e.defaultSubgroup=d("WAWebBaseModel").prop(),e.generalSubgroup=d("WAWebBaseModel").prop(),e.generalChatAutoAddDisabled=d("WAWebBaseModel").prop(),e.unjoinedSubgroups=d("WAWebBaseModel").session(function(){return[]}),e.joinedSubgroups=d("WAWebBaseModel").session(function(){return[]}),e.allowNonAdminSubGroupCreation=d("WAWebBaseModel").prop(),e.lastActivityTimestamp=d("WAWebBaseModel").prop(),e.lastSeenActivityTimestamp=d("WAWebBaseModel").prop(),e.lastReportToAdminTimestamp=d("WAWebBaseModel").prop(),e.incognito=d("WAWebBaseModel").prop(),e.stale=d("WAWebBaseModel").session(!0),e.deviceStale=d("WAWebBaseModel").session(!1),e.trusted=d("WAWebBaseModel").session(!0),e.inviteCode=d("WAWebBaseModel").session(),e.groupInviteCodePromise=d("WAWebBaseModel").session(),e.revokeGroupInvitePromise=d("WAWebBaseModel").session(),e.participantQueryPromise=d("WAWebBaseModel").session(),e.deviceQueryPromise=d("WAWebBaseModel").session(),e.unjoinedSubgroupsQueryPromise=d("WAWebBaseModel").session(),e.displayedDesc=d("WAWebBaseModel").session(""),e.revokeGroupsV4AddInvitePromise=d("WAWebBaseModel").session(),e.groupInviteLink=d("WAWebBaseModel").derived(function(){return!this.inviteCode?null:""+k+this.inviteCode},["inviteCode"]),e.cachedDeviceCount=d("WAWebBaseModel").session(),e.cachedDeviceSizeBucket=d("WAWebBaseModel").session(),e.groupType=d("WAWebBaseModel").derived(function(){if(this.defaultSubgroup===!0)return d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP;if(this.generalSubgroup===!0)return d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP;if(this.parentGroup!=null)return d("WAWebGroupType").GroupType.LINKED_SUBGROUP;return this.isParentGroup===!0?d("WAWebGroupType").GroupType.COMMUNITY:d("WAWebGroupType").GroupType.DEFAULT},["parentGroup","isParentGroup","defaultSubgroup","generalSubgroup"]),e.isIncognitoCag=d("WAWebBaseModel").derived(function(){return this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&Boolean(this.incognito)},["groupType","incognito"]),e.isUnnamed=d("WAWebBaseModel").derived(function(){return this.subject===""},["subject"]),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.isNonAdminAndACAGJREnabled=function(){var a,b=!this.participants.iAmAdmin(),c=this.participants.iAmMember(),e=this.memberAddMode===d("WAWebSchemaGroupMetadata").MemberAddMode.ALL_MEMBER_ADD;a=(a=this.membershipApprovalMode)!=null?a:!1;return b&&c&&e&&a};f.hasUniqueShortNameMention=function(a){if(!this.uniqueShortNameMap||!a.shortName||!d("WAWebContactGetters").getIsMyContact(a))return!1;a=this.$GroupMetadata2(a.shortName);return(a=this.uniqueShortNameMap.get(a))!=null?a:!1};f.$GroupMetadata2=function(a){return a.toLowerCase().trim()};f.isSuspendedOrTerminated=function(){return this.suspended||this.terminated};f["delete"]=function(){a.prototype["delete"].call(this),this.getCollection().remove(this.id),this.participants["delete"]()};f.canSetSubject=function(){if(this.isSuspendedOrTerminated())return!1;if(d("WAWebCommunityGatingUtils").communitiesEnabled())if(this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return!1;else if(this.groupType===d("WAWebGroupType").GroupType.COMMUNITY)return this.participants.iAmAdmin();if(!this.participants.iAmMember())return!1;if(this.participants.iAmAdmin())return!this.support;return this.restrict===!0?!1:!this.support};f.canSetDescription=function(){if(!this.participants.iAmMember()||!this.participants.iAmAdmin()&&this.restrict)return!1;if(this.isSuspendedOrTerminated())return!1;return d("WAWebCommunityGatingUtils").communitiesEnabled()&&(this.groupType===d("WAWebGroupType").GroupType.COMMUNITY||this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)&&!this.participants.iAmAdmin()?!1:!this.support};f.searchMatch=function(a){if(a==null)return!1;var b=this.id;b=(b=d("WAWebChatCollection").ChatCollection.get(b))==null?void 0:b.formattedTitle;return b!=null&&b.toLowerCase().includes(a)?!0:!1};f.canSetGroupProperty=function(){if(this.isSuspendedOrTerminated())return!1;if(d("WAWebCommunityGatingUtils").communitiesEnabled()&&this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return!1;return this.participants.iAmAdmin()?!this.support:!1};f.userCanSetEphemeralSetting=function(a){var b=!this.support;if(this.isSuspendedOrTerminated())return!1;if(!this.participants.userIsMember(a))return!1;if(this.participants.userIsAdmin(a))return b;if(this.restrict)return!1;if(!d("WAWebABProps").getABPropConfigValue("ephemeral_allow_group_members_web"))return!1;return this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?!1:b};f.canSetEphemeralSetting=function(){var a=this;return d("WAWebUserPrefsMeUser").getMePNandLIDWids().some(function(b){return a.userCanSetEphemeralSetting(d("WAWebWidFactory").toUserWid(b))})};f.initialize=function(){var a=this;d("WAWebBaseModel").BaseModel.prototype.initialize.call(this);this.listenTo(this.participants,"change:isAdmin change:isSuperAdmin change:contact.isMyContact sort remove reset",function(){a.isTrusted(),a.$GroupMetadata3()});this.listenTo(this.participants,"bulk_add bulk_remove reset",this.triggerParticipantsChange);this.listenTo(this,"change:owner",this.isTrusted);this.listenTo(this,"change:isParentGroup",this.$GroupMetadata4);this.listenTo(this,"change:desc",this.$GroupMetadata3);this.listenTo(this,"change:groupType",this.$GroupMetadata3);this.$GroupMetadata3();this.isTrusted();this.$GroupMetadata1=this.$GroupMetadata5();this.listenTo(this.participants,"change:contact.shortName",this.$GroupMetadata6);this.uniqueShortNameMap=new Map();this.unreadMentionMetadata=new(c("WAWebUnreadMentionMetadataModel"))();this.groupType===d("WAWebGroupType").GroupType.COMMUNITY&&this.$GroupMetadata4()};f.$GroupMetadata6=function(){var a;(a=this.$GroupMetadata1)==null?void 0:a.debounce(e.UPDATE_NAME_MAP_DEBOUNCE_TIME)};f.triggerParticipantsChange=function(){if(d("WAWebMiscGatingUtils").isDropLastNameEnabled()){var a;(a=this.$GroupMetadata1)==null?void 0:a.debounce(e.UPDATE_NAME_MAP_DEBOUNCE_TIME)}this.trigger("change:participants")};f.$GroupMetadata5=function(){var a=this;return new(d("WAShiftTimer").ShiftTimer)(function(){if(d("WAWebMiscGatingUtils").isDropLastNameEnabled()){var b=new Map();a.participants&&a.participants.forEach(function(c){if(c.contact.shortName&&d("WAWebContactGetters").getIsMyContact(c.contact)){c=a.$GroupMetadata2(c.contact.shortName);!b.has(c)?b.set(c,!0):b.set(c,!1)}});a.uniqueShortNameMap=b}})};f.$GroupMetadata7=function(){return this.participants.some(function(a){return a.isAdmin&&d("WAWebContactGetters").getIsMyContact(a.contact)})};f.isTrusted=function(){if(this.stale)return this.trusted;if(this.support)return this.trusted=!0;if(this.owner){if(d("WAWebUserPrefsMeUser").isMeAccount(this.owner))return this.trusted=!0;var a=d("WAWebContactCollection").ContactCollection.get(this.owner);if(a!=null&&d("WAWebContactGetters").getIsMyContact(a))return this.trusted=!0}return!this.$GroupMetadata7()?this.trusted=!1:this.trusted=!0};f.hasJoined=function(){var a=this.id,b=this.groupType,c=this.joinedSubgroups;if(b===d("WAWebGroupType").GroupType.COMMUNITY)return c.length>0;b=d("WAWebChatCollection").ChatCollection.get(a);return!b?!1:b.isReadOnly===!1};f.$GroupMetadata3=function(){d("WAWebCommunityGatingUtils").communitiesEnabled()&&this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&!this.canSetDescription()&&(this.desc==null||this.desc==="")?this.displayedDesc=h._("__JHASH__BO-lF75hD0I__JHASH__").toString():this.displayedDesc=this.desc};f.$GroupMetadata4=function(){d("WAWebUpdateSubgroupsCommunityAction").updateJoinedSubgroups(this),d("WAWebUpdateSubgroupsCommunityAction").updateUnjoinedSubgroups(this)};f.revokeGroupsV4AddInvite=function(a){var c=this;if(this.revokeGroupsV4AddInvitePromise)return this.revokeGroupsV4AddInvitePromise;var e=d("WAWebWidToJid").widToGroupJid(this.id),f=this.pendingParticipants;(i||(i=b("Promise"))).resolve();e=d("WAWebInviteV4QueryGroupAction").revokeGroupInviteV4(a,e);return this.revokeGroupsV4AddInvitePromise=e.then(function(b){b.status>=200&&b.status<300&&f.remove(a);return b.status})["catch"](function(a){d("WALogger").WARN(j()).devConsole(a);return 500})["finally"](function(){c.revokeGroupsV4AddInvitePromise=null})};f.queryGroupsV4PendingInvite=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this,b=(yield d("WAWebInviteV4QueryGroupAction").getPendingParticipants(this.id));b.forEach(function(b){a.pendingParticipants.add({id:d("WAWebWidFactory").createUserWid(b)})});return});function c(){return a.apply(this,arguments)}return c}();f.getJoinedSubgroupsMetadata=function(){var a=this.getCollection();return this.joinedSubgroups.map(function(b){return a.get(b.toString())}).filter(Boolean)};f.getJoinedSubgroupsChat=function(){return this.joinedSubgroups.map(function(a){return d("WAWebChatCollection").ChatCollection.get(a.toString())}).filter(Boolean)};f.getUnjoinedSubgroupsMetadata=function(){var a=this.getUnjoinedCollection();return this.unjoinedSubgroups.map(function(b){return a.get(b.toString())}).filter(Boolean)};f.getSubgroupsMetadata=function(){return[].concat(this.getJoinedSubgroupsMetadata(),this.getUnjoinedSubgroupsMetadata())};f.getSubgroupSuggestions=function(){var a=new Set();return this.subgroupSuggestions.filter(function(b){var c=b.groupId;b=b.isExistingGroup;return a.has(c.toString())?!1:a.add(c.toString())&&!(b&&!d("WAWebCommunityGatingUtils").memberSuggestedGroupsM3ReceiverEnabled())})};f.getParentGroupChat=function(){var a=this.parentGroup;if(!a)return;return d("WAWebChatCollection").ChatCollection.get(a)};f.isParentGroupParticipant=function(){var a=this.parentGroup;if(!a)return!1;a=this.getCollection().get(a);return(a==null?void 0:a.joinedSubgroups.length)?!0:!1};f.getUnjoinedCollection=function(){return b("WAWebUnjoinedSubgroupMetadataCollection")};f.getCollection=function(){return b("WAWebGroupMetadataCollection")};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="groupMetadata";a.idClass=c("WAWebWid");a.UPDATE_NAME_MAP_DEBOUNCE_TIME=200;e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),226);
__d("WAWebGroupParticipantComparator",["WAWebContactComparator"],(function(a,b,c,d,e,f,g){a=function(a,b){return d("WAWebContactComparator").ContactComparator(a.contact,b.contact)};b=a;g["default"]=b}),98);
__d("WAWebGroupParticipantCollection",["WAWebABProps","WAWebChatCollection","WAWebCollection","WAWebCommunityGatingUtils","WAWebContactCollection","WAWebContactGetters","WAWebCreateGroupAction","WAWebGroupParticipantComparator","WAWebGroupParticipantModel","WAWebGroupType","WAWebL10N","WAWebSchemaGroupMetadata","WAWebUpdateSubgroupsCommunityAction","WAWebUserPrefsMeUser","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;e===void 0&&(e={});f=a.call(this,b,e)||this;f.$ParticipantCollection2=function(a){var b;if(!a||!d("WAWebUserPrefsMeUser").isMeAccount(a.id))return;a=f.parent.id;b=a?(b=d("WAWebChatCollection").ChatCollection.get(a.toString()))==null?void 0:b.groupMetadata:null;b=b==null?void 0:(b=b.getParentGroupChat())==null?void 0:b.groupMetadata;if(b==null)return;f.iAmMember()?d("WAWebUpdateSubgroupsCommunityAction").subgroupUnjoinedToJoined(b,a):d("WAWebUpdateSubgroupsCommunityAction").subgroupJoinedToUnjoined(b,a)};f.$ParticipantCollection1=c("lodash").debounce(function(){return f.sort()},1e3);f.sendForNeededAddRequest=function(a){var b,c=f.getChat();b=(b=(b=c.groupMetadata)==null?void 0:b.desc)!=null?b:"";d("WAWebCreateGroupAction").sendForNeededAddRequest(a,c.formattedTitle||c.name,b,f.parent.id)};f.listenTo(babelHelpers.assertThisInitialized(f),"change:contact.name",f.$ParticipantCollection1);f.listenTo(c("WAWebL10N"),"locale_change",f.$ParticipantCollection1);f.listenTo(babelHelpers.assertThisInitialized(f),"add remove",f.$ParticipantCollection2);return f}var e=b.prototype;e["delete"]=function(){this.forEach(function(a){a["delete"]()}),this.stopListening(),this.reset()};e.ensureSorted=function(){this.$ParticipantCollection1.flush()};e.set=function(b,c){c=c||{};c.isParticipantCollectionAdd||(c.remove=!0);b=a.prototype.set.call(this,b,c);this.trigger("bulk_add",b);c.remove===!0&&this.trigger("bulk_remove",b);return b};e.add=function(b,c){c=c||{};c.isParticipantCollectionAdd=!0;b=a.prototype.add.call(this,b,c);this.trigger("bulk_add",b);return b};e.remove=function(b,c){c=c||{};b=a.prototype.remove.call(this,b,c);this.trigger("bulk_remove",b);return b};e.canAdd=function(){if(this.iAmAdmin())return!0;if(!d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled"))return!1;var a=this.getChat();return this.iAmMember()&&((a=a.groupMetadata)==null?void 0:a.memberAddMode)===d("WAWebSchemaGroupMetadata").MemberAddMode.ALL_MEMBER_ADD};e.canPromote=function(a){if(!a)return!1;if(d("WAWebUserPrefsMeUser").isMeAccount(a.id))return!1;if(!this.iAmAdmin())return!1;if(a.isAdmin)return!1;a=this.getChat();return((a=a.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&!d("WAWebCommunityGatingUtils").communitiesEnabled()?!1:!0};e.canDemote=function(a){var b;if(!a)return!1;if(!this.iAmAdmin())return!1;var c=this.getChat();if((!d("WAWebCommunityGatingUtils").communitiesEnabled()||((b=c.groupMetadata)==null?void 0:b.groupType)!==d("WAWebGroupType").GroupType.COMMUNITY&&((b=c.groupMetadata)==null?void 0:b.groupType)!==d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)&&d("WAWebUserPrefsMeUser").isMeAccount(a.id))return!1;b=a.isSuperAdmin;if(b){return d("WAWebCommunityGatingUtils").communitiesEnabled()&&(((b=c.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.COMMUNITY||((b=c.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)?d("WAWebUserPrefsMeUser").isMeAccount(a.id):!1}if(!a.isAdmin)return!1;return!d("WAWebCommunityGatingUtils").communitiesEnabled()&&((b=c.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?!1:!0};e.canRemove=function(a){var b;if(!a)return!1;if(d("WAWebUserPrefsMeUser").isMeAccount(a.id))return!1;if(!this.iAmAdmin())return!1;return((b=this.getChat().groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&(a.isAdmin||a.isSuperAdmin)?!1:!0};e.canVerifyIdentity=function(a){if(!a)return!1;return d("WAWebUserPrefsMeUser").isMeAccount(a.id)?!1:!0};e.userIsMember=function(a){return Boolean(this.get(a))};e.userIsAdmin=function(a){a=this.get(a);return(a==null?void 0:a.isAdmin)===!0};e.iAmMember=function(){var a=this.getMeParticipant();return a?!0:!1};e.iAmRestrictedMember=function(){var a=this.getChat();a=((a=a.groupMetadata)==null?void 0:a.restrict)===!0;return a&&!this.iAmAdmin()};e.iAmAdmin=function(){var a=this.getMeParticipant();return(a==null?void 0:a.isAdmin)===!0};e.iAmSuperAdmin=function(){var a=this.getMeParticipant();return(a==null?void 0:a.isSuperAdmin)===!0};e.getAdmins=function(){return this.where({isAdmin:!0})};e.getSuperAdmin=function(){return this.findFirst(function(a){return a.isSuperAdmin})};e.getMyContacts=function(){return this.filter(function(a){a=d("WAWebContactCollection").ContactCollection.get(a.id);return a!=null&&d("WAWebContactGetters").getIsMyContact(a)})};e.getMeParticipant=function(){var a=d("WAWebUserPrefsMeUser").getMaybeMeUser(),b;a&&(b=this.get(a));a=d("WAWebUserPrefsMeUser").getMaybeMeLidUser();!b&&a&&(b=this.get(a));return b};e.getChat=function(){var a=this.parent.id;return d("WAWebChatCollection").ChatCollection.assertGet(a)};return b}(c("WAWebCollection"));a.model=c("WAWebGroupParticipantModel");a.comparator=c("WAWebGroupParticipantComparator");g["default"]=a}),98);
__d("WAWebGroupParticipantModel",["WAWebBaseModel","WAWebContactCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.isAdmin=d("WAWebBaseModel").prop(),c.isSuperAdmin=d("WAWebBaseModel").prop(),c.leaveTs=d("WAWebBaseModel").prop(),c.leaveReason=d("WAWebBaseModel").prop(),c.contact=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd(this.id))};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="participant";a.idClass=c("WAWebWid");b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebGroupPendingParticipantCollection",["WAWebCollection","WAWebGroupParticipantComparator","WAWebGroupParticipantModel","WAWebL10N","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;d===void 0&&(d={});e=a.call(this,b,d)||this;e.$PendingParticipantCollection1=c("lodash").debounce(function(){return e.sort()},1e3);e.listenTo(babelHelpers.assertThisInitialized(e),"change:contact.name",e.$PendingParticipantCollection1);e.listenTo(c("WAWebL10N"),"locale_change",e.$PendingParticipantCollection1);return e}var d=b.prototype;d["delete"]=function(){this.forEach(function(a){a["delete"]()}),this.stopListening(),this.reset()};d.ensureSorted=function(){this.$PendingParticipantCollection1.flush()};d.set=function(b,c){c===void 0&&(c={});c.isParticipantCollectionAdd||(c.remove=!0);return a.prototype.set.call(this,b,c)};d.add=function(b,c){c===void 0&&(c={});c.isParticipantCollectionAdd=!0;return a.prototype.add.call(this,b,c)};return b}(c("WAWebCollection"));a.model=c("WAWebGroupParticipantModel");a.comparator=c("WAWebGroupParticipantComparator");g["default"]=a}),98);
__d("WAWebPastParticipantCollection",["WATimeUtils","WAWebCollection","WAWebGroupConstants","WAWebGroupParticipantModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getValidRecords=function(){return this.filter(function(a){a=d("WATimeUtils").castToUnixTime(a.leaveTs);var b=d("WATimeUtils").DAY_SECONDS*d("WAWebGroupConstants").PAST_PARTICIPANT_EXPIRATION_DAYS;return d("WATimeUtils").happenedWithin(a,b)})};return b}(c("WAWebCollection"));a.model=c("WAWebGroupParticipantModel");a.comparator=function(a,b){return b.leaveTs-a.leaveTs};g["default"]=a}),98);
__d("WAWebSubgroupSuggestionCollection",["WAWebBaseCollection","WAWebSubgroupSuggestionModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebSubgroupSuggestionModel");a.comparator=function(a,b){return a.t-b.t};g["default"]=a}),98);
__d("WAWebCellRequestState",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Pending","Loading","Approved","Rejected","Canceled","Error"]);f.State=a}),66);
__d("WAWebSubgroupSuggestionModel",["WAWebBaseModel","WAWebCellRequestState","WAWebContactCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.groupId=d("WAWebBaseModel").prop(),c.parentGroupId=d("WAWebBaseModel").prop(),c.subject=d("WAWebBaseModel").prop(),c.desc=d("WAWebBaseModel").prop(),c.owner=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.isExistingGroup=d("WAWebBaseModel").prop(),c.participantCount=d("WAWebBaseModel").prop(),c.ownerContact=d("WAWebBaseModel").session(),c.currentState=d("WAWebBaseModel").session(),c.error=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.addChild("ownerContact",d("WAWebContactCollection").ContactCollection.gadd(this.owner)),this.resetState()};c.resetState=function(){this.currentState=d("WAWebCellRequestState").State.Pending,this.error=void 0};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="subgroup_suggestion";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebUnjoinedSubgroupMetadataCollection",["WAWebBaseCollection","WAWebGroupMetadataCollection","WAWebUnjoinedSubgroupMetadataModel","WAWebUpdateSubgroupsCommunityAction"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.listenTo(babelHelpers.assertThisInitialized(b),"add",b.$UnjoinedSubgroupMetadataCollection1);b.listenTo(babelHelpers.assertThisInitialized(b),"remove",b.$UnjoinedSubgroupMetadataCollection1);b.listenTo(babelHelpers.assertThisInitialized(b),"change:parentGroupId",b.$UnjoinedSubgroupMetadataCollection2);return b}var e=b.prototype;e.$UnjoinedSubgroupMetadataCollection3=function(a){a&&d("WAWebUpdateSubgroupsCommunityAction").updateUnjoinedSubgroups(a)};e.$UnjoinedSubgroupMetadataCollection1=function(a){a=c("WAWebGroupMetadataCollection").get(a.parentGroupId.toString());this.$UnjoinedSubgroupMetadataCollection3(a)};e.$UnjoinedSubgroupMetadataCollection2=function(a,b,d){a=b!=null?c("WAWebGroupMetadataCollection").get(b.toString()):null;b=d!=null?c("WAWebGroupMetadataCollection").get(d.toString()):null;this.$UnjoinedSubgroupMetadataCollection3(a);this.$UnjoinedSubgroupMetadataCollection3(b)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebUnjoinedSubgroupMetadataModel");b=new a();g["default"]=b}),98);
__d("WAWebUnjoinedSubgroupMetadataModel",["fbt","WAWebBaseModel","WAWebGroupParticipantCollection","WAWebGroupType","WAWebWid"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.subject=d("WAWebBaseModel").prop(),e.subjectTime=d("WAWebBaseModel").prop(),e.parentGroupId=d("WAWebBaseModel").prop(),e.defaultSubgroup=d("WAWebBaseModel").prop(),e.generalSubgroup=d("WAWebBaseModel").prop(),e.desc=d("WAWebBaseModel").prop(),e.creation=d("WAWebBaseModel").prop(),e.owner=d("WAWebBaseModel").prop(),e.size=d("WAWebBaseModel").prop(),e.adminRequestRequired=d("WAWebBaseModel").prop(),e.membershipApprovalMode=d("WAWebBaseModel").prop(),e.membershipApprovalRequest=d("WAWebBaseModel").prop(),e.participants=d("WAWebBaseModel").collection(c("WAWebGroupParticipantCollection")),e.groupType=d("WAWebBaseModel").derived(function(){if(this.defaultSubgroup===!0)return d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP;return this.generalSubgroup===!0?d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP:d("WAWebGroupType").GroupType.LINKED_SUBGROUP},["defaultSubgroup","generalSubgroup"]),e.displayedDesc=d("WAWebBaseModel").derived(function(){return this.groupType===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&(this.desc==null||this.desc==="")?h._("__JHASH__BO-lF75hD0I__JHASH__").toString():this.desc},["desc","groupType"]),b)||babelHelpers.assertThisInitialized(e)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="unjoinedSubgroupMetadata";a.idClass=c("WAWebWid");b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),226);
__d("WAWebL10nFilesize",["WAWebL10N","fbs"],(function(a,b,c,d,e,f,g){var h={B:(b=c("fbs"))._("__JHASH__5K6lWA8e48D__JHASH__").toString(),KB:b._("__JHASH__wL4mUKMhvXa__JHASH__").toString(),MB:b._("__JHASH__wDQp-XGo-Pv__JHASH__").toString(),GB:b._("__JHASH__XthB0iM2uoN__JHASH__").toString(),KiB:b._("__JHASH__wL4mUKMhvXa__JHASH__").toString(),MiB:b._("__JHASH__wDQp-XGo-Pv__JHASH__").toString(),GiB:b._("__JHASH__XthB0iM2uoN__JHASH__").toString()};function a(a){return c("WAWebL10N").filesizeWithParams(a,h)}g.getL10nFilesize=a}),226);
__d("WAWebSingleSelection",["WAWebEventEmitter","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;b===void 0&&(b=[]);d===void 0&&(d="next");e=a.call(this)||this;e.list=b;e.index=-1;e.value=void 0;e.getter=c;e.deleteDir=d;return e}var d=b.prototype;d.init=function(a,b){a===void 0&&(a=[]);b===void 0&&(b=!1);b=b;var d,e;this.list=a;if(this.value==null)return;if(c("lodash").isEmpty(a)){this.unset();return}d=a.indexOf(this.value);if(d>-1){if(d===this.index)return;e=!0;b=!1}else if(!b||this.index<0)d=-1;else{var f=this.deleteDir==="prev"?-1:0;d=this.index+f;d=Math.max(d,0);d=Math.min(d,a.length-1);e=d>-1}this.set(d,b,e)};d.unset=function(){var a=this.value;this.value=void 0;this.index=-1;a!=null&&(this.$SingleSelection1(a,!1),this.trigger("unset"))};d.reset=function(a,b){a===void 0&&(a=!0);b===void 0&&(b=!0);if(this.index<0)return;this.value!=null&&this.$SingleSelection1(this.value,b===!0?"focus":"select",a)};d.set=function(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=!0);if(!this.list.length)return;a=Math.min(Math.max(a,-1),this.list.length-1);var d=this.value,e=a>-1?this.list[a]:void 0;e!=null?(this.value=e,this.$SingleSelection1(e,b===!0?"focus":"select")):c===!0&&(this.value=void 0);c===!0&&d!=null&&d!==e&&this.$SingleSelection1(d,!1);this.trigger("change",{current:this.value,previous:d});this.index=a};d.getVal=function(){return this.value};d.setVal=function(a,b){b===void 0&&(b=!0);var c=this.list.indexOf(a);c>-1?this.set(c,b):(this.unset(),this.value=a)};d.setFirst=function(a){a===void 0&&(a=!0);if(c("lodash").isEmpty(this.list))return;this.set(0,a,!0)};d.setLast=function(a){a===void 0&&(a=!0);if(c("lodash").isEmpty(this.list))return;this.set(this.list.length-1,a,!0)};d.setPrev=function(a,b){a===void 0&&(a=!0);b===void 0&&(b=!1);if(c("lodash").isEmpty(this.list))return;this.set(this.prev(b),a,!0)};d.setNext=function(a,b){a===void 0&&(a=!0);b===void 0&&(b=!1);if(c("lodash").isEmpty(this.list))return;this.set(this.next(b),a,!0)};d.prev=function(a){a===void 0&&(a=!1);if(c("lodash").isEmpty(this.list))return-1;if(a)return this.index-1<0?this.list.length-1:this.index-1;return this.index===-1?-1:this.index-1};d.next=function(a){a===void 0&&(a=!1);if(c("lodash").isEmpty(this.list))return-1;return a?this.index+1>this.list.length-1?0:this.index+1:Math.min(this.index+1,this.list.length-1)};d.$SingleSelection1=function(a){if(this.getter!=null){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.trigger.apply(this,[this.getter(a)].concat(c))}};return b}(c("WAWebEventEmitter"));g["default"]=a}),98);
__d("WAWebMediaPickerWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaPickerOriginType","WAWebWamEnumMediaQuality","WAWebWamEnumMediaType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MediaPicker:[1038,{audienceSelectorClicked:[24,a.TYPES.BOOLEAN],audienceSelectorUpdated:[25,a.TYPES.BOOLEAN],chatRecipients:[16,a.TYPES.INTEGER],hdToggleChange:[34,a.TYPES.INTEGER],hdToggleEligible:[35,a.TYPES.BOOLEAN],hdToggleState:[36,d("WAWebWamEnumMediaQuality").MEDIA_QUALITY],isViewOnce:[22,a.TYPES.BOOLEAN],mediaPickerAvatarStickers:[33,a.TYPES.INTEGER],mediaPickerChanged:[4,a.TYPES.INTEGER],mediaPickerCroppedRotated:[10,a.TYPES.INTEGER],mediaPickerDeleted:[3,a.TYPES.INTEGER],mediaPickerDrawing:[11,a.TYPES.INTEGER],mediaPickerFilter:[18,a.TYPES.INTEGER],mediaPickerHasLocationSticker:[26,a.TYPES.BOOLEAN],mediaPickerLikeDoc:[19,a.TYPES.INTEGER],mediaPickerNotLikeDoc:[20,a.TYPES.INTEGER],mediaPickerOrigin:[14,d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE],mediaPickerOriginThirdParty:[21,a.TYPES.BOOLEAN],mediaPickerSent:[2,a.TYPES.INTEGER],mediaPickerSentUnchanged:[5,a.TYPES.INTEGER],mediaPickerSessionId:[29,a.TYPES.STRING],mediaPickerStickers:[12,a.TYPES.INTEGER],mediaPickerT:[15,a.TYPES.TIMER],mediaPickerText:[13,a.TYPES.INTEGER],mediaType:[1,d("WAWebWamEnumMediaType").MEDIA_TYPE],motionPhotoImpressionCount:[31,a.TYPES.INTEGER],motionPhotoSentCount:[32,a.TYPES.INTEGER],photoGalleryDurationT:[23,a.TYPES.TIMER],photoQualitySetting:[27,d("WAWebWamEnumMediaQuality").MEDIA_QUALITY],pickerSessionId:[30,a.TYPES.INTEGER],statusRecipients:[17,a.TYPES.INTEGER],videoQualitySetting:[28,d("WAWebWamEnumMediaQuality").MEDIA_QUALITY]},[1,1,1],"regular"]},{MediaPicker:[]});g.MediaPickerWamEvent=b}),98);
__d("WAWebWamMediaPickerEvent",["WALogger","WAWebWamEnumMediaType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaPickerSentUnchange mediaPickerSent: ",", mediaPickerChanged: ",""]);h=function(){return a};return a}var i={document:(a=d("WAWebWamEnumMediaType")).MEDIA_TYPE.DOCUMENT,video:a.MEDIA_TYPE.VIDEO,gif:a.MEDIA_TYPE.GIF,image:a.MEDIA_TYPE.PHOTO,audio:a.MEDIA_TYPE.AUDIO};b=function(){function a(a,b,c){this.mediaPickerSentUnchanged=0,this.mediaPickerDeleted=0,this.mediaPickerChanged=new Set(),this.mediaPickerCroppedRotated=new Set(),this.mediaPickerDrawing=new Set(),this.mediaPickerStickers=new Set(),this.mediaPickerText=new Set(),this.mediaPickerLikeDoc=0,this.mediaPickerNotLikeDoc=0,this.mediaPickerT=0,this.t0=Date.now(),this.mediaType=i[b],this.mediaPickerOrigin=c,this.medias=new Set(),this.medias.add(a),this.changeTypes={mediaPickerCroppedRotated:this.mediaPickerCroppedRotated,mediaPickerDrawing:this.mediaPickerDrawing,mediaPickerStickers:this.mediaPickerStickers,mediaPickerText:this.mediaPickerText}}var b=a.prototype;b.onAdd=function(a){this.medias.add(a),this.mediaType==="document"?this.mediaPickerLikeDoc++:this.mediaPickerNotLikeDoc++};b.onChange=function(a,b){this.mediaPickerChanged.add(a),this.changeTypes[b].add(a)};b.onDelete=function(a){this.medias["delete"](a);this.mediaPickerDeleted++;if(this.medias.size===0)return this.onCancel()};b.onSend=function(){this.mediaPickerSent=this.medias.size;this.mediaPickerSentUnchanged=this.mediaPickerSent-this.mediaPickerChanged.size;return this.dataPreflight()};b.onCancel=function(){this.mediaPickerSent=0;this.mediaPickerSentUnchanged=0;return this.dataPreflight()};b.onPause=function(){this.mediaPickerT+=Date.now()-(this.t0||0),this.t0=null};b.onResume=function(){this.t0=this.t0!=null?this.t0:Date.now()};b.dataPreflight=function(){var a=this.mediaPickerSentUnchanged;isNaN(a)&&(a=0,d("WALogger").ERROR(h(),this.mediaPickerSent!=null&&this.mediaPickerSent!==0?this.mediaPickerSent:"undefined",this.mediaPickerChanged.size||"undefined").sendLogs("mediaPickerSentUnchange is not a number"));return{mediaPickerSent:this.mediaPickerSent,mediaPickerSentUnchanged:a,mediaPickerT:this.mediaPickerT+(Date.now()-(this.t0||0)),mediaType:this.mediaType,mediaPickerOrigin:this.mediaPickerOrigin,mediaPickerChanged:this.mediaPickerChanged.size,mediaPickerCroppedRotated:this.mediaPickerCroppedRotated.size,mediaPickerDrawing:this.mediaPickerDrawing.size,mediaPickerStickers:this.mediaPickerStickers.size,mediaPickerText:this.mediaPickerText.size,mediaPickerLikeDoc:this.mediaPickerLikeDoc,mediaPickerNotLikeDoc:this.mediaPickerNotLikeDoc,mediaPickerDeleted:this.mediaPickerDeleted}};return a}();g["default"]=b}),98);
__d("WAWebWamMediaPickerStatsLogger",["WAWebMediaPickerWamEvent","WAWebWamMediaPickerEvent"],(function(a,b,c,d,e,f,g){a={mediaPickerCroppedRotated:"mediaPickerCroppedRotated",mediaPickerDrawing:"mediaPickerCroppedRotated",mediaPickerStickers:"mediaPickerCroppedRotated",mediaPickerText:"mediaPickerCroppedRotated"};b=function(){function a(){this.mediaByTypeAndOrigin=new Map(),this.mediaEventReverseIndex=new Map(),this.chatRecipients=null}var b=a.prototype;b.$1=function(a,b){return a+"_"+b};b.$2=function(a){a=new(d("WAWebMediaPickerWamEvent").MediaPickerWamEvent)(babelHelpers["extends"]({},a,{chatRecipients:this.chatRecipients}));a.commit()};b.$3=function(a,b,d){var e=this.$1(b,d),f=this.mediaByTypeAndOrigin.get(e);if(f)f.onAdd(a),this.mediaEventReverseIndex.set(a,f);else{f=new(c("WAWebWamMediaPickerEvent"))(a,b,d);this.mediaByTypeAndOrigin.set(e,f);this.mediaEventReverseIndex.set(a,f)}};b.logChange=function(a,b){var c=this.mediaEventReverseIndex.get(a);c&&c.onChange(a,b)};b.logDelete=function(a){var b=this.mediaEventReverseIndex.get(a);b&&b.onDelete(a)};b.logSend=function(a){var b=this;this.mediaByTypeAndOrigin.forEach(function(c){b.$2(babelHelpers["extends"]({},c.onSend(),{isViewOnce:a.isViewOnce}))})};b.logCancel=function(){var a=this;this.mediaByTypeAndOrigin.forEach(function(b){a.$2(b.onCancel())})};b.logAdd=function(a,b,c){if(this.mediaEventReverseIndex.get(a))return;this.$3(a,b,c)};return a}();g.MediaPickerChangeTypes=a;g.MediaPickerStatsLogger=b}),98);
__d("WAWebAttachMediaCollection",["fbt","Promise","WAWebAttachMediaModel","WAWebBaseCollection","WAWebFileUtils","WAWebL10N","WAWebL10nFilesize","WAWebMediaFileTooLargeError","WAWebMediaGatingUtils","WAWebMiscErrors","WAWebServerPropConstants","WAWebServerPropsModel","WAWebSingleSelection","WAWebWamMediaPickerStatsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i,j=1;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;b=b.chatParticipantCount;e=a.call(this)||this;e.errorMsgs=null;e.ignored=0;e.mediaPickerStatsLogger=new(d("WAWebWamMediaPickerStatsLogger").MediaPickerStatsLogger)();e.selection=new(c("WAWebSingleSelection"))([],function(a){return a.id},"prev");e.isStickerMaker=!1;e.mediaPickerStatsLogger.chatRecipients=b;e.listenTo(e.selection,"all",e.$AttachMediaCollection1.bind(babelHelpers.assertThisInitialized(e)));return e}var f=e.prototype;f.$AttachMediaCollection1=function(a,b){(b==="focus"||b===!1)&&this.trigger("active-change")};f.removeSingleton=function(a,b){if(!a)return;b||this.mediaPickerStatsLogger.logDelete(a.id);a.url&&window.URL.revokeObjectURL(a.url);((b=a.original)==null?void 0:b.url)&&window.URL.revokeObjectURL(a.original.url)};f.remove=function(b,c){var d=this;b=a.prototype.remove.call(this,b,c);b.forEach(function(a){return d.removeSingleton(a,c)});this.selection.init(this.getPreviewableMedias(),!0);return b};f["delete"]=function(){var b=this;a.prototype["delete"].call(this);this.forEach(function(a){return b.removeSingleton(a)});this.selection.init(this.getPreviewableMedias(),!0)};f.reorder=function(a,b){this.reorderMutate(a,b);this.selection.init(this.getPreviewableMedias(),!0);return this.getPreviewableMedias()};f.replace=function(a,b){var c=this.get(a);if(!c)return;var e=c.quality,f=c.supportedTypes,g=this.indexOf(c),h=c.caption;this.remove(c,{silent:!0});c["delete"]();c=new(d("WAWebAttachMediaModel").AttachMedia)({id:a,caption:h,file:this.$AttachMediaCollection2(b),quality:e,supportedTypes:f});this.add(c,g?{at:g}:{});return c.processPromise};f.getValidMedias=function(){return this.filter(function(a){return a.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.READY||a.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING})};f.getPreviewableMedias=function(){return this.filter(function(a){return a.previewable})};f.getActive=function(){return this.selection.getVal()};f.setActive=function(a){this.selection.setVal(a)};f.unsetActive=function(){this.selection.unset()};f.setNextAsActive=function(){var a=this.selection.list.length-1;if(this.selection.index===-1||this.selection.index===a)return this.selection.getVal();this.selection.setNext();return this.selection.getVal()};f.setPrevAsActive=function(){if(this.selection.index===-1||this.selection.index===0)return this.selection.getVal();this.selection.setPrev();return this.selection.getVal()};f.processAttachments=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=this,g=this.getPreviewableMedias().length,h=d("WAWebMediaGatingUtils").getMaxNumberSelectableMedia(a.length+g,e.id);h=a.length+g>h?Math.max(h-g,0):a.length;g=a.length-h;h===0?g&&this.trigger("max_upload_limit",g):this.ignore(g);var k=a.slice(0,h).map(function(a){return new(d("WAWebAttachMediaModel").AttachMedia)({id:j++,file:f.$AttachMediaCollection2(a),fileOrigin:c,supportedTypes:d("WAWebMediaGatingUtils").getSupportedMediaTypesForChat(e)})});this.add(k);var l=this.getActive();this.unsetActive();(i||(i=b("Promise"))).all(a).then(function(){f.$AttachMediaCollection3(k,l)});yield i.all(k.map(function(a){return a.processPromise}));k.forEach(function(a){return f.$AttachMediaCollection4(a,c)});return this.$AttachMediaCollection3(k,l)});function c(b,c,d){return a.apply(this,arguments)}return c}();f.$AttachMediaCollection3=function(a,b){if(this.getActive())return;if(this.getModelsArray().some(function(a){return a.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING&&!a.previewable}))return;a=a.find(function(a){return a.previewable});a||(a=b);this.selection.init(this.getPreviewableMedias());a&&this.setActive(a)};f.$AttachMediaCollection4=function(a,b){if(b==null)return;var c=a.isGif?"gif":a.type;this.mediaPickerStatsLogger.logAdd(a.id,c,b)};f.$AttachMediaCollection2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (i||(i=b("Promise"))).resolve(a));a.filename||(a.filename=a.file.name);a.mimetype||(a.mimetype=a.file.type);a.type||(a.type=d("WAWebFileUtils").typeFromMimetype(a.file.type));!a.type&&a.mimetype&&(a.type=d("WAWebFileUtils").typeFromMimetype(a.mimetype));return a});function c(b){return a.apply(this,arguments)}return c}();f.ignore=function(a){a>0&&(this.ignored+=a)};f.uiProcessMsgs=function(a){var b=[],e,f=0,g=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=!1,s=d("WAWebL10nFilesize").getL10nFilesize(d("WAWebServerPropsModel").getMaxFilesSizeServerProp()),t=d("WAWebL10nFilesize").getL10nFilesize(d("WAWebServerPropConstants").VCARD_MAX_SIZE_KB*1024);this.forEach(function(a){if(a.uiProcessed)return;!e&&a.previewable&&(e=a);if(a.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING)return;a.uiProcessed=!0;if(a.state!==d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.ERROR)return;if(a.exception instanceof c("WAWebMediaFileTooLargeError"))switch(a.getFileType()){case d("WAWebFileUtils").FILETYPE.IMAGE:f+=1;break;case d("WAWebFileUtils").FILETYPE.VIDEO:g+=1;break;case d("WAWebFileUtils").FILETYPE.AUDIO:i+=1;break;case d("WAWebFileUtils").FILETYPE.DOCUMENT:a.isVcardOverMmsDocument?k+=a.documentPageCount:j+=1;break}else if(a.exception instanceof d("WAWebMiscErrors").MediaFileEmpty)switch(a.getFileType()){case d("WAWebFileUtils").FILETYPE.IMAGE:l+=1;break;case d("WAWebFileUtils").FILETYPE.VIDEO:m+=1;break;case d("WAWebFileUtils").FILETYPE.AUDIO:n+=1;break;case d("WAWebFileUtils").FILETYPE.DOCUMENT:a.isVcardOverMmsDocument?p+=a.documentPageCount:o+=1;break}else a.exception instanceof d("WAWebMiscErrors").MediaFileFailedLoad?r=!0:q+=1});f>0&&b.push(h._("__JHASH__WeJ__xEomGz__JHASH__",[h._plural(f,"number"),h._param("maxSize",d("WAWebL10nFilesize").getL10nFilesize(d("WAWebMediaGatingUtils").getUploadLimit("image")))]));g>0&&b.push(h._("__JHASH__eV3Hj2jZMCx__JHASH__",[h._plural(g,"number"),h._param("maxSize",d("WAWebL10nFilesize").getL10nFilesize(d("WAWebMediaGatingUtils").getUploadLimit("video")))]));i>0&&b.push(h._("__JHASH__AlvFOev6s1K__JHASH__",[h._plural(i),h._param("number",c("WAWebL10N").n(i)),h._param("maxSize",d("WAWebL10nFilesize").getL10nFilesize(d("WAWebMediaGatingUtils").getUploadLimit("audio")))]));j>0&&b.push(h._("__JHASH__EU0TREFarCG__JHASH__",[h._plural(j),h._param("number",c("WAWebL10N").n(j)),h._param("maxSize",s)]));k>0&&b.push(h._("__JHASH__66zOHxNM-MW__JHASH__",[h._plural(k),h._param("maxSize",t)]));l>0&&b.push(h._("__JHASH__2luNIlnvCPG__JHASH__",[h._plural(l,"number")]));m>0&&b.push(h._("__JHASH__Trmnv-O-tKJ__JHASH__",[h._plural(m,"number")]));n>0&&b.push(h._("__JHASH__FLZET33d3bb__JHASH__",[h._plural(n),h._param("number",c("WAWebL10N").n(n))]));o>0&&b.push(h._("__JHASH__7aUFaxo1lKd__JHASH__",[h._plural(o),h._param("number",c("WAWebL10N").n(o))]));p>0&&b.push(h._("__JHASH__PaE7GXUV9Cj__JHASH__",[h._plural(p),h._param("number",c("WAWebL10N").n(p))]));q>0&&b.push(h._("__JHASH__a9G5a63TPxT__JHASH__",[h._plural(q,"number")]));r&&(b=[],b.push(h._("__JHASH__3NqmbS0GWwG__JHASH__")));if(b.length>1){b=[];t=f+g+i+j;var u=l+m+n+o,v=t+u+q;q===0?(t!==0&&b.push(h._("__JHASH__dHrnSkbsTgE__JHASH__",[h._plural(t,"number"),h._param("maxSize",s)])),u!==0&&b.push(h._("__JHASH__2KXagQRfu51__JHASH__",[h._plural(u,"number")]))):b.push(h._("__JHASH__iTH9b1XTSU9__JHASH__",[h._plural(v,"number")]))}t=b.join(" ");this.errorMsgs=t;s=this.getPreviewableMedias().length;this.ignore(s-d("WAWebMediaGatingUtils").getMaxNumberSelectableMedia(s,a.id));u=this.ignored;this.ignored=0;u&&this.trigger("max_upload_limit",u);q>0&&this.trigger("files_not_supported");return{errorMsgs:t}};f.canSend=function(){return!this.getModelsArray().some(function(a){return a.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING&&!a.previewable})};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebAttachMediaModel").AttachMedia;g["default"]=a}),226);
__d("WAWebMediaEditorEnumsFonts",["fbt","$InternalEnum"],(function(a,b,c,d,e,f,g,h){var i=b("$InternalEnum").Mirrored(["SANS_SERIF","SERIF","NORICAN_REGULAR","BRYNDAN_WRITE","OSWALD_HEAVY"]);e=b("$InternalEnum").Mirrored(["LEFT","CENTER","RIGHT"]);function a(){return Array.from(i.members())}function c(a){switch(a){case i.SANS_SERIF:return{fontFamily:"sans-serif"};case i.SERIF:return{fontFamily:'"Droid Serif", serif'};case i.NORICAN_REGULAR:return{fontFamily:'"Norican"'};case i.BRYNDAN_WRITE:return{fontFamily:'"Bryndan-Write"'};case i.OSWALD_HEAVY:return{fontFamily:'"Oswald"',fontWeight:"bold"}}}function d(a){switch(a){case i.SANS_SERIF:return h._("__JHASH__no6AKuAayhD__JHASH__");case i.SERIF:return h._("__JHASH__9HqSTQn8HLk__JHASH__");case i.NORICAN_REGULAR:return h._("__JHASH__lQZaiUto_lV__JHASH__");case i.BRYNDAN_WRITE:return h._("__JHASH__iF1T5iWo6yd__JHASH__");case i.OSWALD_HEAVY:return h._("__JHASH__q4C3MbnaWa0__JHASH__")}}g.FontType=i;g.TextAlignment=e;g.getAllFonts=a;g.getFontStyle=c;g.getFontTranslation=d}),226);
__d("WAWebMediaEditorGeometryPoint",["lodash"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=Object.freeze(babelHelpers["extends"]({},a)),Object.freeze(this)}var b=a.prototype;b.update=function(b){var d=babelHelpers["extends"]({},this.$1);b.x!=null&&(d.x=b.x);b.y!=null&&(d.y=b.y);return c("lodash").isEqual(this.$1,d)?this:new a(d)};b.clone=function(){return new a(this.$1)};b.toString=function(){return"("+this.x+"x, "+this.y+"y)"};b.equals=function(a){return Math.abs(this.x-a.x)<Number.EPSILON&&Math.abs(this.y-a.y)<Number.EPSILON};b.distance=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))};b.rotate=function(b,c){c=c*Math.PI/180;var d=this.x-b.x,e=this.y-b.y,f=Math.cos(c)*d-Math.sin(c)*e+b.x;d=Math.sin(c)*d+Math.cos(c)*e+b.y;return new a({x:Math.round(f*100)/100,y:Math.round(d*100)/100})};babelHelpers.createClass(a,[{key:"x",get:function(){return this.$1.x}},{key:"y",get:function(){return this.$1.y}}]);return a}();g["default"]=a}),98);
__d("WAWebMediaEditorGeometrySize",["lodash"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=a.width;a=a.height;if(b<0)throw new RangeError("MediaEditor:Size width cannot be negative");if(a<0)throw new RangeError("MediaEditor:Size height cannot be negative");this.$1=Object.freeze({width:b,height:a});Object.freeze(this)}var b=a.prototype;b.update=function(b){var d=babelHelpers["extends"]({},this.$1);b.width!=null&&(d.width=b.width);b.height!=null&&(d.height=b.height);return c("lodash").isEqual(this.$1,d)?this:new a(d)};b.clone=function(){return new a(this.$1)};b.toString=function(){return"("+this.width+"w, "+this.height+"h)"};b.equals=function(a){return Math.abs(this.width-a.width)<Number.EPSILON&&Math.abs(this.height-a.height)<Number.EPSILON};b.isEmpty=function(){return this.equals(a.empty())};a.empty=function(){return new a({width:0,height:0})};babelHelpers.createClass(a,[{key:"width",get:function(){return this.$1.width}},{key:"height",get:function(){return this.$1.height}},{key:"dimension",get:function(){return Math.max(this.width,this.height)}}]);return a}();g["default"]=a}),98);
__d("WAWebMediaEditorGeometryRect",["WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometrySize","lodash"],(function(a,b,c,d,e,f,g){var h=1e-6;a=function(){a.create=function(b){return new a({origin:new(c("WAWebMediaEditorGeometryPoint"))({x:b.x,y:b.y}),size:new(c("WAWebMediaEditorGeometrySize"))({width:b.width,height:b.height}),rotation:b.rotation,scale:b.scale})};function a(a){this.$1=Object.freeze(babelHelpers["extends"]({},a)),Object.freeze(this)}var b=a.prototype;b.updateXYWidthHeight=function(a){var b=babelHelpers["extends"]({},this.$1);(a.x!=null||a.y!=null)&&(b.origin=b.origin.update({x:a.x,y:a.y}));(a.width!=null||a.height!=null)&&(b.size=b.size.update({width:a.width,height:a.height}));a.rotation!=null&&(b.rotation=a.rotation);a.scale!=null&&(b.scale=a.scale);return this.update(b)};b.update=function(b){var d=babelHelpers["extends"]({},this.$1),e=b.origin,f=b.size,g=b.rotation;b=b.scale;e!=null&&(d.origin=e);f!=null&&(d.size=f);g!=null&&(d.rotation=g);b!=null&&Math.abs(d.scale-b)>h&&(d.scale=b);return c("lodash").isEqual(this.$1,d)?this:new a(d)};b.clone=function(){return new a(this.$1)};b.addPadding=function(a,b){var d=this.getTopLeft(),e=b.getTopLeft();e=new(c("WAWebMediaEditorGeometryPoint"))({x:Math.max(e.x,d.x-a),y:Math.max(e.y,d.y-a)});d=this.getBottomRight();b=b.getBottomRight();b=new(c("WAWebMediaEditorGeometryPoint"))({x:Math.min(b.x,d.x+a),y:Math.min(b.y,d.y+a)});d=b.x-e.x;a=b.y-e.y;return this.updateXYWidthHeight({x:e.x,y:e.y,width:d,height:a})};b.toString=function(){return"("+this.origin.toString()+", "+this.size.toString()+", "+this.rotation+"r)"};b.equals=function(a){return this.origin.equals(a.origin)&&this.size.equals(a.size)&&this.rotation===a.rotation&&this.scale===a.scale};b.contains=function(a){return a.x>=this.x&&a.y>=this.y&&a.x<this.x+this.width&&a.y<this.y+this.height};b.getTopLeft=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x,y:this.y})};b.getTopCenter=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x+this.width/2,y:this.y})};b.getTopRight=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x+this.width,y:this.y})};b.getLeftCenter=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x,y:this.y+this.height/2})};b.getCenter=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x+this.width/2,y:this.y+this.height/2})};b.getRightCenter=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x+this.width,y:this.y+this.height/2})};b.getBottomLeft=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x,y:this.y+this.height})};b.getBottomCenter=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x+this.width/2,y:this.y+this.height})};b.getBottomRight=function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.x+this.width,y:this.y+this.height})};babelHelpers.createClass(a,[{key:"origin",get:function(){return this.$1.origin}},{key:"size",get:function(){return this.$1.size}},{key:"x",get:function(){return this.origin.x}},{key:"y",get:function(){return this.origin.y}},{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}},{key:"rotation",get:function(){return this.$1.rotation}},{key:"scale",get:function(){return this.$1.scale}},{key:"dimension",get:function(){return this.size.dimension}}]);return a}();g["default"]=a}),98);
__d("WAWebMediaEditorUtilsGenerateLayerId",[],(function(a,b,c,d,e,f){function a(a){var b=Math.random().toString(36).substring(2,10);return a+"-"+b}f.generateLayerId=a}),66);
__d("WAWebMediaEditorLayersBlur",["$InternalEnum","WAWebMediaEditorGeometryRect","WAWebMediaEditorUtilsGenerateLayerId","err","lodash"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum").Mirrored(["Pixelate","Smooth"]);e=function(){a.create=function(b){var e=b.image.width,f=b.image.height;if(!e||!f)throw c("err")("Image must have valid width and height");return new a({id:d("WAWebMediaEditorUtilsGenerateLayerId").generateLayerId("blur"),image:b.image,editable:!0,frame:new(c("WAWebMediaEditorGeometryRect"))({origin:b.origin,size:b.size,rotation:0,scale:1}),radius:b.radius,mode:b.mode,backgroundFrame:b.backgroundFrame,confirmed:!1})};function a(a){this.$1=Object.freeze(babelHelpers["extends"]({},a)),Object.freeze(this)}var b=a.prototype;b["delete"]=function(){};b.setOrigin=function(a){return this.$2({frame:this.frame.update({origin:a})})};b.setRotation=function(a){return this.$2({frame:this.frame.update({rotation:a})})};b.setScale=function(a){return this.$2({frame:this.frame.update({scale:a})})};b.setFrame=function(a){return this.$2({frame:a})};b.setImage=function(a){return this.$2({image:a})};b.setEditable=function(a){return this.$2({editable:a})};b.setBlurMode=function(a){return this.$2({mode:a})};b.setBlurRadius=function(a){return this.$2({radius:a})};b.setBlurBackgroundFrame=function(a){return this.$2({backgroundFrame:a})};b.setConfirmed=function(){return this.$2({confirmed:!0})};b.$2=function(b){var d=babelHelpers["extends"]({},this.$1);b.image!=null&&(d.image=b.image);b.editable!=null&&(d.editable=b.editable);b.frame!=null&&(d.frame=b.frame);b.radius!=null&&(d.radius=b.radius);b.mode!=null&&(d.mode=b.mode);b.backgroundFrame!=null&&(d.backgroundFrame=b.backgroundFrame);b.confirmed!=null&&(d.confirmed=b.confirmed);return c("lodash").isEqual(this.$1,d)?this:new a(d).setConfirmed()};babelHelpers.createClass(a,[{key:"image",get:function(){return this.$1.image}},{key:"editable",get:function(){return this.$1.editable}},{key:"id",get:function(){return this.$1.id}},{key:"frame",get:function(){return this.$1.frame}},{key:"origin",get:function(){return this.$1.frame.origin}},{key:"size",get:function(){return this.$1.frame.size}},{key:"x",get:function(){return this.$1.frame.x}},{key:"y",get:function(){return this.$1.frame.y}},{key:"width",get:function(){return this.$1.frame.width}},{key:"height",get:function(){return this.$1.frame.height}},{key:"rotation",get:function(){return this.$1.frame.rotation}},{key:"scale",get:function(){return this.$1.frame.scale}},{key:"mode",get:function(){return this.$1.mode}},{key:"radius",get:function(){return this.$1.radius}},{key:"backgroundFrame",get:function(){return this.$1.backgroundFrame}},{key:"confirmed",get:function(){return this.$1.confirmed}}]);return a}();g.BlurMode=a;g.BlurLayer=e}),98);
__d("WAWebMediaEditorGeometryPath",[],(function(a,b,c,d,e,f){a=function(){function a(a){var b=a.points,c=a.color,d=a.thickness;a=a.smoothing;this.$1=[].concat(b);this.$2=c;this.$3=d;this.$4=a;Object.freeze(this)}var b=a.prototype;b.update=function(b){var c=this.points,d=this.color,e=this.thickness,f=this.smoothing;b.points!=null&&(c=b.points);b.color!=null&&(d=b.color);b.thickness!=null&&(e=b.thickness);b.smoothing!=null&&(f=b.smoothing);return new a({points:c,color:d,thickness:e,smoothing:f})};b.clone=function(){var b={points:[].concat(this.points),color:this.color.clone(),thickness:this.thickness,smoothing:this.smoothing};return new a(b)};b.toString=function(){var a=this.points.map(function(a){return a.toString()}).join(", ");return"points: ["+a+"]\ncolor: "+this.color.toString()+"\nthickness: "+this.thickness};b.equals=function(a){return this.color.equals(a.color)&&Math.abs(this.thickness-a.thickness)<Number.EPSILON&&this.points.length===a.points.length&&this.points.every(function(b,c){return b.equals(a.points[c])})};b.isDrag=function(){return this.points.length>1};b.isSmooth=function(){return this.smoothing||this.isDrag()};babelHelpers.createClass(a,[{key:"points",get:function(){return this.$1}},{key:"color",get:function(){return this.$2}},{key:"thickness",get:function(){return this.$3}},{key:"smoothing",get:function(){return this.$4}}]);return a}();f["default"]=a}),66);
__d("WAWebMediaEditorLayersDraw",["$InternalEnum","WAWebMediaEditorGeometryPath","WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometryRect","WAWebMediaEditorUtilsGenerateLayerId"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum").Mirrored(["Paint","Outline"]);e=function(){function a(a){this.$4=a.type;if(a.size!=null){var b=a.size;this.$2=new(c("WAWebMediaEditorGeometryRect"))({origin:new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}),size:b,rotation:0,scale:1});this.$3=[]}else a.frame!=null&&a.paths!=null&&(this.$2=a.frame,this.$3=a.paths);a.id?this.$1=a.id:this.$1=d("WAWebMediaEditorUtilsGenerateLayerId").generateLayerId(a.type);Object.freeze(this)}var b=a.prototype;b["delete"]=function(){};b.$5=function(b){var c=this.$3;b.paths!=null&&(c=b.paths);b=this.$2;var d=this.$4;return new a({id:this.id,paths:c,frame:b,type:d})};b.setOrigin=function(a){throw new TypeError("MediaEditor:DrawLayer resetting origin is not allowed")};b.setRotation=function(a){throw new TypeError("MediaEditor:DrawLayer resetting rotation is not allowed")};b.setScale=function(a){throw new TypeError("MediaEditor:DrawLayer resetting scale is not allowed")};b.addPath=function(a){a=new(c("WAWebMediaEditorGeometryPath"))(a);a=[].concat(this.$3,[a]);return this.$5({paths:a})};b.clearPaths=function(){var a=[];return this.$5({paths:a})};b.isEmpty=function(){return this.$3.length===0};b.getAllPoints=function(){return this.paths.reduce(function(a,b){!b.smoothing&&a.length&&a.push(a[a.length-1]);b.isDrag()&&a.push(b.points[0]);a.push.apply(a,b.points.flatMap(function(a){return b.isSmooth()?[a]:[a,a]}));return a},[])};babelHelpers.createClass(a,[{key:"paths",get:function(){return this.$3}},{key:"editable",get:function(){return!1}},{key:"id",get:function(){return this.$1}},{key:"type",get:function(){return this.$4}},{key:"frame",get:function(){return this.$2}},{key:"origin",get:function(){return this.$2.origin}},{key:"size",get:function(){return this.$2.size}},{key:"x",get:function(){return this.$2.x}},{key:"y",get:function(){return this.$2.y}},{key:"width",get:function(){return this.$2.width}},{key:"height",get:function(){return this.$2.height}},{key:"rotation",get:function(){return this.$2.rotation}},{key:"scale",get:function(){return this.$2.scale}}]);return a}();g.DrawLayerType=a;g.DrawLayer=e}),98);
__d("WAWebMediaEditorLayersImage",["$InternalEnum","WAWebMediaEditorGeometryRect","WAWebMediaEditorGeometrySize","WAWebMediaEditorUtilsGenerateLayerId","err","lodash"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["Image","Emoji","Sticker","Background"]);a=function(){a.create=function(b){var e=b.image.width,f=b.image.height;if(!e||!f)throw c("err")("Image must have valid width and height");return new a({id:d("WAWebMediaEditorUtilsGenerateLayerId").generateLayerId("image"),type:b.type,image:b.image,editable:b.editable,frame:new(c("WAWebMediaEditorGeometryRect"))({origin:b.origin,size:new(c("WAWebMediaEditorGeometrySize"))({width:e,height:f}),rotation:(e=b.rotation)!=null?e:0,scale:b.scale})})};function a(a){this.$1=Object.freeze(babelHelpers["extends"]({},a)),Object.freeze(this)}var b=a.prototype;b["delete"]=function(){};b.setOrigin=function(a){return this.$2({frame:this.frame.update({origin:a})})};b.setRotation=function(a){return this.$2({frame:this.frame.update({rotation:a})})};b.setScale=function(a){return this.$2({frame:this.frame.update({scale:a})})};b.setFrame=function(a){return this.$2({frame:a})};b.setImage=function(a){return this.$2({image:a})};b.setEditable=function(a){return this.$2({editable:a})};b.$2=function(b){var d=babelHelpers["extends"]({},this.$1);if(b.image!=null){var e=b.image.width,f=b.image.height;if(!e||!f)throw c("err")("Image must have valid width and height");d.image=b.image;d.frame=new(c("WAWebMediaEditorGeometryRect"))({origin:this.frame.origin,size:new(c("WAWebMediaEditorGeometrySize"))({width:e,height:f}),rotation:this.frame.rotation,scale:this.frame.scale})}b.editable!=null&&(d.editable=b.editable);b.frame!=null&&(d.frame=b.frame);return c("lodash").isEqual(this.$1,d)?this:new a(d)};b.isSticker=function(){return this.$1.type===h.Sticker};b.isEmoji=function(){return this.$1.type===h.Emoji};b.isBackground=function(){return this.$1.type===h.Background};babelHelpers.createClass(a,[{key:"image",get:function(){return this.$1.image}},{key:"editable",get:function(){return this.$1.editable}},{key:"id",get:function(){return this.$1.id}},{key:"frame",get:function(){return this.$1.frame}},{key:"origin",get:function(){return this.$1.frame.origin}},{key:"size",get:function(){return this.$1.frame.size}},{key:"x",get:function(){return this.$1.frame.x}},{key:"y",get:function(){return this.$1.frame.y}},{key:"width",get:function(){return this.$1.frame.width}},{key:"height",get:function(){return this.$1.frame.height}},{key:"rotation",get:function(){return this.$1.frame.rotation}},{key:"scale",get:function(){return this.$1.frame.scale}}]);return a}();g.ImageLayerType=h;g.ImageLayer=a}),98);
__d("WAWebMediaEditorUtilsColor",[],(function(a,b,c,d,e,f){var g=/^[0-9A-F]{3}$/i,h=/^[0-9A-F]{6}$/i;c=function(){function a(a,b,c,d){d===void 0&&(d=1);if(a<0||a>255)throw new RangeError("red ("+a+" given) should be >= 0 and <= 255");if(b<0||b>255)throw new RangeError("green ("+b+" given) should be >= 0 and <= 255");if(c<0||c>255)throw new RangeError("blue ("+c+" given) should be >= 0 and <= 255");if(d<0||d>1)throw new RangeError("alpha ("+d+" given) should be >= 0 and <= 1");this._red=a;this._green=b;this._blue=c;this._alpha=d}a.fromHex=function(b){var c=b.trim().toLowerCase();c.length&&c[0]==="#"&&(c=c.substr(1));if(c.length!==3&&c.length!==6)throw new RangeError("hex "+b+" does not have 3 or 6 digits");c.length===3&&(c=""+c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);var d=parseInt(c.substr(0,2),16),e=parseInt(c.substr(2,2),16);c=parseInt(c.substr(4,2),16);if(isNaN(d)||isNaN(e)||isNaN(c))throw new RangeError("hex "+b+" is invalid");b=1;return new a(d,e,c,b)};a._fromHsl=function(b,c,d){var e,f,g;if(c===0||d===0)e=f=g=d;else{c=d<.5?d*(1+c):d+c-d*c;d=2*d-c;e=i(d,c,b+1/3);f=i(d,c,b);g=i(d,c,b-1/3)}return new a(Math.round(e*255),Math.round(f*255),Math.round(g*255))};var b=a.prototype;b.toRgb=function(){return{red:this._red,green:this._green,blue:this._blue}};b.toRgba=function(){return{red:this._red,green:this._green,blue:this._blue,alpha:this._alpha}};b.toRgbString=function(){return"rgb("+this._red+", "+this._green+", "+this._blue+")"};b.toRgbaString=function(){return"rgba("+this._red+", "+this._green+", "+this._blue+", "+this._alpha+")"};b.toHex=function(){var a=j(this._red.toString(16),2),b=j(this._green.toString(16),2),c=j(this._blue.toString(16),2);return("#"+a+b+c).toUpperCase()};b.toHsl=function(){var a=this._red/255,b=this._green/255,c=this._blue/255,d=Math.max(a,b,c),e=Math.min(a,b,c),f=(d+e)/2,g;(d+e)/2;var h=(d+e)/2;if(d===e)f=g=0;else{var i=d-e;g=h>.5?i/(2-d-e):i/(d+e);switch(d){case a:f=(b-c)/i+(b<c?6:0);break;case b:f=(c-a)/i+2;break;case c:f=(a-b)/i+4;break}f/=6}return{hue:f,saturation:g,lightness:h}};b.getBackgroundAndTintColors=function(){var b=this.toHsl(),c=b.hue,d=b.saturation;b=b.lightness;var e;if(b<.55&&d>.1){var f=c;c>.08&&c<.22&&(f=c<.08+(.22-.08)?.08:.22);f=a._fromHsl(f,d<.01?0:Math.max(d,.75),Math.min(b,.25));e=new a(255,255,255,1)}else f=a._fromHsl(c,Math.min(d,.33),Math.max(b,.9)),e=a._fromHsl(c,d===0?0:.4,.2);return{backgroundColor:f,tintColor:e}};b.withAlpha=function(b){return new a(this._red,this._green,this._blue,b)};b.isLight=function(){return this._red*.299+this._green*.587+this._blue*.114>190};b.isWhite=function(){var a=this.toHsl();a=a.lightness;return a>=.996};b.equals=function(a){return this._red===a._red&&this._green===a._green&&this._blue===a._blue&&this._alpha===a._alpha};b.clone=function(){return new a(this._red,this._green,this._blue,this._alpha)};b.toString=function(){return"("+this._red+", "+this._green+", "+this._blue+", "+this._alpha+")"};babelHelpers.createClass(a,[{key:"red",get:function(){return this._red}},{key:"green",get:function(){return this._green}},{key:"blue",get:function(){return this._blue}},{key:"alpha",get:function(){return this._alpha}}]);return a}();c.Black=new c(0,0,0);c.White=new c(255,255,255);function i(a,b,c){c=c;c<0&&(c+=1);c>1&&(c-=1);if(c<1/6)return a+(b-a)*6*c;if(c<1/2)return b;return c<2/3?a+(b-a)*(2/3-c)*6:a}function j(a,b){return a.length>=b?a:"0".repeat(b-a.length)+a}function k(a){a=a.trim();a.substring(0,1)==="#"&&(a=a.substring(1).toLowerCase());return a}function a(a){if(!a)return!1;a=k(a);if(a.length===3)return g.test(a);else if(a.length===6)return h.test(a);return!1}function b(a,b){if(!a||!b)return!1;var c=k(a);b=k(b);if(c===b)return!0;var d=0,e=0;while(d<a.length){if(c[d]!==b[e]||c[d]!==b[e+1])return!1;d+=1;e+=2}return!0}f.Color=c;f.cleanHex=k;f.isValidHex=a;f.compareHex=b}),66);
__d("WAWebMediaEditorEnumsColors",["$InternalEnum","WAWebMediaEditorUtilsColor"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["BLACK","GRAY","WHITE","BLUE","GREEN","PURPLE","ORANGE","RED"]);function a(){return Array.from(h.members())}function c(a){switch(a){case h.BLACK:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#434343");case h.GRAY:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#9DA0A9");case h.WHITE:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#FFFFFF");case h.BLUE:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#33CEFF");case h.GREEN:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#64DC2F");case h.PURPLE:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#BD73FF");case h.ORANGE:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#F49226");case h.RED:return d("WAWebMediaEditorUtilsColor").Color.fromHex("#FF4A4A")}}g.ColorType=h;g.getAllColors=a;g.getColorValue=c}),98);
__d("WAWebMediaEditorUtilsTextBackground",["WAWebMediaEditorEnumsFonts"],(function(a,b,c,d,e,f,g){function a(a,b,c){var e=c.arcSize,f=[],g=[],i=Math.max.apply(Math,a),j=c.lineHeight+c.lineVerticalPadding*2;a.forEach(function(e,h){var k=e+c.lineHorizontalPadding*2,l=0;switch(b){case d("WAWebMediaEditorEnumsFonts").TextAlignment.LEFT:l=0;break;case d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER:l=(i-e)/2;break;case d("WAWebMediaEditorEnumsFonts").TextAlignment.RIGHT:l=i-e;break}e=h*j;f.push({y:e,x:l});g.push({y:e,x:l+k});h===a.length-1&&(f.push({y:e+j,x:l}),g.push({y:e+j,x:l+k}))});var k=[],l=[{left:!0,points:f},{left:!1,points:g}];for(var m=0;m<l.length;m++){var n=l[m],o=n.left;n=n.points;var p=n,q=!0;while(q){n=p;p=[];q=!1;for(var r=0;r<n.length;r++){var s=n[r];if(r===0)p.push(s);else{p.length>=2&&(p[p.length-1].x===p[p.length-2].x&&(p.pop(),q=!0));var t=p[p.length-1];s.x!==t.x&&Math.abs(s.x-t.x)<e*2&&(q=!0,o&&t.x<s.x||!o&&t.x>s.x?s.x=t.x:t.x=s.x);p.push(s)}}}t=[];for(s=0;s<p.length;s++){r=p[s];if(s===0||s===p.length-1){t.push(r);continue}q=p[s-1];if(r.x!==q.x){n={x:q.x,y:r.y};q=t.length-1;t.length>=2&&t[q].x===n.x&&t[q].x===t[q-1].x&&t.pop();t.push(n)}t.push(r)}o||t.reverse();k=k.concat(t)}return h(k,e)}function h(a,b){function c(b){return b===0?a[a.length-1]:a[b-1]}function d(b){return b===a.length-1?a[0]:a[b+1]}var e=[];for(var f=0;f<a.length;f++){var g=i(a[f],c(f),d(f),b),h=g.start,j=g.end;g=g.clockwise;var k=f===a.length-1?0:f+1;k=i(a[k],c(k),d(k),b);k=k.start;f===0&&e.push("M "+h.x+","+h.y);e.push("A "+b+","+b+" 0 0 "+(g?1:0)+" "+j.x+","+j.y);e.push("L "+k.x+","+k.y)}e.push("Z");return e.join("\n")}function i(a,b,c,d){var e=b.y===a.y,f={y:e?a.y:b.y>a.y?a.y+d:a.y-d,x:e?b.x>a.x?a.x+d:a.x-d:a.x},g=a.y===c.y;g={y:g?a.y:c.y>a.y?a.y+d:a.y-d,x:g?c.x>a.x?a.x+d:a.x-d:a.x};d=e&&(b.y<c.y&&b.x<c.x||b.x>c.x&&b.y>c.y)||!e&&(b.y<c.y&&b.x>c.x||b.x<c.x&&b.y>c.y);return{start:f,end:g,clockwise:d}}g.generateTextBackgroundPath=a}),98);
__d("WAWebMediaEditorUtilsTextInCanvas",["WAWebEmoji","WAWebMediaEditorEnumsFonts"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c,e){var f=[];for(var a=a.split("\n"),g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(h>=a.length)break;j=a[h++]}else{h=a.next();if(h.done)break;j=h.value}j=j;if(j===""){f.push({text:"",width:0,words:[]});continue}j=j.split(" ");var k="",l=0,m=[];for(var n=0;n<j.length;n++){var o=(n!==0?" ":"")+j[n],p=k+o,q=i(p,b,c);if(e>0&&q>e&&l>0)f.push({text:k,width:l,words:m}),k="",l=0,m=[],n--;else{k=p;l=q;for(p=o.split(d("WAWebEmoji").EmojiUtil.emojiRegex()),q=Array.isArray(p),o=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(q){if(o>=p.length)break;r=p[o++]}else{o=p.next();if(o.done)break;r=o.value}r=r;if(!r)continue;var s=null;d("WAWebEmoji").EmojiUtil.isEmoji(r)&&(s=d("WAWebEmoji").EmojiUtil.getGlyphPath(r,64));var t=i(r,b,c);m.push({text:r,width:t,emojiPath:s})}}}l>0&&f.push({text:k,width:l,words:m})}return f}function i(a,b,c){var e=j();e=e.getContext("2d");e.font=c+"px "+d("WAWebMediaEditorEnumsFonts").getFontStyle(b).fontFamily;b=0;for(var a=a.split(d("WAWebEmoji").EmojiUtil.emojiRegex()),f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;d("WAWebEmoji").EmojiUtil.isEmoji(h)?b+=c:b+=e.measureText(h).width}return b}function j(){h==null&&(h=document.createElement("canvas"),h.width=9999,h.height=99);return h}var k=new Map();function b(a,b){var c=b+"px "+d("WAWebMediaEditorEnumsFonts").getFontStyle(a).fontFamily,e=k.get(c);if(e!=null)return e;e="ABCDEF";a=Math.round(i(e,a,b));b=b;var f=j();f=f.getContext("2d");f.textBaseline="middle";f.font=c;f.fillStyle="red";f.fillText(e,0,b/2);c=f.getImageData(0,0,a,b).data;e=Infinity;var g=Infinity,h=Infinity;for(var l=0;l<a;l++)for(var m=0;m<b;m++){var n=(m*a+l)*4;c[n+3]>0&&(g=Math.min(g,m),e=Math.min(e,l),h=Math.min(h,b-m))}f.clearRect(0,0,a,b);n={top:g,left:e,bottom:h};k.set(f.font,n);return n}g.getLines=a;g.getTextBounds=b}),98);
__d("WAWebMediaEditorLayersText",["WAWebMediaEditorEnumsColors","WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometryRect","WAWebMediaEditorGeometrySize","WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsGenerateLayerId","WAWebMediaEditorUtilsTextBackground","WAWebMediaEditorUtilsTextInCanvas","lodash"],(function(a,b,c,d,e,f,g){var h=18,i={lineVerticalPadding:6,lineHorizontalPadding:8,layerPadding:6,backgroundBorderRadius:5,backgroundShadow:{offsetX:0,offsetY:1,radius:6,spread:0,color:new(d("WAWebMediaEditorUtilsColor").Color)(0,0,0,.32)}};a=function(){a.create=function(b){var e=[],f=j(e,i),g=0;b.rotation!=null&&(g=b.rotation);return new a({id:d("WAWebMediaEditorUtilsGenerateLayerId").generateLayerId("text"),text:"",textColor:b.textColor,textBackground:b.textBackground,font:b.font,alignment:b.alignment,lines:e,frame:new(c("WAWebMediaEditorGeometryRect"))({origin:new(c("WAWebMediaEditorGeometryPoint"))({x:b.origin.x-f.width/2,y:b.origin.y-f.height/2}),size:f,rotation:g,scale:(e=b.scale)!=null?e:1}),maxWidth:0,backgroundPath:""}).setText(b.text)};function a(a){this.$1=Object.freeze(babelHelpers["extends"]({},a)),Object.freeze(this)}var b=a.prototype;b["delete"]=function(){};b.setOrigin=function(a){return this.$2({frame:this.frame.update({origin:a})})};b.setRotation=function(a){return this.$2({frame:this.frame.update({rotation:a})})};b.setScale=function(a){return this.$2({frame:this.frame.update({scale:a})})};b.setText=function(a){return this.$2({text:a})};b.setTextColor=function(a){return this.$2({textColor:a})};b.setTextBackground=function(a){return this.$2({textBackground:a})};b.setFont=function(a){return this.$2({font:a})};b.setAlignment=function(a){return this.$2({alignment:a})};b.$2=function(b){var e=babelHelpers["extends"]({},this.$1);b.frame!=null&&(e.frame=b.frame);b.textColor!=null&&(e.textColor=b.textColor);b.textBackground!=null&&(e.textBackground=b.textBackground);if(b.text!=null&&b.text!==e.text||b.font!=null&&b.font!==e.font){var f;e.text=(f=b.text)!=null?f:e.text;e.font=(f=b.font)!=null?f:e.font;e.lines=d("WAWebMediaEditorUtilsTextInCanvas").getLines(e.text,e.font,h,this.$1.maxWidth);f=j(e.lines,i);var g=e.frame.size,k=e.frame.origin;k=new(c("WAWebMediaEditorGeometryPoint"))({x:k.x+g.width/2-f.width/2,y:k.y+g.height/2-f.height/2});e.frame=e.frame.update({origin:k,size:f})}b.alignment!=null&&(e.alignment=b.alignment);if(this.font!==e.font||this.text!==e.text||this.alignment!==e.alignment){g=e.lines.map(function(a){return a.width});e.backgroundPath=d("WAWebMediaEditorUtilsTextBackground").generateTextBackgroundPath(g,e.alignment,{lineVerticalPadding:this.styles.lineVerticalPadding,lineHorizontalPadding:this.styles.lineHorizontalPadding,lineHeight:this.lineHeight,arcSize:this.styles.backgroundBorderRadius})}return c("lodash").isEqual(this.$1,e)?this:new a(e)};babelHelpers.createClass(a,[{key:"lines",get:function(){return this.$1.lines}},{key:"linesOfText",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lineWidths",get:function(){return this.lines.map(function(a){return a.width})}},{key:"numberOfLines",get:function(){return this.lines.length}},{key:"fontSize",get:function(){return h}},{key:"lineHeight",get:function(){return this.fontSize}},{key:"styles",get:function(){return i}},{key:"text",get:function(){return this.$1.text}},{key:"textColor",get:function(){return this.$1.textColor}},{key:"textBackgroundColor",get:function(){return this.textColor.isLight()?d("WAWebMediaEditorEnumsColors").getColorValue(d("WAWebMediaEditorEnumsColors").ColorType.BLACK):d("WAWebMediaEditorEnumsColors").getColorValue(d("WAWebMediaEditorEnumsColors").ColorType.WHITE)}},{key:"textBackground",get:function(){return this.$1.textBackground}},{key:"font",get:function(){return this.$1.font}},{key:"editable",get:function(){return!0}},{key:"id",get:function(){return this.$1.id}},{key:"alignment",get:function(){return this.$1.alignment}},{key:"frame",get:function(){return this.$1.frame}},{key:"origin",get:function(){return this.frame.origin}},{key:"size",get:function(){return this.frame.size}},{key:"x",get:function(){return this.frame.x}},{key:"y",get:function(){return this.frame.y}},{key:"width",get:function(){return this.frame.width}},{key:"height",get:function(){return this.frame.height}},{key:"rotation",get:function(){return this.frame.rotation}},{key:"scale",get:function(){return this.frame.scale}},{key:"backgroundPath",get:function(){return this.$1.backgroundPath}}]);return a}();function j(a,b){var d=Math.max.apply(Math,a.map(function(a){return a.width}).concat([0]))+b.lineHorizontalPadding*2+b.layerPadding*2;a=a.length*(h+b.lineVerticalPadding*2)+b.layerPadding*2;return new(c("WAWebMediaEditorGeometrySize"))({width:d,height:a})}g.DEFAULT_FONT_SIZE=h;g.TextLayer=a}),98);
__d("WAWebMediaEditorUtilsGetDominantColor",["WAWebMediaEditorUtilsColor"],(function(a,b,c,d,e,f,g){var h=5,i=4,j=new(d("WAWebMediaEditorUtilsColor").Color)(220,220,220);function k(a){var b=document.createElement("canvas"),c=b.getContext("2d");if(!c)return null;var d=b.height=a.height;b=b.width=a.width;c.drawImage(a,0,0);try{a=c.getImageData(0,0,b,d);return a.data}catch(a){return null}}function l(a){var b=h*i,c=0,e=0,f=0,g=0,j=0;for(var k=0;k<a.length;k+=b){var l=a[k+3],m=a[k]*l,n=a[k+1]*l,o=a[k+2]*l;c+=m;e+=n;f+=o;g+=l;j++}return g?new(d("WAWebMediaEditorUtilsColor").Color)(Math.round(c/g),Math.round(e/g),Math.round(f/g),Math.round(g/j)/255):new(d("WAWebMediaEditorUtilsColor").Color)(0,0,0,0)}function a(a){a=k(a);return!a?j:l(a)}g.DEFAULT_DOMINANT_COLOR=j;g.getDominantColor=a}),98);
__d("WAWebMediaEditorData",["WAWebMediaEditorEnumsFonts","WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometryRect","WAWebMediaEditorGeometrySize","WAWebMediaEditorLayersBlur","WAWebMediaEditorLayersDraw","WAWebMediaEditorLayersImage","WAWebMediaEditorLayersText","WAWebMediaEditorUtilsGetDominantColor","cr:4943","err","lodash"],(function(a,b,c,d,e,f,g){var h=0;a=function(){a.create=function(){var b,e,f=d("WAWebMediaEditorUtilsGetDominantColor").DEFAULT_DOMINANT_COLOR.getBackgroundAndTintColors(),g=f.backgroundColor;f=f.tintColor;return new a({id:Math.random(),frame:new(c("WAWebMediaEditorGeometryRect"))({origin:new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}),size:new(e=c("WAWebMediaEditorGeometrySize"))({width:0,height:0}),rotation:0,scale:0}),layers:[],paintLayer:new((b=d("WAWebMediaEditorLayersDraw")).DrawLayer)({size:e.empty(),type:b.DrawLayerType.Paint}),outlineLayer:new b.DrawLayer({size:e.empty(),type:b.DrawLayerType.Outline}),background:null,selectedLayer:null,backgroundColor:g,tintColor:f,rotation:h,cropFrame:new(c("WAWebMediaEditorGeometryRect"))({origin:new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}),size:new e({width:0,height:0}),rotation:0,scale:0})})};function a(a){this.$1=Object.freeze(babelHelpers["extends"]({},a)),Object.freeze(this)}var b=a.prototype;b.$2=function(b){var d=babelHelpers["extends"]({},this.$1);b.layers!=null&&(d.layers=b.layers);b.paintLayer!==void 0&&(d.paintLayer=b.paintLayer);b.outlineLayer!==void 0&&(d.outlineLayer=b.outlineLayer);b.background!==void 0&&(d.background=b.background);b.frame!==void 0&&(d.frame=b.frame,d.frame&&(d.cropFrame=d.cropFrame.updateXYWidthHeight({x:0,y:0,width:d.frame.width,height:d.frame.height})));b.cropFrame!==void 0&&(d.cropFrame=b.cropFrame);b.selectedLayer!==void 0&&(d.selectedLayer=b.selectedLayer);b.backgroundColor!=null&&(d.backgroundColor=b.backgroundColor);b.tintColor!=null&&(d.tintColor=b.tintColor);b.rotation!=null&&(d.rotation=b.rotation);return c("lodash").isEqual(this.$1,d)?this:new a(d)};b.updateLayer=function(a,b){if(a instanceof d("WAWebMediaEditorLayersText").TextLayer&&!(b instanceof d("WAWebMediaEditorLayersText").TextLayer)||a instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&!(b instanceof d("WAWebMediaEditorLayersImage").ImageLayer))throw new TypeError("MediaEditorData: calling _updateLayer with two different layer types");if(a===b)return this;var c=this.layers.map(function(c){return c===a?b:c}),e=this.selectedLayer;e===a&&(e=b);return this.$2({layers:c,selectedLayer:e})};b.setBackground=function(a,b){b=(b=b)!=null?b:{};var e=b.fitToSquare;e=e===void 0?!1:e;b=b.scale;b=b===void 0?1:b;var f=d("WAWebMediaEditorLayersImage").ImageLayer.create({type:d("WAWebMediaEditorLayersImage").ImageLayerType.Background,origin:new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}),image:a,editable:!0,scale:b}),g=f.frame.dimension;e=e?c("WAWebMediaEditorGeometryRect").create({x:0,y:0,width:g,height:g,scale:1,rotation:0}):f.frame;g=new(c("WAWebMediaEditorGeometryPoint"))({x:(e.width-f.width)/2,y:(e.height-f.height)/2});f=f.setScale(b).setOrigin(g);b=d("WAWebMediaEditorUtilsGetDominantColor").getDominantColor(a);g=b.getBackgroundAndTintColors();a=g.backgroundColor;b=g.tintColor;g=new(d("WAWebMediaEditorLayersDraw").DrawLayer)({size:e.size,type:d("WAWebMediaEditorLayersDraw").DrawLayerType.Paint});var h=new(d("WAWebMediaEditorLayersDraw").DrawLayer)({size:e.size,type:d("WAWebMediaEditorLayersDraw").DrawLayerType.Outline});return this.$2({background:f,frame:e,backgroundColor:a,tintColor:b,paintLayer:g,outlineLayer:h})};b.updateBackground=function(a,b,c,d){var e;e=(e=this.background)==null?void 0:e.setImage(a).setOrigin(b).setRotation(c).setScale(d);return this.$2({background:e,selectedLayer:e}).setBlurLayerBackground(e==null?void 0:e.frame,a)};b.addImageLayer=function(a){a=d("WAWebMediaEditorLayersImage").ImageLayer.create(a);var b=[].concat(this.layers,[a]);return this.$2({layers:b,selectedLayer:a})};b.addImageLayerToCenter=function(a){var b=this.toCanvasPoint(new(c("WAWebMediaEditorGeometryPoint"))({x:this.screenWidth/2,y:this.screenHeight/2}));b=new(c("WAWebMediaEditorGeometryPoint"))({x:b.x-a.image.width/2,y:b.y-a.image.height/2});b=babelHelpers["extends"]({origin:b,rotation:-this.rotation},a);return this.addImageLayer(b)};b.addBlurLayer=function(a){a=d("WAWebMediaEditorLayersBlur").BlurLayer.create(a);var b=[].concat(this.layers,[a]);return this.$2({layers:b,selectedLayer:a})};b.addBlurLayerToCenter=function(a){var b,d=this.toCanvasPoint(new(c("WAWebMediaEditorGeometryPoint"))({x:this.screenWidth/2,y:this.screenHeight/2}));b=new(c("WAWebMediaEditorGeometryPoint"))({x:d.x-((b=(b=a.size)==null?void 0:b.width)!=null?b:a.image.width)/2,y:d.y-((d=(b=a.size)==null?void 0:b.height)!=null?d:a.image.height)/2});d=babelHelpers["extends"]({origin:b},a);return this.addBlurLayer(d)};b.setBlurLayerBackground=function(a,b){var c=this.layers.map(function(c){c=c;c instanceof d("WAWebMediaEditorLayersBlur").BlurLayer&&(b!=null&&(c=c.setImage(b)),a!=null&&(c=c.setBlurBackgroundFrame(a)));return c});return this.$2({layers:c})};b.addTextLayer=function(a){a=a instanceof d("WAWebMediaEditorLayersText").TextLayer?a:d("WAWebMediaEditorLayersText").TextLayer.create(babelHelpers["extends"]({},a,{rotation:-this.rotation}));var b=[].concat(this.layers,[a]);a=a;return this.$2({layers:b,selectedLayer:a})};b.setText=function(a,b){return this.updateLayer(a,a.setText(b))};b.setTextColor=function(a,b){return this.updateLayer(a,a.setTextColor(b))};b.setTextBackground=function(a,b){return this.updateLayer(a,a.setTextBackground(b))};b.setFont=function(a,b){return this.updateLayer(a,a.setFont(b))};b.setAlignment=function(a,b){return this.updateLayer(a,a.setAlignment(b))};b.setBlurMode=function(a,b){return this.updateLayer(a,a.setBlurMode(b))};b.setBlurRadius=function(a,b){return this.updateLayer(a,a.setBlurRadius(b))};b.setBlurBackgroundFrame=function(a,b){return this.updateLayer(a,a.setBlurBackgroundFrame(b))};b.setRotation=function(a){if(a%90!==0)throw c("err")("canvas can only be rotated at a 90 degrees interval");return this.$2({rotation:a%360})};b.setCrop=function(a,b){if(a.x<0||a.y<0||a.x+b.width>this.width||a.y+b.height>this.height)throw c("err")("canvas crop must stays within the frame bound");a=new(c("WAWebMediaEditorGeometryRect"))({origin:a,size:b,rotation:0,scale:0});return this.$2({cropFrame:a})};b.addEmptyTextLayer=function(a,b){a={origin:new(c("WAWebMediaEditorGeometryPoint"))({x:this.width/4,y:this.height/2}),text:"",textColor:a,textBackground:!1,font:b,alignment:d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER};return this.addTextLayer(a)};b.addPaintPath=function(a){a=this.paintLayer.addPath(a);return this.$2({paintLayer:a})};b.addOutlinePath=function(a){a=this.outlineLayer.addPath(a);return this.$2({outlineLayer:a})};b.clearOutlinePaths=function(){var a=this.outlineLayer.clearPaths();return this.$2({outlineLayer:a})};b.translateLayer=function(a,b){return this.updateLayer(a,a.setOrigin(b))};b.translateBackground=function(a){var b;b=(b=this.background)==null?void 0:b.setOrigin(a);return this.$2({background:b,selectedLayer:b}).setBlurLayerBackground(b==null?void 0:b.frame)};b.transformLayer=function(a,b,c,e){var f=a;e!=null&&a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer&&(f=a.setFrame(e));f=f.setRotation(b).setScale(c);return this.updateLayer(a,f)};b.transformBackground=function(a,b){var c;c=(c=this.background)==null?void 0:c.setRotation(a).setScale(b);return this.$2({background:c,selectedLayer:c}).setBlurLayerBackground(c==null?void 0:c.frame)};b.setSelectedLayer=function(a){return this.$2({selectedLayer:a})};b.clearSelectedLayer=function(){return this.$2({selectedLayer:null})};b.deleteLayer=function(a){a["delete"]();var b=this.layers.filter(function(b){return b!==a});b={layers:b};a===this.selectedLayer&&(b=babelHelpers["extends"]({},b,{selectedLayer:null}));return this.$2(b)};b.deleteAllLayers=function(){var a;this.layers.forEach(function(a){return a["delete"]()});return this.$2({layers:[],paintLayer:new((a=d("WAWebMediaEditorLayersDraw")).DrawLayer)({size:this.size,type:a.DrawLayerType.Paint}),outlineLayer:new a.DrawLayer({size:this.size,type:a.DrawLayerType.Outline}),selectedLayer:null})};b.hasEdits=function(){return!this.paintLayer.isEmpty()||!this.outlineLayer.isEmpty()||this.layers.length>0||this.rotation!==h||!this.size.equals(this.$1.cropFrame.size)};b.toScreenPoint=function(a){var b,d=Math.max(this.width,this.height),e=new(b=c("WAWebMediaEditorGeometryPoint"))({x:d/2,y:d/2});a=new b({x:a.x+(d-this.width)/2,y:a.y+(d-this.height)/2});a=a.rotate(e,this.rotation);d=new b({x:this.cropCenter.x+(d-this.width)/2,y:this.cropCenter.y+(d-this.height)/2});d=d.rotate(e,this.rotation);e=new b({x:d.x-this.screenWidth/2,y:d.y-this.screenHeight/2});return new b({x:a.x-e.x,y:a.y-e.y})};b.toCanvasPoint=function(a){var b,d=Math.max(this.width,this.height);d=new(b=c("WAWebMediaEditorGeometryPoint"))({x:d/2,y:d/2});var e=this.cropCenter.rotate(d,this.rotation);e=new b({x:e.x-this.screenWidth/2,y:e.y-this.screenHeight/2});a=new b({x:a.x+e.x,y:a.y+e.y});e=a.rotate(d,-this.rotation);return new b({x:e.x,y:e.y})};b.resetCropRotate=function(){return this.setRotation(0).setCrop(new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}),new(c("WAWebMediaEditorGeometrySize"))({width:this.width,height:this.height}))};b.isRotated=function(){return this.rotation!==0};b.isCropped=function(){return!this.cropOrigin.equals(new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}))||!this.cropSize.equals(this.size)};b.isOutlined=function(){return!this.outlineLayer.isEmpty()};babelHelpers.createClass(a,[{key:"layers",get:function(){return this.$1.layers}},{key:"lastTextLayer",get:function(){var a=c("lodash").findLast(this.layers,function(a){return a instanceof d("WAWebMediaEditorLayersText").TextLayer});return a instanceof d("WAWebMediaEditorLayersText").TextLayer?a:null}},{key:"paintLayer",get:function(){return this.$1.paintLayer}},{key:"outlineLayer",get:function(){return this.$1.outlineLayer}},{key:"background",get:function(){return this.$1.background}},{key:"selectedLayer",get:function(){return this.$1.selectedLayer}},{key:"backgroundColor",get:function(){return this.$1.backgroundColor}},{key:"tintColor",get:function(){return this.$1.tintColor}},{key:"size",get:function(){return this.$1.frame.size}},{key:"frame",get:function(){return this.$1.frame}},{key:"width",get:function(){return this.$1.frame.width}},{key:"height",get:function(){return this.$1.frame.height}},{key:"cropWidth",get:function(){return this.$1.cropFrame.width}},{key:"cropHeight",get:function(){return this.$1.cropFrame.height}},{key:"cropOrigin",get:function(){return this.$1.cropFrame.origin}},{key:"cropSize",get:function(){return this.$1.cropFrame.size}},{key:"cropCenter",get:function(){return this.$1.cropFrame.getCenter()}},{key:"screenWidth",get:function(){return this.rotation%180===0?this.cropWidth:this.cropHeight}},{key:"screenHeight",get:function(){return this.rotation%180===0?this.cropHeight:this.cropWidth}},{key:"canvasCenter",get:function(){return new(c("WAWebMediaEditorGeometryPoint"))({x:this.width/2,y:this.height/2})}},{key:"rotation",get:function(){return this.$1.rotation}},{key:"id",get:function(){return this.$1.id}}]);return a}();g["default"]=a}),98);
__d("WAWebAttachMediaModel",["$InternalEnum","Promise","WAFilteredCatch","WALogger","WAMemoizeConcurrent","WAWebABProps","WAWebBaseModel","WAWebFileUtils","WAWebHDMediaUtils","WAWebMedia","WAWebMediaDataUtils","WAWebMediaEditorData","WAWebMediaFileTooLargeError","WAWebMediaGatingUtils","WAWebMediaLoad","WAWebMediaOpaqueData","WAWebMiscErrors","WAWebMsgType","WAWebStickerConstants","WAWebUserPrefsGeneral","asyncToGeneratorRuntime","err","isNonZeroNumber"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["AttachMedia:processFile convert unexpected error to InvalidMediaFileType:"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invariant violated, processed file is not previewable"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[AttachMediaModel] originalAttachment is null"]);k=function(){return a};return a}a=b("$InternalEnum").Mirrored(["Outline","OutlineDone","CropRotateCanvas"]);var l=b("$InternalEnum").Mirrored(["Standard","HD"]),m={READY:"ready",PROCESSING:"processing",ERROR:"error"};e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];return(e=f=a.call.apply(a,[this].concat(h))||this,f.id=d("WAWebBaseModel").prop(),f.file=d("WAWebBaseModel").prop(),f.uiProcessed=d("WAWebBaseModel").prop(!1),f.fileOrigin=d("WAWebBaseModel").prop(),f.isVcardOverMmsDocument=d("WAWebBaseModel").prop(!1),f.stickerMaker=d("WAWebBaseModel").prop(!1),f.supportedTypes=d("WAWebBaseModel").prop(),f.quality=d("WAWebBaseModel").prop(l.Standard),f.originalAttachment=d("WAWebBaseModel").session(),f.state=d("WAWebBaseModel").session(),f.mediaPrep=d("WAWebBaseModel").session(),f.mimetype=d("WAWebBaseModel").session(),f.originalMimetype=d("WAWebBaseModel").session(),f.processPromise=d("WAWebBaseModel").session(),f.exception=d("WAWebBaseModel").session(),f.caption=d("WAWebBaseModel").session(),f.type=d("WAWebBaseModel").session(d("WAWebMsgType").MSG_TYPE.UNKNOWN),f.hdEligible=d("WAWebBaseModel").session(!1),f.metadataByQuality=d("WAWebBaseModel").session(),f.mediaEditorData=d("WAWebBaseModel").session(),f.lastMediaEditorAction=d("WAWebBaseModel").session(),f.editedFile=d("WAWebBaseModel").session(),f.$AttachMediaImpl1=d("WAWebBaseModel").session(function(){return[]}),f.$AttachMediaImpl2=d("WAWebBaseModel").session(function(){return[]}),f.preview=d("WAWebBaseModel").session(),f.fullPreview=d("WAWebBaseModel").session(),f.fullPreviewSize=d("WAWebBaseModel").session(),f.filename=d("WAWebBaseModel").session(),f.documentPageCount=d("WAWebBaseModel").session(),f.isGif=d("WAWebBaseModel").session(),f.gifAttribution=d("WAWebBaseModel").session(),f.previewable=d("WAWebBaseModel").derived(function(){if(!this.type||!this.mimetype||!this.fullPreview)return!1;switch(this.type){case d("WAWebMsgType").MSG_TYPE.DOCUMENT:return!!this.filename;case d("WAWebMsgType").MSG_TYPE.IMAGE:case d("WAWebMsgType").MSG_TYPE.VIDEO:return!this.fullPreviewSize||!this.preview?!1:!0;case d("WAWebMsgType").MSG_TYPE.AUDIO:case d("WAWebMsgType").MSG_TYPE.STICKER:case d("WAWebMsgType").MSG_TYPE.PTT:case d("WAWebMsgType").MSG_TYPE.UNKNOWN:return!0;default:throw c("err")("Unsupported attach media type "+this.type)}},["preview","fullPreview","type","filename","fullPreviewSize","mimetype"]),f.filesize=d("WAWebBaseModel").derived(function(){if(this.file instanceof c("WAWebMediaOpaqueData"))return this.file.size();else if(this.file instanceof Blob)return this.file.size;return null},["file"]),f.fileExt=d("WAWebBaseModel").derived(function(){return this.filename?d("WAWebFileUtils").getFileExtension(this.filename):null},["filename"]),f.$AttachMediaImpl7=c("WAMemoizeConcurrent")(function(){return"hd-eligible"},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a.attachmentPromise);a=a.file;a=window.URL.createObjectURL(a);a=(yield d("WAWebMediaLoad").loadImage(a));return d("WAWebHDMediaUtils").isHdPhoto(a.naturalHeight,a.naturalWidth)});return function(b){return a.apply(this,arguments)}}()),e)||babelHelpers.assertThisInitialized(f)}var f=e.prototype;f.initialize=function(){a.prototype.initialize.call(this);if(this.file instanceof(h||(h=b("Promise"))))this.originalAttachment=this.file,this.processAttachment(this.file);else throw c("err")("cannot process non-promise file")};f.processAttachment=function(a){var b=this;this.state=m.PROCESSING;this.mediaEditorData=c("WAWebMediaEditorData").create();this.processPromise=this.$AttachMediaImpl3(a).then(function(){var a=new Image();a.src=b.fullPreview;a.onload=function(){var c={};if(b.stickerMaker){c.fitToSquare=!0;var e=2*d("WAWebStickerConstants").STICKER_MAKER_IMAGE_PADDING;c.scale=1-e/d("WAWebStickerConstants").STICKER_DIMENSION}b.mediaEditorData=b.mediaEditorData.setBackground(a,c)}})};f.$AttachMediaImpl4=function(a){switch((a=a)!=null?a:this.quality){case l.Standard:return d("WAWebABProps").getABPropConfigValue("web_image_max_edge");case l.HD:return d("WAWebABProps").getABPropConfigValue("web_image_max_hd_edge")}};f.updateQuality=function(a){this.quality=a,d("WAWebMediaGatingUtils").isStickyHQPhotoSettingEnabled()&&d("WAWebUserPrefsGeneral").setHDMediaSetting(a===l.HD),this.originalAttachment!=null?this.processAttachment(this.originalAttachment):d("WALogger").ERROR(k()).tags("media").devConsole(this.originalAttachment,a).sendLogs("attach-media-update-quality-null-attachment")};f.$AttachMediaImpl5=function(a){if(a==null)return!0;return this.supportedTypes==null?!0:this.supportedTypes.has(a)};f.$AttachMediaImpl6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){this.metadataByQuality=new Map([[l.Standard,yield d("WAWebMediaDataUtils").getImageMetadata(a,{maxDimension:this.$AttachMediaImpl4(l.Standard)})],[l.HD,yield d("WAWebMediaDataUtils").getImageMetadata(a,{maxDimension:this.$AttachMediaImpl4(l.HD)})]])});function c(b){return a.apply(this,arguments)}return c}();f.$AttachMediaImpl3=function(a){var e=this,f;return a.then(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(!e.$AttachMediaImpl5(b.type))throw new(d("WAWebMiscErrors").InvalidMediaFileType)();e.set(b);var f={maxDimension:e.$AttachMediaImpl4()},g=b.file,h=b.filename,i=b.isGif,k=b.asSticker,n=b.stickerMaker,o=b.gifAttribution,p=b.isVcardOverMmsDocument,q=b.documentPageCount;i===!0?(f.asGif=!0,f.gifAttribution=o):b.type===d("WAWebFileUtils").FILETYPE.DOCUMENT&&(f.asDocument=!0,f.filename=h,f.isVcardOverMmsDocument=p,f.documentPageCount=q);f.asSticker=k;n===!0&&(f.minDimension=d("WAWebStickerConstants").STICKER_DIMENSION,f.transparency=!0);f.precomputedFields={fullHeight:b.fullPreviewSize?b.fullPreviewSize.height:void 0,fullWidth:b.fullPreviewSize?b.fullPreviewSize.width:void 0,preview:b.preview,duration:b.duration};i=c("WAWebMediaOpaqueData").createFromData(g,g.type);o=d("WAWebMedia").prepRawMedia(i,f);e.set({mediaPrep:o});h=(yield o.waitForPrep());p=h.documentPreview;k=h.mediaBlob instanceof c("WAWebMediaOpaqueData")?window.URL.createObjectURL(h.mediaBlob.forceToBlob()):window.URL.createObjectURL(h.mediaBlob);n={file:h.mediaBlob,fullPreview:k,type:h.type,filename:h.filename,mimetype:h.mimetype,originalMimetype:b.mimetype,preview:h.preview,state:m.READY,isGif:h.isGif,fullPreviewSize:void 0,documentPageCount:q,isVcardOverMmsDocument:h.isVcardOverMmsDocument,editedFile:h.mediaBlob};d("isNonZeroNumber").isNonZeroNumber(h.fullWidth)&&d("isNonZeroNumber").isNonZeroNumber(h.fullHeight)&&(n.fullPreviewSize={height:h.fullHeight,width:h.fullWidth});h.type===d("WAWebMsgType").MSG_TYPE.IMAGE&&(n.preview=k,e.originalAttachment=a,h.isGif||(e.hdEligible=(yield e.$AttachMediaImpl7({attachmentPromise:a,signal:new AbortController().signal})),e.hdEligible&&(yield e.$AttachMediaImpl6(g),e.quality=d("WAWebMediaGatingUtils").isStickyHQPhotoSettingEnabled()&&d("WAWebUserPrefsGeneral").getHDMediaSetting()?l.HD:l.Standard)));h.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&p&&(n.fullPreview=p.url,n.preview=p.thumbUrl,n.fullPreviewSize={height:p.height,width:p.width},n.documentPageCount=p.pdfPages);e.set(n);e.previewable||d("WALogger").ERROR(j()).sendLogs("AttachMedia processFile")});return function(a){return f.apply(this,arguments)}}())["catch"](d("WAFilteredCatch").filteredCatch([(f=d("WAWebMiscErrors")).InvalidMediaFileType,f.InvalidImageFileType],function(b){if(e.isGif||e.type===d("WAWebFileUtils").FILETYPE.DOCUMENT||!e.$AttachMediaImpl5(d("WAWebMsgType").MSG_TYPE.DOCUMENT))throw b;return e.$AttachMediaImpl3(a.then(function(a){a.type=d("WAWebFileUtils").FILETYPE.DOCUMENT;return a}))}))["catch"](d("WAFilteredCatch").filteredCatch([c("WAWebMediaFileTooLargeError"),f.MediaFileFailedLoad,f.MediaFileEmpty],function(a){e.set({exception:a,state:m.ERROR});return e}))["catch"](function(a){d("WALogger").WARN(i()).devConsole(a);e.set({exception:new(d("WAWebMiscErrors").InvalidMediaFileType)(),state:m.ERROR});return e})};f.sendToChat=function(a,e){if(!this.mediaPrep)return(h||(h=b("Promise"))).reject(c("err")("MediaPrep not available"));if(this.state===m.ERROR)return(h||(h=b("Promise"))).reject(c("err")(this.exception));if(this.state===m.PROCESSING&&(!this.previewable||!e.addEvenWhilePreparing))return(h||(h=b("Promise"))).reject(c("err")("Media still processing"));if(this.state===m.READY)return this.mediaPrep.sendToChat(a,e);var f={mimetype:this.mimetype};switch(this.type){case d("WAWebMsgType").MSG_TYPE.VIDEO:f.isGif=this.isGif,f.gifAttribution=this.gifAttribution;case d("WAWebMsgType").MSG_TYPE.IMAGE:f.width=this.fullPreviewSize.width;f.height=this.fullPreviewSize.height;f.body=this.preview;e.placeholderProps=f;break;case d("WAWebMsgType").MSG_TYPE.DOCUMENT:f.pageCount=this.documentPageCount;f.filename=this.filename;f.body=this.preview;e.placeholderProps=f;break;case d("WAWebMsgType").MSG_TYPE.AUDIO:case d("WAWebMsgType").MSG_TYPE.PTT:default:break}return this.mediaPrep.sendToChat(a,e)};f.getFileType=function(){if(!(this.file instanceof Blob||this.file instanceof File))throw c("err")("expected file to be a Blob or File");return d("WAWebFileUtils").typeFromMimetype(this.file.type)};f.isViewableOnce=function(){var a=new Set([d("WAWebMsgType").MSG_TYPE.IMAGE,d("WAWebMsgType").MSG_TYPE.VIDEO]);return a.has(this.type)&&!this.isGif};f["delete"]=function(){this.fullPreview&&window.URL.revokeObjectURL(this.fullPreview),a.prototype["delete"].call(this)};f.updateMediaEditorData=function(a,b){if(this.mediaEditorData===a)return this.mediaEditorData;b.undoable&&(this.$AttachMediaImpl1.push([this.mediaEditorData,this.lastMediaEditorAction]),this.lastMediaEditorAction=b.lastAction,this.$AttachMediaImpl2=[]);this.mediaEditorData=a;return this.mediaEditorData};f.undoMediaEditorData=function(a){a===void 0&&(a=!0);if(this.canUndoMediaEditorData()){a&&this.$AttachMediaImpl2.push([this.mediaEditorData,this.lastMediaEditorAction]);a=this.$AttachMediaImpl1.pop();var b=a[0];a=a[1];this.mediaEditorData=b;this.lastMediaEditorAction=a}};f.redoMediaEditorData=function(){if(this.canRedoMediaEditorData()){this.$AttachMediaImpl1.push([this.mediaEditorData,this.lastMediaEditorAction]);var a=this.$AttachMediaImpl2.pop(),b=a[0];a=a[1];this.mediaEditorData=b;this.lastMediaEditorAction=a}};f.canUndoMediaEditorData=function(){return this.$AttachMediaImpl1.length>0};f.canRedoMediaEditorData=function(){return this.$AttachMediaImpl2.length>0};f.updateEditedFile=function(a){this.editedFile=a};f.updatePreview=function(a){window.URL.revokeObjectURL(this.preview),this.preview=a};f.updateFullPreview=function(a){window.URL.revokeObjectURL(this.fullPreview),this.fullPreview=a};f.updateCaption=function(a){this.caption=a};return e}(d("WAWebBaseModel").BaseModel);e.Proxy="attachMedia";f=d("WAWebBaseModel").defineModel(e);g.MediaEditorAction=a;g.MediaQuality=l;g.ATTACH_MEDIA_STATE=m;g.AttachMedia=f}),98);
__d("WAWebCarouselCardsCollection",["WAWebBaseCollection","WAWebMsgModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.clone=function(){var a=new b();a.add(this.slice());return a};c.getCardsById=function(){var a={};this.forEach(function(b){a[b.id.toString()]=b});return a};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;g["default"]=a}),98);
__d("WAWebCarouselMsgUtils",["WALogger","WAWebMsgCollection"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Could not find parent msg (id=",") for carousel card."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parentMsgId is null on carousel card."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getParentMsgFromCarouselCard called on non carousel card."]);j=function(){return a};return a}function a(a){if(!a.isCarouselCard){d("WALogger").ERROR(j()).sendLogs("getParentMsgFromCarouselCard-error");return}if(a.parentMsgId==null){d("WALogger").ERROR(i()).sendLogs("getParentMsgFromCarouselCard-error");return}var b=d("WAWebMsgCollection").MsgCollection.get(a.parentMsgId);b==null&&d("WALogger").ERROR(h(),a.parentMsgId).sendLogs("getParentMsgFromCarouselCard-error");return b}function b(a){var b=[],c=function(a){return b.push(a)};for(var d=0;d<a.length;d++){var e=a[d];e.carouselCards!=null?e.carouselCards.forEach(c):c(e)}return b}g.getParentMsgFromCarouselCard=a;g.flattenMsgs=b}),98);
__d("WAWebMsgActionCapability",["WALogger","WANullthrows","WATimeUtils","WAWebABProps","WAWebAck","WAWebBizCoexGatingUtils","WAWebBotGating","WAWebBotGenTypingIndicatorMsg","WAWebBusinessHSMTypes","WAWebChatGroupUtils","WAWebContactGetters","WAWebDisplayType","WAWebFrontendMsgGetters","WAWebIsSpamSupportedForMessageType","WAWebMediaTypes","WAWebMessageEditGatingUtils","WAWebMessageEditUtils","WAWebMiscGatingUtils","WAWebMsgGetters","WAWebMsgLinks","WAWebMsgModel","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebNewsletterMembershipUtil","WAWebNewsletterModelUtils","WAWebPinMsgGatingUtils","WAWebProtobufsE2E.pb","WAWebRevokeMsgConstants","WAWebStateUtils","WAWebUserPrefsMultiDevice","cr:6009"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["msg doesn't have a server ID, will be impossible to generate message link"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat doesn't have a newsletter invite code, will be impossible to generate message link"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat doesn't have newsletter metadata, will be impossible to generate message link"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["canRevokeNewsletterMsg called on a non-newsletter chat"]);k=function(){return a};return a}function l(a){a=d("WAWebStateUtils").unproxy(a);if(a.isCarouselCard||a.carouselCards)return!1;var b=d("WAWebFrontendMsgGetters").getMaybeChat(a);if((b==null?void 0:b.isSuspendedOrTerminated())&&d("WAWebMiscGatingUtils").isGroupSuspendV2Enabled())return!1;if((b==null?void 0:b.isNewsletter)&&!d("WAWebNewsletterGatingUtils").isNewsletterMessageForwardSendingEnabled())return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.OVERSIZED)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.REVOKED)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.PAYMENT)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.POLL_CREATION)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.REQUEST_PHONE_NUMBER)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.LIST){return((b=a.list)==null?void 0:b.listType)===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST}if(a.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.NEWSLETTER_ADMIN_INVITE)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.LOCATION&&a.isLive)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.ORDER)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.nativeFlowName!=null)return!1;if(!a.interactiveButtonsReleased())return!1;if(a.ack<d("WAWebAck").ACK.SENT&&d("WAWebMsgGetters").getIsSentByMe(a))return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.CHAT&&a.subtype===d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE)return!1;if(d("WAWebFrontendMsgGetters").getAsMms(a)){b=a.mediaData;if(b.mediaStage===d("WAWebMediaTypes").MediaDataStage.EXISTS)return!0;if(b.mediaStage===d("WAWebMediaTypes").MediaDataStage.ERROR_MISSING)return!1;if(b.mediaStage===d("WAWebMediaTypes").MediaDataStage.ERROR_UNSUPPORTED)return!1;if(b.mediaStage!==d("WAWebMediaTypes").MediaDataStage.RESOLVED&&(a.type===d("WAWebMsgType").MSG_TYPE.IMAGE||a.type===d("WAWebMsgType").MSG_TYPE.VIDEO||a.type===d("WAWebMsgType").MSG_TYPE.PTV||a.type===d("WAWebMsgType").MSG_TYPE.PTT))return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.PTV&&!d("WAWebMsgGetters").getIsSentByMe(a))return!1;if(a.isViewOnce)return!1;if(d("WAWebFrontendMsgGetters").getIsUnsentMedia(a))return!1}if((b=a.nativeFlowButtons)==null?void 0:b.length)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION)return!1;return a.hsmTag===d("WAWebBusinessHSMTypes").HSM_TAG_TYPE.AUTHENTICATION?!1:!0}function a(a){var b=d("WAWebStateUtils").unproxy(a);return!l(a)||d("WAWebMsgGetters").getIsFrequentlyForwarded(b)||d("WAWebMsgLinks").getSuspiciousLinks(b).length!==0||d("WAWebFrontendMsgGetters").getAsPttLike(b)!=null||b.type===d("WAWebMsgType").MSG_TYPE.STICKER||!b.interactiveButtonsReleased()?!1:d("WAWebFrontendMsgGetters").getAsMms(b)!=null||d("WAWebMsgGetters").getLinkPreview(b)||b.type===d("WAWebMsgType").MSG_TYPE.VCARD||b.type===d("WAWebMsgType").MSG_TYPE.LOCATION||b.ctwaContext!=null}function e(a){a=d("WAWebStateUtils").unproxy(a);if(d("WAWebFrontendMsgGetters").getChat(a).isNewsletter)return!1;return a.isCarouselCard?!1:(!d("WAWebMsgGetters").getIsEphemeral(a)||a.supportsStarWithKeepInChat())&&!d("WAWebMsgGetters").getIsNotification(a)&&!d("WAWebMsgGetters").getIsFutureproof(a)&&!a.isViewOnce&&a.type!==d("WAWebMsgType").MSG_TYPE.REVOKED&&a.type!==d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER&&!(a.ack<d("WAWebAck").ACK.SENT&&d("WAWebMsgGetters").getIsSentByMe(a))&&a.interactiveButtonsReleased()}function f(a){a=d("WAWebStateUtils").unproxy(a);var b=d("WAWebFrontendMsgGetters").getChat(a);if(b.isNewsletter||b.id.isBot())return!1;if(a.isCarouselCard)return!1;if(d("WAWebMsgGetters").getIsGroupMsg(a)){b=c("WANullthrows")(b.groupMetadata);if(!b.participants.iAmMember())return!1;if((b.restrict||b.announce)&&!b.participants.iAmAdmin())return!1}return!d("WAWebMsgGetters").getIsNotification(a)&&!d("WAWebMsgGetters").getIsFutureproof(a)&&!d("WAWebMsgGetters").getIsViewOnce(a)&&a.type!==d("WAWebMsgType").MSG_TYPE.REVOKED&&a.type!==d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER&&!(a.ack<d("WAWebAck").ACK.SENT&&d("WAWebMsgGetters").getIsSentByMe(a))&&a.interactiveButtonsReleased()&&!a.isExpiredAndNotKept()&&d("WAWebPinMsgGatingUtils").isPinnedMessagesM1SenderEnabled()}function m(a,b){b===void 0&&(b=!1);if(d("WAWebMsgGetters").getIsBotQuery(a))return!1;b=d("WAWebMsgGetters").getIsEdited(a)&&d("WAWebMsgGetters").getIsFailed(a)&&!b||!a.mayFail();return d("WAWebFrontendMsgGetters").getChat(a).isNewsletter?d("WAWebNewsletterGatingUtils").isNewsletterMessageEditingEnabled()&&d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(d("WAWebFrontendMsgGetters").getChat(a).newsletterMetadata)&&b&&!a.isForwarded:d("WAWebMsgGetters").getIsSentByMe(a)&&!a.isForwarded&&a.local&&(d("WAWebMessageEditGatingUtils").sendCagMsgEditEnabled()||!d("WAWebFrontendMsgGetters").getChat(a).isCAG)&&b&&d("WAWebFrontendMsgGetters").getChat(a).canSend&&!d("WAWebFrontendMsgGetters").getChat(a).contact.isEnterprise}function n(a){var b=d("WAWebMsgGetters").getIsGroupMsg(a),c=d("WAWebMsgGetters").getIsSentByMe(a),e=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata;return!d("WAWebABProps").getABPropConfigValue("report_to_admin_kill_switch")||c||a.isViewOnce||d("WAWebFrontendMsgGetters").getChat(a).isNewsletter||d("WAWebMsgGetters").getIsMetaBotResponse(a)||!b?!1:Boolean(e==null?void 0:e.reportToAdminMode)}function o(a,b){b===void 0&&(b=!1);return(d("WAWebMsgGetters").getIsNewsletterMsg(a)?d("WAWebNewsletterGatingUtils").isNewsletterMessageEditingEnabled():d("WAWebMessageEditGatingUtils").sendTextEditEnabled())&&d("WAWebMessageEditUtils").getMsgEditType(a.type)===d("WAWebMessageEditUtils").MsgEditType.TextEdit&&m(a,b)}function p(a,b){b===void 0&&(b=!1);return(d("WAWebMsgGetters").getIsNewsletterMsg(a)?d("WAWebNewsletterGatingUtils").isNewsletterMessageEditingEnabled():d("WAWebMessageEditGatingUtils").sendCaptionEditEnabled())&&d("WAWebMessageEditUtils").getMsgEditType(a.type)===d("WAWebMessageEditUtils").MsgEditType.CaptionEdit&&Boolean(a.caption)&&m(a,b)}function q(a){switch(a){case d("WAWebDisplayType").DISPLAY_TYPE.CONVERSATION:case d("WAWebDisplayType").DISPLAY_TYPE.ANNOUNCEMENT:return!0;case d("WAWebDisplayType").DISPLAY_TYPE.NEWSLETTER:return d("WAWebNewsletterGatingUtils").isNewsletterMessageEditingEnabled();default:return!1}}function r(a){if((b("cr:6009")==null?void 0:b("cr:6009").messageEditRestrictionEnabled())===!1)return!0;a=d("WAWebStateUtils").unproxy(a);return(o(a,!0)||p(a,!0))&&d("WAWebMessageEditUtils").isParentWithinEditUIWindow({parentTsInSeconds:a.t,msgKey:a.id})}function s(a){if((b("cr:6009")==null?void 0:b("cr:6009").messageEditRestrictionEnabled())===!1)return!0;a=d("WAWebStateUtils").unproxy(a);return o(a)&&d("WAWebMessageEditUtils").isParentWithinEditProcessingWindow({parentTsInSeconds:a.t,msgKey:a.id})}function t(a){if((b("cr:6009")==null?void 0:b("cr:6009").messageEditRestrictionEnabled())===!1)return!0;a=d("WAWebStateUtils").unproxy(a);return p(a)&&d("WAWebMessageEditUtils").isParentWithinEditProcessingWindow({parentTsInSeconds:a.t,msgKey:a.id})}function u(a){a=d("WAWebStateUtils").unproxy(a);return d("WAWebMsgGetters").getIsSentByMe(a)||d("WAWebMsgGetters").getIsPSA(a)||d("WAWebMsgGetters").getIsBotResponse(a)?!1:d("WAWebIsSpamSupportedForMessageType").isMsgTypeSupportedForMsgLevelReporting(a.type)}function v(a){return d("WATimeUtils").unixTime()-d("WAWebMsgGetters").getT(a)<=d("WAWebRevokeMsgConstants").NEWSLETTER_REVOKE_WINDOW}function w(a){var b=d("WAWebFrontendMsgGetters").getCurrentChat(a);if(!b.isNewsletter){d("WALogger").ERROR(k());return!1}b=(b=b.newsletterMetadata)==null?void 0:b.membershipType;return b!=null&&v(a)&&d("WAWebNewsletterModelUtils").isMembershipAdminOrOwner(b)}function x(a){var b=d("WAWebFrontendMsgGetters").getChat(a);if(!b.isNewsletter)return!1;if(!v(a))return!1;if(b.newsletterMetadata==null){d("WALogger").ERROR(j());return!1}if(b.newsletterMetadata.inviteCode==null){d("WALogger").ERROR(i());return!1}if(a.serverId==null){d("WALogger").ERROR(h());return!1}return a.type===d("WAWebMsgType").MSG_TYPE.REVOKED?!1:d("WAWebNewsletterGatingUtils").isNewsletterMessageLinkEnabled()}function y(a){var b,c=d("WAWebFrontendMsgGetters").getCurrentChat(a);if(c.isGroup&&!((b=c.groupMetadata)==null?void 0:b.participants.iAmMember())||d("WAWebContactGetters").getIsMe(c.contact)||c.contact.isEnterprise)return!1;return d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&!c.isGroup&&(c.contact.isHosted===!0||d("WAWebUserPrefsMultiDevice").getIsHostedMeAccountFromLocalStorage())?!1:d("WAWebMsgGetters").getIsUserCreatedType(a)&&!(a.broadcast!=null&&a.broadcast)&&a.type===d("WAWebMsgType").MSG_TYPE.COMMENT&&a.ack!=null&&a.ack>=d("WAWebAck").ACK.SENT||a instanceof d("WAWebMsgModel").Msg&&!a.isUnsentPhoneMsg()||d("WAWebMsgGetters").getIsEdited(a)&&!d("WAWebFrontendMsgGetters").getIsUnsentMedia(a)&&!d("WAWebChatGroupUtils").isSuspendedGroup(d("WAWebFrontendMsgGetters").getCurrentChat(a))&&!d("WAWebChatGroupUtils").isTerminatedGroup(d("WAWebFrontendMsgGetters").getCurrentChat(a))}function z(a){var b=a;a instanceof d("WAWebMsgModel").Msg&&(b=d("WAWebStateUtils").unproxy(a));a=d("WAWebRevokeMsgConstants").REVOKE_WINDOW;a=d("WATimeUtils").unixTime()-d("WAWebMsgGetters").getT(b)<=a;return y(b)&&b.id.fromMe&&a}function A(a){var b=a;a instanceof d("WAWebMsgModel").Msg&&(b=d("WAWebStateUtils").unproxy(a));a=d("WAWebFrontendMsgGetters").getCurrentChat(b);if(a.isNewsletter)return w(b);var c=d("WATimeUtils").unixTime()-d("WAWebMsgGetters").getT(b)<=d("WAWebRevokeMsgConstants").REVOKE_WINDOW;return y(b)&&!b.id.fromMe&&Boolean((b=a.groupMetadata)==null?void 0:b.participants.iAmAdmin())&&c}function B(a){var b=a;a instanceof d("WAWebMsgModel").Msg&&(b=d("WAWebStateUtils").unproxy(a));a=d("WAWebRevokeMsgConstants").REVOKE_WINDOW;var c=d("WAWebMsgGetters").isMetaBotResponseToMyInvoke(b);a=d("WATimeUtils").unixTime()-d("WAWebMsgGetters").getT(b)<=a;return d("WAWebBotGating").isBotEnabled()&&y(b)&&a&&c}function C(a){var b;a=d("WAWebStateUtils").unproxy(a);if(d("WAWebFrontendMsgGetters").getChat(a).isSuspendedOrTerminated()&&d("WAWebMiscGatingUtils").isGroupSuspendV2Enabled())return!1;if(d("WAWebFrontendMsgGetters").getAsRevoked(a))return!1;if(a.isViewOnce)return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.VCARD||a.type===d("WAWebMsgType").MSG_TYPE.MULTI_VCARD)return!0;if(!((b=a.mediaData)==null?void 0:b.isDownloadable()))return!1;if(a.type===d("WAWebMsgType").MSG_TYPE.STICKER)return!1;return a.type===d("WAWebMsgType").MSG_TYPE.PTV&&!d("WAWebMsgGetters").getIsSentByMe(a)?!1:!0}g.canForwardMsg=l;g.canQuickForwardMsg=a;g.canStarMsg=e;g.canPinMsg=f;g.canReportToAdmin=n;g.displayTypeSupportsEditing=q;g.canEnterEditingFlow=r;g.canEditText=s;g.canEditCaption=t;g.canReportMsg=u;g.isNewsletterMsgOnServer=v;g.canRevokeNewsletterMsg=w;g.canCopyNewsletterMessageLink=x;g.canSenderRevokeMsg=z;g.canAdminRevokeMsg=A;g.canBotResponseBeRevokeByInvoker=B;g.canDownloadMsg=C}),98);
__d("WAWebFtsConstants",[],(function(a,b,c,d,e,f){a=60*1e3;b=300;c=30;f.FTS_TTL=a;f.FTS_TYPING_DELAY=b;f.FTS_NUM_RESULTS=c}),66);
__d("WAWebMsgCollection",["Promise","WALogger","WANullthrows","WAPromiseProps","WATimeUtils","WATypeUtils","WAWebAck","WAWebBackendErrors","WAWebBaseCollection","WAWebBotGenTypingIndicatorMsg","WAWebChatCollection","WAWebCollectionConstants","WAWebEventsWaitForBbEvent","WAWebFrontendMsgGetters","WAWebFtsConstants","WAWebMessageStore","WAWebMsgDataFromModel","WAWebMsgGetters","WAWebMsgModel","WAWebMsgOpaqueData","WAWebMsgType","WAWebNewsletterMsgHistoryUtils","WAWebProcessMultipleMsgsAction","WAWebProductMessageListCollection","WAWebProtobufsE2E.pb","WAWebSyncButtonState","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msg:getContext:before ctx message mismatch"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msg:getContext:before fetch error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msg:getContext:after fetch error"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msg:getContext fetch error"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:media error ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:search error ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:getStarred error ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:getStarred error 499 (unimplemented)"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:findQuery:got:",":",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:findQuery error ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:Msg:findQuery: start ",", ",""]);s=function(){return a};return a}a=50;e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e;e=a.call(this)||this;e.pendingAdd={};e.ftsCache={};e.productListMessagesPrefetchChain=(h||(h=b("Promise"))).resolve([]);e._editKeyByParentKey=new Map();e._parentKeyByEditKey=new Map();e._encryptedData=null;e.findQueryImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var f=babelHelpers.assertThisInitialized(e),g;switch(a.direction){case"before":case"after":g=a.direction;break;default:g="before";break}var i={add:g,isHistory:!0};d("WALogger").DEV(s(),a,g);var j=(yield d("WAWebMessageStore").msgFindQuery(g,a));if(j.status>=400){d("WALogger").WARN(r(),j.status);return(h||(h=b("Promise"))).reject(j.status)}var k=f.get(a);c("WAWebWid").isNewsletter(a.remote)&&k!=null&&(j=(yield d("WAWebNewsletterMsgHistoryUtils").fillMsgHistoryGaps(a.remote,g==="before"?j.concat(d("WAWebMsgDataFromModel").msgDataFromMsgModel(k)):[d("WAWebMsgDataFromModel").msgDataFromMsgModel(k)].concat(j))));k=function(){var c=f.get(a);if(c!=null)return c.msgChunk;c=b("WAWebChatCollection").ChatCollection.get(a.remote);return c!=null?c.msgs:void 0};j.forEach(function(a){a.invis=!0});d("WALogger").LOG(q(),j.length,a.direction);return f.processMultipleMessages(a.remote,j,i,"msgCollectionFindQuery",k)});return function(b){return a.apply(this,arguments)}}();e.listenTo(babelHelpers.assertThisInitialized(e),"remove",e.removeFromCollection);return e}var f=e.prototype;f.removeFromCollection=function(a){var b=d("WAWebFrontendMsgGetters").getMaybeChat(a);b==null?void 0:b.removeFromCollection(a)};f.add=function(b,e){b=Array.isArray(b)?b:[b];b=b.filter(function(a){if(a.ephemeralDuration==null||a.ephemeralDuration===0)return!0;a=new(d("WAWebMsgModel").Msg)(a);return!a.isExpiredAndNotKept()});b=a.prototype.add.call(this,b,e);c("WAWebSyncButtonState")(b);this._prefetchProductListMessages(b);this.processEditedMessages(b);return b};f._prefetchProductListMessages=function(a){var c=b("WAWebProductMessageListCollection").ProductMessageListCollection;this.productListMessagesPrefetchChain=a.filter(function(a){var b;return a!=null&&a.isNewMsg&&a.type===d("WAWebMsgType").MSG_TYPE.LIST&&((b=a.list)==null?void 0:b.listType)===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST&&((b=a.list)==null?void 0:b.productListInfo)!=null}).reduce(function(a,b){var d;if(b==null)return a;var e=b.requiresDirectConnection,f=b.isForwarded?b.businessOwnerJid:b.from.toString({legacy:!0});d=(d=b.list)==null?void 0:d.productListInfo;if(f==null||d==null)return a;var g=c.getOrAdd(b.id,d,e,f,(d=b.list)==null?void 0:d.title);return g!=null&&g.productCollection.getModelsArray().length===0&&!g.isFetching()?a.then(function(){return c.update(g.id)}):a},this.productListMessagesPrefetchChain)};f.getStarred=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){c={count:typeof c==="number"&&!isNaN(c)?c:d("WAWebCollectionConstants").PAGE_SIZE,chat:a?a:void 0,remote:e==null?void 0:e.remote,id:e==null?void 0:e.id,fromMe:e==null?void 0:e.fromMe,participant:e==null?void 0:e.participant};a={add:"search"};e=(yield d("WAWebMessageStore").msgFindQuery("star",c));c=e.status;if(e.status>=400){c===499?d("WALogger").LOG(p()):d("WALogger").WARN(o(),c);return(h||(h=b("Promise"))).reject(c)}return this.processMultipleMessages(void 0,e,a,"msgCollectionGetStarred")});function c(b,c,d){return a.apply(this,arguments)}return c}();f.getMessagesById=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebMessageStore").getMsgsByMsgKey(a));return d("WAPromiseProps").promiseProps({messages:this.processMultipleMessages(void 0,a,{add:"search"},"msgCollectionGetMessagesById"),eof:!0,canceled:!1})});function c(b){return a.apply(this,arguments)}return c}();f.hydrateOrGetMessages=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,e=a.filter(function(a){return!b.get(a)});if(e.length>0){var f=(yield this.getMessagesById(e));f=f.messages;if(f.length!==e.length)throw new(d("WAWebBaseCollection").CollectionSilentQueryError)("No message found for one or more ids")}return a.map(function(a){return c("WANullthrows")(b.get(a))})});function e(b){return a.apply(this,arguments)}return e}();f.queryVcard=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebMessageStore").queryVcard(a));return this.processMultipleMessages(void 0,a,{add:"search"},"msgCollectionQueryVCard")});function c(b){return a.apply(this,arguments)}return c}();f.incrementalStarredUpdate=function(a){return this.processMultipleMessages(void 0,a,{add:"search"},"msgCollectionIncrementalStarredUpdate")};f.search=function(a,b,c,e,f){var g=this;b===void 0&&(b=1);f===void 0&&(f={});var h=a+"__"+(f.label||f.kind&&f.kind||"");if(b===1&&!e){var i=this.ftsCache[h];if(i)return i;i=this._search(a,b,c,e,f.label,f.kind);this.ftsCache[h]=i;var j=function(){g.ftsCache[h]=null};self.setTimeout(j,d("WAWebFtsConstants").FTS_TTL);i["catch"](j);return i}return this._search(a,b,c,e,f.label,f.kind)};f._search=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,i){a={searchTerm:a,page:d("WATypeUtils").isNumber(c)&&c!==0?c:1,count:d("WATypeUtils").isNumber(e)&&e!==0?e:d("WAWebCollectionConstants").PAGE_SIZE,remote:f,tagToCancel:f?this.pendingSearchTag:void 0,label:g,kind:i};c={add:"search"};e=(yield d("WAWebMessageStore").msgFindQuery("search",a));a.tagToCancel===this.pendingSearchTag&&(this.pendingSearchTag=void 0);if(e.status===499)return d("WAPromiseProps").promiseProps({messages:(h||(h=b("Promise"))).resolve([]),eof:!1,canceled:!0});else if(e.status===404)return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E404)());else if(e.status>=400){d("WALogger").WARN(n(),e.status);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(e.status,"failed to find a msg during fts"))}f=Array.isArray(e)?e:e.messages;g=Array.isArray(e)?!0:e.eof;return d("WAPromiseProps").promiseProps({messages:this.processMultipleMessages(void 0,f,c,"msgCollectionSearch"),eof:g,canceled:!1})});function a(b,c,d,e,f,g){return a.apply(this,arguments)}return a}();f.queryMedia=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){a={remote:a,count:d("WATypeUtils").isNumber(c)&&c!==0?c:d("WAWebCollectionConstants").PAGE_SIZE,id:f==null?void 0:f.id,fromMe:f==null?void 0:f.fromMe,participant:f==null?void 0:f.participant,direction:e||"before",media:g};c={add:"search"};f=(yield d("WAWebMessageStore").msgFindQuery("media",a));if(f.status>=400){d("WALogger").WARN(m(),f.status);return f.status===404?(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").E404)()):(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(f.status,"failed to find a msg during media query"))}return!g?d("WAPromiseProps").promiseProps({docCount:f.docCount,linkCount:f.linkCount,mediaCount:f.mediaCount,messages:this.processMultipleMessages(void 0,f.messages,c,"msgCollectionQueryMedia")}):this.processMultipleMessages(void 0,f,{add:"search"},"msgCollectionQueryMedia")});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();f.getContext=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this,g=this.get(a),m=c("WAWebWid").isNewsletter(a.remote);if(g&&!g.fromQuotedMsg)return(h||(h=b("Promise"))).all([d("WAWebMessageStore").msgFindQuery("before",a),d("WAWebMessageStore").msgFindQuery("after",a)]).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var i=c[0];c=c[1];if((!Array.isArray(i)||!Array.isArray(c))&&!m){d("WALogger").WARN(l()).devConsole(i,c);throw i.status||c.status}i=Array.isArray(i)?i:[];c=Array.isArray(c)?c:[];var j=g.serverId;g.search=!1;return(h||(h=b("Promise"))).all([f.processMultipleMessages(a.remote,!m||j==null?i:yield d("WAWebNewsletterMsgHistoryUtils").fillMsgHistoryGaps(a.remote,i.concat(d("WAWebMsgDataFromModel").msgDataFromMsgModel(g)),{start:j-a.count,end:j}),{add:"before",isHistory:!0},"msgCollectionGetContext",e),f.processMultipleMessages(a.remote,!m||j==null?c:yield d("WAWebNewsletterMsgHistoryUtils").fillMsgHistoryGaps(a.remote,[d("WAWebMsgDataFromModel").msgDataFromMsgModel(g)].concat(c),{start:j,end:j+a.count}),{add:"after",isHistory:!0},"msgCollectionGetContext",e)])});return function(a){return c.apply(this,arguments)}}());var n={add:"after",isHistory:!0};return d("WAWebMessageStore").msgFindQuery("after",a).then(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(!Array.isArray(b)){d("WALogger").WARN(k()).devConsole(b);throw b.status}if(c("WAWebWid").isStatusV3(b[0].id.remote))throw c("err")("statusV3, stop querying before the msg");var g=a.serverId;return f.processMultipleMessages(a.remote,!m||g==null?b:yield d("WAWebNewsletterMsgHistoryUtils").fillMsgHistoryGaps(a.remote,b,{start:g,end:g+a.count}),n,"msgCollectionFindQuery",e)});return function(a){return g.apply(this,arguments)}}()).then(function(e){var g=c("WANullthrows")(e[0]),k=g.id.clone();k.count=a.count+1;var l={add:"before",isHistory:!0};return(h||(h=b("Promise"))).all([d("WAWebMessageStore").msgFindQuery("before",k).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(!Array.isArray(b)){d("WALogger").WARN(j()).devConsole(b);throw b.status}var c=b[b.length-1];c.fromQuotedMsg=!1;c=c.id;if(!c.equals(a)){d("WALogger").WARN(i()).devConsole(b);throw 405}c=function(){return g.msgChunk};var e=g.serverId;return f.processMultipleMessages(a.remote,!m||e==null?b:yield d("WAWebNewsletterMsgHistoryUtils").fillMsgHistoryGaps(a.remote,b,{start:e,end:e-a.count}),l,"msgCollectionFindQuery",c)});return function(a){return c.apply(this,arguments)}}()),h.resolve(e)])})});function e(b,c){return a.apply(this,arguments)}return e}();f.hasSynced=function(){return c("WAWebEventsWaitForBbEvent")(this,d("WAWebCollectionConstants").COLLECTION_HAS_SYNCED)};f.processMultipleMessages=function(a,b,c,e,f,g){var h=this;g===void 0&&(g=!0);var i=function(){return d("WAWebProcessMultipleMsgsAction")._processMultipleMessages(a,b,c,e,f)};if(a){var j,k=this.pendingAdd[a];k&&g?j=k.then(i):j=i();j["finally"](function(){a&&h.pendingAdd[a]===j&&(h.pendingAdd[a]=null)})["catch"](function(){});return this.pendingAdd[a]=j}return i()};f.hasUnsentMessages=function(){return this.some(function(a){return a.ack===d("WAWebAck").ACK.CLOCK&&a.local&&d("WAWebMsgGetters").getIsSentByMe(a)})};f.getByEditMsgKey=function(a){a=this._parentKeyByEditKey.get(a.toString());return a&&this.get(a)};f.processEditedMessages=function(a){var b=this;a.forEach(function(a){if(!a||!d("WAWebMsgGetters").getIsEdited(a))return;var c=b._editKeyByParentKey.get(a.id.toString());c!=null&&b._parentKeyByEditKey["delete"](c);c=a.latestEditMsgKey;if(!c)return;b._editKeyByParentKey.set(a.id.toString(),c.toString());b._parentKeyByEditKey.set(c.toString(),a.id)})};f.addInitialBotTypingIndicatorToChat=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e,f=b("WAWebChatCollection").ChatCollection.get(a);if(!f||!(f==null?void 0:f.id.isBot())&&!((e=f.contact.businessProfile)==null?void 0:e.isBizBot3p))return;if(f.botInitialTypingIndicatorMsgId!=null){e=this.get(f.botInitialTypingIndicatorMsgId);if(e==null)return;e==null?void 0:e["delete"]({skipUpdatingSortTime:!0})}f.set({botInitialTypingIndicatorMsgId:c},{silent:!0});e={id:c,t:d("WATimeUtils").unixTime(),from:a,to:d("WAWebUserPrefsMeUser").getMaybeMeUser(),type:"chat",subtype:d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE,body:""};void this.processMultipleMessages(a,[babelHelpers["extends"]({},e,{recvFresh:!0,isNewMsg:!0})],{add:"after",isHistory:!1},"createChatOnNewMsg",null,!0)});function c(b,c){return a.apply(this,arguments)}return c}();f.encryptAndClearModels=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this._models.map(function(a){return d("WAWebMsgOpaqueData").encryptDataInMsgModel(a)});yield (h||(h=b("Promise"))).all(a)});function c(){return a.apply(this,arguments)}return c}();f.decryptAndSetModels=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this._models.map(function(b){return d("WAWebMsgOpaqueData").decryptDataInMsgModel(b,a)});yield (h||(h=b("Promise"))).all(c)});function c(b){return a.apply(this,arguments)}return c}();return e}(d("WAWebBaseCollection").BaseCollection);e.model=d("WAWebMsgModel").Msg;f=new e();g.MEDIA_QUERY_LIMIT=a;g.MsgCollectionImpl=e;g.MsgCollection=f}),98);
__d("WAWebMsgInfoAction",["WAWebAck","WAWebStateUtils","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a,b,e,f){a=d("WAWebStateUtils").unproxy(a);var g=a.id;g=c("WAWebWid").isUser(g.remote);g?h(a,b,e,f):i(a,b,e,f)}function h(a,b,c,e){b===d("WAWebAck").ACK.PLAYED?(a.played.get(c)||(a.playedRemaining-=1),a.played.add({id:c,t:e})):b===d("WAWebAck").ACK.READ?(a.read.get(c)||(a.readRemaining-=1),a.read.add({id:c,t:e})):b===d("WAWebAck").ACK.RECEIVED&&(a.delivery.get(c)||(a.deliveryRemaining-=1),a.delivery.add({id:c,t:e}))}function i(a,b,c,e){var f=d("WAWebAck").ACK.CLOCK;a.played.get(c)?f=d("WAWebAck").ACK.PLAYED:a.read.get(c)?f=d("WAWebAck").ACK.READ:a.delivery.get(c)&&(f=d("WAWebAck").ACK.RECEIVED);if(b<=f)return;if(b>d("WAWebAck").ACK.RECEIVED){f=a.delivery.get(c);f?a.delivery.remove(f):a.deliveryRemaining-=1}if(b>d("WAWebAck").ACK.READ){f=a.read.get(c);f?a.read.remove(f):a.readRemaining-=1}b===d("WAWebAck").ACK.READ&&(a==null?void 0:(f=a.id)==null?void 0:(f=f.remote)==null?void 0:f.isGroup())&&(c==null?void 0:c.isBot())&&(a.readRemaining+=1);b===d("WAWebAck").ACK.PLAYED?(a.played.get(c)||(a.playedRemaining-=1),a.played.add({id:c,t:e})):b===d("WAWebAck").ACK.READ?(a.read.get(c)||(a.readRemaining-=1),a.read.add({id:c,t:e})):b===d("WAWebAck").ACK.RECEIVED&&(a.delivery.get(c)||(a.deliveryRemaining-=1),a.delivery.add({id:c,t:e}))}g.updateMsgInfo=a}),98);
__d("WAWebMsgInfoCollection",["Promise","WALogger","WAWebApiMessageInfoStore","WAWebBaseCollection","WAWebHandleMsgTypes.flow","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgInfoAction","WAWebMsgInfoModel","WAWebMsgKey","WAWebMsgType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryMsgInfos: failed to find msg info in storage"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryMsgInfo: failed to find msg info in storage"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryMsgInfo: got unsupported host storage or actual actors"]);k=function(){return a};return a}function l(a,b){var e=b.read,f=b.played,g=b.delivery,h=b.readRemaining,i=b.playedRemaining,j=b.deliveryRemaining;b=b.deliveryPrivacyMode;a={id:a,read:e.map(function(a){return babelHelpers["extends"]({},a)}),readRemaining:h,played:f.map(function(a){return babelHelpers["extends"]({},a)}),playedRemaining:i,delivery:g.map(function(a){return babelHelpers["extends"]({},a)}),deliveryRemaining:j};if(b!=null){e=d("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(b.hostStorage);h=d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(b.actualActors);if(h==null||e==null){d("WALogger").ERROR(k()).sendLogs("queryMsgInfo-incorrect-enums");throw c("err")("queryMsgInfo: got unsupported host storage or actual actors")}f={hostStorage:e,privacyModeTs:b.privacyModeTs,actualActors:h};a.deliveryPrivacyMode=f}return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var c,e;for(var f=arguments.length,g=new Array(f),k=0;k<f;k++)g[k]=arguments[k];return(c=e=a.call.apply(a,[this].concat(g))||this,e.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebMsgCollection").MsgCollection;c=c.get(a);if(!c)return(h||(h=b("Promise"))).reject(new(d("WAWebBaseCollection").CollectionSilentQueryError)("No message found for id: "+a.toString()));else if(!d("WAWebMsgGetters").getIsSentByMe(c))return(h||(h=b("Promise"))).reject(new(d("WAWebBaseCollection").CollectionSilentQueryError)("message not sent by me"));var e;try{e=(yield d("WAWebApiMessageInfoStore").queryMsgInfo(a))}catch(a){d("WALogger").ERROR(j()).verbose().devConsole(a).sendLogs("queryMsgInfo failed");throw a}a=l(a,e);return babelHelpers["extends"]({},a,{usePlayReceipt:c.type===d("WAWebMsgType").MSG_TYPE.PTT||c.isViewOnce})});return function(b){return a.apply(this,arguments)}}(),e.findManyAndUpdate=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map(),e=[];a.forEach(function(a){var c=b("WAWebMsgCollection").MsgCollection;c=c.get(a);c&&d("WAWebMsgGetters").getIsSentByMe(c)&&e.push(c)});var f;try{f=(yield d("WAWebApiMessageInfoStore").queryMsgInfos(a))}catch(a){d("WALogger").ERROR(i()).verbose().devConsole(a).sendLogs("queryMsgInfos failed");throw a}e.forEach(function(a){var e=a.id,g=f.get(e.toString());if(!g)return(h||(h=b("Promise"))).reject(new(d("WAWebBaseCollection").CollectionSilentQueryError)("query returned no msg info for msg "+e.toString()));g=babelHelpers["extends"]({},l(e,g),{usePlayReceipt:a.type===d("WAWebMsgType").MSG_TYPE.PTT||a.isViewOnce});c.set(e.toString(),g);m.gaddUp(g)});return c});return function(b){return a.apply(this,arguments)}}(),c)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.updateInfo=function(a,b,e,f,g,h){var i=new(c("WAWebMsgKey"))({from:b,to:e,id:a,participant:g});b=new(c("WAWebMsgKey"))({from:b,to:e,id:a});e=this.get(i)||this.get(b);if(e)return d("WAWebMsgInfoAction").updateMsgInfo(e,f,g,h)};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgInfoModel").MsgInfo;a.staleCollection=!0;var m=new a();g.MsgInfoCollectionImpl=a;g.MsgInfoCollection=m}),98);
__d("WAWebMsgInfoGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createMsgInfosCache});b=a.field;c=a.clearCacheFor;e=c;f=b("playedRemaining");d=b("readRemaining");a=b("deliveryRemaining");g.clearMsgInfoGetterCacheFor=e;g.getPlayedRemaining=f;g.getReadRemaining=d;g.getDeliveryRemaining=a}),98);
__d("WAWebMsgInfoModel",["WAWebBaseModel","WAWebCollection","WAWebContactCollection","WAWebContactComparator","WAWebMsgInfoCollection","WAWebMsgInfoGetters","WAWebMsgKey","WAWebWid"],(function(a,b,c,d,e,f,g){e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.contact=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this),this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd(this.id))};return b}((a=d("WAWebBaseModel")).BaseModel);e.Proxy="msgInfoParticipant";e.idClass=c("WAWebWid");f=a.defineModel(e);var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(c("WAWebCollection"));h.model=f;h.comparator=function(a,b){return d("WAWebContactComparator").ContactComparator(a.contact,b.contact)};e=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.usePlayReceipt=d("WAWebBaseModel").prop(),c.playedRemaining=d("WAWebBaseModel").prop(0),c.readRemaining=d("WAWebBaseModel").prop(0),c.deliveryRemaining=d("WAWebBaseModel").prop(0),c.deliveryPrivacyMode=d("WAWebBaseModel").prop(),c.played=d("WAWebBaseModel").collection(h),c.read=d("WAWebBaseModel").collection(h),c.delivery=d("WAWebBaseModel").collection(h),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebMsgInfoCollection").MsgInfoCollection};e["delete"]=function(){a.prototype["delete"].call(this),d("WAWebMsgInfoGetters").clearMsgInfoGetterCacheFor(this)};return c}(a.BaseModel);e.Proxy="msgInfo";e.idClass=c("WAWebMsgKey");c=a.defineModel(e);g.MsgInfoParticipant=f;g.ParticipantCollection=h;g.MsgInfo=c}),98);
__d("WAWebMsgLinks",["WAUnicodeUtils","WAWebFrontendMsgGetters","WAWebLinkify","WAWebMsgGetters","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebStateUtils","lodash"],(function(a,b,c,d,e,f,g){function h(a){var b=a.content,c=a.sender,e=a.cachedValue;e=e===void 0?[]:e;var f=a.currentIndex;f=f===void 0?0:f;a=a.endIndex;a=a===void 0?Infinity:a;if(f>=a)return[e,a];f=d("WAUnicodeUtils").firstNCodepoints(b,a);e=!1;var g=d("WAWebLinkify").findLinks(f,e,c);if(d("WAUnicodeUtils").numCodepoints(b)>a&&g.length>0){var h=g[g.length-1];f=d("WAUnicodeUtils").numCodepoints(f.slice(0,h.index));f=f+d("WAUnicodeUtils").numCodepoints(h.url);f===a&&(g=d("WAWebLinkify").findLinks(b,e,c))}return[g,a]}function i(a,b){a=d("WAWebStateUtils").unproxy(a);b=(b=b)!=null?b:a.linksIndexParsed?a.linksIndexParsed:d("WAWebMsgGetters").getInitialPageSize(a)+1;var c=d("WAWebFrontendMsgGetters").getText(a);if(c==null||a.linksIndexParsed===Infinity)return a.getRawLinks();c=h({content:c,sender:d("WAWebMsgGetters").getSender(a),cachedValue:a.getRawLinks(),currentIndex:a.linksIndexParsed,endIndex:b});b=c[0];c=c[1];a.linksIndexParsed=c;a.setRawLinks(b);return b}function a(a,b){var c=d("WAWebStateUtils").unproxy(a);if(c.pollOptions==null)return null;if(c.getRawPollOptionsToLinks()==null){a=new Map((a=c.pollOptions)==null?void 0:a.map(function(a){var b=h({content:a.name,sender:d("WAWebMsgGetters").getSender(c)});b=b[0];return[a,b]}));c.setRawPollOptionsToLinks(a)}return(a=c.getRawPollOptionsToLinks())==null?void 0:a.get(b)}function j(a,b){if(b){return a.type==="list"&&((b=a.list)==null?void 0:b.listType)===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.SINGLE_SELECT&&((b=a.list)==null?void 0:b.title)!=null}return a.isDynamicReplyButtonsMsg===!0&&a.title!=null}function k(a,b){if(a.getRawHeaderLinks().length>0)return a.getRawHeaderLinks();b=h({content:b,sender:d("WAWebMsgGetters").getSender(a),cachedValue:a.getRawHeaderLinks()});b=b[0];b.length>0&&a.setRawHeaderLinks(b);return b}function b(a){a=d("WAWebStateUtils").unproxy(a);if(j(a,!0)){var b;return k(a,((b=a.list)==null?void 0:b.title)||"")}else if(j(a,!1))return k(a,a.title);else if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&((b=a.interactiveHeader)==null?void 0:b.title)!=null)return k(a,a.interactiveHeader.title);return[]}function e(a){a=d("WAWebStateUtils").unproxy(a);var b=a.footer;if(!d("WAWebMsgGetters").getSupportsMessageFooterLinks(a)||b==null)return[];if(a.getRawFooterLinks().length>0)return a.getRawFooterLinks();b=h({content:b,sender:d("WAWebMsgGetters").getSender(a),cachedValue:a.getRawFooterLinks()});b=b[0];b.length>0&&a.setRawFooterLinks(b);return b}function f(a){a=d("WAWebStateUtils").unproxy(a);return c("lodash").uniqBy(i(a),"href").filter(function(a){return a.isHttp})}function l(a){a=d("WAWebStateUtils").unproxy(a);return i(a).filter(function(a){return(a=a.suspiciousCharacters)==null?void 0:a.size})}g.getLinksFromMsg=i;g.getPollOptionLinks=a;g.shouldDisplayHeaderLinks=j;g.getHeaderLinks=b;g.getFooterLinks=e;g.getGalleryLinks=f;g.getSuspiciousLinks=l}),98);
__d("WAWebSuspendedGroupMediaDownloadFailureModal.react",["fbt","WAWebConfirmPopup.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){var a=function(){return d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:a,title:h._("__JHASH__OxCXkOLtmHs__JHASH__"),children:h._("__JHASH__6_Sr87F7HLx__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebMsgModel",["Promise","WALogger","WAPromiseQueue","WAStorageEstimator","WATimeUtils","WATypeUtils","WAWebAck","WAWebApiContact","WAWebBaseModel","WAWebBizLabelUtils","WAWebBotGating","WAWebBotGenTypingIndicatorMsg","WAWebBotTypes","WAWebBusinessProfileTypes","WAWebCarouselCardsCollection","WAWebChangePresenceHandlerAction","WAWebChatCollection","WAWebChatContactUtils","WAWebChatGetMessage","WAWebChatGroupUtils","WAWebCmd","WAWebCommonMsgUtils","WAWebConnModel","WAWebConstantsDeprecated","WAWebContactCollection","WAWebDBUpdateMessageTable","WAWebDirectConnectionGatingUtils","WAWebEphemeralKeepInChatAbpropUtils","WAWebEphemeralityTypes","WAWebEventsWaitForBbEvent","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebLabelCollection","WAWebMedia","WAWebMediaData","WAWebMediaTypes","WAWebMiscGatingUtils","WAWebModalManager","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModelPropUtils","WAWebMsgModelUtils","WAWebMsgType","WAWebMuteCollection","WAWebNewsletterCollection","WAWebNewsletterSendMsgAction","WAWebPinInChatCollection","WAWebPnhGatingUtils","WAWebSendMessageEditAction","WAWebSendMsgRecordAction","WAWebStarredMsgCollection","WAWebSuspendedGroupMediaDownloadFailureModal.react","WAWebUserPrefsMeUser","WAWebVcardParsingUtils","WAWebViewOnceState","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumWebcRmrReasonCode","WAWebWamMsgUtils","WAWebWid","WAWebWidFactory","WAWebWidFormat","asyncToGeneratorRuntime","err","fbs","gkx","lodash","react"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error = ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updated "," from "," to ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["id: "," type: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeUpload called while state was ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid timestamp value in msg, raw ts value: ",", msgId: ",", msgType: ","_",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["msg:msg with no sender id:",", from:",", author:",", type:",""]);o=function(){return a};return a}var p=i||c("react");a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.rowId=d("WAWebBaseModel").prop(),e.serverId=d("WAWebBaseModel").prop(),e.viewCount=d("WAWebBaseModel").prop(),e.viewed=d("WAWebBaseModel").prop(!1),e.body=d("WAWebBaseModel").prop(),e.type=d("WAWebBaseModel").prop(),e.subtype=d("WAWebBaseModel").prop(),e.t=d("WAWebBaseModel").prop(),e.revokeTimestamp=d("WAWebBaseModel").prop(),e.notifyName=d("WAWebBaseModel").prop(),e.from=d("WAWebBaseModel").prop(),e.to=d("WAWebBaseModel").prop(),e.author=d("WAWebBaseModel").prop(),e.ack=d("WAWebBaseModel").prop(),e.invis=d("WAWebBaseModel").prop(),e.isNewMsg=d("WAWebBaseModel").prop(),e.star=d("WAWebBaseModel").prop(!1),e.kicKey=d("WAWebBaseModel").prop(),e.kicState=d("WAWebBaseModel").prop(),e.kicTimestampMs=d("WAWebBaseModel").prop(),e.kicNotified=d("WAWebBaseModel").prop(!1),e.keepType=d("WAWebBaseModel").prop(),e.keptMessageKey=d("WAWebBaseModel").prop(),e.keptCount=d("WAWebBaseModel").prop(),e.recvFresh=d("WAWebBaseModel").prop(),e.caption=d("WAWebBaseModel").prop(),e.interactiveAnnotations=d("WAWebBaseModel").prop(),e.contextInfo=d("WAWebBaseModel").prop(),e.clientUrl=d("WAWebBaseModel").prop(),e.loc=d("WAWebBaseModel").prop(),e.lat=d("WAWebBaseModel").prop(),e.lng=d("WAWebBaseModel").prop(),e.isLive=d("WAWebBaseModel").prop(),e.accuracy=d("WAWebBaseModel").prop(),e.speed=d("WAWebBaseModel").prop(),e.degrees=d("WAWebBaseModel").prop(),e.comment=d("WAWebBaseModel").prop(),e.sequence=d("WAWebBaseModel").prop(),e.shareDuration=d("WAWebBaseModel").prop(),e.finalLat=d("WAWebBaseModel").prop(),e.finalLng=d("WAWebBaseModel").prop(),e.finalAccuracy=d("WAWebBaseModel").prop(),e.finalThumbnail=d("WAWebBaseModel").prop(),e.finalSpeed=d("WAWebBaseModel").prop(),e.finalDegrees=d("WAWebBaseModel").prop(),e.finalTimeOffset=d("WAWebBaseModel").prop(),e.deprecatedMms3Url=d("WAWebBaseModel").prop(),e.directPath=d("WAWebBaseModel").prop(),e.mimetype=d("WAWebBaseModel").prop(),e.duration=d("WAWebBaseModel").prop(),e.filehash=d("WAWebBaseModel").prop(),e.encFilehash=d("WAWebBaseModel").prop(),e.size=d("WAWebBaseModel").prop(),e.filename=d("WAWebBaseModel").prop(),e.streamingSidecar=d("WAWebBaseModel").prop(),e.mediaKey=d("WAWebBaseModel").prop(),e.mediaKeyTimestamp=d("WAWebBaseModel").prop(),e.pageCount=d("WAWebBaseModel").prop(),e.isGif=d("WAWebBaseModel").prop(),e.gifAttribution=d("WAWebBaseModel").prop(),e.isViewOnce=d("WAWebBaseModel").prop(),e.streamable=d("WAWebBaseModel").prop(),e.width=d("WAWebBaseModel").prop(),e.height=d("WAWebBaseModel").prop(),e.thumbnailDirectPath=d("WAWebBaseModel").prop(),e.thumbnailSha256=d("WAWebBaseModel").prop(),e.thumbnailEncSha256=d("WAWebBaseModel").prop(),e.thumbnailHeight=d("WAWebBaseModel").prop(),e.thumbnailWidth=d("WAWebBaseModel").prop(),e.waveform=d("WAWebBaseModel").prop(),e.staticUrl=d("WAWebBaseModel").prop(),e.stickerPackId=d("WAWebBaseModel").prop(),e.stickerPackName=d("WAWebBaseModel").prop(),e.stickerPackPublisher=d("WAWebBaseModel").prop(),e.mediaHandle=d("WAWebBaseModel").prop(),e.scanLengths=d("WAWebBaseModel").prop(),e.scansSidecar=d("WAWebBaseModel").prop(),e.isFromTemplate=d("WAWebBaseModel").prop(!1),e.devicesAdded=d("WAWebBaseModel").prop(),e.devicesRemoved=d("WAWebBaseModel").prop(),e.isThisDeviceAdded=d("WAWebBaseModel").prop(),e.firstFrameLength=d("WAWebBaseModel").prop(),e.firstFrameSidecar=d("WAWebBaseModel").prop(),e.isAnimated=d("WAWebBaseModel").prop(),e.isLottie=d("WAWebBaseModel").prop(),e.canonicalUrl=d("WAWebBaseModel").prop(),e.matchedText=d("WAWebBaseModel").prop(),e.thumbnail=d("WAWebBaseModel").prop(),e.thumbnailHQ=d("WAWebBaseModel").prop(),e.richPreviewType=d("WAWebBaseModel").prop(),e.doNotPlayInline=d("WAWebBaseModel").prop(),e.rcat=d("WAWebBaseModel").prop(),e.title=d("WAWebBaseModel").prop(),e.description=d("WAWebBaseModel").prop(),e.businessOwnerJid=d("WAWebBaseModel").prop(),e.productId=d("WAWebBaseModel").prop(),e.currencyCode=d("WAWebBaseModel").prop(),e.priceAmount1000=d("WAWebBaseModel").prop(),e.salePriceAmount1000=d("WAWebBaseModel").prop(),e.retailerId=d("WAWebBaseModel").prop(),e.url=d("WAWebBaseModel").prop(),e.productImageCount=d("WAWebBaseModel").prop(),e.sessionId=d("WAWebBaseModel").prop(),e.pollName=d("WAWebBaseModel").prop(),e.pollOptions=d("WAWebBaseModel").prop(),e.pollSelectableOptionsCount=d("WAWebBaseModel").prop(),e.pollInvalidated=d("WAWebBaseModel").prop(!1),e.isSentCagPollCreation=d("WAWebBaseModel").prop(!1),e.pollUpdateParentKey=d("WAWebBaseModel").prop(),e.encPollVote=d("WAWebBaseModel").prop(),e.selectedOptionLocalIds=d("WAWebBaseModel").prop(),e.senderTimestampMs=d("WAWebBaseModel").prop(),e.latestEditMsgKey=d("WAWebBaseModel").prop(null),e.latestEditSenderTimestampMs=d("WAWebBaseModel").prop(null),e.editMsgType=d("WAWebBaseModel").prop(),e.recipients=d("WAWebBaseModel").prop(),e.broadcast=d("WAWebBaseModel").prop(),e.quotedMsg=d("WAWebBaseModel").prop(),e.quotedStanzaID=d("WAWebBaseModel").prop(),e.quotedRemoteJid=d("WAWebBaseModel").prop(),e.quotedParticipant=d("WAWebBaseModel").prop(),e.quotedGroupSubject=d("WAWebBaseModel").prop(),e.quotedParentGroupJid=d("WAWebBaseModel").prop(),e.mentionedJidList=d("WAWebBaseModel").prop(),e.reporterJidList=d("WAWebBaseModel").prop(),e.groupMentions=d("WAWebBaseModel").prop(),e.footer=d("WAWebBaseModel").prop(),e.hydratedButtons=d("WAWebBaseModel").prop(),e.buttons=d("WAWebBaseModel").session(),e.hsmTag=d("WAWebBaseModel").prop(),e.hsmCategory=d("WAWebBaseModel").prop(),e.templateId=d("WAWebBaseModel").prop(),e.eventName=d("WAWebBaseModel").prop(),e.isEventCanceled=d("WAWebBaseModel").prop(!1),e.eventDescription=d("WAWebBaseModel").prop(),e.eventJoinLink=d("WAWebBaseModel").prop(),e.eventStartTime=d("WAWebBaseModel").prop(),e.eventLocation=d("WAWebBaseModel").prop(),e.eventInvalidated=d("WAWebBaseModel").prop(!1),e.selectedId=d("WAWebBaseModel").prop(),e.selectedIndex=d("WAWebBaseModel").prop(),e.selectedCarouselCardIndex=d("WAWebBaseModel").prop(),e.multicast=d("WAWebBaseModel").prop(),e.urlText=d("WAWebBaseModel").prop(),e.urlNumber=d("WAWebBaseModel").prop(),e.clearMedia=d("WAWebBaseModel").prop(),e.isVcardOverMmsDocument=d("WAWebBaseModel").prop(!1),e.isCaptionByUser=d("WAWebBaseModel").prop(),e.vcardList=d("WAWebBaseModel").prop(),e.vcardFormattedName=d("WAWebBaseModel").prop(),e.revokeSender=d("WAWebBaseModel").prop(),e.protocolMessageKey=d("WAWebBaseModel").prop(),e.futureproofBuffer=d("WAWebBaseModel").prop(),e.futureproofParams=d("WAWebBaseModel").prop(),e.futureproofType=d("WAWebBaseModel").prop(),e.futureproofSubtype=d("WAWebBaseModel").prop(),e.templateParams=d("WAWebBaseModel").prop(),e.textColor=d("WAWebBaseModel").prop(),e.backgroundColor=d("WAWebBaseModel").prop(),e.font=d("WAWebBaseModel").prop(),e.campaignId=d("WAWebBaseModel").prop(),e.campaignDuration=d("WAWebBaseModel").prop(),e.actionLink=d("WAWebBaseModel").prop(),e.statusPSAReadTimestamp=d("WAWebBaseModel").prop(),e.isForwarded=d("WAWebBaseModel").prop(!1),e.forwardingScore=d("WAWebBaseModel").prop(),e.labels=d("WAWebBaseModel").prop(),e.hasReaction=d("WAWebBaseModel").prop(!1),e.paymentCurrency=d("WAWebBaseModel").prop(),e.paymentAmount1000=d("WAWebBaseModel").prop(),e.paymentMessageReceiverJid=d("WAWebBaseModel").prop(),e.paymentTransactionTimestamp=d("WAWebBaseModel").prop(),e.paymentStatus=d("WAWebBaseModel").prop(),e.paymentTxnStatus=d("WAWebBaseModel").prop(),e.paymentNoteMsg=d("WAWebBaseModel").prop(),e.paymentRequestMessageKey=d("WAWebBaseModel").prop(),e.paymentExpiryTimestamp=d("WAWebBaseModel").prop(),e.paymentInviteServiceType=d("WAWebBaseModel").prop(),e.paymentBackground=d("WAWebBaseModel").prop(),e.ephemeralDuration=d("WAWebBaseModel").prop(),e.ephemeralSettingTimestamp=d("WAWebBaseModel").prop(),e.ephemeralOutOfSync=d("WAWebBaseModel").prop(),e.ephemeralSharedSecret=d("WAWebBaseModel").prop(),e.disappearingModeInitiator=d("WAWebBaseModel").prop(),e.ephemeralSettingUser=d("WAWebBaseModel").prop(),e.disappearingModeTrigger=d("WAWebBaseModel").prop(),e.disappearingModeInitiatedByMe=d("WAWebBaseModel").prop(),e.messageSecret=d("WAWebBaseModel").prop(),e.originalSelfAuthor=d("WAWebBaseModel").prop(),e.bizPrivacyStatus=d("WAWebBaseModel").prop(),e.privacyModeWhenSent=d("WAWebBaseModel").prop(),e.verifiedBizName=d("WAWebBaseModel").prop(),e.inviteCode=d("WAWebBaseModel").prop(),e.inviteCodeExp=d("WAWebBaseModel").prop(),e.inviteGrp=d("WAWebBaseModel").prop(),e.inviteGrpName=d("WAWebBaseModel").prop(),e.inviteGrpJpegThum=d("WAWebBaseModel").prop(),e.inviteGrpType=d("WAWebBaseModel").prop(),e.sellerJid=d("WAWebBaseModel").prop(),e.message=d("WAWebBaseModel").prop(),e.orderTitle=d("WAWebBaseModel").prop(),e.itemCount=d("WAWebBaseModel").prop(),e.orderId=d("WAWebBaseModel").prop(),e.surface=d("WAWebBaseModel").prop(),e.status=d("WAWebBaseModel").prop(),e.token=d("WAWebBaseModel").prop(),e.totalAmount1000=d("WAWebBaseModel").prop(),e.totalCurrencyCode=d("WAWebBaseModel").prop(),e.historySyncMetaData=d("WAWebBaseModel").prop(),e.isSendFailure=d("WAWebBaseModel").prop(),e.errorCode=d("WAWebBaseModel").prop(),e.appStateSyncKeyShare=d("WAWebBaseModel").prop(),e.appStateSyncKeyRequest=d("WAWebBaseModel").prop(),e.appStateFatalExceptionNotification=d("WAWebBaseModel").prop(),e.peerDataOperationRequestMessage=d("WAWebBaseModel").prop(),e.peerDataOperationRequestResponseMessage=d("WAWebBaseModel").prop(),e.broadcastParticipants=d("WAWebBaseModel").prop(),e.broadcastEphSettings=d("WAWebBaseModel").prop(),e.broadcastId=d("WAWebBaseModel").prop(),e.smbClientCampaignId=d("WAWebBaseModel").prop(),e.ctwaContext=d("WAWebBaseModel").prop(),e.utm=d("WAWebBaseModel").session(),e.list=d("WAWebBaseModel").prop(),e.listResponse=d("WAWebBaseModel").prop(),e.productListItemCount=d("WAWebBaseModel").prop(),e.productHeaderImageRejected=d("WAWebBaseModel").prop(!1),e.agentId=d("WAWebBaseModel").prop(),e.lastPlaybackProgress=d("WAWebBaseModel").prop(0),e.local=d("WAWebBaseModel").session(!1),e.search=d("WAWebBaseModel").session(),e.msgChunk=d("WAWebBaseModel").session(),e.startOfDay=d("WAWebBaseModel").session(),e.startOfDaySkew=d("WAWebBaseModel").session(),e.quotedMsgKey=d("WAWebBaseModel").session(),e.isQuotedMsgAvailable=d("WAWebBaseModel").session(!0),e.fromQuotedMsg=d("WAWebBaseModel").session(!1),e.senderObj=d("WAWebBaseModel").session(),e.mediaData=d("WAWebBaseModel").session(),e.forwardedFromWeb=d("WAWebBaseModel").session(!1),e.nonce=d("WAWebBaseModel").session(),e.squelch=d("WAWebBaseModel").session(),e.wamMessageSendReporter=d("WAWebBaseModel").session(),e.wamMessageSendPerfReporter=d("WAWebBaseModel").session(),e.pendingDeleteForMe=d("WAWebBaseModel").session(!1),e.isDynamicReplyButtonsMsg=d("WAWebBaseModel").prop(!1),e.dynamicReplyButtons=d("WAWebBaseModel").prop(),e.replyButtons=d("WAWebBaseModel").session(),e.buttonsResponse=d("WAWebBaseModel").prop(),e.selectedButtonId=d("WAWebBaseModel").prop(),e.headerType=d("WAWebBaseModel").prop(),e.nativeFlowName=d("WAWebBaseModel").prop(),e.nativeFlowButtons=d("WAWebBaseModel").prop(),e.interactiveHeader=d("WAWebBaseModel").prop(),e.interactiveType=d("WAWebBaseModel").prop(),e.interactivePayload=d("WAWebBaseModel").prop(),e.carouselCardsParsed=d("WAWebBaseModel").prop(),e.carouselCards=d("WAWebBaseModel").session(),e.isCarouselCard=d("WAWebBaseModel").prop(!1),e.parentMsgId=d("WAWebBaseModel").prop(null),e.reactionParentKey=d("WAWebBaseModel").prop(),e.reactionText=d("WAWebBaseModel").prop(),e.reactionTimestamp=d("WAWebBaseModel").prop(),e.targetMessageKey=d("WAWebBaseModel").prop(),e.encIv=d("WAWebBaseModel").prop(),e.encPayload=d("WAWebBaseModel").prop(),e.replyCount=d("WAWebBaseModel").prop(),e.pinParentKey=d("WAWebBaseModel").prop(),e.pinMessageType=d("WAWebBaseModel").prop(),e.pinSenderTimestampMs=d("WAWebBaseModel").prop(),e.pinExpiryDuration=d("WAWebBaseModel").prop(),e.revokeDuration=d("WAWebBaseModel").session(),e.isMdHistoryMsg=d("WAWebBaseModel").prop(!1),e.stickerSentTs=d("WAWebBaseModel").prop(0),e.isAvatar=d("WAWebBaseModel").prop(!1),e.bizSource=d("WAWebBaseModel").prop(),e.pmCampaignId=d("WAWebBaseModel").prop(),e.lastUpdateFromServerTs=d("WAWebBaseModel").prop(0),e.botEditType=d("WAWebBaseModel").prop(),e.invokedBotWid=d("WAWebBaseModel").prop(null),e.botMessageSecret=d("WAWebBaseModel").prop(),e.botFeedbackKind=d("WAWebBaseModel").prop(),e.botFeedbackText=d("WAWebBaseModel").prop(),e.botTargetSenderJid=d("WAWebBaseModel").prop(),e.bizBotType=d("WAWebBaseModel").prop(null),e.botPersonaId=d("WAWebBaseModel").prop(),e.activeBotMsgStreamingInProgress=d("WAWebBaseModel").session(!1),e.botEditTimeoutID=d("WAWebBaseModel").session(),e.lastBotEditBodyLength=d("WAWebBaseModel").session(),e.botEditTargetId=d("WAWebBaseModel").session(),e.botRespOrInvocationRevokeBotWid=d("WAWebBaseModel").session(null),e.botResponseTargetId=d("WAWebBaseModel").prop(null),e.botPluginType=d("WAWebBaseModel").prop(null),e.botPluginReferenceIndex=d("WAWebBaseModel").prop(null),e.botPluginSearchProvider=d("WAWebBaseModel").prop(null),e.botPluginSearchUrl=d("WAWebBaseModel").prop(null),e.botPluginMaybeParent=d("WAWebBaseModel").prop(!1),e.botReelPluginThumbnailCdnUrl=d("WAWebBaseModel").prop(null),e.botMsgBodyType=d("WAWebBaseModel").prop(null),e.forwardedNewsletterMessageInfo=d("WAWebBaseModel").prop(),e.encryptedData=d("WAWebBaseModel").prop(),e.newsletterAdminInviteInfo=d("WAWebBaseModel").prop(),e.reportingTokenInfo=d("WAWebBaseModel").prop(),e._links=d("WAWebBaseModel").session(function(){return[]}),e._headerLinks=d("WAWebBaseModel").session(function(){return[]}),e._footerLinks=d("WAWebBaseModel").session(function(){return[]}),e.linksIndexParsed=d("WAWebBaseModel").session(0),e._pollOptionsToLinks=d("WAWebBaseModel").session(),e._phoneNumbers=d("WAWebBaseModel").session(function(){return[]}),e._headerPhoneNumbers=d("WAWebBaseModel").session(function(){return[]}),e._footerPhoneNumbers=d("WAWebBaseModel").session(function(){return[]}),e.phoneNumbersIndexParsed=d("WAWebBaseModel").session(0),e._waitForPhoneUploadPromise=d("WAWebBaseModel").session(),e.requiresDirectConnection=d("WAWebBaseModel").prop(null),e.isOverwrittenByRevoke=d("WAWebBaseModel").session(!1),e.bizContentPlaceholderType=d("WAWebBaseModel").prop(null),e.hostedBizEncStateMismatch=d("WAWebBaseModel").prop(!1),e.senderOrRecipientAccountTypeHosted=d("WAWebBaseModel").prop(!1),e.placeholderCreatedWhenAccountIsHosted=d("WAWebBaseModel").prop(!1),e._saveLastPlaybackProgress=c("lodash").debounce(function(a,b){d("WAWebDBUpdateMessageTable").updateMessageTable(a,{lastPlaybackProgress:b})},500),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.initialize=function(){var b=this;a.prototype.initialize.call(this);this.carouselCardsParsed!=null&&this._initCarouselCards();this.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&this.listenTo(this,"change:carouselCardsParsed",this._initCarouselCards);this._pendingAckUpdate=new(d("WAPromiseQueue").PromiseQueue)();var e=d("WAWebMsgGetters").getSender(this);if(e)this.addChild("senderObj",d("WAWebContactCollection").ContactCollection.gadd(e));else switch(this.type){case d("WAWebMsgType").MSG_TYPE.NOTIFICATION:case d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE:case d("WAWebMsgType").MSG_TYPE.GP2:case d("WAWebMsgType").MSG_TYPE.BROADCAST_NOTIFICATION:case d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION:case d("WAWebMsgType").MSG_TYPE.CALL_LOG:case d("WAWebMsgType").MSG_TYPE.PROTOCOL:break;default:d("WALogger").LOG(o(),this.id.toString(),this.from.toString(),this.author&&this.author.toString(),this.type);break}this.mentionedJidList=this.mentionedJidList||[];this.groupMentions=this.groupMentions||[];this.mentionedJidList.forEach(function(a){return d("WAWebContactCollection").ContactCollection.gadd(a)});this.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT&&this.listenToOnce(this,"change:type",this._handleCiphertextDecrypted);this.mediaObject=void 0;d("WAWebMsgModelUtils").typeIsMms(this)&&(this._createMediaDataChild(),(!this.isViewOnce||d("WAWebViewOnceState").isUnviewed(this.safe()))&&d("WAWebMedia").registerMsg(this));d("WAWebConnModel").Conn.isSMB&&d("WAWebBizLabelUtils").initializeLabels(this);this.isViewOnce&&(this.listenTo(this,"change:ack",this._handleViewOnceMediaStatusChanged),this.listenTo(this.mediaData,"change:mediaStage",this._handleViewOnceMediaStatusChanged));c("gkx")("26258")||this.listenTo(this,"change:t",function(){Number.isInteger(b.t)||d("WALogger").ERROR(n(),b.t,b.id.toString(),b.type,b.subtype).tags("date_marker").sendLogs("Msg TS updated to invalid value")});if(d("WAWebBotGating").isBotReceiveEnabled()){d("WAWebMsgGetters").getIsMetaBotResponse(this)&&this.listenTo(this,"change:botEditType",this._handleBotTypingIndicatorTimeout);this.recvFresh&&((e=this.senderObj)==null?void 0:(e=e.id)==null?void 0:e.isBot())&&(this.activeBotMsgStreamingInProgress=!0);this._handleBotTypingIndicatorTimeout()}};f._initCarouselCards=function(){var a,c=this.carouselCardsParsed;if(c==null)return;var d=b("WAWebCarouselCardsCollection");a=(a=(a=this.carouselCards)==null?void 0:a.getCardsById())!=null?a:{};var e=[];for(c of c){var f=c.id.toString();if(a[f]!=null){f=a[f];f.set(c);e.push(f)}else{f=babelHelpers["extends"]({},c);e.push(f)}}f=new d();f.add(e);this.carouselCards=f;this.getCollection().add(f.slice())};f._handleBotTypingIndicatorTimeout=function(){var a=this;if(!d("WAWebBotGating").isBotReceiveEnabled())return;if(this.subtype===d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE){var b=d("WAWebBotGenTypingIndicatorMsg").getBotTypingIndicatorTimeout();self.setTimeout(function(){a["delete"]()},b);void c("WAWebChangePresenceHandlerAction")({id:this.id.remote,type:"typing"});return}b=this.botEditType;if(b==null)return;var e=d("WAWebBotGenTypingIndicatorMsg").getBotTypingIndicatorTimeout();switch(b){case d("WAWebBotTypes").BotMsgEditType.LAST:case d("WAWebBotTypes").BotMsgEditType.FULL:this.activeBotMsgStreamingInProgress=!1;this.botEditTimeoutID&&self.clearTimeout(this.botEditTimeoutID);return;default:this.botEditTimeoutID=self.setTimeout(function(){a.activeBotMsgStreamingInProgress=!1,a.botEditType=d("WAWebBotTypes").BotMsgEditType.LAST,void d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,{botEditType:d("WAWebBotTypes").BotMsgEditType.LAST})},e)}};f.getRawLinks=function(){return this._links};f.setRawLinks=function(a){a.length>0&&(this._links=a)};f.clearRawLinks=function(){this._links=[],this.linksIndexParsed=0};f.getRawPollOptionsToLinks=function(){return this._pollOptionsToLinks};f.setRawPollOptionsToLinks=function(a){this._pollOptionsToLinks=a};f.getRawHeaderLinks=function(){return this._headerLinks};f.setRawHeaderLinks=function(a){a.length>0&&(this._headerLinks=a)};f.getRawFooterLinks=function(){return this._footerLinks};f.setRawFooterLinks=function(a){a.length>0&&(this._footerLinks=a)};f.getRawPhoneNumbers=function(){return this._phoneNumbers};f.setRawPhoneNumbers=function(a){a.length>0&&(this._phoneNumbers=a)};f.clearRawPhoneNumbers=function(){this._phoneNumbers=[],this.phoneNumbersIndexParsed=0};f.getRawHeaderPhoneNumbers=function(){return this._headerPhoneNumbers};f.setRawHeaderPhoneNumbers=function(a){a.length>0&&(this._headerPhoneNumbers=a)};f.getRawFooterPhoneNumbers=function(){return this._footerPhoneNumbers};f.setRawFooterPhoneNumbers=function(a){a.length>0&&(this._footerPhoneNumbers=a)};f._createMediaDataChild=function(){this.addChild("mediaData",new(c("WAWebMediaData"))())};f.mayFail=function(){return d("WAWebMsgGetters").getIsSentByMe(this)&&this.ack<d("WAWebAck").ACK.SENT};f.isUnsentPhoneMsg=function(){return!this.local&&d("WAWebMsgGetters").getIsSentByMe(this)&&this.ack<d("WAWebAck").ACK.SENT};f.supportsStarWithKeepInChat=function(){return d("WAWebMsgGetters").getIsEphemeral(this)&&(this.star||this.isGif||d("WAWebMsgGetters").getIsStickerMsg(this))};f.interactiveButtonsReleased=function(){return this.isFromTemplate||!d("WAWebFrontendMsgGetters").getHasTemplateButtons(this)&&this.type!==d("WAWebMsgType").MSG_TYPE.TEMPLATE_BUTTON_REPLY};f.getVcardWids=function(){return this.type!==d("WAWebMsgType").MSG_TYPE.VCARD?null:d("WAWebVcardParsingUtils").vcardWids(d("WAWebMsgGetters").getVcard(this))};f.getLocObject=function(){var a=this.loc;if(a){a=a.split("\n");var b=a[0];a=a[1];a=a===void 0?null:a;return{name:b,addr:a}}return null};f.resumeRemoteUpload=function(){if(d("WAWebMsgGetters").getIsNewsletterMsg(this))return d("WAWebMedia").resumeUploadMsg(this);this.isUnsentPhoneMsg()&&d("WAWebSendMsgRecordAction").sendMsgRecord(this);return this.forceDownloadMediaEvenIfExpensive()};f.forceRMR=function(){return(h||(h=b("Promise"))).reject(c("err")("unimplemented forceRMR"))};f.isForcingRMR=function(){return!1};f.cancelDownload=function(){d("WAWebMedia").cancelDownloadMsg(this)};f.resumeUpload=function(){this.mediaData.mediaStage!==d("WAWebMediaTypes").MediaDataStage.NEED_UPLOAD&&d("WALogger").ERROR(m(),this.mediaData.mediaStage).sendLogs("resume-non-need-upload");return d("WAWebMedia").resumeUploadMsg(this).then(function(a){return a==null?void 0:a.messageSendResult})};f.cancelUpload=function(){d("WAWebMedia").cancelUploadMsg(this)};f.waitForPhoneUpload=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;if(Boolean(this.mediaData.filehash)&&!this.isUnsentPhoneMsg())return;this._waitForPhoneUploadPromise||(this._waitForPhoneUploadPromise=c("WAWebEventsWaitForBbEvent")(this.mediaData,"change:mediaStage change:filehash",function(){return Boolean(a.mediaData.filehash)&&!a.isUnsentPhoneMsg()}));yield this._waitForPhoneUploadPromise;this._waitForPhoneUploadPromise=null});function d(){return a.apply(this,arguments)}return d}();f.forceDownloadMediaEvenIfExpensive=function(){return this.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})};f.downloadMedia=function(a){var e=this;if(d("WAWebFrontendMsgGetters").getAsRevoked(this))return(h||(h=b("Promise"))).resolve();var f=a.downloadEvenIfExpensive,g=a.rmrReason,i=a.isUserInitiated,j=a.isAutoDownload;if(!i&&!d("WAWebMsgModelPropUtils").isTrusted(this))return(h||(h=b("Promise"))).resolve();if(!d("WAWebMsgGetters").getIsStatusV3(this)&&d("WAWebFrontendMsgGetters").getChat(this).isSuspendedOrTerminated()&&d("WAWebMiscGatingUtils").isGroupSuspendV2Enabled()){i&&d("WAWebModalManager").ModalManager.open(p.jsx(c("WAWebSuspendedGroupMediaDownloadFailureModal.react"),{}),{transition:"modal-flow"});return(h||(h=b("Promise"))).resolve()}d("WAWebFrontendMsgGetters").getAsMms(this)||d("WALogger").ERROR(l(),this.id.toString(),this.type).devConsole(this).sendLogs("media-fault: downloadMedia msg is not mms type");if(this.isUnsentPhoneMsg()){var k=this._waitForPhoneUploadPromise;k||(k=this._waitForPhoneUploadPromise=c("WAWebEventsWaitForBbEvent")(this.mediaData,"change:mediaStage change:filehash",function(){return!!e.mediaData.filehash&&!e.isUnsentPhoneMsg()}).then(function(){e._waitForPhoneUploadPromise=null}));return k.then(function(){return e.downloadMedia(a)})}return d("WAWebMedia").downloadMsg({msg:this,isUserClick:g===d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MSG_CLICK,downloadEvenIfExpensive:f,rmrReason:g,rmrData:this._getRmrData(g),mode:i?"manual":"auto",isAutoDownload:j,chatWid:(k=d("WAWebFrontendMsgGetters").getMaybeChat(this))==null?void 0:k.id})};f._getRmrData=function(a){a={webcRmrReason:a,webcMessageT:this.t};var b=d("WAWebFrontendMsgGetters").getMaybeChat(this);if(b){a.webcChatType=b.getWebcChatType();b.initialIndex!=null&&(a.webcChatPosition=b.initialIndex);var c=this.msgChunk;c&&c===b.msgs&&(a.webcMessageIndex=c.length-c.indexOf(this)-1)}return a};f.applyUpdate=function(a){var c=this;if(a.type&&this.type!==a.type&&d("WAWebMsgModelUtils").typeIsMms(a)){!d("WAWebCommonMsgUtils").isPlaceholderMsg(this.type)&&!d("WAWebMsgGetters").getIsFutureproof(this)&&d("WALogger").ERROR(k(),this.id.toString(),this.type,String(a.type)).sendLogs("invalid-type-update");this._createMediaDataChild();d("WAWebMedia").registerMsgEarly(this,a);return d("WAWebMedia").prepareMsg(this).then(function(){c.set(a)})["catch"](function(a){d("WALogger").ERROR(j(),String(a)).devConsole(a).sendLogs("preregister-error")})}this.set(a);return(h||(h=b("Promise"))).resolve()};f.waitForPrep=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,c=this;a=this.requiresDirectConnection==null?d("WAWebDirectConnectionGatingUtils").genDirectConnectionMessageModifiers(this.type,(a=this.list)==null?void 0:a.listType,this.businessOwnerJid).then(function(a){return c.set(a)}):(h||(h=b("Promise"))).resolve();var e=d("WAWebMsgModelUtils").typeIsMms(this)?d("WAWebMedia").prepareMsg(this):(h||(h=b("Promise"))).resolve();yield a;return e});function c(){return a.apply(this,arguments)}return c}();f["delete"]=function(c){a.prototype["delete"].call(this);this.botEditTimeoutID&&self.clearTimeout(this.botEditTimeoutID);var e=b("WAWebStarredMsgCollection").AllStarredMsgsCollection;e.remove(this);e=b("WAWebPinInChatCollection").PinInChatCollection;e.deleteByParentMessageKey(this.id);e=this.getCollection();e.remove(this.id);this.msgChunk&&this.msgChunk.remove(this.id,{},Boolean(c==null?void 0:c.skipUpdatingSortTime));d("WAWebMsgModelUtils").typeIsMms(this)&&d("WAWebMedia").deregisterMsg(this);b("WAWebLabelCollection").LabelCollection.removeAllLabelsMD(this);e=this._getChatCollection().get(this.id.remote);if(e){var f;d("WAWebBotGating").isBotReceiveEnabled()&&(this.id.remote.isBot()||((f=e.contact.businessProfile)==null?void 0:f.isBizBot3p)===!0)&&this.subtype===d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE&&e.botInitialTypingIndicatorMsgId&&(e.botInitialTypingIndicatorMsgId.equals(this.id)&&e.set({botInitialTypingIndicatorMsgId:null},{silent:!0}));e.unreadMsgAnchor===this&&(e.unreadMsgAnchor=void 0);f=!c||!c.doNotResetLastReceived;if(f&&e.lastReceivedKey===this.id){c=void 0;f=d("WAWebChatGetMessage").getLastReceivedMsg(e);f&&(c=f.id);e.lastReceivedKey=c}e.composeQuotedMsg===this&&(e.composeQuotedMsg=null)}d("WAWebMsgGetters").clearMsgGetterCacheFor(this);d("WAWebFrontendMsgGetters").clearFrontendMsgGetterCacheFor(this)};f.isLastMessage=function(){var a=d("WAWebFrontendMsgGetters").getChat(this).msgs.last();return this.id.equals(a==null?void 0:a.id)};f.msgContextInfo=function(a){var b=c("lodash").omit(this.toJSON(),["id","t","notifyName","from","to","author","ack","invis","isNewMsg","star","recvFresh","recipients","broadcast","quotedMsg","quotedStanzaID","quotedRemoteJid","quotedParticipant","senderObj","multicast","replyButtons","buttons","latestEditMsgKey","latestEditSenderTimestampMs"]),e=this.id,f=null;a&&!e.remote.equals(a)&&(f=e.remote);a=d("WAWebMsgGetters").getIsNewsletterMsg(this)?this.id.remote:d("WAWebMsgGetters").getSender(this);return{quotedMsg:b,quotedParticipant:a,quotedStanzaID:e.id,quotedRemoteJid:f}};f.displayName=function(a){a===void 0&&(a={});a=a;var b=a.showShortName;b=b===void 0?!1:b;var e=a.showVerifiedName;e=e===void 0?!1:e;var f=a.withPushName;f=f===void 0?!1:f;var g=a.withPushNameOnly;g=g===void 0?!1:g;a=a.newPushNameFormatting;a=a===void 0?!1:a;if(!d("WAWebMsgGetters").getSender(this))return"";if(d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebMsgGetters").getSender(this)))return c("fbs")._("__JHASH__IBzirFr1ZJs__JHASH__").toString();if(d("WAWebMsgGetters").getIsPSA(this))return c("fbs")._("__JHASH__8HYf1Fxz_sn__JHASH__").toString();if(this.senderObj==null)return"";var h=this.senderObj;b=b?h.shortName:void 0;if(b)return b;else if(h.name)return h.name;if(e&&h.verifiedLevel===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&h.verifiedName)return h.verifiedName;b=a?d("WAWebChatContactUtils").getFormattedNotifyName(this.notifyName).toString():"~"+this.notifyName;e=f&&this.notifyName?b:"";if(g&&e)return e;f=((a=d("WAWebMsgGetters").getSender(this))==null?void 0:a.isLid())?d("WAWebFrontendContactGetters").getUserDisplayNameForLid(h):d("WAWebWidFormat").widToFormattedUser(d("WAWebMsgGetters").getSender(this));return""+f+(e?" ":"")+e};f.isMentioned=function(a){return!this.mentionedJidList?!1:this.mentionedJidList.findIndex(function(b){return b.equals(a)})>-1};f.mentionMap=function(){if(!this.mentionedJidList)return null;if(!this.mentionedJidList.length)return null;var a={};this.mentionedJidList.forEach(function(b){a["@"+(c("WAWebWid").user(b)||"")]=d("WAWebContactCollection").ContactCollection.gadd(b)});return a};f.groupMentionMap=function(){var a;if(!this.groupMentions)return null;return!this.groupMentions.length?null:(a=this.groupMentions)==null?void 0:a.reduce(function(a,b){var c="@"+b.groupJid.toString();a[c]=b.groupSubject;return a},{})};f.updateAck=function(a,b){var c,e=this;b===void 0&&(b=!1);var f=this.ack;if(!d("WAWebMsgGetters").getIsStatusV3(this)&&((c=d("WAWebFrontendMsgGetters").getMaybeChat(this))==null?void 0:c.isGroup)&&this.isMdHistoryMsg&&a>=d("WAWebAck").ACK.RECEIVED&&this.id.fromMe)return;d("WATypeUtils").isNumber(a)&&(f===void 0||a>f||a===d("WAWebAck").ACK.FAILED)?(this.ack=a,b||this._pendingAckUpdate.enqueue(function(){return d("WAWebDBUpdateMessageTable").updateMessageTable(e.id,{ack:a})})):a===d("WAWebAck").ACK.FAILED&&this.ack===d("WAWebAck").ACK.CLOCK&&(this.ack=d("WAWebAck").ACK.FAILED,this._pendingAckUpdate.enqueue(function(){return d("WAWebDBUpdateMessageTable").updateMessageTable(e.id,{ack:a})}))};f.updateErrorCode=function(a){this.errorCode=a;return d("WAWebDBUpdateMessageTable").updateMessageTable(this.id,{errorCode:a})};f.updateLastPlaybackProgress=function(a){this.lastPlaybackProgress=a,this._saveLastPlaybackProgress(this.id,a)};f.avParams=function(){return d("WAWebMedia").mediaMetadata(this)};f.resend=function(){var a=this;if(d("WAWebMsgGetters").getIsFailed(this)){if(d("WAWebMsgGetters").getIsEdited(this))return d("WAWebSendMessageEditAction").resendLatestEdit(this);var c={ack:d("WAWebAck").ACK.CLOCK};c.isSendFailure=!1;this._pendingAckUpdate.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,c),a.set(c)}));if(d("WAWebMsgGetters").getIsNewsletterMsg(this))return b("WAWebNewsletterSendMsgAction").resendNewsletterMsg(this);return d("WAWebFrontendMsgGetters").getAsMms(this)?d("WAWebMsgGetters").getIsSentByMeFromWeb(this)?this.resumeUpload():this.resumeRemoteUpload():d("WAWebSendMsgRecordAction").sendMsgRecord(this)}return(h||(h=b("Promise"))).resolve()};f._handleCiphertextDecrypted=function(){if(d("WAWebMsgGetters").getIsStatusV3(this))return;var a=d("WAWebFrontendMsgGetters").getChat(this),b=a.msgs.length;a=a.msgs.indexOf(this);a!==-1&&b-a<=10&&d("WAWebCmd").Cmd.alertNewMsg(this)};f._handleViewOnceMediaStatusChanged=function(){if(!this.isViewOnce)return;if(this.mediaData==null)return;var a=d("WAWebMsgGetters").getIsSentByMe(this)&&this.ack>=d("WAWebAck").ACK.SENT&&this.mediaData.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED,b=!d("WAWebMsgGetters").getIsSentByMe(this)&&this.ack>=d("WAWebAck").ACK.PLAYED;(a||b)&&(this.stopListening(this,"change:ack",this._handleViewOnceMediaStatusChanged),this.stopListening(this.mediaData,"change:mediaStage",this._handleViewOnceMediaStatusChanged),d("WAWebMedia").deregisterMsg(this))};f.isReaction=function(){return d("WAWebMsgGetters").getIsReaction(this)};f.isEditProtocolMsg=function(){return d("WAWebMsgGetters").getIsEditProtocolMsg(this)};f.getWamDisappearingModeInitiator=function(){var a=this.disappearingModeInitiator;if(a==null)return null;switch(a){case d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe:return d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE.INITIATED_BY_ME;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther:case d("WAWebEphemeralityTypes").DisappearingModeInitiator.BizUpgradeFbHosting:return d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE.INITIATED_BY_OTHER;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:return d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE.CHAT}};f.getWamMessageType=function(){return d("WAWebWamMsgUtils").getWamMessageType(this)};f.getWamMediaType=function(){return d("WAWebWamMsgUtils").getWamMediaType(this)};f.getWamEditType=function(){return d("WAWebMsgGetters").getWamEditType(this)};f.getForwardingScoreWhenForwarded=function(){var a=5,b=d("WAWebMsgGetters").getNumTimesForwarded(this)+(d("WAWebMsgGetters").getShouldDisplayAsForwarded(this)?1:0);return b>=a?c("WAWebConstantsDeprecated").FREQUENTLY_FORWARDED_SENTINEL:b};f.isExpired=function(){var a=d("WAWebMsgGetters").getEphemeralExpirationTimestamp(this);return a==null?!1:a<=d("WATimeUtils").unixTime()};f.isRealMessage=function(){var a=this.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE&&this.from.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser());return!a&&!d("WAWebMsgGetters").getIsInitialE2ENotification(this)&&this.type!==d("WAWebMsgType").MSG_TYPE.CALL_LOG&&!d("WAWebMsgGetters").getIsBizNotification(this)&&!["change_number","masked_thread_created"].includes(this.subtype)&&!d("WAWebMsgGetters").getIsDisappearingModeSystemMessage(this)};f.isExpiredAndNotKept=function(){return this.isExpired()&&!d("WAWebMsgGetters").getIsKept(this)};f.timeUntilExpiration=function(){var a=d("WAWebMsgGetters").getEphemeralExpirationTimestamp(this);if(a==null)return null;return this.isExpired()?0:a-d("WATimeUtils").unixTime()};f._logStorageEstimate=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAStorageEstimator").estimateStorage());if(b.success){b=b.value;var c=b.quota;b=b.usage;a.webcBrowserStorageQuotaBytes=c;a.webcBrowserStorageQuotaUsedBytes=b}});function a(b){return a.apply(this,arguments)}return a}();f.getCollection=function(){return b("WAWebMsgCollection").MsgCollection};f._getChatCollection=function(){return d("WAWebMsgGetters").getIsNewsletterMsg(this)?b("WAWebNewsletterCollection"):b("WAWebChatCollection").ChatCollection};f.safe=function(){return this};f.unsafe=function(){return this};f.meUserIsLastKICActor=function(){return c("WAWebWid").equals(d("WAWebMsgGetters").getKicSender(this),d("WAWebUserPrefsMeUser").getMaybeMeUser())};f.keepIsLockedForMe=function(){return this.keepIsLockedByDmSettingsForUser(d("WAWebUserPrefsMeUser").getMeUser())};f.keepIsLockedForUser=function(a){return this.keepIsLockedByDmSettingsForUser(a)};f.keepIsLockedForMeSenderSuperpower=function(){var a=d("WAWebMsgGetters").getKicSender(this),b=c("WAWebWid").equals(a,d("WAWebMsgGetters").getSender(this));if(d("WAWebPnhGatingUtils").isMatFullyEnabled()&&d("WAWebFrontendMsgGetters").getChat(this).id.isUser()&&!b&&a!=null){a=d("WAWebApiContact").getAlternateUserWid(a);a!=null&&(b=c("WAWebWid").equals(a,d("WAWebMsgGetters").getSender(this)))}return d("WAWebMsgGetters").getIsUnkept(this)&&b&&!this.meUserIsLastKICActor()};f.keepIsLockedByDmSettingsForUser=function(a){var b;b=d("WAWebFrontendMsgGetters").getChat(this).isGroup?!((b=d("WAWebFrontendMsgGetters").getChat(this).groupMetadata)==null?void 0:b.userCanSetEphemeralSetting(a)):!1;return b};f._isKICEnabled=function(){return!d("WAWebFrontendMsgGetters").getChat(this).supportsKIC()?!1:d("WAWebMsgGetters").getIsEphemeral(this)&&this.type!==d("WAWebMsgType").MSG_TYPE.REVOKED&&!this.isViewOnce};f.canShowKeepOrUnkeepOption=function(){return this.canShowKeepOption()||this.canShowUnkeepOption()};f.canShowKeepOption=function(){var a;return this._isKICEnabled()&&(d("WAWebChatGroupUtils").canSendToGroup(d("WAWebFrontendMsgGetters").getChat(this))||((a=d("WAWebFrontendMsgGetters").getChat(this).groupMetadata)==null?void 0:a.pastParticipants.get(d("WAWebUserPrefsMeUser").assertGetMeUser()))!=null)&&!this.keepIsLockedForMe()&&!this.star&&!this.isGif&&!d("WAWebMsgGetters").getIsStickerMsg(this)};f.canShowUnkeepOption=function(){return d("WAWebMsgGetters").getIsKept(this)&&this._isKICEnabled()&&(this.canRevokeUnkeep()||this.canShowKeepOption()||this.isGif||d("WAWebMsgGetters").getIsStickerMsg(this))};f.canRevokeUnkeep=function(){if(d("WAWebMsgGetters").getIsSentByMe(this)){var a;if(d("WAWebFrontendMsgGetters").getChat(this).isGroup&&((a=d("WAWebFrontendMsgGetters").getChat(this).groupMetadata)==null?void 0:a.participants.iAmMember())===!0)return!0;else if(d("WAWebFrontendMsgGetters").getChat(this).isUser&&!d("WAWebFrontendMsgGetters").getChat(this).contact.isContactBlocked)return!0}return!1};f.isPastUnkeepExpirationLimit=function(){var a=d("WAWebMsgGetters").getEphemeralExpirationTimestamp(this);if(a!=null){a=Math.trunc(+new Date()/1e3)-a;return d("WAWebMsgGetters").getIsKept(this)&&a>d("WAWebEphemeralKeepInChatAbpropUtils").getUndoKeepInChatExpiration()}return!1};f.shouldShowNotificationPreview=function(){var a;return!((a=d("WAWebFrontendMsgGetters").getAsViewOnce(this))==null?void 0:a.isViewOnce)&&d("WAWebMuteCollection").MuteCollection.getGlobalPreviews()};f.senderIsGroupParticipant=function(){var a=d("WAWebFrontendMsgGetters").getChat(this).groupMetadata;if(a==null)return!1;var b=d("WAWebMsgGetters").getSender(this);if(b!=null&&a.participants.get(b)!=null)return!0;if(!a.isIncognitoCag)return!1;b=b!=null?d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(b)):null;return b==null?!1:a.participants.get(b)!=null};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="msg";a.idClass=c("WAWebMsgKey");a.kind="__MOCKED_KIND__";e=d("WAWebBaseModel").defineModel(a);g.Msg=e}),226);
__d("WAWebMsgModelPropUtils",["WAWebContactGetters","WAWebFrontendMsgGetters","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgGetters","WAWebMsgType","WAWebStateUtils","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a){a=d("WAWebStateUtils").unproxy(a);if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE)return a.interactiveType===c("WAWebInteractiveMessageType").SHOPS_STOREFRONT||a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS;return a.type===d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW?a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS:["image","video","ptv","audio","ptt","location","vcard","multi_vcard","document","ciphertext","debug_placeholder","oversized","unknown","call_log","revoked","sticker","payment","poll_creation","groups_v4_invite","newsletter_admin_invite","product","order","event_creation","biz_content_placeholder"].includes(a.type)}function b(a){a=d("WAWebStateUtils").unproxy(a);return a.type==="gp2"&&(a.subtype==="leave"||a.subtype==="remove")&&d("WAWebUserPrefsMeUser").isMeAccount(a.recipients[0])}function e(a){a=d("WAWebStateUtils").unproxy(a);if(d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebMsgGetters").getSender(a)))return!0;if(a.senderObj!=null&&d("WAWebContactGetters").getIsMyContact(a.senderObj))return!0;if(d("WAWebMsgGetters").getIsGroupMsg(a)||d("WAWebFrontendMsgGetters").getChat(a).isNewsletter)return d("WAWebFrontendMsgGetters").getChat(a).isTrusted();if(d("WAWebMsgGetters").getIsPSA(a)||d("WAWebMsgGetters").getIsCAPISupport(a))return!0;return a.isFromTemplate?!0:d("WAWebFrontendMsgGetters").getChat(a).notSpam}function f(a){a=d("WAWebStateUtils").unproxy(a);return((a=d("WAWebFrontendMsgGetters").getChat(a).groupMetadata)==null?void 0:a.participants.iAmMember())===!0}g.hasSymbol=a;g.isGroupLeave=b;g.isTrusted=e;g.iAmGroupParticipant=f}),98);
__d("WAWebAnimatedEmojiGatingUtils",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){function a(){return!c("gkx")("26258")&&d("WAWebABProps").getABPropConfigValue("animated_emojis_enabled")}g.isAnimatedEmojiEnabled=a}),98);
__d("WAWebCongratulationsAnimationsGatingUtils",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){function a(){return!c("gkx")("26258")&&d("WAWebABProps").getABPropConfigValue("fullscreen_animation_for_keyword")}g.isCongratulationsAnimationsEnabled=a}),98);
__d("WAWebCongratulationsAnimationsUtils",["$InternalEnum","WAWebURLUtils"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["DEFAULT"]),i="https://static.whatsapp.net/wa/static/test";function a(a){var b=null;if(a===h.DEFAULT){a={cat:"test",id:"confetti-falling",test:"1"};b=c("WAWebURLUtils").build(i,a)}return b}g.CelebrationAnimationType=h;g.getCongratulationsAnimationPath=a}),98);
__d("WAWebMsgModelUtils",["WALogger","WAWebAck","WAWebAnimatedEmojiGatingUtils","WAWebBackendErrors","WAWebChatEphemerality","WAWebChatMsgsCollection","WAWebCommonMsgUtils","WAWebCongratulationsAnimationsGatingUtils","WAWebCongratulationsAnimationsUtils","WAWebEmoji","WAWebFindChatAction","WAWebForwardMediaWithCaptionsGatingUtils","WAWebFrontendMsgGetters","WAWebGroupMetadataCollection","WAWebInteractiveMessageHeaderMediaType","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWid","WAWebWidFactory","WAWebWidJsonReviver","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["setRecords LogoutDrop: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:msg:store:resetMostRecentMsgs .msgs === cmc !"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msgs:broadcastFanout no group_metadata rec for bclist, cant fanout: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["model:msgs:broadcastFanout: unknown msgOrKey: ",""]);k=function(){return a};return a}({image:!0,video:!0,audio:!0,ptt:!0,sticker:!0,document:!0,product:!0});function a(a){var b;switch(a.type){case"image":case"video":case"ptv":case"audio":case"ptt":case"sticker":case"document":case"product":return!0;case"protocol":return a.subtype==="history_sync_notification";case d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW:return a.headerType===d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.IMAGE;case d("WAWebMsgType").MSG_TYPE.INTERACTIVE:return Boolean(((b=a.interactiveHeader)==null?void 0:b.mediaType)&&d("WAWebInteractiveMessageHeaderMediaType").IM_MEDIA_HEADER_TYPES.has(a.interactiveHeader.mediaType));default:return!1}}function e(a){return a.type===d("WAWebMsgType").MSG_TYPE.CHAT&&a.subtype==="url"}function f(a,b){switch(b){case"text":return a.type===d("WAWebMsgType").MSG_TYPE.CHAT&&a.subtype!=="url";case"image":return a.type===d("WAWebMsgType").MSG_TYPE.IMAGE;case"video":return a.type===d("WAWebMsgType").MSG_TYPE.VIDEO&&!a.isGif;case"gif":return a.type===d("WAWebMsgType").MSG_TYPE.VIDEO&&a.isGif;case"audio":return a.type===d("WAWebMsgType").MSG_TYPE.AUDIO;case"ptt":return a.type===d("WAWebMsgType").MSG_TYPE.PTT;case"document":return a.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT;case"location":return a.type===d("WAWebMsgType").MSG_TYPE.LOCATION;case"vcard":return a.type===d("WAWebMsgType").MSG_TYPE.VCARD||a.type===d("WAWebMsgType").MSG_TYPE.MULTI_VCARD;case"url":return a.type===d("WAWebMsgType").MSG_TYPE.CHAT&&a.subtype==="url";case"sticker":return a.type===d("WAWebMsgType").MSG_TYPE.STICKER;case void 0:return!1;default:return!1}}function l(a){if(!a)return null;var d=typeof a.id==="string"?a.id:a.id.id;d=new(c("WAWebMsgKey"))({from:a.from,to:a.to,id:d,participant:a.participant,selfDir:a.self});a.id=d;d=b("WAWebMsgModel").Msg;d=new d(a);d.fromQuotedMsg=!0;return d.safe()}function m(a){if(!d("WAWebForwardMediaWithCaptionsGatingUtils").isForwardMediaWithCaptionsEnabled()||a.length>1)return null;a=a.filter(function(a){return!d("WAWebMsgGetters").getHasOriginatedFromNewsletter(a)&&d("WAWebMsgGetters").getIsMedia(a)&&Boolean(a.caption)});return a.length===1?a[0]:null}function n(a){var e,f,g,h=b("WAWebMsgModel").Msg;if(a instanceof h)f=a,g=a.id;else if(a instanceof c("WAWebMsgKey"))g=a;else{d("WALogger").WARN(k(),String(a)).devConsole(a);return void 0}if(c("WAWebWid").isStatusV3(g.remote))return;if(((h=f)==null?void 0:h.recipients)&&f.recipients.length!==0)e=f.recipients;else{a=b("WAWebGroupMetadataCollection");h=a.get(g.remote);h?e=c("lodash").map(s(h.participants),"id"):d("WALogger").LOG(j(),g.remote.toString())}return e?e.map(function(a){return new(c("WAWebMsgKey"))({fromMe:g.fromMe,remote:a,id:g.id})}):void 0}function o(a){var e;if(!a.invis){var f=n(a);f&&(e=f.map(function(a){return a.remote}),f.forEach(function(e){var f=b("WAWebMsgCollection").MsgCollection;if(!f.some(c("lodash").matches({id:e}))){var g=s(a);g.to=e.remote;g.id=e;g.broadcast=!0;var h=f.add(g,{merge:!0});f=b("WAWebFindChatAction").findChat;f(e.remote,"msgModelBroadcastFanout").then(function(a){var b=h.reduce(function(b,c){if(c==null)return b;if(c.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL){d("WAWebChatEphemerality").isEphemeralSettingOn(a)&&(c.ephemeralDuration=d("WAWebChatEphemerality").getEphemeralSetting(a));var e=d("WAWebChatEphemerality").getEphemeralSettingTimestamp(a);e!=null&&(c.ephemeralSettingTimestamp=e);e=d("WAWebChatEphemerality").getDisappearingModeInitiator(a);e!=null&&(c.disappearingModeInitiator=e)}b.push(c);return b},[]);p(b,a,!0)})}}))}return e}function p(a,c,e,f,g,h){f=f||c.msgs;if(a.length===0)return;var j=f===c.msgs;if(h)if(j)d("WALogger").LOG(i()),q(c,f,a);else{q(c,f,a);h=b("WAWebChatMsgsCollection").ChatMsgsCollection;h=new h();h.replace(c.msgs);c.msgChunks.push(h);c.replaceMsgsCollection(f);c.msgs.trigger("change:last",c.msgs.last())}else e?j?q(c,f,a):r(f,a):r(f,a,{at:0,silent:a.every(t)});var k=g;k&&!c.unreadMsgAnchor&&(c.disableUnreadAnchor?c.disableUnreadAnchor=!1:c.unreadMsgAnchor=a.find(function(a){return a.id.toString()===k.toString()}))}function q(a,b,d){var e=c("lodash").findLast(d,function(a){return!!a});if(!e)return;r(b,d);a.lastReceivedKey=e.id}function r(a,b,c){try{a.add(b,c)}catch(a){if(a instanceof d("WAWebBackendErrors").LogoutDrop)d("WALogger").WARN(h(),a.toString()).devConsole(a);else throw a}}function s(a){return a!=null&&typeof a==="object"?JSON.parse(JSON.stringify(a),d("WAWebWidJsonReviver").jsonWidReviver):a}function t(a){return d("WAWebFrontendMsgGetters").getEventType(a)===d("WAWebCommonMsgUtils").EventType.IGNORE}function u(a){var d=b("WAWebWidFactory");if(a.broadcastId&&d.isWidlike(a.broadcastId)){var e=a.id;return new(c("WAWebMsgKey"))({fromMe:e.fromMe,remote:d.createWidFromWidLike(a.broadcastId),id:e.id,participant:e.remote})}return a.id}function v(a){return a.filter(function(a){return a.ack===d("WAWebAck").ACK.READ}).map(function(a){return a.id.toString()})}var w=new RegExp(["congratulations","congrats"].join("|"));function x(a){if(!d("WAWebCongratulationsAnimationsGatingUtils").isCongratulationsAnimationsEnabled())return null;if(a!=null){a=w.test(a.toLocaleLowerCase());if(a)return d("WAWebCongratulationsAnimationsUtils").CelebrationAnimationType.DEFAULT}return null}function y(a,b){if(!d("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiEnabled())return!1;if(b!==d("WAWebMsgType").MSG_TYPE.CHAT)return!1;if(a==null||a==="")return!1;b=d("WAWebEmoji").EmojiUtil.matchLargeEmojiPattern(a);if(b==null||b.length!==1)return!1;a=d("WAWebEmoji").EmojiUtil.normalizeEmoji(b[0]);return a!=null&&d("WAWebEmoji").EmojiUtil.getAnimatedEmojisToAssetMap().has(a)}g.typeIsMms=a;g.typeIsUrl=e;g.msgMatchesType=f;g.createQuotedMsg=l;g.getMediaMsgWithCaptionForForwarding=m;g.getBroadcastFanoutKeys=n;g.broadcastFanout=o;g.addRecordsToChat=p;g.getReferentialKey=u;g.getReadMsgKeys=v;g.getCelebrationAnimationType=x;g.isAnimatedEmoji=y}),98);
__d("WAWebMsgOpaqueData",["WAWebDBMsgOpaqueDataKeys","WAWebMsgKey","WAWebPollsDbUtils","WAWebProtobufsMdStorageMsgRowOpaqueData.pb","WAWebUserPrefsInfoStore","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsInfoStore").waNoiseInfo.cachedPasscodeDerivedKey;if(b==null){location.reload();return}var c=k(a),e=new Uint8Array(16);self.crypto.getRandomValues(e);b=(yield self.crypto.subtle.encrypt({iv:e,name:"AES-GCM"},b,c));a.encryptedData={iv:e,data:b}});return h.apply(this,arguments)}function e(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.encryptedData;if(c==null)return;b=(yield self.crypto.subtle.decrypt({iv:c.iv,name:"AES-GCM"},b,c.data));j(a,b);a.encryptedData=null});return i.apply(this,arguments)}function j(a,b){b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsMdStorageMsgRowOpaqueData.pb").MsgRowOpaqueDataSpec,b);var c=b.currentMsg;b=b.quotedMsg;c&&m(a,c);a.quotedMsg&&b&&m(a.quotedMsg,c);a.encryptedData=null}function k(a){var b={currentMsg:{},quotedMsg:{}};b.currentMsg=l(a);a.quotedMsg&&(b.quotedMsg=l(a.quotedMsg));a=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsMdStorageMsgRowOpaqueData.pb").MsgRowOpaqueDataSpec,b);return a.readBuffer()}var l=function(a){var b,c={};((b=a.paymentNoteMsg)==null?void 0:b.body)&&(c.paymentNoteMsgBody=a.paymentNoteMsg.body,a.paymentNoteMsg.body=void 0);d("WAWebDBMsgOpaqueDataKeys").MSG_OPAQUE_DATA_KEYS.forEach(function(b){a[b]&&d("WAWebDBMsgOpaqueDataKeys").MsgKeyFieldsInOpaqueData.includes(b)?c[b]=a[b].toString():c[b]=a[b],a[b]=void 0});c.pollOptions=d("WAWebPollsDbUtils").compressPollOptions(a.pollOptions);a.pollOptions=void 0;return c},m=function(a,b){b.paymentNoteMsgBody!=null&&a.paymentNoteMsg&&(a.paymentNoteMsg.body=b==null?void 0:b.paymentNoteMsgBody),d("WAWebDBMsgOpaqueDataKeys").MSG_OPAQUE_DATA_KEYS.forEach(function(e){var f=b[d("WAWebDBMsgOpaqueDataKeys").getKey(a.type,e)];f&&d("WAWebDBMsgOpaqueDataKeys").MsgKeyFieldsInOpaqueData.includes(e)?a[e]=c("WAWebMsgKey").fromString(f):a[e]=f}),a.pollOptions=d("WAWebPollsDbUtils").expandPollOptions(b==null?void 0:b.pollOptions)};g.encryptDataInMsgModel=a;g.decryptDataInMsgModel=e}),98);
__d("WAWebLogoFacebookIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="logo-facebook";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=28;m=28;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 28 28",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M15.0896028,14.7272727 L15.1043384,26 L4.33333333,26 C1.91438192,26 0,24.0856181 0,21.6666667 L0,4.33333333 C0,1.91438192 1.91438192,0 4.33333333,0 L21.6666667,0 C24.0856181,0 26,1.91438192 26,4.33333333 L26,21.6666667 C26,24.0856181 24.0856181,26 21.6666667,26 L16.3649427,26 L16.3502071,14.7272727 L19.8103776,14.7272727 L20.017785,13.4545455 L16.3550034,13.4545455 L16.3636733,12.4459498 L16.3818182,10.3393939 C16.3818182,8.69776256 17.1633755,7.73939393 18.9587599,7.74051324 L20.1818182,7.68259683 L20.1818182,6.38433052 L20.1617937,6.38468908 C19.4139177,6.39804401 18.7382334,6.4060606 18.2060606,6.4060606 C16.1406731,6.4060606 15.1030303,7.44259476 15.103009,9.67926308 L15.0783339,13.4545455 L11.8018536,13.4545455 L11.8042105,14.7272727 L15.0896028,14.7272727 Z M14.1030303,25 L14.0909091,15.7272727 L10.8060606,15.7272727 L10.8,12.4545455 L14.0848485,12.4545455 L14.1030303,9.67272727 C14.1030303,6.8060606 15.6727273,5.4060606 18.2060606,5.4060606 C19.4060606,5.4060606 21.1818182,5.36363637 21.1818182,5.36363636 L21.1818182,8.63636364 L19.0060606,8.73939393 C17.6060606,8.73939393 17.3818182,9.4060606 17.3818182,10.3393939 L17.3636364,12.4545455 L21.1939394,12.4545455 L20.6606061,15.7272727 L17.3515151,15.7272727 L17.3636364,25 L21.6666667,25 C23.5333333,25 25,23.5333333 25,21.6666667 L25,4.33333333 C25,2.46666667 23.5333333,1 21.6666667,1 L4.33333333,1 C2.46666667,1 1,2.46666667 1,4.33333333 L1,21.6666667 C1,23.5333333 2.46666667,25 4.33333333,25 L14.1030303,25 Z",fillOpacity:.3,fill:"#263238",fillRule:"nonzero"}),j.jsx("path",{d:"M14.1030303,25 L4.33333333,25 C2.46666667,25 1,23.5333333 1,21.6666667 L1,4.33333333 C1,2.46666667 2.46666667,1 4.33333333,1 L21.6666667,1 C23.5333333,1 25,2.46666667 25,4.33333333 L25,21.6666667 C25,23.5333333 23.5333333,25 21.6666667,25 L17.3636364,25 L17.3515151,15.7272727 L20.6606061,15.7272727 L21.1939394,12.4545455 L17.3636364,12.4545455 L17.3818182,10.3393939 C17.3818182,9.4060606 17.6060606,8.73939393 19.0060606,8.73939393 L21.1818182,8.63636364 L21.1818182,5.36363636 C21.1818182,5.36363637 19.4060606,5.4060606 18.2060606,5.4060606 C15.6727273,5.4060606 14.1030303,6.8060606 14.1030303,9.67272727 L14.0848485,12.4545455 L10.8,12.4545455 L10.8060606,15.7272727 L14.0909091,15.7272727 L14.1030303,25 Z",fillOpacity:.6,fill:"#FFFFFF"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.LogoFacebookIcon=a}),98);
__d("WAWebLogoInstagramIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="logo-instagram";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=28;m=28;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 28 28",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M13.0000238,0 C16.0471863,0 16.5726824,0.00844009118 17.9931478,0.0732517966 C19.2870609,0.132267821 20.2814874,0.332106718 21.2226416,0.697902272 C22.1770489,1.06875343 22.952994,1.56696125 23.6930681,2.30698242 C24.4330127,3.04697986 24.9312153,3.82289637 25.3021335,4.77732795 C25.667913,5.71859186 25.8677347,6.71299539 25.9267474,8.00683567 C25.9915599,9.42731803 26,9.95281754 26,13.0000238 C26,16.0471863 25.9915599,16.5726824 25.9267482,17.9931478 C25.8677347,19.2870046 25.667913,20.2814081 25.3021264,21.2226904 C24.9312153,22.1771036 24.4330127,22.9530201 23.6930176,23.6930681 C22.9530201,24.4330127 22.1771036,24.9312153 21.222672,25.3021335 C20.2814081,25.667913 19.2870046,25.8677347 17.9931643,25.9267474 C16.5726824,25.9915599 16.0471863,26 13.0000238,26 C9.95281754,26 9.42731803,25.9915599 8.00685221,25.9267482 C6.71299539,25.8677347 5.71859186,25.667913 4.77730956,25.3021264 C3.82289637,24.9312153 3.04697986,24.4330127 2.30693194,23.6930176 C1.56696125,22.952994 1.06875343,22.1770489 0.697933759,21.2227226 C0.332106718,20.2814874 0.132267821,19.2870609 0.0732525511,17.9931643 C0.00844009118,16.5726824 0,16.0471863 0,13.0000238 C0,9.95281754 0.00844007012,9.42731803 0.0732517966,8.00685221 C0.132267821,6.71293915 0.332106718,5.71851257 0.697902272,4.77735844 C1.06875343,3.82295107 1.56696125,3.04700595 2.30698242,2.30693194 C3.04700595,1.56696125 3.82295107,1.06875343 4.77727742,0.697933759 C5.71851257,0.332106718 6.71293915,0.132267821 8.00683567,0.0732525511 C9.42731803,0.00844007012 9.95281754,0 13.0000238,0 Z M13.0000238,4.1621583 C10.0092642,4.1621583 9.54871163,4.16940019 8.19652181,4.23109475 C7.31647529,4.27122389 6.77862056,4.38554609 6.284987,4.57739421 C5.8537324,4.74499635 5.57155295,4.92857388 5.25004154,5.25012175 C4.92857388,5.57155295 4.74499635,5.8537324 4.57739222,6.28499212 C4.38554609,6.77862056 4.27122389,7.31647529 4.23109353,8.19654849 C4.16940019,9.54871163 4.1621583,10.0092642 4.1621583,13.0000238 C4.1621583,15.9907394 4.16940021,16.4512887 4.23109475,17.8034782 C4.27122389,18.6835247 4.38554609,19.2213794 4.57739421,19.715013 C4.74497012,20.1462001 4.92857819,20.4284149 5.25012175,20.7499585 C5.57155295,21.0714261 5.8537324,21.2550037 6.28499212,21.4226078 C6.77862056,21.6144539 7.31647529,21.7287761 8.19655363,21.7689067 C9.54857728,21.8306006 10.0090682,21.8378417 13.0000238,21.8378417 C15.9909551,21.8378417 16.4514881,21.8306 17.8034782,21.7689053 C18.6835247,21.7287761 19.2213794,21.6144539 19.715013,21.4226058 C20.1462676,21.2550037 20.4284471,21.0714261 20.7499585,20.7498782 C21.0714261,20.4284471 21.2550037,20.1462676 21.4226078,19.7150079 C21.6144539,19.2213794 21.7287761,18.6835247 21.7689065,17.8034515 C21.8305998,16.4512887 21.8378417,15.9907394 21.8378417,13.0000238 C21.8378417,10.0092642 21.8305998,9.54871163 21.7689053,8.19652181 C21.7287761,7.31647529 21.6144539,6.77862056 21.4226058,6.284987 C21.2550037,5.8537324 21.0714261,5.57155295 20.7498782,5.25004154 C20.4284471,4.92857388 20.1462676,4.74499635 19.7150079,4.57739222 C19.2213794,4.38554609 18.6835247,4.27122389 17.8034515,4.23109353 C16.4512887,4.16940021 15.9907394,4.1621583 13.0000238,4.1621583 Z M13.0000238,5.8378417 C16.9555813,5.8378417 20.1621583,9.04443587 20.1621583,13.0000238 C20.1621583,16.9555727 16.9555727,20.1621583 13.0000238,20.1621583 C9.04443587,20.1621583 5.8378417,16.9555813 5.8378417,13.0000238 C5.8378417,9.04442731 9.04442731,5.8378417 13.0000238,5.8378417 Z M13.0000238,16 C14.6568646,16 16,14.6568646 16,13.0000238 C16,11.343141 14.6568701,10 13.0000238,10 C11.3431354,10 10,11.3431354 10,13.0000238 C10,14.6568701 11.343141,16 13.0000238,16 Z M19.8456418,6.59438394 C19.8456418,6.83737839 19.6486491,7.03436203 19.4056161,7.03436203 C19.1626284,7.03436203 18.965638,6.83737614 18.965638,6.59438394 C18.965638,6.35137243 19.1626477,6.15435822 19.4056161,6.15435822 C19.6486298,6.15435822 19.8456418,6.35137018 19.8456418,6.59438394 Z M21.8456418,6.59438394 C21.8456418,5.24680068 20.7531993,4.15435822 19.4056161,4.15435822 C18.0580679,4.15435822 16.965638,5.24681316 16.965638,6.59438394 C16.965638,7.94195587 18.0580691,9.03436203 19.4056161,9.03436203 C20.7531982,9.03436203 21.8456418,7.94196835 21.8456418,6.59438394 Z M13.0000238,1 C9.74099567,1 9.33234294,1.01381388 8.05241535,1.07221326 C6.77515526,1.13046973 5.90283244,1.33334326 5.13954402,1.63000828 C4.35043794,1.93662882 3.68122682,2.34694874 3.01406396,3.01406396 C2.34694874,3.68122682 1.93662882,4.35043794 1.63000828,5.13954402 C1.33334326,5.90283244 1.13046973,6.77515526 1.07221326,8.05241535 C1.01381388,9.33234294 1,9.74099567 1,13.0000238 C1,16.2590043 1.01381388,16.6676571 1.07221326,17.9475847 C1.13046973,19.2248447 1.33334326,20.0971676 1.63000828,20.860456 C1.93662882,21.6495621 2.34694874,22.3187732 3.01406396,22.985936 C3.68122682,23.6530513 4.35043794,24.0633712 5.13954402,24.3700394 C5.90283244,24.6666567 6.77515526,24.8695303 8.05241535,24.9277867 C9.33234294,24.9861861 9.74099567,25 13.0000238,25 C16.2590043,25 16.6676571,24.9861861 17.9475847,24.9277867 C19.2248447,24.8695303 20.0971676,24.6666567 20.860456,24.3700394 C21.6495621,24.0633712 22.3187732,23.6530513 22.985936,22.985936 C23.6530513,22.3187732 24.0633712,21.6495621 24.3700394,20.860456 C24.6666567,20.0971676 24.8695303,19.2248447 24.9277867,17.9475847 C24.9861861,16.6676571 25,16.2590043 25,13.0000238 C25,9.74099567 24.9861861,9.33234294 24.9277867,8.05241535 C24.8695303,6.77515526 24.6666567,5.90283244 24.3700394,5.13954402 C24.0633712,4.35043794 23.6530513,3.68122682 22.985936,3.01406396 C22.3187732,2.34694874 21.6495621,1.93662882 20.860456,1.63000828 C20.0971676,1.33334326 19.2248447,1.13046973 17.9475847,1.07221326 C16.6676571,1.01381388 16.2590043,1 13.0000238,1 Z M13.0000238,3.1621583 C16.2041299,3.1621583 16.5836782,3.17440026 17.8490298,3.23213276 C19.0190179,3.28548292 19.6544088,3.48097316 20.0772565,3.64531072 C20.6373856,3.86299845 21.0371308,4.12303286 21.4570251,4.54297487 C21.8769671,4.96286924 22.1370016,5.3626144 22.3546893,5.92274348 C22.5190268,6.34559117 22.7145171,6.9809821 22.7678672,8.15097025 C22.8255997,9.41632182 22.8378417,9.79587013 22.8378417,13.0000238 C22.8378417,16.2041299 22.8255997,16.5836782 22.7678672,17.8490298 C22.7145171,19.0190179 22.5190268,19.6544088 22.3546893,20.0772565 C22.1370016,20.6373856 21.8769671,21.0371308 21.4570251,21.4570251 C21.0371308,21.8769671 20.6373856,22.1370016 20.0772565,22.3546893 C19.6544088,22.5190268 19.0190179,22.7145171 17.8490298,22.7678672 C16.5838687,22.8255997 16.204368,22.8378417 13.0000238,22.8378417 C9.79563196,22.8378417 9.41617891,22.8255997 8.15097025,22.7678672 C6.9809821,22.7145171 6.34559117,22.5190268 5.92274348,22.3546893 C5.3626144,22.1370016 4.96286924,21.8769671 4.54297487,21.4570251 C4.1230805,21.0371308 3.86299845,20.6373856 3.64531072,20.0772565 C3.48097316,19.6544088 3.28548292,19.0190179 3.23213276,17.8490298 C3.17440026,16.5836782 3.1621583,16.2041299 3.1621583,13.0000238 C3.1621583,9.79587013 3.17440026,9.41632182 3.23213276,8.15097025 C3.28548292,6.9809821 3.48097316,6.34559117 3.64531072,5.92274348 C3.86299845,5.3626144 4.12303286,4.96286924 4.54297487,4.54297487 C4.96286924,4.12303286 5.3626144,3.86299845 5.92274348,3.64531072 C6.34559117,3.48097316 6.9809821,3.28548292 8.15097025,3.23213276 C9.41632182,3.17440026 9.79587013,3.1621583 13.0000238,3.1621583 Z M13.0000238,6.8378417 C9.59671206,6.8378417 6.8378417,9.59671206 6.8378417,13.0000238 C6.8378417,16.4032879 9.59671206,19.1621583 13.0000238,19.1621583 C16.4032879,19.1621583 19.1621583,16.4032879 19.1621583,13.0000238 C19.1621583,9.59671206 16.4032879,6.8378417 13.0000238,6.8378417 Z M13.0000238,17 C10.7908507,17 9,15.2091493 9,13.0000238 C9,10.7908507 10.7908507,9 13.0000238,9 C15.2091493,9 17,10.7908507 17,13.0000238 C17,15.2091493 15.2091493,17 13.0000238,17 Z M20.8456418,6.59438394 C20.8456418,5.79908543 20.2009146,5.15435822 19.4056161,5.15435822 C18.6103652,5.15435822 17.965638,5.79908543 17.965638,6.59438394 C17.965638,7.38968246 18.6103652,8.03436203 19.4056161,8.03436203 C20.2009146,8.03436203 20.8456418,7.38968246 20.8456418,6.59438394 Z",fillOpacity:.3,fill:"#263238",fillRule:"nonzero"}),j.jsx("path",{d:"M13.0000238,1 C16.2590043,1 16.6676571,1.01381388 17.9475847,1.07221326 C19.2248447,1.13046973 20.0971676,1.33334326 20.860456,1.63000828 C21.6495621,1.93662882 22.3187732,2.34694874 22.985936,3.01406396 C23.6530513,3.68122682 24.0633712,4.35043794 24.3700394,5.13954402 C24.6666567,5.90283244 24.8695303,6.77515526 24.9277867,8.05241535 C24.9861861,9.33234294 25,9.74099567 25,13.0000238 C25,16.2590043 24.9861861,16.6676571 24.9277867,17.9475847 C24.8695303,19.2248447 24.6666567,20.0971676 24.3700394,20.860456 C24.0633712,21.6495621 23.6530513,22.3187732 22.985936,22.985936 C22.3187732,23.6530513 21.6495621,24.0633712 20.860456,24.3700394 C20.0971676,24.6666567 19.2248447,24.8695303 17.9475847,24.9277867 C16.6676571,24.9861861 16.2590043,25 13.0000238,25 C9.74099567,25 9.33234294,24.9861861 8.05241535,24.9277867 C6.77515526,24.8695303 5.90283244,24.6666567 5.13954402,24.3700394 C4.35043794,24.0633712 3.68122682,23.6530513 3.01406396,22.985936 C2.34694874,22.3187732 1.93662882,21.6495621 1.63000828,20.860456 C1.33334326,20.0971676 1.13046973,19.2248447 1.07221326,17.9475847 C1.01381388,16.6676571 1,16.2590043 1,13.0000238 C1,9.74099567 1.01381388,9.33234294 1.07221326,8.05241535 C1.13046973,6.77515526 1.33334326,5.90283244 1.63000828,5.13954402 C1.93662882,4.35043794 2.34694874,3.68122682 3.01406396,3.01406396 C3.68122682,2.34694874 4.35043794,1.93662882 5.13954402,1.63000828 C5.90283244,1.33334326 6.77515526,1.13046973 8.05241535,1.07221326 C9.33234294,1.01381388 9.74099567,1 13.0000238,1 Z M13.0000238,3.1621583 C9.79587013,3.1621583 9.41632182,3.17440026 8.15097025,3.23213276 C6.9809821,3.28548292 6.34559117,3.48097316 5.92274348,3.64531072 C5.3626144,3.86299845 4.96286924,4.12303286 4.54297487,4.54297487 C4.12303286,4.96286924 3.86299845,5.3626144 3.64531072,5.92274348 C3.48097316,6.34559117 3.28548292,6.9809821 3.23213276,8.15097025 C3.17440026,9.41632182 3.1621583,9.79587013 3.1621583,13.0000238 C3.1621583,16.2041299 3.17440026,16.5836782 3.23213276,17.8490298 C3.28548292,19.0190179 3.48097316,19.6544088 3.64531072,20.0772565 C3.86299845,20.6373856 4.1230805,21.0371308 4.54297487,21.4570251 C4.96286924,21.8769671 5.3626144,22.1370016 5.92274348,22.3546893 C6.34559117,22.5190268 6.9809821,22.7145171 8.15097025,22.7678672 C9.41617891,22.8255997 9.79563196,22.8378417 13.0000238,22.8378417 C16.204368,22.8378417 16.5838687,22.8255997 17.8490298,22.7678672 C19.0190179,22.7145171 19.6544088,22.5190268 20.0772565,22.3546893 C20.6373856,22.1370016 21.0371308,21.8769671 21.4570251,21.4570251 C21.8769671,21.0371308 22.1370016,20.6373856 22.3546893,20.0772565 C22.5190268,19.6544088 22.7145171,19.0190179 22.7678672,17.8490298 C22.8255997,16.5836782 22.8378417,16.2041299 22.8378417,13.0000238 C22.8378417,9.79587013 22.8255997,9.41632182 22.7678672,8.15097025 C22.7145171,6.9809821 22.5190268,6.34559117 22.3546893,5.92274348 C22.1370016,5.3626144 21.8769671,4.96286924 21.4570251,4.54297487 C21.0371308,4.12303286 20.6373856,3.86299845 20.0772565,3.64531072 C19.6544088,3.48097316 19.0190179,3.28548292 17.8490298,3.23213276 C16.5836782,3.17440026 16.2041299,3.1621583 13.0000238,3.1621583 Z M13.0000238,6.8378417 C16.4032879,6.8378417 19.1621583,9.59671206 19.1621583,13.0000238 C19.1621583,16.4032879 16.4032879,19.1621583 13.0000238,19.1621583 C9.59671206,19.1621583 6.8378417,16.4032879 6.8378417,13.0000238 C6.8378417,9.59671206 9.59671206,6.8378417 13.0000238,6.8378417 Z M13.0000238,17 C15.2091493,17 17,15.2091493 17,13.0000238 C17,10.7908507 15.2091493,9 13.0000238,9 C10.7908507,9 9,10.7908507 9,13.0000238 C9,15.2091493 10.7908507,17 13.0000238,17 Z M20.8456418,6.59438394 C20.8456418,7.38968246 20.2009146,8.03436203 19.4056161,8.03436203 C18.6103652,8.03436203 17.965638,7.38968246 17.965638,6.59438394 C17.965638,5.79908543 18.6103652,5.15435822 19.4056161,5.15435822 C20.2009146,5.15435822 20.8456418,5.79908543 20.8456418,6.59438394 Z",id:"IG-logo",fillOpacity:.6,fill:"#FFFFFF"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.LogoInstagramIcon=a}),98);
__d("WAWebLogoYoutubeIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="logo-youtube";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=20;m=75;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 75 20",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M58.0577137,16.5924517 L58.0577137,16.6109096 L54.4614664,16.6109096 L54.435877,16.4445786 C53.9935766,16.6634739 53.4952699,16.777363 52.9520481,16.777363 C52.0069701,16.777363 51.2207817,16.4221346 50.7048004,15.724042 C50.6344039,15.6287022 50.5702014,15.5280378 50.5119372,15.4219109 L50.5119372,16.5924147 L46.683398,16.5924147 L46.683398,16.6109096 L43.0871507,16.6109096 L43.0615614,16.4445786 C42.619261,16.6634739 42.1209542,16.777363 41.5777324,16.777363 C40.6326544,16.777363 39.8464661,16.4221346 39.3304847,15.724042 C39.1528633,15.4834847 39.0146744,15.2090287 38.9118132,14.898461 C38.6441723,15.4298888 38.2837063,15.8583571 37.8229911,16.1655005 C37.198009,16.5821553 36.399029,16.777326 35.4319956,16.7770426 C34.4663993,16.7540523 33.666818,16.5571404 33.0516159,16.1470057 C32.3952164,15.709406 31.9472728,15.0440781 31.7037147,14.1915153 C31.5447488,13.6510314 31.4469181,12.9965579 31.4067673,12.235867 L31.4067673,16.5925257 L27.2243783,16.5925257 L27.2243783,11.4300087 L24.3773733,1.10961535 L28.6991282,1.10961535 L28.8690811,1.89918819 L29.3165231,3.97793852 L29.9567738,1.10961535 L34.2774102,1.10961535 L33.1365212,5.18539989 C33.1442322,5.18016703 33.1519706,5.17496321 33.1597365,5.16978843 C33.7981445,4.7612073 34.5762693,4.5681841 35.492788,4.5681841 C36.4004338,4.5681841 37.1822463,4.76517621 37.8043363,5.17990291 C38.1487847,5.40943954 38.4371395,5.7067374 38.6725808,6.06418313 L38.6725808,4.75316931 L44.1471592,4.75316931 L44.1471592,1.10968933 L52.712821,1.10968933 L52.712821,4.75316931 L57.3893779,4.75316931 L57.3893779,0.610181175 L61.5349622,0.610181175 L61.5349622,4.70857657 C61.8471504,4.6027659 62.1755901,4.54976326 62.5137233,4.54976326 C63.2696894,4.54976326 63.9414049,4.78115764 64.43659,5.24539378 C64.7667068,5.55468494 65.0163437,5.95885855 65.1930604,6.44995282 C65.2727761,6.28602999 65.3610538,6.13229383 65.458189,5.98853377 C66.1229151,5.00473908 67.2126941,4.53117596 68.6169406,4.53117596 C69.5534434,4.53117596 70.3406071,4.7233183 70.9372855,5.13032953 C71.5435056,5.54366138 71.95366,6.17559898 72.1876248,6.98072766 C72.3797416,7.66456937 72.4653282,8.55012146 72.4653282,9.69251096 L72.4653282,12.3755398 L72.3518452,12.3755398 L72.3713658,12.4721766 C72.4058099,12.642692 72.4098437,12.7425382 72.4098437,13.021579 C72.4098437,14.2001549 72.0663789,15.1527839 71.3344147,15.8034187 C70.634676,16.4254086 69.6959688,16.721823 68.5614561,16.721823 C67.1615954,16.721823 66.0766331,16.2286583 65.4293218,15.2303041 C65.3280412,15.074163 65.2365958,14.9066861 65.1546963,14.7277305 C65.0949496,14.8887045 65.0290421,15.0394995 64.9568553,15.1799998 C64.4332835,16.199587 63.5533459,16.7587202 62.4212491,16.7587202 C61.9417607,16.7587202 61.4944835,16.6598433 61.0408162,16.4583658 L61.0086088,16.5924517 L58.0577137,16.5924517 L58.0577137,16.5924517 Z M24.3259002,5.62700608 C24.4236017,6.80523705 24.4550259,7.99393883 24.452758,8.86763092 C24.4527188,8.88030443 24.4527188,8.88030443 24.4527142,8.87879427 C24.4527142,8.93207856 24.4521755,9.02871609 24.4505765,9.16258163 C24.4479325,9.38394029 24.4431816,9.63016676 24.4357956,9.89517645 C24.4146551,10.6536972 24.3765715,11.41283 24.3169931,12.125387 C24.2352291,13.1032848 24.1195818,13.917554 23.9559594,14.5392558 C23.6044034,15.8450354 22.5773994,16.87197 21.265891,17.2253029 C20.4937667,17.4284935 18.9802227,17.5536738 16.85366,17.6336198 C15.8403408,17.6717145 14.7566214,17.6961593 13.6731798,17.7097362 C13.2941932,17.7144854 12.942212,17.7175391 12.626158,17.7192365 C12.4360536,17.7202574 12.2998065,17.7205989 12.2263571,17.7205989 C12.1527485,17.7205989 12.0162686,17.7202415 11.825867,17.7191733 C11.5093529,17.7173974 11.1568676,17.7142027 10.7773413,17.709234 C9.69233025,17.6950295 8.60702899,17.6694544 7.59215165,17.6295952 C5.47232465,17.5463391 3.95962355,17.4161347 3.18134306,17.2053493 C1.87545563,16.8537642 0.848339874,15.8266484 0.495965191,14.5178102 C0.3319537,13.901127 0.215623574,13.0804506 0.133715024,12.0909953 C0.0750181786,11.3819374 0.0374970877,10.6265128 0.0166687608,9.8716942 C0.0093917654,9.60797588 0.00471093513,9.36295002 0.00210595247,9.14267269 C0.000530665118,9.00946639 0,8.91330987 0,8.86029945 C0,8.80701516 0.000538670764,8.71037762 0.00213763803,8.57651208 C0.00478167356,8.35515343 0.00953263464,8.10892695 0.0169186349,7.84391726 C0.0380591243,7.0853965 0.0761427077,6.32626374 0.135721054,5.61370672 C0.217485081,4.63580895 0.333132432,3.82153968 0.496754797,3.19983788 C0.84683331,1.89954626 1.88747318,0.851922236 3.18682324,0.495296018 C3.9589475,0.292105423 5.47249146,0.166925095 7.59905417,0.0869791289 C8.61237336,0.0488844227 9.69609279,0.0244396234 10.7795344,0.0108626608 C11.158521,0.00611345554 11.5105022,0.00305983032 11.8265562,0.00136244031 C12.0166606,0.000341471398 12.1529077,0 12.2263571,0 C12.2998759,0 12.4361942,0.000355316061 12.6263728,0.00141753781 C12.9425189,0.00318333776 13.294595,0.00635996401 13.6736809,0.0113004323 C14.757431,0.0254244933 15.8414699,0.0508545797 16.8551605,0.0904875938 C18.9847305,0.173748977 20.4997674,0.304064932 21.2713711,0.515249619 C22.576591,0.866654965 23.6033241,1.8929005 23.9554197,3.19783538 C24.1252865,3.81933066 24.2440865,4.64037511 24.3259002,5.62700608 Z M22.9903436,3.45981136 C22.7314161,2.4980806 21.9731284,1.73979289 21.0113977,1.48086538 C19.2543895,1 12.2263571,1 12.2263571,1 C12.2263571,1 5.19832465,1 3.44131653,1.46237056 C2.4980806,1.72129807 1.72129807,2.4980806 1.46237056,3.45981136 C1,5.21681947 1,8.86029945 1,8.86029945 C1,8.86029945 1,12.5222742 1.46237056,14.2607875 C1.72129807,15.2225183 2.47958578,15.980806 3.44131653,16.2397335 C5.21681947,16.7205989 12.2263571,16.7205989 12.2263571,16.7205989 C12.2263571,16.7205989 19.2543895,16.7205989 21.0113977,16.2582283 C21.9731284,15.9991159 22.7314161,15.2410131 22.9903436,14.2792824 C23.4527142,12.5222742 23.4527142,8.87879427 23.4527142,8.87879427 C23.4527142,8.87879427 23.471209,5.21681947 22.9903436,3.45981136 Z M9.9884836,12.2263571 L9.9884836,5.4942418 L15.8328474,8.86029945 L9.9884836,12.2263571 Z M33.6063161,15.3149554 C34.0501918,15.6108726 34.6790158,15.7588311 35.4557983,15.777326 C36.214086,15.777326 36.8244152,15.6293674 37.2682909,15.3334502 C37.7121666,15.0375331 38.0265786,14.5566677 38.2300217,13.9278437 C38.4336497,13.280525 38.5261238,12.448258 38.5261238,11.3940531 L38.5261238,9.96995179 C38.5261238,8.8972521 38.4149699,8.04649028 38.2115268,7.41766632 C38.0080838,6.78884237 37.6938568,6.30797699 37.2497961,6.01205983 C36.8059204,5.71614268 36.214086,5.5681841 35.492788,5.5681841 C34.7529951,5.5681841 34.1611608,5.71614268 33.6987902,6.01205983 C33.2549145,6.30797699 32.9220077,6.77034755 32.7000698,7.41766632 C32.4966268,8.0649851 32.3856578,8.91574692 32.3856578,9.96995179 L32.3856578,11.3940531 C32.3856578,12.4297631 32.478132,13.280525 32.6630802,13.9093489 C32.8480284,14.5566677 33.1624404,15.0190383 33.6063161,15.3149554 Z M36.1031171,13.7613903 C35.9736534,14.0942971 35.7702103,14.2422557 35.4742932,14.2422557 C35.1598812,14.2422557 34.9379433,14.0758023 34.8269744,13.7613903 C34.6975106,13.4469784 34.6420262,12.9106285 34.6420262,12.1893305 L34.6420262,9.11918997 C34.6420262,8.41638672 34.6975106,7.8985317 34.8269744,7.5656249 C34.9379433,7.25121292 35.1598812,7.08475952 35.4557983,7.08475952 C35.7702103,7.08475952 35.9736534,7.2327181 36.1031171,7.5656249 C36.2325809,7.8985317 36.2880653,8.41638672 36.2880653,9.11918997 L36.2880653,12.1893305 C36.2880653,12.9106285 36.2325809,13.4469784 36.1031171,13.7613903 Z M67.7478689,11.3755398 L71.4653282,11.3755398 L71.4653282,9.69251096 C71.4653282,8.65680092 71.3911639,7.84302874 71.2248955,7.25119443 C71.0582571,6.67785494 70.7808348,6.23397921 70.3739487,5.95655687 C69.9672476,5.67913454 69.3754133,5.53117596 68.6169406,5.53117596 C67.525931,5.53117596 66.7491485,5.86408276 66.286778,6.54839118 C65.8244074,7.23269961 65.6022846,8.3053993 65.6022846,9.78498507 L65.6022846,11.5050035 C65.6022846,12.9475997 65.8244074,14.0018045 66.2682831,14.686113 C66.7119739,15.3704214 67.4704466,15.721823 68.5614561,15.721823 C69.4678874,15.721823 70.1706906,15.4998851 70.6700508,15.0560094 C71.169411,14.6121337 71.4098437,13.9278253 71.4098437,13.021579 C71.4098437,12.8736204 71.4098437,12.7626515 71.3911639,12.6701773 L69.4861973,12.5592084 C69.4678874,13.1695375 69.4124029,13.5949185 69.2829392,13.853846 C69.1534754,14.1127735 68.9313526,14.2422372 68.5986307,14.2422372 C68.3395183,14.2422372 68.1545701,14.1682579 68.0437861,14.0202994 C67.9141374,13.8908356 67.840343,13.6504029 67.8033534,13.3359909 C67.7663637,13.021579 67.7478689,12.5407136 67.7478689,11.9118896 L67.7478689,11.3755398 Z M68.0252912,7.26968925 C68.1362602,7.12173067 68.3027136,7.04775138 68.5614561,7.06624621 C68.783579,7.06624621 68.9685272,7.1402255 69.0793112,7.26968925 C69.190465,7.39915301 69.2829392,7.62109087 69.3199288,7.95399767 C69.3567335,8.28690447 69.3754133,8.76776985 69.3754133,9.39659381 L69.3754133,10.0993971 L67.7478689,10.0993971 L67.7478689,9.39659381 C67.7478689,8.74927503 67.7663637,8.26840965 67.8033534,7.95399767 C67.840343,7.6395857 67.9141374,7.41764783 68.0252912,7.26968925 Z M28.2058835,11.2275627 L28.2243783,11.2275627 L28.2243783,15.5925257 L30.4067673,15.5925257 L30.4067673,11.2275627 L32.9590528,2.10961535 L30.758169,2.10961535 L29.8334279,6.25245553 C29.5745003,7.4731138 29.4080469,8.32387562 29.3340677,8.84173065 L29.2785832,8.84173065 C29.1676143,8.12043258 29.0011609,7.25117593 28.779223,6.23396071 L27.8914715,2.10961535 L25.6905877,2.10961535 L28.2058835,11.2275627 Z M45.683398,5.75316931 L43.4640194,5.75316931 L43.4640194,13.5764791 C43.390225,13.7614273 43.2605763,13.9093859 43.0756281,14.0203548 C42.8906799,14.1496337 42.7057317,14.2053031 42.5207834,14.2053031 C42.2988456,14.2053031 42.1325771,14.112829 42.040103,13.9278807 C41.9476289,13.7429325 41.8919595,13.4285205 41.8919595,12.9846448 L41.8919595,5.75316931 L39.6725808,5.75316931 L39.6725808,13.1141086 C39.6725808,14.0388497 39.8207243,14.7044783 40.1349514,15.1300442 C40.4493633,15.5554251 40.9304137,15.777363 41.5777324,15.777363 C42.5207834,15.777363 43.2422664,15.3149924 43.704637,14.4087461 L43.7601215,14.4087461 L43.9450697,15.6109096 L45.683398,15.6109096 L45.683398,5.75316931 Z M57.0577137,5.75316931 L54.838335,5.75316931 L54.838335,13.5764791 C54.7645407,13.7614273 54.634892,13.9093859 54.4499438,14.0203548 C54.2649955,14.1496337 54.0800473,14.2053031 53.8950991,14.2053031 C53.6731612,14.2053031 53.5068928,14.112829 53.4144187,13.9278807 C53.3219446,13.7429325 53.2662751,13.4285205 53.2662751,12.9846448 L53.2662751,5.75316931 L51.0468965,5.75316931 L51.0468965,13.1141086 C51.0468965,14.0388497 51.19504,14.7044783 51.509267,15.1300442 C51.823679,15.5554251 52.3047293,15.777363 52.9520481,15.777363 C53.8950991,15.777363 54.6165821,15.3149924 55.0789527,14.4087461 L55.1344371,14.4087461 L55.3193854,15.6109096 L57.0577137,15.6109096 L57.0577137,5.75316931 Z M51.712821,3.90368709 L51.712821,2.10968933 L45.1471592,2.10968933 L45.1471592,3.90368709 L47.3478581,3.90368709 L47.3478581,15.5924147 L49.5119372,15.5924147 L49.5119372,3.90368709 L51.712821,3.90368709 Z M64.4001951,7.32526619 C64.2707314,6.69625729 64.0489784,6.2525665 63.7528763,5.97514417 C63.4569592,5.69772184 63.0317632,5.54976326 62.5137233,5.54976326 C62.1070221,5.54976326 61.7184459,5.66073219 61.3672292,5.90116488 C61.0156427,6.12310275 60.7382203,6.43751473 60.5532721,6.80741117 L60.5349622,6.80741117 L60.5349622,1.61018118 L58.3893779,1.61018118 L58.3893779,15.5924517 L60.2203653,15.5924517 L60.4424881,14.6677106 L60.4977876,14.6677106 C60.664241,15.0006174 60.9231685,15.25936 61.2747551,15.462988 C61.6259718,15.6479362 61.9958682,15.7587202 62.4212491,15.7587202 C63.1795369,15.7587202 63.7158867,15.4075035 64.0672883,14.7231951 C64.4188749,14.0388867 64.6038231,12.9475072 64.6038231,11.4866012 L64.6038231,9.93285118 C64.5851433,8.80485197 64.5296589,7.93559533 64.4001951,7.32526619 Z M62.3657647,11.3386426 C62.3657647,12.0597557 62.328775,12.6146004 62.2732906,13.0216714 C62.2178061,13.4285575 62.1070221,13.7242897 61.9773734,13.8909281 C61.8295998,14.0571965 61.6446516,14.1496706 61.4225287,14.1496706 C61.2375805,14.1496706 61.0711271,14.112866 60.9231685,14.0203918 C60.77521,13.9279177 60.6457462,13.798454 60.5532721,13.6318156 L60.5532721,8.04656426 C60.6274363,7.78763675 60.7567151,7.56569888 60.9416634,7.38075066 C61.1266116,7.21429726 61.3300546,7.12182315 61.5334977,7.12182315 C61.7554355,7.12182315 61.9403838,7.21429726 62.0513527,7.38075066 C62.1808165,7.56569888 62.2547957,7.86161604 62.3102802,8.26831718 C62.3657647,8.69388304 62.3844444,9.2855324 62.3844444,10.0440051 L62.3844444,11.3386426 L62.3657647,11.3386426 Z",fillOpacity:.3,fill:"#263238",fillRule:"nonzero"}),j.jsx("path",{d:"M22.9903436,3.45981136 C23.471209,5.21681947 23.4527142,8.87879427 23.4527142,8.87879427 C23.4527142,8.87879427 23.4527142,12.5222742 22.9903436,14.2792824 C22.7314161,15.2410131 21.9731284,15.9991159 21.0113977,16.2582283 C19.2543895,16.7205989 12.2263571,16.7205989 12.2263571,16.7205989 C12.2263571,16.7205989 5.21681947,16.7205989 3.44131653,16.2397335 C2.47958578,15.980806 1.72129807,15.2225183 1.46237056,14.2607875 C1,12.5222742 1,8.86029945 1,8.86029945 C1,8.86029945 1,5.21681947 1.46237056,3.45981136 C1.72129807,2.4980806 2.4980806,1.72129807 3.44131653,1.46237056 C5.19832465,1 12.2263571,1 12.2263571,1 C12.2263571,1 19.2543895,1 21.0113977,1.48086538 C21.9731284,1.73979289 22.7314161,2.4980806 22.9903436,3.45981136 Z M9.9884836,12.2263571 L15.8328474,8.86029945 L9.9884836,5.4942418 L9.9884836,12.2263571 Z M33.6063161,15.3149554 C33.1624404,15.0190383 32.8480284,14.5566677 32.6630802,13.9093489 C32.478132,13.280525 32.3856578,12.4297631 32.3856578,11.3940531 L32.3856578,9.96995179 C32.3856578,8.91574692 32.4966268,8.0649851 32.7000698,7.41766632 C32.9220077,6.77034755 33.2549145,6.30797699 33.6987902,6.01205983 C34.1611608,5.71614268 34.7529951,5.5681841 35.492788,5.5681841 C36.214086,5.5681841 36.8059204,5.71614268 37.2497961,6.01205983 C37.6938568,6.30797699 38.0080838,6.78884237 38.2115268,7.41766632 C38.4149699,8.04649028 38.5261238,8.8972521 38.5261238,9.96995179 L38.5261238,11.3940531 C38.5261238,12.448258 38.4336497,13.280525 38.2300217,13.9278437 C38.0265786,14.5566677 37.7121666,15.0375331 37.2682909,15.3334502 C36.8244152,15.6293674 36.214086,15.777326 35.4557983,15.777326 C34.6790158,15.7588311 34.0501918,15.6108726 33.6063161,15.3149554 Z M36.1031171,13.7613903 C36.2325809,13.4469784 36.2880653,12.9106285 36.2880653,12.1893305 L36.2880653,9.11918997 C36.2880653,8.41638672 36.2325809,7.8985317 36.1031171,7.5656249 C35.9736534,7.2327181 35.7702103,7.08475952 35.4557983,7.08475952 C35.1598812,7.08475952 34.9379433,7.25121292 34.8269744,7.5656249 C34.6975106,7.8985317 34.6420262,8.41638672 34.6420262,9.11918997 L34.6420262,12.1893305 C34.6420262,12.9106285 34.6975106,13.4469784 34.8269744,13.7613903 C34.9379433,14.0758023 35.1598812,14.2422557 35.4742932,14.2422557 C35.7702103,14.2422557 35.9736534,14.0942971 36.1031171,13.7613903 Z M67.7478689,11.3755398 L67.7478689,11.9118896 C67.7478689,12.5407136 67.7663637,13.021579 67.8033534,13.3359909 C67.840343,13.6504029 67.9141374,13.8908356 68.0437861,14.0202994 C68.1545701,14.1682579 68.3395183,14.2422372 68.5986307,14.2422372 C68.9313526,14.2422372 69.1534754,14.1127735 69.2829392,13.853846 C69.4124029,13.5949185 69.4678874,13.1695375 69.4861973,12.5592084 L71.3911639,12.6701773 C71.4098437,12.7626515 71.4098437,12.8736204 71.4098437,13.021579 C71.4098437,13.9278253 71.169411,14.6121337 70.6700508,15.0560094 C70.1706906,15.4998851 69.4678874,15.721823 68.5614561,15.721823 C67.4704466,15.721823 66.7119739,15.3704214 66.2682831,14.686113 C65.8244074,14.0018045 65.6022846,12.9475997 65.6022846,11.5050035 L65.6022846,9.78498507 C65.6022846,8.3053993 65.8244074,7.23269961 66.286778,6.54839118 C66.7491485,5.86408276 67.525931,5.53117596 68.6169406,5.53117596 C69.3754133,5.53117596 69.9672476,5.67913454 70.3739487,5.95655687 C70.7808348,6.23397921 71.0582571,6.67785494 71.2248955,7.25119443 C71.3911639,7.84302874 71.4653282,8.65680092 71.4653282,9.69251096 L71.4653282,11.3755398 L67.7478689,11.3755398 Z M68.0252912,7.26968925 C67.9141374,7.41764783 67.840343,7.6395857 67.8033534,7.95399767 C67.7663637,8.26840965 67.7478689,8.74927503 67.7478689,9.39659381 L67.7478689,10.0993971 L69.3754133,10.0993971 L69.3754133,9.39659381 C69.3754133,8.76776985 69.3567335,8.28690447 69.3199288,7.95399767 C69.2829392,7.62109087 69.190465,7.39915301 69.0793112,7.26968925 C68.9685272,7.1402255 68.783579,7.06624621 68.5614561,7.06624621 C68.3027136,7.04775138 68.1362602,7.12173067 68.0252912,7.26968925 Z M28.2058835,11.2275627 L25.6905877,2.10961535 L27.8914715,2.10961535 L28.779223,6.23396071 C29.0011609,7.25117593 29.1676143,8.12043258 29.2785832,8.84173065 L29.3340677,8.84173065 C29.4080469,8.32387562 29.5745003,7.4731138 29.8334279,6.25245553 L30.758169,2.10961535 L32.9590528,2.10961535 L30.4067673,11.2275627 L30.4067673,15.5925257 L28.2243783,15.5925257 L28.2243783,11.2275627 L28.2058835,11.2275627 Z M45.683398,5.75316931 L45.683398,15.6109096 L43.9450697,15.6109096 L43.7601215,14.4087461 L43.704637,14.4087461 C43.2422664,15.3149924 42.5207834,15.777363 41.5777324,15.777363 C40.9304137,15.777363 40.4493633,15.5554251 40.1349514,15.1300442 C39.8207243,14.7044783 39.6725808,14.0388497 39.6725808,13.1141086 L39.6725808,5.75316931 L41.8919595,5.75316931 L41.8919595,12.9846448 C41.8919595,13.4285205 41.9476289,13.7429325 42.040103,13.9278807 C42.1325771,14.112829 42.2988456,14.2053031 42.5207834,14.2053031 C42.7057317,14.2053031 42.8906799,14.1496337 43.0756281,14.0203548 C43.2605763,13.9093859 43.390225,13.7614273 43.4640194,13.5764791 L43.4640194,5.75316931 L45.683398,5.75316931 Z M57.0577137,5.75316931 L57.0577137,15.6109096 L55.3193854,15.6109096 L55.1344371,14.4087461 L55.0789527,14.4087461 C54.6165821,15.3149924 53.8950991,15.777363 52.9520481,15.777363 C52.3047293,15.777363 51.823679,15.5554251 51.509267,15.1300442 C51.19504,14.7044783 51.0468965,14.0388497 51.0468965,13.1141086 L51.0468965,5.75316931 L53.2662751,5.75316931 L53.2662751,12.9846448 C53.2662751,13.4285205 53.3219446,13.7429325 53.4144187,13.9278807 C53.5068928,14.112829 53.6731612,14.2053031 53.8950991,14.2053031 C54.0800473,14.2053031 54.2649955,14.1496337 54.4499438,14.0203548 C54.634892,13.9093859 54.7645407,13.7614273 54.838335,13.5764791 L54.838335,5.75316931 L57.0577137,5.75316931 Z M51.712821,3.90368709 L49.5119372,3.90368709 L49.5119372,15.5924147 L47.3478581,15.5924147 L47.3478581,3.90368709 L45.1471592,3.90368709 L45.1471592,2.10968933 L51.712821,2.10968933 L51.712821,3.90368709 Z M64.4001951,7.32526619 C64.5296589,7.93559533 64.5851433,8.80485197 64.6038231,9.93285118 L64.6038231,11.4866012 C64.6038231,12.9475072 64.4188749,14.0388867 64.0672883,14.7231951 C63.7158867,15.4075035 63.1795369,15.7587202 62.4212491,15.7587202 C61.9958682,15.7587202 61.6259718,15.6479362 61.2747551,15.462988 C60.9231685,15.25936 60.664241,15.0006174 60.4977876,14.6677106 L60.4424881,14.6677106 L60.2203653,15.5924517 L58.3893779,15.5924517 L58.3893779,1.61018118 L60.5349622,1.61018118 L60.5349622,6.80741117 L60.5532721,6.80741117 C60.7382203,6.43751473 61.0156427,6.12310275 61.3672292,5.90116488 C61.7184459,5.66073219 62.1070221,5.54976326 62.5137233,5.54976326 C63.0317632,5.54976326 63.4569592,5.69772184 63.7528763,5.97514417 C64.0489784,6.2525665 64.2707314,6.69625729 64.4001951,7.32526619 Z M62.3657647,11.3386426 L62.3844444,11.3386426 L62.3844444,10.0440051 C62.3844444,9.2855324 62.3657647,8.69388304 62.3102802,8.26831718 C62.2547957,7.86161604 62.1808165,7.56569888 62.0513527,7.38075066 C61.9403838,7.21429726 61.7554355,7.12182315 61.5334977,7.12182315 C61.3300546,7.12182315 61.1266116,7.21429726 60.9416634,7.38075066 C60.7567151,7.56569888 60.6274363,7.78763675 60.5532721,8.04656426 L60.5532721,13.6318156 C60.6457462,13.798454 60.77521,13.9279177 60.9231685,14.0203918 C61.0711271,14.112866 61.2375805,14.1496706 61.4225287,14.1496706 C61.6446516,14.1496706 61.8295998,14.0571965 61.9773734,13.8909281 C62.1070221,13.7242897 62.2178061,13.4285575 62.2732906,13.0216714 C62.328775,12.6146004 62.3657647,12.0597557 62.3657647,11.3386426 Z",fillOpacity:.6,fill:"#FFFFFF"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.LogoYoutubeIcon=a}),98);
__d("WAWebPipConst",["$InternalEnum","WAWebLogoFacebookIcon","WAWebLogoInstagramIcon","WAWebLogoYoutubeIcon"],(function(a,b,c,d,e,f,g){var h={YOUTUBE:"youtube.com",YOUTUBE_MOBILE:"m.youtube.com",YOUTUBE_SHORTENED:"youtu.be",INSTAGRAM:"instagram.com",STREAMABLE:"streamable.com",FACEBOOK:"facebook.com",FBWATCH:"fbwat.ch",FBWATCH_ALT:"fb.watch",SHARECHAT:"sharechat.com"};c=b("$InternalEnum").Mirrored(["FLOATER","OG_FLOATER","MEDIA_VIEWER"]);e=b("$InternalEnum").Mirrored(["OG","YOUTUBE","MSG"]);f=16/9;function i(a){switch(a){case h.YOUTUBE:case h.YOUTUBE_MOBILE:case h.YOUTUBE_SHORTENED:return d("WAWebLogoYoutubeIcon").LogoYoutubeIcon;case h.INSTAGRAM:return d("WAWebLogoInstagramIcon").LogoInstagramIcon;case h.FACEBOOK:return d("WAWebLogoFacebookIcon").LogoFacebookIcon;default:return null}}function a(a,b){a=i(a);a==null&&(a=i(b));return a}b={ONLINE_VIDEO_URL:{YOUTUBE:[/^https?:\/\/youtu\.be\/(.{11})/,/^https?:\/\/(m\.)?youtube\.com\/watch\?v=(.{11})/,/^https?:\/\/(m\.)?youtube\.com\/shorts\/(.{11})/]}};var j="t",k=/^(\d+h)?(\d+m)?(\d+s)?(\d+)?$/;g.HOSTNAME=h;g.PlayerType=c;g.PiPVideoType=e;g.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=f;g.getAttributionIcon=i;g.getAttributionIconWithDefault=a;g.URL_PATTERNS=b;g.YOUTUBE_URL_TIME_PARAM_NAME=j;g.YOUTUBE_URL_TIME_PARAM_PATTERN=k}),98);
__d("WAWebUtilsYoutubeUrlParser",["WAWebPipConst","WAWebURLUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebPipConst").URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE;for(var e=0;e<b.length;e++){var f=c("WAWebURLUtils").withoutWww(a).match(b[e]);if(f)return f[f.length-1]}return null}g.parseYoutubeVideoId=a}),98);
__d("WAWebMsgRcatUtils",["Promise","WABase64","WACryptoHkdf","WACryptoHmac","WANullthrows","WAWebABProps","WAWebFrontendMsgGetters","WAWebMsgGetters","WAWebMsgType","WAWebUserPrefsMeUser","WAWebUtilsYoutubeUrlParser","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i="Rcat",j=32;function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.nonce!=null)return a.nonce;var b=d("WAWebMsgGetters").getSender(a),c=d("WAWebUserPrefsMeUser").getMaybeMeUser();if(b==null||c==null)return null;if(a.rcat==null||a.messageSecret==null)return null;b=(yield n(a.id.id,a.messageSecret,d("WAWebWidToJid").widToUserJid(b),d("WAWebWidToJid").widToUserJid(c)));a.nonce=b;return b});return k.apply(this,arguments)}function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=new TextEncoder().encode([a,c,e,i].join(""));c=(yield d("WACryptoHkdf").extractAndExpand(b,a,j));return new Uint8Array(c)});return m.apply(this,arguments)}function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield l(a,b,c,e));return d("WABase64").encodeB64UrlSafe(a,!0)});return o.apply(this,arguments)}function p(a){var b;a=d("WAWebMsgGetters").getCanonicalUrl(a);if(a==null||a==="")return null;b=(b=d("WAWebUtilsYoutubeUrlParser").parseYoutubeVideoId(a))!=null?b:a;return new TextEncoder().encode(b)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WACryptoHmac").hmacSha256(b,a));return new Uint8Array(b).slice(0,8)});return r.apply(this,arguments)}function e(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=c("WANullthrows")(d("WAWebMsgGetters").getFrom(a)),g=p(a),i=d("WAWebMsgGetters").getMessageSecret(a);if(!d("WAWebABProps").getABPropConfigValue("web_youtube_rcat_chat_generation_enabled")||e.length===0||a.type!==d("WAWebMsgType").MSG_TYPE.CHAT||!d("WAWebFrontendMsgGetters").getIsUrlMessage(a)||i==null||g==null||!d("WAWebMsgGetters").getIsSentByMe(a)||e.length>d("WAWebABProps").getABPropConfigValue("maximum_group_size_for_rcat"))return null;var j=d("WAWebWidToJid").widToUserJid(f),k=new Map();f=e.map(function(b){var c=d("WAWebWidToJid").widToUserJid(b);return l(d("WAWebMsgGetters").getId(a).id,i,j,c).then(function(a){return q(g,a)}).then(function(a){k.set(c,a)})});yield (h||(h=b("Promise"))).all(f);return k});return s.apply(this,arguments)}g.genNonceForMsg=a;g.deriveNonce=l;g.deriveNonceString=n;g.genContentBindingForMsg=e}),98);
__d("WAWebQuotedMsgModelUtils",["WALogger","WAWebMsgGetters","WAWebMsgModelUtils","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebWid"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["null quotedParticipant in quotedMsg"]);h=function(){return a};return a}function a(a,b){a=i(a);return a?d("WAWebMsgGetters").getSender(a).equals(b):!1}function i(a){a=d("WAWebStateUtils").unproxy(a);if(!a.quotedMsg&&!a.paymentRequestMessageKey)return null;var b=a.getCollection();if(a.quotedMsgKey){var c=b.get(a.quotedMsgKey);if(c)return c.safe()}var e;a.quotedMsg?e=j(a,a.selectedCarouselCardIndex!=null?{interactiveHeader:void 0,isCarouselCard:void 0}:{}):a.paymentRequestMessageKey&&(e=k(a));if(e==null)return null;a.quotedMsgKey=e.id;e.ephemeralDuration=null;b.add(e.unsafe());return e}function j(a,b){b===void 0&&(b={});var e=d("WAWebUserPrefsMeUser").getMaybeMeUser(),f=a.quotedParticipant;if(f==null){d("WALogger").ERROR(h()).devConsole(a).sendLogs("null-quoted-participant");return null}var g=d("WAWebUserPrefsMeUser").isMeAccount(f),i=g?"out":"in",j=a.quotedRemoteJid?a.quotedRemoteJid:a.id.remote;g={id:a.quotedStanzaID,from:g?e:j,to:g?j:e,self:i,author:f,remote:j};e=c("WAWebWid").isGroup(g.from)||c("WAWebWid").isGroup(g.to);(e||c("WAWebWid").isStatusV3(j))&&(g.participant=f);Object.assign(g,a.quotedMsg,b);return d("WAWebMsgModelUtils").createQuotedMsg(g)}function k(a){if(!a.paymentRequestMessageKey)return null;var b=a.paymentRequestMessageKey.remote?a.paymentRequestMessageKey.remote:a.id.remote,c=a.paymentRequestMessageKey.fromMe,e=a.paymentRequestMessageKey.self!=null?a.paymentRequestMessageKey.self:c?"out":"in",f=a.paymentRequestMessageKey.participant||a.paymentMessageReceiverJid;c={id:a.paymentRequestMessageKey.id,from:c?d("WAWebUserPrefsMeUser").getMaybeMeUser():b,to:c?b:d("WAWebUserPrefsMeUser").getMaybeMeUser(),self:e,participant:f,author:f,remote:b,amount1000:a.paymentAmount1000,currency:a.paymentCurrency,receiverJid:d("WAWebMsgGetters").getSender(a),type:a.type,subtype:"request"};return d("WAWebMsgModelUtils").createQuotedMsg(c)}function b(a){a=d("WAWebStateUtils").unproxy(a);return a.quotedMsg==null?a.quotedRemoteJid:null}function e(a){a=d("WAWebStateUtils").unproxy(a);return a.quotedMsg==null?a.quotedGroupSubject:null}function f(a){a=d("WAWebStateUtils").unproxy(a);return a.quotedMsg==null?a.quotedParentGroupJid:null}g.isQuotedMsg=a;g.getQuotedMsgObj=i;g.createQuotedMsgObj=j;g.getQuotedPaymentRequestMsg=k;g.getQuotedMsgAdminGroupJid=b;g.getQuotedMsgAdminGroupSubject=e;g.getQuotedMsgAdminParentGroupJid=f}),98);
__d("WAWebStarredMsgCollection",["Promise","WALogger","WANullthrows","WAWebBaseCollection","WAWebCollectionConstants","WAWebFrontendMsgGetters","WAWebMsgCollection","WAWebMsgModel","WAWebSocketConstants","WAWebSocketModel"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["models:starred:update:error: "]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["starred msg sync error: "]);j=function(){return a};return a}e=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this)||this;b.syncPromise=null;b.isSynced=!1;b.listenTo(d("WAWebSocketModel").Socket,"change:stream",function(){d("WAWebSocketModel").Socket.stream===d("WAWebSocketConstants").SOCKET_STREAM.DISCONNECTED?b.isSynced=!1:d("WAWebSocketModel").Socket.stream===d("WAWebSocketConstants").SOCKET_STREAM.CONNECTED&&b["delete"]()});return b}var f=e.prototype;f.process=function(a,b,c,d){!d?this.updateMsgs(a,b,c):this["delete"]()};f.sync=function(a){if(this.isSynced)return(h||(h=b("Promise"))).resolve();if(this.syncPromise!=null)return this.syncPromise;var e=this,f,g=this.last();g&&(f=g.id);this.syncPromise=d("WAWebMsgCollection").MsgCollection.getStarred(a,d("WAWebCollectionConstants").PAGE_SIZE,f).then(function(a){a.length&&e.add(a,{silent:!0}),a.length<d("WAWebCollectionConstants").PAGE_SIZE&&(e.isSynced=!0)})["catch"](function(a){d("WALogger").WARN(j()).devConsole(a)})["finally"](function(){e.syncPromise=null,e.trigger("sync")});this.trigger("sync");return c("WANullthrows")(this.syncPromise,"syncPromise can not be null")};f.updateMsgs=function(a,c,e){var f=this,g=this.syncPromise||(h||(h=b("Promise"))).resolve();this.syncPromise=g.then(function(){if(a){var g=c.length>0?d("WAWebMsgCollection").MsgCollection.incrementalStarredUpdate(c):(h||(h=b("Promise"))).resolve([]);return g.then(function(a){a=a.concat(e);f.isSynced&&f.add(a,{silent:!0});a.forEach(function(a){var b;(b=d("WAWebFrontendMsgGetters").getChat(a).starredMsgs)==null?void 0:b.add(a)});f.trigger("sync")})["catch"](function(a){d("WALogger").WARN(i()).devConsole(a)})}g=c.concat(e).filter(function(a){return!a.star});l(g)})["finally"](function(){f.syncPromise=null})};f["delete"]=function(){this.isSynced=!1,a.prototype["delete"].call(this)};return e}(d("WAWebBaseCollection").BaseCollection);e.model=d("WAWebMsgModel").Msg;e.comparator=function(a,b){return b.t-a.t};var k=new e();function a(a){k.add(a),a.forEach(function(a){var b;(b=d("WAWebFrontendMsgGetters").getChat(a).starredMsgs)==null?void 0:b.add(a)})}function l(a){k.remove(a),a.forEach(function(a){var b;(b=d("WAWebFrontendMsgGetters").getChat(a).starredMsgs)==null?void 0:b.remove(a)})}g.StarredMsgCollection=e;g.AllStarredMsgsCollection=k;g.addStarredMsgs=a;g.removeStarredMsgs=l}),98);
__d("WAWebSyncButtonState",["WANullthrows","WAWebBizInteractiveMessageQuickReplyAction","WAWebFrontendMsgGetters","WAWebMsgButtonReplyMsgCollection","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgType","WAWebQuotedMsgModelUtils","WAWebTemplateButtonReplyMsgCollection","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a){h(a),i(a),j(a)}function h(a){var b=function(b){var e=a[b];if(!e)return"continue";if(e.selectedCarouselCardIndex!=null)return"continue";if(k(e)){b=d("WAWebFrontendMsgGetters").getChat(e);b.msgUnsyncedButtonReplyMsgs==null&&(b.msgUnsyncedButtonReplyMsgs=new(c("WAWebMsgButtonReplyMsgCollection"))());b=b.msgUnsyncedButtonReplyMsgs;var f=d("WAWebQuotedMsgModelUtils").getQuotedMsgObj(e);if(!f)return"continue";var g=b.get(f.id);g||(b.add({id:f.id,unsyncedButtonReplies:new(c("WAWebTemplateButtonReplyMsgCollection"))()}),g=b.get(f.id));b=c("WANullthrows")(g);g=b.unsyncedButtonReplies;g.add(e);b=d("WAWebMsgCollection").MsgCollection.get(f.id);if(b==null?void 0:b.buttons){f=b.buttons.get(""+c("WANullthrows")(e.selectedIndex));f&&(f.selected=!0);g.remove(e)}}else if(e.isFromTemplate&&e.buttons){b=d("WAWebFrontendMsgGetters").getChat(e);f=b.msgUnsyncedButtonReplyMsgs;if(f==null)return"continue";g=f.get(e.id);g&&(g.unsyncedButtonReplies.forEach(function(a){a=c("WANullthrows")(e.buttons).get(""+c("WANullthrows")(a.selectedIndex));a&&(a.selected=!0)}),g.unsyncedButtonReplies["delete"]())}};for(var e=0;e<a.length;e++){var f=b(e);if(f==="continue")continue}}function i(a){var b=function(b){var c=a[b];if(!c)return"continue";if(c.selectedCarouselCardIndex!=null)return"continue";if(c.type===d("WAWebMsgType").MSG_TYPE.BUTTONS_RESPONSE&&c.selectedButtonId!=null&&d("WAWebMsgGetters").getSender(c).equals(d("WAWebUserPrefsMeUser").getMaybeMeUser())){b=d("WAWebQuotedMsgModelUtils").getQuotedMsgObj(c);if(!b)return"continue";b=d("WAWebMsgCollection").MsgCollection.get(b.id);if(b==null?void 0:b.replyButtons){b=b.replyButtons.get(c.selectedButtonId);b&&(b.selected=!0)}}else if(c.isDynamicReplyButtonsMsg&&c.replyButtons&&c.replyButtons.every(function(a){return!a.selected})&&d("WAWebFrontendMsgGetters").getChat(c)){b=Math.max(0,d("WAWebFrontendMsgGetters").getChat(c).msgs.length-1e3);d("WAWebFrontendMsgGetters").getChat(c).msgs.getModelsArray().slice(b).filter(function(a){return a.type===d("WAWebMsgType").MSG_TYPE.BUTTONS_RESPONSE&&a.selectedButtonId!=null&&d("WAWebMsgGetters").getSender(a).equals(d("WAWebUserPrefsMeUser").getMaybeMeUser())&&((a=d("WAWebQuotedMsgModelUtils").getQuotedMsgObj(a))==null?void 0:a.id.toString())===c.id.toString()}).map(function(a){a=a.selectedButtonId;return a}).forEach(function(a){var b;b=(b=c.replyButtons)==null?void 0:b.get(a);b!=null&&(b.selected=!0)})}};for(var c=0;c<a.length;c++){var e=b(c);if(e==="continue")continue}}function j(a){var b=function(b){var e=a[b];if(!e)return"continue";if(k(e)&&e.selectedCarouselCardIndex!=null){b=c("WANullthrows")(e.selectedCarouselCardIndex);var f=c("WANullthrows")(e.selectedIndex),g=d("WAWebQuotedMsgModelUtils").getQuotedMsgObj(e);if(!g)return"continue";g=d("WAWebMsgCollection").MsgCollection.get(g.id);if(g==null)return"continue";if(g.carouselCardsParsed==null||g.carouselCardsParsed[b]==null)return"continue";var h=g.carouselCardsParsed.slice();h[b]=babelHelpers["extends"]({},h[b],{interactivePayload:d("WAWebBizInteractiveMessageQuickReplyAction").rebuildInteractivePayloadWithDisabledButton(h[b].interactivePayload,f)});g.carouselCardsParsed=h}else if(e.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&e.carouselCardsParsed!=null&&d("WAWebFrontendMsgGetters").getChat(e)){b=Math.max(0,d("WAWebFrontendMsgGetters").getChat(e).msgs.length-1e3);f=d("WAWebFrontendMsgGetters").getChat(e).msgs.getModelsArray().slice(b).filter(function(a){return k(e)&&a.selectedCarouselCardIndex!=null&&((a=d("WAWebQuotedMsgModelUtils").getQuotedMsgObj(a))==null?void 0:a.id.toString())===e.id.toString()});if(f.length===0)return"continue";g=c("WANullthrows")(e.carouselCardsParsed).slice();for(h=f,b=Array.isArray(h),f=0,h=b?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(b){if(f>=h.length)break;i=h[f++]}else{f=h.next();if(f.done)break;i=f.value}i=i;var j=c("WANullthrows")(i.selectedCarouselCardIndex);i=c("WANullthrows")(i.selectedIndex);if(g[j]==null)continue;g[j]=babelHelpers["extends"]({},g[j],{interactivePayload:d("WAWebBizInteractiveMessageQuickReplyAction").rebuildInteractivePayloadWithDisabledButton(g[j].interactivePayload,i)})}e.carouselCardsParsed=g}};for(var e=0;e<a.length;e++){var f=b(e);if(f==="continue")continue}}function k(a){return a.type===d("WAWebMsgType").MSG_TYPE.TEMPLATE_BUTTON_REPLY&&a.selectedIndex!=null&&d("WAWebMsgGetters").getSender(a).equals(d("WAWebUserPrefsMeUser").getMaybeMeUser())}g["default"]=a}),98);
__d("WAWebBlocklistCollection",["WAWebBaseCollection","WAWebBlocklistModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.dedupedList=function(){var a=this;return this.filter(function(b){b=b.contact();var c=b.phoneNumber;return b.id.isLid()&&c!=null?a.get(c)==null:!0})};return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebBlocklistModel");b=new a();g.BlocklistCollectionImpl=a;g.BlocklistCollection=b}),98);
__d("WAWebBlocklistModel",["WAWebBaseModel","WAWebBlocklistCollection","WAWebContactCollection","WAWebWid"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.contact=function(){var a=b("WAWebContactCollection").ContactCollection;a=a.gadd(this.id);return a};e.getCollection=function(){return b("WAWebBlocklistCollection").BlocklistCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="blocklist";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),98);
__d("WAWebKeptMsgCollection",["WAWebBaseCollection","WAWebMsgModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.isSynced=!0,c.syncPromise=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.process=function(){};d.sync=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}();d.updateMsgs=function(){};return c}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebMsgModel").Msg;a.comparator=function(a,b){return b.t-a.t};g.KeptMsgCollection=a}),98);
__d("WAWebPresenceCollection",["WAWebBaseCollection","WAWebChatCollection","WAWebContactPresenceBridge","WAWebPresenceModel","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var d,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(d=e=a.call.apply(a,[this].concat(g))||this,e.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=e.gadd(a);if(!b.isUser||c("WAWebWid").isServer(a)||c("WAWebWid").isPSA(a))return{id:a};yield e._subscribe(a);return{id:a}});return function(b){return a.apply(this,arguments)}}(),d)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f._subscribe=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=b("WAWebChatCollection").ChatCollection;c=c.get(a);yield d("WAWebContactPresenceBridge").subscribePresence(a,c==null?void 0:c.getTcToken())});function a(b){return a.apply(this,arguments)}return a}();f.reSubscribeWhenActive=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.get(a);if(b==null||b.isSubscribed===!1)return;yield this._subscribe(a)});function c(b){return a.apply(this,arguments)}return c}();f.clearAllPresence=function(){this.forEach(function(a){a.reset(),a.set({stale:!0,isSubscribed:!1})})};return e}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebPresenceModel").Presence;a.staleCollection=!0;e=new a();g.PresenceCollectionImpl=a;g.PresenceCollection=e}),98);
__d("WAWebPresenceEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Info","Business","ChatAssignment","None","LastSeen","E2EE","Self","CommunityName","OnlyAdminsCanSend"]);f.WithholdDisplayStage=a}),66);
__d("WAWebPresenceModel",["fbt","WALogger","WAWebBaseCollection","WAWebBaseModel","WAWebChatAssignmentCollection","WAWebChatAssignmentUtils","WAWebChatCollection","WAWebChatContactUtils","WAWebClock","WAWebCommunityGatingUtils","WAWebContactCollection","WAWebContactGetters","WAWebElevatedPushNamesFlag","WAWebFrontendContactGetters","WAWebGroupType","WAWebPresenceCollection","WAWebPresenceEnum","WAWebPrivacyGatingUtils","WAWebTextStatusGatingUtils","WAWebWid","lodash"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getUserSubtitleText is used when presence is not for a user"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getGroupSubtitleText is used when presence is not for a group"]);j=function(){return a};return a}var k=3e3,l=5e3,m=2e3;e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.deny=d("WAWebBaseModel").prop(),c.updateTime=d("WAWebBaseModel").session(),c.expireTimerId=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}return b}((a=d("WAWebBaseModel")).BaseModel);e.Proxy="chatstate";e.idClass=c("WAWebWid");var n=a.defineModel(e),o=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WAWebBaseCollection").BaseCollection);o.model=n;f=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.isOnline=d("WAWebBaseModel").session(!1),e.stale=d("WAWebBaseModel").session(!0),e.hasData=d("WAWebBaseModel").session(!1),e.isSubscribed=d("WAWebBaseModel").session(!1),e.withholdDisplayStage=d("WAWebBaseModel").session(d("WAWebPresenceEnum").WithholdDisplayStage.None),e.forceDisplay=d("WAWebBaseModel").session(!1),e.chatActive=d("WAWebBaseModel").session(!1),e.withholdDisplayTimer=d("WAWebBaseModel").session(),e.forceDisplayTimer=d("WAWebBaseModel").session(),e.chatstate=d("WAWebBaseModel").session(),e.chatstates=d("WAWebBaseModel").collection(o),e.isGroup=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isGroup(this.id)}),e.isUser=d("WAWebBaseModel").derived(function(){return c("WAWebWid").isUser(this.id)}),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.initialize=function(){var b=this;a.prototype.initialize.call(this);var d=this.isGroup?{id:"",type:"unavailable"}:{id:this.id};this.addChild("chatstate",new n(d));this.isGroup?this.listenTo(this.chatstates,"add change",c("lodash").debounce(function(){var a,c=!1;b.chatstates.forEach(function(b){(b.type==="typing"||b.type==="recording_audio")&&(!a||a.updateTime<b.updateTime)&&(a=b),c=c||b.type==="available"});b.set({isOnline:c});b.chatstate.set({id:a?a.id:"",type:a?a.type:"unavailable"})})):this.listenTo(this.chatstate,"change:type",function(){b.chatstate.type==="available"?b.isOnline=!0:b.chatstate.type==="unavailable"&&(b.isOnline=!1)});this.listenTo(this,"change:chatActive",this.$PresenceImpl1)};f["delete"]=function(){a.prototype["delete"].call(this),this.getCollection().remove(this.id),this.chatstate["delete"](),this.chatstates.forEach(function(a){return a["delete"]()})};f.reset=function(){this.hasData=!1,this.isGroup?this.chatstates.forEach(function(a){a.type="unavailable"}):this.isUser&&(this.chatstate.unset("t"),this.chatstate.unset("deny")),this.chatstate.set({id:this.isGroup?"":this.id,type:"unavailable",t:void 0,deny:void 0})};f.isActive=function(){var a=this.chatstate.type;return this.hasData&&(a==="typing"||a==="recording_audio")};f.getGroupSubtitleText=function(a){if(!this.hasData)return null;if(!this.isGroup){d("WALogger").ERROR(j()).sendLogs("getGroupSubtitleText-not-group");return null}var b=this.$PresenceImpl2();if(b==null)return null;var c;a=(a=a==null?void 0:a.elevatedPushNamesEnabled)!=null?a:!1;a=d("WAWebElevatedPushNamesFlag").pushNameCanBeUsed(b)&&a;if(a){a=d("WAWebChatContactUtils").getFormattedNotifyName(d("WAWebContactGetters").getNotifyName(b));var e=d("WAWebChatContactUtils").getAccessibleNotifyName(d("WAWebContactGetters").getNotifyName(b));c=this.chatstate.type==="typing"?h._("__JHASH__6o--9L3bSdN__JHASH__",[h._param("member",e)]):h._("__JHASH__Flge9Iim8X___JHASH__",[h._param("member",e)])}else a=d("WAWebFrontendContactGetters").getFormattedShortName(b);return{text:this.chatstate.type==="typing"?h._("__JHASH__6o--9L3bSdN__JHASH__",[h._param("member",a)]):h._("__JHASH__Flge9Iim8X___JHASH__",[h._param("member",a)]),ariaLabel:c}};f.$PresenceImpl2=function(){var a=this.chatstate.id;return!a?null:d("WAWebContactCollection").ContactCollection.get(a)};f.getUserSubtitleText=function(){if(!this.hasData)return null;if(!this.isUser){d("WALogger").ERROR(i()).sendLogs("getUserSubtitleText-not-user");return null}var a=this.chatstate;switch(a.type){case"available":return h._("__JHASH__eEK09e1u3Td__JHASH__");case"typing":return h._("__JHASH__85WX21a8K_r__JHASH__");case"recording_audio":return h._("__JHASH__AB1uNgRUKvR__JHASH__");case"unavailable":return a.deny||a.t==null?null:d("WAWebClock").Clock.lastSeenStr(a.t)}};f.getFormattedString=function(a){if(!this.hasData)return null;else if(this.isGroup){a=this.getGroupSubtitleText(a);if(a!=null)return{text:a.text,ariaLabel:a.ariaLabel}}else if(this.isUser)return{text:this.getUserSubtitleText()};return null};f.getGroupStages=function(a){var b,c=[];d("WAWebCommunityGatingUtils").communitiesEnabled()&&((b=a.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP&&((b=a.groupMetadata)==null?void 0:b.participants.iAmMember())&&c.push(d("WAWebPresenceEnum").WithholdDisplayStage.CommunityName);(a==null?void 0:(b=a.groupMetadata)==null?void 0:b.participants.iAmAdmin())&&((b=a.groupMetadata)==null?void 0:b.announce)?(c.push(d("WAWebPresenceEnum").WithholdDisplayStage.OnlyAdminsCanSend),d("WAWebPrivacyGatingUtils").isDataPrivacyPhase2Enabled()&&(a==null?void 0:a.isE2ee)&&c.push(d("WAWebPresenceEnum").WithholdDisplayStage.E2EE)):d("WAWebPrivacyGatingUtils").isDataPrivacyPhase2Enabled()&&(a==null?void 0:a.isE2ee)?c.push(d("WAWebPresenceEnum").WithholdDisplayStage.E2EE):c.push(d("WAWebPresenceEnum").WithholdDisplayStage.Info);d("WAWebTextStatusGatingUtils").receiveTextStatusForNewSurfacesEnabled()&&c.push(d("WAWebPresenceEnum").WithholdDisplayStage.LastSeen);c.push(d("WAWebPresenceEnum").WithholdDisplayStage.None);return c};f.$PresenceImpl1=function(){var a=this,c=this.chatActive;if(c){c=d("WAWebChatAssignmentCollection").ChatAssignmentCollection.getAgentCollectionForChatId(this.id).length>0;var e=this.$PresenceImpl2(),f=e&&d("WAWebContactGetters").getIsMe(e),g=[],h=b("WAWebChatCollection");h=h.ChatCollection;h=h.get(this.id);(h==null?void 0:h.isGroup)?g=this.getGroupStages(h):f===!0?(d("WAWebPrivacyGatingUtils").isDataPrivacyPhase2Enabled()&&(h==null?void 0:h.isE2ee)&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.E2EE),g.push(d("WAWebPresenceEnum").WithholdDisplayStage.Self),p(this,g)):this.hasData?(d("WAWebChatAssignmentUtils").canAssignChats()&&c&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.ChatAssignment),(e==null?void 0:e.isBusiness)===!0&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.Business),d("WAWebTextStatusGatingUtils").receiveTextStatusForNewSurfacesEnabled()&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.LastSeen),g.length>0?g.push(d("WAWebPresenceEnum").WithholdDisplayStage.None):(d("WAWebTextStatusGatingUtils").receiveTextStatusForNewSurfacesEnabled()&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.LastSeen),g.push(d("WAWebPresenceEnum").WithholdDisplayStage.None))):(d("WAWebChatAssignmentUtils").canAssignChats()&&c&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.ChatAssignment),(e==null?void 0:e.isBusiness)===!0&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.Business),d("WAWebPrivacyGatingUtils").isDataPrivacyPhase2Enabled()&&(h==null?void 0:h.isE2ee)?g.push(d("WAWebPresenceEnum").WithholdDisplayStage.E2EE):g.push(d("WAWebPresenceEnum").WithholdDisplayStage.Info),d("WAWebTextStatusGatingUtils").receiveTextStatusForNewSurfacesEnabled()&&g.push(d("WAWebPresenceEnum").WithholdDisplayStage.LastSeen),g.push(d("WAWebPresenceEnum").WithholdDisplayStage.None));p(this,g);this.forceDisplayTimer=self.setTimeout(function(){a.set({forceDisplay:!0,forceDisplayTimer:void 0})},m)}else this.withholdDisplayTimer&&(self.clearTimeout(this.withholdDisplayTimer),this.withholdDisplayTimer=void 0),this.forceDisplayTimer&&(self.clearTimeout(this.forceDisplayTimer),this.forceDisplayTimer=void 0)};f.subscribe=function(){return this.getCollection().find(this.id)};f.getCollection=function(){return b("WAWebPresenceCollection").PresenceCollection};return e}(a.BaseModel);f.Proxy="presence";f.idClass=c("WAWebWid");function p(a,b){if(b.length===0)return;var c=b[0],e=b.slice(1);a.set({withholdDisplayStage:c,withholdDisplayTimer:c===d("WAWebPresenceEnum").WithholdDisplayStage.None?null:self.setTimeout(function(){p(a,e)},c===d("WAWebPresenceEnum").WithholdDisplayStage.Business?l:k)})}e=a.defineModel(f);g.ChatstateCollection=o;g.processStagesRecursively=p;g.Presence=e;g.Chatstate=n}),226);
__d("WAWebUserDisclosureCollection",["WAWebBaseCollection","WAWebGetUserDisclosuresContentsAction","WAWebUserDisclosureModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=864e5;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,i=new Array(g),j=0;j<g;j++)i[j]=arguments[j];return(e=f=a.call.apply(a,[this].concat(i))||this,f.findImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=f.get(a);if(e!=null&&e.privacyDisclosureModal!=null&&e.endDate!=null&&((b=e.endDate)==null?void 0:b.getTime())>new Date().getTime()&&new Date().getTime()-e.lastUpdated.getTime()<h)return e;b=(yield d("WAWebGetUserDisclosuresContentsAction").getDisclosuresContentAction(parseInt(a,10)));if(b!=null){e=new(c("WAWebUserDisclosureModel"))({id:b.disclosureId,policyVersion:b.policyVersion,privacyDisclosureModal:b.privacyDisclosureModal,endDate:b.endDate,lastUpdated:new Date()});f.gadd(e,{merge:!0});return e}});return function(b){return a.apply(this,arguments)}}(),e)||babelHelpers.assertThisInitialized(f)}var f=e.prototype;f.updateNoticeStage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e=this.get(a);if(e)e.accepted=b,e.lastUpdated=new Date(),yield this.update(e);else{e=new(c("WAWebUserDisclosureModel"))({id:a,policyVersion:d,accepted:b,lastUpdated:new Date()});this.gadd(e,{merge:!0})}});function d(b,c,d){return a.apply(this,arguments)}return d}();return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebUserDisclosureModel");e=new a();g.UserDisclosureCollectionImpl=a;g.UserDisclosureCollection=e}),98);
__d("WAWebUserDisclosureModel",["WAWebBaseModel","WAWebUserDisclosureCollection"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.policyVersion=d("WAWebBaseModel").prop(),c.privacyDisclosureModal=d("WAWebBaseModel").prop(),c.endDate=d("WAWebBaseModel").prop(),c.accepted=d("WAWebBaseModel").session(),c.lastUpdated=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getCollection=function(){return b("WAWebUserDisclosureCollection").UserDisclosureCollection};return c}(d("WAWebBaseModel").BaseModel);a.Proxy="userDisclosure";c=d("WAWebBaseModel").defineModel(a);g["default"]=c}),98);
__d("WAWebViewOnceState",["WATimeUtils","WAWebAck","WAWebFrontendMsgGetters","WAWebStateUtils","gkx"],(function(a,b,c,d,e,f,g){var h=14*24*60*60;function i(a){a=d("WAWebStateUtils").unproxy(a);return a!=null?d("WAWebFrontendMsgGetters").getAsViewOnce(a.unsafe()):null}function a(a){return!j(a)&&!k(a)}function j(a){return((a=i(a))==null?void 0:a.ack)===d("WAWebAck").ACK.PLAYED}function k(a){a=i(a);if(a==null)return!1;var b=d("WATimeUtils").unixTime()-d("WAWebStateUtils").unproxy(a).t;return!j(a)&&b>=h}function b(){c("gkx")("26258")||(h=10)}g.VIEW_ONCE_EXPIRE_AFTER=h;g.isUnviewed=a;g.isViewed=j;g.isExpired=k;g.setViewOnceTestExpire_INTERNAL=b}),98);
__d("WAWebStatusV3Getters",["WALogger","WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bad status v3 read count, ",", ",""]);h=function(){return a};return a}a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createStatusV3Cache});b=a.field;c=a.computed;e=a.unsafeIdentityGetter;f=a.clearCacheFor;a=f;f=e;e=b("id");var i=b("t"),j=b("unreadCount");b=b("totalCount");var k=c(function(a){a=a[0];return a>0},[j]);c=c(function(a){var b=a[0];a=a[1];var c=a-b;if(Number.isFinite(c))return c;d("WALogger").WARN(h(),a,b);return 0},[j,b]);g.clearStatusV3GetterCacheFor=a;g.getStatusV3Unsafe=f;g.getId=e;g.getT=i;g.getUnreadCount=j;g.getTotalCount=b;g.getHasUnread=k;g.getReadCount=c}),98);
__d("WAWebWebcStatusSessionWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcStatusSession:[1880,{webcStatusMutedItemCount:[4,a.TYPES.INTEGER],webcStatusMutedRowCount:[7,a.TYPES.INTEGER],webcStatusRecentItemCount:[2,a.TYPES.INTEGER],webcStatusRecentRowCount:[5,a.TYPES.INTEGER],webcStatusSessionId:[1,a.TYPES.INTEGER],webcStatusViewedItemCount:[3,a.TYPES.INTEGER],webcStatusViewedRowCount:[6,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcStatusSession:[]});g.WebcStatusSessionWamEvent=b}),98);
__d("WAWebWebcStatusSyncWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcStatusSync:[1878,{webcStatusMutedItemCount:[4,a.TYPES.INTEGER],webcStatusMutedRowCount:[7,a.TYPES.INTEGER],webcStatusRecentItemCount:[2,a.TYPES.INTEGER],webcStatusRecentRowCount:[5,a.TYPES.INTEGER],webcStatusSyncT:[1,a.TYPES.TIMER],webcStatusViewedItemCount:[3,a.TYPES.INTEGER],webcStatusViewedRowCount:[6,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcStatusSync:[]});g.WebcStatusSyncWamEvent=b}),98);
__d("WAWebStatusV3Collection",["Promise","WAJids","WALogger","WATimeUtils","WAWebABProps","WAWebApiContact","WAWebBaseCollection","WAWebContactGetters","WAWebContactStatusBridge","WAWebLidMigrationUtils","WAWebMediaOpaqueData","WAWebMsgCollection","WAWebStatusV3Getters","WAWebStatusV3Model","WAWebUserPrefsMeUser","WAWebWebcStatusSessionWamEvent","WAWebWebcStatusSyncWamEvent","WAWebWidFactory","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Total count: ",", msgs length: ",""]);i=function(){return a};return a}var j=3600*24;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var c,e;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(c=e=a.call.apply(a,[this].concat(g))||this,e.findImpl=function(a){return(h||(h=b("Promise"))).resolve({id:a})},e.findQueryImpl=function(){return d("WAWebContactStatusBridge").queryStatusAll()},c)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.findQuery=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c,d){var e=this;c=(yield a.prototype.findQuery.call(this,c,d));d=c||[];yield (h||(h=b("Promise"))).all(d.map(function(a){if(!a)return;var c=0;a.msgs.forEach(function(b){c<a._msgs.length&&a._msgs[c].id.toString()===b.id.toString()?++c:b["delete"]()});return a._msgs.length>0?e.addStatusMessages(a.id,a._msgs):(h||(h=b("Promise"))).resolve()}));return d});function d(a,b){return c.apply(this,arguments)}return d}();f.sync=function(a){var b=this,c=window.performance.now();return this.findQuery({},{set:this.hasSynced()})["finally"](function(){b.trigger("sync")}).then(function(a){var e=window.performance.now();e=Math.round(e-c);b.logMetrics({type:"sync",syncTime:e});b.forEach(function(a){a.msgs.length>a.totalCount&&d("WALogger").LOG(i(),a.totalCount,a.msgs.length)});return a})};f.logMetrics=function(a){var b;a.type==="sync"?b=new(d("WAWebWebcStatusSyncWamEvent").WebcStatusSyncWamEvent)({webcStatusSyncT:a.syncTime}):b=new(d("WAWebWebcStatusSessionWamEvent").WebcStatusSessionWamEvent)({webcStatusSessionId:a.sessionId});a=this.filter(function(a){return!d("WAWebContactGetters").getIsMe(a.contact)});var e=a.filter(function(a){return!a.contact.statusMute}),f=e.filter(function(a){return d("WAWebStatusV3Getters").getHasUnread(a)}),g=e.filter(function(a){return!d("WAWebStatusV3Getters").getHasUnread(a)});a=a.filter(function(a){return a.contact.statusMute});var h=c("lodash").sum(e.map(function(a){return a.unreadCount}));e=c("lodash").sum(e.map(function(a){return d("WAWebStatusV3Getters").getReadCount(a)}));var i=c("lodash").sum(a.map(function(a){return a.totalCount}));b.webcStatusRecentItemCount=h;b.webcStatusRecentRowCount=f.length;b.webcStatusViewedItemCount=e;b.webcStatusViewedRowCount=g.length;b.webcStatusMutedItemCount=i;b.webcStatusMutedRowCount=a.length;b.commit()};f.hasSynced=function(){return!0};f.getStatusModel=function(a,b){var c=this.get(a);if(c==null&&b){b=a!=null?d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a)):null;c=b!=null?this.get(b):null}return c};f.handleUpdate=function(a,b,e){b=a.id.fromMe?d("WAWebUserPrefsMeUser").getMaybeMeUser():a.author;if(this.hasSynced()){if(e)return!0;e=a.subtype==="sender_revoke";var f=this.getStatusModel(b,e);if(f){var g=f.totalCount===f.msgs.length;if(e){var h=a.protocolMessageKey,i=h!=null?d("WAWebLidMigrationUtils").getAlternateMsgKey(h):null,j=!1;h!=null&&(j=f.containsMessage(h)||f.containsMessage(i));if(j!==!0)return!0;j=h==null?void 0:h.toString();h=i==null?void 0:i.toString();i={totalCount:f.totalCount-1};((f==null?void 0:f.isUnreadMessage(j))||(f==null?void 0:f.isUnreadMessage(h)))&&(i.unreadCount=f.unreadCount-1);f.set(i)}else{j={totalCount:f.totalCount+1};a.invis||(j.unreadCount=f.unreadCount+1);j.t=a.t;f.set(j)}!g&&a.body&&c("WAWebMediaOpaqueData").createFromBase64Jpeg(a.body).then(function(a){f.pic=a});return g}if(e)return!0;this.add({id:b,t:a.t,unreadCount:a.invis?0:1,totalCount:1});return!0}return!1};f.addStatusMessages=function(a,b){return d("WAWebMsgCollection").MsgCollection.processMultipleMessages(d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID),b,{add:"after",isHistory:!0},"addStatusMessages")};f.getUnexpired=function(a){var b=!1;b=d("WAWebABProps").getABPropConfigValue("web_status_psa");var e=this.filter(function(a){if(a.totalCount<=0)return!1;if(a.isExpired())return!1;if(d("WAWebContactGetters").getIsMe(a.contact))return!1;if(d("WAWebContactGetters").getIsMyContact(a.contact))return!0;return d("WAWebContactGetters").getIsPSA(a.contact)?b:!1});b&&e.sort(function(a,b){return d("WAWebContactGetters").getIsPSA(a.contact)===d("WAWebContactGetters").getIsPSA(b.contact)?0:d("WAWebContactGetters").getIsPSA(a.contact)?-1:1});if(a){a=c("lodash").filter(e,function(a){return a.unreadCount>0});return a}a=c("lodash").filter(e,function(a){return a.unreadCount===0});return a};f.getMyStatus=function(){var a=this.filter(function(a){return d("WAWebContactGetters").getIsMe(a.contact)});if(c("lodash").isEmpty(a))return;else if(d("WATimeUtils").unixTime()-a[0].t>j)return;return a[0]};f.getPSAStatus=function(){var a=this.filter(function(a){return d("WAWebContactGetters").getIsPSA(a.contact)});if(a.length===0)return;return a[0]};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebStatusV3Model");a.comparator=function(a,b){return b.t-a.t};e=new a();g.StatusV3CollectionImpl=a;g.StatusV3Collection=e}),98);
__d("WAWebFrontendStatusV3Getters",["WAWebGetters","WAWebGettersCaches","WAWebStatusV3Getters"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({root:d("WAWebStatusV3Getters").getStatusV3Unsafe,createCache:d("WAWebGettersCaches").createFrontendStatusV3Cache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;d=b("msgs");a=b("msgsChanged");e=b("contact");b=c(function(a){a[0];a=a[1];return a.last()},[a,d]);g.clearFrontendStatusV3GetterCacheFor=f;g.getMsgs=d;g.getMsgsChanged=a;g.getContact=e;g.getLastStatus=b}),98);
__d("WAWebStatusPSAUtils",["WATimeUtils"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.length===0)return-1;var c=0,d=b[0].campaignId;for(var e=1;e<b.length;e++){var f=b[e],g=f.id;f=f.campaignId;d!==f?(d=f,c=0):c++;if(g.toString()===a.toString())return c}return-1}function b(a){var b=h(a),c=[];Object.keys(b).forEach(function(a){var d=b[a],e=d.numberOfStatus;d=d.numberOfReadStatus;e=e-d;c.push(a+":"+e)});return c.join(",")}function h(a){var b={};a.forEach(function(a){var c=a.t,d=a.campaignId,e=a.campaignDuration;a=a.statusPSAReadTimestamp;if(!d)return;b[d]||(b[d]={id:d,t:c,duration:e,firstReadTimestamp:null,numberOfStatus:0,numberOfReadStatus:0});c=b[d];c.numberOfStatus++;a!=null&&(c.numberOfReadStatus++,(c.firstReadTimestamp==null||a<c.firstReadTimestamp)&&(c.firstReadTimestamp=a))});return b}function i(a,b){var c=a.firstReadTimestamp;if(c!=null)return d("WATimeUtils").unixTime()-c>b;c=a.duration;return c!=null?d("WATimeUtils").unixTime()-a.t>c:!1}function c(a,b){var c=h(a);return Object.keys(c).every(function(a){return i(c[a],b)})}g.getPsaCampaignIndex=a;g.getPsaCampaignsString=b;g.getPSACampaigns=h;g.isCampaignExpired=i;g.isExpiredStatusPSA=c}),98);
__d("WAWebStatusV3Model",["Promise","WALogger","WATimeUtils","WAWebAlarm","WAWebApiContact","WAWebBaseModel","WAWebCollectionConstants","WAWebContactCollection","WAWebContactStatusBridge","WAWebFrontendStatusV3Getters","WAWebMsgModelUtils","WAWebStatusPSAUtils","WAWebStatusV3Collection","WAWebStatusV3Getters","WAWebSuperChatMsgs","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Status V3 onEmptyMRM with total count: ",", noEarlierMsgs: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Status v3 deleted with total count: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["msgs.length:"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unread count:"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Expiring campaignID:"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["msgs.length:"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unread count:"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Expiring message with ID:"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["No phone number found for LID ",""]);q=function(){return a};return a}var r=3600*24,s=1e3;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.t=d("WAWebBaseModel").prop(),c.unreadCount=d("WAWebBaseModel").prop(0),c.totalCount=d("WAWebBaseModel").prop(0),c.pic=d("WAWebBaseModel").prop(),c._msgs=d("WAWebBaseModel").prop(function(){return[]}),c.readKeys=d("WAWebBaseModel").session(function(){return{}}),c.contact=d("WAWebBaseModel").session(),c.expireTimer=d("WAWebBaseModel").session(),c.expireTs=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){var b=this;a.prototype.initialize.call(this);if(this.id.isLid()){var c=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(this.id));c?this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd(c)):d("WALogger").WARN(q(),this.id)}else this.addChild("contact",d("WAWebContactCollection").ContactCollection.gadd(this.id));this.listenTo(this.msgs,"add bulk_add",function(){self.setTimeout(function(){b.setupStatusExpiration()})});this.listenTo(this,"change:msgsChanged",function(){var a=d("WAWebFrontendStatusV3Getters").getLastStatus(b);a&&(b.t=a.t)})};f.isExpired=function(){return this.id.isPSA()?d("WAWebStatusPSAUtils").isExpiredStatusPSA(this.msgs.toArray(),r):d("WATimeUtils").unixTime()-this.t>r};f.setupStatusExpiration=function(){var a=this,b=this.msgs.at(0);if(!b)return;if(typeof this.expireTs==="number"&&this.expireTs<=b.t)return;var e=1;e=b.t+r+e;e<d("WATimeUtils").unixTime()?self.setTimeout(function(){a.expireMsg()}):(this.expireTimer=c("WAWebAlarm").setGlobalTimeout(this.expireMsg.bind(this),e*s,this.expireTimer),this.expireTs=b.t)};f._removeSingleMsg=function(a){var b=this.msgs;this.unreadCount>this.totalCount-1&&this.unreadCount--;this.totalCount--;b.remove(a);a["delete"]()};f.expireMsg=function(){if(this.id.isPSA()){this.expirePSAMsg();return}var a=this.msgs;while(a.length>0){var b=a.at(0);if(!b)break;var e=b.t+r>d("WATimeUtils").unixTime();if(e)break;c("gkx")("26258")||(d("WALogger").DEV(p()).devConsole(b.id,"msg timestamp:",b.t,"global unix time:",d("WATimeUtils").unixTime()),d("WALogger").DEV(o()).devConsole(this.unreadCount,"total count:",this.totalCount),d("WALogger").DEV(n()).devConsole(a.length));this._removeSingleMsg(b)}this.expireTs=void 0;this.expireTimer=void 0;this.totalCount!==0&&this.setupStatusExpiration()};f.expirePSAMsg=function(){var a=this,b=d("WAWebStatusPSAUtils").getPSACampaigns(this.msgs.toArray());this.msgs.forEach(function(e){var f=e.campaignId;if(f==null)return;f=d("WAWebStatusPSAUtils").isCampaignExpired(b[f],r);if(!f)return;c("gkx")("26258")||(d("WALogger").DEV(m()).devConsole(e.campaignId,"campaignDuration:",e.campaignDuration,"- msg with ID:",e.id,"msg timestamp:",e.t,"global unix time:",d("WATimeUtils").unixTime()),d("WALogger").DEV(l()).devConsole(a.unreadCount,"total count:",a.totalCount),d("WALogger").DEV(k()).devConsole(a.msgs.length));a._removeSingleMsg(e)});this.expireTs=void 0;this.expireTimer=void 0;this.totalCount!==0&&this.setupStatusExpiration()};f.isUnreadMessage=function(a){if(a==null)return!1;var b=d("WAWebMsgModelUtils").getReadMsgKeys(this.msgs.toArray());b=b.find(function(b){return b===a})==null;return b&&this.readKeys[a]!==!0};f.revokeMsgs=function(a){var b=this,c=new Set(a);a=this.msgs.filter(function(a){return c.has(a.id.toString())});a.forEach(function(a){return b._removeSingleMsg(a)});this.totalCount===0&&(this.expireTs=void 0,this.expireTimer=void 0)};f["delete"]=function(){d("WALogger").LOG(j(),this.totalCount),a.prototype["delete"].call(this),this.expireTimer&&c("WAWebAlarm").clearTimeout(this.expireTimer),this.expireTs!=null&&(this.expireTs=void 0),this.getCollection().remove(this.id),d("WAWebStatusV3Getters").clearStatusV3GetterCacheFor(this),d("WAWebFrontendStatusV3Getters").clearFrontendStatusV3GetterCacheFor(this)};f.onEmptyMRM=function(){var a=this;d("WALogger").LOG(i(),this.totalCount,this.msgs.msgLoadState.noEarlierMsgs?"true":"false");if(this.msgs.msgLoadState.noEarlierMsgs&&this.totalCount===0){this["delete"]();return}this.totalCount>0&&this.loadMore()["catch"](function(){})["finally"](function(){a.msgs.length||a["delete"]()})};f.loadMore=function(a){a===void 0&&d("WAWebCollectionConstants").PAGE_SIZE;if(this.msgs.msgLoadState.noEarlierMsgs)return(h||(h=b("Promise"))).resolve();if(this.msgs.msgLoadState.isLoadingEarlierMsgs)return this.msgs.loadEarlierPromise;this.msgs.msgLoadState.noEarlierMsgs=!0;return(h||(h=b("Promise"))).resolve()};f.handleReadStatus=function(a){a=a.toString();this.readKeys[a]||(this.readKeys[a]=!0,this.unreadCount>0&&this.unreadCount--)};f.sendReadStatus=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebContactStatusBridge").sendReadStatus(a,b));b&&this.handleReadStatus(a.id)});function c(b,c){return a.apply(this,arguments)}return c}();f.getCollection=function(){return b("WAWebStatusV3Collection").StatusV3Collection};f.containsMessage=function(a){return a==null?!1:this.msgs.toArray().some(function(b){return b.id.toString()===a.toString()})};return e}(c("WAWebSuperChatMsgs"));a.Proxy="statusV3";a.idClass=c("WAWebWid");e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),98);
__d("WAWebPttAudioChannels",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.registerMedia=function(a){var b=this,c=null,d=function(){c=b.claim(a,function(){a.pause()})},e=function(){c==null?void 0:c()};a.addEventListener("play",d);a.addEventListener("pause",e);return function(){c==null?void 0:c(),a.removeEventListener("play",d),a.removeEventListener("pause",e)}};c.claim=function(a,b){var c=this,d=this.$AudioChannel1;d!=null&&a!==d.key&&(d.pause(),this.trigger("paused_DEPRECATED_DO_NOT_USE",d.key));this.$AudioChannel1={key:a,pause:b};return function(){var b;a===((b=c.$AudioChannel1)==null?void 0:b.key)&&(c.$AudioChannel1=null)}};return b}(c("WAWebEventEmitter"));b=new a();g.MainAudioChannel=b}),98);
__d("WAWebCallCollection",["WALogger","WAWebBaseCollection","WAWebCallModel","WAWebPttAudioChannels","cr:6011","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["voip:processIncomingCall: Attempting to add existing call with call ID"]);h=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.pendingOffers={},c.pendingVoipCapChecks={},b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.processIncomingCall=function(a,b,e){if(this.get(a)!=null){d("WALogger").LOG(h()).devConsole(a);return}e=e;a={id:a,isGroup:(a=(a=e)==null?void 0:a.isGroupCall)!=null?a:Boolean((a=e)==null?void 0:a.groupWid),groupJid:(a=e)==null?void 0:a.groupWid};b!=null&&(a.peerJid=b);e&&(e=c("lodash").omitBy(e,function(a){return a==null}),c("lodash").merge(a,e));this.add(a,{merge:!0})};f.cleanupPendingOffer=function(a){delete this.pendingOffers[a]};f.setActiveCall=function(a){var c,e=this.activeCall&&!a;c=(c=this.activeCall)==null?void 0:c.webClientShouldHandle;this.activeCall=a;this.trigger("change:activeCall",a);e&&c&&(b("cr:6011")==null?void 0:b("cr:6011")());this.$CallCollectionImpl1==null?void 0:this.$CallCollectionImpl1();a!=null&&(this.$CallCollectionImpl1=d("WAWebPttAudioChannels").MainAudioChannel.claim(this,function(){}))};return e}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebCallModel");e=new a();f=e;g["default"]=f}),98);
__d("WAWebVoipWaCallEnums",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["INCOMING","ACTIVE_VOICE","ACTIVE_VIDEO"]);c={WANone:0,CallOfferSent:1,CallOfferReceived:2,CallOfferAckedWithRelayInfo:3,CallOfferNacked:4,CallOfferReceiptReceived:5,CallAcceptFailed:6,CallAcceptSent:7,CallAcceptReceived:8,CallPreacceptReceived:9,CallTerminateReceived:10,CallRejectReceived:11,CallOfferResend:12,AudioStreamStarted:13,P2PNegotiationSuccess:14,RelayCreateSuccess:15,CallStateChanged:16,P2PNegotiationFailed:17,MediaStreamError:18,AudioInitError:19,NoSamplingRatesForAudioRecord:20,SendOfferFailed:21,HandleOfferFailed:22,SendAcceptFailed:23,HandlePreAcceptFailed:24,HandleAcceptFailed:25,WillCreateSoundPort:26,SoundPortCreateFailed:27,TransportCandSendFailed:28,P2PTransportCreateFailed:29,P2PTransportMediaCreateFailed:30,P2PTransportStartFailed:31,P2PTransportRestartSuccess:32,MissingRelayInfo:33,ErrorGatheringHostCandidates:34,MediaStreamStartError:35,RelayLatencySendFailed:36,RelayElectionSendFailed:37,CallEnding:38,CallCaptureBufferFilled:39,CallCaptureEnded:40,RxTimeout:41,TxTimeout:42,RxTrafficStarted:43,RxTrafficStopped:44,RTCPPacketReceived:45,RTCPByeReceived:46,RelayBindsFailed:47,SoundPortCreated:48,AudioDriverRestart:49,Echo:50,SelfVideoStateChanged:51,PeerVideoStateChanged:52,VideoPortCreated:53,VideoPortCreateFailed:54,VideoDecodeStarted:55,VideoRenderStarted:56,VideoCaptureStarted:57,VideoPreviewFailed:58,VideoPreviewReady:59,VideoPreviewShouldMinimize:60,VideoStreamCreateError:61,VideoRenderFormatChanged:62,VideoCodecMismatch:63,VideoDecodePaused:64,VideoDecodeResumed:65,VideoEncodeFatalError:66,VideoDecodeFatalError:67,BatteryLevelLow:68,PeerBatteryLevelLow:69,GroupInfoChanged:70,FieldstatsReady:71,PendingCallInfoChanged:72,MuteStateChanged:73,InterruptionStateChanged:74,RxTrafficStateForPeerChanged:75,HandleAcceptReceiptFailed:76,GroupParticipantLeft:77,AudioRouteChangeRequest:78,HandleAcceptAckFailed:79,CallMissed:80,WeakWiFiSwitchedToCellular:81,CallAutoConnect:82,RejectedDecryptionFailure:83,PeerDeviceOrientationChanged:84,HandleOfferAckFailed:85,PendingCallAutoRejected:86,FDLeakDetected:87,RestartCamera:88,AudioTestReplayFinished:89,SyncDevices:90,VideoCodecStateChanged:91,CallFatal:92,UpdateJoinableCallLog:93,WAMax:94};d={WACallEndReasonUnknown:0,WACallEndReasonEndButtonTapped:1,WACallEndReasonEndButtonTappedOnBusy:2,WACallEndReasonReject:3,WACallEndReasonRejectUnavailable:4,WACallEndReasonRejectBlocked:5,WACallEndReasonTimeout:6,WACallEndReasonPeerUnavailable:7,WACallEndReasonRejectedByPeer:8,WACallEndReasonTimedoutByPeer:9,WACallEndReasonTerminatedByPeer:10,WACallEndReasonFailed:11,WACallEndReasonHandledRemotely:12};e={WACallStateNone:0,WACallStateCalling:1,WACallStatePreacceptReceived:2,WACallStateReceivedCall:3,WACallStateAcceptSent:4,WACallStateAcceptReceived:5,WACallStateCallActive:6,WACallStateCallActiveElseWhere:7,WACallStateReceivedCallWithoutOffer:8};b={INCOMING_RING:"INCOMING_RING",OUTGOING_RING:"OUTGOING_RING",OUTGOING_CALLING:"OUTGOING_CALLING",CONNECTING:"CONNECTING",CONNECTION_LOST:"CONNECTION_LOST",ACTIVE:"ACTIVE",HANDLED_REMOTELY:"HANDLED_REMOTELY",ENDED:"ENDED",REJECTED:"REJECTED",REMOTE_CALL_IN_PROGRESS:"REMOTE_CALL_IN_PROGRESS",FAILED:"FAILED",NOT_ANSWERED:"NOT_ANSWERED"};var g={OUTGOING_CALLING:"OUTGOING_CALLING",INCOMING_CALLING:"INCOMING_CALLING",ACTIVE:"ACTIVE",NONE:"NONE"},h={MEDIA_READY:"MEDIA_STREAM_READY",AUDIO_TRACK_RECEIVED:"AUDIO_TRACK_RECEIVED",VIDEO_TRACK_RECEIVED:"VIDEO_TRACK_RECEIVED"},i={INIT:"VOIP_WINDOW_INIT",UPDATE:"VOIP_WINDOW_UPDATE",REJECT:"VOIP_WINDOW_REJECT",ACCEPT:"VOIP_WINDOW_ACCEPT",IGNORE:"VOIP_WINDOW_IGNORE",END:"VOIP_WINDOW_END",OPEN_PRINA_MODAL:"OPEN_PRINA_MODAL",RESET:"VOIP_WINDOW_RESET",TOGGLE_MUTE:"VOIP_WINDOW_TOGGLE_MUTE",TOGGLE_CAMERA:"VOIP_WINDOW_TOGGLE_CAMERA",OPEN_IN_CALL_MENU:"OPEN_IN_CALL_MENU",CLOSE_IN_CALL_MENU:"CLOSE_IN_CALL_MENU",TOGGLE_DEBUG_INFO:"TOGGLE_DEBUG_INFO",GROUP_CALL_INVITE:"GROUP_CALL_INVITE",UPGRADE_REQUEST:"UPGRADE_REQUEST",UPGRADE_ACCEPT:"UPGRADE_ACCEPT",UPGRADE_REJECT:"UPGRADE_REJECT",UPGRADE_CANCEL:"UPGRADE_CANCEL",INITIATE_WINDOW_MOVE:"INITIATE_WINDOW_MOVE",CLOSE_WINDOW_CLICK:"CLOSE_WINDOW_CLICK",MINIMIZE_WINDOW_CLICK:"MINIMIZE_WINDOW_CLICK",MAXIMIZE_WINDOW_CLICK:"MAXIMIZE_WINDOW_CLICK",UNMAXIMIZE_WINDOW_CLICK:"UNMAXIMIZE_WINDOW_CLICK",WINDOW_MAXIMIZED:"WINDOW_MAXIMIZED",WINDOW_UNMAXIMIZED:"WINDOW_UNMAXIMIZED",WINDOW_TITLE_DBL_CLICK:"WINDOW_TITLE_DBL_CLICK",WINDOW_ESC_PRESS:"WINDOW_ESC_PRESS",WINDOW_ALWAYS_ON_TOP_CHANGED:"WINDOW_ALWAYS_ON_TOP_CHANGED",L10N_UPDATE:"L10N_UPDATE"},j={EVENT:"VOIP_MAIN_WINDOW_EVENT",SIGNALING:"VOIP_MAIN_WINDOW_SIGNALING",LOGGING:"VOIP_MAIN_WINDOW_LOGGING",LOG_PATH:"VOIP_MAIN_WINDOW_LOG_PATH",AV_EVENT:"AV_DEVICE_INFO_CHANGED",AV_LOG:"AV_MAIN_WINDOW_LOGGING",AV_DEVICE_CHANGE_TOAST:"AV_DEVICE_CHANGE_TOAST",AV_DEVICE_STATUS_CHANGE:"AV_DEVICE_STATUS_CHANGE"},k={ENABLE_VOIP_FEATURES:"voip:ENABLE_VOIP_FEATURES",ENABLE_VOIP_GROUP_FEATURES:"voip:ENABLE_VOIP_GROUP_FEATURES",REQUEST_NUM_PARTICIPANTS:"voip:REQUEST_NUM_PARTICIPANTS"},l={0:"invalid",1:"canceled",2:"missed",3:"unavailable",4:"reject",5:"connected"},m={INVALID:0,CANCELED:1,MISSED:2,UNAVAILABLE:3,REJECT:4,CONNECTED:5},n={VideoStateDisabled:0,VideoStateEnabled:1,VideoStatePaused:2,VideoStateUpgradeRequest:3,VideoStateUpgradeAccept:4,VideoStateUpgradeReject:5,VideoStateStopped:6,VideoStateUpgradeRejectByTimeout:7,VideoStateUpgradeCancel:8,VideoStateUpgradeCancelByTimeout:9,VideoStateError:20},o={EndedByUser:0,EndedByTimeout:1},p={ParticipantStateInvalid:0,ParticipantConnected:1,ParticipantIncoming:2,ParticipantRinging:3,ParticipantRejected:4,ParticipantTerminated:5,ParticipantTimedout:6,ParticipantCreatingCall:7,ParticipantInvisible:8,ParticipantVisible:9,ParticipantCancelOffer:10},q={CallNetworkMediumCellular:1,CallNetworkMediumWifi:2,CallNetworkMediumNone:3},r={0:"unknown",1:"android",2:"iphone",3:"wp",4:"ios_tablet",5:"kaios",6:"windows",7:"portal",8:"mac_os_electron",9:"windows_electron"},s={RELAY_ELECTION:"relayelection",RELAY_LATENCY:"relaylatency"};f.ContentType=a;f.WACallEvent=c;f.WACallEndReason=d;f.WACallState=e;f.CALL_STATES=b;f.WEB_CALL_STATES=g;f.WEB_CALL_EVENTS=h;f.VOIP_WINDOW_IPC_EVENTS=i;f.MAIN_IPC_EVENTS=j;f.RENDERER_IPC_EVENTS=k;f.CALL_LOG_RESULT=l;f.CALL_LOG_RESULT_TYPE=m;f.VideoState=n;f.VideoUpgradeRequestEndedReason=o;f.ParticipantState=p;f.CallNetworkMedium=q;f.PlatformTypeMapping=r;f.RELAY_INFO=s}),66);
__d("WAWebCallModel",["WAWebBaseModel","WAWebCallCollection","WAWebCallParticipantCollection","WAWebCmd","WAWebConnModel","WAWebPttAudioChannels","WAWebVoipGkUtils","WAWebVoipWaCallEnums"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.peerJid=d("WAWebBaseModel").prop(),e.offerTime=d("WAWebBaseModel").prop(),e.isVideo=d("WAWebBaseModel").prop(!1),e.isGroup=d("WAWebBaseModel").prop(!1),e.groupJid=d("WAWebBaseModel").prop(),e.groupCallParticipants=d("WAWebBaseModel").prop(),e.canHandleLocally=d("WAWebBaseModel").prop(!1),e.outgoing=d("WAWebBaseModel").prop(!1),e.isSilenced=d("WAWebBaseModel").prop(!1),e.offerReceivedWhileOffline=d("WAWebBaseModel").prop(!1),e.webClientShouldHandle=d("WAWebBaseModel").prop(!1),e.participants=d("WAWebBaseModel").collection(c("WAWebCallParticipantCollection")),e.callInfo=d("WAWebBaseModel").prop(),e.$Call1=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.getState=function(){return this.$Call1};f.setState=function(a){if(!i(this.$Call1,a))return;this.$Call1=a;this.$Call2()};f.$Call2=function(){var a=this.getState();if(!d("WAWebConnModel").Conn.tosShowCallNotification||!this.peerJid||c("WAWebVoipGkUtils").isVoiceCallEnabled()&&!this.isVideo||c("WAWebVoipGkUtils").isVideoCallEnabled()&&this.isVideo)return;if(!this.offerReceivedWhileOffline&&a===d("WAWebVoipWaCallEnums").CALL_STATES.INCOMING_RING){d("WAWebCmd").Cmd.alertCall(this.peerJid,this.id,this.isVideo,this.isGroup,this.canHandleLocally,this.isSilenced);a=d("WAWebPttAudioChannels").MainAudioChannel.claim(this,function(){});a()}else d("WAWebCmd").Cmd.cancelCall(this.peerJid)};f.getCollection=function(){return b("WAWebCallCollection")};return e}(d("WAWebBaseModel").BaseModel);a.Proxy="call";e=d("WAWebBaseModel").defineModel(a);var h={EMPTY:(f={},f[(a=d("WAWebVoipWaCallEnums")).CALL_STATES.INCOMING_RING]=!0,f[a.CALL_STATES.OUTGOING_CALLING]=!0,f[a.CALL_STATES.CONNECTING]=!0,f[a.CALL_STATES.REJECTED]=!0,f[a.CALL_STATES.HANDLED_REMOTELY]=!0,f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.FAILED]=!0,f),INCOMING_RING:(f={},f[a.CALL_STATES.HANDLED_REMOTELY]=!0,f[a.CALL_STATES.CONNECTING]=!0,f[a.CALL_STATES.ACTIVE]=!0,f[a.CALL_STATES.REJECTED]=!0,f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.REMOTE_CALL_IN_PROGRESS]=!0,f[a.CALL_STATES.FAILED]=!0,f),OUTGOING_CALLING:(f={},f[a.CALL_STATES.OUTGOING_RING]=!0,f[a.CALL_STATES.CONNECTING]=!0,f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.FAILED]=!0,f[a.CALL_STATES.ACTIVE]=!0,f[a.CALL_STATES.NOT_ANSWERED]=!0,f[a.CALL_STATES.REMOTE_CALL_IN_PROGRESS]=!0,f),OUTGOING_RING:(f={},f[a.CALL_STATES.CONNECTING]=!0,f[a.CALL_STATES.ACTIVE]=!0,f[a.CALL_STATES.REJECTED]=!0,f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.FAILED]=!0,f[a.CALL_STATES.NOT_ANSWERED]=!0,f),CONNECTING:(f={},f[a.CALL_STATES.ACTIVE]=!0,f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.REMOTE_CALL_IN_PROGRESS]=!0,f[a.CALL_STATES.FAILED]=!0,f),CONNECTION_LOST:(f={},f[a.CALL_STATES.ACTIVE]=!0,f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.FAILED]=!0,f),ACTIVE:(f={},f[a.CALL_STATES.ENDED]=!0,f[a.CALL_STATES.FAILED]=!0,f[a.CALL_STATES.CONNECTION_LOST]=!0,f),HANDLED_REMOTELY:{},ENDED:{},REJECTED:{},REMOTE_CALL_IN_PROGRESS:{},FAILED:{},NOT_ANSWERED:{}};function i(a,b){a=a||"EMPTY";return b in h[a]}g["default"]=e}),98);
__d("WAWebCallParticipantModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.callId=d("WAWebBaseModel").prop(),c.isIncoming=d("WAWebBaseModel").prop(!1),c.isRinging=d("WAWebBaseModel").prop(!1),c.isInterrupted=d("WAWebBaseModel").prop(!1),c.isMuted=d("WAWebBaseModel").prop(!1),c.isTrafficStopped=d("WAWebBaseModel").prop(!1),c.isInvitingToGroupCall=d("WAWebBaseModel").prop(!1),c.isVideoStopped=d("WAWebBaseModel").prop(!1),c.isVideoPaused=d("WAWebBaseModel").prop(!1),c.isVideoDecodePaused=d("WAWebBaseModel").prop(!1),c.isVideoDecodeStarted=d("WAWebBaseModel").prop(!1),c.isOfferingVideoUpgrade=d("WAWebBaseModel").prop(!1),b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebBaseModel").BaseModel);a.Proxy="callParticipant";b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebCallParticipantCollection",["WAWebBaseCollection","WAWebCallParticipantModel","lodash"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WAWebBaseCollection").BaseCollection);a.model=c("WAWebCallParticipantModel");a.comparator=function(a,b){if(a.id===b.id)return 0;else if(c("lodash").lt(a.id,b.id))return-1;return 1};g["default"]=a}),98);
__d("WAWebUpdaterDownloadStateType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["UPDATE_DOWNLOADED","UPDATE_NOT_AVAILABLE","ERROR"]);f.DownloadState=a}),66);
__d("WAWebSwUpdater",["Promise","WALogger","WAWebBuildConstants","WAWebUpdaterDownloadStateType","WAWebUpdaterVersion","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to update serviceworker, error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebSwUpdater: sw update is not available"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebSwUpdater: sw updated"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to update service worker to version. Error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebSwUpdater: sw update starts. Current app version: ",""]);m=function(){return a};return a}function a(){if(c("gkx")("26262")){d("WALogger").LOG(m(),String(new(d("WAWebUpdaterVersion").Version)(d("WAWebBuildConstants").VERSION_BASE)));var a=navigator.serviceWorker;if(a)return a.ready.then(function(c){return new(h||(h=b("Promise")))(function(b){function e(a){g(),d("WALogger").ERROR(l(),String(a)).sendLogs("sw-update-failed")}function f(){d("WALogger").LOG(k()),g(),b(d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_DOWNLOADED)}function g(){a.removeEventListener("error",e),a.removeEventListener("controllerchange",f)}a.addEventListener("error",e);a.addEventListener("controllerchange",f);c.update().then(function(){c.installing||(d("WALogger").LOG(j()),b(d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_NOT_AVAILABLE))})["catch"](function(a){e(a),b(d("WAWebUpdaterDownloadStateType").DownloadState.ERROR)})})})["catch"](function(a){d("WALogger").ERROR(i(),a).sendLogs("sw-update-failed");return d("WAWebUpdaterDownloadStateType").DownloadState.ERROR})}return(h||(h=b("Promise"))).resolve(d("WAWebUpdaterDownloadStateType").DownloadState.ERROR)}g.updateSw=a}),98);
__d("WAWebUpdater",["Promise","WALogger","WAWebAlarm","WAWebMiscBrowserUtils","WAWebStreamModel","WAWebSwUpdater","WAWebUpdaterBaseUpdater","WAWebUpdaterDownloadStateType","WAWebUpdaterVersion","cr:6022","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Service worker unregistration status: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Killing service worker"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppUpdate:update current: "," latest: ",""]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var f=e.prototype;f.showSoftUpdateBanner=function(){var a=b("WAWebStreamModel").Stream;a.needsUpdate=!0};f.update=function(a,e,f,g){var i=this;d("WALogger").LOG(k(),String(this.activeVersion),String(a));var j=++this.latestUpdateIteration,l=a==null?void 0:new(d("WAWebUpdaterVersion").Version)(a);this.clearHardExpiration();var m=b("WAWebStreamModel").Stream;typeof f==="number"&&(this.hardExpirationTimer=c("WAWebAlarm").setLocalTimeout(function(){m.clientExpired=!0,void i._update(l).then(function(a){a===d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_DOWNLOADED&&i.restart()})},Date.now()+f));this.updateInProgress=(h||(h=b("Promise"))).resolve(this.updateInProgress).then(function(){return i._update(l)}).then(function(a){i.updateInProgress=void 0;var b=j!==i.latestUpdateIteration,c=a===d("WAWebUpdaterDownloadStateType").DownloadState.ERROR,g=a===d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_NOT_AVAILABLE;if(b||c||g)return a;(e===!0||typeof f==="number")&&(m.needsUpdate=!0);typeof f==="number"&&i.listenToAndRun(m,"change:couldForce",function(){m.couldForce&&i.restart()});return a});return this.updateInProgress};f._update=function(a){if(c("gkx")("26262")&&!this.activeVersion.equals(a)&&(b("cr:6022")==null?void 0:b("cr:6022").alive))return d("WAWebSwUpdater").updateSw();a=this.activeVersion.equals(a)?d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_NOT_AVAILABLE:d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_DOWNLOADED;return(h||(h=b("Promise"))).resolve(a)};f.killServiceWorker=function(){if(!c("gkx")("26262")||!(b("cr:6022")==null?void 0:b("cr:6022").alive))return(h||(h=b("Promise"))).resolve();var a=navigator.serviceWorker;if(!a)return(h||(h=b("Promise"))).resolve();d("WALogger").LOG(j());return a.ready.then(function(a){return a.unregister()}).then(function(a){d("WALogger").LOG(i(),String(a))})};f.restart=function(a){if(a===!0)return this.update(void 0,!0,0);c("WAWebMiscBrowserUtils").hardRefresh();return(h||(h=b("Promise"))).resolve(d("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_DOWNLOADED)};return e}(d("WAWebUpdaterBaseUpdater").UpdaterBase);e=new a();g.UpdaterImpl=a;g.Updater=e}),98);
__d("WAWebUpdaterHardExpireTime",["WALogger","gkx"],(function(a,b,c,d,e,f,g){function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["hard expire time not found on dom, using fallback of 1572566400 (2019/11/1)"]);a=function(){return b};return b}b=document.getElementById("hard_expire_time");f=parseInt(b==null?void 0:(e=b.dataset)==null?void 0:e.time,10);Number.isNaN(f)&&(c("gkx")("26257")&&d("WALogger").WARN(a()),f=1572566400);b=f;g["default"]=b}),98);
__d("WAWebUpdaterBaseUpdater",["WACustomError","WATimeUtils","WAWebAlarm","WAWebBuildConstants","WAWebEventEmitter","WAWebStreamModel","WAWebUpdaterHardExpireTime","WAWebUpdaterVersion","WAWebUserPrefsMultiDevice","WAWebWAWCStorage","gkx"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this)||this;b._forceUpdateOnTakeOver=!1;b.latestUpdateIteration=0;b.activeVersion=new(d("WAWebUpdaterVersion").Version)(d("WAWebBuildConstants").VERSION_BASE);c("WAWebWAWCStorage").onVersionChange(function(){return b.setForceUpdateOnTakeOver()});return b}var f=e.prototype;f.setForceUpdateOnTakeOver=function(){this._forceUpdateOnTakeOver=!0};f.shouldForceUpdateOnTakeOver=function(){var a=this._forceUpdateOnTakeOver;this._forceUpdateOnTakeOver=!1;return!!a};f.isExpired=function(){if(c("gkx")("26257")){var a=d("WAWebUserPrefsMultiDevice").getServerClientExpirationOverride(),b=new(d("WAWebUpdaterVersion").Version)((a==null?void 0:a.appVersion)||"0.0.0");a=Number((a==null?void 0:a.timestamp)||Infinity);b.equals(this.activeVersion)||(d("WAWebUserPrefsMultiDevice").clearServerClientExpirationOverride(),a=Infinity);return d("WATimeUtils").unixTime()>a||d("WATimeUtils").unixTime()>Number(c("WAWebUpdaterHardExpireTime"))}return!1};f.clearHardExpiration=function(){this.hardExpirationTimer&&(c("WAWebAlarm").clearTimeout(this.hardExpirationTimer),this.hardExpirationTimer=void 0),this.stopListening(b("WAWebStreamModel").Stream,"change:couldForce")};f.update=function(a,b,c,e){throw new(d("WACustomError").UnimplementedMethod)("Updater::update")};f.showSoftUpdateBanner=function(){throw new(d("WACustomError").UnimplementedMethod)("Updater::showSoftUpdateBanner")};f.restart=function(a){throw new(d("WACustomError").UnimplementedMethod)("Updater::restart")};f.manualDownload=function(){throw new(d("WACustomError").UnimplementedMethod)("Updater::manualDownload")};f.killServiceWorker=function(){throw new(d("WACustomError").UnimplementedMethod)("Updater::killServiceWorker")};return e}(c("WAWebEventEmitter"));g.UpdaterBase=a}),98);